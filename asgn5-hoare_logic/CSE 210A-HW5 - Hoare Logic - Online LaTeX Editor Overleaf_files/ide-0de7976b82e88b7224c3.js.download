/*! For license information please see ide-0de7976b82e88b7224c3.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ide=t():(e.Frontend=e.Frontend||{},e.Frontend.ide=t())}(window,(function(){return function(e){function t(t){for(var r,d,h=t[0],f=t[1],p=t[2],w=0,_=[];w<h.length;w++)d=h[w],Object.prototype.hasOwnProperty.call(a,d)&&a[d]&&_.push(a[d][0]),a[d]=0;for(r in f)Object.prototype.hasOwnProperty.call(f,r)&&(e[r]=f[r]);for(y&&y(t);_.length;)_.shift()();return l.push.apply(l,p||[]),n()}function n(){for(var e,t=0;t<l.length;t++){for(var n=l[t],r=!0,h=1;h<n.length;h++){var f=n[h];0!==a[f]&&(r=!1)}r&&(l.splice(t--,1),e=d(d.s=n[0]))}return e}var r={},a={9:0},l=[];function d(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,d),n.l=!0,n.exports}d.e=function(e){var t=[],n=a[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise((function(t,r){n=a[e]=[t,r]}));t.push(n[2]=r);var l,h=document.createElement("script");h.charset="utf-8",h.timeout=120,d.nc&&h.setAttribute("nonce",d.nc),h.src=function(e){return d.p+"js/"+({1:"vendors~publish-modal~rich-text",2:"cs-json",3:"da-json",4:"de-json",5:"en-json",6:"es-json",7:"fi-json",8:"fr-json",11:"it-json",12:"ja-json",13:"ko-json",17:"nl-json",18:"no-json",19:"pl-json",20:"pt-json",21:"publish-modal",22:"rich-text",23:"ru-json",25:"sv-json",26:"tr-json",27:"vendors~rich-text",28:"zh-CN-json"}[e]||e)+"-"+{1:"05a567c40242e6a86566",2:"149c6b05ca5b7ee10066",3:"0d1a0bfb287efa3a24e0",4:"45ff1d4b550f7c7dbfb8",5:"1a6cc6cfd7f6fdbb0543",6:"3b3f6c71298ed1a16900",7:"d1e4f7d6f66b7bdb2fad",8:"805ebd067e3915e9af58",11:"abc6cb054d98c028f522",12:"ead1a8576177aa3b67e3",13:"dc91379ec4b23f57e0a9",17:"516996ae2f0d04e56029",18:"aee2358f45aa1514a2be",19:"ffceb75cfcb8119f13b1",20:"2c0b3444240549d06d0c",21:"374d73ecfce6d2ff5c49",22:"159ba40419dfe9f61269",23:"f46b8a8a5b828b50b25b",25:"6ef114107cbfab8e5d07",26:"ccb768298894a6de0e29",27:"ca631f8a2da23e4a76b1",28:"ed2b5c13b0b1bc88e377"}[e]+".js"}(e);var f=new Error;l=function(t){h.onerror=h.onload=null,clearTimeout(p);var n=a[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),l=t&&t.target&&t.target.src;f.message="Loading chunk "+e+" failed.\n("+r+": "+l+")",f.name="ChunkLoadError",f.type=r,f.request=l,n[1](f)}a[e]=void 0}};var p=setTimeout((function(){l({type:"timeout",target:h})}),12e4);h.onerror=h.onload=l,document.head.appendChild(h)}return Promise.all(t)},d.m=e,d.c=r,d.d=function(e,t,n){d.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},d.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},d.t=function(e,t){if(1&t&&(e=d(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(d.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)d.d(n,r,function(t){return e[t]}.bind(null,r));return n},d.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return d.d(t,"a",t),t},d.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},d.p="",d.oe=function(e){throw console.error(e),e};var h=window.webpackJsonp=window.webpackJsonp||[],f=h.push.bind(h);h.push=t,h=h.slice();for(var p=0;p<h.length;p++)t(h[p]);var y=f;return l.push([777,0]),n()}([function(e,t,n){"use strict";e.exports=n(601)},function(e,t,n){e.exports=n(605)()},function(e,t,n){"use strict";n(6),n(22),n(67),n(95),n(295),n(296),n(4),n(297),n(298),n(299),n(300),n(301),n(163),n(302),n(303),n(304);n.p=window.baseAssetPath;var r=n(64),a=(n(227),n(23),angular.module("ErrorCatcher",[]));a.config(["$provide",function(e){return e.decorator("$exceptionHandler",["$log","$delegate",function(e,t){return function(e,n){if("Possibly unhandled rejection: canceled"!==e||void 0!==n)return Object(r.a)(e,(function(e){return e.setTag("handler","angular-exception-handler"),e})),t(e,n)}}])}]),a.factory("unAuthHttpResponseInterceptor",["$q","$location",function(e,t){return{responseError:function responseError(t){return[401,403].includes(t.status)&&!(null!=t.config?t.config.disableAutoLoginRedirect:void 0)&&(window.location.pathname.match(/^\/project/)?window.location="/login?redir=".concat(encodeURI(window.location.pathname)):window.location="/login"),e.reject(t)}}}]),a.config(["$httpProvider",function(e){return e.interceptors.push("unAuthHttpResponseInterceptor")}]);n(137),n(228);var l=angular.module("SharelatexApp",["ui.bootstrap","autocomplete","RecursionHelper","ng-context-menu","ngSanitize","ipCookie","ErrorCatcher","localStorage","sessionStorage","ngTagsInput","ui.select"]).config(["$qProvider","$httpProvider","uiSelectConfig",function(e,t,n){return e.errorOnUnhandledRejections(!1),n.spinnerClass="fa fa-refresh ui-select-spin",r="undefined"!=typeof MathJax&&null!==MathJax?MathJax.Hub:void 0,a=function(e){return e.Config({messageStyle:"none",imageFont:null,"HTML-CSS":{availableFonts:["TeX"],scale:110,matchFontHeight:!1},TeX:{equationNumbers:{autoNumber:"AMS"},useLabelIDs:!1},skipStartupTypeset:!0,tex2jax:{processEscapes:!0,inlineMath:[["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]]}})},null!=r?a(r):void 0;var r,a}]);l.run(["$rootScope","$templateCache",function(e,t){var n=document.getElementById("ol-usersEmail");e.usersEmail=n&&n.content,t.put("bootstrap/match.tpl.html",'<div class="ui-select-match" ng-hide="$select.open && $select.searchEnabled" ng-disabled="$select.disabled" ng-class="{\'btn-default-focus\':$select.focus}"><span tabindex="-1" class="btn btn-default form-control ui-select-toggle" aria-label="{{ $select.baseTitle }} activate" ng-disabled="$select.disabled" ng-click="$select.activate()" style="outline: 0;"><span ng-show="$select.isEmpty()" class="ui-select-placeholder text-muted">{{$select.placeholder}}</span> <span ng-hide="$select.isEmpty()" class="ui-select-match-text pull-left" ng-class="{\'ui-select-allow-clear\': $select.allowClear && !$select.isEmpty()}" ng-transclude=""></span> <i class="caret pull-right" ng-click="$select.toggle($event)"></i> <a ng-show="$select.allowClear && !$select.isEmpty() && ($select.disabled !== true)" aria-label="{{ $select.baseTitle }} clear" style="margin-right: 10px" ng-click="$select.clear($event)" class="btn btn-xs btn-link pull-right"><i class="fa fa-times" aria-hidden="true"></i></a></span></div>')}]);var d=window.location.search.match(/debug=true/);window.sl_debugging=d,window.sl_console=d?console:{log:function(){}};t.a=l},,,function(e,t,n){var r;!function(){"use strict";var n={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var l=typeof r;if("string"===l||"number"===l)e.push(r);else if(Array.isArray(r)&&r.length){var d=a.apply(null,r);d&&e.push(d)}else if("object"===l)for(var h in r)n.call(r,h)&&r[h]&&e.push(h)}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(r=function(){return a}.apply(t,[]))||(e.exports=r)}()},,,,,,,function(e,t,n){"use strict";function r(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=0;(l=new Error(t.replace(/%s/g,(function(){return r[d++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}n.d(t,"a",(function(){return r}))},,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=d(n(0)),a=n(667),l=d(n(124));function d(e){return e&&e.__esModule?e:{default:e}}t.default=(0,l.default)((function(e,t,n,l,d){var h=e[t];return r.default.isValidElement(h)?new Error("Invalid "+l+" `"+d+"` of type ReactElement supplied to `"+n+"`,expected an element type (a string , component class, or function component)."):(0,a.isValidElementType)(h)?null:new Error("Invalid "+l+" `"+d+"` of value `"+h+"` supplied to `"+n+"`, expected an element type (a string , component class, or function component).")})),e.exports=t.default},function(e,t,n){"use strict";n(15),n(11),n(16),n(10),n(6),n(27),n(9),n(22);var r=n(93),a=n.n(r);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,l=void 0;try{for(var d,h=e[Symbol.iterator]();!(r=(d=h.next()).done)&&(n.push(d.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==h.return||h.return()}finally{if(a)throw l}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a={getColorScheme:function(e,t){return this.isDarkTheme(t)?{cursor:"hsl(".concat(e,", 70%, 50%)"),labelBackgroundColor:"hsl(".concat(e,", 70%, 50%)"),highlightBackgroundColor:"hsl(".concat(e,", 100%, 28%);"),strikeThroughBackgroundColor:"hsl(".concat(e,", 100%, 20%);"),strikeThroughForegroundColor:"hsl(".concat(e,", 100%, 60%);")}:{cursor:"hsl(".concat(e,", 70%, 50%)"),labelBackgroundColor:"hsl(".concat(e,", 70%, 50%)"),highlightBackgroundColor:"hsl(".concat(e,", 70%, 85%);"),strikeThroughBackgroundColor:"hsl(".concat(e,", 70%, 95%);"),strikeThroughForegroundColor:"hsl(".concat(e,", 70%, 40%);")}},isDarkTheme:function(e){var t=e.find(".ace_editor").css("background-color"),n=l(Array.from(t.match(/rgb\(([0-9]+), ([0-9]+), ([0-9]+)\)/)),4),r=(n[0],n[1]),a=n[2],d=n[3];return(r=parseInt(r,10))+(a=parseInt(a,10))+(d=parseInt(d,10))<384},ANONYMOUS_HUE:100,OWN_HUE:200,OWN_HUE_BLOCKED_SIZE:20,TOTAL_HUES:360,getHueForUserId:function(e){if(null==e||"anonymous-user"===e)return this.ANONYMOUS_HUE;if(window.user.id===e)return this.OWN_HUE;var t=this.getHueForId(e);return t>this.OWN_HUE-this.OWN_HUE_BLOCKED_SIZE&&t<this.OWN_HUE+this.OWN_HUE_BLOCKED_SIZE&&(t=(t-=this.OWN_HUE)+this.TOTAL_HUES-this.OWN_HUE_BLOCKED_SIZE),t},getHueForTagId:function(e){return this.getHueForId(e)},getHueForId:function(e){var t=a()(e);return parseInt(t.toString().slice(0,8),16)%(this.TOTAL_HUES-2*this.OWN_HUE_BLOCKED_SIZE)}}},,,,,,,,,,,,function(e,t,n){"use strict";!function e(){if(void 0!=={isDisabled:!0}&&"function"==typeof{isDisabled:!0}.checkDCE){0;try{({isDisabled:!0}).checkDCE(e)}catch(e){console.error(e)}}}(),e.exports=n(602)},,function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},,,,,function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=this&&this.__assign||function(){return(l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var d=n(506),h=n(507),f=n(0),p=n(38);t.react2angular=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=[]);var r=t||e.propTypes&&Object.keys(e.propTypes)||[];return{bindings:d(r.map((function(e){return[e,"<"]}))),controller:["$element"].concat(n,[function(t){function r(e){for(var r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];var l=t.call(this)||this;return l.$element=e,l.isDestroyed=!1,l.injectedProps={},n.forEach((function(e,t){l.injectedProps[e]=r[t]})),l}return a(r,t),Object.defineProperty(r,"$$ngIsClass",{get:function(){return!0},enumerable:!0,configurable:!0}),r.prototype.render=function(){this.isDestroyed||p.render(f.createElement(e,l({},this.props,this.injectedProps)),this.$element[0])},r.prototype.componentWillUnmount=function(){this.isDestroyed=!0,p.unmountComponentAtNode(this.$element[0])},r}(h.default)])}}},,,,,,,,,,,,,,,,,function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){(function(e){!function(){var e=function(){return this}();e||"undefined"==typeof window||(e=window);var t=function(e,n,r){"string"==typeof e?(2==arguments.length&&(r=n),t.modules[e]||(t.payloads[e]=r,t.modules[e]=null)):t.original?t.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace())};t.modules={},t.payloads={};var n,r,a=function(e,t,n){if("string"==typeof t){var r=h(e,t);if(null!=r)return n&&n(),r}else if("[object Array]"===Object.prototype.toString.call(t)){for(var a=[],d=0,f=t.length;d<f;++d){var p=h(e,t[d]);if(null==p&&l.original)return;a.push(p)}return n&&n.apply(null,a)||!0}},l=function(e,t){var n=a("",e,t);return null==n&&l.original?l.original.apply(this,arguments):n},d=function(e,t){if(-1!==t.indexOf("!")){var n=t.split("!");return d(e,n[0])+"!"+d(e,n[1])}if("."==t.charAt(0))for(t=e.split("/").slice(0,-1).join("/")+"/"+t;-1!==t.indexOf(".")&&r!=t;){var r=t;t=t.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}return t},h=function(e,n){n=d(e,n);var r=t.modules[n];if(!r){if("function"==typeof(r=t.payloads[n])){var l={},h={id:n,uri:"",exports:l,packaged:!0};l=r((function(e,t){return a(n,e,t)}),l,h)||h.exports,t.modules[n]=l,delete t.payloads[n]}r=t.modules[n]=l||r}return r};r=e,(n="ace")&&(e[n]||(e[n]={}),r=e[n]),r.define&&r.define.packaged||(t.original=r.define,r.define=t,r.define.packaged=!0),r.require&&r.require.packaged||(l.original=r.require,r.require=l,r.require.packaged=!0)}(),ace.define("ace/lib/fixoldbrowsers",[],(function(e,t,n){"use strict";"undefined"==typeof Element||Element.prototype.remove||Object.defineProperty(Element.prototype,"remove",{enumerable:!1,writable:!0,configurable:!0,value:function(){this.parentNode&&this.parentNode.removeChild(this)}})})),ace.define("ace/lib/useragent",[],(function(e,t,n){"use strict";t.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},t.getOS=function(){return t.isMac?t.OS.MAC:t.isLinux?t.OS.LINUX:t.OS.WINDOWS};var r="object"==typeof navigator?navigator:{},a=(/mac|win|linux/i.exec(r.platform)||["other"])[0].toLowerCase(),l=r.userAgent||"",d=r.appName||"";t.isWin="win"==a,t.isMac="mac"==a,t.isLinux="linux"==a,t.isIE="Microsoft Internet Explorer"==d||d.indexOf("MSAppHost")>=0?parseFloat((l.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((l.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),t.isOldIE=t.isIE&&t.isIE<9,t.isGecko=t.isMozilla=l.match(/ Gecko\/\d+/),t.isOpera="object"==typeof opera&&"[object Opera]"==Object.prototype.toString.call(window.opera),t.isWebKit=parseFloat(l.split("WebKit/")[1])||void 0,t.isChrome=parseFloat(l.split(" Chrome/")[1])||void 0,t.isEdge=parseFloat(l.split(" Edge/")[1])||void 0,t.isAIR=l.indexOf("AdobeAIR")>=0,t.isAndroid=l.indexOf("Android")>=0,t.isChromeOS=l.indexOf(" CrOS ")>=0,t.isIOS=/iPad|iPhone|iPod/.test(l)&&!window.MSStream,t.isIOS&&(t.isMac=!0),t.isMobile=t.isIOS||t.isAndroid})),ace.define("ace/lib/dom",[],(function(e,t,n){"use strict";var r=e("./useragent");if(t.buildDom=function e(t,n,r){if("string"==typeof t&&t){var a=document.createTextNode(t);return n&&n.appendChild(a),a}if(!Array.isArray(t))return t&&t.appendChild&&n&&n.appendChild(t),t;if("string"!=typeof t[0]||!t[0]){for(var l=[],d=0;d<t.length;d++){var h=e(t[d],n,r);h&&l.push(h)}return l}var f=document.createElement(t[0]),p=t[1],y=1;p&&"object"==typeof p&&!Array.isArray(p)&&(y=2);for(d=y;d<t.length;d++)e(t[d],f,r);return 2==y&&Object.keys(p).forEach((function(e){var t=p[e];"class"===e?f.className=Array.isArray(t)?t.join(" "):t:"function"==typeof t||"value"==e||"$"==e[0]?f[e]=t:"ref"===e?r&&(r[t]=f):null!=t&&f.setAttribute(e,t)})),n&&n.appendChild(f),f},t.getDocumentHead=function(e){return e||(e=document),e.head||e.getElementsByTagName("head")[0]||e.documentElement},t.createElement=function(e,t){return document.createElementNS?document.createElementNS(t||"http://www.w3.org/1999/xhtml",e):document.createElement(e)},t.removeChildren=function(e){e.innerHTML=""},t.createTextNode=function(e,t){return(t?t.ownerDocument:document).createTextNode(e)},t.createFragment=function(e){return(e?e.ownerDocument:document).createDocumentFragment()},t.hasCssClass=function(e,t){return-1!==(e.className+"").split(/\s+/g).indexOf(t)},t.addCssClass=function(e,n){t.hasCssClass(e,n)||(e.className+=" "+n)},t.removeCssClass=function(e,t){for(var n=e.className.split(/\s+/g);;){var r=n.indexOf(t);if(-1==r)break;n.splice(r,1)}e.className=n.join(" ")},t.toggleCssClass=function(e,t){for(var n=e.className.split(/\s+/g),r=!0;;){var a=n.indexOf(t);if(-1==a)break;r=!1,n.splice(a,1)}return r&&n.push(t),e.className=n.join(" "),r},t.setCssClass=function(e,n,r){r?t.addCssClass(e,n):t.removeCssClass(e,n)},t.hasCssString=function(e,t){var n,r=0;if(n=(t=t||document).querySelectorAll("style"))for(;r<n.length;)if(n[r++].id===e)return!0},t.importCssString=function(e,n,r){var a=r;r&&r.getRootNode&&(a=r.getRootNode())&&a!=r||(a=document);var l=a.ownerDocument||a;if(n&&t.hasCssString(n,a))return null;n&&(e+="\n/*# sourceURL=ace/css/"+n+" */");var d=t.createElement("style");d.appendChild(l.createTextNode(e)),n&&(d.id=n),a==l&&(a=t.getDocumentHead(l)),a.insertBefore(d,a.firstChild)},t.importCssStylsheet=function(e,n){t.buildDom(["link",{rel:"stylesheet",href:e}],t.getDocumentHead(n))},t.scrollbarWidth=function(e){var n=t.createElement("ace_inner");n.style.width="100%",n.style.minWidth="0px",n.style.height="200px",n.style.display="block";var r=t.createElement("ace_outer"),a=r.style;a.position="absolute",a.left="-10000px",a.overflow="hidden",a.width="200px",a.minWidth="0px",a.height="150px",a.display="block",r.appendChild(n);var l=e.documentElement;l.appendChild(r);var d=n.offsetWidth;a.overflow="scroll";var h=n.offsetWidth;return d==h&&(h=r.clientWidth),l.removeChild(r),d-h},"undefined"==typeof document&&(t.importCssString=function(){}),t.computedStyle=function(e,t){return window.getComputedStyle(e,"")||{}},t.setStyle=function(e,t,n){e[t]!==n&&(e[t]=n)},t.HAS_CSS_ANIMATION=!1,t.HAS_CSS_TRANSFORMS=!1,t.HI_DPI=!r.isWin||"undefined"!=typeof window&&window.devicePixelRatio>=1.5,"undefined"!=typeof document){var a=document.createElement("div");t.HI_DPI&&void 0!==a.style.transform&&(t.HAS_CSS_TRANSFORMS=!0),r.isEdge||void 0===a.style.animationName||(t.HAS_CSS_ANIMATION=!0),a=null}t.HAS_CSS_TRANSFORMS?t.translate=function(e,t,n){e.style.transform="translate("+Math.round(t)+"px, "+Math.round(n)+"px)"}:t.translate=function(e,t,n){e.style.top=Math.round(n)+"px",e.style.left=Math.round(t)+"px"}})),ace.define("ace/lib/oop",[],(function(e,t,n){"use strict";t.inherits=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})},t.mixin=function(e,t){for(var n in t)e[n]=t[n];return e},t.implement=function(e,n){t.mixin(e,n)}})),ace.define("ace/lib/keys",[],(function(e,t,n){"use strict";var r=e("./oop"),a=function(){var e,t,n={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta",91:"MetaLeft",92:"MetaRight",93:"ContextMenu"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8,control:1},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}};for(t in n.FUNCTION_KEYS)e=n.FUNCTION_KEYS[t].toLowerCase(),n[e]=parseInt(t,10);for(t in n.PRINTABLE_KEYS)e=n.PRINTABLE_KEYS[t].toLowerCase(),n[e]=parseInt(t,10);return r.mixin(n,n.MODIFIER_KEYS),r.mixin(n,n.PRINTABLE_KEYS),r.mixin(n,n.FUNCTION_KEYS),n.enter=n.return,n.escape=n.esc,n.del=n.delete,n[173]="-",function(){for(var e=["cmd","ctrl","alt","shift"],t=Math.pow(2,e.length);t--;)n.KEY_MODS[t]=e.filter((function(e){return t&n.KEY_MODS[e]})).join("-")+"-"}(),n.KEY_MODS[0]="",n.KEY_MODS[-1]="input-",n}();r.mixin(t,a),t.keyCodeToString=function(e){var t=a[e];return"string"!=typeof t&&(t=String.fromCharCode(e)),t.toLowerCase()}})),ace.define("ace/lib/event",[],(function(e,t,n){"use strict";var r,a=e("./keys"),l=e("./useragent"),d=null,h=0;function f(){return null==r&&function(){r=!1;try{document.createComment("").addEventListener("test",(function(){}),{get passive(){r={passive:!1}}})}catch(e){}}(),r}function p(e,t,n){this.elem=e,this.type=t,this.callback=n}p.prototype.destroy=function(){w(this.elem,this.type,this.callback),this.elem=this.type=this.callback=void 0};var y=t.addListener=function(e,t,n,r){e.addEventListener(t,n,f()),r&&r.$toDestroy.push(new p(e,t,n))},w=t.removeListener=function(e,t,n){e.removeEventListener(t,n,f())};t.stopEvent=function(e){return t.stopPropagation(e),t.preventDefault(e),!1},t.stopPropagation=function(e){e.stopPropagation&&e.stopPropagation()},t.preventDefault=function(e){e.preventDefault&&e.preventDefault()},t.getButton=function(e){return"dblclick"==e.type?0:"contextmenu"==e.type||l.isMac&&e.ctrlKey&&!e.altKey&&!e.shiftKey?2:e.button},t.capture=function(e,t,n){var r=e&&e.ownerDocument||document;function a(e){t&&t(e),n&&n(e),w(r,"mousemove",t),w(r,"mouseup",a),w(r,"dragstart",a)}return y(r,"mousemove",t),y(r,"mouseup",a),y(r,"dragstart",a),a},t.addMouseWheelListener=function(e,t,n){"onmousewheel"in e?y(e,"mousewheel",(function(e){void 0!==e.wheelDeltaX?(e.wheelX=-e.wheelDeltaX/8,e.wheelY=-e.wheelDeltaY/8):(e.wheelX=0,e.wheelY=-e.wheelDelta/8),t(e)}),n):"onwheel"in e?y(e,"wheel",(function(e){switch(e.deltaMode){case e.DOM_DELTA_PIXEL:e.wheelX=.35*e.deltaX||0,e.wheelY=.35*e.deltaY||0;break;case e.DOM_DELTA_LINE:case e.DOM_DELTA_PAGE:e.wheelX=5*(e.deltaX||0),e.wheelY=5*(e.deltaY||0)}t(e)}),n):y(e,"DOMMouseScroll",(function(e){e.axis&&e.axis==e.HORIZONTAL_AXIS?(e.wheelX=5*(e.detail||0),e.wheelY=0):(e.wheelX=0,e.wheelY=5*(e.detail||0)),t(e)}),n)},t.addMultiMouseDownListener=function(e,n,r,a,d){var h,f,p,w=0,_={2:"dblclick",3:"tripleclick",4:"quadclick"};function C(e){if(0!==t.getButton(e)?w=0:e.detail>1?++w>4&&(w=1):w=1,l.isIE){var d=Math.abs(e.clientX-h)>5||Math.abs(e.clientY-f)>5;p&&!d||(w=1),p&&clearTimeout(p),p=setTimeout((function(){p=null}),n[w-1]||600),1==w&&(h=e.clientX,f=e.clientY)}if(e._clicks=w,r[a]("mousedown",e),w>4)w=0;else if(w>1)return r[a](_[w],e)}Array.isArray(e)||(e=[e]),e.forEach((function(e){y(e,"mousedown",C,d)}))};var _=function(e){return 0|(e.ctrlKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.metaKey?8:0)};function C(e,t,n){var r=_(t);if(!l.isMac&&d){if(t.getModifierState&&(t.getModifierState("OS")||t.getModifierState("Win"))&&(r|=8),d.altGr){if(3==(3&r))return;d.altGr=0}if(18===n||17===n){var f="location"in t?t.location:t.keyLocation;if(17===n&&1===f)1==d[n]&&(h=t.timeStamp);else if(18===n&&3===r&&2===f){t.timeStamp-h<50&&(d.altGr=!0)}}}if((n in a.MODIFIER_KEYS&&(n=-1),!r&&13===n)&&(3===(f="location"in t?t.location:t.keyLocation)&&(e(t,r,-n),t.defaultPrevented)))return;if(l.isChromeOS&&8&r){if(e(t,r,n),t.defaultPrevented)return;r&=-9}return!!(r||n in a.FUNCTION_KEYS||n in a.PRINTABLE_KEYS)&&e(t,r,n)}function S(){d=Object.create(null)}if(t.getModifierString=function(e){return a.KEY_MODS[_(e)]},t.addCommandKeyListener=function(e,n,r){if(l.isOldGecko||l.isOpera&&!("KeyboardEvent"in window)){var a=null;y(e,"keydown",(function(e){a=e.keyCode}),r),y(e,"keypress",(function(e){return C(n,e,a)}),r)}else{var h=null;y(e,"keydown",(function(e){d[e.keyCode]=(d[e.keyCode]||0)+1;var t=C(n,e,e.keyCode);return h=e.defaultPrevented,t}),r),y(e,"keypress",(function(e){h&&(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey)&&(t.stopEvent(e),h=null)}),r),y(e,"keyup",(function(e){d[e.keyCode]=null}),r),d||(S(),y(window,"focus",S))}},"object"==typeof window&&window.postMessage&&!l.isOldIE){var k=1;t.nextTick=function(e,n){n=n||window;var r="zero-timeout-message-"+k++,a=function(l){l.data==r&&(t.stopPropagation(l),w(n,"message",a),e())};y(n,"message",a),n.postMessage(r,"*")}}t.$idleBlocked=!1,t.onIdle=function(e,n){return setTimeout((function n(){t.$idleBlocked?setTimeout(n,100):e()}),n)},t.$idleBlockId=null,t.blockIdle=function(e){t.$idleBlockId&&clearTimeout(t.$idleBlockId),t.$idleBlocked=!0,t.$idleBlockId=setTimeout((function(){t.$idleBlocked=!1}),e||100)},t.nextFrame="object"==typeof window&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),t.nextFrame?t.nextFrame=t.nextFrame.bind(window):t.nextFrame=function(e){setTimeout(e,17)}})),ace.define("ace/range",[],(function(e,t,n){"use strict";var r=function(e,t,n,r){this.start={row:e,column:t},this.end={row:n,column:r}};(function(){this.isEqual=function(e){return this.start.row===e.start.row&&this.end.row===e.end.row&&this.start.column===e.start.column&&this.end.column===e.end.column},this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},this.contains=function(e,t){return 0==this.compare(e,t)},this.compareRange=function(e){var t,n=e.end,r=e.start;return 1==(t=this.compare(n.row,n.column))?1==(t=this.compare(r.row,r.column))?2:0==t?1:0:-1==t?-2:-1==(t=this.compare(r.row,r.column))?-1:1==t?42:0},this.comparePoint=function(e){return this.compare(e.row,e.column)},this.containsRange=function(e){return 0==this.comparePoint(e.start)&&0==this.comparePoint(e.end)},this.intersects=function(e){var t=this.compareRange(e);return-1==t||0==t||1==t},this.isEnd=function(e,t){return this.end.row==e&&this.end.column==t},this.isStart=function(e,t){return this.start.row==e&&this.start.column==t},this.setStart=function(e,t){"object"==typeof e?(this.start.column=e.column,this.start.row=e.row):(this.start.row=e,this.start.column=t)},this.setEnd=function(e,t){"object"==typeof e?(this.end.column=e.column,this.end.row=e.row):(this.end.row=e,this.end.column=t)},this.inside=function(e,t){return 0==this.compare(e,t)&&(!this.isEnd(e,t)&&!this.isStart(e,t))},this.insideStart=function(e,t){return 0==this.compare(e,t)&&!this.isEnd(e,t)},this.insideEnd=function(e,t){return 0==this.compare(e,t)&&!this.isStart(e,t)},this.compare=function(e,t){return this.isMultiLine()||e!==this.start.row?e<this.start.row?-1:e>this.end.row?1:this.start.row===e?t>=this.start.column?0:-1:this.end.row===e?t<=this.end.column?0:1:0:t<this.start.column?-1:t>this.end.column?1:0},this.compareStart=function(e,t){return this.start.row==e&&this.start.column==t?-1:this.compare(e,t)},this.compareEnd=function(e,t){return this.end.row==e&&this.end.column==t?1:this.compare(e,t)},this.compareInside=function(e,t){return this.end.row==e&&this.end.column==t?1:this.start.row==e&&this.start.column==t?-1:this.compare(e,t)},this.clipRows=function(e,t){if(this.end.row>t)var n={row:t+1,column:0};else if(this.end.row<e)n={row:e,column:0};if(this.start.row>t)var a={row:t+1,column:0};else if(this.start.row<e)a={row:e,column:0};return r.fromPoints(a||this.start,n||this.end)},this.extend=function(e,t){var n=this.compare(e,t);if(0==n)return this;if(-1==n)var a={row:e,column:t};else var l={row:e,column:t};return r.fromPoints(a||this.start,l||this.end)},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return r.fromPoints(this.start,this.end)},this.collapseRows=function(){return 0==this.end.column?new r(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new r(this.start.row,0,this.end.row,0)},this.toScreenRange=function(e){var t=e.documentToScreenPosition(this.start),n=e.documentToScreenPosition(this.end);return new r(t.row,t.column,n.row,n.column)},this.moveBy=function(e,t){this.start.row+=e,this.start.column+=t,this.end.row+=e,this.end.column+=t}}).call(r.prototype),r.fromPoints=function(e,t){return new r(e.row,e.column,t.row,t.column)},r.comparePoints=function(e,t){return e.row-t.row||e.column-t.column},r.comparePoints=function(e,t){return e.row-t.row||e.column-t.column},t.Range=r})),ace.define("ace/lib/lang",[],(function(e,t,n){"use strict";t.last=function(e){return e[e.length-1]},t.stringReverse=function(e){return e.split("").reverse().join("")},t.stringRepeat=function(e,t){for(var n="";t>0;)1&t&&(n+=e),(t>>=1)&&(e+=e);return n};var r=/^\s\s*/,a=/\s\s*$/;t.stringTrimLeft=function(e){return e.replace(r,"")},t.stringTrimRight=function(e){return e.replace(a,"")},t.copyObject=function(e){var t={};for(var n in e)t[n]=e[n];return t},t.copyArray=function(e){for(var t=[],n=0,r=e.length;n<r;n++)e[n]&&"object"==typeof e[n]?t[n]=this.copyObject(e[n]):t[n]=e[n];return t},t.deepCopy=function e(t){if("object"!=typeof t||!t)return t;var n;if(Array.isArray(t)){n=[];for(var r=0;r<t.length;r++)n[r]=e(t[r]);return n}if("[object Object]"!==Object.prototype.toString.call(t))return t;for(var r in n={},t)n[r]=e(t[r]);return n},t.arrayToMap=function(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=1;return t},t.createMap=function(e){var t=Object.create(null);for(var n in e)t[n]=e[n];return t},t.arrayRemove=function(e,t){for(var n=0;n<=e.length;n++)t===e[n]&&e.splice(n,1)},t.escapeRegExp=function(e){return e.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},t.escapeHTML=function(e){return(""+e).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},t.getMatchOffsets=function(e,t){var n=[];return e.replace(t,(function(e){n.push({offset:arguments[arguments.length-2],length:e.length})})),n},t.deferredCall=function(e){var t=null,n=function(){t=null,e()},r=function(e){return r.cancel(),t=setTimeout(n,e||0),r};return r.schedule=r,r.call=function(){return this.cancel(),e(),r},r.cancel=function(){return clearTimeout(t),t=null,r},r.isPending=function(){return t},r},t.delayedCall=function(e,t){var n=null,r=function(){n=null,e()},a=function(e){null==n&&(n=setTimeout(r,e||t))};return a.delay=function(e){n&&clearTimeout(n),n=setTimeout(r,e||t)},a.schedule=a,a.call=function(){this.cancel(),e()},a.cancel=function(){n&&clearTimeout(n),n=null},a.isPending=function(){return n},a}})),ace.define("ace/clipboard",[],(function(e,t,n){"use strict";var r;n.exports={lineMode:!1,pasteCancelled:function(){return!!(r&&r>Date.now()-50)||(r=!1)},cancel:function(){r=Date.now()}}})),ace.define("ace/keyboard/textinput",[],(function(e,t,n){"use strict";var r=e("../lib/event"),a=e("../lib/useragent"),l=e("../lib/dom"),d=e("../lib/lang"),h=e("../clipboard"),f=a.isChrome<18,p=a.isIE,y=a.isChrome>63,w=e("../lib/keys"),_=w.KEY_MODS,C=a.isIOS,S=C?/\s/:/\n/,k=a.isMobile;t.TextInput=function(e,t){var n=l.createElement("textarea");n.className="ace_text-input",n.setAttribute("wrap","off"),n.setAttribute("autocorrect","off"),n.setAttribute("autocapitalize","off"),n.setAttribute("spellcheck",!1),n.style.opacity="0",e.insertBefore(n,e.firstChild);var x=!1,E=!1,A=!1,T=!1,R="";k||(n.style.fontSize="1px");var O=!1,M=!1,P="",L=0,D=0,I=0;try{var F=document.activeElement===n}catch(e){}r.addListener(n,"blur",(function(e){M||(t.onBlur(e),F=!1)}),t),r.addListener(n,"focus",(function(e){if(!M){if(F=!0,a.isEdge)try{if(!document.hasFocus())return}catch(e){}t.onFocus(e),a.isEdge?setTimeout(j):j()}}),t),this.$focusScroll=!1,this.focus=function(){if(R||y||"browser"==this.$focusScroll)return n.focus({preventScroll:!0});var e=n.style.top;n.style.position="fixed",n.style.top="0px";try{var t=0!=n.getBoundingClientRect().top}catch(e){return}var r=[];if(t)for(var a=n.parentElement;a&&1==a.nodeType;)r.push(a),a.setAttribute("ace_nocontext",!0),a=!a.parentElement&&a.getRootNode?a.getRootNode().host:a.parentElement;n.focus({preventScroll:!0}),t&&r.forEach((function(e){e.removeAttribute("ace_nocontext")})),setTimeout((function(){n.style.position="","0px"==n.style.top&&(n.style.top=e)}),0)},this.blur=function(){n.blur()},this.isFocused=function(){return F},t.on("beforeEndOperation",(function(){var e=t.curOp,r=e&&e.command&&e.command.name;if("insertstring"!=r){var a=r&&(e.docChanged||e.selectionChanged);A&&a&&(P=n.value="",Y()),j()}}));var j=C?function(e){if(F&&(!x||e)&&!T){e||(e="");var r="\n ab"+e+"cde fg\n";r!=n.value&&(n.value=P=r);var a=4+(e.length||(t.selection.isEmpty()?0:1));4==L&&D==a||n.setSelectionRange(4,a),L=4,D=a}}:function(){if(!A&&!T&&(F||B)){A=!0;var e=0,r=0,a="";if(t.session){var l=t.selection,d=l.getRange(),h=l.cursor.row;if(e=d.start.column,r=d.end.column,a=t.session.getLine(h),d.start.row!=h){var f=t.session.getLine(h-1);e=d.start.row<h-1?0:e,r+=f.length+1,a=f+"\n"+a}else if(d.end.row!=h){var p=t.session.getLine(h+1);r=d.end.row>h+1?p.length:r,r+=a.length+1,a=a+"\n"+p}else k&&h>0&&(a="\n"+a,r+=1,e+=1);a.length>400&&(e<400&&r<400?a=a.slice(0,400):(a="\n",e==r?e=r=0:(e=0,r=1)))}var y=a+"\n\n";if(y!=P&&(n.value=P=y,L=D=y.length),B&&(L=n.selectionStart,D=n.selectionEnd),D!=r||L!=e||n.selectionEnd!=D)try{n.setSelectionRange(e,r),L=e,D=r}catch(e){}A=!1}};this.resetSelection=j,F&&t.onFocus();var N=null;this.setInputHandler=function(e){N=e},this.getInputHandler=function(){return N};var B=!1,z=function(e,r){if(B&&(B=!1),E)return j(),e&&t.onPaste(e),E=!1,"";for(var l=n.selectionStart,d=n.selectionEnd,h=L,f=P.length-D,p=e,y=e.length-l,w=e.length-d,_=0;h>0&&P[_]==e[_];)_++,h--;for(p=p.slice(_),_=1;f>0&&P.length-_>L-1&&P[P.length-_]==e[e.length-_];)_++,f--;y-=_-1,w-=_-1;var C=p.length-_+1;if(C<0&&(h=-C,C=0),p=p.slice(0,C),!(r||p||y||h||f||w))return"";T=!0;var S=!1;return a.isAndroid&&". "==p&&(p="  ",S=!0),p&&!h&&!f&&!y&&!w||O?t.onTextInput(p):t.onTextInput(p,{extendLeft:h,extendRight:f,restoreStart:y,restoreEnd:w}),T=!1,P=e,L=l,D=d,I=w,S?"\n":p},H=function(e){if(A)return K();if(e&&e.inputType){if("historyUndo"==e.inputType)return t.execCommand("undo");if("historyRedo"==e.inputType)return t.execCommand("redo")}var r=n.value,a=z(r,!0);(r.length>500||S.test(a)||k&&L<1&&L==D)&&j()},U=function(e,t,n){var r=e.clipboardData||window.clipboardData;if(r&&!f){var a=p||n?"Text":"text/plain";try{return t?!1!==r.setData(a,t):r.getData(a)}catch(e){if(!n)return U(e,t,!0)}}},W=function(e,a){var l=t.getCopyText();if(!l)return r.preventDefault(e);U(e,l)?(C&&(j(l),x=l,setTimeout((function(){x=!1}),10)),a?t.onCut():t.onCopy(),r.preventDefault(e)):(x=!0,n.value=l,n.select(),setTimeout((function(){x=!1,j(),a?t.onCut():t.onCopy()})))},V=function(e){W(e,!0)},q=function(e){W(e,!1)},G=function(e){var l=U(e);h.pasteCancelled()||("string"==typeof l?(l&&t.onPaste(l,e),a.isIE&&setTimeout(j),r.preventDefault(e)):(n.value="",E=!0))};r.addCommandKeyListener(n,t.onCommandKey.bind(t),t),r.addListener(n,"select",(function(e){A||(x?x=!1:!function(e){return 0===e.selectionStart&&e.selectionEnd>=P.length&&e.value===P&&P&&e.selectionEnd!==D}(n)?k&&n.selectionStart!=L&&j():(t.selectAll(),j()))}),t),r.addListener(n,"input",H,t),r.addListener(n,"cut",V,t),r.addListener(n,"copy",q,t),r.addListener(n,"paste",G,t),"oncut"in n&&"oncopy"in n&&"onpaste"in n||r.addListener(e,"keydown",(function(e){if((!a.isMac||e.metaKey)&&e.ctrlKey)switch(e.keyCode){case 67:q(e);break;case 86:G(e);break;case 88:V(e)}}),t);var K=function(){if(A&&t.onCompositionUpdate&&!t.$readOnly){if(O)return X();if(A.useTextareaForIME)t.onCompositionUpdate(n.value);else{var e=n.value;z(e),A.markerRange&&(A.context&&(A.markerRange.start.column=A.selectionStart=A.context.compositionStartOffset),A.markerRange.end.column=A.markerRange.start.column+D-A.selectionStart+I)}}},Y=function(e){t.onCompositionEnd&&!t.$readOnly&&(A=!1,t.onCompositionEnd(),t.off("mousedown",X),e&&H())};function X(){M=!0,n.blur(),n.focus(),M=!1}var J,Q=d.delayedCall(K,50).schedule.bind(null,null);function Z(){clearTimeout(J),J=setTimeout((function(){R&&(n.style.cssText=R,R=""),t.renderer.$isMousePressed=!1,t.renderer.$keepTextAreaAtCursor&&t.renderer.$moveTextAreaToCursor()}),0)}r.addListener(n,"compositionstart",(function(e){if(!A&&t.onCompositionStart&&!t.$readOnly&&(A={},!O)){e.data&&(A.useTextareaForIME=!1),setTimeout(K,0),t._signal("compositionStart"),t.on("mousedown",X);var r=t.getSelectionRange();r.end.row=r.start.row,r.end.column=r.start.column,A.markerRange=r,A.selectionStart=L,t.onCompositionStart(A),A.useTextareaForIME?(P=n.value="",L=0,D=0):(n.msGetInputContext&&(A.context=n.msGetInputContext()),n.getInputContext&&(A.context=n.getInputContext()))}}),t),r.addListener(n,"compositionupdate",K,t),r.addListener(n,"keyup",(function(e){27==e.keyCode&&n.value.length<n.selectionStart&&(A||(P=n.value),L=D=-1,j()),Q()}),t),r.addListener(n,"keydown",Q,t),r.addListener(n,"compositionend",Y,t),this.getElement=function(){return n},this.setCommandMode=function(e){O=e,n.readOnly=!1},this.setReadOnly=function(e){O||(n.readOnly=e)},this.setCopyWithEmptySelection=function(e){},this.onContextMenu=function(e){B=!0,j(),t._emit("nativecontextmenu",{target:t,domEvent:e}),this.moveToMouse(e,!0)},this.moveToMouse=function(e,d){R||(R=n.style.cssText),n.style.cssText=(d?"z-index:100000;":"")+(a.isIE?"opacity:0.1;":"")+"text-indent: -"+(L+D)*t.renderer.characterWidth*.5+"px;";var h=t.container.getBoundingClientRect(),f=l.computedStyle(t.container),p=h.top+(parseInt(f.borderTopWidth)||0),y=h.left+(parseInt(h.borderLeftWidth)||0),w=h.bottom-p-n.clientHeight-2,_=function(e){l.translate(n,e.clientX-y-2,Math.min(e.clientY-p-2,w))};_(e),"mousedown"==e.type&&(t.renderer.$isMousePressed=!0,clearTimeout(J),a.isWin&&r.capture(t.container,_,Z))},this.onContextMenuClose=Z;var ee=function(e){t.textInput.onContextMenu(e),Z()};r.addListener(n,"mouseup",ee,t),r.addListener(n,"mousedown",(function(e){e.preventDefault(),Z()}),t),r.addListener(t.renderer.scroller,"contextmenu",ee,t),r.addListener(n,"contextmenu",ee,t),C&&function(e,t,n){var r=null,a=!1;n.addEventListener("keydown",(function(e){r&&clearTimeout(r),a=!0}),!0),n.addEventListener("keyup",(function(e){r=setTimeout((function(){a=!1}),100)}),!0);var l=function(e){if(document.activeElement===n&&!(a||A||t.$mouseHandler.isMousePressed||x)){var r=n.selectionStart,l=n.selectionEnd,d=null,h=0;if(0==r?d=w.up:1==r?d=w.home:l>D&&"\n"==P[l]?d=w.end:r<L&&" "==P[r-1]?(d=w.left,h=_.option):r<L||r==L&&D!=L&&r==l?d=w.left:l>D&&P.slice(0,l).split("\n").length>2?d=w.down:l>D&&" "==P[l-1]?(d=w.right,h=_.option):(l>D||l==D&&D!=L&&r==l)&&(d=w.right),r!==l&&(h|=_.shift),d){if(!t.onCommandKey({},h,d)&&t.commands){d=w.keyCodeToString(d);var f=t.commands.findKeyCommand(h,d);f&&t.execCommand(f)}L=r,D=l,j("")}}};document.addEventListener("selectionchange",l),t.on("destroy",(function(){document.removeEventListener("selectionchange",l)}))}(0,t,n)},t.$setUserAgentForTests=function(e,t){k=e,C=t}})),ace.define("ace/mouse/default_handlers",[],(function(e,t,n){"use strict";var r=e("../lib/useragent");function a(e){e.$clickSelection=null;var t=e.editor;t.setDefaultHandler("mousedown",this.onMouseDown.bind(e)),t.setDefaultHandler("dblclick",this.onDoubleClick.bind(e)),t.setDefaultHandler("tripleclick",this.onTripleClick.bind(e)),t.setDefaultHandler("quadclick",this.onQuadClick.bind(e)),t.setDefaultHandler("mousewheel",this.onMouseWheel.bind(e));["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"].forEach((function(t){e[t]=this[t]}),this),e.selectByLines=this.extendSelectionBy.bind(e,"getLineRange"),e.selectByWords=this.extendSelectionBy.bind(e,"getWordRange")}function l(e,t){if(e.start.row==e.end.row)var n=2*t.column-e.start.column-e.end.column;else if(e.start.row!=e.end.row-1||e.start.column||e.end.column)n=2*t.row-e.start.row-e.end.row;else var n=t.column-4;return n<0?{cursor:e.start,anchor:e.end}:{cursor:e.end,anchor:e.start}}(function(){this.onMouseDown=function(e){var t=e.inSelection(),n=e.getDocumentPosition();this.mousedownEvent=e;var a=this.editor,l=e.getButton();return 0!==l?((a.getSelectionRange().isEmpty()||1==l)&&a.selection.moveToPosition(n),void(2==l&&(a.textInput.onContextMenu(e.domEvent),r.isMozilla||e.preventDefault()))):(this.mousedownEvent.time=Date.now(),!t||a.isFocused()||(a.focus(),!this.$focusTimeout||this.$clickSelection||a.inMultiSelectMode)?(this.captureMouse(e),this.startSelect(n,e.domEvent._clicks>1),e.preventDefault()):(this.setState("focusWait"),void this.captureMouse(e)))},this.startSelect=function(e,t){e=e||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var n=this.editor;this.mousedownEvent&&(this.mousedownEvent.getShiftKey()?n.selection.selectToPosition(e):t||n.selection.moveToPosition(e),t||this.select(),n.renderer.scroller.setCapture&&n.renderer.scroller.setCapture(),n.setStyle("ace_selecting"),this.setState("select"))},this.select=function(){var e,t=this.editor,n=t.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var r=this.$clickSelection.comparePoint(n);if(-1==r)e=this.$clickSelection.end;else if(1==r)e=this.$clickSelection.start;else{var a=l(this.$clickSelection,n);n=a.cursor,e=a.anchor}t.selection.setSelectionAnchor(e.row,e.column)}t.selection.selectToPosition(n),t.renderer.scrollCursorIntoView()},this.extendSelectionBy=function(e){var t,n=this.editor,r=n.renderer.screenToTextCoordinates(this.x,this.y),a=n.selection[e](r.row,r.column);if(this.$clickSelection){var d=this.$clickSelection.comparePoint(a.start),h=this.$clickSelection.comparePoint(a.end);if(-1==d&&h<=0)t=this.$clickSelection.end,a.end.row==r.row&&a.end.column==r.column||(r=a.start);else if(1==h&&d>=0)t=this.$clickSelection.start,a.start.row==r.row&&a.start.column==r.column||(r=a.end);else if(-1==d&&1==h)r=a.end,t=a.start;else{var f=l(this.$clickSelection,r);r=f.cursor,t=f.anchor}n.selection.setSelectionAnchor(t.row,t.column)}n.selection.selectToPosition(r),n.renderer.scrollCursorIntoView()},this.selectEnd=this.selectAllEnd=this.selectByWordsEnd=this.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting"),this.editor.renderer.scroller.releaseCapture&&this.editor.renderer.scroller.releaseCapture()},this.focusWait=function(){var e,t,n,r,a=(e=this.mousedownEvent.x,t=this.mousedownEvent.y,n=this.x,r=this.y,Math.sqrt(Math.pow(n-e,2)+Math.pow(r-t,2))),l=Date.now();(a>0||l-this.mousedownEvent.time>this.$focusTimeout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},this.onDoubleClick=function(e){var t=e.getDocumentPosition(),n=this.editor,r=n.session.getBracketRange(t);r?(r.isEmpty()&&(r.start.column--,r.end.column++),this.setState("select")):(r=n.selection.getWordRange(t.row,t.column),this.setState("selectByWords")),this.$clickSelection=r,this.select()},this.onTripleClick=function(e){var t=e.getDocumentPosition(),n=this.editor;this.setState("selectByLines");var r=n.getSelectionRange();r.isMultiLine()&&r.contains(t.row,t.column)?(this.$clickSelection=n.selection.getLineRange(r.start.row),this.$clickSelection.end=n.selection.getLineRange(r.end.row).end):this.$clickSelection=n.selection.getLineRange(t.row),this.select()},this.onQuadClick=function(e){var t=this.editor;t.selectAll(),this.$clickSelection=t.getSelectionRange(),this.setState("selectAll")},this.onMouseWheel=function(e){if(!e.getAccelKey()){e.getShiftKey()&&e.wheelY&&!e.wheelX&&(e.wheelX=e.wheelY,e.wheelY=0);var t=this.editor;this.$lastScroll||(this.$lastScroll={t:0,vx:0,vy:0,allowed:0});var n=this.$lastScroll,r=e.domEvent.timeStamp,a=r-n.t,l=a?e.wheelX/a:n.vx,d=a?e.wheelY/a:n.vy;a<550&&(l=(l+n.vx)/2,d=(d+n.vy)/2);var h=Math.abs(l/d),f=!1;if(h>=1&&t.renderer.isScrollableBy(e.wheelX*e.speed,0)&&(f=!0),h<=1&&t.renderer.isScrollableBy(0,e.wheelY*e.speed)&&(f=!0),f)n.allowed=r;else if(r-n.allowed<550){Math.abs(l)<=1.5*Math.abs(n.vx)&&Math.abs(d)<=1.5*Math.abs(n.vy)?(f=!0,n.allowed=r):n.allowed=0}return n.t=r,n.vx=l,n.vy=d,f?(t.renderer.scrollBy(e.wheelX*e.speed,e.wheelY*e.speed),e.stop()):void 0}}}).call(a.prototype),t.DefaultHandlers=a})),ace.define("ace/tooltip",[],(function(e,t,n){"use strict";e("./lib/oop");var r=e("./lib/dom");function a(e){this.isOpen=!1,this.$element=null,this.$parentNode=e}(function(){this.$init=function(){return this.$element=r.createElement("div"),this.$element.className="ace_tooltip",this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},this.getElement=function(){return this.$element||this.$init()},this.setText=function(e){this.getElement().textContent=e},this.setHtml=function(e){this.getElement().innerHTML=e},this.setPosition=function(e,t){this.getElement().style.left=e+"px",this.getElement().style.top=t+"px"},this.setClassName=function(e){r.addCssClass(this.getElement(),e)},this.show=function(e,t,n){null!=e&&this.setText(e),null!=t&&null!=n&&this.setPosition(t,n),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},this.hide=function(){this.isOpen&&(this.getElement().style.display="none",this.isOpen=!1)},this.getHeight=function(){return this.getElement().offsetHeight},this.getWidth=function(){return this.getElement().offsetWidth},this.destroy=function(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)}}).call(a.prototype),t.Tooltip=a})),ace.define("ace/mouse/default_gutter_handler",[],(function(e,t,n){"use strict";var r=e("../lib/dom"),a=e("../lib/oop"),l=e("../lib/event"),d=e("../tooltip").Tooltip;function h(e){d.call(this,e)}a.inherits(h,d),function(){this.setPosition=function(e,t){var n=window.innerWidth||document.documentElement.clientWidth,r=window.innerHeight||document.documentElement.clientHeight,a=this.getWidth(),l=this.getHeight();(e+=15)+a>n&&(e-=e+a-n),(t+=15)+l>r&&(t-=20+l),d.prototype.setPosition.call(this,e,t)}}.call(h.prototype),t.GutterHandler=function(e){var t,n,a,d=e.editor,f=d.renderer.$gutterLayer,p=new h(d.container);function y(){t&&(t=clearTimeout(t)),a&&(p.hide(),a=null,d._signal("hideGutterTooltip",p),d.off("mousewheel",y))}function w(e){p.setPosition(e.x,e.y)}e.editor.setDefaultHandler("guttermousedown",(function(t){if(d.isFocused()&&0==t.getButton()&&"foldWidgets"!=f.getRegion(t)){var n=t.getDocumentPosition().row,r=d.session.selection;if(t.getShiftKey())r.selectTo(n,0);else{if(2==t.domEvent.detail)return d.selectAll(),t.preventDefault();e.$clickSelection=d.selection.getLineRange(n)}return e.setState("selectByLines"),e.captureMouse(t),t.preventDefault()}})),e.editor.setDefaultHandler("guttermousemove",(function(l){var h=l.domEvent.target||l.domEvent.srcElement;if(r.hasCssClass(h,"ace_fold-widget"))return y();a&&e.$tooltipFollowsMouse&&w(l),n=l,t||(t=setTimeout((function(){t=null,n&&!e.isMousePressed?function(){var t=n.getDocumentPosition().row,r=f.$annotations[t];if(!r)return y();if(t==d.session.getLength()){var l=d.renderer.pixelToScreenCoordinates(0,n.y).row,h=n.$pos;if(l>d.session.documentToScreenRow(h.row,h.column))return y()}if(a!=r)if(a=r.text.join("<br/>"),p.setHtml(a),p.show(),d._signal("showGutterTooltip",p),d.on("mousewheel",y),e.$tooltipFollowsMouse)w(n);else{var _=n.domEvent.target.getBoundingClientRect(),C=p.getElement().style;C.left=_.right+"px",C.top=_.bottom+"px"}}():y()}),50))})),l.addListener(d.renderer.$gutter,"mouseout",(function(e){n=null,a&&!t&&(t=setTimeout((function(){t=null,y()}),50))}),d),d.on("changeSession",y)}})),ace.define("ace/mouse/mouse_event",[],(function(e,t,n){"use strict";var r=e("../lib/event"),a=e("../lib/useragent"),l=t.MouseEvent=function(e,t){this.domEvent=e,this.editor=t,this.x=this.clientX=e.clientX,this.y=this.clientY=e.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1};(function(){this.stopPropagation=function(){r.stopPropagation(this.domEvent),this.propagationStopped=!0},this.preventDefault=function(){r.preventDefault(this.domEvent),this.defaultPrevented=!0},this.stop=function(){this.stopPropagation(),this.preventDefault()},this.getDocumentPosition=function(){return this.$pos||(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY)),this.$pos},this.inSelection=function(){if(null!==this.$inSelection)return this.$inSelection;var e=this.editor.getSelectionRange();if(e.isEmpty())this.$inSelection=!1;else{var t=this.getDocumentPosition();this.$inSelection=e.contains(t.row,t.column)}return this.$inSelection},this.getButton=function(){return r.getButton(this.domEvent)},this.getShiftKey=function(){return this.domEvent.shiftKey},this.getAccelKey=a.isMac?function(){return this.domEvent.metaKey}:function(){return this.domEvent.ctrlKey}}).call(l.prototype)})),ace.define("ace/mouse/dragdrop_handler",[],(function(e,t,n){"use strict";var r=e("../lib/dom"),a=e("../lib/event"),l=e("../lib/useragent");function d(e){var t=e.editor,n=r.createElement("img");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",l.isOpera&&(n.style.cssText="width:1px;height:1px;position:fixed;top:0;left:0;z-index:2147483647;opacity:0;");["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"].forEach((function(t){e[t]=this[t]}),this),t.on("mousedown",this.onMouseDown.bind(e));var d,f,p,y,w,_,C,S,k,x,E,A=t.container,T=0;function R(){var e=_;(function(e,n){var r=Date.now(),a=!n||e.row!=n.row,l=!n||e.column!=n.column;!x||a||l?(t.moveCursorToPosition(e),x=r,E={x:f,y:p}):h(E.x,E.y,f,p)>5?x=null:r-x>=200&&(t.renderer.scrollCursorIntoView(),x=null)})(_=t.renderer.screenToTextCoordinates(f,p),e),function(e,n){var r=Date.now(),a=t.renderer.layerConfig.lineHeight,l=t.renderer.layerConfig.characterWidth,d=t.renderer.scroller.getBoundingClientRect(),h={x:{left:f-d.left,right:d.right-f},y:{top:p-d.top,bottom:d.bottom-p}},y=Math.min(h.x.left,h.x.right),w=Math.min(h.y.top,h.y.bottom),_={row:e.row,column:e.column};y/l<=2&&(_.column+=h.x.left<h.x.right?-3:2),w/a<=1&&(_.row+=h.y.top<h.y.bottom?-1:1);var C=e.row!=_.row,S=e.column!=_.column,x=!n||e.row!=n.row;C||S&&!x?k?r-k>=200&&t.renderer.scrollCursorIntoView(_):k=r:k=null}(_,e)}function O(){w=t.selection.toOrientedRange(),d=t.session.addMarker(w,"ace_selection",t.getSelectionStyle()),t.clearSelection(),t.isFocused()&&t.renderer.$cursorLayer.setBlinking(!1),clearInterval(y),R(),y=setInterval(R,20),T=0,a.addListener(document,"mousemove",L)}function M(){clearInterval(y),t.session.removeMarker(d),d=null,t.selection.fromOrientedRange(w),t.isFocused()&&!S&&t.$resetCursorStyle(),w=null,_=null,T=0,k=null,x=null,a.removeListener(document,"mousemove",L)}this.onDragStart=function(e){if(this.cancelDrag||!A.draggable){var r=this;return setTimeout((function(){r.startSelect(),r.captureMouse(e)}),0),e.preventDefault()}w=t.getSelectionRange();var a=e.dataTransfer;a.effectAllowed=t.getReadOnly()?"copy":"copyMove",l.isOpera&&(t.container.appendChild(n),n.scrollTop=0),a.setDragImage&&a.setDragImage(n,0,0),l.isOpera&&t.container.removeChild(n),a.clearData(),a.setData("Text",t.session.getTextRange()),S=!0,this.setState("drag")},this.onDragEnd=function(e){if(A.draggable=!1,S=!1,this.setState(null),!t.getReadOnly()){var n=e.dataTransfer.dropEffect;C||"move"!=n||t.session.remove(t.getSelectionRange()),t.$resetCursorStyle()}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(e){if(!t.getReadOnly()&&D(e.dataTransfer))return f=e.clientX,p=e.clientY,d||O(),T++,e.dataTransfer.dropEffect=C=I(e),a.preventDefault(e)},this.onDragOver=function(e){if(!t.getReadOnly()&&D(e.dataTransfer))return f=e.clientX,p=e.clientY,d||(O(),T++),null!==P&&(P=null),e.dataTransfer.dropEffect=C=I(e),a.preventDefault(e)},this.onDragLeave=function(e){if(--T<=0&&d)return M(),C=null,a.preventDefault(e)},this.onDrop=function(e){if(_){var n=e.dataTransfer;if(S)switch(C){case"move":w=w.contains(_.row,_.column)?{start:_,end:_}:t.moveText(w,_);break;case"copy":w=t.moveText(w,_,!0)}else{var r=n.getData("Text");w={start:_,end:t.session.insert(_,r)},t.focus(),C=null}return M(),a.preventDefault(e)}},a.addListener(A,"dragstart",this.onDragStart.bind(e),t),a.addListener(A,"dragend",this.onDragEnd.bind(e),t),a.addListener(A,"dragenter",this.onDragEnter.bind(e),t),a.addListener(A,"dragover",this.onDragOver.bind(e),t),a.addListener(A,"dragleave",this.onDragLeave.bind(e),t),a.addListener(A,"drop",this.onDrop.bind(e),t);var P=null;function L(){null==P&&(P=setTimeout((function(){null!=P&&d&&M()}),20))}function D(e){var t=e.types;return!t||Array.prototype.some.call(t,(function(e){return"text/plain"==e||"Text"==e}))}function I(e){var t=["copy","copymove","all","uninitialized"],n=l.isMac?e.altKey:e.ctrlKey,r="uninitialized";try{r=e.dataTransfer.effectAllowed.toLowerCase()}catch(e){}var a="none";return n&&t.indexOf(r)>=0?a="copy":["move","copymove","linkmove","all","uninitialized"].indexOf(r)>=0?a="move":t.indexOf(r)>=0&&(a="copy"),a}}function h(e,t,n,r){return Math.sqrt(Math.pow(n-e,2)+Math.pow(r-t,2))}(function(){this.dragWait=function(){Date.now()-this.mousedownEvent.time>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){this.editor.container.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(e){this.editor.$resetCursorStyle(),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var e=this.editor;e.container.draggable=!0,e.renderer.$cursorLayer.setBlinking(!1),e.setStyle("ace_dragging");var t=l.isWin?"default":"move";e.renderer.setCursorStyle(t),this.setState("dragReady")},this.onMouseDrag=function(e){var t=this.editor.container;l.isIE&&"dragReady"==this.state&&(h(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y)>3&&t.dragDrop());"dragWait"===this.state&&(h(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y)>0&&(t.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition())))},this.onMouseDown=function(e){if(this.$dragEnabled){this.mousedownEvent=e;var t=this.editor,n=e.inSelection(),r=e.getButton();if(1===(e.domEvent.detail||1)&&0===r&&n){if(e.editor.inMultiSelectMode&&(e.getAccelKey()||e.getShiftKey()))return;this.mousedownEvent.time=Date.now();var a=e.domEvent.target||e.domEvent.srcElement;if("unselectable"in a&&(a.unselectable="on"),t.getDragDelay()){if(l.isWebKit)this.cancelDrag=!0,t.container.draggable=!0;this.setState("dragWait")}else this.startDrag();this.captureMouse(e,this.onMouseDrag.bind(this)),e.defaultPrevented=!0}}}}).call(d.prototype),t.DragdropHandler=d})),ace.define("ace/mouse/touch_handler",[],(function(e,t,n){"use strict";var r=e("./mouse_event").MouseEvent,a=e("../lib/event"),l=e("../lib/dom");t.addTouchListeners=function(e,t){var n,d,h,f,p,y,w,_,C,S="scroll",k=0,x=0,E=0,A=0;function T(){var e=window.navigator&&window.navigator.clipboard,n=!1,r=function(r){var a,d,h=r.target.getAttribute("action");if("more"==h||!n)return n=!n,a=t.getCopyText(),d=t.session.getUndoManager().hasUndo(),void C.replaceChild(l.buildDom(n?["span",!a&&["span",{class:"ace_mobile-button",action:"selectall"},"Select All"],a&&["span",{class:"ace_mobile-button",action:"copy"},"Copy"],a&&["span",{class:"ace_mobile-button",action:"cut"},"Cut"],e&&["span",{class:"ace_mobile-button",action:"paste"},"Paste"],d&&["span",{class:"ace_mobile-button",action:"undo"},"Undo"],["span",{class:"ace_mobile-button",action:"find"},"Find"],["span",{class:"ace_mobile-button",action:"openCommandPallete"},"Pallete"]]:["span"]),C.firstChild);"paste"==h?e.readText().then((function(e){t.execCommand(h,e)})):h&&("cut"!=h&&"copy"!=h||(e?e.writeText(t.getCopyText()):document.execCommand("copy")),t.execCommand(h)),C.firstChild.style.display="none",n=!1,"openCommandPallete"!=h&&t.focus()};C=l.buildDom(["div",{class:"ace_mobile-menu",ontouchstart:function(e){S="menu",e.stopPropagation(),e.preventDefault(),t.textInput.focus()},ontouchend:function(e){e.stopPropagation(),e.preventDefault(),r(e)},onclick:r},["span"],["span",{class:"ace_mobile-button",action:"more"},"..."]],t.container)}function R(){C||T();var e=t.selection.cursor,n=t.renderer.textToScreenCoordinates(e.row,e.column),r=t.renderer.textToScreenCoordinates(0,0).pageX,a=t.renderer.scrollLeft,l=t.container.getBoundingClientRect();C.style.top=n.pageY-l.top-3+"px",n.pageX-l.left<l.width-70?(C.style.left="",C.style.right="10px"):(C.style.right="",C.style.left=r+a-l.left+"px"),C.style.display="",C.firstChild.style.display="none",t.on("input",O)}function O(e){C&&(C.style.display="none"),t.off("input",O)}function M(){p=null,clearTimeout(p);var e=t.selection.getRange(),n=e.contains(w.row,w.column);!e.isEmpty()&&n||(t.selection.moveToPosition(w),t.selection.selectWord()),S="wait",R()}a.addListener(e,"contextmenu",(function(e){_&&t.textInput.getElement().focus()}),t),a.addListener(e,"touchstart",(function(e){var a=e.touches;if(p||a.length>1)return clearTimeout(p),p=null,h=-1,void(S="zoom");_=t.$mouseHandler.isMousePressed=!0;var l=t.renderer.layerConfig.lineHeight,y=t.renderer.layerConfig.lineHeight,C=e.timeStamp;f=C;var T=a[0],R=T.clientX,O=T.clientY;Math.abs(n-R)+Math.abs(d-O)>l&&(h=-1),n=e.clientX=R,d=e.clientY=O,E=A=0;var P=new r(e,t);if(w=P.getDocumentPosition(),C-h<500&&1==a.length&&!k)x++,e.preventDefault(),e.button=0,function(){p=null,clearTimeout(p),t.selection.moveToPosition(w);var e=x>=2?t.selection.getLineRange(w.row):t.session.getBracketRange(w);e&&!e.isEmpty()?t.selection.setRange(e):t.selection.selectWord(),S="wait"}();else{x=0;var L=t.selection.cursor,D=t.selection.isEmpty()?L:t.selection.anchor,I=t.renderer.$cursorLayer.getPixelPosition(L,!0),F=t.renderer.$cursorLayer.getPixelPosition(D,!0),j=t.renderer.scroller.getBoundingClientRect(),N=t.renderer.layerConfig.offset,B=t.renderer.scrollLeft,z=function(e,t){return(e/=y)*e+(t=t/l-.75)*t};if(e.clientX<j.left)return void(S="zoom");var H=z(e.clientX-j.left-I.left+B,e.clientY-j.top-I.top+N),U=z(e.clientX-j.left-F.left+B,e.clientY-j.top-F.top+N);H<3.5&&U<3.5&&(S=H>U?"cursor":"anchor"),S=U<3.5?"anchor":H<3.5?"cursor":"scroll",p=setTimeout(M,450)}h=C}),t),a.addListener(e,"touchend",(function(e){_=t.$mouseHandler.isMousePressed=!1,y&&clearInterval(y),"zoom"==S?(S="",k=0):p?(t.selection.moveToPosition(w),k=0,R()):"scroll"==S?(k+=60,y=setInterval((function(){k--<=0&&(clearInterval(y),y=null),Math.abs(E)<.01&&(E=0),Math.abs(A)<.01&&(A=0),k<20&&(E*=.9),k<20&&(A*=.9);var e=t.session.getScrollTop();t.renderer.scrollBy(10*E,10*A),e==t.session.getScrollTop()&&(k=0)}),10),O()):R(),clearTimeout(p),p=null}),t),a.addListener(e,"touchmove",(function(e){p&&(clearTimeout(p),p=null);var a=e.touches;if(!(a.length>1||"zoom"==S)){var l=a[0],h=n-l.clientX,y=d-l.clientY;if("wait"==S){if(!(h*h+y*y>4))return e.preventDefault();S="cursor"}n=l.clientX,d=l.clientY,e.clientX=l.clientX,e.clientY=l.clientY;var w=e.timeStamp,_=w-f;if(f=w,"scroll"==S){var C=new r(e,t);C.speed=1,C.wheelX=h,C.wheelY=y,10*Math.abs(h)<Math.abs(y)&&(h=0),10*Math.abs(y)<Math.abs(h)&&(y=0),0!=_&&(E=h/_,A=y/_),t._emit("mousewheel",C),C.propagationStopped||(E=A=0)}else{var k=new r(e,t).getDocumentPosition();"cursor"==S?t.selection.moveCursorToPosition(k):"anchor"==S&&t.selection.setSelectionAnchor(k.row,k.column),t.renderer.scrollCursorIntoView(k),e.preventDefault()}}}),t)}})),ace.define("ace/lib/net",[],(function(e,t,n){"use strict";var r=e("./dom");t.get=function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.onreadystatechange=function(){4===n.readyState&&t(n.responseText)},n.send(null)},t.loadScript=function(e,t){var n=r.getDocumentHead(),a=document.createElement("script");a.src=e,n.appendChild(a),a.onload=a.onreadystatechange=function(e,n){!n&&a.readyState&&"loaded"!=a.readyState&&"complete"!=a.readyState||(a=a.onload=a.onreadystatechange=null,n||t())}},t.qualifyURL=function(e){var t=document.createElement("a");return t.href=e,t.href}})),ace.define("ace/lib/event_emitter",[],(function(e,t,n){"use strict";var r={},a=function(){this.propagationStopped=!0},l=function(){this.defaultPrevented=!0};r._emit=r._dispatchEvent=function(e,t){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var n=this._eventRegistry[e]||[],r=this._defaultHandlers[e];if(n.length||r){"object"==typeof t&&t||(t={}),t.type||(t.type=e),t.stopPropagation||(t.stopPropagation=a),t.preventDefault||(t.preventDefault=l),n=n.slice();for(var d=0;d<n.length&&(n[d](t,this),!t.propagationStopped);d++);return r&&!t.defaultPrevented?r(t,this):void 0}},r._signal=function(e,t){var n=(this._eventRegistry||{})[e];if(n){n=n.slice();for(var r=0;r<n.length;r++)n[r](t,this)}},r.once=function(e,t){var n=this;if(this.on(e,(function r(){n.off(e,r),t.apply(null,arguments)})),!t)return new Promise((function(e){t=e}))},r.setDefaultHandler=function(e,t){var n=this._defaultHandlers;if(n||(n=this._defaultHandlers={_disabled_:{}}),n[e]){var r=n[e],a=n._disabled_[e];a||(n._disabled_[e]=a=[]),a.push(r);var l=a.indexOf(t);-1!=l&&a.splice(l,1)}n[e]=t},r.removeDefaultHandler=function(e,t){var n=this._defaultHandlers;if(n){var r=n._disabled_[e];if(n[e]==t)r&&this.setDefaultHandler(e,r.pop());else if(r){var a=r.indexOf(t);-1!=a&&r.splice(a,1)}}},r.on=r.addEventListener=function(e,t,n){this._eventRegistry=this._eventRegistry||{};var r=this._eventRegistry[e];return r||(r=this._eventRegistry[e]=[]),-1==r.indexOf(t)&&r[n?"unshift":"push"](t),t},r.off=r.removeListener=r.removeEventListener=function(e,t){this._eventRegistry=this._eventRegistry||{};var n=this._eventRegistry[e];if(n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}},r.removeAllListeners=function(e){e||(this._eventRegistry=this._defaultHandlers=void 0),this._eventRegistry&&(this._eventRegistry[e]=void 0),this._defaultHandlers&&(this._defaultHandlers[e]=void 0)},t.EventEmitter=r})),ace.define("ace/lib/app_config",[],(function(e,t,n){var r=e("./oop"),a=e("./event_emitter").EventEmitter,l={setOptions:function(e){Object.keys(e).forEach((function(t){this.setOption(t,e[t])}),this)},getOptions:function(e){var t={};if(e)Array.isArray(e)||(t=e,e=Object.keys(t));else{var n=this.$options;e=Object.keys(n).filter((function(e){return!n[e].hidden}))}return e.forEach((function(e){t[e]=this.getOption(e)}),this),t},setOption:function(e,t){if(this["$"+e]!==t){var n=this.$options[e];if(!n)return d('misspelled option "'+e+'"');if(n.forwardTo)return this[n.forwardTo]&&this[n.forwardTo].setOption(e,t);n.handlesSet||(this["$"+e]=t),n&&n.set&&n.set.call(this,t)}},getOption:function(e){var t=this.$options[e];return t?t.forwardTo?this[t.forwardTo]&&this[t.forwardTo].getOption(e):t&&t.get?t.get.call(this):this["$"+e]:d('misspelled option "'+e+'"')}};function d(e){"undefined"!=typeof console&&console.warn&&console.warn.apply(console,arguments)}function reportError(e,t){var n=new Error(e);n.data=t,"object"==typeof console&&console.error&&console.error(n),setTimeout((function(){throw n}))}var h=function(){this.$defaultOptions={}};(function(){r.implement(this,a),this.defineOptions=function(e,t,n){return e.$options||(this.$defaultOptions[t]=e.$options={}),Object.keys(n).forEach((function(t){var r=n[t];"string"==typeof r&&(r={forwardTo:r}),r.name||(r.name=t),e.$options[r.name]=r,"initialValue"in r&&(e["$"+r.name]=r.initialValue)})),r.implement(e,l),this},this.resetOptions=function(e){Object.keys(e.$options).forEach((function(t){var n=e.$options[t];"value"in n&&e.setOption(t,n.value)}))},this.setDefaultValue=function(e,t,n){if(!e){for(e in this.$defaultOptions)if(this.$defaultOptions[e][t])break;if(!this.$defaultOptions[e][t])return!1}var r=this.$defaultOptions[e]||(this.$defaultOptions[e]={});r[t]&&(r.forwardTo?this.setDefaultValue(r.forwardTo,t,n):r[t].value=n)},this.setDefaultValues=function(e,t){Object.keys(t).forEach((function(n){this.setDefaultValue(e,n,t[n])}),this)},this.warn=d,this.reportError=reportError}).call(h.prototype),t.AppConfig=h})),ace.define("ace/config",[],(function(e,t,r){var a=e("./lib/lang"),l=(e("./lib/oop"),e("./lib/net")),d=e("./lib/app_config").AppConfig;r.exports=t=new d;var h=function(){return this||"undefined"!=typeof window&&window}(),f={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{},loadWorkerFromBlob:!0,sharedPopups:!1};t.get=function(e){if(!f.hasOwnProperty(e))throw new Error("Unknown config key: "+e);return f[e]},t.set=function(e,t){if(f.hasOwnProperty(e))f[e]=t;else if(0==this.setDefaultValue("",e,t))throw new Error("Unknown config key: "+e)},t.all=function(){return a.copyObject(f)},t.$modes={},t.moduleUrl=function(e,t){if(f.$moduleUrls[e])return f.$moduleUrls[e];var n=e.split("/"),r="snippets"==(t=t||n[n.length-2]||"")?"/":"-",a=n[n.length-1];if("worker"==t&&"-"==r){var l=new RegExp("^"+t+"[\\-_]|[\\-_]"+t+"$","g");a=a.replace(l,"")}(!a||a==t)&&n.length>1&&(a=n[n.length-2]);var d=f[t+"Path"];return null==d?d=f.basePath:"/"==r&&(t=r=""),d&&"/"!=d.slice(-1)&&(d+="/"),d+t+r+a+this.get("suffix")},t.setModuleUrl=function(e,t){return f.$moduleUrls[e]=t},t.$loading={},t.loadModule=function(n,r){var a,d;Array.isArray(n)&&(d=n[0],n=n[1]);try{a=e(n)}catch(e){}if(a&&!t.$loading[n])return r&&r(a);if(t.$loading[n]||(t.$loading[n]=[]),t.$loading[n].push(r),!(t.$loading[n].length>1)){var h=function(){e([n],(function(e){t._emit("load.module",{name:n,module:e});var r=t.$loading[n];t.$loading[n]=null,r.forEach((function(t){t&&t(e)}))}))};if(!t.get("packaged"))return h();l.loadScript(t.moduleUrl(n,d),h),p()}};var p=function(){f.basePath||f.workerPath||f.modePath||f.themePath||Object.keys(f.$moduleUrls).length||(console.error("Unable to infer path to ace from script src,","use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes","or with webpack use ace/webpack-resolver"),p=function(){})};function y(a){if(h&&h.document){f.packaged=a||e.packaged||r.packaged||h.define&&n(407).packaged;for(var l,d={},p="",y=document.currentScript||document._currentScript,w=(y&&y.ownerDocument||document).getElementsByTagName("script"),_=0;_<w.length;_++){var C=w[_],S=C.src||C.getAttribute("src");if(S){for(var k=C.attributes,x=0,E=k.length;x<E;x++){var A=k[x];0===A.name.indexOf("data-ace-")&&(d[(l=A.name.replace(/^data-ace-/,""),l.replace(/-(.)/g,(function(e,t){return t.toUpperCase()})))]=A.value)}var T=S.match(/^(.*)\/ace(\-\w+)?\.js(\?|$)/);T&&(p=T[1])}}for(var R in p&&(d.base=d.base||p,d.packaged=!0),d.basePath=d.base,d.workerPath=d.workerPath||d.base,d.modePath=d.modePath||d.base,d.themePath=d.themePath||d.base,delete d.base,d)void 0!==d[R]&&t.set(R,d[R])}}y(!0),t.init=y,t.version="1.4.12"})),ace.define("ace/mouse/mouse_handler",[],(function(e,t,n){"use strict";var r=e("../lib/event"),a=e("../lib/useragent"),l=e("./default_handlers").DefaultHandlers,d=e("./default_gutter_handler").GutterHandler,h=e("./mouse_event").MouseEvent,f=e("./dragdrop_handler").DragdropHandler,p=e("./touch_handler").addTouchListeners,y=e("../config"),w=function(e){var t=this;this.editor=e,new l(this),new d(this),new f(this);var n=function(t){(!document.hasFocus||!document.hasFocus()||!e.isFocused()&&document.activeElement==(e.textInput&&e.textInput.getElement()))&&window.focus(),e.focus()},h=e.renderer.getMouseEventTarget();r.addListener(h,"click",this.onMouseEvent.bind(this,"click"),e),r.addListener(h,"mousemove",this.onMouseMove.bind(this,"mousemove"),e),r.addMultiMouseDownListener([h,e.renderer.scrollBarV&&e.renderer.scrollBarV.inner,e.renderer.scrollBarH&&e.renderer.scrollBarH.inner,e.textInput&&e.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent",e),r.addMouseWheelListener(e.container,this.onMouseWheel.bind(this,"mousewheel"),e),p(e.container,e);var y=e.renderer.$gutter;r.addListener(y,"mousedown",this.onMouseEvent.bind(this,"guttermousedown"),e),r.addListener(y,"click",this.onMouseEvent.bind(this,"gutterclick"),e),r.addListener(y,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick"),e),r.addListener(y,"mousemove",this.onMouseEvent.bind(this,"guttermousemove"),e),r.addListener(h,"mousedown",n,e),r.addListener(y,"mousedown",n,e),a.isIE&&e.renderer.scrollBarV&&(r.addListener(e.renderer.scrollBarV.element,"mousedown",n,e),r.addListener(e.renderer.scrollBarH.element,"mousedown",n,e)),e.on("mousemove",(function(n){if(!t.state&&!t.$dragDelay&&t.$dragEnabled){var r=e.renderer.screenToTextCoordinates(n.x,n.y),a=e.session.selection.getRange(),l=e.renderer;!a.isEmpty()&&a.insideStart(r.row,r.column)?l.setCursorStyle("default"):l.setCursorStyle("")}}),e)};(function(){this.onMouseEvent=function(e,t){this.editor._emit(e,new h(t,this.editor))},this.onMouseMove=function(e,t){var n=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;n&&n.length&&this.editor._emit(e,new h(t,this.editor))},this.onMouseWheel=function(e,t){var n=new h(t,this.editor);n.speed=2*this.$scrollSpeed,n.wheelX=t.wheelX,n.wheelY=t.wheelY,this.editor._emit(e,n)},this.setState=function(e){this.state=e},this.captureMouse=function(e,t){this.x=e.x,this.y=e.y,this.isMousePressed=!0;var n=this.editor,l=this.editor.renderer;l.$isMousePressed=!0;var d=this,f=function(e){if(e){if(a.isWebKit&&!e.which&&d.releaseMouse)return d.releaseMouse();d.x=e.clientX,d.y=e.clientY,t&&t(e),d.mouseEvent=new h(e,d.editor),d.$mouseMoved=!0}},p=function(e){n.off("beforeEndOperation",w),clearInterval(_),y(),d[d.state+"End"]&&d[d.state+"End"](e),d.state="",d.isMousePressed=l.$isMousePressed=!1,l.$keepTextAreaAtCursor&&l.$moveTextAreaToCursor(),d.$onCaptureMouseMove=d.releaseMouse=null,e&&d.onMouseEvent("mouseup",e),n.endOperation()},y=function(){d[d.state]&&d[d.state](),d.$mouseMoved=!1};if(a.isOldIE&&"dblclick"==e.domEvent.type)return setTimeout((function(){p(e)}));var w=function(e){d.releaseMouse&&n.curOp.command.name&&n.curOp.selectionChanged&&(d[d.state+"End"]&&d[d.state+"End"](),d.state="",d.releaseMouse())};n.on("beforeEndOperation",w),n.startOperation({command:{name:"mouse"}}),d.$onCaptureMouseMove=f,d.releaseMouse=r.capture(this.editor.container,f,p);var _=setInterval(y,20)},this.releaseMouse=null,this.cancelContextMenu=function(){var e=function(t){t&&t.domEvent&&"contextmenu"!=t.domEvent.type||(this.editor.off("nativecontextmenu",e),t&&t.domEvent&&r.stopEvent(t.domEvent))}.bind(this);setTimeout(e,10),this.editor.on("nativecontextmenu",e)},this.destroy=function(){this.releaseMouse&&this.releaseMouse()}}).call(w.prototype),y.defineOptions(w.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:a.isMac?150:0},dragEnabled:{initialValue:!0},focusTimeout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),t.MouseHandler=w})),ace.define("ace/mouse/fold_handler",[],(function(e,t,n){"use strict";var r=e("../lib/dom");t.FoldHandler=function(e){e.on("click",(function(t){var n=t.getDocumentPosition(),a=e.session,l=a.getFoldAt(n.row,n.column,1);l&&(t.getAccelKey()?a.removeFold(l):a.expandFold(l),t.stop());var d=t.domEvent&&t.domEvent.target;d&&r.hasCssClass(d,"ace_inline_button")&&r.hasCssClass(d,"ace_toggle_wrap")&&(a.setOption("wrap",!a.getUseWrapMode()),e.renderer.scrollCursorIntoView())})),e.on("gutterclick",(function(t){if("foldWidgets"==e.renderer.$gutterLayer.getRegion(t)){var n=t.getDocumentPosition().row,r=e.session;r.foldWidgets&&r.foldWidgets[n]&&e.session.onFoldWidgetClick(n,t),e.isFocused()||e.focus(),t.stop()}})),e.on("gutterdblclick",(function(t){if("foldWidgets"==e.renderer.$gutterLayer.getRegion(t)){var n=t.getDocumentPosition().row,r=e.session,a=r.getParentFoldRangeData(n,!0),l=a.range||a.firstRange;if(l){n=l.start.row;var d=r.getFoldAt(n,r.getLine(n).length,1);d?r.removeFold(d):(r.addFold("...",l),e.renderer.scrollCursorIntoView({row:l.start.row,column:0}))}t.stop()}}))}})),ace.define("ace/keyboard/keybinding",[],(function(e,t,n){"use strict";var r=e("../lib/keys"),a=e("../lib/event"),l=function(e){this.$editor=e,this.$data={editor:e},this.$handlers=[],this.setDefaultHandler(e.commands)};(function(){this.setDefaultHandler=function(e){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=e,this.addKeyboardHandler(e,0)},this.setKeyboardHandler=function(e){var t=this.$handlers;if(t[t.length-1]!=e){for(;t[t.length-1]&&t[t.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(t[t.length-1]);this.addKeyboardHandler(e,1)}},this.addKeyboardHandler=function(e,t){if(e){"function"!=typeof e||e.handleKeyboard||(e.handleKeyboard=e);var n=this.$handlers.indexOf(e);-1!=n&&this.$handlers.splice(n,1),null==t?this.$handlers.push(e):this.$handlers.splice(t,0,e),-1==n&&e.attach&&e.attach(this.$editor)}},this.removeKeyboardHandler=function(e){var t=this.$handlers.indexOf(e);return-1!=t&&(this.$handlers.splice(t,1),e.detach&&e.detach(this.$editor),!0)},this.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},this.getStatusText=function(){var e=this.$data,t=e.editor;return this.$handlers.map((function(n){return n.getStatusText&&n.getStatusText(t,e)||""})).filter(Boolean).join(" ")},this.$callKeyboardHandlers=function(e,t,n,r){for(var l,d=!1,h=this.$editor.commands,f=this.$handlers.length;f--&&!((l=this.$handlers[f].handleKeyboard(this.$data,e,t,n,r))&&l.command&&((d="null"==l.command||h.exec(l.command,this.$editor,l.args,r))&&r&&-1!=e&&1!=l.passEvent&&1!=l.command.passEvent&&a.stopEvent(r),d)););return d||-1!=e||(l={command:"insertstring"},d=h.exec("insertstring",this.$editor,t)),d&&this.$editor._signal&&this.$editor._signal("keyboardActivity",l),d},this.onCommandKey=function(e,t,n){var a=r.keyCodeToString(n);return this.$callKeyboardHandlers(t,a,n,e)},this.onTextInput=function(e){return this.$callKeyboardHandlers(-1,e)}}).call(l.prototype),t.KeyBinding=l})),ace.define("ace/lib/bidiutil",[],(function(e,t,n){"use strict";var r=0,a=0,l=!1,d=!1,h=!1,f=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],y=[18,18,18,18,18,18,18,18,18,6,5,6,8,5,18,18,18,18,18,18,18,18,18,18,18,18,18,18,5,5,5,6,8,4,4,11,11,11,4,4,4,4,4,10,9,10,9,9,2,2,2,2,2,2,2,2,2,2,9,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,18,18,18,18,18,18,5,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,9,4,11,11,11,11,4,4,4,4,0,4,4,18,4,4,11,11,2,2,4,0,4,4,4,2,0,4,4,4,4,4],w=[8,8,8,8,8,8,8,8,8,8,8,18,18,18,0,1,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,8,5,13,14,15,16,17,9,11,11,11,11,11,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,9,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,8];function _(e,t,n){if(!(a<e))if(1!=e||1!=r||d)for(var l,h,f,p,y=n.length,w=0;w<y;){if(t[w]>=e){for(l=w+1;l<y&&t[l]>=e;)l++;for(h=w,f=l-1;h<f;h++,f--)p=n[h],n[h]=n[f],n[f]=p;w=l}w++}else n.reverse()}function C(e,t,n,a){var f,p,y,w,_=t[a];switch(_){case 0:case 1:l=!1;case 4:case 3:return _;case 2:return l?3:2;case 7:return l=!0,!0,1;case 8:return 4;case 9:return a<1||a+1>=t.length||2!=(f=n[a-1])&&3!=f||2!=(p=t[a+1])&&3!=p?4:(l&&(p=3),p==f?p:4);case 10:return 2==(f=a>0?n[a-1]:5)&&a+1<t.length&&2==t[a+1]?2:4;case 11:if(a>0&&2==n[a-1])return 2;if(l)return 4;for(w=a+1,y=t.length;w<y&&11==t[w];)w++;return w<y&&2==t[w]?2:4;case 12:for(y=t.length,w=a+1;w<y&&12==t[w];)w++;if(w<y){var C=e[a],S=C>=1425&&C<=2303||64286==C;if(f=t[w],S&&(1==f||7==f))return 1}return a<1||5==(f=t[a-1])?4:n[a-1];case 5:return l=!1,d=!0,r;case 6:return h=!0,4;case 13:case 14:case 16:case 17:case 15:l=!1;case 18:return 4}}function S(e){var t=e.charCodeAt(0),n=t>>8;return 0==n?t>191?0:y[t]:5==n?/[\u0591-\u05f4]/.test(e)?1:0:6==n?/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(e)?12:/[\u0660-\u0669\u066b-\u066c]/.test(e)?3:1642==t?11:/[\u06f0-\u06f9]/.test(e)?2:7:32==n&&t<=8287?w[255&t]:254==n&&t>=65136?7:4}t.L=0,t.R=1,t.EN=2,t.ON_R=3,t.AN=4,t.R_H=5,t.B=6,t.RLE=7,t.DOT="·",t.doBidiReorder=function(e,n,y){if(e.length<2)return{};var w=e.split(""),k=new Array(w.length),x=new Array(w.length),E=[];r=y?1:0,function(e,t,n,y){var w=r?p:f,_=null,k=null,x=null,E=0,A=null,T=-1,R=null,O=null,M=[];if(!y)for(R=0,y=[];R<n;R++)y[R]=S(e[R]);for(a=r,l=!1,!1,d=!1,h=!1,O=0;O<n;O++){if(_=E,M[O]=k=C(e,y,M,O),A=240&(E=w[_][k]),E&=15,t[O]=x=w[E][5],A>0)if(16==A){for(R=T;R<O;R++)t[R]=1;T=-1}else T=-1;if(w[E][6])-1==T&&(T=O);else if(T>-1){for(R=T;R<O;R++)t[R]=x;T=-1}5==y[O]&&(t[O]=0),a|=x}if(h)for(R=0;R<n;R++)if(6==y[R]){t[R]=r;for(var P=R-1;P>=0&&8==y[P];P--)t[P]=r}}(w,E,w.length,n);for(var A=0;A<k.length;k[A]=A,A++);_(2,E,k),_(1,E,k);for(A=0;A<k.length-1;A++)3===n[A]?E[A]=t.AN:1===E[A]&&(n[A]>7&&n[A]<13||4===n[A]||18===n[A])?E[A]=t.ON_R:A>0&&"ل"===w[A-1]&&/\u0622|\u0623|\u0625|\u0627/.test(w[A])&&(E[A-1]=E[A]=t.R_H,A++);w[w.length-1]===t.DOT&&(E[w.length-1]=t.B),"‫"===w[0]&&(E[0]=t.RLE);for(A=0;A<k.length;A++)x[A]=E[k[A]];return{logicalFromVisual:k,bidiLevels:x}},t.hasBidiCharacters=function(e,t){for(var n=!1,r=0;r<e.length;r++)t[r]=S(e.charAt(r)),n||1!=t[r]&&7!=t[r]&&3!=t[r]||(n=!0);return n},t.getVisualFromLogicalIdx=function(e,t){for(var n=0;n<t.logicalFromVisual.length;n++)if(t.logicalFromVisual[n]==e)return n;return 0}})),ace.define("ace/bidihandler",[],(function(e,t,n){"use strict";var r=e("./lib/bidiutil"),a=e("./lib/lang"),l=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\u202B]/,d=function(e){this.session=e,this.bidiMap={},this.currentRow=null,this.bidiUtil=r,this.charWidths=[],this.EOL="¬",this.showInvisibles=!0,this.isRtlDir=!1,this.$isRtl=!1,this.line="",this.wrapIndent=0,this.EOF="¶",this.RLE="‫",this.contentWidth=0,this.fontMetrics=null,this.rtlLineOffset=0,this.wrapOffset=0,this.isMoveLeftOperation=!1,this.seenBidi=l.test(e.getValue())};(function(){this.isBidiRow=function(e,t,n){return!!this.seenBidi&&(e!==this.currentRow&&(this.currentRow=e,this.updateRowLine(t,n),this.updateBidiMap()),this.bidiMap.bidiLevels)},this.onChange=function(e){this.seenBidi?this.currentRow=null:"insert"==e.action&&l.test(e.lines.join("\n"))&&(this.seenBidi=!0,this.currentRow=null)},this.getDocumentRow=function(){var e=0,t=this.session.$screenRowCache;if(t.length){var n=this.session.$getRowCacheIndex(t,this.currentRow);n>=0&&(e=this.session.$docRowCache[n])}return e},this.getSplitIndex=function(){var e=0,t=this.session.$screenRowCache;if(t.length)for(var n,r=this.session.$getRowCacheIndex(t,this.currentRow);this.currentRow-e>0&&(n=this.session.$getRowCacheIndex(t,this.currentRow-e-1))===r;)r=n,e++;else e=this.currentRow;return e},this.updateRowLine=function(e,t){void 0===e&&(e=this.getDocumentRow());var n=e===this.session.getLength()-1?this.EOF:this.EOL;if(this.wrapIndent=0,this.line=this.session.getLine(e),this.isRtlDir=this.$isRtl||this.line.charAt(0)===this.RLE,this.session.$useWrapMode){var l=this.session.$wrapData[e];l&&(void 0===t&&(t=this.getSplitIndex()),t>0&&l.length?(this.wrapIndent=l.indent,this.wrapOffset=this.wrapIndent*this.charWidths[r.L],this.line=t<l.length?this.line.substring(l[t-1],l[t]):this.line.substring(l[l.length-1])):this.line=this.line.substring(0,l[t])),t==l.length&&(this.line+=this.showInvisibles?n:r.DOT)}else this.line+=this.showInvisibles?n:r.DOT;var d,h=this.session,f=0;this.line=this.line.replace(/\t|[\u1100-\u2029, \u202F-\uFFE6]/g,(function(e,t){return"\t"===e||h.isFullWidth(e.charCodeAt(0))?(d="\t"===e?h.getScreenTabSize(t+f):2,f+=d-1,a.stringRepeat(r.DOT,d)):e})),this.isRtlDir&&(this.fontMetrics.$main.textContent=this.line.charAt(this.line.length-1)==r.DOT?this.line.substr(0,this.line.length-1):this.line,this.rtlLineOffset=this.contentWidth-this.fontMetrics.$main.getBoundingClientRect().width)},this.updateBidiMap=function(){var e=[];r.hasBidiCharacters(this.line,e)||this.isRtlDir?this.bidiMap=r.doBidiReorder(this.line,e,this.isRtlDir):this.bidiMap={}},this.markAsDirty=function(){this.currentRow=null},this.updateCharacterWidths=function(e){if(this.characterWidth!==e.$characterSize.width){this.fontMetrics=e;var t=this.characterWidth=e.$characterSize.width,n=e.$measureCharWidth("ה");this.charWidths[r.L]=this.charWidths[r.EN]=this.charWidths[r.ON_R]=t,this.charWidths[r.R]=this.charWidths[r.AN]=n,this.charWidths[r.R_H]=.45*n,this.charWidths[r.B]=this.charWidths[r.RLE]=0,this.currentRow=null}},this.setShowInvisibles=function(e){this.showInvisibles=e,this.currentRow=null},this.setEolChar=function(e){this.EOL=e},this.setContentWidth=function(e){this.contentWidth=e},this.isRtlLine=function(e){return!!this.$isRtl||(null!=e?this.session.getLine(e).charAt(0)==this.RLE:this.isRtlDir)},this.setRtlDirection=function(e,t){for(var n=e.getCursorPosition(),r=e.selection.getSelectionAnchor().row;r<=n.row;r++)t||e.session.getLine(r).charAt(0)!==e.session.$bidiHandler.RLE?t&&e.session.getLine(r).charAt(0)!==e.session.$bidiHandler.RLE&&e.session.doc.insert({column:0,row:r},e.session.$bidiHandler.RLE):e.session.doc.removeInLine(r,0,1)},this.getPosLeft=function(e){e-=this.wrapIndent;var t=this.line.charAt(0)===this.RLE?1:0,n=e>t?this.session.getOverwrite()?e:e-1:t,a=r.getVisualFromLogicalIdx(n,this.bidiMap),l=this.bidiMap.bidiLevels,d=0;!this.session.getOverwrite()&&e<=t&&l[a]%2!=0&&a++;for(var h=0;h<a;h++)d+=this.charWidths[l[h]];return!this.session.getOverwrite()&&e>t&&l[a]%2==0&&(d+=this.charWidths[l[a]]),this.wrapIndent&&(d+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset),this.isRtlDir&&(d+=this.rtlLineOffset),d},this.getSelections=function(e,t){var n,r=this.bidiMap,a=r.bidiLevels,l=[],d=0,h=Math.min(e,t)-this.wrapIndent,f=Math.max(e,t)-this.wrapIndent,p=!1,y=!1,w=0;this.wrapIndent&&(d+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);for(var _,C=0;C<a.length;C++)_=r.logicalFromVisual[C],n=a[C],(p=_>=h&&_<f)&&!y?w=d:!p&&y&&l.push({left:w,width:d-w}),d+=this.charWidths[n],y=p;if(p&&C===a.length&&l.push({left:w,width:d-w}),this.isRtlDir)for(var S=0;S<l.length;S++)l[S].left+=this.rtlLineOffset;return l},this.offsetToCol=function(e){this.isRtlDir&&(e-=this.rtlLineOffset);var t=0,n=(e=Math.max(e,0),0),r=0,a=this.bidiMap.bidiLevels,l=this.charWidths[a[r]];for(this.wrapIndent&&(e-=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);e>n+l/2;){if(n+=l,r===a.length-1){l=0;break}l=this.charWidths[a[++r]]}return r>0&&a[r-1]%2!=0&&a[r]%2==0?(e<n&&r--,t=this.bidiMap.logicalFromVisual[r]):r>0&&a[r-1]%2==0&&a[r]%2!=0?t=1+(e>n?this.bidiMap.logicalFromVisual[r]:this.bidiMap.logicalFromVisual[r-1]):this.isRtlDir&&r===a.length-1&&0===l&&a[r-1]%2==0||!this.isRtlDir&&0===r&&a[r]%2!=0?t=1+this.bidiMap.logicalFromVisual[r]:(r>0&&a[r-1]%2!=0&&0!==l&&r--,t=this.bidiMap.logicalFromVisual[r]),0===t&&this.isRtlDir&&t++,t+this.wrapIndent}}).call(d.prototype),t.BidiHandler=d})),ace.define("ace/selection",[],(function(e,t,n){"use strict";var r=e("./lib/oop"),a=e("./lib/lang"),l=e("./lib/event_emitter").EventEmitter,d=e("./range").Range,h=function(e){this.session=e,this.doc=e.getDocument(),this.clearSelection(),this.cursor=this.lead=this.doc.createAnchor(0,0),this.anchor=this.doc.createAnchor(0,0),this.$silent=!1;var t=this;this.cursor.on("change",(function(e){t.$cursorChanged=!0,t.$silent||t._emit("changeCursor"),t.$isEmpty||t.$silent||t._emit("changeSelection"),t.$keepDesiredColumnOnChange||e.old.column==e.value.column||(t.$desiredColumn=null)})),this.anchor.on("change",(function(){t.$anchorChanged=!0,t.$isEmpty||t.$silent||t._emit("changeSelection")}))};(function(){r.implement(this,l),this.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},this.isMultiLine=function(){return!this.$isEmpty&&this.anchor.row!=this.cursor.row},this.getCursor=function(){return this.lead.getPosition()},this.setSelectionAnchor=function(e,t){this.$isEmpty=!1,this.anchor.setPosition(e,t)},this.getAnchor=this.getSelectionAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},this.getSelectionLead=function(){return this.lead.getPosition()},this.isBackwards=function(){var e=this.anchor,t=this.lead;return e.row>t.row||e.row==t.row&&e.column>t.column},this.getRange=function(){var e=this.anchor,t=this.lead;return this.$isEmpty?d.fromPoints(t,t):this.isBackwards()?d.fromPoints(t,e):d.fromPoints(e,t)},this.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},this.selectAll=function(){this.$setSelection(0,0,Number.MAX_VALUE,Number.MAX_VALUE)},this.setRange=this.setSelectionRange=function(e,t){var n=t?e.end:e.start,r=t?e.start:e.end;this.$setSelection(n.row,n.column,r.row,r.column)},this.$setSelection=function(e,t,n,r){if(!this.$silent){var a=this.$isEmpty,l=this.inMultiSelectMode;this.$silent=!0,this.$cursorChanged=this.$anchorChanged=!1,this.anchor.setPosition(e,t),this.cursor.setPosition(n,r),this.$isEmpty=!d.comparePoints(this.anchor,this.cursor),this.$silent=!1,this.$cursorChanged&&this._emit("changeCursor"),(this.$cursorChanged||this.$anchorChanged||a!=this.$isEmpty||l)&&this._emit("changeSelection")}},this.$moveSelection=function(e){var t=this.lead;this.$isEmpty&&this.setSelectionAnchor(t.row,t.column),e.call(this)},this.selectTo=function(e,t){this.$moveSelection((function(){this.moveCursorTo(e,t)}))},this.selectToPosition=function(e){this.$moveSelection((function(){this.moveCursorToPosition(e)}))},this.moveTo=function(e,t){this.clearSelection(),this.moveCursorTo(e,t)},this.moveToPosition=function(e){this.clearSelection(),this.moveCursorToPosition(e)},this.selectUp=function(){this.$moveSelection(this.moveCursorUp)},this.selectDown=function(){this.$moveSelection(this.moveCursorDown)},this.selectRight=function(){this.$moveSelection(this.moveCursorRight)},this.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},this.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},this.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},this.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},this.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},this.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},this.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},this.getWordRange=function(e,t){if(void 0===t){var n=e||this.lead;e=n.row,t=n.column}return this.session.getWordRange(e,t)},this.selectWord=function(){this.setSelectionRange(this.getWordRange())},this.selectAWord=function(){var e=this.getCursor(),t=this.session.getAWordRange(e.row,e.column);this.setSelectionRange(t)},this.getLineRange=function(e,t){var n,r="number"==typeof e?e:this.lead.row,a=this.session.getFoldLine(r);return a?(r=a.start.row,n=a.end.row):n=r,!0===t?new d(r,0,n,this.session.getLine(n).length):new d(r,0,n+1,0)},this.selectLine=function(){this.setSelectionRange(this.getLineRange())},this.moveCursorUp=function(){this.moveCursorBy(-1,0)},this.moveCursorDown=function(){this.moveCursorBy(1,0)},this.wouldMoveIntoSoftTab=function(e,t,n){var r=e.column,a=e.column+t;return n<0&&(r=e.column-t,a=e.column),this.session.isTabStop(e)&&this.doc.getLine(e.row).slice(r,a).split(" ").length-1==t},this.moveCursorLeft=function(){var e,t=this.lead.getPosition();if(e=this.session.getFoldAt(t.row,t.column,-1))this.moveCursorTo(e.start.row,e.start.column);else if(0===t.column)t.row>0&&this.moveCursorTo(t.row-1,this.doc.getLine(t.row-1).length);else{var n=this.session.getTabSize();this.wouldMoveIntoSoftTab(t,n,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-n):this.moveCursorBy(0,-1)}},this.moveCursorRight=function(){var e,t=this.lead.getPosition();if(e=this.session.getFoldAt(t.row,t.column,1))this.moveCursorTo(e.end.row,e.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var n=this.session.getTabSize();t=this.lead;this.wouldMoveIntoSoftTab(t,n,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,n):this.moveCursorBy(0,1)}},this.moveCursorLineStart=function(){var e=this.lead.row,t=this.lead.column,n=this.session.documentToScreenRow(e,t),r=this.session.screenToDocumentPosition(n,0),a=this.session.getDisplayLine(e,null,r.row,r.column).match(/^\s*/);a[0].length==t||this.session.$useEmacsStyleLineStart||(r.column+=a[0].length),this.moveCursorToPosition(r)},this.moveCursorLineEnd=function(){var e=this.lead,t=this.session.getDocumentLastRowColumnPosition(e.row,e.column);if(this.lead.column==t.column){var n=this.session.getLine(t.row);if(t.column==n.length){var r=n.search(/\s+$/);r>0&&(t.column=r)}}this.moveCursorTo(t.row,t.column)},this.moveCursorFileEnd=function(){var e=this.doc.getLength()-1,t=this.doc.getLine(e).length;this.moveCursorTo(e,t)},this.moveCursorFileStart=function(){this.moveCursorTo(0,0)},this.moveCursorLongWordRight=function(){var e=this.lead.row,t=this.lead.column,n=this.doc.getLine(e),r=n.substring(t);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var a=this.session.getFoldAt(e,t,1);if(a)this.moveCursorTo(a.end.row,a.end.column);else{if(this.session.nonTokenRe.exec(r)&&(t+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,r=n.substring(t)),t>=n.length)return this.moveCursorTo(e,n.length),this.moveCursorRight(),void(e<this.doc.getLength()-1&&this.moveCursorWordRight());this.session.tokenRe.exec(r)&&(t+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(e,t)}},this.moveCursorLongWordLeft=function(){var e,t=this.lead.row,n=this.lead.column;if(e=this.session.getFoldAt(t,n,-1))this.moveCursorTo(e.start.row,e.start.column);else{var r=this.session.getFoldStringAt(t,n,-1);null==r&&(r=this.doc.getLine(t).substring(0,n));var l=a.stringReverse(r);if(this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(l)&&(n-=this.session.nonTokenRe.lastIndex,l=l.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),n<=0)return this.moveCursorTo(t,0),this.moveCursorLeft(),void(t>0&&this.moveCursorWordLeft());this.session.tokenRe.exec(l)&&(n-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(t,n)}},this.$shortWordEndIndex=function(e){var t,n=0,r=/\s/,a=this.session.tokenRe;if(a.lastIndex=0,this.session.tokenRe.exec(e))n=this.session.tokenRe.lastIndex;else{for(;(t=e[n])&&r.test(t);)n++;if(n<1)for(a.lastIndex=0;(t=e[n])&&!a.test(t);)if(a.lastIndex=0,n++,r.test(t)){if(n>2){n--;break}for(;(t=e[n])&&r.test(t);)n++;if(n>2)break}}return a.lastIndex=0,n},this.moveCursorShortWordRight=function(){var e=this.lead.row,t=this.lead.column,n=this.doc.getLine(e),r=n.substring(t),a=this.session.getFoldAt(e,t,1);if(a)return this.moveCursorTo(a.end.row,a.end.column);if(t==n.length){var l=this.doc.getLength();do{e++,r=this.doc.getLine(e)}while(e<l&&/^\s*$/.test(r));/^\s+/.test(r)||(r=""),t=0}var d=this.$shortWordEndIndex(r);this.moveCursorTo(e,t+d)},this.moveCursorShortWordLeft=function(){var e,t=this.lead.row,n=this.lead.column;if(e=this.session.getFoldAt(t,n,-1))return this.moveCursorTo(e.start.row,e.start.column);var r=this.session.getLine(t).substring(0,n);if(0===n){do{t--,r=this.doc.getLine(t)}while(t>0&&/^\s*$/.test(r));n=r.length,/\s+$/.test(r)||(r="")}var l=a.stringReverse(r),d=this.$shortWordEndIndex(l);return this.moveCursorTo(t,n-d)},this.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},this.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},this.moveCursorBy=function(e,t){var n,r=this.session.documentToScreenPosition(this.lead.row,this.lead.column);if(0===t&&(0!==e&&(this.session.$bidiHandler.isBidiRow(r.row,this.lead.row)?(n=this.session.$bidiHandler.getPosLeft(r.column),r.column=Math.round(n/this.session.$bidiHandler.charWidths[0])):n=r.column*this.session.$bidiHandler.charWidths[0]),this.$desiredColumn?r.column=this.$desiredColumn:this.$desiredColumn=r.column),0!=e&&this.session.lineWidgets&&this.session.lineWidgets[this.lead.row]){var a=this.session.lineWidgets[this.lead.row];e<0?e-=a.rowsAbove||0:e>0&&(e+=a.rowCount-(a.rowsAbove||0))}var l=this.session.screenToDocumentPosition(r.row+e,r.column,n);0!==e&&0===t&&l.row===this.lead.row&&(l.column,this.lead.column),this.moveCursorTo(l.row,l.column+t,0===t)},this.moveCursorToPosition=function(e){this.moveCursorTo(e.row,e.column)},this.moveCursorTo=function(e,t,n){var r=this.session.getFoldAt(e,t,1);r&&(e=r.start.row,t=r.start.column),this.$keepDesiredColumnOnChange=!0;var a=this.session.getLine(e);/[\uDC00-\uDFFF]/.test(a.charAt(t))&&a.charAt(t-1)&&(this.lead.row==e&&this.lead.column==t+1?t-=1:t+=1),this.lead.setPosition(e,t),this.$keepDesiredColumnOnChange=!1,n||(this.$desiredColumn=null)},this.moveCursorToScreen=function(e,t,n){var r=this.session.screenToDocumentPosition(e,t);this.moveCursorTo(r.row,r.column,n)},this.detach=function(){this.lead.detach(),this.anchor.detach(),this.session=this.doc=null},this.fromOrientedRange=function(e){this.setSelectionRange(e,e.cursor==e.start),this.$desiredColumn=e.desiredColumn||this.$desiredColumn},this.toOrientedRange=function(e){var t=this.getRange();return e?(e.start.column=t.start.column,e.start.row=t.start.row,e.end.column=t.end.column,e.end.row=t.end.row):e=t,e.cursor=this.isBackwards()?e.start:e.end,e.desiredColumn=this.$desiredColumn,e},this.getRangeOfMovements=function(e){var t=this.getCursor();try{e(this);var n=this.getCursor();return d.fromPoints(t,n)}catch(e){return d.fromPoints(t,t)}finally{this.moveCursorToPosition(t)}},this.toJSON=function(){if(this.rangeCount)var e=this.ranges.map((function(e){var t=e.clone();return t.isBackwards=e.cursor==e.start,t}));else(e=this.getRange()).isBackwards=this.isBackwards();return e},this.fromJSON=function(e){if(null==e.start){if(this.rangeList&&e.length>1){this.toSingleRange(e[0]);for(var t=e.length;t--;){var n=d.fromPoints(e[t].start,e[t].end);e[t].isBackwards&&(n.cursor=n.start),this.addRange(n,!0)}return}e=e[0]}this.rangeList&&this.toSingleRange(e),this.setSelectionRange(e,e.isBackwards)},this.isEqual=function(e){if((e.length||this.rangeCount)&&e.length!=this.rangeCount)return!1;if(!e.length||!this.ranges)return this.getRange().isEqual(e);for(var t=this.ranges.length;t--;)if(!this.ranges[t].isEqual(e[t]))return!1;return!0}}).call(h.prototype),t.Selection=h})),ace.define("ace/tokenizer",[],(function(e,t,n){"use strict";var r=e("./config"),a=2e3,l=function(e){for(var t in this.states=e,this.regExps={},this.matchMappings={},this.states){for(var n=this.states[t],r=[],a=0,l=this.matchMappings[t]={defaultToken:"text"},d="g",h=[],f=0;f<n.length;f++){var p=n[f];if(p.defaultToken&&(l.defaultToken=p.defaultToken),p.caseInsensitive&&(d="gi"),null!=p.regex){p.regex instanceof RegExp&&(p.regex=p.regex.toString().slice(1,-1));var y=p.regex,w=new RegExp("(?:("+y+")|(.))").exec("a").length-2;Array.isArray(p.token)?1==p.token.length||1==w?p.token=p.token[0]:w-1!=p.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:p,groupCount:w-1}),p.token=p.token[0]):(p.tokenArray=p.token,p.token=null,p.onMatch=this.$arrayTokens):"function"!=typeof p.token||p.onMatch||(p.onMatch=w>1?this.$applyToken:p.token),w>1&&(/\\\d/.test(p.regex)?y=p.regex.replace(/\\([0-9]+)/g,(function(e,t){return"\\"+(parseInt(t,10)+a+1)})):(w=1,y=this.removeCapturingGroups(p.regex)),p.splitRegex||"string"==typeof p.token||h.push(p)),l[a]=f,a+=w,r.push(y),p.onMatch||(p.onMatch=null)}}r.length||(l[0]=0,r.push("$")),h.forEach((function(e){e.splitRegex=this.createSplitterRegexp(e.regex,d)}),this),this.regExps[t]=new RegExp("("+r.join(")|(")+")|($)",d)}};(function(){this.$setMaxTokenCount=function(e){a=0|e},this.$applyToken=function(e){var t=this.splitRegex.exec(e).slice(1),n=this.token.apply(this,t);if("string"==typeof n)return[{type:n,value:e}];for(var r=[],a=0,l=n.length;a<l;a++)t[a]&&(r[r.length]={type:n[a],value:t[a]});return r},this.$arrayTokens=function(e){if(!e)return[];var t=this.splitRegex.exec(e);if(!t)return"text";for(var n=[],r=this.tokenArray,a=0,l=r.length;a<l;a++)t[a+1]&&(n[n.length]={type:r[a],value:t[a+1]});return n},this.removeCapturingGroups=function(e){return e.replace(/\\.|\[(?:\\.|[^\\\]])*|\(\?[:=!]|(\()/g,(function(e,t){return t?"(?:":e}))},this.createSplitterRegexp=function(e,t){if(-1!=e.indexOf("(?=")){var n=0,r=!1,a={};e.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,(function(e,t,l,d,h,f){return r?r="]"!=h:h?r=!0:d?(n==a.stack&&(a.end=f+1,a.stack=-1),n--):l&&(n++,1!=l.length&&(a.stack=n,a.start=f)),e})),null!=a.end&&/^\)*$/.test(e.substr(a.end))&&(e=e.substring(0,a.start)+e.substr(a.end))}return"^"!=e.charAt(0)&&(e="^"+e),"$"!=e.charAt(e.length-1)&&(e+="$"),new RegExp(e,(t||"").replace("g",""))},this.getLineTokens=function(e,t){if(t&&"string"!=typeof t){var n=t.slice(0);"#tmp"===(t=n[0])&&(n.shift(),t=n.shift())}else n=[];var r=t||"start",l=this.states[r];l||(r="start",l=this.states[r]);var d=this.matchMappings[r],h=this.regExps[r];h.lastIndex=0;for(var f,p=[],y=0,w=0,_={type:null,value:""};f=h.exec(e);){var C=d.defaultToken,S=null,k=f[0],x=h.lastIndex;if(x-k.length>y){var E=e.substring(y,x-k.length);_.type==C?_.value+=E:(_.type&&p.push(_),_={type:C,value:E})}for(var A=0;A<f.length-2;A++)if(void 0!==f[A+1]){C=(S=l[d[A]]).onMatch?S.onMatch(k,r,n,e):S.token,S.next&&(r="string"==typeof S.next?S.next:S.next(r,n),(l=this.states[r])||(this.reportError("state doesn't exist",r),r="start",l=this.states[r]),d=this.matchMappings[r],y=x,(h=this.regExps[r]).lastIndex=x),S.consumeLineEnd&&(y=x);break}if(k)if("string"==typeof C)S&&!1===S.merge||_.type!==C?(_.type&&p.push(_),_={type:C,value:k}):_.value+=k;else if(C){_.type&&p.push(_),_={type:null,value:""};for(A=0;A<C.length;A++)p.push(C[A])}if(y==e.length)break;if(y=x,w++>a){for(w>2*e.length&&this.reportError("infinite loop with in ace tokenizer",{startState:t,line:e});y<e.length;)_.type&&p.push(_),_={value:e.substring(y,y+=500),type:"overflow"};r="start",n=[];break}}return _.type&&p.push(_),n.length>1&&n[0]!==r&&n.unshift("#tmp",r),{tokens:p,state:n.length?n:r}},this.reportError=r.reportError}).call(l.prototype),t.Tokenizer=l})),ace.define("ace/mode/text_highlight_rules",[],(function(e,t,n){"use strict";var r=e("../lib/lang"),a=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}};(function(){this.addRules=function(e,t){if(t)for(var n in e){for(var r=e[n],a=0;a<r.length;a++){var l=r[a];(l.next||l.onMatch)&&("string"==typeof l.next&&0!==l.next.indexOf(t)&&(l.next=t+l.next),l.nextState&&0!==l.nextState.indexOf(t)&&(l.nextState=t+l.nextState))}this.$rules[t+n]=r}else for(var n in e)this.$rules[n]=e[n]},this.getRules=function(){return this.$rules},this.embedRules=function(e,t,n,a,l){var d="function"==typeof e?(new e).getRules():e;if(a)for(var h=0;h<a.length;h++)a[h]=t+a[h];else for(var f in a=[],d)a.push(t+f);if(this.addRules(d,t),n){var p=Array.prototype[l?"push":"unshift"];for(h=0;h<a.length;h++)p.apply(this.$rules[a[h]],r.deepCopy(n))}this.$embeds||(this.$embeds=[]),this.$embeds.push(t)},this.getEmbeds=function(){return this.$embeds};var e=function(e,t){return("start"!=e||t.length)&&t.unshift(this.nextState,e),this.nextState},t=function(e,t){return t.shift(),t.shift()||"start"};this.normalizeRules=function(){var n=0,r=this.$rules;Object.keys(r).forEach((function a(l){var d=r[l];d.processed=!0;for(var h=0;h<d.length;h++){var f=d[h],p=null;Array.isArray(f)&&(p=f,f={}),!f.regex&&f.start&&(f.regex=f.start,f.next||(f.next=[]),f.next.push({defaultToken:f.token},{token:f.token+".end",regex:f.end||f.start,next:"pop"}),f.token=f.token+".start",f.push=!0);var y=f.next||f.push;if(y&&Array.isArray(y)){var w=f.stateName;w||("string"!=typeof(w=f.token)&&(w=w[0]||""),r[w]&&(w+=n++)),r[w]=y,f.next=w,a(w)}else"pop"==y&&(f.next=t);if(f.push&&(f.nextState=f.next||f.push,f.next=e,delete f.push),f.rules)for(var _ in f.rules)r[_]?r[_].push&&r[_].push.apply(r[_],f.rules[_]):r[_]=f.rules[_];var C="string"==typeof f?f:f.include;if(C&&(p=Array.isArray(C)?C.map((function(e){return r[e]})):r[C]),p){var S=[h,1].concat(p);f.noEscape&&(S=S.filter((function(e){return!e.next}))),d.splice.apply(d,S),h--}f.keywordMap&&(f.token=this.createKeywordMapper(f.keywordMap,f.defaultToken||"text",f.caseInsensitive),delete f.defaultToken)}}),this)},this.createKeywordMapper=function(e,t,n,r){var a=Object.create(null);return this.$keywordList=[],Object.keys(e).forEach((function(t){for(var l=e[t].split(r||"|"),d=l.length;d--;){var h=l[d];this.$keywordList.push(h),n&&(h=h.toLowerCase()),a[h]=t}}),this),e=null,n?function(e){return a[e.toLowerCase()]||t}:function(e){return a[e]||t}},this.getKeywords=function(){return this.$keywords}}).call(a.prototype),t.TextHighlightRules=a})),ace.define("ace/mode/behaviour",[],(function(e,t,n){"use strict";var r=function(){this.$behaviours={}};(function(){this.add=function(e,t,n){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[e]:this.$behaviours[e]={}}this.$behaviours[e][t]=n},this.addBehaviours=function(e){for(var t in e)for(var n in e[t])this.add(t,n,e[t][n])},this.remove=function(e){this.$behaviours&&this.$behaviours[e]&&delete this.$behaviours[e]},this.inherit=function(e,t){if("function"==typeof e)var n=(new e).getBehaviours(t);else n=e.getBehaviours(t);this.addBehaviours(n)},this.getBehaviours=function(e){if(e){for(var t={},n=0;n<e.length;n++)this.$behaviours[e[n]]&&(t[e[n]]=this.$behaviours[e[n]]);return t}return this.$behaviours}}).call(r.prototype),t.Behaviour=r})),ace.define("ace/token_iterator",[],(function(e,t,n){"use strict";var r=e("./range").Range,a=function(e,t,n){this.$session=e,this.$row=t,this.$rowTokens=e.getTokens(t);var r=e.getTokenAt(t,n);this.$tokenIndex=r?r.index:-1};(function(){this.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},this.stepForward=function(){var e;for(this.$tokenIndex+=1;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,e||(e=this.$session.getLength()),this.$row>=e)return this.$row=e-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},this.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},this.getCurrentTokenRow=function(){return this.$row},this.getCurrentTokenColumn=function(){var e=this.$rowTokens,t=this.$tokenIndex,n=e[t].start;if(void 0!==n)return n;for(n=0;t>0;)n+=e[t-=1].value.length;return n},this.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}},this.getCurrentTokenRange=function(){var e=this.$rowTokens[this.$tokenIndex],t=this.getCurrentTokenColumn();return new r(this.$row,t,this.$row,t+e.value.length)}}).call(a.prototype),t.TokenIterator=a})),ace.define("ace/mode/behaviour/cstyle",[],(function(e,t,n){"use strict";var r,a=e("../../lib/oop"),l=e("../behaviour").Behaviour,d=e("../../token_iterator").TokenIterator,h=e("../../lib/lang"),f=["text","paren.rparen","rparen","paren","punctuation.operator"],p=["text","paren.rparen","rparen","paren","punctuation.operator","comment"],y={},w={'"':'"',"'":"'"},_=function(e){var t=-1;if(e.multiSelect&&(t=e.selection.index,y.rangeCount!=e.multiSelect.rangeCount&&(y={rangeCount:e.multiSelect.rangeCount})),y[t])return r=y[t];r=y[t]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}},C=function(e,t,n,r){var a=e.end.row-e.start.row;return{text:n+t+r,selection:[0,e.start.column+1,a,e.end.column+(a?0:1)]}},S=function(e){this.add("braces","insertion",(function(t,n,a,l,d){var f=a.getCursorPosition(),p=l.doc.getLine(f.row);if("{"==d){_(a);var y=a.getSelectionRange(),w=l.doc.getTextRange(y);if(""!==w&&"{"!==w&&a.getWrapBehavioursEnabled())return C(y,w,"{","}");if(S.isSaneInsertion(a,l))return/[\]\}\)]/.test(p[f.column])||a.inMultiSelectMode||e&&e.braces?(S.recordAutoInsert(a,l,"}"),{text:"{}",selection:[1,1]}):(S.recordMaybeInsert(a,l,"{"),{text:"{",selection:[1,1]})}else if("}"==d){if(_(a),"}"==p.substring(f.column,f.column+1))if(null!==l.$findOpeningBracket("}",{column:f.column+1,row:f.row})&&S.isAutoInsertedClosing(f,p,d))return S.popAutoInsertedClosing(),{text:"",selection:[1,1]}}else{if("\n"==d||"\r\n"==d){_(a);var k="";if(S.isMaybeInsertedClosing(f,p)&&(k=h.stringRepeat("}",r.maybeInsertedBrackets),S.clearMaybeInsertedClosing()),"}"===p.substring(f.column,f.column+1)){var x=l.findMatchingBracket({row:f.row,column:f.column+1},"}");if(!x)return null;var E=this.$getIndent(l.getLine(x.row))}else{if(!k)return void S.clearMaybeInsertedClosing();E=this.$getIndent(p)}var A=E+l.getTabString();return{text:"\n"+A+"\n"+E+k,selection:[1,A.length,1,A.length]}}S.clearMaybeInsertedClosing()}})),this.add("braces","deletion",(function(e,t,n,a,l){var d=a.doc.getTextRange(l);if(!l.isMultiLine()&&"{"==d){if(_(n),"}"==a.doc.getLine(l.start.row).substring(l.end.column,l.end.column+1))return l.end.column++,l;r.maybeInsertedBrackets--}})),this.add("parens","insertion",(function(e,t,n,r,a){if("("==a){_(n);var l=n.getSelectionRange(),d=r.doc.getTextRange(l);if(""!==d&&n.getWrapBehavioursEnabled())return C(l,d,"(",")");if(S.isSaneInsertion(n,r))return S.recordAutoInsert(n,r,")"),{text:"()",selection:[1,1]}}else if(")"==a){_(n);var h=n.getCursorPosition(),f=r.doc.getLine(h.row);if(")"==f.substring(h.column,h.column+1))if(null!==r.$findOpeningBracket(")",{column:h.column+1,row:h.row})&&S.isAutoInsertedClosing(h,f,a))return S.popAutoInsertedClosing(),{text:"",selection:[1,1]}}})),this.add("parens","deletion",(function(e,t,n,r,a){var l=r.doc.getTextRange(a);if(!a.isMultiLine()&&"("==l&&(_(n),")"==r.doc.getLine(a.start.row).substring(a.start.column+1,a.start.column+2)))return a.end.column++,a})),this.add("brackets","insertion",(function(e,t,n,r,a){if("["==a){_(n);var l=n.getSelectionRange(),d=r.doc.getTextRange(l);if(""!==d&&n.getWrapBehavioursEnabled())return C(l,d,"[","]");if(S.isSaneInsertion(n,r))return S.recordAutoInsert(n,r,"]"),{text:"[]",selection:[1,1]}}else if("]"==a){_(n);var h=n.getCursorPosition(),f=r.doc.getLine(h.row);if("]"==f.substring(h.column,h.column+1))if(null!==r.$findOpeningBracket("]",{column:h.column+1,row:h.row})&&S.isAutoInsertedClosing(h,f,a))return S.popAutoInsertedClosing(),{text:"",selection:[1,1]}}})),this.add("brackets","deletion",(function(e,t,n,r,a){var l=r.doc.getTextRange(a);if(!a.isMultiLine()&&"["==l&&(_(n),"]"==r.doc.getLine(a.start.row).substring(a.start.column+1,a.start.column+2)))return a.end.column++,a})),this.add("string_dquotes","insertion",(function(e,t,n,r,a){var l=r.$mode.$quotes||w;if(1==a.length&&l[a]){if(this.lineCommentStart&&-1!=this.lineCommentStart.indexOf(a))return;_(n);var d=a,h=n.getSelectionRange(),f=r.doc.getTextRange(h);if(!(""===f||1==f.length&&l[f])&&n.getWrapBehavioursEnabled())return C(h,f,d,d);if(!f){var p=n.getCursorPosition(),y=r.doc.getLine(p.row),S=y.substring(p.column-1,p.column),k=y.substring(p.column,p.column+1),x=r.getTokenAt(p.row,p.column),E=r.getTokenAt(p.row,p.column+1);if("\\"==S&&x&&/escape/.test(x.type))return null;var A,T=x&&/string|escape/.test(x.type),R=!E||/string|escape/.test(E.type);if(k==d)(A=T!==R)&&/string\.end/.test(E.type)&&(A=!1);else{if(T&&!R)return null;if(T&&R)return null;var O=r.$mode.tokenRe;O.lastIndex=0;var M=O.test(S);O.lastIndex=0;var P=O.test(S);if(M||P)return null;if(k&&!/[\s;,.})\]\\]/.test(k))return null;var L=y[p.column-2];if(S==d&&(L==d||O.test(L)))return null;A=!0}return{text:A?d+d:"",selection:[1,1]}}}})),this.add("string_dquotes","deletion",(function(e,t,n,r,a){var l=r.$mode.$quotes||w,d=r.doc.getTextRange(a);if(!a.isMultiLine()&&l.hasOwnProperty(d)&&(_(n),r.doc.getLine(a.start.row).substring(a.start.column+1,a.start.column+2)==d))return a.end.column++,a}))};S.isSaneInsertion=function(e,t){var n=e.getCursorPosition(),r=new d(t,n.row,n.column);if(!this.$matchTokenType(r.getCurrentToken()||"text",f)){if(/[)}\]]/.test(e.session.getLine(n.row)[n.column]))return!0;var a=new d(t,n.row,n.column+1);if(!this.$matchTokenType(a.getCurrentToken()||"text",f))return!1}return r.stepForward(),r.getCurrentTokenRow()!==n.row||this.$matchTokenType(r.getCurrentToken()||"text",p)},S.$matchTokenType=function(e,t){return t.indexOf(e.type||e)>-1},S.recordAutoInsert=function(e,t,n){var a=e.getCursorPosition(),l=t.doc.getLine(a.row);this.isAutoInsertedClosing(a,l,r.autoInsertedLineEnd[0])||(r.autoInsertedBrackets=0),r.autoInsertedRow=a.row,r.autoInsertedLineEnd=n+l.substr(a.column),r.autoInsertedBrackets++},S.recordMaybeInsert=function(e,t,n){var a=e.getCursorPosition(),l=t.doc.getLine(a.row);this.isMaybeInsertedClosing(a,l)||(r.maybeInsertedBrackets=0),r.maybeInsertedRow=a.row,r.maybeInsertedLineStart=l.substr(0,a.column)+n,r.maybeInsertedLineEnd=l.substr(a.column),r.maybeInsertedBrackets++},S.isAutoInsertedClosing=function(e,t,n){return r.autoInsertedBrackets>0&&e.row===r.autoInsertedRow&&n===r.autoInsertedLineEnd[0]&&t.substr(e.column)===r.autoInsertedLineEnd},S.isMaybeInsertedClosing=function(e,t){return r.maybeInsertedBrackets>0&&e.row===r.maybeInsertedRow&&t.substr(e.column)===r.maybeInsertedLineEnd&&t.substr(0,e.column)==r.maybeInsertedLineStart},S.popAutoInsertedClosing=function(){r.autoInsertedLineEnd=r.autoInsertedLineEnd.substr(1),r.autoInsertedBrackets--},S.clearMaybeInsertedClosing=function(){r&&(r.maybeInsertedBrackets=0,r.maybeInsertedRow=-1)},a.inherits(S,l),t.CstyleBehaviour=S})),ace.define("ace/unicode",[],(function(e,t,n){"use strict";for(var r=[48,9,8,25,5,0,2,25,48,0,11,0,5,0,6,22,2,30,2,457,5,11,15,4,8,0,2,0,18,116,2,1,3,3,9,0,2,2,2,0,2,19,2,82,2,138,2,4,3,155,12,37,3,0,8,38,10,44,2,0,2,1,2,1,2,0,9,26,6,2,30,10,7,61,2,9,5,101,2,7,3,9,2,18,3,0,17,58,3,100,15,53,5,0,6,45,211,57,3,18,2,5,3,11,3,9,2,1,7,6,2,2,2,7,3,1,3,21,2,6,2,0,4,3,3,8,3,1,3,3,9,0,5,1,2,4,3,11,16,2,2,5,5,1,3,21,2,6,2,1,2,1,2,1,3,0,2,4,5,1,3,2,4,0,8,3,2,0,8,15,12,2,2,8,2,2,2,21,2,6,2,1,2,4,3,9,2,2,2,2,3,0,16,3,3,9,18,2,2,7,3,1,3,21,2,6,2,1,2,4,3,8,3,1,3,2,9,1,5,1,2,4,3,9,2,0,17,1,2,5,4,2,2,3,4,1,2,0,2,1,4,1,4,2,4,11,5,4,4,2,2,3,3,0,7,0,15,9,18,2,2,7,2,2,2,22,2,9,2,4,4,7,2,2,2,3,8,1,2,1,7,3,3,9,19,1,2,7,2,2,2,22,2,9,2,4,3,8,2,2,2,3,8,1,8,0,2,3,3,9,19,1,2,7,2,2,2,22,2,15,4,7,2,2,2,3,10,0,9,3,3,9,11,5,3,1,2,17,4,23,2,8,2,0,3,6,4,0,5,5,2,0,2,7,19,1,14,57,6,14,2,9,40,1,2,0,3,1,2,0,3,0,7,3,2,6,2,2,2,0,2,0,3,1,2,12,2,2,3,4,2,0,2,5,3,9,3,1,35,0,24,1,7,9,12,0,2,0,2,0,5,9,2,35,5,19,2,5,5,7,2,35,10,0,58,73,7,77,3,37,11,42,2,0,4,328,2,3,3,6,2,0,2,3,3,40,2,3,3,32,2,3,3,6,2,0,2,3,3,14,2,56,2,3,3,66,5,0,33,15,17,84,13,619,3,16,2,25,6,74,22,12,2,6,12,20,12,19,13,12,2,2,2,1,13,51,3,29,4,0,5,1,3,9,34,2,3,9,7,87,9,42,6,69,11,28,4,11,5,11,11,39,3,4,12,43,5,25,7,10,38,27,5,62,2,28,3,10,7,9,14,0,89,75,5,9,18,8,13,42,4,11,71,55,9,9,4,48,83,2,2,30,14,230,23,280,3,5,3,37,3,5,3,7,2,0,2,0,2,0,2,30,3,52,2,6,2,0,4,2,2,6,4,3,3,5,5,12,6,2,2,6,67,1,20,0,29,0,14,0,17,4,60,12,5,0,4,11,18,0,5,0,3,9,2,0,4,4,7,0,2,0,2,0,2,3,2,10,3,3,6,4,5,0,53,1,2684,46,2,46,2,132,7,6,15,37,11,53,10,0,17,22,10,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,31,48,0,470,1,36,5,2,4,6,1,5,85,3,1,3,2,2,89,2,3,6,40,4,93,18,23,57,15,513,6581,75,20939,53,1164,68,45,3,268,4,27,21,31,3,13,13,1,2,24,9,69,11,1,38,8,3,102,3,1,111,44,25,51,13,68,12,9,7,23,4,0,5,45,3,35,13,28,4,64,15,10,39,54,10,13,3,9,7,22,4,1,5,66,25,2,227,42,2,1,3,9,7,11171,13,22,5,48,8453,301,3,61,3,105,39,6,13,4,6,11,2,12,2,4,2,0,2,1,2,1,2,107,34,362,19,63,3,53,41,11,5,15,17,6,13,1,25,2,33,4,2,134,20,9,8,25,5,0,2,25,12,88,4,5,3,5,3,5,3,2],a=0,l=[],d=0;d<r.length;d+=2)l.push(a+=r[d]),r[d+1]&&l.push(45,a+=r[d+1]);t.wordChars=String.fromCharCode.apply(null,l)})),ace.define("ace/mode/text",[],(function(e,t,n){"use strict";var r=e("../config"),a=e("../tokenizer").Tokenizer,l=e("./text_highlight_rules").TextHighlightRules,d=e("./behaviour/cstyle").CstyleBehaviour,h=e("../unicode"),f=e("../lib/lang"),p=e("../token_iterator").TokenIterator,y=e("../range").Range,w=function(){this.HighlightRules=l};(function(){this.$defaultBehaviour=new d,this.tokenRe=new RegExp("^["+h.wordChars+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+h.wordChars+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new a(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(e,t,n,r){var a=t.doc,l=!0,d=!0,h=1/0,p=t.getTabSize(),y=!1;if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart))k=this.lineCommentStart.map(f.escapeRegExp).join("|"),C=this.lineCommentStart[0];else k=f.escapeRegExp(this.lineCommentStart),C=this.lineCommentStart;k=new RegExp("^(\\s*)(?:"+k+") ?"),y=t.getUseSoftTabs();A=function(e,t){var n=e.match(k);if(n){var r=n[1].length,l=n[0].length;_(e,r,l)||" "!=n[0][l-1]||l--,a.removeInLine(t,r,l)}};var w=C+" ",_=(E=function(e,t){l&&!/\S/.test(e)||(_(e,h,h)?a.insertInLine({row:t,column:h},w):a.insertInLine({row:t,column:h},C))},T=function(e,t){return k.test(e)},function(e,t,n){for(var r=0;t--&&" "==e.charAt(t);)r++;if(r%p!=0)return!1;for(r=0;" "==e.charAt(n++);)r++;return p>2?r%p!=p-1:r%p==0})}else{if(!this.blockComment)return!1;var C=this.blockComment.start,S=this.blockComment.end,k=new RegExp("^(\\s*)(?:"+f.escapeRegExp(C)+")"),x=new RegExp("(?:"+f.escapeRegExp(S)+")\\s*$"),E=function(e,t){T(e,t)||l&&!/\S/.test(e)||(a.insertInLine({row:t,column:e.length},S),a.insertInLine({row:t,column:h},C))},A=function(e,t){var n;(n=e.match(x))&&a.removeInLine(t,e.length-n[0].length,e.length),(n=e.match(k))&&a.removeInLine(t,n[1].length,n[0].length)},T=function(e,n){if(k.test(e))return!0;for(var r=t.getTokens(n),a=0;a<r.length;a++)if("comment"===r[a].type)return!0}}function R(e){for(var t=n;t<=r;t++)e(a.getLine(t),t)}var O=1/0;R((function(e,t){var n=e.search(/\S/);-1!==n?(n<h&&(h=n),d&&!T(e,t)&&(d=!1)):O>e.length&&(O=e.length)})),h==1/0&&(h=O,l=!1,d=!1),y&&h%p!=0&&(h=Math.floor(h/p)*p),R(d?A:E)},this.toggleBlockComment=function(e,t,n,r){var a=this.blockComment;if(a){!a.start&&a[0]&&(a=a[0]);var l,d,h=(k=new p(t,r.row,r.column)).getCurrentToken(),f=(t.selection,t.selection.toOrientedRange());if(h&&/comment/.test(h.type)){for(var w,_;h&&/comment/.test(h.type);){if(-1!=(x=h.value.indexOf(a.start))){var C=k.getCurrentTokenRow(),S=k.getCurrentTokenColumn()+x;w=new y(C,S,C,S+a.start.length);break}h=k.stepBackward()}var k;for(h=(k=new p(t,r.row,r.column)).getCurrentToken();h&&/comment/.test(h.type);){var x;if(-1!=(x=h.value.indexOf(a.end))){C=k.getCurrentTokenRow(),S=k.getCurrentTokenColumn()+x;_=new y(C,S,C,S+a.end.length);break}h=k.stepForward()}_&&t.remove(_),w&&(t.remove(w),l=w.start.row,d=-a.start.length)}else d=a.start.length,l=n.start.row,t.insert(n.end,a.end),t.insert(n.start,a.start);f.start.row==l&&(f.start.column+=d),f.end.row==l&&(f.end.column+=d),t.selection.fromOrientedRange(f)}},this.getNextLineIndent=function(e,t,n){return this.$getIndent(t)},this.checkOutdent=function(e,t,n){return!1},this.autoOutdent=function(e,t,n){},this.$getIndent=function(e){return e.match(/^\s*/)[0]},this.createWorker=function(e){return null},this.createModeDelegates=function(e){for(var t in this.$embeds=[],this.$modes={},e)if(e[t]){var n=e[t],a=n.prototype.$id,l=r.$modes[a];l||(r.$modes[a]=l=new n),r.$modes[t]||(r.$modes[t]=l),this.$embeds.push(t),this.$modes[t]=l}var d=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"];for(t=0;t<d.length;t++)!function(e){var n=d[t],r=e[n];e[d[t]]=function(){return this.$delegator(n,arguments,r)}}(this)},this.$delegator=function(e,t,n){var r=t[0]||"start";if("string"!=typeof r){if(Array.isArray(r[2])){var a=r[2][r[2].length-1];if(d=this.$modes[a])return d[e].apply(d,[r[1]].concat([].slice.call(t,1)))}r=r[0]||"start"}for(var l=0;l<this.$embeds.length;l++)if(this.$modes[this.$embeds[l]]){var d,h=r.split(this.$embeds[l]);if(!h[0]&&h[1])return t[0]=h[1],(d=this.$modes[this.$embeds[l]])[e].apply(d,t)}var f=n.apply(this,t);return n?f:void 0},this.transformAction=function(e,t,n,r,a){if(this.$behaviour){var l=this.$behaviour.getBehaviours();for(var d in l)if(l[d][t]){var h=l[d][t].apply(this,arguments);if(h)return h}}},this.getKeywords=function(e){if(!this.completionKeywords){var t=this.$tokenizer.rules,n=[];for(var r in t)for(var a=t[r],l=0,d=a.length;l<d;l++)if("string"==typeof a[l].token)/keyword|support|storage/.test(a[l].token)&&n.push(a[l].regex);else if("object"==typeof a[l].token)for(var h=0,f=a[l].token.length;h<f;h++)if(/keyword|support|storage/.test(a[l].token[h])){r=a[l].regex.match(/\(.+?\)/g)[h];n.push(r.substr(1,r.length-2))}this.completionKeywords=n}return e?n.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(e,t,n,r){return(this.$keywordList||this.$createKeywordList()).map((function(e){return{name:e,value:e,score:0,meta:"keyword"}}))},this.$id="ace/mode/text"}).call(w.prototype),t.Mode=w})),ace.define("ace/apply_delta",[],(function(e,t,n){"use strict";t.applyDelta=function(e,t,n){var r=t.start.row,a=t.start.column,l=e[r]||"";switch(t.action){case"insert":if(1===t.lines.length)e[r]=l.substring(0,a)+t.lines[0]+l.substring(a);else{var d=[r,1].concat(t.lines);e.splice.apply(e,d),e[r]=l.substring(0,a)+e[r],e[r+t.lines.length-1]+=l.substring(a)}break;case"remove":var h=t.end.column,f=t.end.row;r===f?e[r]=l.substring(0,a)+l.substring(h):e.splice(r,f-r+1,l.substring(0,a)+e[f].substring(h))}}})),ace.define("ace/anchor",[],(function(e,t,n){"use strict";var r=e("./lib/oop"),a=e("./lib/event_emitter").EventEmitter,l=t.Anchor=function(e,t,n){this.$onChange=this.onChange.bind(this),this.attach(e),void 0===n?this.setPosition(t.row,t.column):this.setPosition(t,n)};(function(){function e(e,t,n){var r=n?e.column<=t.column:e.column<t.column;return e.row<t.row||e.row==t.row&&r}r.implement(this,a),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(t){if(!(t.start.row==t.end.row&&t.start.row!=this.row||t.start.row>this.row)){var n=function(t,n,r){var a="insert"==t.action,l=(a?1:-1)*(t.end.row-t.start.row),d=(a?1:-1)*(t.end.column-t.start.column),h=t.start,f=a?h:t.end;if(e(n,h,r))return{row:n.row,column:n.column};if(e(f,n,!r))return{row:n.row+l,column:n.column+(n.row==f.row?d:0)};return{row:h.row,column:h.column}}(t,{row:this.row,column:this.column},this.$insertRight);this.setPosition(n.row,n.column,!0)}},this.setPosition=function(e,t,n){var r;if(r=n?{row:e,column:t}:this.$clipPositionToDocument(e,t),this.row!=r.row||this.column!=r.column){var a={row:this.row,column:this.column};this.row=r.row,this.column=r.column,this._signal("change",{old:a,value:r})}},this.detach=function(){this.document.off("change",this.$onChange)},this.attach=function(e){this.document=e||this.document,this.document.on("change",this.$onChange)},this.$clipPositionToDocument=function(e,t){var n={};return e>=this.document.getLength()?(n.row=Math.max(0,this.document.getLength()-1),n.column=this.document.getLine(n.row).length):e<0?(n.row=0,n.column=0):(n.row=e,n.column=Math.min(this.document.getLine(n.row).length,Math.max(0,t))),t<0&&(n.column=0),n}}).call(l.prototype)})),ace.define("ace/document",[],(function(e,t,n){"use strict";var r=e("./lib/oop"),a=e("./apply_delta").applyDelta,l=e("./lib/event_emitter").EventEmitter,d=e("./range").Range,h=e("./anchor").Anchor,f=function(e){this.$lines=[""],0===e.length?this.$lines=[""]:Array.isArray(e)?this.insertMergedLines({row:0,column:0},e):this.insert({row:0,column:0},e)};(function(){r.implement(this,l),this.setValue=function(e){var t=this.getLength()-1;this.remove(new d(0,0,t,this.getLine(t).length)),this.insert({row:0,column:0},e)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(e,t){return new h(this,e,t)},0==="aaa".split(/a/).length?this.$split=function(e){return e.replace(/\r\n|\r/g,"\n").split("\n")}:this.$split=function(e){return e.split(/\r\n|\r|\n/)},this.$detectNewLine=function(e){var t=e.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=t?t[1]:"\n",this._signal("changeNewLineMode")},this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\r\n";case"unix":return"\n";default:return this.$autoNewLine||"\n"}},this.$autoNewLine="",this.$newLineMode="auto",this.setNewLineMode=function(e){this.$newLineMode!==e&&(this.$newLineMode=e,this._signal("changeNewLineMode"))},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(e){return"\r\n"==e||"\r"==e||"\n"==e},this.getLine=function(e){return this.$lines[e]||""},this.getLines=function(e,t){return this.$lines.slice(e,t+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(e){return this.getLinesForRange(e).join(this.getNewLineCharacter())},this.getLinesForRange=function(e){var t;if(e.start.row===e.end.row)t=[this.getLine(e.start.row).substring(e.start.column,e.end.column)];else{(t=this.getLines(e.start.row,e.end.row))[0]=(t[0]||"").substring(e.start.column);var n=t.length-1;e.end.row-e.start.row==n&&(t[n]=t[n].substring(0,e.end.column))}return t},this.insertLines=function(e,t){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(e,t)},this.removeLines=function(e,t){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(e,t)},this.insertNewLine=function(e){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(e,["",""])},this.insert=function(e,t){return this.getLength()<=1&&this.$detectNewLine(t),this.insertMergedLines(e,this.$split(t))},this.insertInLine=function(e,t){var n=this.clippedPos(e.row,e.column),r=this.pos(e.row,e.column+t.length);return this.applyDelta({start:n,end:r,action:"insert",lines:[t]},!0),this.clonePos(r)},this.clippedPos=function(e,t){var n=this.getLength();void 0===e?e=n:e<0?e=0:e>=n&&(e=n-1,t=void 0);var r=this.getLine(e);return null==t&&(t=r.length),{row:e,column:t=Math.min(Math.max(t,0),r.length)}},this.clonePos=function(e){return{row:e.row,column:e.column}},this.pos=function(e,t){return{row:e,column:t}},this.$clipPosition=function(e){var t=this.getLength();return e.row>=t?(e.row=Math.max(0,t-1),e.column=this.getLine(t-1).length):(e.row=Math.max(0,e.row),e.column=Math.min(Math.max(e.column,0),this.getLine(e.row).length)),e},this.insertFullLines=function(e,t){var n=0;(e=Math.min(Math.max(e,0),this.getLength()))<this.getLength()?(t=t.concat([""]),n=0):(t=[""].concat(t),e--,n=this.$lines[e].length),this.insertMergedLines({row:e,column:n},t)},this.insertMergedLines=function(e,t){var n=this.clippedPos(e.row,e.column),r={row:n.row+t.length-1,column:(1==t.length?n.column:0)+t[t.length-1].length};return this.applyDelta({start:n,end:r,action:"insert",lines:t}),this.clonePos(r)},this.remove=function(e){var t=this.clippedPos(e.start.row,e.start.column),n=this.clippedPos(e.end.row,e.end.column);return this.applyDelta({start:t,end:n,action:"remove",lines:this.getLinesForRange({start:t,end:n})}),this.clonePos(t)},this.removeInLine=function(e,t,n){var r=this.clippedPos(e,t),a=this.clippedPos(e,n);return this.applyDelta({start:r,end:a,action:"remove",lines:this.getLinesForRange({start:r,end:a})},!0),this.clonePos(r)},this.removeFullLines=function(e,t){e=Math.min(Math.max(0,e),this.getLength()-1);var n=(t=Math.min(Math.max(0,t),this.getLength()-1))==this.getLength()-1&&e>0,r=t<this.getLength()-1,a=n?e-1:e,l=n?this.getLine(a).length:0,h=r?t+1:t,f=r?0:this.getLine(h).length,p=new d(a,l,h,f),y=this.$lines.slice(e,t+1);return this.applyDelta({start:p.start,end:p.end,action:"remove",lines:this.getLinesForRange(p)}),y},this.removeNewLine=function(e){e<this.getLength()-1&&e>=0&&this.applyDelta({start:this.pos(e,this.getLine(e).length),end:this.pos(e+1,0),action:"remove",lines:["",""]})},this.replace=function(e,t){return e instanceof d||(e=d.fromPoints(e.start,e.end)),0===t.length&&e.isEmpty()?e.start:t==this.getTextRange(e)?e.end:(this.remove(e),t?this.insert(e.start,t):e.start)},this.applyDeltas=function(e){for(var t=0;t<e.length;t++)this.applyDelta(e[t])},this.revertDeltas=function(e){for(var t=e.length-1;t>=0;t--)this.revertDelta(e[t])},this.applyDelta=function(e,t){var n="insert"==e.action;(n?e.lines.length<=1&&!e.lines[0]:!d.comparePoints(e.start,e.end))||(n&&e.lines.length>2e4?this.$splitAndapplyLargeDelta(e,2e4):(a(this.$lines,e,t),this._signal("change",e)))},this.$safeApplyDelta=function(e){var t=this.$lines.length;("remove"==e.action&&e.start.row<t&&e.end.row<t||"insert"==e.action&&e.start.row<=t)&&this.applyDelta(e)},this.$splitAndapplyLargeDelta=function(e,t){for(var n=e.lines,r=n.length-t+1,a=e.start.row,l=e.start.column,d=0,h=0;d<r;d=h){h+=t-1;var f=n.slice(d,h);f.push(""),this.applyDelta({start:this.pos(a+d,l),end:this.pos(a+h,l=0),action:e.action,lines:f},!0)}e.lines=n.slice(d),e.start.row=a+d,e.start.column=l,this.applyDelta(e,!0)},this.revertDelta=function(e){this.$safeApplyDelta({start:this.clonePos(e.start),end:this.clonePos(e.end),action:"insert"==e.action?"remove":"insert",lines:e.lines.slice()})},this.indexToPosition=function(e,t){for(var n=this.$lines||this.getAllLines(),r=this.getNewLineCharacter().length,a=t||0,l=n.length;a<l;a++)if((e-=n[a].length+r)<0)return{row:a,column:e+n[a].length+r};return{row:l-1,column:e+n[l-1].length+r}},this.positionToIndex=function(e,t){for(var n=this.$lines||this.getAllLines(),r=this.getNewLineCharacter().length,a=0,l=Math.min(e.row,n.length),d=t||0;d<l;++d)a+=n[d].length+r;return a+e.column}}).call(f.prototype),t.Document=f})),ace.define("ace/background_tokenizer",[],(function(e,t,n){"use strict";var r=e("./lib/oop"),a=e("./lib/event_emitter").EventEmitter,l=function(e,t){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=e;var n=this;this.$worker=function(){if(n.running){for(var e=new Date,t=n.currentLine,r=-1,a=n.doc,l=t;n.lines[t];)t++;var d=a.getLength(),h=0;for(n.running=!1;t<d;){n.$tokenizeRow(t),r=t;do{t++}while(n.lines[t]);if(++h%5==0&&new Date-e>20){n.running=setTimeout(n.$worker,20);break}}n.currentLine=t,-1==r&&(r=t),l<=r&&n.fireUpdateEvent(l,r)}}};(function(){r.implement(this,a),this.setTokenizer=function(e){this.tokenizer=e,this.lines=[],this.states=[],this.start(0)},this.setDocument=function(e){this.doc=e,this.lines=[],this.states=[],this.stop()},this.fireUpdateEvent=function(e,t){var n={first:e,last:t};this._signal("update",{data:n})},this.start=function(e){this.currentLine=Math.min(e||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},this.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},this.$updateOnChange=function(e){var t=e.start.row,n=e.end.row-t;if(0===n)this.lines[t]=null;else if("remove"==e.action)this.lines.splice(t,n+1,null),this.states.splice(t,n+1,null);else{var r=Array(n+1);r.unshift(t,1),this.lines.splice.apply(this.lines,r),this.states.splice.apply(this.states,r)}this.currentLine=Math.min(t,this.currentLine,this.doc.getLength()),this.stop()},this.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},this.getTokens=function(e){return this.lines[e]||this.$tokenizeRow(e)},this.getState=function(e){return this.currentLine==e&&this.$tokenizeRow(e),this.states[e]||"start"},this.$tokenizeRow=function(e){var t=this.doc.getLine(e),n=this.states[e-1],r=this.tokenizer.getLineTokens(t,n,e);return this.states[e]+""!=r.state+""?(this.states[e]=r.state,this.lines[e+1]=null,this.currentLine>e+1&&(this.currentLine=e+1)):this.currentLine==e&&(this.currentLine=e+1),this.lines[e]=r.tokens}}).call(l.prototype),t.BackgroundTokenizer=l})),ace.define("ace/search_highlight",[],(function(e,t,n){"use strict";var r=e("./lib/lang"),a=(e("./lib/oop"),e("./range").Range),l=function(e,t,n){this.setRegexp(e),this.clazz=t,this.type=n||"text"};(function(){this.MAX_RANGES=500,this.setRegexp=function(e){this.regExp+""!=e+""&&(this.regExp=e,this.cache=[])},this.update=function(e,t,n,l){if(this.regExp)for(var d=l.firstRow,h=l.lastRow,f=d;f<=h;f++){var p=this.cache[f];null==p&&((p=r.getMatchOffsets(n.getLine(f),this.regExp)).length>this.MAX_RANGES&&(p=p.slice(0,this.MAX_RANGES)),p=p.map((function(e){return new a(f,e.offset,f,e.offset+e.length)})),this.cache[f]=p.length?p:"");for(var y=p.length;y--;)t.drawSingleLineMarker(e,p[y].toScreenRange(n),this.clazz,l)}}}).call(l.prototype),t.SearchHighlight=l})),ace.define("ace/edit_session/fold_line",[],(function(e,t,n){"use strict";var r=e("../range").Range;function a(e,t){this.foldData=e,Array.isArray(t)?this.folds=t:t=this.folds=[t];var n=t[t.length-1];this.range=new r(t[0].start.row,t[0].start.column,n.end.row,n.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach((function(e){e.setFoldLine(this)}),this)}(function(){this.shiftRow=function(e){this.start.row+=e,this.end.row+=e,this.folds.forEach((function(t){t.start.row+=e,t.end.row+=e}))},this.addFold=function(e){if(e.sameRow){if(e.start.row<this.startRow||e.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(e),this.folds.sort((function(e,t){return-e.range.compareEnd(t.start.row,t.start.column)})),this.range.compareEnd(e.start.row,e.start.column)>0?(this.end.row=e.end.row,this.end.column=e.end.column):this.range.compareStart(e.end.row,e.end.column)<0&&(this.start.row=e.start.row,this.start.column=e.start.column)}else if(e.start.row==this.end.row)this.folds.push(e),this.end.row=e.end.row,this.end.column=e.end.column;else{if(e.end.row!=this.start.row)throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");this.folds.unshift(e),this.start.row=e.start.row,this.start.column=e.start.column}e.foldLine=this},this.containsRow=function(e){return e>=this.start.row&&e<=this.end.row},this.walk=function(e,t,n){var r,a,l=0,d=this.folds,h=!0;null==t&&(t=this.end.row,n=this.end.column);for(var f=0;f<d.length;f++){if(-1==(a=(r=d[f]).range.compareStart(t,n)))return void e(null,t,n,l,h);if(!e(null,r.start.row,r.start.column,l,h)&&e(r.placeholder,r.start.row,r.start.column,l)||0===a)return;h=!r.sameRow,l=r.end.column}e(null,t,n,l,h)},this.getNextFoldTo=function(e,t){for(var n,r,a=0;a<this.folds.length;a++){if(-1==(r=(n=this.folds[a]).range.compareEnd(e,t)))return{fold:n,kind:"after"};if(0===r)return{fold:n,kind:"inside"}}return null},this.addRemoveChars=function(e,t,n){var r,a,l=this.getNextFoldTo(e,t);if(l)if(r=l.fold,"inside"==l.kind&&r.start.column!=t&&r.start.row!=e)window.console&&window.console.log(e,t,r);else if(r.start.row==e){var d=(a=this.folds).indexOf(r);for(0===d&&(this.start.column+=n);d<a.length;d++){if((r=a[d]).start.column+=n,!r.sameRow)return;r.end.column+=n}this.end.column+=n}},this.split=function(e,t){var n=this.getNextFoldTo(e,t);if(!n||"inside"==n.kind)return null;var r=n.fold,l=this.folds,d=this.foldData,h=l.indexOf(r),f=l[h-1];this.end.row=f.end.row,this.end.column=f.end.column;var p=new a(d,l=l.splice(h,l.length-h));return d.splice(d.indexOf(this)+1,0,p),p},this.merge=function(e){for(var t=e.folds,n=0;n<t.length;n++)this.addFold(t[n]);var r=this.foldData;r.splice(r.indexOf(e),1)},this.toString=function(){var e=[this.range.toString()+": ["];return this.folds.forEach((function(t){e.push("  "+t.toString())})),e.push("]"),e.join("\n")},this.idxToPosition=function(e){for(var t=0,n=0;n<this.folds.length;n++){var r=this.folds[n];if((e-=r.start.column-t)<0)return{row:r.start.row,column:r.start.column+e};if((e-=r.placeholder.length)<0)return r.start;t=r.end.column}return{row:this.end.row,column:this.end.column+e}}}).call(a.prototype),t.FoldLine=a})),ace.define("ace/range_list",[],(function(e,t,n){"use strict";var r=e("./range").Range.comparePoints,a=function(){this.ranges=[],this.$bias=1};(function(){this.comparePoints=r,this.pointIndex=function(e,t,n){for(var a=this.ranges,l=n||0;l<a.length;l++){var d=a[l],h=r(e,d.end);if(!(h>0)){var f=r(e,d.start);return 0===h?t&&0!==f?-l-2:l:f>0||0===f&&!t?l:-l-1}}return-l-1},this.add=function(e){var t=!e.isEmpty(),n=this.pointIndex(e.start,t);n<0&&(n=-n-1);var r=this.pointIndex(e.end,t,n);return r<0?r=-r-1:r++,this.ranges.splice(n,r-n,e)},this.addList=function(e){for(var t=[],n=e.length;n--;)t.push.apply(t,this.add(e[n]));return t},this.substractPoint=function(e){var t=this.pointIndex(e);if(t>=0)return this.ranges.splice(t,1)},this.merge=function(){for(var e,t=[],n=this.ranges,a=(n=n.sort((function(e,t){return r(e.start,t.start)})))[0],l=1;l<n.length;l++){e=a,a=n[l];var d=r(e.end,a.start);d<0||(0!=d||e.isEmpty()||a.isEmpty())&&(r(e.end,a.end)<0&&(e.end.row=a.end.row,e.end.column=a.end.column),n.splice(l,1),t.push(a),a=e,l--)}return this.ranges=n,t},this.contains=function(e,t){return this.pointIndex({row:e,column:t})>=0},this.containsPoint=function(e){return this.pointIndex(e)>=0},this.rangeAtPoint=function(e){var t=this.pointIndex(e);if(t>=0)return this.ranges[t]},this.clipRows=function(e,t){var n=this.ranges;if(n[0].start.row>t||n[n.length-1].start.row<e)return[];var r=this.pointIndex({row:e,column:0});r<0&&(r=-r-1);var a=this.pointIndex({row:t,column:0},r);a<0&&(a=-a-1);for(var l=[],d=r;d<a;d++)l.push(n[d]);return l},this.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},this.attach=function(e){this.session&&this.detach(),this.session=e,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},this.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},this.$onChange=function(e){for(var t=e.start,n=e.end,r=t.row,a=n.row,l=this.ranges,d=0,h=l.length;d<h;d++){if((y=l[d]).end.row>=r)break}if("insert"==e.action)for(var f=a-r,p=-t.column+n.column;d<h;d++){if((y=l[d]).start.row>r)break;if(y.start.row==r&&y.start.column>=t.column&&(y.start.column==t.column&&this.$bias<=0||(y.start.column+=p,y.start.row+=f)),y.end.row==r&&y.end.column>=t.column){if(y.end.column==t.column&&this.$bias<0)continue;y.end.column==t.column&&p>0&&d<h-1&&y.end.column>y.start.column&&y.end.column==l[d+1].start.column&&(y.end.column-=p),y.end.column+=p,y.end.row+=f}}else for(f=r-a,p=t.column-n.column;d<h;d++){if((y=l[d]).start.row>a)break;y.end.row<a&&(r<y.end.row||r==y.end.row&&t.column<y.end.column)?(y.end.row=r,y.end.column=t.column):y.end.row==a?y.end.column<=n.column?(f||y.end.column>t.column)&&(y.end.column=t.column,y.end.row=t.row):(y.end.column+=p,y.end.row+=f):y.end.row>a&&(y.end.row+=f),y.start.row<a&&(r<y.start.row||r==y.start.row&&t.column<y.start.column)?(y.start.row=r,y.start.column=t.column):y.start.row==a?y.start.column<=n.column?(f||y.start.column>t.column)&&(y.start.column=t.column,y.start.row=t.row):(y.start.column+=p,y.start.row+=f):y.start.row>a&&(y.start.row+=f)}if(0!=f&&d<h)for(;d<h;d++){var y;(y=l[d]).start.row+=f,y.end.row+=f}}}).call(a.prototype),t.RangeList=a})),ace.define("ace/edit_session/fold",[],(function(e,t,n){"use strict";var r=e("../range_list").RangeList,a=e("../lib/oop"),l=t.Fold=function(e,t){this.foldLine=null,this.placeholder=t,this.range=e,this.start=e.start,this.end=e.end,this.sameRow=e.start.row==e.end.row,this.subFolds=this.ranges=[]};function d(e,t){e.row-=t.row,0==e.row&&(e.column-=t.column)}function h(e,t){0==e.row&&(e.column+=t.column),e.row+=t.row}a.inherits(l,r),function(){this.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},this.setFoldLine=function(e){this.foldLine=e,this.subFolds.forEach((function(t){t.setFoldLine(e)}))},this.clone=function(){var e=this.range.clone(),t=new l(e,this.placeholder);return this.subFolds.forEach((function(e){t.subFolds.push(e.clone())})),t.collapseChildren=this.collapseChildren,t},this.addSubFold=function(e){if(!this.range.isEqual(e)){var t,n;t=e,n=this.start,d(t.start,n),d(t.end,n);for(var r=e.start.row,a=e.start.column,l=0,h=-1;l<this.subFolds.length&&1==(h=this.subFolds[l].range.compare(r,a));l++);var f=this.subFolds[l],p=0;if(0==h){if(f.range.containsRange(e))return f.addSubFold(e);p=1}r=e.range.end.row,a=e.range.end.column;var y=l;for(h=-1;y<this.subFolds.length&&1==(h=this.subFolds[y].range.compare(r,a));y++);0==h&&y++;for(var w=this.subFolds.splice(l,y-l,e),_=0==h?w.length-1:w.length,C=p;C<_;C++)e.addSubFold(w[C]);return e.setFoldLine(this.foldLine),e}},this.restoreRange=function(e){return function(e,t){h(e.start,t),h(e.end,t)}(e,this.start)}}.call(l.prototype)})),ace.define("ace/edit_session/folding",[],(function(e,t,n){"use strict";var r=e("../range").Range,a=e("./fold_line").FoldLine,l=e("./fold").Fold,d=e("../token_iterator").TokenIterator;t.Folding=function(){this.getFoldAt=function(e,t,n){var r=this.getFoldLine(e);if(!r)return null;for(var a=r.folds,l=0;l<a.length;l++){var d=a[l].range;if(d.contains(e,t)){if(1==n&&d.isEnd(e,t)&&!d.isEmpty())continue;if(-1==n&&d.isStart(e,t)&&!d.isEmpty())continue;return a[l]}}},this.getFoldsInRange=function(e){var t=e.start,n=e.end,r=this.$foldData,a=[];t.column+=1,n.column-=1;for(var l=0;l<r.length;l++){var d=r[l].range.compareRange(e);if(2!=d){if(-2==d)break;for(var h=r[l].folds,f=0;f<h.length;f++){var p=h[f];if(-2==(d=p.range.compareRange(e)))break;if(2!=d){if(42==d)break;a.push(p)}}}}return t.column-=1,n.column+=1,a},this.getFoldsInRangeList=function(e){if(Array.isArray(e)){var t=[];e.forEach((function(e){t=t.concat(this.getFoldsInRange(e))}),this)}else t=this.getFoldsInRange(e);return t},this.getAllFolds=function(){for(var e=[],t=this.$foldData,n=0;n<t.length;n++)for(var r=0;r<t[n].folds.length;r++)e.push(t[n].folds[r]);return e},this.getFoldStringAt=function(e,t,n,r){if(!(r=r||this.getFoldLine(e)))return null;for(var a,l,d={end:{column:0}},h=0;h<r.folds.length;h++){var f=(l=r.folds[h]).range.compareEnd(e,t);if(-1==f){a=this.getLine(l.start.row).substring(d.end.column,l.start.column);break}if(0===f)return null;d=l}return a||(a=this.getLine(l.start.row).substring(d.end.column)),-1==n?a.substring(0,t-d.end.column):1==n?a.substring(t-d.end.column):a},this.getFoldLine=function(e,t){var n=this.$foldData,r=0;for(t&&(r=n.indexOf(t)),-1==r&&(r=0);r<n.length;r++){var a=n[r];if(a.start.row<=e&&a.end.row>=e)return a;if(a.end.row>e)return null}return null},this.getNextFoldLine=function(e,t){var n=this.$foldData,r=0;for(t&&(r=n.indexOf(t)),-1==r&&(r=0);r<n.length;r++){var a=n[r];if(a.end.row>=e)return a}return null},this.getFoldedRowCount=function(e,t){for(var n=this.$foldData,r=t-e+1,a=0;a<n.length;a++){var l=n[a],d=l.end.row,h=l.start.row;if(d>=t){h<t&&(h>=e?r-=t-h:r=0);break}d>=e&&(r-=h>=e?d-h:d-e+1)}return r},this.$addFoldLine=function(e){return this.$foldData.push(e),this.$foldData.sort((function(e,t){return e.start.row-t.start.row})),e},this.addFold=function(e,t){var n,r=this.$foldData,d=!1;e instanceof l?n=e:(n=new l(t,e)).collapseChildren=t.collapseChildren,this.$clipRangeToDocument(n.range);var h=n.start.row,f=n.start.column,p=n.end.row,y=n.end.column,w=this.getFoldAt(h,f,1),_=this.getFoldAt(p,y,-1);if(w&&_==w)return w.addSubFold(n);w&&!w.range.isStart(h,f)&&this.removeFold(w),_&&!_.range.isEnd(p,y)&&this.removeFold(_);var C=this.getFoldsInRange(n.range);C.length>0&&(this.removeFolds(C),n.collapseChildren||C.forEach((function(e){n.addSubFold(e)})));for(var S=0;S<r.length;S++){var k=r[S];if(p==k.start.row){k.addFold(n),d=!0;break}if(h==k.end.row){if(k.addFold(n),d=!0,!n.sameRow){var x=r[S+1];if(x&&x.start.row==p){k.merge(x);break}}break}if(p<=k.start.row)break}return d||(k=this.$addFoldLine(new a(this.$foldData,n))),this.$useWrapMode?this.$updateWrapData(k.start.row,k.start.row):this.$updateRowLengthCache(k.start.row,k.start.row),this.$modified=!0,this._signal("changeFold",{data:n,action:"add"}),n},this.addFolds=function(e){e.forEach((function(e){this.addFold(e)}),this)},this.removeFold=function(e){var t=e.foldLine,n=t.start.row,r=t.end.row,a=this.$foldData,l=t.folds;if(1==l.length)a.splice(a.indexOf(t),1);else if(t.range.isEnd(e.end.row,e.end.column))l.pop(),t.end.row=l[l.length-1].end.row,t.end.column=l[l.length-1].end.column;else if(t.range.isStart(e.start.row,e.start.column))l.shift(),t.start.row=l[0].start.row,t.start.column=l[0].start.column;else if(e.sameRow)l.splice(l.indexOf(e),1);else{var d=t.split(e.start.row,e.start.column);(l=d.folds).shift(),d.start.row=l[0].start.row,d.start.column=l[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(n,r):this.$updateRowLengthCache(n,r)),this.$modified=!0,this._signal("changeFold",{data:e,action:"remove"})},this.removeFolds=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]);t.forEach((function(e){this.removeFold(e)}),this),this.$modified=!0},this.expandFold=function(e){this.removeFold(e),e.subFolds.forEach((function(t){e.restoreRange(t),this.addFold(t)}),this),e.collapseChildren>0&&this.foldAll(e.start.row+1,e.end.row,e.collapseChildren-1),e.subFolds=[]},this.expandFolds=function(e){e.forEach((function(e){this.expandFold(e)}),this)},this.unfold=function(e,t){var n,a;if(null==e?(n=new r(0,0,this.getLength(),0),null==t&&(t=!0)):n="number"==typeof e?new r(e,0,e,this.getLine(e).length):"row"in e?r.fromPoints(e,e):e,a=this.getFoldsInRangeList(n),0!=t?this.removeFolds(a):this.expandFolds(a),a.length)return a},this.isRowFolded=function(e,t){return!!this.getFoldLine(e,t)},this.getRowFoldEnd=function(e,t){var n=this.getFoldLine(e,t);return n?n.end.row:e},this.getRowFoldStart=function(e,t){var n=this.getFoldLine(e,t);return n?n.start.row:e},this.getFoldDisplayLine=function(e,t,n,r,a){null==r&&(r=e.start.row),null==a&&(a=0),null==t&&(t=e.end.row),null==n&&(n=this.getLine(t).length);var l=this.doc,d="";return e.walk((function(e,t,n,h){if(!(t<r)){if(t==r){if(n<a)return;h=Math.max(a,h)}d+=null!=e?e:l.getLine(t).substring(h,n)}}),t,n),d},this.getDisplayLine=function(e,t,n,r){var a,l=this.getFoldLine(e);return l?this.getFoldDisplayLine(l,e,t,n,r):(a=this.doc.getLine(e)).substring(r||0,t||a.length)},this.$cloneFoldData=function(){var e=[];return e=this.$foldData.map((function(t){var n=t.folds.map((function(e){return e.clone()}));return new a(e,n)}))},this.toggleFold=function(e){var t,n,r=this.selection.getRange();if(r.isEmpty()){var a=r.start;if(t=this.getFoldAt(a.row,a.column))return void this.expandFold(t);(n=this.findMatchingBracket(a))?1==r.comparePoint(n)?r.end=n:(r.start=n,r.start.column++,r.end.column--):(n=this.findMatchingBracket({row:a.row,column:a.column+1}))?(1==r.comparePoint(n)?r.end=n:r.start=n,r.start.column++):r=this.getCommentFoldRange(a.row,a.column)||r}else{var l=this.getFoldsInRange(r);if(e&&l.length)return void this.expandFolds(l);1==l.length&&(t=l[0])}if(t||(t=this.getFoldAt(r.start.row,r.start.column)),t&&t.range.toString()==r.toString())this.expandFold(t);else{var d="...";if(!r.isMultiLine()){if((d=this.getTextRange(r)).length<4)return;d=d.trim().substring(0,2)+".."}this.addFold(d,r)}},this.getCommentFoldRange=function(e,t,n){var a=new d(this,e,t),l=a.getCurrentToken(),h=l&&l.type;if(l&&/^comment|string/.test(h)){"comment"==(h=h.match(/comment|string/)[0])&&(h+="|doc-start");var f=new RegExp(h),p=new r;if(1!=n){do{l=a.stepBackward()}while(l&&f.test(l.type));a.stepForward()}if(p.start.row=a.getCurrentTokenRow(),p.start.column=a.getCurrentTokenColumn()+2,a=new d(this,e,t),-1!=n){var y=-1;do{if(l=a.stepForward(),-1==y){var w=this.getState(a.$row);f.test(w)||(y=a.$row)}else if(a.$row>y)break}while(l&&f.test(l.type));l=a.stepBackward()}else l=a.getCurrentToken();return p.end.row=a.getCurrentTokenRow(),p.end.column=a.getCurrentTokenColumn()+l.value.length-2,p}},this.foldAll=function(e,t,n,r){null==n&&(n=1e5);var a=this.foldWidgets;if(a){t=t||this.getLength();for(var l=e=e||0;l<t;l++)if(null==a[l]&&(a[l]=this.getFoldWidget(l)),"start"==a[l]&&(!r||r(l))){var d=this.getFoldWidgetRange(l);d&&d.isMultiLine()&&d.end.row<=t&&d.start.row>=e&&(l=d.end.row,d.collapseChildren=n,this.addFold("...",d))}}},this.foldToLevel=function(e){for(this.foldAll();e-- >0;)this.unfold(null,!1)},this.foldAllComments=function(){var e=this;this.foldAll(null,null,null,(function(t){for(var n=e.getTokens(t),r=0;r<n.length;r++){var a=n[r];if("text"!=a.type||!/^\s+$/.test(a.value))return!!/comment/.test(a.type)}}))},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(e){if(!this.$foldStyles[e])throw new Error("invalid fold style: "+e+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=e){this.$foldStyle=e,"manual"==e&&this.unfold();var t=this.$foldMode;this.$setFolding(null),this.$setFolding(t)}},this.$setFolding=function(e){this.$foldMode!=e&&(this.$foldMode=e,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation"),e&&"manual"!=this.$foldStyle?(this.foldWidgets=[],this.getFoldWidget=e.getFoldWidget.bind(e,this,this.$foldStyle),this.getFoldWidgetRange=e.getFoldWidgetRange.bind(e,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)):this.foldWidgets=null)},this.getParentFoldRangeData=function(e,t){var n=this.foldWidgets;if(!n||t&&n[e])return{};for(var r,a=e-1;a>=0;){var l=n[a];if(null==l&&(l=n[a]=this.getFoldWidget(a)),"start"==l){var d=this.getFoldWidgetRange(a);if(r||(r=d),d&&d.end.row>=e)break}a--}return{range:-1!==a&&d,firstRange:r}},this.onFoldWidgetClick=function(e,t){var n={children:(t=t.domEvent).shiftKey,all:t.ctrlKey||t.metaKey,siblings:t.altKey};if(!this.$toggleFoldWidget(e,n)){var r=t.target||t.srcElement;r&&/ace_fold-widget/.test(r.className)&&(r.className+=" ace_invalid")}},this.$toggleFoldWidget=function(e,t){if(this.getFoldWidget){var n=this.getFoldWidget(e),r=this.getLine(e),a="end"===n?-1:1,l=this.getFoldAt(e,-1===a?0:r.length,a);if(l)return t.children||t.all?this.removeFold(l):this.expandFold(l),l;var d=this.getFoldWidgetRange(e,!0);if(d&&!d.isMultiLine()&&(l=this.getFoldAt(d.start.row,d.start.column,1))&&d.isEqual(l.range))return this.removeFold(l),l;if(t.siblings){var h=this.getParentFoldRangeData(e);if(h.range)var f=h.range.start.row+1,p=h.range.end.row;this.foldAll(f,p,t.all?1e4:0)}else t.children?(p=d?d.end.row:this.getLength(),this.foldAll(e+1,p,t.all?1e4:0)):d&&(t.all&&(d.collapseChildren=1e4),this.addFold("...",d));return d}},this.toggleFoldWidget=function(e){var t=this.selection.getCursor().row;t=this.getRowFoldStart(t);var n=this.$toggleFoldWidget(t,{});if(!n){var r=this.getParentFoldRangeData(t,!0);if(n=r.range||r.firstRange){t=n.start.row;var a=this.getFoldAt(t,this.getLine(t).length,1);a?this.removeFold(a):this.addFold("...",n)}}},this.updateFoldWidgets=function(e){var t=e.start.row,n=e.end.row-t;if(0===n)this.foldWidgets[t]=null;else if("remove"==e.action)this.foldWidgets.splice(t,n+1,null);else{var r=Array(n+1);r.unshift(t,1),this.foldWidgets.splice.apply(this.foldWidgets,r)}},this.tokenizerUpdateFoldWidgets=function(e){var t=e.data;t.first!=t.last&&this.foldWidgets.length>t.first&&this.foldWidgets.splice(t.first,this.foldWidgets.length)}}})),ace.define("ace/edit_session/bracket_match",[],(function(e,t,n){"use strict";var r=e("../token_iterator").TokenIterator,a=e("../range").Range;t.BracketMatch=function(){this.findMatchingBracket=function(e,t){if(0==e.column)return null;var n=t||this.getLine(e.row).charAt(e.column-1);if(""==n)return null;var r=n.match(/([\(\[\{])|([\)\]\}])/);return r?r[1]?this.$findClosingBracket(r[1],e):this.$findOpeningBracket(r[2],e):null},this.getBracketRange=function(e){var t,n=this.getLine(e.row),r=!0,l=n.charAt(e.column-1),d=l&&l.match(/([\(\[\{])|([\)\]\}])/);if(d||(l=n.charAt(e.column),e={row:e.row,column:e.column+1},d=l&&l.match(/([\(\[\{])|([\)\]\}])/),r=!1),!d)return null;if(d[1]){if(!(h=this.$findClosingBracket(d[1],e)))return null;t=a.fromPoints(e,h),r||(t.end.column++,t.start.column--),t.cursor=t.end}else{var h;if(!(h=this.$findOpeningBracket(d[2],e)))return null;t=a.fromPoints(h,e),r||(t.start.column++,t.end.column--),t.cursor=t.start}return t},this.getMatchingBracketRanges=function(e){var t=this.getLine(e.row),n=t.charAt(e.column-1),r=n&&n.match(/([\(\[\{])|([\)\]\}])/);if(r||(n=t.charAt(e.column),e={row:e.row,column:e.column+1},r=n&&n.match(/([\(\[\{])|([\)\]\}])/)),!r)return null;var l=new a(e.row,e.column-1,e.row,e.column),d=r[1]?this.$findClosingBracket(r[1],e):this.$findOpeningBracket(r[2],e);return d?[l,new a(d.row,d.column,d.row,d.column+1)]:[l]},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{","<":">",">":"<"},this.$findOpeningBracket=function(e,t,n){var a=this.$brackets[e],l=1,d=new r(this,t.row,t.column),h=d.getCurrentToken();if(h||(h=d.stepForward()),h){n||(n=new RegExp("(\\.?"+h.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)")+")+"));for(var f=t.column-d.getCurrentTokenColumn()-2,p=h.value;;){for(;f>=0;){var y=p.charAt(f);if(y==a){if(0==(l-=1))return{row:d.getCurrentTokenRow(),column:f+d.getCurrentTokenColumn()}}else y==e&&(l+=1);f-=1}do{h=d.stepBackward()}while(h&&!n.test(h.type));if(null==h)break;f=(p=h.value).length-1}return null}},this.$findClosingBracket=function(e,t,n){var a=this.$brackets[e],l=1,d=new r(this,t.row,t.column),h=d.getCurrentToken();if(h||(h=d.stepForward()),h){n||(n=new RegExp("(\\.?"+h.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)")+")+"));for(var f=t.column-d.getCurrentTokenColumn();;){for(var p=h.value,y=p.length;f<y;){var w=p.charAt(f);if(w==a){if(0==(l-=1))return{row:d.getCurrentTokenRow(),column:f+d.getCurrentTokenColumn()}}else w==e&&(l+=1);f+=1}do{h=d.stepForward()}while(h&&!n.test(h.type));if(null==h)break;f=0}return null}}}})),ace.define("ace/edit_session",[],(function(e,t,n){"use strict";var r=e("./lib/oop"),a=e("./lib/lang"),l=e("./bidihandler").BidiHandler,d=e("./config"),h=e("./lib/event_emitter").EventEmitter,f=e("./selection").Selection,p=e("./mode/text").Mode,y=e("./range").Range,w=e("./document").Document,_=e("./background_tokenizer").BackgroundTokenizer,C=e("./search_highlight").SearchHighlight,S=function(e,t){this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.id="session"+ ++S.$uid,this.$foldData.toString=function(){return this.join("\n")},this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),"object"==typeof e&&e.getLine||(e=new w(e)),this.setDocument(e),this.selection=new f(this),this.$bidiHandler=new l(this),d.resetOptions(this),this.setMode(t),d._signal("session",this)};S.$uid=0,function(){r.implement(this,h),this.setDocument=function(e){this.doc&&this.doc.removeListener("change",this.$onChange),this.doc=e,e.on("change",this.$onChange),this.bgTokenizer&&this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},this.getDocument=function(){return this.doc},this.$resetRowCache=function(e){if(!e)return this.$docRowCache=[],void(this.$screenRowCache=[]);var t=this.$docRowCache.length,n=this.$getRowCacheIndex(this.$docRowCache,e)+1;t>n&&(this.$docRowCache.splice(n,t),this.$screenRowCache.splice(n,t))},this.$getRowCacheIndex=function(e,t){for(var n=0,r=e.length-1;n<=r;){var a=n+r>>1,l=e[a];if(t>l)n=a+1;else{if(!(t<l))return a;r=a-1}}return n-1},this.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.bgTokenizer&&this.bgTokenizer.start(0)},this.onChangeFold=function(e){var t=e.data;this.$resetRowCache(t.start.row)},this.onChange=function(e){this.$modified=!0,this.$bidiHandler.onChange(e),this.$resetRowCache(e.start.row);var t=this.$updateInternalDataOnChange(e);!this.$fromUndo&&this.$undoManager&&(t&&t.length&&(this.$undoManager.add({action:"removeFolds",folds:t},this.mergeUndoDeltas),this.mergeUndoDeltas=!0),this.$undoManager.add(e,this.mergeUndoDeltas),this.mergeUndoDeltas=!0,this.$informUndoManager.schedule()),this.bgTokenizer&&this.bgTokenizer.$updateOnChange(e),this._signal("change",e)},this.setValue=function(e){this.doc.setValue(e),this.selection.moveTo(0,0),this.$resetRowCache(0),this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},this.getValue=this.toString=function(){return this.doc.getValue()},this.getSelection=function(){return this.selection},this.getState=function(e){return this.bgTokenizer.getState(e)},this.getTokens=function(e){return this.bgTokenizer.getTokens(e)},this.getTokenAt=function(e,t){var n,r=this.bgTokenizer.getTokens(e),a=0;if(null==t){var l=r.length-1;a=this.getLine(e).length}else for(l=0;l<r.length&&!((a+=r[l].value.length)>=t);l++);return(n=r[l])?(n.index=l,n.start=a-n.value.length,n):null},this.setUndoManager=function(e){if(this.$undoManager=e,this.$informUndoManager&&this.$informUndoManager.cancel(),e){var t=this;e.addSession(this),this.$syncInformUndoManager=function(){t.$informUndoManager.cancel(),t.mergeUndoDeltas=!1},this.$informUndoManager=a.delayedCall(this.$syncInformUndoManager)}else this.$syncInformUndoManager=function(){}},this.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},this.$defaultUndoManager={undo:function(){},redo:function(){},hasUndo:function(){},hasRedo:function(){},reset:function(){},add:function(){},addSelection:function(){},startNewGroup:function(){},addSession:function(){}},this.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},this.getTabString=function(){return this.getUseSoftTabs()?a.stringRepeat(" ",this.getTabSize()):"\t"},this.setUseSoftTabs=function(e){this.setOption("useSoftTabs",e)},this.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},this.setTabSize=function(e){this.setOption("tabSize",e)},this.getTabSize=function(){return this.$tabSize},this.isTabStop=function(e){return this.$useSoftTabs&&e.column%this.$tabSize==0},this.setNavigateWithinSoftTabs=function(e){this.setOption("navigateWithinSoftTabs",e)},this.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs},this.$overwrite=!1,this.setOverwrite=function(e){this.setOption("overwrite",e)},this.getOverwrite=function(){return this.$overwrite},this.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},this.addGutterDecoration=function(e,t){this.$decorations[e]||(this.$decorations[e]=""),this.$decorations[e]+=" "+t,this._signal("changeBreakpoint",{})},this.removeGutterDecoration=function(e,t){this.$decorations[e]=(this.$decorations[e]||"").replace(" "+t,""),this._signal("changeBreakpoint",{})},this.getBreakpoints=function(){return this.$breakpoints},this.setBreakpoints=function(e){this.$breakpoints=[];for(var t=0;t<e.length;t++)this.$breakpoints[e[t]]="ace_breakpoint";this._signal("changeBreakpoint",{})},this.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},this.setBreakpoint=function(e,t){void 0===t&&(t="ace_breakpoint"),t?this.$breakpoints[e]=t:delete this.$breakpoints[e],this._signal("changeBreakpoint",{})},this.clearBreakpoint=function(e){delete this.$breakpoints[e],this._signal("changeBreakpoint",{})},this.addMarker=function(e,t,n,r){var a=this.$markerId++,l={range:e,type:n||"line",renderer:"function"==typeof n?n:null,clazz:t,inFront:!!r,id:a};return r?(this.$frontMarkers[a]=l,this._signal("changeFrontMarker")):(this.$backMarkers[a]=l,this._signal("changeBackMarker")),a},this.addDynamicMarker=function(e,t){if(e.update){var n=this.$markerId++;return e.id=n,e.inFront=!!t,t?(this.$frontMarkers[n]=e,this._signal("changeFrontMarker")):(this.$backMarkers[n]=e,this._signal("changeBackMarker")),e}},this.removeMarker=function(e){var t=this.$frontMarkers[e]||this.$backMarkers[e];t&&(delete(t.inFront?this.$frontMarkers:this.$backMarkers)[e],this._signal(t.inFront?"changeFrontMarker":"changeBackMarker"))},this.getMarkers=function(e){return e?this.$frontMarkers:this.$backMarkers},this.highlight=function(e){if(!this.$searchHighlight){var t=new C(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(t)}this.$searchHighlight.setRegexp(e)},this.highlightLines=function(e,t,n,r){"number"!=typeof t&&(n=t,t=e),n||(n="ace_step");var a=new y(e,0,t,1/0);return a.id=this.addMarker(a,n,"fullLine",r),a},this.setAnnotations=function(e){this.$annotations=e,this._signal("changeAnnotation",{})},this.getAnnotations=function(){return this.$annotations||[]},this.clearAnnotations=function(){this.setAnnotations([])},this.$detectNewLine=function(e){var t=e.match(/^.*?(\r?\n)/m);this.$autoNewLine=t?t[1]:"\n"},this.getWordRange=function(e,t){var n=this.getLine(e),r=!1;if(t>0&&(r=!!n.charAt(t-1).match(this.tokenRe)),r||(r=!!n.charAt(t).match(this.tokenRe)),r)var a=this.tokenRe;else if(/^\s+$/.test(n.slice(t-1,t+1)))a=/\s/;else a=this.nonTokenRe;var l=t;if(l>0){do{l--}while(l>=0&&n.charAt(l).match(a));l++}for(var d=t;d<n.length&&n.charAt(d).match(a);)d++;return new y(e,l,e,d)},this.getAWordRange=function(e,t){for(var n=this.getWordRange(e,t),r=this.getLine(n.end.row);r.charAt(n.end.column).match(/[ \t]/);)n.end.column+=1;return n},this.setNewLineMode=function(e){this.doc.setNewLineMode(e)},this.getNewLineMode=function(){return this.doc.getNewLineMode()},this.setUseWorker=function(e){this.setOption("useWorker",e)},this.getUseWorker=function(){return this.$useWorker},this.onReloadTokenizer=function(e){var t=e.data;this.bgTokenizer.start(t.first),this._signal("tokenizerUpdate",e)},this.$modes=d.$modes,this.$mode=null,this.$modeId=null,this.setMode=function(e,t){if(e&&"object"==typeof e){if(e.getTokenizer)return this.$onChangeMode(e);var n=e,r=n.path}else r=e||"ace/mode/text";if(this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new p),this.$modes[r]&&!n)return this.$onChangeMode(this.$modes[r]),void(t&&t());this.$modeId=r,d.loadModule(["mode",r],function(e){if(this.$modeId!==r)return t&&t();this.$modes[r]&&!n?this.$onChangeMode(this.$modes[r]):e&&e.Mode&&(e=new e.Mode(n),n||(this.$modes[r]=e,e.$id=r),this.$onChangeMode(e)),t&&t()}.bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)},this.$onChangeMode=function(e,t){if(t||(this.$modeId=e.$id),this.$mode!==e){var n=this.$mode;this.$mode=e,this.$stopWorker(),this.$useWorker&&this.$startWorker();var r=e.getTokenizer();if(void 0!==r.on){var a=this.onReloadTokenizer.bind(this);r.on("update",a)}if(this.bgTokenizer)this.bgTokenizer.setTokenizer(r);else{this.bgTokenizer=new _(r);var l=this;this.bgTokenizer.on("update",(function(e){l._signal("tokenizerUpdate",e)}))}this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=e.tokenRe,this.nonTokenRe=e.nonTokenRe,t||(e.attachToSession&&e.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(e.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode",{oldMode:n,mode:e}))}},this.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},this.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(e){d.warn("Could not load worker",e),this.$worker=null}},this.getMode=function(){return this.$mode},this.$scrollTop=0,this.setScrollTop=function(e){this.$scrollTop===e||isNaN(e)||(this.$scrollTop=e,this._signal("changeScrollTop",e))},this.getScrollTop=function(){return this.$scrollTop},this.$scrollLeft=0,this.setScrollLeft=function(e){this.$scrollLeft===e||isNaN(e)||(this.$scrollLeft=e,this._signal("changeScrollLeft",e))},this.getScrollLeft=function(){return this.$scrollLeft},this.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},this.getLineWidgetMaxWidth=function(){if(null!=this.lineWidgetsWidth)return this.lineWidgetsWidth;var e=0;return this.lineWidgets.forEach((function(t){t&&t.screenWidth>e&&(e=t.screenWidth)})),this.lineWidgetWidth=e},this.$computeWidth=function(e){if(this.$modified||e){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var t=this.doc.getAllLines(),n=this.$rowLengthCache,r=0,a=0,l=this.$foldData[a],d=l?l.start.row:1/0,h=t.length,f=0;f<h;f++){if(f>d){if((f=l.end.row+1)>=h)break;d=(l=this.$foldData[a++])?l.start.row:1/0}null==n[f]&&(n[f]=this.$getStringScreenWidth(t[f])[0]),n[f]>r&&(r=n[f])}this.screenWidth=r}},this.getLine=function(e){return this.doc.getLine(e)},this.getLines=function(e,t){return this.doc.getLines(e,t)},this.getLength=function(){return this.doc.getLength()},this.getTextRange=function(e){return this.doc.getTextRange(e||this.selection.getRange())},this.insert=function(e,t){return this.doc.insert(e,t)},this.remove=function(e){return this.doc.remove(e)},this.removeFullLines=function(e,t){return this.doc.removeFullLines(e,t)},this.undoChanges=function(e,t){if(e.length){this.$fromUndo=!0;for(var n=e.length-1;-1!=n;n--){var r=e[n];"insert"==r.action||"remove"==r.action?this.doc.revertDelta(r):r.folds&&this.addFolds(r.folds)}!t&&this.$undoSelect&&(e.selectionBefore?this.selection.fromJSON(e.selectionBefore):this.selection.setRange(this.$getUndoSelection(e,!0))),this.$fromUndo=!1}},this.redoChanges=function(e,t){if(e.length){this.$fromUndo=!0;for(var n=0;n<e.length;n++){var r=e[n];"insert"!=r.action&&"remove"!=r.action||this.doc.$safeApplyDelta(r)}!t&&this.$undoSelect&&(e.selectionAfter?this.selection.fromJSON(e.selectionAfter):this.selection.setRange(this.$getUndoSelection(e,!1))),this.$fromUndo=!1}},this.setUndoSelect=function(e){this.$undoSelect=e},this.$getUndoSelection=function(e,t){function n(e){return t?"insert"!==e.action:"insert"===e.action}for(var r,a,l=0;l<e.length;l++){var d=e[l];d.start&&(r?n(d)?(a=d.start,-1==r.compare(a.row,a.column)&&r.setStart(a),a=d.end,1==r.compare(a.row,a.column)&&r.setEnd(a)):(a=d.start,-1==r.compare(a.row,a.column)&&(r=y.fromPoints(d.start,d.start))):r=n(d)?y.fromPoints(d.start,d.end):y.fromPoints(d.start,d.start))}return r},this.replace=function(e,t){return this.doc.replace(e,t)},this.moveText=function(e,t,n){var r=this.getTextRange(e),a=this.getFoldsInRange(e),l=y.fromPoints(t,t);if(!n){this.remove(e);var d=e.start.row-e.end.row;(p=d?-e.end.column:e.start.column-e.end.column)&&(l.start.row==e.end.row&&l.start.column>e.end.column&&(l.start.column+=p),l.end.row==e.end.row&&l.end.column>e.end.column&&(l.end.column+=p)),d&&l.start.row>=e.end.row&&(l.start.row+=d,l.end.row+=d)}if(l.end=this.insert(l.start,r),a.length){var h=e.start,f=l.start,p=(d=f.row-h.row,f.column-h.column);this.addFolds(a.map((function(e){return(e=e.clone()).start.row==h.row&&(e.start.column+=p),e.end.row==h.row&&(e.end.column+=p),e.start.row+=d,e.end.row+=d,e})))}return l},this.indentRows=function(e,t,n){n=n.replace(/\t/g,this.getTabString());for(var r=e;r<=t;r++)this.doc.insertInLine({row:r,column:0},n)},this.outdentRows=function(e){for(var t=e.collapseRows(),n=new y(0,0,0,0),r=this.getTabSize(),a=t.start.row;a<=t.end.row;++a){var l=this.getLine(a);n.start.row=a,n.end.row=a;for(var d=0;d<r&&" "==l.charAt(d);++d);d<r&&"\t"==l.charAt(d)?(n.start.column=d,n.end.column=d+1):(n.start.column=0,n.end.column=d),this.remove(n)}},this.$moveLines=function(e,t,n){if(e=this.getRowFoldStart(e),t=this.getRowFoldEnd(t),n<0){if((a=this.getRowFoldStart(e+n))<0)return 0;var r=a-e}else if(n>0){var a;if((a=this.getRowFoldEnd(t+n))>this.doc.getLength()-1)return 0;r=a-t}else{e=this.$clipRowToDocument(e);r=(t=this.$clipRowToDocument(t))-e+1}var l=new y(e,0,t,Number.MAX_VALUE),d=this.getFoldsInRange(l).map((function(e){return(e=e.clone()).start.row+=r,e.end.row+=r,e})),h=0==n?this.doc.getLines(e,t):this.doc.removeFullLines(e,t);return this.doc.insertFullLines(e+r,h),d.length&&this.addFolds(d),r},this.moveLinesUp=function(e,t){return this.$moveLines(e,t,-1)},this.moveLinesDown=function(e,t){return this.$moveLines(e,t,1)},this.duplicateLines=function(e,t){return this.$moveLines(e,t,0)},this.$clipRowToDocument=function(e){return Math.max(0,Math.min(e,this.doc.getLength()-1))},this.$clipColumnToRow=function(e,t){return t<0?0:Math.min(this.doc.getLine(e).length,t)},this.$clipPositionToDocument=function(e,t){if(t=Math.max(0,t),e<0)e=0,t=0;else{var n=this.doc.getLength();e>=n?(e=n-1,t=this.doc.getLine(n-1).length):t=Math.min(this.doc.getLine(e).length,t)}return{row:e,column:t}},this.$clipRangeToDocument=function(e){e.start.row<0?(e.start.row=0,e.start.column=0):e.start.column=this.$clipColumnToRow(e.start.row,e.start.column);var t=this.doc.getLength()-1;return e.end.row>t?(e.end.row=t,e.end.column=this.doc.getLine(t).length):e.end.column=this.$clipColumnToRow(e.end.row,e.end.column),e},this.$wrapLimit=80,this.$useWrapMode=!1,this.$wrapLimitRange={min:null,max:null},this.setUseWrapMode=function(e){if(e!=this.$useWrapMode){if(this.$useWrapMode=e,this.$modified=!0,this.$resetRowCache(0),e){var t=this.getLength();this.$wrapData=Array(t),this.$updateWrapData(0,t-1)}this._signal("changeWrapMode")}},this.getUseWrapMode=function(){return this.$useWrapMode},this.setWrapLimitRange=function(e,t){this.$wrapLimitRange.min===e&&this.$wrapLimitRange.max===t||(this.$wrapLimitRange={min:e,max:t},this.$modified=!0,this.$bidiHandler.markAsDirty(),this.$useWrapMode&&this._signal("changeWrapMode"))},this.adjustWrapLimit=function(e,t){var n=this.$wrapLimitRange;n.max<0&&(n={min:t,max:t});var r=this.$constrainWrapLimit(e,n.min,n.max);return r!=this.$wrapLimit&&r>1&&(this.$wrapLimit=r,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0)},this.$constrainWrapLimit=function(e,t,n){return t&&(e=Math.max(t,e)),n&&(e=Math.min(n,e)),e},this.getWrapLimit=function(){return this.$wrapLimit},this.setWrapLimit=function(e){this.setWrapLimitRange(e,e)},this.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},this.$updateInternalDataOnChange=function(e){var t=this.$useWrapMode,n=e.action,r=e.start,a=e.end,l=r.row,d=a.row,h=d-l,f=null;if(this.$updating=!0,0!=h)if("remove"===n){this[t?"$wrapData":"$rowLengthCache"].splice(l,h);var p=this.$foldData;f=this.getFoldsInRange(e),this.removeFolds(f);var y=0;if(k=this.getFoldLine(a.row)){k.addRemoveChars(a.row,a.column,r.column-a.column),k.shiftRow(-h);var w=this.getFoldLine(l);w&&w!==k&&(w.merge(k),k=w),y=p.indexOf(k)+1}for(;y<p.length;y++){(k=p[y]).start.row>=a.row&&k.shiftRow(-h)}d=l}else{var _=Array(h);_.unshift(l,0);var C=t?this.$wrapData:this.$rowLengthCache;C.splice.apply(C,_);p=this.$foldData,y=0;if(k=this.getFoldLine(l)){var S=k.range.compareInside(r.row,r.column);0==S?(k=k.split(r.row,r.column))&&(k.shiftRow(h),k.addRemoveChars(d,0,a.column-r.column)):-1==S&&(k.addRemoveChars(l,0,a.column-r.column),k.shiftRow(h)),y=p.indexOf(k)+1}for(;y<p.length;y++){var k;(k=p[y]).start.row>=l&&k.shiftRow(h)}}else h=Math.abs(e.start.column-e.end.column),"remove"===n&&(f=this.getFoldsInRange(e),this.removeFolds(f),h=-h),(k=this.getFoldLine(l))&&k.addRemoveChars(l,r.column,h);return t&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,t?this.$updateWrapData(l,d):this.$updateRowLengthCache(l,d),f},this.$updateRowLengthCache=function(e,t,n){this.$rowLengthCache[e]=null,this.$rowLengthCache[t]=null},this.$updateWrapData=function(n,r){var a,l,d=this.doc.getAllLines(),h=this.getTabSize(),f=this.$wrapData,p=this.$wrapLimit,y=n;for(r=Math.min(r,d.length-1);y<=r;)(l=this.getFoldLine(y,l))?(a=[],l.walk(function(n,r,l,h){var f;if(null!=n){(f=this.$getDisplayTokens(n,a.length))[0]=e;for(var p=1;p<f.length;p++)f[p]=t}else f=this.$getDisplayTokens(d[r].substring(h,l),a.length);a=a.concat(f)}.bind(this),l.end.row,d[l.end.row].length+1),f[l.start.row]=this.$computeWrapSplits(a,p,h),y=l.end.row+1):(a=this.$getDisplayTokens(d[y]),f[y]=this.$computeWrapSplits(a,p,h),y++)};var e=3,t=4;function n(e){return!(e<4352)&&(e>=4352&&e<=4447||e>=4515&&e<=4519||e>=4602&&e<=4607||e>=9001&&e<=9002||e>=11904&&e<=11929||e>=11931&&e<=12019||e>=12032&&e<=12245||e>=12272&&e<=12283||e>=12288&&e<=12350||e>=12353&&e<=12438||e>=12441&&e<=12543||e>=12549&&e<=12589||e>=12593&&e<=12686||e>=12688&&e<=12730||e>=12736&&e<=12771||e>=12784&&e<=12830||e>=12832&&e<=12871||e>=12880&&e<=13054||e>=13056&&e<=19903||e>=19968&&e<=42124||e>=42128&&e<=42182||e>=43360&&e<=43388||e>=44032&&e<=55203||e>=55216&&e<=55238||e>=55243&&e<=55291||e>=63744&&e<=64255||e>=65040&&e<=65049||e>=65072&&e<=65106||e>=65108&&e<=65126||e>=65128&&e<=65131||e>=65281&&e<=65376||e>=65504&&e<=65510)}this.$computeWrapSplits=function(n,r,a){if(0==n.length)return[];var l=[],d=n.length,h=0,f=0,p=this.$wrapAsCode,y=this.$indentedSoftWrap,w=r<=Math.max(2*a,8)||!1===y?0:Math.floor(r/2);function _(e){for(var t=e-h,r=h;r<e;r++){var d=n[r];12!==d&&2!==d||(t-=1)}l.length||(C=function(){var e=0;if(0===w)return e;if(y)for(var t=0;t<n.length;t++){var r=n[t];if(10==r)e+=1;else{if(11!=r){if(12==r)continue;break}e+=a}}return p&&!1!==y&&(e+=a),Math.min(e,w)}(),l.indent=C),f+=t,l.push(f),h=e}for(var C=0;d-h>r-C;){var S=h+r-C;if(n[S-1]>=10&&n[S]>=10)_(S);else if(n[S]!=e&&n[S]!=t){for(var k=Math.max(S-(r-(r>>2)),h-1);S>k&&n[S]<e;)S--;if(p){for(;S>k&&n[S]<e;)S--;for(;S>k&&9==n[S];)S--}else for(;S>k&&n[S]<10;)S--;S>k?_(++S):(2==n[S=h+r]&&S--,_(S-C))}else{for(;S!=h-1&&n[S]!=e;S--);if(S>h){_(S);continue}for(S=h+r;S<n.length&&n[S]==t;S++);if(S==n.length)break;_(S)}}return l},this.$getDisplayTokens=function(e,t){var r,a=[];t=t||0;for(var l=0;l<e.length;l++){var d=e.charCodeAt(l);if(9==d){r=this.getScreenTabSize(a.length+t),a.push(11);for(var h=1;h<r;h++)a.push(12)}else 32==d?a.push(10):d>39&&d<48||d>57&&d<64?a.push(9):d>=4352&&n(d)?a.push(1,2):a.push(1)}return a},this.$getStringScreenWidth=function(e,t,r){if(0==t)return[0,0];var a,l;for(null==t&&(t=1/0),r=r||0,l=0;l<e.length&&(9==(a=e.charCodeAt(l))?r+=this.getScreenTabSize(r):a>=4352&&n(a)?r+=2:r+=1,!(r>t));l++);return[r,l]},this.lineWidgets=null,this.getRowLength=function(e){var t=1;return this.lineWidgets&&(t+=this.lineWidgets[e]&&this.lineWidgets[e].rowCount||0),this.$useWrapMode&&this.$wrapData[e]?this.$wrapData[e].length+t:t},this.getRowLineCount=function(e){return this.$useWrapMode&&this.$wrapData[e]?this.$wrapData[e].length+1:1},this.getRowWrapIndent=function(e){if(this.$useWrapMode){var t=this.screenToDocumentPosition(e,Number.MAX_VALUE),n=this.$wrapData[t.row];return n.length&&n[0]<t.column?n.indent:0}return 0},this.getScreenLastRowColumn=function(e){var t=this.screenToDocumentPosition(e,Number.MAX_VALUE);return this.documentToScreenColumn(t.row,t.column)},this.getDocumentLastRowColumn=function(e,t){var n=this.documentToScreenRow(e,t);return this.getScreenLastRowColumn(n)},this.getDocumentLastRowColumnPosition=function(e,t){var n=this.documentToScreenRow(e,t);return this.screenToDocumentPosition(n,Number.MAX_VALUE/10)},this.getRowSplitData=function(e){return this.$useWrapMode?this.$wrapData[e]:void 0},this.getScreenTabSize=function(e){return this.$tabSize-(e%this.$tabSize|0)},this.screenToDocumentRow=function(e,t){return this.screenToDocumentPosition(e,t).row},this.screenToDocumentColumn=function(e,t){return this.screenToDocumentPosition(e,t).column},this.screenToDocumentPosition=function(e,t,n){if(e<0)return{row:0,column:0};var r,a,l=0,d=0,h=0,f=0,p=this.$screenRowCache,y=this.$getRowCacheIndex(p,e),w=p.length;if(w&&y>=0){h=p[y],l=this.$docRowCache[y];var _=e>p[w-1]}else _=!w;for(var C=this.getLength()-1,S=this.getNextFoldLine(l),k=S?S.start.row:1/0;h<=e&&!(h+(f=this.getRowLength(l))>e||l>=C);)h+=f,++l>k&&(l=S.end.row+1,k=(S=this.getNextFoldLine(l,S))?S.start.row:1/0),_&&(this.$docRowCache.push(l),this.$screenRowCache.push(h));if(S&&S.start.row<=l)r=this.getFoldDisplayLine(S),l=S.start.row;else{if(h+f<=e||l>C)return{row:C,column:this.getLine(C).length};r=this.getLine(l),S=null}var x=0,E=Math.floor(e-h);if(this.$useWrapMode){var A=this.$wrapData[l];A&&(a=A[E],E>0&&A.length&&(x=A.indent,d=A[E-1]||A[A.length-1],r=r.substring(d)))}return void 0!==n&&this.$bidiHandler.isBidiRow(h+E,l,E)&&(t=this.$bidiHandler.offsetToCol(n)),d+=this.$getStringScreenWidth(r,t-x)[1],this.$useWrapMode&&d>=a&&(d=a-1),S?S.idxToPosition(d):{row:l,column:d}},this.documentToScreenPosition=function(e,t){if(void 0===t)var n=this.$clipPositionToDocument(e.row,e.column);else n=this.$clipPositionToDocument(e,t);e=n.row,t=n.column;var r,a=0,l=null;(r=this.getFoldAt(e,t,1))&&(e=r.start.row,t=r.start.column);var d,h=0,f=this.$docRowCache,p=this.$getRowCacheIndex(f,e),y=f.length;if(y&&p>=0){h=f[p],a=this.$screenRowCache[p];var w=e>f[y-1]}else w=!y;for(var _=this.getNextFoldLine(h),C=_?_.start.row:1/0;h<e;){if(h>=C){if((d=_.end.row+1)>e)break;C=(_=this.getNextFoldLine(d,_))?_.start.row:1/0}else d=h+1;a+=this.getRowLength(h),h=d,w&&(this.$docRowCache.push(h),this.$screenRowCache.push(a))}var S="";_&&h>=C?(S=this.getFoldDisplayLine(_,e,t),l=_.start.row):(S=this.getLine(e).substring(0,t),l=e);var k=0;if(this.$useWrapMode){var x=this.$wrapData[l];if(x){for(var E=0;S.length>=x[E];)a++,E++;S=S.substring(x[E-1]||0,S.length),k=E>0?x.indent:0}}return this.lineWidgets&&this.lineWidgets[h]&&this.lineWidgets[h].rowsAbove&&(a+=this.lineWidgets[h].rowsAbove),{row:a,column:k+this.$getStringScreenWidth(S)[0]}},this.documentToScreenColumn=function(e,t){return this.documentToScreenPosition(e,t).column},this.documentToScreenRow=function(e,t){return this.documentToScreenPosition(e,t).row},this.getScreenLength=function(){var e=0,t=null;if(this.$useWrapMode)for(var n=this.$wrapData.length,r=0,a=(h=0,(t=this.$foldData[h++])?t.start.row:1/0);r<n;){var l=this.$wrapData[r];e+=l?l.length+1:1,++r>a&&(r=t.end.row+1,a=(t=this.$foldData[h++])?t.start.row:1/0)}else{e=this.getLength();for(var d=this.$foldData,h=0;h<d.length;h++)e-=(t=d[h]).end.row-t.start.row}return this.lineWidgets&&(e+=this.$getWidgetScreenLength()),e},this.$setFontMetrics=function(e){this.$enableVarChar&&(this.$getStringScreenWidth=function(t,n,r){if(0===n)return[0,0];var a,l;for(n||(n=1/0),r=r||0,l=0;l<t.length&&!((r+="\t"===(a=t.charAt(l))?this.getScreenTabSize(r):e.getCharacterWidth(a))>n);l++);return[r,l]})},this.destroy=function(){this.bgTokenizer&&(this.bgTokenizer.setDocument(null),this.bgTokenizer=null),this.$stopWorker(),this.removeAllListeners(),this.selection.detach()},this.isFullWidth=n}.call(S.prototype),e("./edit_session/folding").Folding.call(S.prototype),e("./edit_session/bracket_match").BracketMatch.call(S.prototype),d.defineOptions(S.prototype,"session",{wrap:{set:function(e){if(e&&"off"!=e?"free"==e?e=!0:"printMargin"==e?e=-1:"string"==typeof e&&(e=parseInt(e,10)||!1):e=!1,this.$wrap!=e)if(this.$wrap=e,e){var t="number"==typeof e?e:null;this.setWrapLimitRange(t,t),this.setUseWrapMode(!0)}else this.setUseWrapMode(!1)},get:function(){return this.getUseWrapMode()?-1==this.$wrap?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(e){(e="auto"==e?"text"!=this.$mode.type:"text"!=e)!=this.$wrapAsCode&&(this.$wrapAsCode=e,this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0)))},initialValue:"auto"},indentedSoftWrap:{set:function(){this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0))},initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(e){this.$useWorker=e,this.$stopWorker(),e&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(e){(e=parseInt(e))>0&&this.$tabSize!==e&&(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=e,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},navigateWithinSoftTabs:{initialValue:!1},foldStyle:{set:function(e){this.setFoldStyle(e)},handlesSet:!0},overwrite:{set:function(e){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(e){this.doc.setNewLineMode(e)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(e){this.setMode(e)},get:function(){return this.$modeId},handlesSet:!0}}),t.EditSession=S})),ace.define("ace/search",[],(function(e,t,n){"use strict";var r=e("./lib/lang"),a=e("./lib/oop"),l=e("./range").Range,d=function(){this.$options={}};(function(){this.set=function(e){return a.mixin(this.$options,e),this},this.getOptions=function(){return r.copyObject(this.$options)},this.setOptions=function(e){this.$options=e},this.find=function(e){var t=this.$options,n=this.$matchIterator(e,t);if(!n)return!1;var r=null;return n.forEach((function(e,n,a,d){return r=new l(e,n,a,d),!(n==d&&t.start&&t.start.start&&0!=t.skipCurrent&&r.isEqual(t.start))||(r=null,!1)})),r},this.findAll=function(e){var t=this.$options;if(!t.needle)return[];this.$assembleRegExp(t);var n=t.range,a=n?e.getLines(n.start.row,n.end.row):e.doc.getAllLines(),d=[],h=t.re;if(t.$isMultiLine){var f,p=h.length,y=a.length-p;e:for(var w=h.offset||0;w<=y;w++){for(var _=0;_<p;_++)if(-1==a[w+_].search(h[_]))continue e;var C=a[w],S=a[w+p-1],k=C.length-C.match(h[0])[0].length,x=S.match(h[p-1])[0].length;f&&f.end.row===w&&f.end.column>k||(d.push(f=new l(w,k,w+p-1,x)),p>2&&(w=w+p-2))}}else for(var E=0;E<a.length;E++){var A=r.getMatchOffsets(a[E],h);for(_=0;_<A.length;_++){var T=A[_];d.push(new l(E,T.offset,E,T.offset+T.length))}}if(n){var R=n.start.column,O=n.start.column;for(E=0,_=d.length-1;E<_&&d[E].start.column<R&&d[E].start.row==n.start.row;)E++;for(;E<_&&d[_].end.column>O&&d[_].end.row==n.end.row;)_--;for(d=d.slice(E,_+1),E=0,_=d.length;E<_;E++)d[E].start.row+=n.start.row,d[E].end.row+=n.start.row}return d},this.replace=function(e,t){var n=this.$options,r=this.$assembleRegExp(n);if(n.$isMultiLine)return t;if(r){var a=r.exec(e);if(!a||a[0].length!=e.length)return null;if(t=e.replace(r,t),n.preserveCase){t=t.split("");for(var l=Math.min(e.length,e.length);l--;){var d=e[l];d&&d.toLowerCase()!=d?t[l]=t[l].toUpperCase():t[l]=t[l].toLowerCase()}t=t.join("")}return t}},this.$assembleRegExp=function(e,t){if(e.needle instanceof RegExp)return e.re=e.needle;var n=e.needle;if(!e.needle)return e.re=!1;e.regExp||(n=r.escapeRegExp(n)),e.wholeWord&&(n=function(e,t){function n(e){return/\w/.test(e)||t.regExp?"\\b":""}return n(e[0])+e+n(e[e.length-1])}(n,e));var a=e.caseSensitive?"gm":"gmi";if(e.$isMultiLine=!t&&/[\n\r]/.test(n),e.$isMultiLine)return e.re=this.$assembleMultilineRegExp(n,a);try{var l=new RegExp(n,a)}catch(e){l=!1}return e.re=l},this.$assembleMultilineRegExp=function(e,t){for(var n=e.replace(/\r\n|\r|\n/g,"$\n^").split("\n"),r=[],a=0;a<n.length;a++)try{r.push(new RegExp(n[a],t))}catch(e){return!1}return r},this.$matchIterator=function(e,t){var n=this.$assembleRegExp(t);if(!n)return!1;var r=1==t.backwards,a=0!=t.skipCurrent,l=t.range,d=t.start;d||(d=l?l[r?"end":"start"]:e.selection.getRange()),d.start&&(d=d[a!=r?"end":"start"]);var h=l?l.start.row:0,f=l?l.end.row:e.getLength()-1;if(r)var p=function(e){var n=d.row;if(!w(n,d.column,e)){for(n--;n>=h;n--)if(w(n,Number.MAX_VALUE,e))return;if(0!=t.wrap)for(n=f,h=d.row;n>=h;n--)if(w(n,Number.MAX_VALUE,e))return}};else p=function(e){var n=d.row;if(!w(n,d.column,e)){for(n+=1;n<=f;n++)if(w(n,0,e))return;if(0!=t.wrap)for(n=h,f=d.row;n<=f;n++)if(w(n,0,e))return}};if(t.$isMultiLine)var y=n.length,w=function(t,a,l){var d=r?t-y+1:t;if(!(d<0)){var h=e.getLine(d),f=h.search(n[0]);if(!(!r&&f<a||-1===f)){for(var p=1;p<y;p++)if(-1==(h=e.getLine(d+p)).search(n[p]))return;var w=h.match(n[y-1])[0].length;if(!(r&&w>a))return!!l(d,f,d+y-1,w)||void 0}}};else if(r)w=function(t,r,a){var l,d=e.getLine(t),h=[],f=0;for(n.lastIndex=0;l=n.exec(d);){var p=l[0].length;if(f=l.index,!p){if(f>=d.length)break;n.lastIndex=f+=1}if(l.index+p>r)break;h.push(l.index,p)}for(var y=h.length-1;y>=0;y-=2){var w=h[y-1];if(a(t,w,t,w+(p=h[y])))return!0}};else w=function(t,r,a){var l,d,h=e.getLine(t);for(n.lastIndex=r;d=n.exec(h);){var f=d[0].length;if(a(t,l=d.index,t,l+f))return!0;if(!f&&(n.lastIndex=l+=1,l>=h.length))return!1}};return{forEach:p}}}).call(d.prototype),t.Search=d})),ace.define("ace/keyboard/hash_handler",[],(function(e,t,n){"use strict";var r=e("../lib/keys"),a=e("../lib/useragent"),l=r.KEY_MODS;function d(e,t){this.platform=t||(a.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(e),this.$singleCommand=!0}function h(e,t){d.call(this,e,t),this.$singleCommand=!1}h.prototype=d.prototype,function(){function e(e){return"object"==typeof e&&e.bindKey&&e.bindKey.position||(e.isDefault?-100:0)}this.addCommand=function(e){this.commands[e.name]&&this.removeCommand(e),this.commands[e.name]=e,e.bindKey&&this._buildKeyHash(e)},this.removeCommand=function(e,t){var n=e&&("string"==typeof e?e:e.name);e=this.commands[n],t||delete this.commands[n];var r=this.commandKeyBinding;for(var a in r){var l=r[a];if(l==e)delete r[a];else if(Array.isArray(l)){var d=l.indexOf(e);-1!=d&&(l.splice(d,1),1==l.length&&(r[a]=l[0]))}}},this.bindKey=function(e,t,n){if("object"==typeof e&&e&&(null==n&&(n=e.position),e=e[this.platform]),e)return"function"==typeof t?this.addCommand({exec:t,bindKey:e,name:t.name||e}):void e.split("|").forEach((function(e){var r="";if(-1!=e.indexOf(" ")){var a=e.split(/\s+/);e=a.pop(),a.forEach((function(e){var t=this.parseKeys(e),n=l[t.hashId]+t.key;r+=(r?" ":"")+n,this._addCommandToBinding(r,"chainKeys")}),this),r+=" "}var d=this.parseKeys(e),h=l[d.hashId]+d.key;this._addCommandToBinding(r+h,t,n)}),this)},this._addCommandToBinding=function(t,n,r){var a,l=this.commandKeyBinding;if(n)if(!l[t]||this.$singleCommand)l[t]=n;else{Array.isArray(l[t])?-1!=(a=l[t].indexOf(n))&&l[t].splice(a,1):l[t]=[l[t]],"number"!=typeof r&&(r=e(n));var d=l[t];for(a=0;a<d.length;a++){if(e(d[a])>r)break}d.splice(a,0,n)}else delete l[t]},this.addCommands=function(e){e&&Object.keys(e).forEach((function(t){var n=e[t];if(n){if("string"==typeof n)return this.bindKey(n,t);"function"==typeof n&&(n={exec:n}),"object"==typeof n&&(n.name||(n.name=t),this.addCommand(n))}}),this)},this.removeCommands=function(e){Object.keys(e).forEach((function(t){this.removeCommand(e[t])}),this)},this.bindKeys=function(e){Object.keys(e).forEach((function(t){this.bindKey(t,e[t])}),this)},this._buildKeyHash=function(e){this.bindKey(e.bindKey,e)},this.parseKeys=function(e){var t=e.toLowerCase().split(/[\-\+]([\-\+])?/).filter((function(e){return e})),n=t.pop(),a=r[n];if(r.FUNCTION_KEYS[a])n=r.FUNCTION_KEYS[a].toLowerCase();else{if(!t.length)return{key:n,hashId:-1};if(1==t.length&&"shift"==t[0])return{key:n.toUpperCase(),hashId:-1}}for(var l=0,d=t.length;d--;){var h=r.KEY_MODS[t[d]];if(null==h)return"undefined"!=typeof console&&console.error("invalid modifier "+t[d]+" in "+e),!1;l|=h}return{key:n,hashId:l}},this.findKeyCommand=function(e,t){var n=l[e]+t;return this.commandKeyBinding[n]},this.handleKeyboard=function(e,t,n,r){if(!(r<0)){var a=l[t]+n,d=this.commandKeyBinding[a];return e.$keyChain&&(e.$keyChain+=" "+a,d=this.commandKeyBinding[e.$keyChain]||d),!d||"chainKeys"!=d&&"chainKeys"!=d[d.length-1]?(e.$keyChain&&(t&&4!=t||1!=n.length?(-1==t||r>0)&&(e.$keyChain=""):e.$keyChain=e.$keyChain.slice(0,-a.length-1)),{command:d}):(e.$keyChain=e.$keyChain||a,{command:"null"})}},this.getStatusText=function(e,t){return t.$keyChain||""}}.call(d.prototype),t.HashHandler=d,t.MultiHashHandler=h})),ace.define("ace/commands/command_manager",[],(function(e,t,n){"use strict";var r=e("../lib/oop"),a=e("../keyboard/hash_handler").MultiHashHandler,l=e("../lib/event_emitter").EventEmitter,d=function(e,t){a.call(this,t,e),this.byName=this.commands,this.setDefaultHandler("exec",(function(e){return e.command.exec(e.editor,e.args||{})}))};r.inherits(d,a),function(){r.implement(this,l),this.exec=function(e,t,n){if(Array.isArray(e)){for(var r=e.length;r--;)if(this.exec(e[r],t,n))return!0;return!1}if("string"==typeof e&&(e=this.commands[e]),!e)return!1;if(t&&t.$readOnly&&!e.readOnly)return!1;if(0!=this.$checkCommandState&&e.isAvailable&&!e.isAvailable(t))return!1;var a={editor:t,command:e,args:n};return a.returnValue=this._emit("exec",a),this._signal("afterExec",a),!1!==a.returnValue},this.toggleRecording=function(e){if(!this.$inReplay)return e&&e._emit("changeStatus"),this.recording?(this.macro.pop(),this.off("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(e){this.macro.push([e.command,e.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},this.replay=function(e){if(!this.$inReplay&&this.macro){if(this.recording)return this.toggleRecording(e);try{this.$inReplay=!0,this.macro.forEach((function(t){"string"==typeof t?this.exec(t,e):this.exec(t[0],e,t[1])}),this)}finally{this.$inReplay=!1}}},this.trimMacro=function(e){return e.map((function(e){return"string"!=typeof e[0]&&(e[0]=e[0].name),e[1]||(e=e[0]),e}))}}.call(d.prototype),t.CommandManager=d})),ace.define("ace/commands/default_commands",[],(function(e,t,n){"use strict";var r=e("../lib/lang"),a=e("../config"),l=e("../range").Range;function d(e,t){return{win:e,mac:t}}t.commands=[{name:"showSettingsMenu",bindKey:d("Ctrl-,","Command-,"),exec:function(e){a.loadModule("ace/ext/settings_menu",(function(t){t.init(e),e.showSettingsMenu()}))},readOnly:!0},{name:"goToNextError",bindKey:d("Alt-E","F4"),exec:function(e){a.loadModule("./ext/error_marker",(function(t){t.showErrorMarker(e,1)}))},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",bindKey:d("Alt-Shift-E","Shift-F4"),exec:function(e){a.loadModule("./ext/error_marker",(function(t){t.showErrorMarker(e,-1)}))},scrollIntoView:"animate",readOnly:!0},{name:"selectall",description:"Select all",bindKey:d("Ctrl-A","Command-A"),exec:function(e){e.selectAll()},readOnly:!0},{name:"centerselection",description:"Center selection",bindKey:d(null,"Ctrl-L"),exec:function(e){e.centerSelection()},readOnly:!0},{name:"gotoline",description:"Go to line...",bindKey:d("Ctrl-L","Command-L"),exec:function(e,t){"number"!=typeof t||isNaN(t)||e.gotoLine(t),e.prompt({$type:"gotoLine"})},readOnly:!0},{name:"fold",bindKey:d("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(e){e.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:d("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(e){e.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",bindKey:d("F2","F2"),exec:function(e){e.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",bindKey:d("Alt-F2","Alt-F2"),exec:function(e){e.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",description:"Fold all",bindKey:d(null,"Ctrl-Command-Option-0"),exec:function(e){e.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldAllComments",description:"Fold all comments",bindKey:d(null,"Ctrl-Command-Option-0"),exec:function(e){e.session.foldAllComments()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",description:"Fold other",bindKey:d("Alt-0","Command-Option-0"),exec:function(e){e.session.foldAll(),e.session.unfold(e.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",description:"Unfold all",bindKey:d("Alt-Shift-0","Command-Option-Shift-0"),exec:function(e){e.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",description:"Find next",bindKey:d("Ctrl-K","Command-G"),exec:function(e){e.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",description:"Find previous",bindKey:d("Ctrl-Shift-K","Command-Shift-G"),exec:function(e){e.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",description:"Select or find next",bindKey:d("Alt-K","Ctrl-G"),exec:function(e){e.selection.isEmpty()?e.selection.selectWord():e.findNext()},readOnly:!0},{name:"selectOrFindPrevious",description:"Select or find previous",bindKey:d("Alt-Shift-K","Ctrl-Shift-G"),exec:function(e){e.selection.isEmpty()?e.selection.selectWord():e.findPrevious()},readOnly:!0},{name:"find",description:"Find",bindKey:d("Ctrl-F","Command-F"),exec:function(e){a.loadModule("ace/ext/searchbox",(function(t){t.Search(e)}))},readOnly:!0},{name:"overwrite",description:"Overwrite",bindKey:"Insert",exec:function(e){e.toggleOverwrite()},readOnly:!0},{name:"selecttostart",description:"Select to start",bindKey:d("Ctrl-Shift-Home","Command-Shift-Home|Command-Shift-Up"),exec:function(e){e.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",description:"Go to start",bindKey:d("Ctrl-Home","Command-Home|Command-Up"),exec:function(e){e.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",description:"Select up",bindKey:d("Shift-Up","Shift-Up|Ctrl-Shift-P"),exec:function(e){e.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",description:"Go line up",bindKey:d("Up","Up|Ctrl-P"),exec:function(e,t){e.navigateUp(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",description:"Select to end",bindKey:d("Ctrl-Shift-End","Command-Shift-End|Command-Shift-Down"),exec:function(e){e.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",description:"Go to end",bindKey:d("Ctrl-End","Command-End|Command-Down"),exec:function(e){e.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",description:"Select down",bindKey:d("Shift-Down","Shift-Down|Ctrl-Shift-N"),exec:function(e){e.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",description:"Go line down",bindKey:d("Down","Down|Ctrl-N"),exec:function(e,t){e.navigateDown(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",description:"Select word left",bindKey:d("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(e){e.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",description:"Go to word left",bindKey:d("Ctrl-Left","Option-Left"),exec:function(e){e.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",description:"Select to line start",bindKey:d("Alt-Shift-Left","Command-Shift-Left|Ctrl-Shift-A"),exec:function(e){e.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",description:"Go to line start",bindKey:d("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(e){e.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",description:"Select left",bindKey:d("Shift-Left","Shift-Left|Ctrl-Shift-B"),exec:function(e){e.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",description:"Go to left",bindKey:d("Left","Left|Ctrl-B"),exec:function(e,t){e.navigateLeft(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",description:"Select word right",bindKey:d("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(e){e.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",description:"Go to word right",bindKey:d("Ctrl-Right","Option-Right"),exec:function(e){e.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",description:"Select to line end",bindKey:d("Alt-Shift-Right","Command-Shift-Right|Shift-End|Ctrl-Shift-E"),exec:function(e){e.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",description:"Go to line end",bindKey:d("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(e){e.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",description:"Select right",bindKey:d("Shift-Right","Shift-Right"),exec:function(e){e.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",description:"Go to right",bindKey:d("Right","Right|Ctrl-F"),exec:function(e,t){e.navigateRight(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",description:"Select page down",bindKey:"Shift-PageDown",exec:function(e){e.selectPageDown()},readOnly:!0},{name:"pagedown",description:"Page down",bindKey:d(null,"Option-PageDown"),exec:function(e){e.scrollPageDown()},readOnly:!0},{name:"gotopagedown",description:"Go to page down",bindKey:d("PageDown","PageDown|Ctrl-V"),exec:function(e){e.gotoPageDown()},readOnly:!0},{name:"selectpageup",description:"Select page up",bindKey:"Shift-PageUp",exec:function(e){e.selectPageUp()},readOnly:!0},{name:"pageup",description:"Page up",bindKey:d(null,"Option-PageUp"),exec:function(e){e.scrollPageUp()},readOnly:!0},{name:"gotopageup",description:"Go to page up",bindKey:"PageUp",exec:function(e){e.gotoPageUp()},readOnly:!0},{name:"scrollup",description:"Scroll up",bindKey:d("Ctrl-Up",null),exec:function(e){e.renderer.scrollBy(0,-2*e.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",description:"Scroll down",bindKey:d("Ctrl-Down",null),exec:function(e){e.renderer.scrollBy(0,2*e.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",description:"Select line start",bindKey:"Shift-Home",exec:function(e){e.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",description:"Select line end",bindKey:"Shift-End",exec:function(e){e.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",description:"Toggle recording",bindKey:d("Ctrl-Alt-E","Command-Option-E"),exec:function(e){e.commands.toggleRecording(e)},readOnly:!0},{name:"replaymacro",description:"Replay macro",bindKey:d("Ctrl-Shift-E","Command-Shift-E"),exec:function(e){e.commands.replay(e)},readOnly:!0},{name:"jumptomatching",description:"Jump to matching",bindKey:d("Ctrl-\\|Ctrl-P","Command-\\"),exec:function(e){e.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",description:"Select to matching",bindKey:d("Ctrl-Shift-\\|Ctrl-Shift-P","Command-Shift-\\"),exec:function(e){e.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",description:"Expand to matching",bindKey:d("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(e){e.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",description:"Pass keys to browser",bindKey:d(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",description:"Copy",exec:function(e){},readOnly:!0},{name:"cut",description:"Cut",exec:function(e){var t=e.$copyWithEmptySelection&&e.selection.isEmpty()?e.selection.getLineRange():e.selection.getRange();e._emit("cut",t),t.isEmpty()||e.session.remove(t),e.clearSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",description:"Paste",exec:function(e,t){e.$handlePaste(t)},scrollIntoView:"cursor"},{name:"removeline",description:"Remove line",bindKey:d("Ctrl-D","Command-D"),exec:function(e){e.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",description:"Duplicate selection",bindKey:d("Ctrl-Shift-D","Command-Shift-D"),exec:function(e){e.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",description:"Sort lines",bindKey:d("Ctrl-Alt-S","Command-Alt-S"),exec:function(e){e.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",description:"Toggle comment",bindKey:d("Ctrl-/","Command-/"),exec:function(e){e.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",description:"Toggle block comment",bindKey:d("Ctrl-Shift-/","Command-Shift-/"),exec:function(e){e.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",description:"Modify number up",bindKey:d("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(e){e.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",description:"Modify number down",bindKey:d("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(e){e.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",description:"Replace",bindKey:d("Ctrl-H","Command-Option-F"),exec:function(e){a.loadModule("ace/ext/searchbox",(function(t){t.Search(e,!0)}))}},{name:"undo",description:"Undo",bindKey:d("Ctrl-Z","Command-Z"),exec:function(e){e.undo()}},{name:"redo",description:"Redo",bindKey:d("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(e){e.redo()}},{name:"copylinesup",description:"Copy lines up",bindKey:d("Alt-Shift-Up","Command-Option-Up"),exec:function(e){e.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",description:"Move lines up",bindKey:d("Alt-Up","Option-Up"),exec:function(e){e.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",description:"Copy lines down",bindKey:d("Alt-Shift-Down","Command-Option-Down"),exec:function(e){e.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",description:"Move lines down",bindKey:d("Alt-Down","Option-Down"),exec:function(e){e.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",description:"Delete",bindKey:d("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(e){e.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",description:"Backspace",bindKey:d("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(e){e.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",description:"Cut or delete",bindKey:d("Shift-Delete",null),exec:function(e){if(!e.selection.isEmpty())return!1;e.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",description:"Remove to line start",bindKey:d("Alt-Backspace","Command-Backspace"),exec:function(e){e.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",description:"Remove to line end",bindKey:d("Alt-Delete","Ctrl-K|Command-Delete"),exec:function(e){e.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestarthard",description:"Remove to line start hard",bindKey:d("Ctrl-Shift-Backspace",null),exec:function(e){var t=e.selection.getRange();t.start.column=0,e.session.remove(t)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineendhard",description:"Remove to line end hard",bindKey:d("Ctrl-Shift-Delete",null),exec:function(e){var t=e.selection.getRange();t.end.column=Number.MAX_VALUE,e.session.remove(t)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",description:"Remove word left",bindKey:d("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(e){e.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",description:"Remove word right",bindKey:d("Ctrl-Delete","Alt-Delete"),exec:function(e){e.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",description:"Outdent",bindKey:d("Shift-Tab","Shift-Tab"),exec:function(e){e.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",description:"Indent",bindKey:d("Tab","Tab"),exec:function(e){e.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",description:"Block outdent",bindKey:d("Ctrl-[","Ctrl-["),exec:function(e){e.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",description:"Block indent",bindKey:d("Ctrl-]","Ctrl-]"),exec:function(e){e.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",description:"Insert string",exec:function(e,t){e.insert(t)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",description:"Insert text",exec:function(e,t){e.insert(r.stringRepeat(t.text||"",t.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",description:"Split line",bindKey:d(null,"Ctrl-O"),exec:function(e){e.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",description:"Transpose letters",bindKey:d("Alt-Shift-X","Ctrl-T"),exec:function(e){e.transposeLetters()},multiSelectAction:function(e){e.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",description:"To uppercase",bindKey:d("Ctrl-U","Ctrl-U"),exec:function(e){e.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",description:"To lowercase",bindKey:d("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(e){e.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"autoindent",description:"Auto Indent",bindKey:d(null,null),exec:function(e){e.autoIndent()},multiSelectAction:"forEachLine",scrollIntoView:"animate"},{name:"expandtoline",description:"Expand to line",bindKey:d("Ctrl-Shift-L","Command-Shift-L"),exec:function(e){var t=e.selection.getRange();t.start.column=t.end.column=0,t.end.row++,e.selection.setRange(t,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"joinlines",description:"Join lines",bindKey:d(null,null),exec:function(e){for(var t=e.selection.isBackwards(),n=t?e.selection.getSelectionLead():e.selection.getSelectionAnchor(),a=t?e.selection.getSelectionAnchor():e.selection.getSelectionLead(),d=e.session.doc.getLine(n.row).length,h=e.session.doc.getTextRange(e.selection.getRange()).replace(/\n\s*/," ").length,f=e.session.doc.getLine(n.row),p=n.row+1;p<=a.row+1;p++){var y=r.stringTrimLeft(r.stringTrimRight(e.session.doc.getLine(p)));0!==y.length&&(y=" "+y),f+=y}a.row+1<e.session.doc.getLength()-1&&(f+=e.session.doc.getNewLineCharacter()),e.clearSelection(),e.session.doc.replace(new l(n.row,0,a.row+2,0),f),h>0?(e.selection.moveCursorTo(n.row,n.column),e.selection.selectTo(n.row,n.column+h)):(d=e.session.doc.getLine(n.row).length>d?d+1:d,e.selection.moveCursorTo(n.row,d))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",description:"Invert selection",bindKey:d(null,null),exec:function(e){var t=e.session.doc.getLength()-1,n=e.session.doc.getLine(t).length,r=e.selection.rangeList.ranges,a=[];r.length<1&&(r=[e.selection.getRange()]);for(var d=0;d<r.length;d++)d==r.length-1&&(r[d].end.row===t&&r[d].end.column===n||a.push(new l(r[d].end.row,r[d].end.column,t,n))),0===d?0===r[d].start.row&&0===r[d].start.column||a.push(new l(0,0,r[d].start.row,r[d].start.column)):a.push(new l(r[d-1].end.row,r[d-1].end.column,r[d].start.row,r[d].start.column));e.exitMultiSelectMode(),e.clearSelection();for(d=0;d<a.length;d++)e.selection.addRange(a[d],!1)},readOnly:!0,scrollIntoView:"none"},{name:"addLineAfter",exec:function(e){e.selection.clearSelection(),e.navigateLineEnd(),e.insert("\n")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"addLineBefore",exec:function(e){e.selection.clearSelection();var t=e.getCursorPosition();e.selection.moveTo(t.row-1,Number.MAX_VALUE),e.insert("\n"),0===t.row&&e.navigateUp()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"openCommandPallete",description:"Open command pallete",bindKey:d("F1","F1"),exec:function(e){e.prompt({$type:"commands"})},readOnly:!0},{name:"modeSelect",description:"Change language mode...",bindKey:d(null,null),exec:function(e){e.prompt({$type:"modes"})},readOnly:!0}];for(var h=1;h<9;h++)t.commands.push({name:"foldToLevel"+h,description:"Fold To Level "+h,level:h,exec:function(e){e.session.foldToLevel(this.level)},scrollIntoView:"center",readOnly:!0})})),ace.define("ace/editor",[],(function(e,t,n){"use strict";e("./lib/fixoldbrowsers");var r=e("./lib/oop"),a=e("./lib/dom"),l=e("./lib/lang"),d=e("./lib/useragent"),h=e("./keyboard/textinput").TextInput,f=e("./mouse/mouse_handler").MouseHandler,p=e("./mouse/fold_handler").FoldHandler,y=e("./keyboard/keybinding").KeyBinding,w=e("./edit_session").EditSession,_=e("./search").Search,C=e("./range").Range,S=e("./lib/event_emitter").EventEmitter,k=e("./commands/command_manager").CommandManager,x=e("./commands/default_commands").commands,E=e("./config"),A=e("./token_iterator").TokenIterator,T=e("./clipboard"),R=function(e,t,n){this.$toDestroy=[];var r=e.getContainerElement();this.container=r,this.renderer=e,this.id="editor"+ ++R.$uid,this.commands=new k(d.isMac?"mac":"win",x),"object"==typeof document&&(this.textInput=new h(e.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.$mouseHandler=new f(this),new p(this)),this.keyBinding=new y(this),this.$search=(new _).set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=l.delayedCall(function(){this._signal("input",{}),this.session&&this.session.bgTokenizer&&this.session.bgTokenizer.scheduleStart()}.bind(this)),this.on("change",(function(e,t){t._$emitInputEvent.schedule(31)})),this.setSession(t||n&&n.session||new w("")),E.resetOptions(this),n&&this.setOptions(n),E._signal("editor",this)};R.$uid=0,function(){r.implement(this,S),this.$initOperationListeners=function(){this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0),this.$opResetTimer=l.delayedCall(this.endOperation.bind(this,!0)),this.on("change",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.docChanged=!0}.bind(this),!0),this.on("changeSelection",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.selectionChanged=!0}.bind(this),!0)},this.curOp=null,this.prevOp={},this.startOperation=function(e){if(this.curOp){if(!e||this.curOp.command)return;this.prevOp=this.curOp}e||(this.previousCommand=null,e={}),this.$opResetTimer.schedule(),this.curOp=this.session.curOp={command:e.command||{},args:e.args,scrollTop:this.renderer.scrollTop},this.curOp.selectionBefore=this.selection.toJSON()},this.endOperation=function(e){if(this.curOp&&this.session){if(e&&!1===e.returnValue||!this.session)return this.curOp=null;if(1==e&&this.curOp.command&&"mouse"==this.curOp.command.name)return;if(this._signal("beforeEndOperation"),!this.curOp)return;var t=this.curOp.command,n=t&&t.scrollIntoView;if(n){switch(n){case"center-animate":n="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var r=this.selection.getRange(),a=this.renderer.layerConfig;(r.start.row>=a.lastRow||r.end.row<=a.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead)}"animate"==n&&this.renderer.animateScrolling(this.curOp.scrollTop)}var l=this.selection.toJSON();this.curOp.selectionAfter=l,this.$lastSel=this.selection.toJSON(),this.session.getUndoManager().addSelection(l),this.prevOp=this.curOp,this.curOp=null}},this.$mergeableCommands=["backspace","del","insertstring"],this.$historyTracker=function(e){if(this.$mergeUndoDeltas){var t=this.prevOp,n=this.$mergeableCommands,r=t.command&&e.command.name==t.command.name;if("insertstring"==e.command.name){var a=e.args;void 0===this.mergeNextCommand&&(this.mergeNextCommand=!0),r=r&&this.mergeNextCommand&&(!/\s/.test(a)||/\s/.test(t.args)),this.mergeNextCommand=!0}else r=r&&-1!==n.indexOf(e.command.name);"always"!=this.$mergeUndoDeltas&&Date.now()-this.sequenceStartTime>2e3&&(r=!1),r?this.session.mergeUndoDeltas=!0:-1!==n.indexOf(e.command.name)&&(this.sequenceStartTime=Date.now())}},this.setKeyboardHandler=function(e,t){if(e&&"string"==typeof e&&"ace"!=e){this.$keybindingId=e;var n=this;E.loadModule(["keybinding",e],(function(r){n.$keybindingId==e&&n.keyBinding.setKeyboardHandler(r&&r.handler),t&&t()}))}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(e),t&&t()},this.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},this.setSession=function(e){if(this.session!=e){this.curOp&&this.endOperation(),this.curOp={};var t=this.session;if(t){this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange);var n=this.session.getSelection();n.off("changeCursor",this.$onCursorChange),n.off("changeSelection",this.$onSelectionChange)}this.session=e,e?(this.$onDocumentChange=this.onDocumentChange.bind(this),e.on("change",this.$onDocumentChange),this.renderer.setSession(e),this.$onChangeMode=this.onChangeMode.bind(this),e.on("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),e.on("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),e.on("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),e.on("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),e.on("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),e.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=e.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.onCursorChange(),this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(e)),this._signal("changeSession",{session:e,oldSession:t}),this.curOp=null,t&&t._signal("changeEditor",{oldEditor:this}),e&&e._signal("changeEditor",{editor:this}),e&&e.bgTokenizer&&e.bgTokenizer.scheduleStart()}},this.getSession=function(){return this.session},this.setValue=function(e,t){return this.session.doc.setValue(e),t?1==t?this.navigateFileEnd():-1==t&&this.navigateFileStart():this.selectAll(),e},this.getValue=function(){return this.session.getValue()},this.getSelection=function(){return this.selection},this.resize=function(e){this.renderer.onResize(e)},this.setTheme=function(e,t){this.renderer.setTheme(e,t)},this.getTheme=function(){return this.renderer.getTheme()},this.setStyle=function(e){this.renderer.setStyle(e)},this.unsetStyle=function(e){this.renderer.unsetStyle(e)},this.getFontSize=function(){return this.getOption("fontSize")||a.computedStyle(this.container).fontSize},this.setFontSize=function(e){this.setOption("fontSize",e)},this.$highlightBrackets=function(){if(!this.$highlightPending){var e=this;this.$highlightPending=!0,setTimeout((function(){e.$highlightPending=!1;var t=e.session;if(t&&t.bgTokenizer){t.$bracketHighlight&&(t.$bracketHighlight.markerIds.forEach((function(e){t.removeMarker(e)})),t.$bracketHighlight=null);var n=t.getMatchingBracketRanges(e.getCursorPosition());if(!n&&t.$mode.getMatching&&(n=t.$mode.getMatching(e.session)),n){var r="ace_bracket";Array.isArray(n)?1==n.length&&(r="ace_error_bracket"):n=[n],2==n.length&&(0==C.comparePoints(n[0].end,n[1].start)?n=[C.fromPoints(n[0].start,n[1].end)]:0==C.comparePoints(n[0].start,n[1].end)&&(n=[C.fromPoints(n[1].start,n[0].end)])),t.$bracketHighlight={ranges:n,markerIds:n.map((function(e){return t.addMarker(e,r,"text")}))}}}}),50)}},this.$highlightTags=function(){if(!this.$highlightTagPending){var e=this;this.$highlightTagPending=!0,setTimeout((function(){e.$highlightTagPending=!1;var t=e.session;if(t&&t.bgTokenizer){var n=e.getCursorPosition(),r=new A(e.session,n.row,n.column),a=r.getCurrentToken();if(!a||!/\b(?:tag-open|tag-name)/.test(a.type))return t.removeMarker(t.$tagHighlight),void(t.$tagHighlight=null);if(-1===a.type.indexOf("tag-open")||(a=r.stepForward())){var l=a.value,d=a.value,h=0,f=r.stepBackward();if("<"===f.value)do{f=a,(a=r.stepForward())&&(-1!==a.type.indexOf("tag-name")?l===(d=a.value)&&("<"===f.value?h++:"</"===f.value&&h--):l===d&&"/>"===a.value&&h--)}while(a&&h>=0);else{do{if(a=f,f=r.stepBackward(),a)if(-1!==a.type.indexOf("tag-name"))l===a.value&&("<"===f.value?h++:"</"===f.value&&h--);else if("/>"===a.value){for(var p=0,y=f;y;){if(-1!==y.type.indexOf("tag-name")&&y.value===l){h--;break}if("<"===y.value)break;y=r.stepBackward(),p++}for(var w=0;w<p;w++)r.stepForward()}}while(f&&h<=0);r.stepForward()}if(!a)return t.removeMarker(t.$tagHighlight),void(t.$tagHighlight=null);var _=r.getCurrentTokenRow(),S=r.getCurrentTokenColumn(),k=new C(_,S,_,S+a.value.length),x=t.$backMarkers[t.$tagHighlight];t.$tagHighlight&&null!=x&&0!==k.compareRange(x.range)&&(t.removeMarker(t.$tagHighlight),t.$tagHighlight=null),t.$tagHighlight||(t.$tagHighlight=t.addMarker(k,"ace_bracket","text"))}}}),50)}},this.focus=function(){var e=this;setTimeout((function(){e.isFocused()||e.textInput.focus()})),this.textInput.focus()},this.isFocused=function(){return this.textInput.isFocused()},this.blur=function(){this.textInput.blur()},this.onFocus=function(e){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",e))},this.onBlur=function(e){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",e))},this.$cursorChange=function(){this.renderer.updateCursor(),this.$highlightBrackets(),this.$highlightTags(),this.$updateHighlightActiveLine()},this.onDocumentChange=function(e){var t=this.session.$useWrapMode,n=e.start.row==e.end.row?e.end.row:1/0;this.renderer.updateLines(e.start.row,n,t),this._signal("change",e),this.$cursorChange()},this.onTokenizerUpdate=function(e){var t=e.data;this.renderer.updateLines(t.first,t.last)},this.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},this.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},this.onCursorChange=function(){this.$cursorChange(),this._signal("changeSelection")},this.$updateHighlightActiveLine=function(){var e,t=this.getSession();if(this.$highlightActiveLine&&("line"==this.$selectionStyle&&this.selection.isMultiLine()||(e=this.getCursorPosition()),this.renderer.theme&&this.renderer.theme.$selectionColorConflict&&!this.selection.isEmpty()&&(e=!1),!this.renderer.$maxLines||1!==this.session.getLength()||this.renderer.$minLines>1||(e=!1)),t.$highlightLineMarker&&!e)t.removeMarker(t.$highlightLineMarker.id),t.$highlightLineMarker=null;else if(!t.$highlightLineMarker&&e){var n=new C(e.row,e.column,e.row,1/0);n.id=t.addMarker(n,"ace_active-line","screenLine"),t.$highlightLineMarker=n}else e&&(t.$highlightLineMarker.start.row=e.row,t.$highlightLineMarker.end.row=e.row,t.$highlightLineMarker.start.column=e.column,t._signal("changeBackMarker"))},this.onSelectionChange=function(e){var t=this.session;if(t.$selectionMarker&&t.removeMarker(t.$selectionMarker),t.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var n=this.selection.getRange(),r=this.getSelectionStyle();t.$selectionMarker=t.addMarker(n,"ace_selection",r)}var a=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(a),this._signal("changeSelection")},this.$getSelectionHighLightRegexp=function(){var e=this.session,t=this.getSelectionRange();if(!t.isEmpty()&&!t.isMultiLine()){var n=t.start.column,r=t.end.column,a=e.getLine(t.start.row),l=a.substring(n,r);if(!(l.length>5e3)&&/[\w\d]/.test(l)){var d=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:l}),h=a.substring(n-1,r+1);if(d.test(h))return d}}},this.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},this.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},this.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},this.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},this.onChangeMode=function(e){this.renderer.updateText(),this._emit("changeMode",e)},this.onChangeWrapLimit=function(){this.renderer.updateFull()},this.onChangeWrapMode=function(){this.renderer.onResize(!0)},this.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},this.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},this.getCopyText=function(){var e=this.getSelectedText(),t=this.session.doc.getNewLineCharacter(),n=!1;if(!e&&this.$copyWithEmptySelection){n=!0;for(var r=this.selection.getAllRanges(),a=0;a<r.length;a++){var l=r[a];a&&r[a-1].start.row==l.start.row||(e+=this.session.getLine(l.start.row)+t)}}var d={text:e};return this._signal("copy",d),T.lineMode=n?d.text:"",d.text},this.onCopy=function(){this.commands.exec("copy",this)},this.onCut=function(){this.commands.exec("cut",this)},this.onPaste=function(e,t){var n={text:e,event:t};this.commands.exec("paste",this,n)},this.$handlePaste=function(e){"string"==typeof e&&(e={text:e}),this._signal("paste",e);var t=e.text,n=t==T.lineMode,r=this.session;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)n?r.insert({row:this.selection.lead.row,column:0},t):this.insert(t);else if(n)this.selection.rangeList.ranges.forEach((function(e){r.insert({row:e.start.row,column:0},t)}));else{var a=t.split(/\r\n|\r|\n/),l=this.selection.rangeList.ranges,d=!(2!=a.length||a[0]&&a[1]);if(a.length!=l.length||d)return this.commands.exec("insertstring",this,t);for(var h=l.length;h--;){var f=l[h];f.isEmpty()||r.remove(f),r.insert(f.start,a[h])}}},this.execCommand=function(e,t){return this.commands.exec(e,this,t)},this.insert=function(e,t){var n=this.session,r=n.getMode(),a=this.getCursorPosition();if(this.getBehavioursEnabled()&&!t){var l=r.transformAction(n.getState(a.row),"insertion",this,n,e);l&&(e!==l.text&&(this.inVirtualSelectionMode||(this.session.mergeUndoDeltas=!1,this.mergeNextCommand=!1)),e=l.text)}if("\t"==e&&(e=this.session.getTabString()),this.selection.isEmpty()){if(this.session.getOverwrite()&&-1==e.indexOf("\n")){(d=new C.fromPoints(a,a)).end.column+=e.length,this.session.remove(d)}}else{var d=this.getSelectionRange();a=this.session.remove(d),this.clearSelection()}if("\n"==e||"\r\n"==e){var h=n.getLine(a.row);if(a.column>h.search(/\S|$/)){var f=h.substr(a.column).search(/\S|$/);n.doc.removeInLine(a.row,a.column,a.column+f)}}this.clearSelection();var p=a.column,y=n.getState(a.row),w=(h=n.getLine(a.row),r.checkOutdent(y,h,e));if(n.insert(a,e),l&&l.selection&&(2==l.selection.length?this.selection.setSelectionRange(new C(a.row,p+l.selection[0],a.row,p+l.selection[1])):this.selection.setSelectionRange(new C(a.row+l.selection[0],l.selection[1],a.row+l.selection[2],l.selection[3]))),this.$enableAutoIndent){if(n.getDocument().isNewLine(e)){var _=r.getNextLineIndent(y,h.slice(0,a.column),n.getTabString());n.insert({row:a.row+1,column:0},_)}w&&r.autoOutdent(y,n,a.row)}},this.autoIndent=function(){var e,t,n=this.session,r=n.getMode();if(this.selection.isEmpty())e=0,t=n.doc.getLength()-1;else{var a=this.getSelectionRange();e=a.start.row,t=a.end.row}for(var l,d,h,f="",p="",y="",w=n.getTabString(),_=e;_<=t;_++)_>0&&(f=n.getState(_-1),p=n.getLine(_-1),y=r.getNextLineIndent(f,p,w)),l=n.getLine(_),y!==(d=r.$getIndent(l))&&(d.length>0&&(h=new C(_,0,_,d.length),n.remove(h)),y.length>0&&n.insert({row:_,column:0},y)),r.autoOutdent(f,n,_)},this.onTextInput=function(e,t){if(!t)return this.keyBinding.onTextInput(e);this.startOperation({command:{name:"insertstring"}});var n=this.applyComposition.bind(this,e,t);this.selection.rangeCount?this.forEachSelection(n):n(),this.endOperation()},this.applyComposition=function(e,t){var n;(t.extendLeft||t.extendRight)&&((n=this.selection.getRange()).start.column-=t.extendLeft,n.end.column+=t.extendRight,n.start.column<0&&(n.start.row--,n.start.column+=this.session.getLine(n.start.row).length+1),this.selection.setRange(n),e||n.isEmpty()||this.remove());(!e&&this.selection.isEmpty()||this.insert(e,!0),t.restoreStart||t.restoreEnd)&&((n=this.selection.getRange()).start.column-=t.restoreStart,n.end.column-=t.restoreEnd,this.selection.setRange(n))},this.onCommandKey=function(e,t,n){return this.keyBinding.onCommandKey(e,t,n)},this.setOverwrite=function(e){this.session.setOverwrite(e)},this.getOverwrite=function(){return this.session.getOverwrite()},this.toggleOverwrite=function(){this.session.toggleOverwrite()},this.setScrollSpeed=function(e){this.setOption("scrollSpeed",e)},this.getScrollSpeed=function(){return this.getOption("scrollSpeed")},this.setDragDelay=function(e){this.setOption("dragDelay",e)},this.getDragDelay=function(){return this.getOption("dragDelay")},this.setSelectionStyle=function(e){this.setOption("selectionStyle",e)},this.getSelectionStyle=function(){return this.getOption("selectionStyle")},this.setHighlightActiveLine=function(e){this.setOption("highlightActiveLine",e)},this.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},this.setHighlightGutterLine=function(e){this.setOption("highlightGutterLine",e)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.setHighlightSelectedWord=function(e){this.setOption("highlightSelectedWord",e)},this.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},this.setAnimatedScroll=function(e){this.renderer.setAnimatedScroll(e)},this.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},this.setShowInvisibles=function(e){this.renderer.setShowInvisibles(e)},this.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},this.setDisplayIndentGuides=function(e){this.renderer.setDisplayIndentGuides(e)},this.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},this.setShowPrintMargin=function(e){this.renderer.setShowPrintMargin(e)},this.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},this.setPrintMarginColumn=function(e){this.renderer.setPrintMarginColumn(e)},this.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},this.setReadOnly=function(e){this.setOption("readOnly",e)},this.getReadOnly=function(){return this.getOption("readOnly")},this.setBehavioursEnabled=function(e){this.setOption("behavioursEnabled",e)},this.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},this.setWrapBehavioursEnabled=function(e){this.setOption("wrapBehavioursEnabled",e)},this.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},this.setShowFoldWidgets=function(e){this.setOption("showFoldWidgets",e)},this.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},this.setFadeFoldWidgets=function(e){this.setOption("fadeFoldWidgets",e)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.remove=function(e){this.selection.isEmpty()&&("left"==e?this.selection.selectLeft():this.selection.selectRight());var t=this.getSelectionRange();if(this.getBehavioursEnabled()){var n=this.session,r=n.getState(t.start.row),a=n.getMode().transformAction(r,"deletion",this,n,t);if(0===t.end.column){var l=n.getTextRange(t);if("\n"==l[l.length-1]){var d=n.getLine(t.end.row);/^\s+$/.test(d)&&(t.end.column=d.length)}}a&&(t=a)}this.session.remove(t),this.clearSelection()},this.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.selection.isEmpty()&&this.selection.selectLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var e=this.getSelectionRange();e.start.column==e.end.column&&e.start.row==e.end.row&&(e.end.column=0,e.end.row++),this.session.remove(e),this.clearSelection()},this.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var e=this.getCursorPosition();this.insert("\n"),this.moveCursorToPosition(e)},this.transposeLetters=function(){if(this.selection.isEmpty()){var e=this.getCursorPosition(),t=e.column;if(0!==t){var n,r,a=this.session.getLine(e.row);t<a.length?(n=a.charAt(t)+a.charAt(t-1),r=new C(e.row,t-1,e.row,t+1)):(n=a.charAt(t-1)+a.charAt(t-2),r=new C(e.row,t-2,e.row,t)),this.session.replace(r,n),this.session.selection.moveToPosition(r.end)}}},this.toLowerCase=function(){var e=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var t=this.getSelectionRange(),n=this.session.getTextRange(t);this.session.replace(t,n.toLowerCase()),this.selection.setSelectionRange(e)},this.toUpperCase=function(){var e=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var t=this.getSelectionRange(),n=this.session.getTextRange(t);this.session.replace(t,n.toUpperCase()),this.selection.setSelectionRange(e)},this.indent=function(){var e=this.session,t=this.getSelectionRange();if(!(t.start.row<t.end.row)){if(t.start.column<t.end.column){var n=e.getTextRange(t);if(!/^\s+$/.test(n)){y=this.$getSelectedRows();return void e.indentRows(y.first,y.last,"\t")}}var r=e.getLine(t.start.row),a=t.start,d=e.getTabSize(),h=e.documentToScreenColumn(a.row,a.column);if(this.session.getUseSoftTabs())var f=d-h%d,p=l.stringRepeat(" ",f);else{for(f=h%d;" "==r[t.start.column-1]&&f;)t.start.column--,f--;this.selection.setSelectionRange(t),p="\t"}return this.insert(p)}var y=this.$getSelectedRows();e.indentRows(y.first,y.last,"\t")},this.blockIndent=function(){var e=this.$getSelectedRows();this.session.indentRows(e.first,e.last,"\t")},this.blockOutdent=function(){var e=this.session.getSelection();this.session.outdentRows(e.getRange())},this.sortLines=function(){for(var e=this.$getSelectedRows(),t=this.session,n=[],r=e.first;r<=e.last;r++)n.push(t.getLine(r));n.sort((function(e,t){return e.toLowerCase()<t.toLowerCase()?-1:e.toLowerCase()>t.toLowerCase()?1:0}));var a=new C(0,0,0,0);for(r=e.first;r<=e.last;r++){var l=t.getLine(r);a.start.row=r,a.end.row=r,a.end.column=l.length,t.replace(a,n[r-e.first])}},this.toggleCommentLines=function(){var e=this.session.getState(this.getCursorPosition().row),t=this.$getSelectedRows();this.session.getMode().toggleCommentLines(e,this.session,t.first,t.last)},this.toggleBlockComment=function(){var e=this.getCursorPosition(),t=this.session.getState(e.row),n=this.getSelectionRange();this.session.getMode().toggleBlockComment(t,this.session,n,e)},this.getNumberAt=function(e,t){var n=/[\-]?[0-9]+(?:\.[0-9]+)?/g;n.lastIndex=0;for(var r=this.session.getLine(e);n.lastIndex<t;){var a=n.exec(r);if(a.index<=t&&a.index+a[0].length>=t)return{value:a[0],start:a.index,end:a.index+a[0].length}}return null},this.modifyNumber=function(e){var t=this.selection.getCursor().row,n=this.selection.getCursor().column,r=new C(t,n-1,t,n),a=this.session.getTextRange(r);if(!isNaN(parseFloat(a))&&isFinite(a)){var l=this.getNumberAt(t,n);if(l){var d=l.value.indexOf(".")>=0?l.start+l.value.indexOf(".")+1:l.end,h=l.start+l.value.length-d,f=parseFloat(l.value);f*=Math.pow(10,h),d!==l.end&&n<d?e*=Math.pow(10,l.end-n-1):e*=Math.pow(10,l.end-n),f+=e;var p=(f/=Math.pow(10,h)).toFixed(h),y=new C(t,l.start,t,l.end);this.session.replace(y,p),this.moveCursorTo(t,Math.max(l.start+1,n+p.length-l.value.length))}}else this.toggleWord()},this.$toggleWordPairs=[["first","last"],["true","false"],["yes","no"],["width","height"],["top","bottom"],["right","left"],["on","off"],["x","y"],["get","set"],["max","min"],["horizontal","vertical"],["show","hide"],["add","remove"],["up","down"],["before","after"],["even","odd"],["in","out"],["inside","outside"],["next","previous"],["increase","decrease"],["attach","detach"],["&&","||"],["==","!="]],this.toggleWord=function(){var e=this.selection.getCursor().row,t=this.selection.getCursor().column;this.selection.selectWord();var n=this.getSelectedText(),r=this.selection.getWordRange().start.column,a=n.replace(/([a-z]+|[A-Z]+)(?=[A-Z_]|$)/g,"$1 ").split(/\s/),d=t-r-1;d<0&&(d=0);var h=0,f=0,p=this;n.match(/[A-Za-z0-9_]+/)&&a.forEach((function(t,a){f=h+t.length,d>=h&&d<=f&&(n=t,p.selection.clearSelection(),p.moveCursorTo(e,h+r),p.selection.selectTo(e,f+r)),h=f}));for(var y,w=this.$toggleWordPairs,_=0;_<w.length;_++)for(var C=w[_],S=0;S<=1;S++){var k=+!S,x=n.match(new RegExp("^\\s?_?("+l.escapeRegExp(C[S])+")\\s?$","i"));if(x)n.match(new RegExp("([_]|^|\\s)("+l.escapeRegExp(x[1])+")($|\\s)","g"))&&(y=n.replace(new RegExp(l.escapeRegExp(C[S]),"i"),(function(e){var t=C[k];return e.toUpperCase()==e?t=t.toUpperCase():e.charAt(0).toUpperCase()==e.charAt(0)&&(t=t.substr(0,0)+C[k].charAt(0).toUpperCase()+t.substr(1)),t})),this.insert(y),y="")}},this.removeLines=function(){var e=this.$getSelectedRows();this.session.removeFullLines(e.first,e.last),this.clearSelection()},this.duplicateSelection=function(){var e=this.selection,t=this.session,n=e.getRange(),r=e.isBackwards();if(n.isEmpty()){var a=n.start.row;t.duplicateLines(a,a)}else{var l=r?n.start:n.end,d=t.insert(l,t.getTextRange(n),!1);n.start=l,n.end=d,e.setSelectionRange(n,r)}},this.moveLinesDown=function(){this.$moveLines(1,!1)},this.moveLinesUp=function(){this.$moveLines(-1,!1)},this.moveText=function(e,t,n){return this.session.moveText(e,t,n)},this.copyLinesUp=function(){this.$moveLines(-1,!0)},this.copyLinesDown=function(){this.$moveLines(1,!0)},this.$moveLines=function(e,t){var n,r,a=this.selection;if(!a.inMultiSelectMode||this.inVirtualSelectionMode){var l=a.toOrientedRange();n=this.$getSelectedRows(l),r=this.session.$moveLines(n.first,n.last,t?0:e),t&&-1==e&&(r=0),l.moveBy(r,0),a.fromOrientedRange(l)}else{var d=a.rangeList.ranges;a.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;for(var h=0,f=0,p=d.length,y=0;y<p;y++){var w=y;d[y].moveBy(h,0);for(var _=(n=this.$getSelectedRows(d[y])).first,C=n.last;++y<p;){f&&d[y].moveBy(f,0);var S=this.$getSelectedRows(d[y]);if(t&&S.first!=C)break;if(!t&&S.first>C+1)break;C=S.last}for(y--,h=this.session.$moveLines(_,C,t?0:e),t&&-1==e&&(w=y+1);w<=y;)d[w].moveBy(h,0),w++;t||(h=0),f+=h}a.fromOrientedRange(a.ranges[0]),a.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},this.$getSelectedRows=function(e){return e=(e||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(e.start.row),last:this.session.getRowFoldEnd(e.end.row)}},this.onCompositionStart=function(e){this.renderer.showComposition(e)},this.onCompositionUpdate=function(e){this.renderer.setCompositionText(e)},this.onCompositionEnd=function(){this.renderer.hideComposition()},this.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},this.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},this.isRowVisible=function(e){return e>=this.getFirstVisibleRow()&&e<=this.getLastVisibleRow()},this.isRowFullyVisible=function(e){return e>=this.renderer.getFirstFullyVisibleRow()&&e<=this.renderer.getLastFullyVisibleRow()},this.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},this.$moveByPage=function(e,t){var n=this.renderer,r=this.renderer.layerConfig,a=e*Math.floor(r.height/r.lineHeight);!0===t?this.selection.$moveSelection((function(){this.moveCursorBy(a,0)})):!1===t&&(this.selection.moveCursorBy(a,0),this.selection.clearSelection());var l=n.scrollTop;n.scrollBy(0,a*r.lineHeight),null!=t&&n.scrollCursorIntoView(null,.5),n.animateScrolling(l)},this.selectPageDown=function(){this.$moveByPage(1,!0)},this.selectPageUp=function(){this.$moveByPage(-1,!0)},this.gotoPageDown=function(){this.$moveByPage(1,!1)},this.gotoPageUp=function(){this.$moveByPage(-1,!1)},this.scrollPageDown=function(){this.$moveByPage(1)},this.scrollPageUp=function(){this.$moveByPage(-1)},this.scrollToRow=function(e){this.renderer.scrollToRow(e)},this.scrollToLine=function(e,t,n,r){this.renderer.scrollToLine(e,t,n,r)},this.centerSelection=function(){var e=this.getSelectionRange(),t={row:Math.floor(e.start.row+(e.end.row-e.start.row)/2),column:Math.floor(e.start.column+(e.end.column-e.start.column)/2)};this.renderer.alignCursor(t,.5)},this.getCursorPosition=function(){return this.selection.getCursor()},this.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},this.getSelectionRange=function(){return this.selection.getRange()},this.selectAll=function(){this.selection.selectAll()},this.clearSelection=function(){this.selection.clearSelection()},this.moveCursorTo=function(e,t){this.selection.moveCursorTo(e,t)},this.moveCursorToPosition=function(e){this.selection.moveCursorToPosition(e)},this.jumpToMatching=function(e,t){var n=this.getCursorPosition(),r=new A(this.session,n.row,n.column),a=r.getCurrentToken(),l=a||r.stepForward();if(l){var d,h,f=!1,p={},y=n.column-l.start,w={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if(l.value.match(/[{}()\[\]]/g)){for(;y<l.value.length&&!f;y++)if(w[l.value[y]])switch(h=w[l.value[y]]+"."+l.type.replace("rparen","lparen"),isNaN(p[h])&&(p[h]=0),l.value[y]){case"(":case"[":case"{":p[h]++;break;case")":case"]":case"}":p[h]--,-1===p[h]&&(d="bracket",f=!0)}}else-1!==l.type.indexOf("tag-name")&&(isNaN(p[l.value])&&(p[l.value]=0),"<"===a.value?p[l.value]++:"</"===a.value&&p[l.value]--,-1===p[l.value]&&(d="tag",f=!0));f||(a=l,l=r.stepForward(),y=0)}while(l&&!f);if(d){var _,S;if("bracket"===d)(_=this.session.getBracketRange(n))||(S=(_=new C(r.getCurrentTokenRow(),r.getCurrentTokenColumn()+y-1,r.getCurrentTokenRow(),r.getCurrentTokenColumn()+y-1)).start,(t||S.row===n.row&&Math.abs(S.column-n.column)<2)&&(_=this.session.getBracketRange(S)));else if("tag"===d){if(!l||-1===l.type.indexOf("tag-name"))return;var k=l.value;if(0===(_=new C(r.getCurrentTokenRow(),r.getCurrentTokenColumn()-2,r.getCurrentTokenRow(),r.getCurrentTokenColumn()-2)).compare(n.row,n.column)){f=!1;do{l=a,(a=r.stepBackward())&&(-1!==a.type.indexOf("tag-close")&&_.setEnd(r.getCurrentTokenRow(),r.getCurrentTokenColumn()+1),l.value===k&&-1!==l.type.indexOf("tag-name")&&("<"===a.value?p[k]++:"</"===a.value&&p[k]--,0===p[k]&&(f=!0)))}while(a&&!f)}l&&l.type.indexOf("tag-name")&&(S=_.start).row==n.row&&Math.abs(S.column-n.column)<2&&(S=_.end)}(S=_&&_.cursor||S)&&(e?_&&t?this.selection.setRange(_):_&&_.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(S.row,S.column):this.selection.moveTo(S.row,S.column))}}},this.gotoLine=function(e,t,n){this.selection.clearSelection(),this.session.unfold({row:e-1,column:t||0}),this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(e-1,t||0),this.isRowFullyVisible(e-1)||this.scrollToLine(e-1,!0,n)},this.navigateTo=function(e,t){this.selection.moveTo(e,t)},this.navigateUp=function(e){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var t=this.selection.anchor.getPosition();return this.moveCursorToPosition(t)}this.selection.clearSelection(),this.selection.moveCursorBy(-e||-1,0)},this.navigateDown=function(e){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var t=this.selection.anchor.getPosition();return this.moveCursorToPosition(t)}this.selection.clearSelection(),this.selection.moveCursorBy(e||1,0)},this.navigateLeft=function(e){if(this.selection.isEmpty())for(e=e||1;e--;)this.selection.moveCursorLeft();else{var t=this.getSelectionRange().start;this.moveCursorToPosition(t)}this.clearSelection()},this.navigateRight=function(e){if(this.selection.isEmpty())for(e=e||1;e--;)this.selection.moveCursorRight();else{var t=this.getSelectionRange().end;this.moveCursorToPosition(t)}this.clearSelection()},this.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},this.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},this.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},this.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},this.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},this.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},this.replace=function(e,t){t&&this.$search.set(t);var n=this.$search.find(this.session),r=0;return n?(this.$tryReplace(n,e)&&(r=1),this.selection.setSelectionRange(n),this.renderer.scrollSelectionIntoView(n.start,n.end),r):r},this.replaceAll=function(e,t){t&&this.$search.set(t);var n=this.$search.findAll(this.session),r=0;if(!n.length)return r;var a=this.getSelectionRange();this.selection.moveTo(0,0);for(var l=n.length-1;l>=0;--l)this.$tryReplace(n[l],e)&&r++;return this.selection.setSelectionRange(a),r},this.$tryReplace=function(e,t){var n=this.session.getTextRange(e);return null!==(t=this.$search.replace(n,t))?(e.end=this.session.replace(e,t),e):null},this.getLastSearchOptions=function(){return this.$search.getOptions()},this.find=function(e,t,n){t||(t={}),"string"==typeof e||e instanceof RegExp?t.needle=e:"object"==typeof e&&r.mixin(t,e);var a=this.selection.getRange();null==t.needle&&((e=this.session.getTextRange(a)||this.$search.$options.needle)||(a=this.session.getWordRange(a.start.row,a.start.column),e=this.session.getTextRange(a)),this.$search.set({needle:e})),this.$search.set(t),t.start||this.$search.set({start:a});var l=this.$search.find(this.session);return t.preventScroll?l:l?(this.revealRange(l,n),l):(t.backwards?a.start=a.end:a.end=a.start,void this.selection.setRange(a))},this.findNext=function(e,t){this.find({skipCurrent:!0,backwards:!1},e,t)},this.findPrevious=function(e,t){this.find(e,{skipCurrent:!0,backwards:!0},t)},this.revealRange=function(e,t){this.session.unfold(e),this.selection.setSelectionRange(e);var n=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(e.start,e.end,.5),!1!==t&&this.renderer.animateScrolling(n)},this.undo=function(){this.session.getUndoManager().undo(this.session),this.renderer.scrollCursorIntoView(null,.5)},this.redo=function(){this.session.getUndoManager().redo(this.session),this.renderer.scrollCursorIntoView(null,.5)},this.destroy=function(){this.$toDestroy&&(this.$toDestroy.forEach((function(e){e.destroy()})),this.$toDestroy=null),this.$mouseHandler&&this.$mouseHandler.destroy(),this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy(),this._$emitInputEvent&&this._$emitInputEvent.cancel(),this.removeAllListeners()},this.setAutoScrollEditorIntoView=function(e){if(e){var t,n=this,r=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var a=this.$scrollAnchor;a.style.cssText="position:absolute",this.container.insertBefore(a,this.container.firstChild);var l=this.on("changeSelection",(function(){r=!0})),d=this.renderer.on("beforeRender",(function(){r&&(t=n.renderer.container.getBoundingClientRect())})),h=this.renderer.on("afterRender",(function(){if(r&&t&&(n.isFocused()||n.searchBox&&n.searchBox.isFocused())){var e=n.renderer,l=e.$cursorLayer.$pixelPos,d=e.layerConfig,h=l.top-d.offset;null!=(r=l.top>=0&&h+t.top<0||!(l.top<d.height&&l.top+t.top+d.lineHeight>window.innerHeight)&&null)&&(a.style.top=h+"px",a.style.left=l.left+"px",a.style.height=d.lineHeight+"px",a.scrollIntoView(r)),r=t=null}}));this.setAutoScrollEditorIntoView=function(e){e||(delete this.setAutoScrollEditorIntoView,this.off("changeSelection",l),this.renderer.off("afterRender",h),this.renderer.off("beforeRender",d))}}},this.$resetCursorStyle=function(){var e=this.$cursorStyle||"ace",t=this.renderer.$cursorLayer;t&&(t.setSmoothBlinking(/smooth/.test(e)),t.isBlinking=!this.$readOnly&&"wide"!=e,a.setCssClass(t.element,"ace_slim-cursors",/slim/.test(e)))},this.prompt=function(e,t,n){var r=this;E.loadModule("./ext/prompt",(function(a){a.prompt(r,e,t,n)}))}}.call(R.prototype),E.defineOptions(R.prototype,"editor",{selectionStyle:{set:function(e){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:e})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(e){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(e){this.textInput.setReadOnly(e),this.$resetCursorStyle()},initialValue:!1},copyWithEmptySelection:{set:function(e){this.textInput.setCopyWithEmptySelection(e)},initialValue:!1},cursorStyle:{set:function(e){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},enableAutoIndent:{initialValue:!0},autoScrollEditorIntoView:{set:function(e){this.setAutoScrollEditorIntoView(e)}},keyboardHandler:{set:function(e){this.setKeyboardHandler(e)},get:function(){return this.$keybindingId},handlesSet:!0},value:{set:function(e){this.session.setValue(e)},get:function(){return this.getValue()},handlesSet:!0,hidden:!0},session:{set:function(e){this.setSession(e)},get:function(){return this.session},handlesSet:!0,hidden:!0},showLineNumbers:{set:function(e){this.renderer.$gutterLayer.setShowLineNumbers(e),this.renderer.$loop.schedule(this.renderer.CHANGE_GUTTER),e&&this.$relativeLineNumbers?O.attach(this):O.detach(this)},initialValue:!0},relativeLineNumbers:{set:function(e){this.$showLineNumbers&&e?O.attach(this):O.detach(this)}},placeholder:{set:function(e){this.$updatePlaceholder||(this.$updatePlaceholder=function(){var e=this.session&&(this.renderer.$composition||this.getValue());if(e&&this.renderer.placeholderNode)this.renderer.off("afterRender",this.$updatePlaceholder),a.removeCssClass(this.container,"ace_hasPlaceholder"),this.renderer.placeholderNode.remove(),this.renderer.placeholderNode=null;else if(e||this.renderer.placeholderNode)!e&&this.renderer.placeholderNode&&(this.renderer.placeholderNode.textContent=this.$placeholder||"");else{this.renderer.on("afterRender",this.$updatePlaceholder),a.addCssClass(this.container,"ace_hasPlaceholder");var t=a.createElement("div");t.className="ace_placeholder",t.textContent=this.$placeholder||"",this.renderer.placeholderNode=t,this.renderer.content.appendChild(this.renderer.placeholderNode)}}.bind(this),this.on("input",this.$updatePlaceholder)),this.$updatePlaceholder()}},hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",displayIndentGuides:"renderer",showGutter:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",hasCssTransforms:"renderer",maxPixelHeight:"renderer",useTextareaForIME:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimeout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",navigateWithinSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"});var O={getText:function(e,t){return(Math.abs(e.selection.lead.row-t)||t+1+(t<9?"·":""))+""},getWidth:function(e,t,n){return Math.max(t.toString().length,(n.lastRow+1).toString().length,2)*n.characterWidth},update:function(e,t){t.renderer.$loop.schedule(t.renderer.CHANGE_GUTTER)},attach:function(e){e.renderer.$gutterLayer.$renderer=this,e.on("changeSelection",this.update),this.update(null,e)},detach:function(e){e.renderer.$gutterLayer.$renderer==this&&(e.renderer.$gutterLayer.$renderer=null),e.off("changeSelection",this.update),this.update(null,e)}};t.Editor=R})),ace.define("ace/undomanager",[],(function(e,t,n){"use strict";var r=function(){this.$maxRev=0,this.$fromUndo=!1,this.reset()};(function(){this.addSession=function(e){this.$session=e},this.add=function(e,t,n){this.$fromUndo||e!=this.$lastDelta&&(this.$keepRedoStack||(this.$redoStack.length=0),!1!==t&&this.lastDeltas||(this.lastDeltas=[],this.$undoStack.push(this.lastDeltas),e.id=this.$rev=++this.$maxRev),"remove"!=e.action&&"insert"!=e.action||(this.$lastDelta=e),this.lastDeltas.push(e))},this.addSelection=function(e,t){this.selections.push({value:e,rev:t||this.$rev})},this.startNewGroup=function(){return this.lastDeltas=null,this.$rev},this.markIgnored=function(e,t){null==t&&(t=this.$rev+1);for(var n=this.$undoStack,r=n.length;r--;){var a=n[r][0];if(a.id<=e)break;a.id<t&&(a.ignore=!0)}this.lastDeltas=null},this.getSelection=function(e,t){for(var n=this.selections,r=n.length;r--;){var a=n[r];if(a.rev<e)return t&&(a=n[r+1]),a}},this.getRevision=function(){return this.$rev},this.getDeltas=function(e,t){null==t&&(t=this.$rev+1);for(var n=this.$undoStack,r=null,a=0,l=n.length;l--;){var d=n[l][0];if(d.id<t&&!r&&(r=l+1),d.id<=e){a=l+1;break}}return n.slice(a,r)},this.getChangedRanges=function(e,t){null==t&&(t=this.$rev+1)},this.getChangedLines=function(e,t){null==t&&(t=this.$rev+1)},this.undo=function(e,t){this.lastDeltas=null;var n=this.$undoStack;if(function(e,t){for(var n=t;n--;){var r=e[n];if(r&&!r[0].ignore){for(;n<t-1;){var a=y(e[n],e[n+1]);e[n]=a[0],e[n+1]=a[1],n++}return!0}}}(n,n.length)){e||(e=this.$session),this.$redoStackBaseRev!==this.$rev&&this.$redoStack.length&&(this.$redoStack=[]),this.$fromUndo=!0;var r=n.pop(),a=null;return r&&(a=e.undoChanges(r,t),this.$redoStack.push(r),this.$syncRev()),this.$fromUndo=!1,a}},this.redo=function(e,t){if(this.lastDeltas=null,e||(e=this.$session),this.$fromUndo=!0,this.$redoStackBaseRev!=this.$rev){var n=this.getDeltas(this.$redoStackBaseRev,this.$rev+1);!function(e,t){for(var n=0;n<t.length;n++)for(var r=t[n],a=0;a<r.length;a++)k(e,r[a])}(this.$redoStack,n),this.$redoStackBaseRev=this.$rev,this.$redoStack.forEach((function(e){e[0].id=++this.$maxRev}),this)}var r=this.$redoStack.pop(),a=null;return r&&(a=e.redoChanges(r,t),this.$undoStack.push(r),this.$syncRev()),this.$fromUndo=!1,a},this.$syncRev=function(){var e=this.$undoStack,t=e[e.length-1],n=t&&t[0].id||0;this.$redoStackBaseRev=n,this.$rev=n},this.reset=function(){this.lastDeltas=null,this.$lastDelta=null,this.$undoStack=[],this.$redoStack=[],this.$rev=0,this.mark=0,this.$redoStackBaseRev=this.$rev,this.selections=[]},this.canUndo=function(){return this.$undoStack.length>0},this.canRedo=function(){return this.$redoStack.length>0},this.bookmark=function(e){null==e&&(e=this.$rev),this.mark=e},this.isAtBookmark=function(){return this.$rev===this.mark},this.toJSON=function(){},this.fromJSON=function(){},this.hasUndo=this.canUndo,this.hasRedo=this.canRedo,this.isClean=this.isAtBookmark,this.markClean=this.bookmark,this.$prettyPrint=function(e){return e?h(e):h(this.$undoStack)+"\n---\n"+h(this.$redoStack)}}).call(r.prototype);var a=e("./range").Range,l=a.comparePoints;a.comparePoints;function d(e){return{row:e.row,column:e.column}}function h(e){if(e=e||this,Array.isArray(e))return e.map(h).join("\n");var t="";return e.action?(t="insert"==e.action?"+":"-",t+="["+e.lines+"]"):e.value&&(t=Array.isArray(e.value)?e.value.map(f).join("\n"):f(e.value)),e.start&&(t+=f(e)),(e.id||e.rev)&&(t+="\t("+(e.id||e.rev)+")"),t}function f(e){return e.start.row+":"+e.start.column+"=>"+e.end.row+":"+e.end.column}function p(e,t){var n="insert"==e.action,r="insert"==t.action;if(n&&r)if(l(t.start,e.end)>=0)_(t,e,-1);else{if(!(l(t.start,e.start)<=0))return null;_(e,t,1)}else if(n&&!r)if(l(t.start,e.end)>=0)_(t,e,-1);else{if(!(l(t.end,e.start)<=0))return null;_(e,t,-1)}else if(!n&&r)if(l(t.start,e.start)>=0)_(t,e,1);else{if(!(l(t.start,e.start)<=0))return null;_(e,t,1)}else if(!n&&!r)if(l(t.start,e.start)>=0)_(t,e,1);else{if(!(l(t.end,e.start)<=0))return null;_(e,t,-1)}return[t,e]}function y(e,t){for(var n=e.length;n--;)for(var r=0;r<t.length;r++)if(!p(e[n],t[r])){for(;n<e.length;){for(;r--;)p(t[r],e[n]);r=t.length,n++}return[e,t]}return e.selectionBefore=t.selectionBefore=e.selectionAfter=t.selectionAfter=null,[t,e]}function w(e,t){var n="insert"==e.action,r="insert"==t.action;if(n&&r)l(e.start,t.start)<0?_(t,e,1):_(e,t,1);else if(n&&!r)l(e.start,t.end)>=0?_(e,t,-1):(l(e.start,t.start)<=0||_(e,a.fromPoints(t.start,e.start),-1),_(t,e,1));else if(!n&&r)l(t.start,e.end)>=0?_(t,e,-1):(l(t.start,e.start)<=0||_(t,a.fromPoints(e.start,t.start),-1),_(e,t,1));else if(!n&&!r)if(l(t.start,e.end)>=0)_(t,e,-1);else{var d,h;if(!(l(t.end,e.start)<=0))return l(e.start,t.start)<0&&(d=e,e=S(e,t.start)),l(e.end,t.end)>0&&(h=S(e,t.end)),C(t.end,e.start,e.end,-1),h&&!d&&(e.lines=h.lines,e.start=h.start,e.end=h.end,h=e),[t,d,h].filter(Boolean);_(e,t,-1)}return[t,e]}function _(e,t,n){C(e.start,t.start,t.end,n),C(e.end,t.start,t.end,n)}function C(e,t,n,r){e.row==(1==r?t:n).row&&(e.column+=r*(n.column-t.column)),e.row+=r*(n.row-t.row)}function S(e,t){var n=e.lines,r=e.end;e.end=d(t);var a=e.end.row-e.start.row,l=n.splice(a,n.length),h=a?t.column:t.column-e.start.column;return n.push(l[0].substring(0,h)),l[0]=l[0].substr(h),{start:d(t),end:r,lines:l,action:e.action}}function k(e,t){t=function(e){return{start:d(e.start),end:d(e.end),action:e.action,lines:e.lines.slice()}}(t);for(var n=e.length;n--;){for(var r=e[n],a=0;a<r.length;a++){var l=w(r[a],t);t=l[0],2!=l.length&&(l[2]?(r.splice(a+1,1,l[1],l[2]),a++):l[1]||(r.splice(a,1),a--))}r.length||e.splice(n,1)}return e}t.UndoManager=r})),ace.define("ace/layer/lines",[],(function(e,t,n){"use strict";var r=e("../lib/dom"),a=function(e,t){this.element=e,this.canvasHeight=t||5e5,this.element.style.height=2*this.canvasHeight+"px",this.cells=[],this.cellCache=[],this.$offsetCoefficient=0};(function(){this.moveContainer=function(e){r.translate(this.element,0,-e.firstRowScreen*e.lineHeight%this.canvasHeight-e.offset*this.$offsetCoefficient)},this.pageChanged=function(e,t){return Math.floor(e.firstRowScreen*e.lineHeight/this.canvasHeight)!==Math.floor(t.firstRowScreen*t.lineHeight/this.canvasHeight)},this.computeLineTop=function(e,t,n){var r=t.firstRowScreen*t.lineHeight,a=Math.floor(r/this.canvasHeight);return n.documentToScreenRow(e,0)*t.lineHeight-a*this.canvasHeight},this.computeLineHeight=function(e,t,n){return t.lineHeight*n.getRowLineCount(e)},this.getLength=function(){return this.cells.length},this.get=function(e){return this.cells[e]},this.shift=function(){this.$cacheCell(this.cells.shift())},this.pop=function(){this.$cacheCell(this.cells.pop())},this.push=function(e){if(Array.isArray(e)){this.cells.push.apply(this.cells,e);for(var t=r.createFragment(this.element),n=0;n<e.length;n++)t.appendChild(e[n].element);this.element.appendChild(t)}else this.cells.push(e),this.element.appendChild(e.element)},this.unshift=function(e){if(Array.isArray(e)){this.cells.unshift.apply(this.cells,e);for(var t=r.createFragment(this.element),n=0;n<e.length;n++)t.appendChild(e[n].element);this.element.firstChild?this.element.insertBefore(t,this.element.firstChild):this.element.appendChild(t)}else this.cells.unshift(e),this.element.insertAdjacentElement("afterbegin",e.element)},this.last=function(){return this.cells.length?this.cells[this.cells.length-1]:null},this.$cacheCell=function(e){e&&(e.element.remove(),this.cellCache.push(e))},this.createCell=function(e,t,n,a){var l=this.cellCache.pop();if(!l){var d=r.createElement("div");a&&a(d),this.element.appendChild(d),l={element:d,text:"",row:e}}return l.row=e,l}}).call(a.prototype),t.Lines=a})),ace.define("ace/layer/gutter",[],(function(e,t,n){"use strict";var r=e("../lib/dom"),a=e("../lib/oop"),l=e("../lib/lang"),d=e("../lib/event_emitter").EventEmitter,h=e("./lines").Lines,f=function(e){this.element=r.createElement("div"),this.element.className="ace_layer ace_gutter-layer",e.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$lines=new h(this.element),this.$lines.$offsetCoefficient=1};function p(e){var t=document.createTextNode("");e.appendChild(t);var n=r.createElement("span");return e.appendChild(n),e}(function(){a.implement(this,d),this.setSession=function(e){this.session&&this.session.off("change",this.$updateAnnotations),this.session=e,e&&e.on("change",this.$updateAnnotations)},this.addGutterDecoration=function(e,t){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(e,t)},this.removeGutterDecoration=function(e,t){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(e,t)},this.setAnnotations=function(e){this.$annotations=[];for(var t=0;t<e.length;t++){var n=e[t],r=n.row,a=this.$annotations[r];a||(a=this.$annotations[r]={text:[]});var d=n.text;d=d?l.escapeHTML(d):n.html||"",-1===a.text.indexOf(d)&&a.text.push(d);var h=n.type;"error"==h?a.className=" ace_error":"warning"==h&&" ace_error"!=a.className?a.className=" ace_warning":"info"!=h||a.className||(a.className=" ace_info")}},this.$updateAnnotations=function(e){if(this.$annotations.length){var t=e.start.row,n=e.end.row-t;if(0===n);else if("remove"==e.action)this.$annotations.splice(t,n+1,null);else{var r=new Array(n+1);r.unshift(t,1),this.$annotations.splice.apply(this.$annotations,r)}}},this.update=function(e){this.config=e;var t=this.session,n=e.firstRow,r=Math.min(e.lastRow+e.gutterOffset,t.getLength()-1);this.oldLastRow=r,this.config=e,this.$lines.moveContainer(e),this.$updateCursorRow();for(var a=t.getNextFoldLine(n),l=a?a.start.row:1/0,d=null,h=-1,f=n;;){if(f>l&&(f=a.end.row+1,l=(a=t.getNextFoldLine(f,a))?a.start.row:1/0),f>r){for(;this.$lines.getLength()>h+1;)this.$lines.pop();break}(d=this.$lines.get(++h))?d.row=f:(d=this.$lines.createCell(f,e,this.session,p),this.$lines.push(d)),this.$renderCell(d,e,a,f),f++}this._signal("afterRender"),this.$updateGutterWidth(e)},this.$updateGutterWidth=function(e){var t=this.session,n=t.gutterRenderer||this.$renderer,r=t.$firstLineNumber,a=this.$lines.last()?this.$lines.last().text:"";(this.$fixedWidth||t.$useWrapMode)&&(a=t.getLength()+r-1);var l=n?n.getWidth(t,a,e):a.toString().length*e.characterWidth,d=this.$padding||this.$computePadding();(l+=d.left+d.right)===this.gutterWidth||isNaN(l)||(this.gutterWidth=l,this.element.parentNode.style.width=this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._signal("changeGutterWidth",l))},this.$updateCursorRow=function(){if(this.$highlightGutterLine){var e=this.session.selection.getCursor();this.$cursorRow!==e.row&&(this.$cursorRow=e.row)}},this.updateLineHighlight=function(){if(this.$highlightGutterLine){var e=this.session.selection.cursor.row;if(this.$cursorRow=e,!this.$cursorCell||this.$cursorCell.row!=e){this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ",""));var t=this.$lines.cells;this.$cursorCell=null;for(var n=0;n<t.length;n++){var r=t[n];if(r.row>=this.$cursorRow){if(r.row>this.$cursorRow){var a=this.session.getFoldLine(this.$cursorRow);if(!(n>0&&a&&a.start.row==t[n-1].row))break;r=t[n-1]}r.element.className="ace_gutter-active-line "+r.element.className,this.$cursorCell=r;break}}}}},this.scrollLines=function(e){var t=this.config;if(this.config=e,this.$updateCursorRow(),this.$lines.pageChanged(t,e))return this.update(e);this.$lines.moveContainer(e);var n=Math.min(e.lastRow+e.gutterOffset,this.session.getLength()-1),r=this.oldLastRow;if(this.oldLastRow=n,!t||r<e.firstRow)return this.update(e);if(n<t.firstRow)return this.update(e);if(t.firstRow<e.firstRow)for(var a=this.session.getFoldedRowCount(t.firstRow,e.firstRow-1);a>0;a--)this.$lines.shift();if(r>n)for(a=this.session.getFoldedRowCount(n+1,r);a>0;a--)this.$lines.pop();e.firstRow<t.firstRow&&this.$lines.unshift(this.$renderLines(e,e.firstRow,t.firstRow-1)),n>r&&this.$lines.push(this.$renderLines(e,r+1,n)),this.updateLineHighlight(),this._signal("afterRender"),this.$updateGutterWidth(e)},this.$renderLines=function(e,t,n){for(var r=[],a=t,l=this.session.getNextFoldLine(a),d=l?l.start.row:1/0;a>d&&(a=l.end.row+1,d=(l=this.session.getNextFoldLine(a,l))?l.start.row:1/0),!(a>n);){var h=this.$lines.createCell(a,e,this.session,p);this.$renderCell(h,e,l,a),r.push(h),a++}return r},this.$renderCell=function(e,t,n,a){var l=e.element,d=this.session,h=l.childNodes[0],f=l.childNodes[1],p=d.$firstLineNumber,y=d.$breakpoints,w=d.$decorations,_=d.gutterRenderer||this.$renderer,C=this.$showFoldWidgets&&d.foldWidgets,S=n?n.start.row:Number.MAX_VALUE,k="ace_gutter-cell ";if(this.$highlightGutterLine&&(a==this.$cursorRow||n&&a<this.$cursorRow&&a>=S&&this.$cursorRow<=n.end.row)&&(k+="ace_gutter-active-line ",this.$cursorCell!=e&&(this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ","")),this.$cursorCell=e)),y[a]&&(k+=y[a]),w[a]&&(k+=w[a]),this.$annotations[a]&&(k+=this.$annotations[a].className),l.className!=k&&(l.className=k),C){var x=C[a];null==x&&(x=C[a]=d.getFoldWidget(a))}if(x){k="ace_fold-widget ace_"+x;"start"==x&&a==S&&a<n.end.row?k+=" ace_closed":k+=" ace_open",f.className!=k&&(f.className=k);var E=t.lineHeight+"px";r.setStyle(f.style,"height",E),r.setStyle(f.style,"display","inline-block")}else f&&r.setStyle(f.style,"display","none");var A=(_?_.getText(d,a):a+p).toString();return A!==h.data&&(h.data=A),r.setStyle(e.element.style,"height",this.$lines.computeLineHeight(a,t,d)+"px"),r.setStyle(e.element.style,"top",this.$lines.computeLineTop(a,t,d)+"px"),e.text=A,e},this.$fixedWidth=!1,this.$highlightGutterLine=!0,this.$renderer="",this.setHighlightGutterLine=function(e){this.$highlightGutterLine=e},this.$showLineNumbers=!0,this.$renderer="",this.setShowLineNumbers=function(e){this.$renderer=!e&&{getWidth:function(){return 0},getText:function(){return""}}},this.getShowLineNumbers=function(){return this.$showLineNumbers},this.$showFoldWidgets=!0,this.setShowFoldWidgets=function(e){e?r.addCssClass(this.element,"ace_folding-enabled"):r.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=e,this.$padding=null},this.getShowFoldWidgets=function(){return this.$showFoldWidgets},this.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var e=r.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=(parseInt(e.borderLeftWidth)||0)+(parseInt(e.paddingLeft)||0)+1,this.$padding.right=(parseInt(e.borderRightWidth)||0)+(parseInt(e.paddingRight)||0),this.$padding},this.getRegion=function(e){var t=this.$padding||this.$computePadding(),n=this.element.getBoundingClientRect();return e.x<t.left+n.left?"markers":this.$showFoldWidgets&&e.x>n.right-t.right?"foldWidgets":void 0}}).call(f.prototype),t.Gutter=f})),ace.define("ace/layer/marker",[],(function(e,t,n){"use strict";var r=e("../range").Range,a=e("../lib/dom"),l=function(e){this.element=a.createElement("div"),this.element.className="ace_layer ace_marker-layer",e.appendChild(this.element)};(function(){this.$padding=0,this.setPadding=function(e){this.$padding=e},this.setSession=function(e){this.session=e},this.setMarkers=function(e){this.markers=e},this.elt=function(e,t){var n=-1!=this.i&&this.element.childNodes[this.i];n?this.i++:(n=document.createElement("div"),this.element.appendChild(n),this.i=-1),n.style.cssText=t,n.className=e},this.update=function(e){if(e){var t;for(var n in this.config=e,this.i=0,this.markers){var r=this.markers[n];if(r.range){var a=r.range.clipRows(e.firstRow,e.lastRow);if(!a.isEmpty())if(a=a.toScreenRange(this.session),r.renderer){var l=this.$getTop(a.start.row,e),d=this.$padding+a.start.column*e.characterWidth;r.renderer(t,a,d,l,e)}else"fullLine"==r.type?this.drawFullLineMarker(t,a,r.clazz,e):"screenLine"==r.type?this.drawScreenLineMarker(t,a,r.clazz,e):a.isMultiLine()?"text"==r.type?this.drawTextMarker(t,a,r.clazz,e):this.drawMultiLineMarker(t,a,r.clazz,e):this.drawSingleLineMarker(t,a,r.clazz+" ace_start ace_br15",e)}else r.update(t,this,this.session,e)}if(-1!=this.i)for(;this.i<this.element.childElementCount;)this.element.removeChild(this.element.lastChild)}},this.$getTop=function(e,t){return(e-t.firstRowScreen)*t.lineHeight},this.drawTextMarker=function(e,t,n,a,l){for(var d=this.session,h=t.start.row,f=t.end.row,p=h,y=0,w=0,_=d.getScreenLastRowColumn(p),C=new r(p,t.start.column,p,w);p<=f;p++)C.start.row=C.end.row=p,C.start.column=p==h?t.start.column:d.getRowWrapIndent(p),C.end.column=_,y=w,w=_,_=p+1<f?d.getScreenLastRowColumn(p+1):p==f?0:t.end.column,this.drawSingleLineMarker(e,C,n+(p==h?" ace_start":"")+" ace_br"+((p==h||p==h+1&&t.start.column?1:0)|(y<w?2:0)|(w>_?4:0)|(p==f?8:0)),a,p==f?0:1,l)},this.drawMultiLineMarker=function(e,t,n,r,a){var l=this.$padding,d=r.lineHeight,h=this.$getTop(t.start.row,r),f=l+t.start.column*r.characterWidth;(a=a||"",this.session.$bidiHandler.isBidiRow(t.start.row))?((p=t.clone()).end.row=p.start.row,p.end.column=this.session.getLine(p.start.row).length,this.drawBidiSingleLineMarker(e,p,n+" ace_br1 ace_start",r,null,a)):this.elt(n+" ace_br1 ace_start","height:"+d+"px;right:0;top:"+h+"px;left:"+f+"px;"+(a||""));if(this.session.$bidiHandler.isBidiRow(t.end.row)){var p;(p=t.clone()).start.row=p.end.row,p.start.column=0,this.drawBidiSingleLineMarker(e,p,n+" ace_br12",r,null,a)}else{h=this.$getTop(t.end.row,r);var y=t.end.column*r.characterWidth;this.elt(n+" ace_br12","height:"+d+"px;width:"+y+"px;top:"+h+"px;left:"+l+"px;"+(a||""))}if(!((d=(t.end.row-t.start.row-1)*r.lineHeight)<=0)){h=this.$getTop(t.start.row+1,r);var w=(t.start.column?1:0)|(t.end.column?0:8);this.elt(n+(w?" ace_br"+w:""),"height:"+d+"px;right:0;top:"+h+"px;left:"+l+"px;"+(a||""))}},this.drawSingleLineMarker=function(e,t,n,r,a,l){if(this.session.$bidiHandler.isBidiRow(t.start.row))return this.drawBidiSingleLineMarker(e,t,n,r,a,l);var d=r.lineHeight,h=(t.end.column+(a||0)-t.start.column)*r.characterWidth,f=this.$getTop(t.start.row,r),p=this.$padding+t.start.column*r.characterWidth;this.elt(n,"height:"+d+"px;width:"+h+"px;top:"+f+"px;left:"+p+"px;"+(l||""))},this.drawBidiSingleLineMarker=function(e,t,n,r,a,l){var d=r.lineHeight,h=this.$getTop(t.start.row,r),f=this.$padding;this.session.$bidiHandler.getSelections(t.start.column,t.end.column).forEach((function(e){this.elt(n,"height:"+d+"px;width:"+e.width+(a||0)+"px;top:"+h+"px;left:"+(f+e.left)+"px;"+(l||""))}),this)},this.drawFullLineMarker=function(e,t,n,r,a){var l=this.$getTop(t.start.row,r),d=r.lineHeight;t.start.row!=t.end.row&&(d+=this.$getTop(t.end.row,r)-l),this.elt(n,"height:"+d+"px;top:"+l+"px;left:0;right:0;"+(a||""))},this.drawScreenLineMarker=function(e,t,n,r,a){var l=this.$getTop(t.start.row,r),d=r.lineHeight;this.elt(n,"height:"+d+"px;top:"+l+"px;left:0;right:0;"+(a||""))}}).call(l.prototype),t.Marker=l})),ace.define("ace/layer/text",[],(function(e,t,n){"use strict";var r=e("../lib/oop"),a=e("../lib/dom"),l=e("../lib/lang"),d=e("./lines").Lines,h=e("../lib/event_emitter").EventEmitter,f=function(e){this.dom=a,this.element=this.dom.createElement("div"),this.element.className="ace_layer ace_text-layer",e.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this),this.$lines=new d(this.element)};(function(){r.implement(this,h),this.EOF_CHAR="¶",this.EOL_CHAR_LF="¬",this.EOL_CHAR_CRLF="¤",this.EOL_CHAR=this.EOL_CHAR_LF,this.TAB_CHAR="—",this.SPACE_CHAR="·",this.$padding=0,this.MAX_LINE_LENGTH=1e4,this.$updateEolChar=function(){var e=this.session.doc,t="\n"==e.getNewLineCharacter()&&"windows"!=e.getNewLineMode()?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=t)return this.EOL_CHAR=t,!0},this.setPadding=function(e){this.$padding=e,this.element.style.margin="0 "+e+"px"},this.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},this.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},this.$setFontMetrics=function(e){this.$fontMetrics=e,this.$fontMetrics.on("changeCharacterSize",function(e){this._signal("changeCharacterSize",e)}.bind(this)),this.$pollSizeChanges()},this.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},this.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},this.setSession=function(e){this.session=e,e&&this.$computeTabString()},this.showInvisibles=!1,this.showSpaces=!1,this.showTabs=!1,this.showEOL=!1,this.setShowInvisibles=function(e){return this.showInvisibles!=e&&(this.showInvisibles=e,"string"==typeof e?(this.showSpaces=/tab/i.test(e),this.showTabs=/space/i.test(e),this.showEOL=/eol/i.test(e)):this.showSpaces=this.showTabs=this.showEOL=e,this.$computeTabString(),!0)},this.displayIndentGuides=!0,this.setDisplayIndentGuides=function(e){return this.displayIndentGuides!=e&&(this.displayIndentGuides=e,this.$computeTabString(),!0)},this.$tabStrings=[],this.onChangeTabSize=this.$computeTabString=function(){var e=this.session.getTabSize();this.tabSize=e;for(var t=this.$tabStrings=[0],n=1;n<e+1;n++){if(this.showTabs)(r=this.dom.createElement("span")).className="ace_invisible ace_invisible_tab",r.textContent=l.stringRepeat(this.TAB_CHAR,n),t.push(r);else t.push(this.dom.createTextNode(l.stringRepeat(" ",n),this.element))}if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var r,a=this.showSpaces?" ace_invisible ace_invisible_space":"",d=this.showSpaces?l.stringRepeat(this.SPACE_CHAR,this.tabSize):l.stringRepeat(" ",this.tabSize),h=this.showTabs?" ace_invisible ace_invisible_tab":"",f=this.showTabs?l.stringRepeat(this.TAB_CHAR,this.tabSize):d;(r=this.dom.createElement("span")).className="ace_indent-guide"+a,r.textContent=d,this.$tabStrings[" "]=r,(r=this.dom.createElement("span")).className="ace_indent-guide"+h,r.textContent=f,this.$tabStrings["\t"]=r}},this.updateLines=function(e,t,n){if(this.config.lastRow!=e.lastRow||this.config.firstRow!=e.firstRow)return this.update(e);this.config=e;for(var r=Math.max(t,e.firstRow),a=Math.min(n,e.lastRow),l=this.element.childNodes,d=0,h=e.firstRow;h<r;h++){if(f=this.session.getFoldLine(h)){if(f.containsRow(r)){r=f.start.row;break}h=f.end.row}d++}for(var f,p=!1,y=(h=r,(f=this.session.getNextFoldLine(h))?f.start.row:1/0);h>y&&(h=f.end.row+1,y=(f=this.session.getNextFoldLine(h,f))?f.start.row:1/0),!(h>a);){var w=l[d++];if(w){this.dom.removeChildren(w),this.$renderLine(w,h,h==y&&f),p&&(w.style.top=this.$lines.computeLineTop(h,e,this.session)+"px");var _=e.lineHeight*this.session.getRowLength(h)+"px";w.style.height!=_&&(p=!0,w.style.height=_)}h++}if(p)for(;d<this.$lines.cells.length;){var C=this.$lines.cells[d++];C.element.style.top=this.$lines.computeLineTop(C.row,e,this.session)+"px"}},this.scrollLines=function(e){var t=this.config;if(this.config=e,this.$lines.pageChanged(t,e))return this.update(e);this.$lines.moveContainer(e);var n=e.lastRow,r=t?t.lastRow:-1;if(!t||r<e.firstRow)return this.update(e);if(n<t.firstRow)return this.update(e);if(!t||t.lastRow<e.firstRow)return this.update(e);if(e.lastRow<t.firstRow)return this.update(e);if(t.firstRow<e.firstRow)for(var a=this.session.getFoldedRowCount(t.firstRow,e.firstRow-1);a>0;a--)this.$lines.shift();if(t.lastRow>e.lastRow)for(a=this.session.getFoldedRowCount(e.lastRow+1,t.lastRow);a>0;a--)this.$lines.pop();e.firstRow<t.firstRow&&this.$lines.unshift(this.$renderLinesFragment(e,e.firstRow,t.firstRow-1)),e.lastRow>t.lastRow&&this.$lines.push(this.$renderLinesFragment(e,t.lastRow+1,e.lastRow))},this.$renderLinesFragment=function(e,t,n){for(var r=[],l=t,d=this.session.getNextFoldLine(l),h=d?d.start.row:1/0;l>h&&(l=d.end.row+1,h=(d=this.session.getNextFoldLine(l,d))?d.start.row:1/0),!(l>n);){var f=this.$lines.createCell(l,e,this.session),p=f.element;this.dom.removeChildren(p),a.setStyle(p.style,"height",this.$lines.computeLineHeight(l,e,this.session)+"px"),a.setStyle(p.style,"top",this.$lines.computeLineTop(l,e,this.session)+"px"),this.$renderLine(p,l,l==h&&d),this.$useLineGroups()?p.className="ace_line_group":p.className="ace_line",r.push(f),l++}return r},this.update=function(e){this.$lines.moveContainer(e),this.config=e;for(var t=e.firstRow,n=e.lastRow,r=this.$lines;r.getLength();)r.pop();r.push(this.$renderLinesFragment(e,t,n))},this.$textToken={text:!0,rparen:!0,lparen:!0},this.$renderToken=function(e,t,n,r){for(var a,d=/(\t)|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\uFEFF\uFFF9-\uFFFC]+)|(\u3000)|([\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,h=this.dom.createFragment(this.element),f=0;a=d.exec(r);){var p=a[1],y=a[2],w=a[3],_=a[4],C=a[5];if(this.showSpaces||!y){var S=f!=a.index?r.slice(f,a.index):"";if(f=a.index+a[0].length,S&&h.appendChild(this.dom.createTextNode(S,this.element)),p){var k=this.session.getScreenTabSize(t+a.index);h.appendChild(this.$tabStrings[k].cloneNode(!0)),t+=k-1}else if(y){if(this.showSpaces)(E=this.dom.createElement("span")).className="ace_invisible ace_invisible_space",E.textContent=l.stringRepeat(this.SPACE_CHAR,y.length),h.appendChild(E);else h.appendChild(this.com.createTextNode(y,this.element))}else if(w){(E=this.dom.createElement("span")).className="ace_invisible ace_invisible_space ace_invalid",E.textContent=l.stringRepeat(this.SPACE_CHAR,w.length),h.appendChild(E)}else if(_){t+=1,(E=this.dom.createElement("span")).style.width=2*this.config.characterWidth+"px",E.className=this.showSpaces?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",E.textContent=this.showSpaces?this.SPACE_CHAR:_,h.appendChild(E)}else if(C){t+=1,(E=this.dom.createElement("span")).style.width=2*this.config.characterWidth+"px",E.className="ace_cjk",E.textContent=C,h.appendChild(E)}}}if(h.appendChild(this.dom.createTextNode(f?r.slice(f):r,this.element)),this.$textToken[n.type])e.appendChild(h);else{var x="ace_"+n.type.replace(/\./g," ace_"),E=this.dom.createElement("span");"fold"==n.type&&(E.style.width=n.value.length*this.config.characterWidth+"px"),E.className=x,E.appendChild(h),e.appendChild(E)}return t+r.length},this.renderIndentGuide=function(e,t,n){var r=t.search(this.$indentGuideRe);if(r<=0||r>=n)return t;if(" "==t[0]){for(var a=(r-=r%this.tabSize)/this.tabSize,l=0;l<a;l++)e.appendChild(this.$tabStrings[" "].cloneNode(!0));return t.substr(r)}if("\t"==t[0]){for(l=0;l<r;l++)e.appendChild(this.$tabStrings["\t"].cloneNode(!0));return t.substr(r)}return t},this.$createLineElement=function(e){var t=this.dom.createElement("div");return t.className="ace_line",t.style.height=this.config.lineHeight+"px",t},this.$renderWrappedLine=function(e,t,n){var r=0,a=0,d=n[0],h=0,f=this.$createLineElement();e.appendChild(f);for(var p=0;p<t.length;p++){var y=t[p],w=y.value;if(0==p&&this.displayIndentGuides){if(r=w.length,!(w=this.renderIndentGuide(f,w,d)))continue;r-=w.length}if(r+w.length<d)h=this.$renderToken(f,h,y,w),r+=w.length;else{for(;r+w.length>=d;)h=this.$renderToken(f,h,y,w.substring(0,d-r)),w=w.substring(d-r),r=d,f=this.$createLineElement(),e.appendChild(f),f.appendChild(this.dom.createTextNode(l.stringRepeat(" ",n.indent),this.element)),h=0,d=n[++a]||Number.MAX_VALUE;0!=w.length&&(r+=w.length,h=this.$renderToken(f,h,y,w))}}n[n.length-1]>this.MAX_LINE_LENGTH&&this.$renderOverflowMessage(f,h,null,"",!0)},this.$renderSimpleLine=function(e,t){var n=0,r=t[0],a=r.value;this.displayIndentGuides&&(a=this.renderIndentGuide(e,a)),a&&(n=this.$renderToken(e,n,r,a));for(var l=1;l<t.length;l++){if(n+(a=(r=t[l]).value).length>this.MAX_LINE_LENGTH)return this.$renderOverflowMessage(e,n,r,a);n=this.$renderToken(e,n,r,a)}},this.$renderOverflowMessage=function(e,t,n,r,a){n&&this.$renderToken(e,t,n,r.slice(0,this.MAX_LINE_LENGTH-t));var l=this.dom.createElement("span");l.className="ace_inline_button ace_keyword ace_toggle_wrap",l.textContent=a?"<hide>":"<click to see more...>",e.appendChild(l)},this.$renderLine=function(e,t,n){if(n||0==n||(n=this.session.getFoldLine(t)),n)var r=this.$getFoldLineTokens(t,n);else r=this.session.getTokens(t);var a=e;if(r.length){var l=this.session.getRowSplitData(t);if(l&&l.length){this.$renderWrappedLine(e,r,l);a=e.lastChild}else{a=e;this.$useLineGroups()&&(a=this.$createLineElement(),e.appendChild(a)),this.$renderSimpleLine(a,r)}}else this.$useLineGroups()&&(a=this.$createLineElement(),e.appendChild(a));if(this.showEOL&&a){n&&(t=n.end.row);var d=this.dom.createElement("span");d.className="ace_invisible ace_invisible_eol",d.textContent=t==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,a.appendChild(d)}},this.$getFoldLineTokens=function(e,t){var n=this.session,r=[];var a=n.getTokens(e);return t.walk((function(e,t,l,d,h){null!=e?r.push({type:"fold",value:e}):(h&&(a=n.getTokens(t)),a.length&&function(e,t,n){for(var a=0,l=0;l+e[a].value.length<t;)if(l+=e[a].value.length,++a==e.length)return;for(l!=t&&((d=e[a].value.substring(t-l)).length>n-t&&(d=d.substring(0,n-t)),r.push({type:e[a].type,value:d}),l=t+d.length,a+=1);l<n&&a<e.length;){var d;(d=e[a].value).length+l>n?r.push({type:e[a].type,value:d.substring(0,n-l)}):r.push(e[a]),l+=d.length,a+=1}}(a,d,l))}),t.end.row,this.session.getLine(t.end.row).length),r},this.$useLineGroups=function(){return this.session.getUseWrapMode()},this.destroy=function(){}}).call(f.prototype),t.Text=f})),ace.define("ace/layer/cursor",[],(function(e,t,n){"use strict";var r=e("../lib/dom"),a=function(e){this.element=r.createElement("div"),this.element.className="ace_layer ace_cursor-layer",e.appendChild(this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),r.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateOpacity.bind(this)};(function(){this.$updateOpacity=function(e){for(var t=this.cursors,n=t.length;n--;)r.setStyle(t[n].style,"opacity",e?"":"0")},this.$startCssAnimation=function(){for(var e=this.cursors,t=e.length;t--;)e[t].style.animationDuration=this.blinkInterval+"ms";setTimeout(function(){r.addCssClass(this.element,"ace_animate-blinking")}.bind(this))},this.$stopCssAnimation=function(){r.removeCssClass(this.element,"ace_animate-blinking")},this.$padding=0,this.setPadding=function(e){this.$padding=e},this.setSession=function(e){this.session=e},this.setBlinking=function(e){e!=this.isBlinking&&(this.isBlinking=e,this.restartTimer())},this.setBlinkInterval=function(e){e!=this.blinkInterval&&(this.blinkInterval=e,this.restartTimer())},this.setSmoothBlinking=function(e){e!=this.smoothBlinking&&(this.smoothBlinking=e,r.setCssClass(this.element,"ace_smooth-blinking",e),this.$updateCursors(!0),this.restartTimer())},this.addCursor=function(){var e=r.createElement("div");return e.className="ace_cursor",this.element.appendChild(e),this.cursors.push(e),e},this.removeCursor=function(){if(this.cursors.length>1){var e=this.cursors.pop();return e.parentNode.removeChild(e),e}},this.hideCursor=function(){this.isVisible=!1,r.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.showCursor=function(){this.isVisible=!0,r.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.restartTimer=function(){var e=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.$stopCssAnimation(),this.smoothBlinking&&r.removeCssClass(this.element,"ace_smooth-blinking"),e(!0),this.isBlinking&&this.blinkInterval&&this.isVisible)if(this.smoothBlinking&&setTimeout(function(){r.addCssClass(this.element,"ace_smooth-blinking")}.bind(this)),r.HAS_CSS_ANIMATION)this.$startCssAnimation();else{var t=function(){this.timeoutId=setTimeout((function(){e(!1)}),.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval((function(){e(!0),t()}),this.blinkInterval),t()}else this.$stopCssAnimation()},this.getPixelPosition=function(e,t){if(!this.config||!this.session)return{left:0,top:0};e||(e=this.session.selection.getCursor());var n=this.session.documentToScreenPosition(e);return{left:this.$padding+(this.session.$bidiHandler.isBidiRow(n.row,e.row)?this.session.$bidiHandler.getPosLeft(n.column):n.column*this.config.characterWidth),top:(n.row-(t?this.config.firstRowScreen:0))*this.config.lineHeight}},this.isCursorInView=function(e,t){return e.top>=0&&e.top<t.maxHeight},this.update=function(e){this.config=e;var t=this.session.$selectionMarkers,n=0,a=0;void 0!==t&&0!==t.length||(t=[{cursor:null}]);n=0;for(var l=t.length;n<l;n++){var d=this.getPixelPosition(t[n].cursor,!0);if(!((d.top>e.height+e.offset||d.top<0)&&n>1)){var h=this.cursors[a++]||this.addCursor(),f=h.style;this.drawCursor?this.drawCursor(h,d,e,t[n],this.session):this.isCursorInView(d,e)?(r.setStyle(f,"display","block"),r.translate(h,d.left,d.top),r.setStyle(f,"width",Math.round(e.characterWidth)+"px"),r.setStyle(f,"height",e.lineHeight+"px")):r.setStyle(f,"display","none")}}for(;this.cursors.length>a;)this.removeCursor();var p=this.session.getOverwrite();this.$setOverwrite(p),this.$pixelPos=d,this.restartTimer()},this.drawCursor=null,this.$setOverwrite=function(e){e!=this.overwrite&&(this.overwrite=e,e?r.addCssClass(this.element,"ace_overwrite-cursors"):r.removeCssClass(this.element,"ace_overwrite-cursors"))},this.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)}}).call(a.prototype),t.Cursor=a})),ace.define("ace/scrollbar",[],(function(e,t,n){"use strict";var r=e("./lib/oop"),a=e("./lib/dom"),l=e("./lib/event"),d=e("./lib/event_emitter").EventEmitter,h=function(e){this.element=a.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+this.classSuffix,this.inner=a.createElement("div"),this.inner.className="ace_scrollbar-inner",this.inner.textContent=" ",this.element.appendChild(this.inner),e.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,l.addListener(this.element,"scroll",this.onScroll.bind(this)),l.addListener(this.element,"mousedown",l.preventDefault)};(function(){r.implement(this,d),this.setVisible=function(e){this.element.style.display=e?"":"none",this.isVisible=e,this.coeff=1}}).call(h.prototype);var f=function(e,t){h.call(this,e),this.scrollTop=0,this.scrollHeight=0,t.$scrollbarWidth=this.width=a.scrollbarWidth(e.ownerDocument),this.inner.style.width=this.element.style.width=(this.width||15)+5+"px",this.$minWidth=0};r.inherits(f,h),function(){this.classSuffix="-v",this.onScroll=function(){if(!this.skipEvent){if(this.scrollTop=this.element.scrollTop,1!=this.coeff){var e=this.element.clientHeight/this.scrollHeight;this.scrollTop=this.scrollTop*(1-e)/(this.coeff-e)}this._emit("scroll",{data:this.scrollTop})}this.skipEvent=!1},this.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},this.setHeight=function(e){this.element.style.height=e+"px"},this.setInnerHeight=this.setScrollHeight=function(e){this.scrollHeight=e,e>32768?(this.coeff=32768/e,e=32768):1!=this.coeff&&(this.coeff=1),this.inner.style.height=e+"px"},this.setScrollTop=function(e){this.scrollTop!=e&&(this.skipEvent=!0,this.scrollTop=e,this.element.scrollTop=e*this.coeff)}}.call(f.prototype);var p=function(e,t){h.call(this,e),this.scrollLeft=0,this.height=t.$scrollbarWidth,this.inner.style.height=this.element.style.height=(this.height||15)+5+"px"};r.inherits(p,h),function(){this.classSuffix="-h",this.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},this.getHeight=function(){return this.isVisible?this.height:0},this.setWidth=function(e){this.element.style.width=e+"px"},this.setInnerWidth=function(e){this.inner.style.width=e+"px"},this.setScrollWidth=function(e){this.inner.style.width=e+"px"},this.setScrollLeft=function(e){this.scrollLeft!=e&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=e)}}.call(p.prototype),t.ScrollBar=f,t.ScrollBarV=f,t.ScrollBarH=p,t.VScrollBar=f,t.HScrollBar=p})),ace.define("ace/renderloop",[],(function(e,t,n){"use strict";var r=e("./lib/event"),a=function(e,t){this.onRender=e,this.pending=!1,this.changes=0,this.$recursionLimit=2,this.window=t||window;var n=this;this._flush=function(e){n.pending=!1;var t=n.changes;if(t&&(r.blockIdle(100),n.changes=0,n.onRender(t)),n.changes){if(n.$recursionLimit--<0)return;n.schedule()}else n.$recursionLimit=2}};(function(){this.schedule=function(e){this.changes=this.changes|e,this.changes&&!this.pending&&(r.nextFrame(this._flush),this.pending=!0)},this.clear=function(e){var t=this.changes;return this.changes=0,t}}).call(a.prototype),t.RenderLoop=a})),ace.define("ace/layer/font_metrics",[],(function(e,t,n){var r=e("../lib/oop"),a=e("../lib/dom"),l=e("../lib/lang"),d=e("../lib/event"),h=e("../lib/useragent"),f=e("../lib/event_emitter").EventEmitter,p="function"==typeof ResizeObserver,y=200,w=t.FontMetrics=function(e){this.el=a.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=a.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=a.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),e.appendChild(this.el),this.$measureNode.textContent=l.stringRepeat("X",256),this.$characterSize={width:0,height:0},p?this.$addObserver():this.checkForSizeChanges()};(function(){r.implement(this,f),this.$characterSize={width:0,height:0},this.$setMeasureNodeStyles=function(e,t){e.width=e.height="auto",e.left=e.top="0px",e.visibility="hidden",e.position="absolute",e.whiteSpace="pre",h.isIE<8?e["font-family"]="inherit":e.font="inherit",e.overflow=t?"hidden":"visible"},this.checkForSizeChanges=function(e){if(void 0===e&&(e=this.$measureSizes()),e&&(this.$characterSize.width!==e.width||this.$characterSize.height!==e.height)){this.$measureNode.style.fontWeight="bold";var t=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=e,this.charSizes=Object.create(null),this.allowBoldFonts=t&&t.width===e.width&&t.height===e.height,this._emit("changeCharacterSize",{data:e})}},this.$addObserver=function(){var e=this;this.$observer=new window.ResizeObserver((function(t){e.checkForSizeChanges()})),this.$observer.observe(this.$measureNode)},this.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer||this.$observer)return this.$pollSizeChangesTimer;var e=this;return this.$pollSizeChangesTimer=d.onIdle((function t(){e.checkForSizeChanges(),d.onIdle(t,500)}),500)},this.setPolling=function(e){e?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},this.$measureSizes=function(e){var t={height:(e||this.$measureNode).clientHeight,width:(e||this.$measureNode).clientWidth/256};return 0===t.width||0===t.height?null:t},this.$measureCharWidth=function(e){return this.$main.textContent=l.stringRepeat(e,256),this.$main.getBoundingClientRect().width/256},this.getCharacterWidth=function(e){var t=this.charSizes[e];return void 0===t&&(t=this.charSizes[e]=this.$measureCharWidth(e)/this.$characterSize.width),t},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$observer&&this.$observer.disconnect(),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},this.$getZoom=function e(t){return t&&t.parentElement?(window.getComputedStyle(t).zoom||1)*e(t.parentElement):1},this.$initTransformMeasureNodes=function(){var e=function(e,t){return["div",{style:"position: absolute;top:"+e+"px;left:"+t+"px;"}]};this.els=a.buildDom([e(0,0),e(y,0),e(0,y),e(y,y)],this.el)},this.transformCoordinates=function(e,t){e&&(e=l(1/this.$getZoom(this.el),e));function n(e,t,n){var r=e[1]*t[0]-e[0]*t[1];return[(-t[1]*n[0]+t[0]*n[1])/r,(+e[1]*n[0]-e[0]*n[1])/r]}function r(e,t){return[e[0]-t[0],e[1]-t[1]]}function a(e,t){return[e[0]+t[0],e[1]+t[1]]}function l(e,t){return[e*t[0],e*t[1]]}function d(e){var t=e.getBoundingClientRect();return[t.left,t.top]}this.els||this.$initTransformMeasureNodes();var h=d(this.els[0]),f=d(this.els[1]),p=d(this.els[2]),w=d(this.els[3]),_=n(r(w,f),r(w,p),r(a(f,p),a(w,h))),C=l(1+_[0],r(f,h)),S=l(1+_[1],r(p,h));if(t){var k=t,x=_[0]*k[0]/y+_[1]*k[1]/y+1,E=a(l(k[0],C),l(k[1],S));return a(l(1/x/y,E),h)}var A=r(e,h),T=n(r(C,l(_[0],A)),r(S,l(_[1],A)),A);return l(y,T)}}).call(w.prototype)})),ace.define("ace/virtual_renderer",[],(function(e,t,n){"use strict";var r=e("./lib/oop"),a=e("./lib/dom"),l=e("./config"),d=e("./layer/gutter").Gutter,h=e("./layer/marker").Marker,f=e("./layer/text").Text,p=e("./layer/cursor").Cursor,y=e("./scrollbar").HScrollBar,w=e("./scrollbar").VScrollBar,_=e("./renderloop").RenderLoop,C=e("./layer/font_metrics").FontMetrics,S=e("./lib/event_emitter").EventEmitter,k='.ace_br1 {border-top-left-radius    : 3px;}.ace_br2 {border-top-right-radius   : 3px;}.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}.ace_br4 {border-bottom-right-radius: 3px;}.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}.ace_br8 {border-bottom-left-radius : 3px;}.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}.ace_editor {position: relative;overflow: hidden;padding: 0;font: 12px/normal \'Monaco\', \'Menlo\', \'Ubuntu Mono\', \'Consolas\', \'source-code-pro\', monospace;direction: ltr;text-align: left;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);}.ace_scroller {position: absolute;overflow: hidden;top: 0;bottom: 0;background-color: inherit;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;cursor: text;}.ace_content {position: absolute;box-sizing: border-box;min-width: 100%;contain: style size layout;font-variant-ligatures: no-common-ligatures;}.ace_dragging .ace_scroller:before{position: absolute;top: 0;left: 0;right: 0;bottom: 0;content: \'\';background: rgba(250, 250, 250, 0.01);z-index: 1000;}.ace_dragging.ace_dark .ace_scroller:before{background: rgba(0, 0, 0, 0.01);}.ace_selecting, .ace_selecting * {cursor: text !important;}.ace_gutter {position: absolute;overflow : hidden;width: auto;top: 0;bottom: 0;left: 0;cursor: default;z-index: 4;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;contain: style size layout;}.ace_gutter-active-line {position: absolute;left: 0;right: 0;}.ace_scroller.ace_scroll-left {box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;}.ace_gutter-cell {position: absolute;top: 0;left: 0;right: 0;padding-left: 19px;padding-right: 6px;background-repeat: no-repeat;}.ace_gutter-cell.ace_error {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: 2px center;}.ace_gutter-cell.ace_warning {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");background-position: 2px center;}.ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");background-position: 2px center;}.ace_dark .ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");}.ace_scrollbar {contain: strict;position: absolute;right: 0;bottom: 0;z-index: 6;}.ace_scrollbar-inner {position: absolute;cursor: text;left: 0;top: 0;}.ace_scrollbar-v{overflow-x: hidden;overflow-y: scroll;top: 0;}.ace_scrollbar-h {overflow-x: scroll;overflow-y: hidden;left: 0;}.ace_print-margin {position: absolute;height: 100%;}.ace_text-input {position: absolute;z-index: 0;width: 0.5em;height: 1em;opacity: 0;background: transparent;-moz-appearance: none;appearance: none;border: none;resize: none;outline: none;overflow: hidden;font: inherit;padding: 0 1px;margin: 0 -1px;contain: strict;-ms-user-select: text;-moz-user-select: text;-webkit-user-select: text;user-select: text;white-space: pre!important;}.ace_text-input.ace_composition {background: transparent;color: inherit;z-index: 1000;opacity: 1;}.ace_composition_placeholder { color: transparent }.ace_composition_marker { border-bottom: 1px solid;position: absolute;border-radius: 0;margin-top: 1px;}[ace_nocontext=true] {transform: none!important;filter: none!important;clip-path: none!important;mask : none!important;contain: none!important;perspective: none!important;mix-blend-mode: initial!important;z-index: auto;}.ace_layer {z-index: 1;position: absolute;overflow: hidden;word-wrap: normal;white-space: pre;height: 100%;width: 100%;box-sizing: border-box;pointer-events: none;}.ace_gutter-layer {position: relative;width: auto;text-align: right;pointer-events: auto;height: 1000000px;contain: style size layout;}.ace_text-layer {font: inherit !important;position: absolute;height: 1000000px;width: 1000000px;contain: style size layout;}.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {contain: style size layout;position: absolute;top: 0;left: 0;right: 0;}.ace_hidpi .ace_text-layer,.ace_hidpi .ace_gutter-layer,.ace_hidpi .ace_content,.ace_hidpi .ace_gutter {contain: strict;will-change: transform;}.ace_hidpi .ace_text-layer > .ace_line, .ace_hidpi .ace_text-layer > .ace_line_group {contain: strict;}.ace_cjk {display: inline-block;text-align: center;}.ace_cursor-layer {z-index: 4;}.ace_cursor {z-index: 4;position: absolute;box-sizing: border-box;border-left: 2px solid;transform: translatez(0);}.ace_multiselect .ace_cursor {border-left-width: 1px;}.ace_slim-cursors .ace_cursor {border-left-width: 1px;}.ace_overwrite-cursors .ace_cursor {border-left-width: 0;border-bottom: 1px solid;}.ace_hidden-cursors .ace_cursor {opacity: 0.2;}.ace_hasPlaceholder .ace_hidden-cursors .ace_cursor {opacity: 0;}.ace_smooth-blinking .ace_cursor {transition: opacity 0.18s;}.ace_animate-blinking .ace_cursor {animation-duration: 1000ms;animation-timing-function: step-end;animation-name: blink-ace-animate;animation-iteration-count: infinite;}.ace_animate-blinking.ace_smooth-blinking .ace_cursor {animation-duration: 1000ms;animation-timing-function: ease-in-out;animation-name: blink-ace-animate-smooth;}@keyframes blink-ace-animate {from, to { opacity: 1; }60% { opacity: 0; }}@keyframes blink-ace-animate-smooth {from, to { opacity: 1; }45% { opacity: 1; }60% { opacity: 0; }85% { opacity: 0; }}.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {position: absolute;z-index: 3;}.ace_marker-layer .ace_selection {position: absolute;z-index: 5;}.ace_marker-layer .ace_bracket {position: absolute;z-index: 6;}.ace_marker-layer .ace_error_bracket {position: absolute;border-bottom: 1px solid #DE5555;border-radius: 0;}.ace_marker-layer .ace_active-line {position: absolute;z-index: 2;}.ace_marker-layer .ace_selected-word {position: absolute;z-index: 4;box-sizing: border-box;}.ace_line .ace_fold {box-sizing: border-box;display: inline-block;height: 11px;margin-top: -2px;vertical-align: middle;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");background-repeat: no-repeat, repeat-x;background-position: center center, top left;color: transparent;border: 1px solid black;border-radius: 2px;cursor: pointer;pointer-events: auto;}.ace_dark .ace_fold {}.ace_fold:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");}.ace_tooltip {background-color: #FFF;background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));border: 1px solid gray;border-radius: 1px;box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);color: black;max-width: 100%;padding: 3px 4px;position: fixed;z-index: 999999;box-sizing: border-box;cursor: default;white-space: pre;word-wrap: break-word;line-height: normal;font-style: normal;font-weight: normal;letter-spacing: normal;pointer-events: none;}.ace_folding-enabled > .ace_gutter-cell {padding-right: 13px;}.ace_fold-widget {box-sizing: border-box;margin: 0 -12px 0 1px;display: none;width: 11px;vertical-align: top;background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: center;border-radius: 3px;border: 1px solid transparent;cursor: pointer;}.ace_folding-enabled .ace_fold-widget {display: inline-block;   }.ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");}.ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");}.ace_fold-widget:hover {border: 1px solid rgba(0, 0, 0, 0.3);background-color: rgba(255, 255, 255, 0.2);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);}.ace_fold-widget:active {border: 1px solid rgba(0, 0, 0, 0.4);background-color: rgba(0, 0, 0, 0.05);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);}.ace_dark .ace_fold-widget {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");}.ace_dark .ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget:hover {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);background-color: rgba(255, 255, 255, 0.1);}.ace_dark .ace_fold-widget:active {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);}.ace_inline_button {border: 1px solid lightgray;display: inline-block;margin: -1px 8px;padding: 0 5px;pointer-events: auto;cursor: pointer;}.ace_inline_button:hover {border-color: gray;background: rgba(200,200,200,0.2);display: inline-block;pointer-events: auto;}.ace_fold-widget.ace_invalid {background-color: #FFB4B4;border-color: #DE5555;}.ace_fade-fold-widgets .ace_fold-widget {transition: opacity 0.4s ease 0.05s;opacity: 0;}.ace_fade-fold-widgets:hover .ace_fold-widget {transition: opacity 0.05s ease 0.05s;opacity:1;}.ace_underline {text-decoration: underline;}.ace_bold {font-weight: bold;}.ace_nobold .ace_bold {font-weight: normal;}.ace_italic {font-style: italic;}.ace_error-marker {background-color: rgba(255, 0, 0,0.2);position: absolute;z-index: 9;}.ace_highlight-marker {background-color: rgba(255, 255, 0,0.2);position: absolute;z-index: 8;}.ace_mobile-menu {position: absolute;line-height: 1.5;border-radius: 4px;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;background: white;box-shadow: 1px 3px 2px grey;border: 1px solid #dcdcdc;color: black;}.ace_dark > .ace_mobile-menu {background: #333;color: #ccc;box-shadow: 1px 3px 2px grey;border: 1px solid #444;}.ace_mobile-button {padding: 2px;cursor: pointer;overflow: hidden;}.ace_mobile-button:hover {background-color: #eee;opacity:1;}.ace_mobile-button:active {background-color: #ddd;}.ace_placeholder {font-family: arial;transform: scale(0.9);transform-origin: left;white-space: pre;opacity: 0.7;margin: 0 10px;}',x=e("./lib/useragent"),E=x.isIE;a.importCssString(k,"ace_editor.css");var A=function(e,t){var n=this;this.container=e||a.createElement("div"),a.addCssClass(this.container,"ace_editor"),a.HI_DPI&&a.addCssClass(this.container,"ace_hidpi"),this.setTheme(t),this.$gutter=a.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.$gutter.setAttribute("aria-hidden",!0),this.scroller=a.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=a.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new d(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new h(this.content);var r=this.$textLayer=new f(this.content);this.canvas=r.element,this.$markerFront=new h(this.content),this.$cursorLayer=new p(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new w(this.container,this),this.scrollBarH=new y(this.container,this),this.scrollBarV.on("scroll",(function(e){n.$scrollAnimation||n.session.setScrollTop(e.data-n.scrollMargin.top)})),this.scrollBarH.on("scroll",(function(e){n.$scrollAnimation||n.session.setScrollLeft(e.data-n.scrollMargin.left)})),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new C(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.on("changeCharacterSize",(function(e){n.updateCharacterSize(),n.onResize(!0,n.gutterWidth,n.$size.width,n.$size.height),n._signal("changeCharacterSize",e)})),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.margin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$keepTextAreaAtCursor=!x.isIOS,this.$loop=new _(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),l.resetOptions(this),l._signal("renderer",this)};(function(){this.CHANGE_CURSOR=1,this.CHANGE_MARKER=2,this.CHANGE_GUTTER=4,this.CHANGE_SCROLL=8,this.CHANGE_LINES=16,this.CHANGE_TEXT=32,this.CHANGE_SIZE=64,this.CHANGE_MARKER_BACK=128,this.CHANGE_MARKER_FRONT=256,this.CHANGE_FULL=512,this.CHANGE_H_SCROLL=1024,r.implement(this,S),this.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin(),a.setStyle(this.scroller.style,"line-height",this.lineHeight+"px")},this.setSession=function(e){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=e,e&&this.scrollMargin.top&&e.getScrollTop()<=0&&e.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(e),this.$markerBack.setSession(e),this.$markerFront.setSession(e),this.$gutterLayer.setSession(e),this.$textLayer.setSession(e),e&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},this.updateLines=function(e,t,n){if(void 0===t&&(t=1/0),this.$changedLines?(this.$changedLines.firstRow>e&&(this.$changedLines.firstRow=e),this.$changedLines.lastRow<t&&(this.$changedLines.lastRow=t)):this.$changedLines={firstRow:e,lastRow:t},this.$changedLines.lastRow<this.layerConfig.firstRow){if(!n)return;this.$changedLines.lastRow=this.layerConfig.lastRow}this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},this.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar(),this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR)},this.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},this.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},this.updateFull=function(e){e?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},this.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},this.$changes=0,this.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},this.onResize=function(e,t,n,r){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=e?1:0;var a=this.container;r||(r=a.clientHeight||a.scrollHeight),n||(n=a.clientWidth||a.scrollWidth);var l=this.$updateCachedSize(e,t,n,r);if(!this.$size.scrollerHeight||!n&&!r)return this.resizing=0;e&&(this.$gutterLayer.$padding=null),e?this.$renderChanges(l|this.$changes,!0):this.$loop.schedule(l|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarV.scrollLeft=this.scrollBarV.scrollTop=null}},this.$updateCachedSize=function(e,t,n,r){r-=this.$extraHeight||0;var l=0,d=this.$size,h={width:d.width,height:d.height,scrollerHeight:d.scrollerHeight,scrollerWidth:d.scrollerWidth};if(r&&(e||d.height!=r)&&(d.height=r,l|=this.CHANGE_SIZE,d.scrollerHeight=d.height,this.$horizScroll&&(d.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",l|=this.CHANGE_SCROLL),n&&(e||d.width!=n)){l|=this.CHANGE_SIZE,d.width=n,null==t&&(t=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=t,a.setStyle(this.scrollBarH.element.style,"left",t+"px"),a.setStyle(this.scroller.style,"left",t+this.margin.left+"px"),d.scrollerWidth=Math.max(0,n-t-this.scrollBarV.getWidth()-this.margin.h),a.setStyle(this.$gutter.style,"left",this.margin.left+"px");var f=this.scrollBarV.getWidth()+"px";a.setStyle(this.scrollBarH.element.style,"right",f),a.setStyle(this.scroller.style,"right",f),a.setStyle(this.scroller.style,"bottom",this.scrollBarH.getHeight()),(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||e)&&(l|=this.CHANGE_FULL)}return d.$dirty=!n||!r,l&&this._signal("resize",h),l},this.onGutterResize=function(e){var t=this.$showGutter?e:0;t!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,t,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()||this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):this.$computeLayerConfig()},this.adjustWrapLimit=function(){var e=this.$size.scrollerWidth-2*this.$padding,t=Math.floor(e/this.characterWidth);return this.session.adjustWrapLimit(t,this.$showPrintMargin&&this.$printMarginColumn)},this.setAnimatedScroll=function(e){this.setOption("animatedScroll",e)},this.getAnimatedScroll=function(){return this.$animatedScroll},this.setShowInvisibles=function(e){this.setOption("showInvisibles",e),this.session.$bidiHandler.setShowInvisibles(e)},this.getShowInvisibles=function(){return this.getOption("showInvisibles")},this.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},this.setDisplayIndentGuides=function(e){this.setOption("displayIndentGuides",e)},this.setShowPrintMargin=function(e){this.setOption("showPrintMargin",e)},this.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},this.setPrintMarginColumn=function(e){this.setOption("printMarginColumn",e)},this.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},this.getShowGutter=function(){return this.getOption("showGutter")},this.setShowGutter=function(e){return this.setOption("showGutter",e)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.setFadeFoldWidgets=function(e){this.setOption("fadeFoldWidgets",e)},this.setHighlightGutterLine=function(e){this.setOption("highlightGutterLine",e)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.$updatePrintMargin=function(){if(this.$showPrintMargin||this.$printMarginEl){if(!this.$printMarginEl){var e=a.createElement("div");e.className="ace_layer ace_print-margin-layer",this.$printMarginEl=a.createElement("div"),this.$printMarginEl.className="ace_print-margin",e.appendChild(this.$printMarginEl),this.content.insertBefore(e,this.content.firstChild)}var t=this.$printMarginEl.style;t.left=Math.round(this.characterWidth*this.$printMarginColumn+this.$padding)+"px",t.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&-1==this.session.$wrap&&this.adjustWrapLimit()}},this.getContainerElement=function(){return this.container},this.getMouseEventTarget=function(){return this.scroller},this.getTextAreaContainer=function(){return this.container},this.$moveTextAreaToCursor=function(){if(!this.$isMousePressed){var e=this.textarea.style,t=this.$composition;if(this.$keepTextAreaAtCursor||t){var n=this.$cursorLayer.$pixelPos;if(n){t&&t.markerRange&&(n=this.$cursorLayer.getPixelPosition(t.markerRange.start,!0));var r=this.layerConfig,l=n.top,d=n.left;l-=r.offset;var h=t&&t.useTextareaForIME?this.lineHeight:E?0:1;if(l<0||l>r.height-h)a.translate(this.textarea,0,0);else{var f=1,p=this.$size.height-h;if(t)if(t.useTextareaForIME){var y=this.textarea.value;f=this.characterWidth*this.session.$getStringScreenWidth(y)[0]}else l+=this.lineHeight+2;else l+=this.lineHeight;(d-=this.scrollLeft)>this.$size.scrollerWidth-f&&(d=this.$size.scrollerWidth-f),d+=this.gutterWidth+this.margin.left,a.setStyle(e,"height",h+"px"),a.setStyle(e,"width",f+"px"),a.translate(this.textarea,Math.min(d,this.$size.scrollerWidth-f),Math.min(l,p))}}}else a.translate(this.textarea,-100,0)}},this.getFirstVisibleRow=function(){return this.layerConfig.firstRow},this.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(0===this.layerConfig.offset?0:1)},this.getLastFullyVisibleRow=function(){var e=this.layerConfig,t=e.lastRow;return this.session.documentToScreenRow(t,0)*e.lineHeight-this.session.getScrollTop()>e.height-e.lineHeight?t-1:t},this.getLastVisibleRow=function(){return this.layerConfig.lastRow},this.$padding=null,this.setPadding=function(e){this.$padding=e,this.$textLayer.setPadding(e),this.$cursorLayer.setPadding(e),this.$markerFront.setPadding(e),this.$markerBack.setPadding(e),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},this.setScrollMargin=function(e,t,n,r){var a=this.scrollMargin;a.top=0|e,a.bottom=0|t,a.right=0|r,a.left=0|n,a.v=a.top+a.bottom,a.h=a.left+a.right,a.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-a.top),this.updateFull()},this.setMargin=function(e,t,n,r){var a=this.margin;a.top=0|e,a.bottom=0|t,a.right=0|r,a.left=0|n,a.v=a.top+a.bottom,a.h=a.left+a.right,this.$updateCachedSize(!0,this.gutterWidth,this.$size.width,this.$size.height),this.updateFull()},this.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},this.setHScrollBarAlwaysVisible=function(e){this.setOption("hScrollBarAlwaysVisible",e)},this.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},this.setVScrollBarAlwaysVisible=function(e){this.setOption("vScrollBarAlwaysVisible",e)},this.$updateScrollBarV=function(){var e=this.layerConfig.maxHeight,t=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(e-=(t-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>e-t&&(e=this.scrollTop+t,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(e+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},this.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},this.$frozen=!1,this.freeze=function(){this.$frozen=!0},this.unfreeze=function(){this.$frozen=!1},this.$renderChanges=function(e,t){if(this.$changes&&(e|=this.$changes,this.$changes=0),this.session&&this.container.offsetWidth&&!this.$frozen&&(e||t)){if(this.$size.$dirty)return this.$changes|=e,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender",e),this.session&&this.session.$bidiHandler&&this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);var n=this.layerConfig;if(e&this.CHANGE_FULL||e&this.CHANGE_SIZE||e&this.CHANGE_TEXT||e&this.CHANGE_LINES||e&this.CHANGE_SCROLL||e&this.CHANGE_H_SCROLL){if(e|=this.$computeLayerConfig()|this.$loop.clear(),n.firstRow!=this.layerConfig.firstRow&&n.firstRowScreen==this.layerConfig.firstRowScreen){var r=this.scrollTop+(n.firstRow-this.layerConfig.firstRow)*this.lineHeight;r>0&&(this.scrollTop=r,e|=this.CHANGE_SCROLL,e|=this.$computeLayerConfig()|this.$loop.clear())}n=this.layerConfig,this.$updateScrollBarV(),e&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),a.translate(this.content,-this.scrollLeft,-n.offset);var l=n.width+2*this.$padding+"px",d=n.minHeight+"px";a.setStyle(this.content.style,"width",l),a.setStyle(this.content.style,"height",d)}if(e&this.CHANGE_H_SCROLL&&(a.translate(this.content,-this.scrollLeft,-n.offset),this.scroller.className=this.scrollLeft<=0?"ace_scroller":"ace_scroller ace_scroll-left"),e&this.CHANGE_FULL)return this.$changedLines=null,this.$textLayer.update(n),this.$showGutter&&this.$gutterLayer.update(n),this.$markerBack.update(n),this.$markerFront.update(n),this.$cursorLayer.update(n),this.$moveTextAreaToCursor(),void this._signal("afterRender",e);if(e&this.CHANGE_SCROLL)return this.$changedLines=null,e&this.CHANGE_TEXT||e&this.CHANGE_LINES?this.$textLayer.update(n):this.$textLayer.scrollLines(n),this.$showGutter&&(e&this.CHANGE_GUTTER||e&this.CHANGE_LINES?this.$gutterLayer.update(n):this.$gutterLayer.scrollLines(n)),this.$markerBack.update(n),this.$markerFront.update(n),this.$cursorLayer.update(n),this.$moveTextAreaToCursor(),void this._signal("afterRender",e);e&this.CHANGE_TEXT?(this.$changedLines=null,this.$textLayer.update(n),this.$showGutter&&this.$gutterLayer.update(n)):e&this.CHANGE_LINES?(this.$updateLines()||e&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(n):e&this.CHANGE_TEXT||e&this.CHANGE_GUTTER?this.$showGutter&&this.$gutterLayer.update(n):e&this.CHANGE_CURSOR&&this.$highlightGutterLine&&this.$gutterLayer.updateLineHighlight(n),e&this.CHANGE_CURSOR&&(this.$cursorLayer.update(n),this.$moveTextAreaToCursor()),e&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(n),e&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(n),this._signal("afterRender",e)}else this.$changes|=e},this.$autosize=function(){var e=this.session.getScreenLength()*this.lineHeight,t=this.$maxLines*this.lineHeight,n=Math.min(t,Math.max((this.$minLines||1)*this.lineHeight,e))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(n+=this.scrollBarH.getHeight()),this.$maxPixelHeight&&n>this.$maxPixelHeight&&(n=this.$maxPixelHeight);var r=!(n<=2*this.lineHeight)&&e>t;if(n!=this.desiredHeight||this.$size.height!=this.desiredHeight||r!=this.$vScroll){r!=this.$vScroll&&(this.$vScroll=r,this.scrollBarV.setVisible(r));var a=this.container.clientWidth;this.container.style.height=n+"px",this.$updateCachedSize(!0,this.$gutterWidth,a,n),this.desiredHeight=n,this._signal("autosize")}},this.$computeLayerConfig=function(){var e=this.session,t=this.$size,n=t.height<=2*this.lineHeight,r=this.session.getScreenLength()*this.lineHeight,a=this.$getLongestLine(),l=!n&&(this.$hScrollBarAlwaysVisible||t.scrollerWidth-a-2*this.$padding<0),d=this.$horizScroll!==l;d&&(this.$horizScroll=l,this.scrollBarH.setVisible(l));var h=this.$vScroll;this.$maxLines&&this.lineHeight>1&&this.$autosize();var f=t.scrollerHeight+this.lineHeight,p=!this.$maxLines&&this.$scrollPastEnd?(t.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;r+=p;var y=this.scrollMargin;this.session.setScrollTop(Math.max(-y.top,Math.min(this.scrollTop,r-t.scrollerHeight+y.bottom))),this.session.setScrollLeft(Math.max(-y.left,Math.min(this.scrollLeft,a+2*this.$padding-t.scrollerWidth+y.right)));var w=!n&&(this.$vScrollBarAlwaysVisible||t.scrollerHeight-r+p<0||this.scrollTop>y.top),_=h!==w;_&&(this.$vScroll=w,this.scrollBarV.setVisible(w));var C,S,k=this.scrollTop%this.lineHeight,x=Math.ceil(f/this.lineHeight)-1,E=Math.max(0,Math.round((this.scrollTop-k)/this.lineHeight)),A=E+x,T=this.lineHeight;E=e.screenToDocumentRow(E,0);var R=e.getFoldLine(E);R&&(E=R.start.row),C=e.documentToScreenRow(E,0),S=e.getRowLength(E)*T,A=Math.min(e.screenToDocumentRow(A,0),e.getLength()-1),f=t.scrollerHeight+e.getRowLength(A)*T+S,k=this.scrollTop-C*T;var O=0;return(this.layerConfig.width!=a||d)&&(O=this.CHANGE_H_SCROLL),(d||_)&&(O|=this.$updateCachedSize(!0,this.gutterWidth,t.width,t.height),this._signal("scrollbarVisibilityChanged"),_&&(a=this.$getLongestLine())),this.layerConfig={width:a,padding:this.$padding,firstRow:E,firstRowScreen:C,lastRow:A,lineHeight:T,characterWidth:this.characterWidth,minHeight:f,maxHeight:r,offset:k,gutterOffset:T?Math.max(0,Math.ceil((k+t.height-t.scrollerHeight)/T)):0,height:this.$size.scrollerHeight},this.session.$bidiHandler&&this.session.$bidiHandler.setContentWidth(a-this.$padding),O},this.$updateLines=function(){if(this.$changedLines){var e=this.$changedLines.firstRow,t=this.$changedLines.lastRow;this.$changedLines=null;var n=this.layerConfig;if(!(e>n.lastRow+1||t<n.firstRow))return t===1/0?(this.$showGutter&&this.$gutterLayer.update(n),void this.$textLayer.update(n)):(this.$textLayer.updateLines(n,e,t),!0)}},this.$getLongestLine=function(){var e=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(e+=1),this.$textLayer&&e>this.$textLayer.MAX_LINE_LENGTH&&(e=this.$textLayer.MAX_LINE_LENGTH+30),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(e*this.characterWidth))},this.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},this.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},this.addGutterDecoration=function(e,t){this.$gutterLayer.addGutterDecoration(e,t)},this.removeGutterDecoration=function(e,t){this.$gutterLayer.removeGutterDecoration(e,t)},this.updateBreakpoints=function(e){this.$loop.schedule(this.CHANGE_GUTTER)},this.setAnnotations=function(e){this.$gutterLayer.setAnnotations(e),this.$loop.schedule(this.CHANGE_GUTTER)},this.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},this.hideCursor=function(){this.$cursorLayer.hideCursor()},this.showCursor=function(){this.$cursorLayer.showCursor()},this.scrollSelectionIntoView=function(e,t,n){this.scrollCursorIntoView(e,n),this.scrollCursorIntoView(t,n)},this.scrollCursorIntoView=function(e,t,n){if(0!==this.$size.scrollerHeight){var r=this.$cursorLayer.getPixelPosition(e),a=r.left,l=r.top,d=n&&n.top||0,h=n&&n.bottom||0,f=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;f+d>l?(t&&f+d>l+this.lineHeight&&(l-=t*this.$size.scrollerHeight),0===l&&(l=-this.scrollMargin.top),this.session.setScrollTop(l)):f+this.$size.scrollerHeight-h<l+this.lineHeight&&(t&&f+this.$size.scrollerHeight-h<l-this.lineHeight&&(l+=t*this.$size.scrollerHeight),this.session.setScrollTop(l+this.lineHeight+h-this.$size.scrollerHeight));var p=this.scrollLeft;p>a?(a<this.$padding+2*this.layerConfig.characterWidth&&(a=-this.scrollMargin.left),this.session.setScrollLeft(a)):p+this.$size.scrollerWidth<a+this.characterWidth?this.session.setScrollLeft(Math.round(a+this.characterWidth-this.$size.scrollerWidth)):p<=this.$padding&&a-p<this.characterWidth&&this.session.setScrollLeft(0)}},this.getScrollTop=function(){return this.session.getScrollTop()},this.getScrollLeft=function(){return this.session.getScrollLeft()},this.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},this.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},this.scrollToRow=function(e){this.session.setScrollTop(e*this.lineHeight)},this.alignCursor=function(e,t){"number"==typeof e&&(e={row:e,column:0});var n=this.$cursorLayer.getPixelPosition(e),r=this.$size.scrollerHeight-this.lineHeight,a=n.top-r*(t||0);return this.session.setScrollTop(a),a},this.STEPS=8,this.$calcSteps=function(e,t){var n,r,a=0,l=this.STEPS,d=[];for(a=0;a<l;++a)d.push((n=a/this.STEPS,r=e,(t-e)*(Math.pow(n-1,3)+1)+r));return d},this.scrollToLine=function(e,t,n,r){var a=this.$cursorLayer.getPixelPosition({row:e,column:0}).top;t&&(a-=this.$size.scrollerHeight/2);var l=this.scrollTop;this.session.setScrollTop(a),!1!==n&&this.animateScrolling(l,r)},this.animateScrolling=function(e,t){var n=this.scrollTop;if(this.$animatedScroll){var r=this;if(e!=n){if(this.$scrollAnimation){var a=this.$scrollAnimation.steps;if(a.length&&(e=a[0])==n)return}var l=r.$calcSteps(e,n);this.$scrollAnimation={from:e,to:n,steps:l},clearInterval(this.$timer),r.session.setScrollTop(l.shift()),r.session.$scrollTop=n,this.$timer=setInterval((function(){if(!r.session)return clearInterval(r.$timer);l.length?(r.session.setScrollTop(l.shift()),r.session.$scrollTop=n):null!=n?(r.session.$scrollTop=-1,r.session.setScrollTop(n),n=null):(r.$timer=clearInterval(r.$timer),r.$scrollAnimation=null,t&&t())}),10)}}},this.scrollToY=function(e){this.scrollTop!==e&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=e)},this.scrollToX=function(e){this.scrollLeft!==e&&(this.scrollLeft=e),this.$loop.schedule(this.CHANGE_H_SCROLL)},this.scrollTo=function(e,t){this.session.setScrollTop(t),this.session.setScrollLeft(t)},this.scrollBy=function(e,t){t&&this.session.setScrollTop(this.session.getScrollTop()+t),e&&this.session.setScrollLeft(this.session.getScrollLeft()+e)},this.isScrollableBy=function(e,t){return t<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||(t>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||(e<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||(e>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right||void 0)))},this.pixelToScreenCoordinates=function(e,t){var n;if(this.$hasCssTransforms){n={top:0,left:0};var r=this.$fontMetrics.transformCoordinates([e,t]);e=r[1]-this.gutterWidth-this.margin.left,t=r[0]}else n=this.scroller.getBoundingClientRect();var a=e+this.scrollLeft-n.left-this.$padding,l=a/this.characterWidth,d=Math.floor((t+this.scrollTop-n.top)/this.lineHeight),h=this.$blockCursor?Math.floor(l):Math.round(l);return{row:d,column:h,side:l-h>0?1:-1,offsetX:a}},this.screenToTextCoordinates=function(e,t){var n;if(this.$hasCssTransforms){n={top:0,left:0};var r=this.$fontMetrics.transformCoordinates([e,t]);e=r[1]-this.gutterWidth-this.margin.left,t=r[0]}else n=this.scroller.getBoundingClientRect();var a=e+this.scrollLeft-n.left-this.$padding,l=a/this.characterWidth,d=this.$blockCursor?Math.floor(l):Math.round(l),h=Math.floor((t+this.scrollTop-n.top)/this.lineHeight);return this.session.screenToDocumentPosition(h,Math.max(d,0),a)},this.textToScreenCoordinates=function(e,t){var n=this.scroller.getBoundingClientRect(),r=this.session.documentToScreenPosition(e,t),a=this.$padding+(this.session.$bidiHandler.isBidiRow(r.row,e)?this.session.$bidiHandler.getPosLeft(r.column):Math.round(r.column*this.characterWidth)),l=r.row*this.lineHeight;return{pageX:n.left+a-this.scrollLeft,pageY:n.top+l-this.scrollTop}},this.visualizeFocus=function(){a.addCssClass(this.container,"ace_focus")},this.visualizeBlur=function(){a.removeCssClass(this.container,"ace_focus")},this.showComposition=function(e){this.$composition=e,e.cssText||(e.cssText=this.textarea.style.cssText),null==e.useTextareaForIME&&(e.useTextareaForIME=this.$useTextareaForIME),this.$useTextareaForIME?(a.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor(),this.$cursorLayer.element.style.display="none"):e.markerId=this.session.addMarker(e.markerRange,"ace_composition_marker","text")},this.setCompositionText=function(e){var t=this.session.selection.cursor;this.addToken(e,"composition_placeholder",t.row,t.column),this.$moveTextAreaToCursor()},this.hideComposition=function(){if(this.$composition){this.$composition.markerId&&this.session.removeMarker(this.$composition.markerId),a.removeCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText=this.$composition.cssText;var e=this.session.selection.cursor;this.removeExtraToken(e.row,e.column),this.$composition=null,this.$cursorLayer.element.style.display=""}},this.addToken=function(e,t,n,r){var a=this.session;a.bgTokenizer.lines[n]=null;var l={type:t,value:e},d=a.getTokens(n);if(null==r)d.push(l);else for(var h=0,f=0;f<d.length;f++){var p=d[f];if(r<=(h+=p.value.length)){var y=p.value.length-(h-r),w=p.value.slice(0,y),_=p.value.slice(y);d.splice(f,1,{type:p.type,value:w},l,{type:p.type,value:_});break}}this.updateLines(n,n)},this.removeExtraToken=function(e,t){this.updateLines(e,e)},this.setTheme=function(e,t){var n=this;if(this.$themeId=e,n._dispatchEvent("themeChange",{theme:e}),e&&"string"!=typeof e)d(e);else{var r=e||this.$options.theme.initialValue;l.loadModule(["theme",r],d)}function d(r){if(n.$themeId!=e)return t&&t();if(!r||!r.cssClass)throw new Error("couldn't load module "+e+" or it didn't call define");r.$id&&(n.$themeId=r.$id),a.importCssString(r.cssText,r.cssClass,n.container),n.theme&&a.removeCssClass(n.container,n.theme.cssClass);var l="padding"in r?r.padding:"padding"in(n.theme||{})?4:n.$padding;n.$padding&&l!=n.$padding&&n.setPadding(l),n.$theme=r.cssClass,n.theme=r,a.addCssClass(n.container,r.cssClass),a.setCssClass(n.container,"ace_dark",r.isDark),n.$size&&(n.$size.width=0,n.$updateSizeAsync()),n._dispatchEvent("themeLoaded",{theme:r}),t&&t()}},this.getTheme=function(){return this.$themeId},this.setStyle=function(e,t){a.setCssClass(this.container,e,!1!==t)},this.unsetStyle=function(e){a.removeCssClass(this.container,e)},this.setCursorStyle=function(e){a.setStyle(this.scroller.style,"cursor",e)},this.setMouseCursor=function(e){a.setStyle(this.scroller.style,"cursor",e)},this.attachToShadowRoot=function(){a.importCssString(k,"ace_editor.css",this.container)},this.destroy=function(){this.freeze(),this.$fontMetrics.destroy(),this.$cursorLayer.destroy(),this.removeAllListeners(),this.container.textContent=""}}).call(A.prototype),l.defineOptions(A.prototype,"renderer",{animatedScroll:{initialValue:!1},showInvisibles:{set:function(e){this.$textLayer.setShowInvisibles(e)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(e){"number"==typeof e&&(this.$printMarginColumn=e),this.$showPrintMargin=!!e,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(e){this.$gutter.style.display=e?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},fadeFoldWidgets:{set:function(e){a.setCssClass(this.$gutter,"ace_fade-fold-widgets",e)},initialValue:!1},showFoldWidgets:{set:function(e){this.$gutterLayer.setShowFoldWidgets(e),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(e){this.$textLayer.setDisplayIndentGuides(e)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightGutterLine:{set:function(e){this.$gutterLayer.setHighlightGutterLine(e),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},hScrollBarAlwaysVisible:{set:function(e){this.$hScrollBarAlwaysVisible&&this.$horizScroll||this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(e){this.$vScrollBarAlwaysVisible&&this.$vScroll||this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(e){"number"==typeof e&&(e+="px"),this.container.style.fontSize=e,this.updateFontSize()},initialValue:12},fontFamily:{set:function(e){this.container.style.fontFamily=e,this.updateFontSize()}},maxLines:{set:function(e){this.updateFull()}},minLines:{set:function(e){this.$minLines<562949953421311||(this.$minLines=0),this.updateFull()}},maxPixelHeight:{set:function(e){this.updateFull()},initialValue:0},scrollPastEnd:{set:function(e){e=+e||0,this.$scrollPastEnd!=e&&(this.$scrollPastEnd=e,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(e){this.$gutterLayer.$fixedWidth=!!e,this.$loop.schedule(this.CHANGE_GUTTER)}},theme:{set:function(e){this.setTheme(e)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0},hasCssTransforms:{},useTextareaForIME:{initialValue:!x.isMobile&&!x.isIE}}),t.VirtualRenderer=A})),ace.define("ace/worker/worker_client",[],(function(e,t,n){"use strict";var r=e("../lib/oop"),a=e("../lib/net"),l=e("../lib/event_emitter").EventEmitter,d=e("../config");function h(e){if("undefined"==typeof Worker)return{postMessage:function(){},terminate:function(){}};if(d.get("loadWorkerFromBlob")){var t=function(e){var t="importScripts('"+a.qualifyURL(e)+"');";try{return new Blob([t],{type:"application/javascript"})}catch(e){var n=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder);return n.append(t),n.getBlob("application/javascript")}}(e),n=(window.URL||window.webkitURL).createObjectURL(t);return new Worker(n)}return new Worker(e)}var f=function(e){e.postMessage||(e=this.$createWorkerFromOldConfig.apply(this,arguments)),this.$worker=e,this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){r.implement(this,l),this.$createWorkerFromOldConfig=function(t,n,r,a,l){if(e.nameToUrl&&!e.toUrl&&(e.toUrl=e.nameToUrl),d.get("packaged")||!e.toUrl)a=a||d.moduleUrl(n,"worker");else{var f=this.$normalizePath;a=a||f(e.toUrl("ace/worker/worker.js",null,"_"));var p={};t.forEach((function(t){p[t]=f(e.toUrl(t,null,"_").replace(/(\.js)?(\?.*)?$/,""))}))}return this.$worker=h(a),l&&this.send("importScripts",l),this.$worker.postMessage({init:!0,tlns:p,module:n,classname:r}),this.$worker},this.onMessage=function(e){var t=e.data;switch(t.type){case"event":this._signal(t.name,{data:t.data});break;case"call":var n=this.callbacks[t.id];n&&(n(t.data),delete this.callbacks[t.id]);break;case"error":this.reportError(t.data);break;case"log":window.console&&console.log&&console.log.apply(console,t.data)}},this.reportError=function(e){window.console&&console.error&&console.error(e)},this.$normalizePath=function(e){return a.qualifyURL(e)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(e,t){this.$worker.postMessage({command:e,args:t})},this.call=function(e,t,n){if(n){var r=this.callbackId++;this.callbacks[r]=n,t.push(r)}this.send(e,t)},this.emit=function(e,t){try{t.data&&t.data.err&&(t.data.err={message:t.data.err.message,stack:t.data.err.stack,code:t.data.err.code}),this.$worker.postMessage({event:e,data:{data:t.data}})}catch(e){console.error(e.stack)}},this.attachToDocument=function(e){this.$doc&&this.terminate(),this.$doc=e,this.call("setValue",[e.getValue()]),e.on("change",this.changeListener)},this.changeListener=function(e){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),"insert"==e.action?this.deltaQueue.push(e.start,e.lines):this.deltaQueue.push(e.start,e.end)},this.$sendDeltaQueue=function(){var e=this.deltaQueue;e&&(this.deltaQueue=null,e.length>50&&e.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:e}))}}).call(f.prototype);t.UIWorkerClient=function(e,t,n){var r=null,a=!1,h=Object.create(l),p=[],y=new f({messageBuffer:p,terminate:function(){},postMessage:function(e){p.push(e),r&&(a?setTimeout(w):w())}});y.setEmitSync=function(e){a=e};var w=function(){var e=p.shift();e.command?r[e.command].apply(r,e.args):e.event&&h._signal(e.event,e.data)};return h.postMessage=function(e){y.onMessage({data:e})},h.callback=function(e,t){this.postMessage({type:"call",id:t,data:e})},h.emit=function(e,t){this.postMessage({type:"event",name:e,data:t})},d.loadModule(["worker",t],(function(e){for(r=new e[n](h);p.length;)w()})),y},t.WorkerClient=f,t.createWorker=h})),ace.define("ace/placeholder",[],(function(e,t,n){"use strict";var r=e("./range").Range,a=e("./lib/event_emitter").EventEmitter,l=e("./lib/oop"),d=function(e,t,n,r,a,l){var d=this;this.length=t,this.session=e,this.doc=e.getDocument(),this.mainClass=a,this.othersClass=l,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate),this.$others=r,this.$onCursorChange=function(){setTimeout((function(){d.onCursorChange()}))},this.$pos=n;var h=e.getUndoManager().$undoStack||e.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=h.length,this.setup(),e.selection.on("changeCursor",this.$onCursorChange)};(function(){l.implement(this,a),this.setup=function(){var e=this,t=this.doc,n=this.session;this.selectionBefore=n.selection.toJSON(),n.selection.inMultiSelectMode&&n.selection.toSingleRange(),this.pos=t.createAnchor(this.$pos.row,this.$pos.column);var a=this.pos;a.$insertRight=!0,a.detach(),a.markerId=n.addMarker(new r(a.row,a.column,a.row,a.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach((function(n){var r=t.createAnchor(n.row,n.column);r.$insertRight=!0,r.detach(),e.others.push(r)})),n.setUndoSelect(!1)},this.showOtherMarkers=function(){if(!this.othersActive){var e=this.session,t=this;this.othersActive=!0,this.others.forEach((function(n){n.markerId=e.addMarker(new r(n.row,n.column,n.row,n.column+t.length),t.othersClass,null,!1)}))}},this.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var e=0;e<this.others.length;e++)this.session.removeMarker(this.others[e].markerId)}},this.onUpdate=function(e){if(this.$updating)return this.updateAnchors(e);var t=e;if(t.start.row===t.end.row&&t.start.row===this.pos.row){this.$updating=!0;var n="insert"===e.action?t.end.column-t.start.column:t.start.column-t.end.column,a=t.start.column>=this.pos.column&&t.start.column<=this.pos.column+this.length+1,l=t.start.column-this.pos.column;if(this.updateAnchors(e),a&&(this.length+=n),a&&!this.session.$fromUndo)if("insert"===e.action)for(var d=this.others.length-1;d>=0;d--){var h={row:(f=this.others[d]).row,column:f.column+l};this.doc.insertMergedLines(h,e.lines)}else if("remove"===e.action)for(d=this.others.length-1;d>=0;d--){var f;h={row:(f=this.others[d]).row,column:f.column+l};this.doc.remove(new r(h.row,h.column,h.row,h.column-n))}this.$updating=!1,this.updateMarkers()}},this.updateAnchors=function(e){this.pos.onChange(e);for(var t=this.others.length;t--;)this.others[t].onChange(e);this.updateMarkers()},this.updateMarkers=function(){if(!this.$updating){var e=this,t=this.session,n=function(n,a){t.removeMarker(n.markerId),n.markerId=t.addMarker(new r(n.row,n.column,n.row,n.column+e.length),a,null,!1)};n(this.pos,this.mainClass);for(var a=this.others.length;a--;)n(this.others[a],this.othersClass)}},this.onCursorChange=function(e){if(!this.$updating&&this.session){var t=this.session.selection.getCursor();t.row===this.pos.row&&t.column>=this.pos.column&&t.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",e)):(this.hideOtherMarkers(),this._emit("cursorLeave",e))}},this.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.off("change",this.$onUpdate),this.session.selection.off("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},this.cancel=function(){if(-1!==this.$undoStackDepth){for(var e=this.session.getUndoManager(),t=(e.$undoStack||e.$undostack).length-this.$undoStackDepth,n=0;n<t;n++)e.undo(this.session,!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}}}).call(d.prototype),t.PlaceHolder=d})),ace.define("ace/mouse/multi_select_handler",[],(function(e,t,n){var r=e("../lib/event"),a=e("../lib/useragent");function l(e,t){return e.row==t.row&&e.column==t.column}t.onMouseDown=function(e){var t=e.domEvent,n=t.altKey,d=t.shiftKey,h=t.ctrlKey,f=e.getAccelKey(),p=e.getButton();if(h&&a.isMac&&(p=t.button),e.editor.inMultiSelectMode&&2==p)e.editor.textInput.onContextMenu(e.domEvent);else if(h||n||f){if(0===p){var y,w=e.editor,_=w.selection,C=w.inMultiSelectMode,S=e.getDocumentPosition(),k=_.getCursor(),x=e.inSelection()||_.isEmpty()&&l(S,k),E=e.x,A=e.y,T=w.session,R=w.renderer.pixelToScreenCoordinates(E,A),O=R;if(w.$mouseHandler.$enableJumpToDef)h&&n||f&&n?y=d?"block":"add":n&&w.$blockSelectEnabled&&(y="block");else if(f&&!n){if(y="add",!C&&d)return}else n&&w.$blockSelectEnabled&&(y="block");if(y&&a.isMac&&t.ctrlKey&&w.$mouseHandler.cancelContextMenu(),"add"==y){if(!C&&x)return;if(!C){var M=_.toOrientedRange();w.addSelectionMarker(M)}var P=_.rangeList.rangeAtPoint(S);w.inVirtualSelectionMode=!0,d&&(P=null,M=_.ranges[0]||M,w.removeSelectionMarker(M)),w.once("mouseup",(function(){var e=_.toOrientedRange();P&&e.isEmpty()&&l(P.cursor,e.cursor)?_.substractPoint(e.cursor):(d?_.substractPoint(M.cursor):M&&(w.removeSelectionMarker(M),_.addRange(M)),_.addRange(e)),w.inVirtualSelectionMode=!1}))}else if("block"==y){var L;e.stop(),w.inVirtualSelectionMode=!0;var D=[],I=function(){var e=w.renderer.pixelToScreenCoordinates(E,A),t=T.screenToDocumentPosition(e.row,e.column,e.offsetX);l(O,e)&&l(t,_.lead)||(O=e,w.selection.moveToPosition(t),w.renderer.scrollCursorIntoView(),w.removeSelectionMarkers(D),D=_.rectangularRangeBlock(O,R),w.$mouseHandler.$clickSelection&&1==D.length&&D[0].isEmpty()&&(D[0]=w.$mouseHandler.$clickSelection.clone()),D.forEach(w.addSelectionMarker,w),w.updateSelectionMarkers())};C&&!f?_.toSingleRange():!C&&f&&(L=_.toOrientedRange(),w.addSelectionMarker(L)),d?R=T.documentToScreenPosition(_.lead):_.moveToPosition(S),O={row:-1,column:-1};var F=I;r.capture(w.container,(function(e){E=e.clientX,A=e.clientY}),(function(e){I(),clearInterval(j),w.removeSelectionMarkers(D),D.length||(D=[_.toOrientedRange()]),L&&(w.removeSelectionMarker(L),_.toSingleRange(L));for(var t=0;t<D.length;t++)_.addRange(D[t]);w.inVirtualSelectionMode=!1,w.$mouseHandler.$clickSelection=null}));var j=setInterval((function(){F()}),20);return e.preventDefault()}}}else 0===p&&e.editor.inMultiSelectMode&&e.editor.exitMultiSelectMode()}})),ace.define("ace/commands/multi_select_commands",[],(function(e,t,n){t.defaultCommands=[{name:"addCursorAbove",description:"Add cursor above",exec:function(e){e.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",description:"Add cursor below",exec:function(e){e.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",description:"Add cursor above (skip current)",exec:function(e){e.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",description:"Add cursor below (skip current)",exec:function(e){e.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",description:"Select more before",exec:function(e){e.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",description:"Select more after",exec:function(e){e.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",description:"Select next before",exec:function(e){e.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",description:"Select next after",exec:function(e){e.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"toggleSplitSelectionIntoLines",description:"Split into lines",exec:function(e){e.multiSelect.rangeCount>1?e.multiSelect.joinSelections():e.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"splitSelectionIntoLines",description:"Split into lines",exec:function(e){e.multiSelect.splitIntoLines()},readOnly:!0},{name:"alignCursors",description:"Align cursors",exec:function(e){e.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",description:"Find all",exec:function(e){e.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],t.multiSelectCommands=[{name:"singleSelection",description:"Single selection",bindKey:"esc",exec:function(e){e.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(e){return e&&e.inMultiSelectMode}}];var r=e("../keyboard/hash_handler").HashHandler;t.keyboardHandler=new r(t.multiSelectCommands)})),ace.define("ace/multi_select",[],(function(e,t,n){var r=e("./range_list").RangeList,a=e("./range").Range,l=e("./selection").Selection,d=e("./mouse/multi_select_handler").onMouseDown,h=e("./lib/event"),f=e("./lib/lang"),p=e("./commands/multi_select_commands");t.commands=p.defaultCommands.concat(p.multiSelectCommands);var y=new(0,e("./search").Search);var w=e("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(w.prototype),function(){this.ranges=null,this.rangeList=null,this.addRange=function(e,t){if(e){if(!this.inMultiSelectMode&&0===this.rangeCount){var n=this.toOrientedRange();if(this.rangeList.add(n),this.rangeList.add(e),2!=this.rangeList.ranges.length)return this.rangeList.removeAll(),t||this.fromOrientedRange(e);this.rangeList.removeAll(),this.rangeList.add(n),this.$onAddRange(n)}e.cursor||(e.cursor=e.end);var r=this.rangeList.add(e);return this.$onAddRange(e),r.length&&this.$onRemoveRange(r),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),t||this.fromOrientedRange(e)}},this.toSingleRange=function(e){e=e||this.ranges[0];var t=this.rangeList.removeAll();t.length&&this.$onRemoveRange(t),e&&this.fromOrientedRange(e)},this.substractPoint=function(e){var t=this.rangeList.substractPoint(e);if(t)return this.$onRemoveRange(t),t[0]},this.mergeOverlappingRanges=function(){var e=this.rangeList.merge();e.length&&this.$onRemoveRange(e)},this.$onAddRange=function(e){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(e),this._signal("addRange",{range:e})},this.$onRemoveRange=function(e){if(this.rangeCount=this.rangeList.ranges.length,1==this.rangeCount&&this.inMultiSelectMode){var t=this.rangeList.ranges.pop();e.push(t),this.rangeCount=0}for(var n=e.length;n--;){var r=this.ranges.indexOf(e[n]);this.ranges.splice(r,1)}this._signal("removeRange",{ranges:e}),0===this.rangeCount&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),(t=t||this.ranges[0])&&!t.isEqual(this.getRange())&&this.fromOrientedRange(t)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new r,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){for(var e=this.ranges.length?this.ranges:[this.getRange()],t=[],n=0;n<e.length;n++){var r=e[n],l=r.start.row,d=r.end.row;if(l===d)t.push(r.clone());else{for(t.push(new a(l,r.start.column,l,this.session.getLine(l).length));++l<d;)t.push(this.getLineRange(l,!0));t.push(new a(d,0,d,r.end.column))}0!=n||this.isBackwards()||(t=t.reverse())}this.toSingleRange();for(n=t.length;n--;)this.addRange(t[n])},this.joinSelections=function(){var e=this.rangeList.ranges,t=e[e.length-1],n=a.fromPoints(e[0].start,t.end);this.toSingleRange(),this.setSelectionRange(n,t.cursor==t.start)},this.toggleBlockSelection=function(){if(this.rangeCount>1){var e=this.rangeList.ranges,t=e[e.length-1],n=a.fromPoints(e[0].start,t.end);this.toSingleRange(),this.setSelectionRange(n,t.cursor==t.start)}else{var r=this.session.documentToScreenPosition(this.cursor),l=this.session.documentToScreenPosition(this.anchor);this.rectangularRangeBlock(r,l).forEach(this.addRange,this)}},this.rectangularRangeBlock=function(e,t,n){var r=[],l=e.column<t.column;if(l)var d=e.column,h=t.column,f=e.offsetX,p=t.offsetX;else d=t.column,h=e.column,f=t.offsetX,p=e.offsetX;var y,w,_,C=e.row<t.row;if(C)var S=e.row,k=t.row;else S=t.row,k=e.row;d<0&&(d=0),S<0&&(S=0),S==k&&(n=!0);for(var x=S;x<=k;x++){var E=a.fromPoints(this.session.screenToDocumentPosition(x,d,f),this.session.screenToDocumentPosition(x,h,p));if(E.isEmpty()){if(y&&(w=E.end,_=y,w.row==_.row&&w.column==_.column))break;y=E.end}E.cursor=l?E.start:E.end,r.push(E)}if(C&&r.reverse(),!n){for(var A=r.length-1;r[A].isEmpty()&&A>0;)A--;if(A>0)for(var T=0;r[T].isEmpty();)T++;for(var R=A;R>=T;R--)r[R].isEmpty()&&r.splice(R,1)}return r}}.call(l.prototype);var _=e("./editor").Editor;function C(e){e.$multiselectOnSessionChange||(e.$onAddRange=e.$onAddRange.bind(e),e.$onRemoveRange=e.$onRemoveRange.bind(e),e.$onMultiSelect=e.$onMultiSelect.bind(e),e.$onSingleSelect=e.$onSingleSelect.bind(e),e.$multiselectOnSessionChange=t.onSessionChange.bind(e),e.$checkMultiselectChange=e.$checkMultiselectChange.bind(e),e.$multiselectOnSessionChange(e),e.on("changeSession",e.$multiselectOnSessionChange),e.on("mousedown",d),e.commands.addCommands(p.defaultCommands),function(e){if(!e.textInput)return;var t=e.textInput.getElement(),n=!1;function r(t){n&&(e.renderer.setMouseCursor(""),n=!1)}h.addListener(t,"keydown",(function(t){var a=18==t.keyCode&&!(t.ctrlKey||t.shiftKey||t.metaKey);e.$blockSelectEnabled&&a?n||(e.renderer.setMouseCursor("crosshair"),n=!0):n&&r()}),e),h.addListener(t,"keyup",r,e),h.addListener(t,"blur",r,e)}(e))}(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(e){e.cursor||(e.cursor=e.end);var t=this.getSelectionStyle();return e.marker=this.session.addMarker(e,"ace_selection",t),this.session.$selectionMarkers.push(e),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,e},this.removeSelectionMarker=function(e){if(e.marker){this.session.removeMarker(e.marker);var t=this.session.$selectionMarkers.indexOf(e);-1!=t&&this.session.$selectionMarkers.splice(t,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(e){for(var t=this.session.$selectionMarkers,n=e.length;n--;){var r=e[n];if(r.marker){this.session.removeMarker(r.marker);var a=t.indexOf(r);-1!=a&&t.splice(a,1)}}this.session.selectionMarkerCount=t.length},this.$onAddRange=function(e){this.addSelectionMarker(e.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(e){this.removeSelectionMarkers(e.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(e){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(p.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(e){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(p.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(e){var t=e.command,n=e.editor;if(n.multiSelect){if(t.multiSelectAction)"forEach"==t.multiSelectAction?r=n.forEachSelection(t,e.args):"forEachLine"==t.multiSelectAction?r=n.forEachSelection(t,e.args,!0):"single"==t.multiSelectAction?(n.exitMultiSelectMode(),r=t.exec(n,e.args||{})):r=t.multiSelectAction(n,e.args||{});else{var r=t.exec(n,e.args||{});n.multiSelect.addRange(n.multiSelect.toOrientedRange()),n.multiSelect.mergeOverlappingRanges()}return r}},this.forEachSelection=function(e,t,n){if(!this.inVirtualSelectionMode){var r,a=n&&n.keepOrder,d=1==n||n&&n.$byLines,h=this.session,f=this.selection,p=f.rangeList,y=(a?f:p).ranges;if(!y.length)return e.exec?e.exec(this,t||{}):e(this,t||{});var w=f._eventRegistry;f._eventRegistry={};var _=new l(h);this.inVirtualSelectionMode=!0;for(var C=y.length;C--;){if(d)for(;C>0&&y[C].start.row==y[C-1].end.row;)C--;_.fromOrientedRange(y[C]),_.index=C,this.selection=h.selection=_;var S=e.exec?e.exec(this,t||{}):e(this,t||{});r||void 0===S||(r=S),_.toOrientedRange(y[C])}_.detach(),this.selection=h.selection=f,this.inVirtualSelectionMode=!1,f._eventRegistry=w,f.mergeOverlappingRanges(),f.ranges[0]&&f.fromOrientedRange(f.ranges[0]);var k=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),k&&k.from==k.to&&this.renderer.animateScrolling(k.from),r}},this.exitMultiSelectMode=function(){this.inMultiSelectMode&&!this.inVirtualSelectionMode&&this.multiSelect.toSingleRange()},this.getSelectedText=function(){var e="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var t=this.multiSelect.rangeList.ranges,n=[],r=0;r<t.length;r++)n.push(this.session.getTextRange(t[r]));var a=this.session.getDocument().getNewLineCharacter();(e=n.join(a)).length==(n.length-1)*a.length&&(e="")}else this.selection.isEmpty()||(e=this.session.getTextRange(this.getSelectionRange()));return e},this.$checkMultiselectChange=function(e,t){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var n=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&t==this.multiSelect.anchor)return;var r=t==this.multiSelect.anchor?n.cursor==n.start?n.end:n.start:n.cursor;r.row!=t.row||this.session.$clipPositionToDocument(r.row,r.column).column!=t.column?this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange()):this.multiSelect.mergeOverlappingRanges()}},this.findAll=function(e,t,n){if((t=t||{}).needle=e||t.needle,null==t.needle){var r=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();t.needle=this.session.getTextRange(r)}this.$search.set(t);var a=this.$search.findAll(this.session);if(!a.length)return 0;var l=this.multiSelect;n||l.toSingleRange(a[0]);for(var d=a.length;d--;)l.addRange(a[d],!0);return r&&l.rangeList.rangeAtPoint(r.start)&&l.addRange(r,!0),a.length},this.selectMoreLines=function(e,t){var n=this.selection.toOrientedRange(),r=n.cursor==n.end,l=this.session.documentToScreenPosition(n.cursor);this.selection.$desiredColumn&&(l.column=this.selection.$desiredColumn);var d,h=this.session.screenToDocumentPosition(l.row+e,l.column);if(n.isEmpty())p=h;else var f=this.session.documentToScreenPosition(r?n.end:n.start),p=this.session.screenToDocumentPosition(f.row+e,f.column);r?(d=a.fromPoints(h,p)).cursor=d.start:(d=a.fromPoints(p,h)).cursor=d.end;if(d.desiredColumn=l.column,this.selection.inMultiSelectMode){if(t)var y=n.cursor}else this.selection.addRange(n);this.selection.addRange(d),y&&this.selection.substractPoint(y)},this.transposeSelections=function(e){for(var t=this.session,n=t.multiSelect,r=n.ranges,a=r.length;a--;){if((h=r[a]).isEmpty()){var l=t.getWordRange(h.start.row,h.start.column);h.start.row=l.start.row,h.start.column=l.start.column,h.end.row=l.end.row,h.end.column=l.end.column}}n.mergeOverlappingRanges();var d=[];for(a=r.length;a--;){var h=r[a];d.unshift(t.getTextRange(h))}e<0?d.unshift(d.pop()):d.push(d.shift());for(a=r.length;a--;){l=(h=r[a]).clone();t.replace(h,d[a]),h.start.row=l.start.row,h.start.column=l.start.column}n.fromOrientedRange(n.ranges[0])},this.selectMore=function(e,t,n){var r=this.session,a=r.multiSelect.toOrientedRange();if(!a.isEmpty()||((a=r.getWordRange(a.start.row,a.start.column)).cursor=-1==e?a.start:a.end,this.multiSelect.addRange(a),!n)){var l=r.getTextRange(a),d=function(e,t,n){return y.$options.wrap=!0,y.$options.needle=t,y.$options.backwards=-1==n,y.find(e)}(r,l,e);d&&(d.cursor=-1==e?d.start:d.end,this.session.unfold(d),this.multiSelect.addRange(d),this.renderer.scrollCursorIntoView(null,.5)),t&&this.multiSelect.substractPoint(a.cursor)}},this.alignCursors=function(){var e=this.session,t=e.multiSelect,n=t.ranges,r=-1,l=n.filter((function(e){if(e.cursor.row==r)return!0;r=e.cursor.row}));if(n.length&&l.length!=n.length-1){l.forEach((function(e){t.substractPoint(e.cursor)}));var d=0,h=1/0,p=n.map((function(t){var n=t.cursor,r=e.getLine(n.row).substr(n.column).search(/\S/g);return-1==r&&(r=0),n.column>d&&(d=n.column),r<h&&(h=r),r}));n.forEach((function(t,n){var r=t.cursor,l=d-r.column,y=p[n]-h;l>y?e.insert(r,f.stringRepeat(" ",l-y)):e.remove(new a(r.row,r.column,r.row,r.column-l+y)),t.start.column=t.end.column=d,t.start.row=t.end.row=r.row,t.cursor=t.end})),t.fromOrientedRange(n[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}else{var y=this.selection.getRange(),w=y.start.row,_=y.end.row,C=w==_;if(C){var S,k=this.session.getLength();do{S=this.session.getLine(_)}while(/[=:]/.test(S)&&++_<k);do{S=this.session.getLine(w)}while(/[=:]/.test(S)&&--w>0);w<0&&(w=0),_>=k&&(_=k-1)}var x=this.session.removeFullLines(w,_);x=this.$reAlignText(x,C),this.session.insert({row:w,column:0},x.join("\n")+"\n"),C||(y.start.column=0,y.end.column=x[x.length-1].length),this.selection.setRange(y)}},this.$reAlignText=function(e,t){var n,r,a,l=!0,d=!0;return e.map((function(e){var t=e.match(/(\s*)(.*?)(\s*)([=:].*)/);return t?null==n?(n=t[1].length,r=t[2].length,a=t[3].length,t):(n+r+a!=t[1].length+t[2].length+t[3].length&&(d=!1),n!=t[1].length&&(l=!1),n>t[1].length&&(n=t[1].length),r<t[2].length&&(r=t[2].length),a>t[3].length&&(a=t[3].length),t):[e]})).map(t?p:l?d?function(e){return e[2]?h(n+r-e[2].length)+e[2]+h(a)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}:p:function(e){return e[2]?h(n)+e[2]+h(a)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]});function h(e){return f.stringRepeat(" ",e)}function p(e){return e[2]?h(n)+e[2]+h(r-e[2].length+a)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}}}).call(_.prototype),t.onSessionChange=function(e){var t=e.session;t&&!t.multiSelect&&(t.$selectionMarkers=[],t.selection.$initRangeList(),t.multiSelect=t.selection),this.multiSelect=t&&t.multiSelect;var n=e.oldSession;n&&(n.multiSelect.off("addRange",this.$onAddRange),n.multiSelect.off("removeRange",this.$onRemoveRange),n.multiSelect.off("multiSelect",this.$onMultiSelect),n.multiSelect.off("singleSelect",this.$onSingleSelect),n.multiSelect.lead.off("change",this.$checkMultiselectChange),n.multiSelect.anchor.off("change",this.$checkMultiselectChange)),t&&(t.multiSelect.on("addRange",this.$onAddRange),t.multiSelect.on("removeRange",this.$onRemoveRange),t.multiSelect.on("multiSelect",this.$onMultiSelect),t.multiSelect.on("singleSelect",this.$onSingleSelect),t.multiSelect.lead.on("change",this.$checkMultiselectChange),t.multiSelect.anchor.on("change",this.$checkMultiselectChange)),t&&this.inMultiSelectMode!=t.selection.inMultiSelectMode&&(t.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())},t.MultiSelect=C,e("./config").defineOptions(_.prototype,"editor",{enableMultiselect:{set:function(e){C(this),e?(this.on("changeSession",this.$multiselectOnSessionChange),this.on("mousedown",d)):(this.off("changeSession",this.$multiselectOnSessionChange),this.off("mousedown",d))},value:!0},enableBlockSelect:{set:function(e){this.$blockSelectEnabled=e},value:!0}})})),ace.define("ace/mode/folding/fold_mode",[],(function(e,t,n){"use strict";var r=e("../../range").Range,a=t.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(e,t,n){var r=e.getLine(n);return this.foldingStartMarker.test(r)?"start":"markbeginend"==t&&this.foldingStopMarker&&this.foldingStopMarker.test(r)?"end":""},this.getFoldWidgetRange=function(e,t,n){return null},this.indentationBlock=function(e,t,n){var a=/\S/,l=e.getLine(t),d=l.search(a);if(-1!=d){for(var h=n||l.length,f=e.getLength(),p=t,y=t;++t<f;){var w=e.getLine(t).search(a);if(-1!=w){if(w<=d){var _=e.getTokenAt(t,0);if(!_||"string"!==_.type)break}y=t}}if(y>p){var C=e.getLine(y).length;return new r(p,h,y,C)}}},this.openingBracketBlock=function(e,t,n,a,l){var d={row:n,column:a+1},h=e.$findClosingBracket(t,d,l);if(h){var f=e.foldWidgets[h.row];return null==f&&(f=e.getFoldWidget(h.row)),"start"==f&&h.row>d.row&&(h.row--,h.column=e.getLine(h.row).length),r.fromPoints(d,h)}},this.closingBracketBlock=function(e,t,n,a,l){var d={row:n,column:a},h=e.$findOpeningBracket(t,d);if(h)return h.column++,d.column--,r.fromPoints(h,d)}}).call(a.prototype)})),ace.define("ace/theme/textmate",[],(function(e,t,n){"use strict";t.isDark=!1,t.cssClass="ace-tm",t.cssText='.ace-tm .ace_gutter {background: #f0f0f0;color: #333;}.ace-tm .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-tm .ace_fold {background-color: #6B72E6;}.ace-tm {background-color: #FFFFFF;color: black;}.ace-tm .ace_cursor {color: black;}.ace-tm .ace_invisible {color: rgb(191, 191, 191);}.ace-tm .ace_storage,.ace-tm .ace_keyword {color: blue;}.ace-tm .ace_constant {color: rgb(197, 6, 11);}.ace-tm .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-tm .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-tm .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-tm .ace_invalid {background-color: rgba(255, 0, 0, 0.1);color: red;}.ace-tm .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-tm .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-tm .ace_support.ace_type,.ace-tm .ace_support.ace_class {color: rgb(109, 121, 222);}.ace-tm .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-tm .ace_string {color: rgb(3, 106, 7);}.ace-tm .ace_comment {color: rgb(76, 136, 107);}.ace-tm .ace_comment.ace_doc {color: rgb(0, 102, 255);}.ace-tm .ace_comment.ace_doc.ace_tag {color: rgb(128, 159, 191);}.ace-tm .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-tm .ace_variable {color: rgb(49, 132, 149);}.ace-tm .ace_xml-pe {color: rgb(104, 104, 91);}.ace-tm .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-tm .ace_heading {color: rgb(12, 7, 255);}.ace-tm .ace_list {color:rgb(185, 6, 144);}.ace-tm .ace_meta.ace_tag {color:rgb(0, 22, 142);}.ace-tm .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-tm .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-tm.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px white;}.ace-tm .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-tm .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-tm .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-tm .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-tm .ace_gutter-active-line {background-color : #dcdcdc;}.ace-tm .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-tm .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}',t.$id="ace/theme/textmate",e("../lib/dom").importCssString(t.cssText,t.cssClass)})),ace.define("ace/line_widgets",[],(function(e,t,n){"use strict";var r=e("./lib/dom");function a(e){this.session=e,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}(function(){this.getRowLength=function(e){var t;return t=this.lineWidgets&&this.lineWidgets[e]&&this.lineWidgets[e].rowCount||0,this.$useWrapMode&&this.$wrapData[e]?this.$wrapData[e].length+1+t:1+t},this.$getWidgetScreenLength=function(){var e=0;return this.lineWidgets.forEach((function(t){t&&t.rowCount&&!t.hidden&&(e+=t.rowCount)})),e},this.$onChangeEditor=function(e){this.attach(e.editor)},this.attach=function(e){e&&e.widgetManager&&e.widgetManager!=this&&e.widgetManager.detach(),this.editor!=e&&(this.detach(),this.editor=e,e&&(e.widgetManager=this,e.renderer.on("beforeRender",this.measureWidgets),e.renderer.on("afterRender",this.renderWidgets)))},this.detach=function(e){var t=this.editor;if(t){this.editor=null,t.widgetManager=null,t.renderer.off("beforeRender",this.measureWidgets),t.renderer.off("afterRender",this.renderWidgets);var n=this.session.lineWidgets;n&&n.forEach((function(e){e&&e.el&&e.el.parentNode&&(e._inDocument=!1,e.el.parentNode.removeChild(e.el))}))}},this.updateOnFold=function(e,t){var n=t.lineWidgets;if(n&&e.action){for(var r=e.data,a=r.start.row,l=r.end.row,d="add"==e.action,h=a+1;h<l;h++)n[h]&&(n[h].hidden=d);n[l]&&(d?n[a]?n[l].hidden=d:n[a]=n[l]:(n[a]==n[l]&&(n[a]=void 0),n[l].hidden=d))}},this.updateOnChange=function(e){var t=this.session.lineWidgets;if(t){var n=e.start.row,r=e.end.row-n;if(0===r);else if("remove"==e.action){var a=t.splice(n+1,r);!t[n]&&a[a.length-1]&&(t[n]=a.pop()),a.forEach((function(e){e&&this.removeLineWidget(e)}),this),this.$updateRows()}else{var l=new Array(r);t[n]&&null!=t[n].column&&e.start.column>t[n].column&&n++,l.unshift(n,0),t.splice.apply(t,l),this.$updateRows()}}},this.$updateRows=function(){var e=this.session.lineWidgets;if(e){var t=!0;e.forEach((function(e,n){if(e)for(t=!1,e.row=n;e.$oldWidget;)e.$oldWidget.row=n,e=e.$oldWidget})),t&&(this.session.lineWidgets=null)}},this.$registerLineWidget=function(e){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var t=this.session.lineWidgets[e.row];return t&&(e.$oldWidget=t,t.el&&t.el.parentNode&&(t.el.parentNode.removeChild(t.el),t._inDocument=!1)),this.session.lineWidgets[e.row]=e,e},this.addLineWidget=function(e){if(this.$registerLineWidget(e),e.session=this.session,!this.editor)return e;var t=this.editor.renderer;e.html&&!e.el&&(e.el=r.createElement("div"),e.el.innerHTML=e.html),e.el&&(r.addCssClass(e.el,"ace_lineWidgetContainer"),e.el.style.position="absolute",e.el.style.zIndex=5,t.container.appendChild(e.el),e._inDocument=!0,e.coverGutter||(e.el.style.zIndex=3),null==e.pixelHeight&&(e.pixelHeight=e.el.offsetHeight)),null==e.rowCount&&(e.rowCount=e.pixelHeight/t.layerConfig.lineHeight);var n=this.session.getFoldAt(e.row,0);if(e.$fold=n,n){var a=this.session.lineWidgets;e.row!=n.end.row||a[n.start.row]?e.hidden=!0:a[n.start.row]=e}return this.session._emit("changeFold",{data:{start:{row:e.row}}}),this.$updateRows(),this.renderWidgets(null,t),this.onWidgetChanged(e),e},this.removeLineWidget=function(e){if(e._inDocument=!1,e.session=null,e.el&&e.el.parentNode&&e.el.parentNode.removeChild(e.el),e.editor&&e.editor.destroy)try{e.editor.destroy()}catch(e){}if(this.session.lineWidgets){var t=this.session.lineWidgets[e.row];if(t==e)this.session.lineWidgets[e.row]=e.$oldWidget,e.$oldWidget&&this.onWidgetChanged(e.$oldWidget);else for(;t;){if(t.$oldWidget==e){t.$oldWidget=e.$oldWidget;break}t=t.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:e.row}}}),this.$updateRows()},this.getWidgetsAtRow=function(e){for(var t=this.session.lineWidgets,n=t&&t[e],r=[];n;)r.push(n),n=n.$oldWidget;return r},this.onWidgetChanged=function(e){this.session._changedWidgets.push(e),this.editor&&this.editor.renderer.updateFull()},this.measureWidgets=function(e,t){var n=this.session._changedWidgets,r=t.layerConfig;if(n&&n.length){for(var a=1/0,l=0;l<n.length;l++){var d=n[l];if(d&&d.el&&d.session==this.session){if(!d._inDocument){if(this.session.lineWidgets[d.row]!=d)continue;d._inDocument=!0,t.container.appendChild(d.el)}d.h=d.el.offsetHeight,d.fixedWidth||(d.w=d.el.offsetWidth,d.screenWidth=Math.ceil(d.w/r.characterWidth));var h=d.h/r.lineHeight;d.coverLine&&(h-=this.session.getRowLineCount(d.row))<0&&(h=0),d.rowCount!=h&&(d.rowCount=h,d.row<a&&(a=d.row))}}a!=1/0&&(this.session._emit("changeFold",{data:{start:{row:a}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},this.renderWidgets=function(e,t){var n=t.layerConfig,r=this.session.lineWidgets;if(r){for(var a=Math.min(this.firstRow,n.firstRow),l=Math.max(this.lastRow,n.lastRow,r.length);a>0&&!r[a];)a--;this.firstRow=n.firstRow,this.lastRow=n.lastRow,t.$cursorLayer.config=n;for(var d=a;d<=l;d++){var h=r[d];if(h&&h.el)if(h.hidden)h.el.style.top=-100-(h.pixelHeight||0)+"px";else{h._inDocument||(h._inDocument=!0,t.container.appendChild(h.el));var f=t.$cursorLayer.getPixelPosition({row:d,column:0},!0).top;h.coverLine||(f+=n.lineHeight*this.session.getRowLineCount(h.row)),h.el.style.top=f-n.offset+"px";var p=h.coverGutter?0:t.gutterWidth;h.fixedWidth||(p-=t.scrollLeft),h.el.style.left=p+"px",h.fullWidth&&h.screenWidth&&(h.el.style.minWidth=n.width+2*n.padding+"px"),h.fixedWidth?h.el.style.right=t.scrollBar.getWidth()+"px":h.el.style.right=""}}}}}).call(a.prototype),t.LineWidgets=a})),ace.define("ace/ext/error_marker",[],(function(e,t,n){"use strict";var r=e("../line_widgets").LineWidgets,a=e("../lib/dom"),l=e("../range").Range;t.showErrorMarker=function(e,t){var n=e.session;n.widgetManager||(n.widgetManager=new r(n),n.widgetManager.attach(e));var d=e.getCursorPosition(),h=d.row,f=n.widgetManager.getWidgetsAtRow(h).filter((function(e){return"errorMarker"==e.type}))[0];f?f.destroy():h-=t;var p,y=function(e,t,n){var r=e.getAnnotations().sort(l.comparePoints);if(r.length){var a=function(e,t,n){for(var r=0,a=e.length-1;r<=a;){var l=r+a>>1,d=n(t,e[l]);if(d>0)r=l+1;else{if(!(d<0))return l;a=l-1}}return-(r+1)}(r,{row:t,column:-1},l.comparePoints);a<0&&(a=-a-1),a>=r.length?a=n>0?0:r.length-1:0===a&&n<0&&(a=r.length-1);var d=r[a];if(d&&n){if(d.row===t){do{d=r[a+=n]}while(d&&d.row===t);if(!d)return r.slice()}var h=[];t=d.row;do{h[n<0?"unshift":"push"](d),d=r[a+=n]}while(d&&d.row==t);return h.length&&h}}}(n,h,t);if(y){var w=y[0];d.column=(w.pos&&"number"!=typeof w.column?w.pos.sc:w.column)||0,d.row=w.row,p=e.renderer.$gutterLayer.$annotations[d.row]}else{if(f)return;p={text:["Looks good!"],className:"ace_ok"}}e.session.unfold(d.row),e.selection.moveToPosition(d);var _={row:d.row,fixedWidth:!0,coverGutter:!0,el:a.createElement("div"),type:"errorMarker"},C=_.el.appendChild(a.createElement("div")),S=_.el.appendChild(a.createElement("div"));S.className="error_widget_arrow "+p.className;var k=e.renderer.$cursorLayer.getPixelPosition(d).left;S.style.left=k+e.renderer.gutterWidth-5+"px",_.el.className="error_widget_wrapper",C.className="error_widget "+p.className,C.innerHTML=p.text.join("<br>"),C.appendChild(a.createElement("div"));var x=function(e,t,n){if(0===t&&("esc"===n||"return"===n))return _.destroy(),{command:"null"}};_.destroy=function(){e.$mouseHandler.isMousePressed||(e.keyBinding.removeKeyboardHandler(x),n.widgetManager.removeLineWidget(_),e.off("changeSelection",_.destroy),e.off("changeSession",_.destroy),e.off("mouseup",_.destroy),e.off("change",_.destroy))},e.keyBinding.addKeyboardHandler(x),e.on("changeSelection",_.destroy),e.on("changeSession",_.destroy),e.on("mouseup",_.destroy),e.on("change",_.destroy),e.session.widgetManager.addLineWidget(_),_.el.onmousedown=e.focus.bind(e),e.renderer.scrollCursorIntoView(null,.5,{bottom:_.el.offsetHeight})},a.importCssString("    .error_widget_wrapper {        background: inherit;        color: inherit;        border:none    }    .error_widget {        border-top: solid 2px;        border-bottom: solid 2px;        margin: 5px 0;        padding: 10px 40px;        white-space: pre-wrap;    }    .error_widget.ace_error, .error_widget_arrow.ace_error{        border-color: #ff5a5a    }    .error_widget.ace_warning, .error_widget_arrow.ace_warning{        border-color: #F1D817    }    .error_widget.ace_info, .error_widget_arrow.ace_info{        border-color: #5a5a5a    }    .error_widget.ace_ok, .error_widget_arrow.ace_ok{        border-color: #5aaa5a    }    .error_widget_arrow {        position: absolute;        border: solid 5px;        border-top-color: transparent!important;        border-right-color: transparent!important;        border-left-color: transparent!important;        top: -5px;    }","")})),ace.define("ace/ace",[],(function(e,t,r){"use strict";e("./lib/fixoldbrowsers");var a=e("./lib/dom"),l=e("./lib/event"),d=e("./range").Range,h=e("./editor").Editor,f=e("./edit_session").EditSession,p=e("./undomanager").UndoManager,y=e("./virtual_renderer").VirtualRenderer;e("./worker/worker_client"),e("./keyboard/hash_handler"),e("./placeholder"),e("./multi_select"),e("./mode/folding/fold_mode"),e("./theme/textmate"),e("./ext/error_marker"),t.config=e("./config"),t.require=e,t.define=n(407),t.edit=function(e,n){if("string"==typeof e){var r=e;if(!(e=document.getElementById(r)))throw new Error("ace.edit can't find div #"+r)}if(e&&e.env&&e.env.editor instanceof h)return e.env.editor;var d="";if(e&&/input|textarea/i.test(e.tagName)){var f=e;d=f.value,e=a.createElement("pre"),f.parentNode.replaceChild(e,f)}else e&&(d=e.textContent,e.innerHTML="");var p=t.createEditSession(d),w=new h(new y(e),p,n),_={document:p,editor:w,onResize:w.resize.bind(w,null)};return f&&(_.textarea=f),l.addListener(window,"resize",_.onResize),w.on("destroy",(function(){l.removeListener(window,"resize",_.onResize),_.editor.container.env=null})),w.container.env=w.env=_,w},t.createEditSession=function(e,t){var n=new f(e,t);return n.setUndoManager(new p),n},t.Range=d,t.Editor=h,t.EditSession=f,t.UndoManager=p,t.VirtualRenderer=y,t.version=t.config.version})),ace.require(["ace/ace"],(function(t){for(var n in t&&(t.config.init(!0),t.define=ace.define),window.ace||(window.ace=t),t)t.hasOwnProperty(n)&&(window.ace[n]=t[n]);window.ace.default=window.ace,e&&(e.exports=window.ace)}))}).call(this,n(68)(e))},function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return d}));n(10),n(31),n(77),n(6),n(27);var r=window.ExposedSettings.sentryDsn?Promise.resolve().then(n.bind(null,418)).then((function(e){var t=0;return e.init({dsn:window.ExposedSettings.sentryDsn,release:window.ExposedSettings.sentryRelease,whitelistUrls:[new RegExp(window.ExposedSettings.sentryAllowedOriginRegex)],ignoreErrors:['SecurityError: Permission denied to access property "pathname" on cross-origin object',/^Missing PDF/,/^AbortError/,"ResizeObserver loop limit exceeded","ResizeObserver loop completed with undelivered notifications."],beforeSend:function(e){return++t>100?null:e}}),e.setUser({id:window.user_id}),e})).catch(a):a();function a(){return Promise.resolve({captureException:function(e){console.error(e)},captureMessage:function(e){console.error(e)}})}function l(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.then((function(e){return e.captureException.apply(e,t)}))}function d(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.then((function(e){return e.captureMessage.apply(e,t)}))}},,,,,,function(e,t,n){(function(t){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||function(){return this}()||Function("return this")()}).call(this,n(39))},,function(e,t){var n=e.exports={version:"2.6.11"};"number"==typeof __e&&(__e=n)},,,function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=!("undefined"==typeof window||!window.document||!window.document.createElement);t.default=r,e.exports=t.default},,,,,,,,function(e,t,n){var r=n(345),a="object"==typeof self&&self&&self.Object===Object&&self,l=r||a||Function("return this")();e.exports=l},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){"use strict";var r=window.ExposedSettings;t.a=r},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));n(7);function r(e,t,n,r){var a,l="collaborator_free_trial_7_days",d=window.open();"function"==typeof ga&&ga("send","event","subscription-funnel","upgraded-free-trial",e),a="/user/subscription/new?planCode=".concat(l,"&ssp=true"),a="".concat(a,"&itm_campaign=").concat(e),t&&(a="".concat(a,"&itm_content=").concat(t)),n&&(n.startedFreeTrial=!0),r&&r.sendMB("subscription-start-trial",{source:e,plan:l}),d.location=a}function a(e,t){var n=window.open();"function"==typeof ga&&ga("send","event","subscription-funnel","upgraded-plan",e),t&&(t.startedFreeTrial=!0),n.location="/user/subscription"}},function(e,t){function n(e){if(e&&"object"==typeof e){var t=e.which||e.keyCode||e.charCode;t&&(e=t)}if("number"==typeof e)return d[e];var n,l=String(e);return(n=r[l.toLowerCase()])?n:(n=a[l.toLowerCase()])||(1===l.length?l.charCodeAt(0):void 0)}n.isEventKey=function(e,t){if(e&&"object"==typeof e){var n=e.which||e.keyCode||e.charCode;if(null==n)return!1;if("string"==typeof t){var l;if(l=r[t.toLowerCase()])return l===n;if(l=a[t.toLowerCase()])return l===n}else if("number"==typeof t)return t===n;return!1}};var r=(t=e.exports=n).code=t.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},a=t.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(l=97;l<123;l++)r[String.fromCharCode(l)]=l-32;for(var l=48;l<58;l++)r[l-48]=l;for(l=1;l<13;l++)r["f"+l]=l+111;for(l=0;l<10;l++)r["numpad "+l]=l+96;var d=t.names=t.title={};for(l in r)d[r[l]]=l;for(var h in a)r[h]=a[h]},,,,function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(146),a=n(72),l=n(389),d=n(187),h=n(191),f=function(e,t,n){var p,y,w,_=e&f.F,C=e&f.G,S=e&f.S,k=e&f.P,x=e&f.B,E=e&f.W,A=C?a:a[t]||(a[t]={}),T=A.prototype,R=C?r:S?r[t]:(r[t]||{}).prototype;for(p in C&&(n=t),n)(y=!_&&R&&void 0!==R[p])&&h(A,p)||(w=y?R[p]:n[p],A[p]=C&&"function"!=typeof R[p]?n[p]:x&&y?l(w,r):E&&R[p]==w?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(w):k&&"function"==typeof w?l(Function.call,w):w,k&&((A.virtual||(A.virtual={}))[p]=w,e&f.R&&T&&!T[p]&&d(T,p,w)))};f.F=1,f.G=2,f.S=4,f.P=8,f.B=16,f.W=32,f.U=64,f.R=128,e.exports=f},,function(e,t,n){"use strict";var r=n(40);t.__esModule=!0,t.default=void 0;var a=r(n(75)).default?function(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):l(e,t)}:l;function l(e,t){if(t)do{if(t===e)return!0}while(t=t.parentNode);return!1}t.default=a,e.exports=t.default},,,,,,,,function(e,t,n){var r=n(509),a=n(514);e.exports=function(e,t){var n=a(e,t);return r(n)?n:void 0}},function(e,t,n){var r=n(62);e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(e,t,n){var r=n(393)("wks"),a=n(395),l=n(146).Symbol,d="function"==typeof l;(e.exports=function(e){return r[e]||(r[e]=d&&l[e]||(d?l:a)("Symbol."+e))}).store=r},,function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){return e&&e.ownerDocument||document},e.exports=t.default},function(e,t,n){var r=n(729),a=n(411);"undefined"!=typeof window&&"Worker"in window&&(r.GlobalWorkerOptions.workerPort=new a),e.exports=r},,,function(e,t,n){var r=n(18),a=n(336);r({target:"Object",stat:!0,forced:Object.assign!==a},{assign:a})},,,,,,,,,,function(e,t,n){var r=n(70),a=n(363).f,l=n(144),d=n(366),h=n(260),f=n(612),p=n(617);e.exports=function(e,t){var n,y,w,_,C,S=e.target,k=e.global,x=e.stat;if(n=k?r:x?r[S]||h(S,{}):(r[S]||{}).prototype)for(y in t){if(_=t[y],w=e.noTargetGet?(C=a(n,y))&&C.value:n[y],!p(k?y:S+(x?".":"#")+y,e.forced)&&void 0!==w){if(typeof _==typeof w)continue;f(_,w)}(e.sham||w&&w.sham)&&l(_,"sham",!0),d(n,y,_,e)}}},function(e,t,n){var r=n(183);e.exports=function(e){return Object(r(e))}},function(e,t,n){e.exports=!n(190)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){return(0,a.default)(r.default.findDOMNode(e))};var r=l(n(38)),a=l(n(106));function l(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(t,n,r,a,l,d){var h=a||"<<anonymous>>",f=d||r;if(null==n[r])return t?new Error("Required "+l+" `"+f+"` was not specified in `"+h+"`."):null;for(var p=arguments.length,y=Array(p>6?p-6:0),w=6;w<p;w++)y[w-6]=arguments[w];return e.apply(void 0,[n,r,h,l,f].concat(y))}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n},e.exports=t.default},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];function r(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var a=null;return t.forEach((function(e){if(null==a){var t=e.apply(void 0,n);null!=t&&(a=t)}})),a}return(0,l.default)(r)};var r,a=n(124),l=(r=a)&&r.__esModule?r:{default:r};e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=M(n(277)),l=M(n(94)),d=M(n(75)),h=M(n(1)),f=M(n(194)),p=M(n(706)),y=M(n(25)),w=n(0),_=M(w),C=M(n(38)),S=M(n(147)),k=M(n(708)),x=M(n(402)),E=M(n(713)),A=M(n(401)),T=M(n(714)),R=M(n(195)),O=M(n(123));function M(e){return e&&e.__esModule?e:{default:e}}function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var D=new k.default,I=function(e){function t(){var n,r;P(this,t);for(var a=arguments.length,l=Array(a),d=0;d<a;d++)l[d]=arguments[d];return n=r=L(this,e.call.apply(e,[this].concat(l))),F.call(r),L(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.omitProps=function(e,t){var n=Object.keys(e),r={};return n.map((function(n){Object.prototype.hasOwnProperty.call(t,n)||(r[n]=e[n])})),r},t.prototype.render=function(){var e=this.props,n=e.show,a=e.container,l=e.children,d=e.transition,h=e.backdrop,f=e.className,p=e.style,y=e.onExit,C=e.onExiting,S=e.onEnter,k=e.onEntering,A=e.onEntered,T=_.default.Children.only(l),R=this.omitProps(this.props,t.propTypes);if(!(n||d&&!this.state.exited))return null;var O=T.props,M=O.role,P=O.tabIndex;return void 0!==M&&void 0!==P||(T=(0,w.cloneElement)(T,{role:void 0===M?"document":M,tabIndex:null==P?"-1":P})),d&&(T=_.default.createElement(d,{appear:!0,unmountOnExit:!0,in:n,onExit:y,onExiting:C,onExited:this.handleHidden,onEnter:S,onEntering:k,onEntered:A},T)),_.default.createElement(x.default,{ref:this.setMountNode,container:a,onRendered:this.onPortalRendered},_.default.createElement("div",r({ref:this.setModalNodeRef,role:M||"dialog"},R,{style:p,className:f}),h&&this.renderBackdrop(),_.default.createElement(E.default,{ref:this.setDialogRef},T)))},t.prototype.UNSAFE_componentWillReceiveProps=function(e){e.show?this.setState({exited:!1}):e.transition||this.setState({exited:!0})},t.prototype.UNSAFE_componentWillUpdate=function(e){!this.props.show&&e.show&&this.checkForFocus()},t.prototype.componentDidMount=function(){this._isMounted=!0,this.props.show&&this.onShow()},t.prototype.componentDidUpdate=function(e){var t=this.props.transition;!e.show||this.props.show||t?!e.show&&this.props.show&&this.onShow():this.onHide()},t.prototype.componentWillUnmount=function(){var e=this.props,t=e.show,n=e.transition;this._isMounted=!1,(t||n&&!this.state.exited)&&this.onHide()},t.prototype.autoFocus=function(){if(this.props.autoFocus){var e=this.getDialogElement(),t=(0,a.default)((0,O.default)(this));e&&!(0,l.default)(e,t)&&(this.lastFocus=t,e.hasAttribute("tabIndex")||((0,S.default)(!1,'The modal content node does not accept focus. For the benefit of assistive technologies, the tabIndex of the node is being set to "-1".'),e.setAttribute("tabIndex",-1)),e.focus())}},t.prototype.restoreLastFocus=function(){this.lastFocus&&this.lastFocus.focus&&(this.lastFocus.focus(),this.lastFocus=null)},t.prototype.getDialogElement=function(){return C.default.findDOMNode(this.dialog)},t.prototype.isTopModal=function(){return this.props.manager.isTopModal(this)},t}(_.default.Component);I.propTypes=r({},x.default.propTypes,{show:h.default.bool,container:h.default.oneOfType([f.default,h.default.func]),onShow:h.default.func,onHide:h.default.func,backdrop:h.default.oneOfType([h.default.bool,h.default.oneOf(["static"])]),renderBackdrop:h.default.func,onEscapeKeyDown:h.default.func,onEscapeKeyUp:(0,p.default)(h.default.func,"Please use onEscapeKeyDown instead for consistency"),onBackdropClick:h.default.func,backdropStyle:h.default.object,backdropClassName:h.default.string,containerClassName:h.default.string,keyboard:h.default.bool,transition:y.default,backdropTransition:y.default,autoFocus:h.default.bool,enforceFocus:h.default.bool,restoreFocus:h.default.bool,onEnter:h.default.func,onEntering:h.default.func,onEntered:h.default.func,onExit:h.default.func,onExiting:h.default.func,onExited:h.default.func,manager:h.default.object.isRequired}),I.defaultProps={show:!1,backdrop:!0,keyboard:!0,autoFocus:!0,enforceFocus:!0,restoreFocus:!0,onHide:function(){},manager:D,renderBackdrop:function(e){return _.default.createElement("div",e)}};var F=function(){var e=this;this.state={exited:!this.props.show},this.renderBackdrop=function(){var t=e.props,n=t.backdropStyle,r=t.backdropClassName,a=t.renderBackdrop,l=t.backdropTransition,d=a({ref:function(t){return e.backdrop=t},style:n,className:r,onClick:e.handleBackdropClick});return l&&(d=_.default.createElement(l,{appear:!0,in:e.props.show},d)),d},this.onPortalRendered=function(){e.autoFocus(),e.props.onShow&&e.props.onShow()},this.onShow=function(){var t=(0,O.default)(e),n=(0,R.default)(e.props.container,t.body);e.props.manager.add(e,n,e.props.containerClassName),e._onDocumentKeydownListener=(0,A.default)(t,"keydown",e.handleDocumentKeyDown),e._onDocumentKeyupListener=(0,A.default)(t,"keyup",e.handleDocumentKeyUp),e._onFocusinListener=(0,T.default)(e.enforceFocus)},this.onHide=function(){e.props.manager.remove(e),e._onDocumentKeydownListener.remove(),e._onDocumentKeyupListener.remove(),e._onFocusinListener.remove(),e.props.restoreFocus&&e.restoreLastFocus()},this.setMountNode=function(t){e.mountNode=t?t.getMountNode():t},this.setModalNodeRef=function(t){e.modalNode=t},this.setDialogRef=function(t){e.dialog=t},this.handleHidden=function(){var t;(e.setState({exited:!0}),e.onHide(),e.props.onExited)&&(t=e.props).onExited.apply(t,arguments)},this.handleBackdropClick=function(t){t.target===t.currentTarget&&(e.props.onBackdropClick&&e.props.onBackdropClick(t),!0===e.props.backdrop&&e.props.onHide())},this.handleDocumentKeyDown=function(t){e.props.keyboard&&27===t.keyCode&&e.isTopModal()&&(e.props.onEscapeKeyDown&&e.props.onEscapeKeyDown(t),e.props.onHide())},this.handleDocumentKeyUp=function(t){e.props.keyboard&&27===t.keyCode&&e.isTopModal()&&e.props.onEscapeKeyUp&&e.props.onEscapeKeyUp(t)},this.checkForFocus=function(){d.default&&(e.lastFocus=(0,a.default)())},this.enforceFocus=function(){if(e.props.enforceFocus&&e._isMounted&&e.isTopModal()){var t=e.getDialogElement(),n=(0,a.default)((0,O.default)(e));t&&!(0,l.default)(t,n)&&t.focus()}}};I.Manager=k.default,t.default=I,e.exports=t.default},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(t){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?e.exports=r=function(e){return n(e)}:e.exports=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},r(t)}e.exports=r},,,,,,,,,function(e,t,n){"use strict";function r(){try{var e;return(e=$).localStorage.apply(e,arguments)}catch(e){return console.error("localStorage exception",e),null}}angular.module("localStorage",[]).value("localStorage",r)},,,,function(e,t,n){var r=n(171),a=n(510),l=n(511),d=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":d&&d in Object(e)?a(e):l(e)}},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){var r=n(103),a=n(184),l=n(257);e.exports=r?function(e,t,n){return a.f(e,t,l(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){"use strict";e.exports=function(){}},,function(e,t,n){"use strict";e.exports=function(e,t,n,r,a,l,d,h){if(!e){var f;if(void 0===t)f=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var p=[n,r,a,l,d,h],y=0;(f=new Error(t.replace(/%s/g,(function(){return p[y++]})))).name="Invariant Violation"}throw f.framesToPop=1,f}}},,function(e,t,n){e.exports=n(665)},function(e,t,n){"use strict";n.d(t,"a",(function(){return Qe})),n.d(t,"b",(function(){return Ze}));var r=n(0),a=n(283),l=function(){return Math.random().toString(36).substring(7).split("").join(".")},d={INIT:"@@redux/INIT"+l(),REPLACE:"@@redux/REPLACE"+l(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+l()}};function h(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function f(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(f)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var l=e,p=t,y=[],w=y,_=!1;function C(){w===y&&(w=y.slice())}function S(){if(_)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return p}function k(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(_)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var t=!0;return C(),w.push(e),function(){if(t){if(_)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");t=!1,C();var n=w.indexOf(e);w.splice(n,1),y=null}}}function x(e){if(!h(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(_)throw new Error("Reducers may not dispatch actions.");try{_=!0,p=l(p,e)}finally{_=!1}for(var t=y=w,n=0;n<t.length;n++){(0,t[n])()}return e}function E(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");l=e,x({type:d.REPLACE})}function A(){var e,t=k;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function n(){e.next&&e.next(S())}return n(),{unsubscribe:t(n)}}})[a.a]=function(){return this},e}return x({type:d.INIT}),(r={dispatch:x,subscribe:k,getState:S,replaceReducer:E})[a.a]=A,r}var p="dnd-core/INIT_COORDS",y="dnd-core/BEGIN_DRAG",w="dnd-core/PUBLISH_DRAG_SOURCE",_="dnd-core/HOVER",C="dnd-core/DROP",S="dnd-core/END_DRAG",k=function(e,t){return e===t};function x(e,t){return!e&&!t||!(!e||!t)&&(e.x===t.x&&e.y===t.y)}function E(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k;if(e.length!==t.length)return!1;for(var r=0;r<e.length;++r)if(!n(e[r],t[r]))return!1;return!0}function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){R(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function M(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0,n=t.payload;switch(t.type){case p:case y:return{initialSourceClientOffset:n.sourceClientOffset,initialClientOffset:n.clientOffset,clientOffset:n.clientOffset};case _:return x(e.clientOffset,n.clientOffset)?e:T(T({},e),{},{clientOffset:n.clientOffset});case S:case C:return O;default:return e}}var P="dnd-core/ADD_SOURCE",L="dnd-core/ADD_TARGET",D="dnd-core/REMOVE_SOURCE",I="dnd-core/REMOVE_TARGET";function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t,n){return t.split(".").reduce((function(e,t){return e&&e[t]?e[t]:n||null}),e)}function N(e,t){return e.filter((function(e){return e!==t}))}function B(e){return"object"===F(e)}function z(e,t){var n=new Map,r=function(e){n.set(e,n.has(e)?n.get(e)+1:1)};e.forEach(r),t.forEach(r);var a=[];return n.forEach((function(e,t){1===e&&a.push(t)})),a}function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){W(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var V={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0,n=t.payload;switch(t.type){case y:return U(U({},e),{},{itemType:n.itemType,item:n.item,sourceId:n.sourceId,isSourcePublic:n.isSourcePublic,dropResult:null,didDrop:!1});case w:return U(U({},e),{},{isSourcePublic:!0});case _:return U(U({},e),{},{targetIds:n.targetIds});case I:return-1===e.targetIds.indexOf(n.targetId)?e:U(U({},e),{},{targetIds:N(e.targetIds,n.targetId)});case C:return U(U({},e),{},{dropResult:n.dropResult,didDrop:!0,targetIds:[]});case S:return U(U({},e),{},{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return e}}function G(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:case L:return e+1;case D:case I:return e-1;default:return e}}var K=[],Y=[];function X(e,t){return e!==K&&(e===Y||void 0===t||(n=e,t.filter((function(e){return n.indexOf(e)>-1}))).length>0);var n}function J(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=arguments.length>1?arguments[1]:void 0;switch(e.type){case _:break;case P:case L:case I:case D:return K;case y:case w:case S:case C:default:return Y}var t=e.payload,n=t.targetIds,r=void 0===n?[]:n,a=t.prevTargetIds,l=void 0===a?[]:a,d=z(r,l),h=d.length>0||!E(r,l);if(!h)return K;var f=l[l.length-1],p=r[r.length-1];return f!==p&&(f&&d.push(f),p&&d.push(p)),d}function Q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e+1}function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){te(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ne(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return{dirtyHandlerIds:J(e.dirtyHandlerIds,{type:t.type,payload:ee(ee({},t.payload),{},{prevTargetIds:j(e,"dragOperation.targetIds",[])})}),dragOffset:M(e.dragOffset,t),refCount:G(e.refCount,t),dragOperation:q(e.dragOperation,t),stateId:Q(e.stateId)}}K.__IS_NONE__=!0,Y.__IS_ALL__=!0;var re=n(12);function oe(e,t){return{type:p,payload:{sourceClientOffset:t||null,clientOffset:e||null}}}var ae={type:p,payload:{clientOffset:null,sourceClientOffset:null}};function se(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{publishSource:!0},r=n.publishSource,a=void 0===r||r,l=n.clientOffset,d=n.getSourceClientOffset,h=e.getMonitor(),f=e.getRegistry();e.dispatch(oe(l)),le(t,h,f);var p=de(t,h);if(null!==p){var w=null;if(l){if(!d)throw new Error("getSourceClientOffset must be defined");ce(d),w=d(p)}e.dispatch(oe(l,w));var _=f.getSource(p),C=_.beginDrag(h,p);ue(C),f.pinSource(p);var S=f.getSourceType(p);return{type:y,payload:{itemType:S,item:C,sourceId:p,clientOffset:l||null,sourceClientOffset:w||null,isSourcePublic:!!a}}}e.dispatch(ae)}}function le(e,t,n){Object(re.a)(!t.isDragging(),"Cannot call beginDrag while dragging."),e.forEach((function(e){Object(re.a)(n.getSource(e),"Expected sourceIds to be registered.")}))}function ce(e){Object(re.a)("function"==typeof e,"When clientOffset is provided, getSourceClientOffset must be a function.")}function ue(e){Object(re.a)(B(e),"Item must be an object.")}function de(e,t){for(var n=null,r=e.length-1;r>=0;r--)if(t.canDragSource(e[r])){n=e[r];break}return n}function he(e){return function(){if(e.getMonitor().isDragging())return{type:w}}}function fe(e,t){return null===t?null===e:Array.isArray(e)?e.some((function(e){return e===t})):e===t}function pe(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.clientOffset;ge(t);var a=t.slice(0),l=e.getMonitor(),d=e.getRegistry();me(a,l,d);var h=l.getItemType();return ve(a,d,h),ye(a,l,d),{type:_,payload:{targetIds:a,clientOffset:r||null}}}}function ge(e){Object(re.a)(Array.isArray(e),"Expected targetIds to be an array.")}function me(e,t,n){Object(re.a)(t.isDragging(),"Cannot call hover while not dragging."),Object(re.a)(!t.didDrop(),"Cannot call hover after drop.");for(var r=0;r<e.length;r++){var a=e[r];Object(re.a)(e.lastIndexOf(a)===r,"Expected targetIds to be unique in the passed array.");var l=n.getTarget(a);Object(re.a)(l,"Expected targetIds to be registered.")}}function ve(e,t,n){for(var r=e.length-1;r>=0;r--){var a=e[r];fe(t.getTargetType(a),n)||e.splice(r,1)}}function ye(e,t,n){e.forEach((function(e){n.getTarget(e).hover(t,e)}))}function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(Object(n),!0).forEach((function(t){_e(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ce(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.getMonitor(),r=e.getRegistry();Se(n);var a=xe(n);a.forEach((function(a,l){var d=ke(a,l,r,n),h={type:C,payload:{dropResult:we(we({},t),d)}};e.dispatch(h)}))}}function Se(e){Object(re.a)(e.isDragging(),"Cannot call drop while not dragging."),Object(re.a)(!e.didDrop(),"Cannot call drop twice during one drag operation.")}function ke(e,t,n,r){var a=n.getTarget(e),l=a?a.drop(r,e):void 0;return function(e){Object(re.a)(void 0===e||B(e),"Drop result must either be an object or undefined.")}(l),void 0===l&&(l=0===t?{}:r.getDropResult()),l}function xe(e){var t=e.getTargetIds().filter(e.canDropOnTarget,e);return t.reverse(),t}function Ee(e){return function(){var t=e.getMonitor(),n=e.getRegistry();!function(e){Object(re.a)(e.isDragging(),"Cannot call endDrag while not dragging.")}(t);var r=t.getSourceId();null!=r&&(n.getSource(r,!0).endDrag(t,r),n.unpinSource());return{type:S}}}function Ae(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var $e,Re=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.store=t,this.registry=n}var t,n,r;return t=e,(n=[{key:"subscribeToStateChange",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{handlerIds:void 0},r=n.handlerIds;Object(re.a)("function"==typeof e,"listener must be a function."),Object(re.a)(void 0===r||Array.isArray(r),"handlerIds, when specified, must be an array of strings.");var a=this.store.getState().stateId,l=function(){var n=t.store.getState(),l=n.stateId;try{l===a||l===a+1&&!X(n.dirtyHandlerIds,r)||e()}finally{a=l}};return this.store.subscribe(l)}},{key:"subscribeToOffsetChange",value:function(e){var t=this;Object(re.a)("function"==typeof e,"listener must be a function.");var n=this.store.getState().dragOffset;return this.store.subscribe((function(){var r=t.store.getState().dragOffset;r!==n&&(n=r,e())}))}},{key:"canDragSource",value:function(e){if(!e)return!1;var t=this.registry.getSource(e);return Object(re.a)(t,"Expected to find a valid source."),!this.isDragging()&&t.canDrag(this,e)}},{key:"canDropOnTarget",value:function(e){if(!e)return!1;var t=this.registry.getTarget(e);return Object(re.a)(t,"Expected to find a valid target."),!(!this.isDragging()||this.didDrop())&&fe(this.registry.getTargetType(e),this.getItemType())&&t.canDrop(this,e)}},{key:"isDragging",value:function(){return Boolean(this.getItemType())}},{key:"isDraggingSource",value:function(e){if(!e)return!1;var t=this.registry.getSource(e,!0);return Object(re.a)(t,"Expected to find a valid source."),!(!this.isDragging()||!this.isSourcePublic())&&this.registry.getSourceType(e)===this.getItemType()&&t.isDragging(this,e)}},{key:"isOverTarget",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shallow:!1};if(!e)return!1;var n=t.shallow;if(!this.isDragging())return!1;var r=this.registry.getTargetType(e),a=this.getItemType();if(a&&!fe(r,a))return!1;var l=this.getTargetIds();if(!l.length)return!1;var d=l.indexOf(e);return n?d===l.length-1:d>-1}},{key:"getItemType",value:function(){return this.store.getState().dragOperation.itemType}},{key:"getItem",value:function(){return this.store.getState().dragOperation.item}},{key:"getSourceId",value:function(){return this.store.getState().dragOperation.sourceId}},{key:"getTargetIds",value:function(){return this.store.getState().dragOperation.targetIds}},{key:"getDropResult",value:function(){return this.store.getState().dragOperation.dropResult}},{key:"didDrop",value:function(){return this.store.getState().dragOperation.didDrop}},{key:"isSourcePublic",value:function(){return Boolean(this.store.getState().dragOperation.isSourcePublic)}},{key:"getInitialClientOffset",value:function(){return this.store.getState().dragOffset.initialClientOffset}},{key:"getInitialSourceClientOffset",value:function(){return this.store.getState().dragOffset.initialSourceClientOffset}},{key:"getClientOffset",value:function(){return this.store.getState().dragOffset.clientOffset}},{key:"getSourceClientOffset",value:function(){return e=this.store.getState().dragOffset,r=e.clientOffset,a=e.initialClientOffset,l=e.initialSourceClientOffset,r&&a&&l?Ae((n=l,{x:(t=r).x+n.x,y:t.y+n.y}),a):null;var e,t,n,r,a,l}},{key:"getDifferenceFromInitialOffset",value:function(){return e=this.store.getState().dragOffset,t=e.clientOffset,n=e.initialClientOffset,t&&n?Ae(t,n):null;var e,t,n}}])&&Te(t.prototype,n),r&&Te(t,r),e}(),Oe=0;function Me(e){return(Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pe(e,t){t&&Array.isArray(e)?e.forEach((function(e){return Pe(e,!1)})):Object(re.a)("string"==typeof e||"symbol"===Me(e),t?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}!function(e){e.SOURCE="SOURCE",e.TARGET="TARGET"}($e||($e={}));var Le=n(284),De=[],Ie=[],Fe=Le.a.makeRequestCallFromTimer((function throwFirstError(){if(Ie.length)throw Ie.shift()}));function je(e){var t;(t=De.length?De.pop():new Ne).task=e,Object(Le.a)(t)}var Ne=function(){function e(){}return e.prototype.call=function(){try{this.task.call()}catch(e){je.onerror?je.onerror(e):(Ie.push(e),Fe())}finally{this.task=null,De[De.length]=this}},e}();function Be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ze(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,l=void 0;try{for(var d,h=e[Symbol.iterator]();!(r=(d=h.next()).done)&&(n.push(d.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==h.return||h.return()}finally{if(a)throw l}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return He(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return He(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function He(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ue(e){var t=(Oe++).toString();switch(e){case $e.SOURCE:return"S".concat(t);case $e.TARGET:return"T".concat(t);default:throw new Error("Unknown Handler Role: ".concat(e))}}function We(e){switch(e[0]){case"S":return $e.SOURCE;case"T":return $e.TARGET;default:Object(re.a)(!1,"Cannot parse handler ID: ".concat(e))}}function Ve(e,t){var n=e.entries(),r=!1;do{var a=n.next(),l=a.done;if(ze(a.value,2)[1]===t)return!0;r=!!l}while(!r);return!1}var qe=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=t}var t,n,r;return t=e,(n=[{key:"addSource",value:function(e,t){Pe(e),function(e){Object(re.a)("function"==typeof e.canDrag,"Expected canDrag to be a function."),Object(re.a)("function"==typeof e.beginDrag,"Expected beginDrag to be a function."),Object(re.a)("function"==typeof e.endDrag,"Expected endDrag to be a function.")}(t);var n=this.addHandler($e.SOURCE,e,t);return this.store.dispatch(function(e){return{type:P,payload:{sourceId:e}}}(n)),n}},{key:"addTarget",value:function(e,t){Pe(e,!0),function(e){Object(re.a)("function"==typeof e.canDrop,"Expected canDrop to be a function."),Object(re.a)("function"==typeof e.hover,"Expected hover to be a function."),Object(re.a)("function"==typeof e.drop,"Expected beginDrag to be a function.")}(t);var n=this.addHandler($e.TARGET,e,t);return this.store.dispatch(function(e){return{type:L,payload:{targetId:e}}}(n)),n}},{key:"containsHandler",value:function(e){return Ve(this.dragSources,e)||Ve(this.dropTargets,e)}},{key:"getSource",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(re.a)(this.isSourceId(e),"Expected a valid source ID.");var n=t&&e===this.pinnedSourceId,r=n?this.pinnedSource:this.dragSources.get(e);return r}},{key:"getTarget",value:function(e){return Object(re.a)(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}},{key:"getSourceType",value:function(e){return Object(re.a)(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}},{key:"getTargetType",value:function(e){return Object(re.a)(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}},{key:"isSourceId",value:function(e){return We(e)===$e.SOURCE}},{key:"isTargetId",value:function(e){return We(e)===$e.TARGET}},{key:"removeSource",value:function(e){var t=this;Object(re.a)(this.getSource(e),"Expected an existing source."),this.store.dispatch(function(e){return{type:D,payload:{sourceId:e}}}(e)),je((function(){t.dragSources.delete(e),t.types.delete(e)}))}},{key:"removeTarget",value:function(e){Object(re.a)(this.getTarget(e),"Expected an existing target."),this.store.dispatch(function(e){return{type:I,payload:{targetId:e}}}(e)),this.dropTargets.delete(e),this.types.delete(e)}},{key:"pinSource",value:function(e){var t=this.getSource(e);Object(re.a)(t,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=t}},{key:"unpinSource",value:function(){Object(re.a)(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}},{key:"addHandler",value:function(e,t,n){var r=Ue(e);return this.types.set(r,t),e===$e.SOURCE?this.dragSources.set(r,n):e===$e.TARGET&&this.dropTargets.set(r,n),r}}])&&Be(t.prototype,n),r&&Be(t,r),e}();function Ge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ye(e){var t="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__;return f(ne,e&&t&&t({name:"dnd-core",instanceId:"dnd-core"}))}var Xe=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Ge(this,e),this.isSetUp=!1,this.handleRefCountChange=function(){var e=t.store.getState().refCount>0;t.backend&&(e&&!t.isSetUp?(t.backend.setup(),t.isSetUp=!0):!e&&t.isSetUp&&(t.backend.teardown(),t.isSetUp=!1))};var r=Ye(n);this.store=r,this.monitor=new Re(r,new qe(r)),r.subscribe(this.handleRefCountChange)}var t,n,r;return t=e,(n=[{key:"receiveBackend",value:function(e){this.backend=e}},{key:"getMonitor",value:function(){return this.monitor}},{key:"getBackend",value:function(){return this.backend}},{key:"getRegistry",value:function(){return this.monitor.registry}},{key:"getActions",value:function(){var e=this,t=this.store.dispatch,n=function(e){return{beginDrag:se(e),publishDragSource:he(e),hover:pe(e),drop:Ce(e),endDrag:Ee(e)}}(this);return Object.keys(n).reduce((function(r,a){var l,d=n[a];return r[a]=(l=d,function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var d=l.apply(e,r);void 0!==d&&t(d)}),r}),{})}},{key:"dispatch",value:function(e){this.store.dispatch(e)}}])&&Ke(t.prototype,n),r&&Ke(t,r),e}();function Je(e,t,n,r){var a=new Xe(r),l=e(a,t,n);return a.receiveBackend(l),a}var Qe=r.createContext({dragDropManager:void 0});function Ze(e,t,n,r){return{dragDropManager:Je(e,t,n,r)}}},,,,,,,,,,,,,,,,function(e,t,n){"use strict";n(11),n(14),n(9);function r(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n(2).a.factory("queuedHttp",["$http","$q",function(e,t){var n=[],a=!1,l=function e(){if(!a){var t=n.shift();return null!=t?(a=!0,t().then((function(){return a=!1,e()})).catch((function(){return a=!1,e()}))):void 0}},d=function(){for(var t=arguments.length,a=new Array(t),d=0;d<t;d++)a[d]=arguments[d];var h={},f=[],p=[];h.then=function(e,t){return f.push(e),null!=t&&p.push(t),h},h.catch=function(e){return p.push(e),h};var y=function(){return e.apply(void 0,r(Array.from(a||[]))).then((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Array.from(f).map((function(e){return e.apply(void 0,r(Array.from(t||[])))}))})).catch((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Array.from(p).map((function(e){return e.apply(void 0,r(Array.from(t||[])))}))}))};return n.push(y),l(),h};return d.post=function(e,t){return d({method:"POST",url:e,data:t})},d}])},function(e,t,n){"use strict";n(6),n(67);var r=n(2),a=n(148),l=n.n(a);r.a.factory("algoliaSearch",(function(){var e,t;if(null!=(null!=window.sharelatex?window.sharelatex.algolia:void 0)&&null!=d(null!=window.sharelatex.algolia?window.sharelatex.algolia.indexes:void 0,(function(e){return e.wiki}))){var n=l()(null!=window.sharelatex.algolia?window.sharelatex.algolia.app_id:void 0,null!=window.sharelatex.algolia?window.sharelatex.algolia.api_key:void 0);t=n.initIndex(d(null!=window.sharelatex.algolia?window.sharelatex.algolia.indexes:void 0,(function(e){return e.wiki}))),e=n.initIndex(d(null!=window.sharelatex.algolia?window.sharelatex.algolia.indexes:void 0,(function(e){return e.kb})))}return{searchWiki:t?t.search.bind(t):null,searchKB:e?e.search.bind(e):null}}));function d(e,t){return null!=e?t(e):void 0}},,function(e,t,n){var r=n(83).Symbol;e.exports=r},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,n){var r=n(344),a=n(251);e.exports=function(e){return null!=e&&a(e.length)&&!r(e)}},function(e,t,n){var r=n(524),a=n(531),l=n(174);e.exports=function(e){return l(e)?r(e):a(e)}},function(e,t,n){var r=n(539),a=n(540),l=n(541),d=n(542),h=n(543);function f(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}f.prototype.clear=r,f.prototype.delete=a,f.prototype.get=l,f.prototype.has=d,f.prototype.set=h,e.exports=f},function(e,t,n){var r=n(173);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},function(e,t,n){var r=n(102)(Object,"create");e.exports=r},function(e,t,n){var r=n(557);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},function(e,t,n){var r=n(256);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},function(e,t,n){var r=n(182),a=n(183);e.exports=function(e){return r(a(e))}},function(e,t,n){var r=n(62),a=n(258),l="".split;e.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==a(e)?l.call(e,""):Object(e)}:Object},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},function(e,t,n){var r=n(103),a=n(365),l=n(185),d=n(259),h=Object.defineProperty;t.f=r?h:function(e,t,n){if(l(e),t=d(t,!0),l(n),a)try{return h(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(143);e.exports=function(e){if(!r(e))throw TypeError(String(e)+" is not an object");return e}},function(e,t,n){var r=n(145),a=Math.min;e.exports=function(e){return e>0?a(r(e),9007199254740991):0}},function(e,t,n){var r=n(188),a=n(266);e.exports=n(122)?function(e,t,n){return r.f(e,t,a(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(189),a=n(651),l=n(652),d=Object.defineProperty;t.f=n(122)?Object.defineProperty:function(e,t,n){if(r(e),t=l(t,!0),r(n),a)try{return d(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(265);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(654),a=n(396);e.exports=Object.keys||function(e){return r(e,a)}},function(e,t,n){var r=n(269);e.exports=function(e){return Object(r(e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=d(n(0)),l=d(n(124));function d(e){return e&&e.__esModule?e:{default:e}}t.default=(0,l.default)((function(e,t,n,l,d){var h=e[t],f=void 0===h?"undefined":r(h);return a.default.isValidElement(h)?new Error("Invalid "+l+" `"+d+"` of type ReactElement supplied to `"+n+"`, expected a ReactComponent or a DOMElement. You can usually obtain a ReactComponent or DOMElement from a ReactElement by attaching a ref to it."):"object"===f&&"function"==typeof h.render||1===h.nodeType?null:new Error("Invalid "+l+" `"+d+"` of value `"+h+"` supplied to `"+n+"`, expected a ReactComponent or a DOMElement.")})),e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){return e="function"==typeof e?e():e,l.default.findDOMNode(e)||t};var r,a=n(38),l=(r=a)&&r.__esModule?r:{default:r};e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){return e===e.window?e:9===e.nodeType&&(e.defaultView||e.parentWindow)},e.exports=t.default},,,function(e,t,n){"use strict";function r(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,l=function(){};return{s:l,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var d,h=!0,f=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return h=e.done,e},e:function(e){f=!0,d=e},f:function(){try{h||null==n.return||n.return()}finally{if(f)throw d}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}function p(e){var t=C();return function(){var n,r=k(e);if(t){var a=k(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){var t="function"==typeof Map?new Map:void 0;return(w=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return _(e,arguments,k(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),S(r,e)})(e)}function _(e,t,n){return(_=C()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&S(a,n.prototype),a}).apply(null,arguments)}function C(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(607),n(619),n(627),n(629),n(630),n(633),n(382),n(637);var x=function(e){f(OError,e);var t,n,a,y=p(OError);function OError(e,t,n){var r;return d(this,OError),(r=y.call(this,e)).name=r.constructor.name,t&&(r.info=t),n&&(r.cause=n),r._oErrorTags,r}return t=OError,a=[{key:"tag",value:function(e,t,n){var r,a=e;return a._oErrorTags||(a._oErrorTags=[]),Error.captureStackTrace?(r={name:"TaggedError",message:t,info:n},Error.captureStackTrace(r,OError.tag)):r=new E(t||"",n),a._oErrorTags.length>=OError.maxTags&&(a._oErrorTags[1]===A?a._oErrorTags.splice(2,1):a._oErrorTags[1]=A),a._oErrorTags.push(r),e}},{key:"getFullInfo",value:function(e){var t={};if(!e)return t;var n=e;if(n.cause&&Object.assign(t,OError.getFullInfo(n.cause)),"object"===l(n.info)&&Object.assign(t,n.info),n._oErrorTags){var a,d=r(n._oErrorTags);try{for(d.s();!(a=d.n()).done;){var h=a.value;Object.assign(t,h.info)}}catch(e){d.e(e)}finally{d.f()}}return t}},{key:"getFullStack",value:function(e){if(!e)return"";var t=e,n=t.stack||"(no stack)";Array.isArray(t._oErrorTags)&&t._oErrorTags.length&&(n+="\n".concat(t._oErrorTags.map((function(e){return e.stack})).join("\n")));var r=t.cause&&OError.getFullStack(t.cause);return r&&(n+="\ncaused by:\n"+r.replace(/^/gm,"    ")),n}}],(n=[{key:"withInfo",value:function(e){return this.info=e,this}},{key:"withCause",value:function(e){return this.cause=e,this}}])&&h(t.prototype,n),a&&h(t,a),OError}(w(Error));x.maxTags=100;var E=function(e){f(TaggedError,e);var t=p(TaggedError);function TaggedError(){return d(this,TaggedError),t.apply(this,arguments)}return TaggedError}(x),A={name:"TaggedError",message:"... dropped tags",stack:"TaggedError: ... dropped tags"};e.exports=x},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t,n,r,a,l){var d=r||"<<anonymous>>",h=l||n;if(null==t[n])return new Error("The "+a+" `"+h+"` is required to make `"+d+"` accessible for users of assistive technologies such as screen readers.");for(var f=arguments.length,p=Array(f>5?f-5:0),y=5;y<f;y++)p[y-5]=arguments[y];return e.apply(void 0,[t,n,r,a,l].concat(p))}},e.exports=t.default},function(e,t,n){e.exports=n(669)},function(e,t,n){"use strict";var r=n(40);t.__esModule=!0,t.default=function(e){if((!a&&0!==a||e)&&l.default){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),a=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return a};var a,l=r(n(75));e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default=t.EXITING=t.ENTERED=t.ENTERING=t.EXITED=t.UNMOUNTED=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(1)),a=h(n(0)),l=h(n(38)),d=n(278);n(702);function h(e){return e&&e.__esModule?e:{default:e}}t.UNMOUNTED="unmounted";t.EXITED="exited";t.ENTERING="entering";t.ENTERED="entered";t.EXITING="exiting";var f=function(e){var t,n;function r(t,n){var r;r=e.call(this,t,n)||this;var a,l=n.transitionGroup,d=l&&!l.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?d?(a="exited",r.appearStatus="entering"):a="entered":a=t.unmountOnExit||t.mountOnEnter?"unmounted":"exited",r.state={status:a},r.nextCallback=null,r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var d=r.prototype;return d.getChildContext=function(){return{transitionGroup:null}},r.getDerivedStateFromProps=function(e,t){return e.in&&"unmounted"===t.status?{status:"exited"}:null},d.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},d.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?"entering"!==n&&"entered"!==n&&(t="entering"):"entering"!==n&&"entered"!==n||(t="exiting")}this.updateStatus(!1,t)},d.componentWillUnmount=function(){this.cancelNextCallback()},d.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!=typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},d.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t){this.cancelNextCallback();var n=l.default.findDOMNode(this);"entering"===t?this.performEnter(n,e):this.performExit(n)}else this.props.unmountOnExit&&"exited"===this.state.status&&this.setState({status:"unmounted"})},d.performEnter=function(e,t){var n=this,r=this.props.enter,a=this.context.transitionGroup?this.context.transitionGroup.isMounting:t,l=this.getTimeouts(),d=a?l.appear:l.enter;t||r?(this.props.onEnter(e,a),this.safeSetState({status:"entering"},(function(){n.props.onEntering(e,a),n.onTransitionEnd(e,d,(function(){n.safeSetState({status:"entered"},(function(){n.props.onEntered(e,a)}))}))}))):this.safeSetState({status:"entered"},(function(){n.props.onEntered(e)}))},d.performExit=function(e){var t=this,n=this.props.exit,r=this.getTimeouts();n?(this.props.onExit(e),this.safeSetState({status:"exiting"},(function(){t.props.onExiting(e),t.onTransitionEnd(e,r.exit,(function(){t.safeSetState({status:"exited"},(function(){t.props.onExited(e)}))}))}))):this.safeSetState({status:"exited"},(function(){t.props.onExited(e)}))},d.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},d.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},d.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},d.onTransitionEnd=function(e,t,n){this.setNextCallback(n);var r=null==t&&!this.props.addEndListener;e&&!r?(this.props.addEndListener&&this.props.addEndListener(e,this.nextCallback),null!=t&&setTimeout(this.nextCallback,t)):setTimeout(this.nextCallback,0)},d.render=function(){var e=this.state.status;if("unmounted"===e)return null;var t=this.props,n=t.children,r=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(t,["children"]);if(delete r.in,delete r.mountOnEnter,delete r.unmountOnExit,delete r.appear,delete r.enter,delete r.exit,delete r.timeout,delete r.addEndListener,delete r.onEnter,delete r.onEntering,delete r.onEntered,delete r.onExit,delete r.onExiting,delete r.onExited,"function"==typeof n)return n(e,r);var l=a.default.Children.only(n);return a.default.cloneElement(l,r)},r}(a.default.Component);function p(){}f.contextTypes={transitionGroup:r.object},f.childContextTypes={transitionGroup:function(){}},f.propTypes={},f.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:p,onEntering:p,onEntered:p,onExit:p,onExiting:p,onExited:p},f.UNMOUNTED=0,f.EXITED=1,f.ENTERING=2,f.ENTERED=3,f.EXITING=4;var y=(0,d.polyfill)(f);t.default=y},function(e,t,n){var r=n(18),a=n(28),l=n(58),d=n(232),h=n(323);r({target:"Object",stat:!0,forced:a((function(){d(1)})),sham:!h},{getPrototypeOf:function(e){return d(l(e))}})},,,,,,,,,,,,,,,,,,,,,,,function(e,t){angular.module("RecursionHelper",[]).factory("RecursionHelper",["$compile",function(e){return{compile:function(t,n){angular.isFunction(n)&&(n={post:n});var r,a=t.contents().remove();return{pre:n&&n.pre?n.pre:null,post:function(t,l){r||(r=e(a)),r(t,(function(e){l.append(e)})),n&&n.post&&n.post.apply(null,arguments)}}}}}])},function(e,t){angular.module("sessionStorage",[]).value("sessionStorage",(function(){try{var e;return(e=$).sessionStorage.apply(e,arguments)}catch(e){return console.error("sessionStorage exception",e),null}}))},,,,,function(e,t,n){"use strict";var r=n(2),a=n(86);r.a.controller("FreeTrialModalController",["$scope","eventTracking",function(e,t){e.buttonClass="btn-primary",e.startFreeTrial=function(n,r){return Object(a.a)(n,r,e,t)}}]),r.a.controller("UpgradeModalController",["$scope","eventTracking",function(e,t){e.buttonClass="btn-primary",e.upgradePlan=function(t){return Object(a.b)(t,e)}}])},function(e,t,n){"use strict";var r=n(13),a=n.n(r),l=n(2),d=(n(137),0),h=new Date;l.a.factory("eventTracking",["$http","localStorage",function(e,t){var n=function(){var e=t("mbEvents");return null==e&&t("mbEvents",e={}),e},r=function(e){return n()[e]||!1},l=function(e){var r=n();return r[e]=!0,t("mbEvents",r)};return{send:function(e,t,n,r){return ga("send","event",e,t,n,r)},sendGAOnce:function(e,t,n,a){if(!r(t))return l(t),this.send(e,t,n,a)},editingSessionHeartbeat:function(){if(h<=new Date){e({url:"/editingSession/".concat(window.project_id),method:"PUT",headers:{"X-CSRF-Token":window.csrfToken}});var t=++d<=2?30:d<=6?60*(d-2):300;return h=a()().add(t,"seconds").toDate()}},sendMB:function(t,n){return null==n&&(n={}),e({url:"/event/".concat(t),method:"POST",data:n,headers:{"X-CSRF-Token":window.csrfToken}})},sendMBSampled:function(e,t){if(Math.random()<.01)return this.sendMB(e,t)},sendMBOnce:function(e,t){if(!r(e))return l(e),this.sendMB(e,t)},eventInCache:function(e){return r(e)}}}]);$(".navbar a").on("click",(function(e){var t=$(e.target).attr("href");if(null!=t)return ga("send","event","navigation","top menu bar",t)}))},function(e,t,n){"use strict";n(23),n(52);var r=n(2);r.a.controller("SystemMessagesController",["$http","$scope",function(e,t){t.messages=[];var n=function(){!document.hidden&&navigator.onLine&&e.get("/system/messages").then((function(e){e.headers("content-type").includes("json")&&(t.messages=e.data)})).catch((function(){}))};n(),setInterval(n,9e5)}]);r.a.controller("SystemMessageController",["$scope","$sce",function(e,t){return e.hidden=$.localStorage("systemMessage.hide.".concat(e.message._id)),e.protected="protected"===e.message._id,e.htmlContent=e.message.content,e.hide=function(){if(!e.protected)return e.hidden=!0,$.localStorage("systemMessage.hide.".concat(e.message._id),!0)}}])},,,function(e,t,n){"use strict";var r=n(2),a=n(85);r.a.constant("ExposedSettings",a.a)},function(e,t,n){"use strict";var r=n(2);r.a.directive("stopPropagation",["$http",function(e){return{restrict:"A",link:function(e,t,n){return t.bind(n.stopPropagation,(function(e){return e.stopPropagation()}))}}}]);r.a.directive("preventDefault",["$http",function(e){return{restrict:"A",link:function(e,t,n){return t.bind(n.preventDefault,(function(e){return e.preventDefault()}))}}}])},function(e,t,n){"use strict";n(153);var r,a=n(2);a.a.directive("focusWhen",["$timeout",function(e){return{restrict:"A",link:function(t,n,r){return t.$watch(r.focusWhen,(function(t){if(t)return e((function(){return n.focus()}))}))}}}]),a.a.directive("focusOn",["$timeout",function(e){return{restrict:"A",link:function(e,t,n){return e.$on(n.focusOn,(function(){return t.focus()}))}}}]),a.a.directive("selectWhen",["$timeout",function(e){return{restrict:"A",link:function(t,n,r){return t.$watch(r.selectWhen,(function(t){if(t)return e((function(){return n.select()}))}))}}}]),a.a.directive("selectOn",["$timeout",function(e){return{restrict:"A",link:function(e,t,n){return e.$on(n.selectOn,(function(){return t.select()}))}}}]),a.a.directive("selectNameWhen",["$timeout",function(e){return{restrict:"A",link:function(t,n,a){return t.$watch(a.selectNameWhen,(function(t){if(t)return e((function(){return r(n)}))}))}}}]),a.a.directive("selectNameOn",(function(){return{restrict:"A",link:function(e,t,n){return e.$on(n.selectNameOn,(function(){return r(t)}))}}})),a.a.directive("focus",["$timeout",function(e){return{scope:{trigger:"@focus"},link:function(t,n){return t.$watch("trigger",(function(t){if("true"===t)return e((function(){return n[0].focus()}))}))}}}]),r=function(e){e.focus();var t=e.val();if(null!=e[0].setSelectionRange){var n=t.lastIndexOf(".");return-1===n&&(n=t.length),e[0].setSelectionRange(0,n)}}},function(e,t,n){"use strict";var r=n(2),a=n(198),l=n.n(a);r.a.directive("fineUpload",["$timeout",function(e){return{scope:{multiple:"=",endpoint:"@",templateId:"@",sizeLimit:"@",allowedExtensions:"=",onCompleteCallback:"=",onUploadCallback:"=",onValidateBatch:"=",onErrorCallback:"=",onSubmitCallback:"=",onCancelCallback:"=",autoUpload:"=",params:"=",control:"="},link:function(e,t,n){var r,a,d=e.multiple||!1,h=e.endpoint,f=e.templateId;a=null!=e.allowedExtensions?{allowedExtensions:e.allowedExtensions}:{},e.sizeLimit&&(a.sizeLimit=e.sizeLimit);var p=e.maxConnections||1,y=e.onCompleteCallback||function(){},w=e.onUploadCallback||function(){},_=e.onErrorCallback||function(){},C=e.onValidateBatch||function(){},S=e.onSubmitCallback||function(){},k=e.onCancelCallback||function(){};r=null==e.autoUpload||e.autoUpload;var x=e.params||{};x._csrf=window.csrfToken;var E=new l.a.FineUploader({element:t[0],multiple:d,autoUpload:r,disabledCancelForFormUploads:!0,validation:a,maxConnections:p,request:{endpoint:h,forceMultipart:!0,params:x,paramsInBody:!1},callbacks:{onComplete:y,onUpload:w,onValidateBatch:C,onError:_,onSubmit:S,onCancel:k},template:f,failedUploadTextDisplay:{mode:"custom",responseProperty:"error"}});return window.q=E,null!=e.control&&(e.control.q=E),E}}}])},function(e,t,n){"use strict";n(2).a.directive("onEnter",(function(){return function(e,t,n){return t.bind("keydown keypress",(function(t){if(13===t.which)return e.$apply((function(){return e.$eval(n.onEnter,{event:t})})),t.preventDefault()}))}}))},function(e,t,n){"use strict";function r(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,l=function(){};return{s:l,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var d,h=!0,f=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return h=e.done,e},e:function(e){f=!0,d=e},f:function(){try{h||null==n.return||n.return()}finally{if(f)throw d}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n(2).a.factory("validateCaptcha",(function(){var e=[],t=function(t){var n,a=r(e);try{for(a.s();!(n=a.n()).done;){(0,n.value)(t)}}catch(e){a.e(e)}finally{a.f()}e=[]},n=null;return function(r,a){if(null==r&&(r=function(e){}),"undefined"==typeof grecaptcha||null===grecaptcha||a)return r();if(e.push(r),e.push((function(){return grecaptcha.reset()})),null==n){var l=$("#recaptcha")[0];n=grecaptcha.render(l,{callback:t})}return grecaptcha.execute(n)}}))},function(e,t,n){"use strict";n(2).a.factory("validateCaptchaV3",(function(){var e=window.grecaptcha,t=window.ExposedSettings;return function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};e&&t&&t.recaptchaSiteKeyV3&&e.ready((function(){e.execute(t.recaptchaSiteKeyV3,{action:n}).then(r)}))}}))},function(e,t,n){"use strict";n(19);var r=n(2),a=n(13),l=n.n(a);l.a.updateLocale("en",{calendar:{lastDay:"[Yesterday]",sameDay:"[Today]",nextDay:"[Tomorrow]",lastWeek:"ddd, Do MMM YY",nextWeek:"ddd, Do MMM YY",sameElse:"ddd, Do MMM YY"}}),r.a.filter("formatDate",(function(){return function(e,t){return e?(null==t&&(t="Do MMM YYYY, h:mm a"),l()(e).format(t)):"N/A"}})),r.a.filter("utcDate",(function(){return function(e,t){return e?(null==t&&(t="D MMM YYYY, HH:mm:ss"),l()(e).utc().format(t)+" UTC"):"N/A"}})),r.a.filter("relativeDate",(function(){return function(e){return l()(e).calendar()}})),r.a.filter("fromNowDate",(function(){return function(e){return l()(e).fromNow()}}))},function(e,t,n){"use strict";n.r(t);n(7),n(11),n(10),n(6),n(27),n(9),n(34);var r=n(2);n(169);r.a.controller("ContactModal",["$scope","$modal","sessionStorage",function(e,t,n){n("contact-form.user-input",null),e.contactUsModal=function(){t.open({templateUrl:"contactModalTemplate",controller:"ContactModalController",scope:e})}}]),r.a.controller("ContactGeneralModal",["$scope","$modal","sessionStorage",function(e,t,n){n("contact-form.user-input",null),e.openModal=function(){t.open({templateUrl:"contactGeneralModalTemplate",controller:"ContactGeneralModalController"})}}]),r.a.controller("ContactModalController",["$scope","$modalInstance",function(e,t){return e.close=function(){return t.close()}}]),r.a.controller("ContactGeneralModalController",["$scope","$modalInstance",function(e,t){return e.close=function(){return t.close()}}]),t.default=r.a.controller("ContactFormController",["$scope","algoliaSearch","eventTracking","$http","sessionStorage",function(e,t,n,r,a){var l=a("contact-form.user-input");l?e.form=l:(e.form={email:""},window.project_id&&(e.form.project_url=window.location.href)),e.sent=!1,e.sending=!1,e.suggestions=[],e.$on("modal.closing",(function(){e.sent?a("contact-form.user-input",null):a("contact-form.user-input",{subject:e.form.subject,message:e.form.message,project_url:e.form.project_url})}));var d=function(t,r){var a=function(){for(var e,t,n=[],a=0,l=Array.from(r.hits);a<l.length;a++){var d=l[a],h=(e=null!=d?d.pageName:void 0,t=function(e){return e.replace(/\s/g,"_")},null!=e?t(e):void 0),f=encodeURIComponent(h),p=d.kb?"how-to":"latex",y=d.sectionName&&""!==d.sectionName,w=y?"#".concat(d.sectionName.replace(/\s/g,"_")):"",_=d._highlightResult.pageName.value;y&&(_+=" - "+d.sectionName),n.push({url:"/learn/".concat(p,"/").concat(f).concat(w),name:_})}return n}();return r.hits.length&&n.sendMB("contact-form-suggestions-shown"),e.$applyAsync((function(){return e.suggestions=a}))};e.contactUs=function(){if(null!=e.form.email&&""!==e.form.email){e.sending=!0;var t=Math.floor(65536*(1+Math.random())).toString(32),n=e.form.message;null!=e.form.project_url&&(n="".concat(n,"\n\n project_url = ").concat(e.form.project_url));var a={_csrf:window.csrfToken,email:e.form.email,message:n||"",subject:e.form.subject+" - [".concat(t,"]"),labels:"support",inbox:e.inbox||"support"},l=r.post("/support",a);return l.then((function(t){return e.sent=!0})),l.catch((function(){return e.error=!0,e.sending=!1,console.log("the request failed")}))}console.log("email not set")},e.$watch("inbox",(function(t){return e.inbox}))();var h=e.$watch("showContactFormSuggestions",(function(e){if(null!=e)return!0===e&&f(),h()})),f=function(){return e.$watch("form.subject",(function(n,r){if(!(n&&n!==r&&n.length>3))return e.suggestions=[];t.searchWiki(n,{hitsPerPage:3,typoTolerance:"strict"},d)}))};return e.clickSuggestionLink=function(e){return n.sendMB("contact-form-suggestions-clicked",{url:e})}}])},,,function(e,t,n){var r=n(343);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},function(e,t){e.exports=function(e){return e}},function(e,t){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},function(e,t){var n=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&n.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t,n){var r=n(102)(n(83),"Map");e.exports=r},function(e,t,n){var r=n(549),a=n(556),l=n(558),d=n(559),h=n(560);function f(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}f.prototype.clear=r,f.prototype.delete=a,f.prototype.get=l,f.prototype.has=d,f.prototype.set=h,e.exports=f},function(e,t,n){var r=n(84),a=n(256),l=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,d=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!a(e))||(d.test(e)||!l.test(e)||null!=t&&e in Object(t))}},function(e,t,n){var r=n(141),a=n(142);e.exports=function(e){return"symbol"==typeof e||a(e)&&"[object Symbol]"==r(e)}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(143);e.exports=function(e,t){if(!r(e))return e;var n,a;if(t&&"function"==typeof(n=e.toString)&&!r(a=n.call(e)))return a;if("function"==typeof(n=e.valueOf)&&!r(a=n.call(e)))return a;if(!t&&"function"==typeof(n=e.toString)&&!r(a=n.call(e)))return a;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var r=n(70),a=n(144);e.exports=function(e,t){try{a(r,e,t)}catch(n){r[e]=t}return t}},function(e,t,n){var r=n(70),a=n(260),l=r["__core-js_shared__"]||a("__core-js_shared__",{});e.exports=l},function(e,t,n){var r=n(70),a=n(369),l=n(91),d=n(370),h=n(378),f=n(624),p=a("wks"),y=r.Symbol,w=f?y:y&&y.withoutSetter||d;e.exports=function(e){return l(p,e)||(h&&l(y,e)?p[e]=y[e]:p[e]=w("Symbol."+e)),p[e]}},function(e,t,n){"use strict";var r,a,l=n(635),d=n(636),h=RegExp.prototype.exec,f=String.prototype.replace,p=h,y=(r=/a/,a=/b*/g,h.call(r,"a"),h.call(a,"a"),0!==r.lastIndex||0!==a.lastIndex),w=d.UNSUPPORTED_Y||d.BROKEN_CARET,_=void 0!==/()??/.exec("")[1];(y||_||w)&&(p=function(e){var t,n,r,a,d=this,p=w&&d.sticky,C=l.call(d),S=d.source,k=0,x=e;return p&&(-1===(C=C.replace("y","")).indexOf("g")&&(C+="g"),x=String(e).slice(d.lastIndex),d.lastIndex>0&&(!d.multiline||d.multiline&&"\n"!==e[d.lastIndex-1])&&(S="(?: "+S+")",x=" "+x,k++),n=new RegExp("^(?:"+S+")",C)),_&&(n=new RegExp("^"+S+"$(?!\\s)",C)),y&&(t=d.lastIndex),r=h.call(p?n:d,x),p?r?(r.input=r.input.slice(k),r[0]=r[0].slice(k),r.index=d.lastIndex,d.lastIndex+=r[0].length):d.lastIndex=0:y&&r&&(d.lastIndex=d.global?r.index+r[0].length:t),_&&r&&r.length>1&&f.call(r[0],n,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(r[a]=void 0)})),r}),e.exports=p},function(e,t,n){"use strict";var r=n(383),a=n(385);e.exports=r("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),a)},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(391),a=n(269);e.exports=function(e){return r(a(e))}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(393)("keys"),a=n(395);e.exports=function(e){return r[e]||(r[e]=a(e))}},function(e,t){e.exports={}},function(e,t,n){"use strict";var r=n(40);t.__esModule=!0,t.default=void 0;var a=function(){};r(n(75)).default&&(a=document.addEventListener?function(e,t,n,r){return e.addEventListener(t,n,r||!1)}:document.attachEvent?function(e,t,n){return e.attachEvent("on"+t,(function(t){(t=t||window.event).target=t.target||t.srcElement,t.currentTarget=e,n.call(e,t)}))}:void 0);var l=a;t.default=l,e.exports=t.default},function(e,t,n){"use strict";var r=n(40);t.__esModule=!0,t.default=void 0;var a=function(){};r(n(75)).default&&(a=document.addEventListener?function(e,t,n,r){return e.removeEventListener(t,n,r||!1)}:document.attachEvent?function(e,t,n){return e.detachEvent("on"+t,n)}:void 0);var l=a;t.default=l,e.exports=t.default},function(e,t,n){"use strict";var r=n(40);t.__esModule=!0,t.default=function(e,t,n){var r="",y="",w=t;if("string"==typeof t){if(void 0===n)return e.style[(0,a.default)(t)]||(0,d.default)(e).getPropertyValue((0,l.default)(t));(w={})[t]=n}Object.keys(w).forEach((function(t){var n=w[t];n||0===n?(0,p.default)(t)?y+=t+"("+n+") ":r+=(0,l.default)(t)+": "+n+";":(0,h.default)(e,(0,l.default)(t))})),y&&(r+=f.transform+": "+y+";");e.style.cssText+=";"+r};var a=r(n(404)),l=r(n(695)),d=r(n(697)),h=r(n(698)),f=n(699),p=r(n(700));e.exports=t.default},,function(e,t,n){"use strict";var r=n(40);t.__esModule=!0,t.default=function(e){void 0===e&&(e=(0,a.default)());try{return e.activeElement}catch(e){}};var a=r(n(106));e.exports=t.default},function(e,t,n){"use strict";function r(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!=e&&this.setState(e)}function a(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!=n?n:null}.bind(this))}function l(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}function d(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!=typeof e.getDerivedStateFromProps&&"function"!=typeof t.getSnapshotBeforeUpdate)return e;var n=null,d=null,h=null;if("function"==typeof t.componentWillMount?n="componentWillMount":"function"==typeof t.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"==typeof t.componentWillReceiveProps?d="componentWillReceiveProps":"function"==typeof t.UNSAFE_componentWillReceiveProps&&(d="UNSAFE_componentWillReceiveProps"),"function"==typeof t.componentWillUpdate?h="componentWillUpdate":"function"==typeof t.UNSAFE_componentWillUpdate&&(h="UNSAFE_componentWillUpdate"),null!==n||null!==d||null!==h){var f=e.displayName||e.name,p="function"==typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+f+" uses "+p+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==d?"\n  "+d:"")+(null!==h?"\n  "+h:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"==typeof e.getDerivedStateFromProps&&(t.componentWillMount=r,t.componentWillReceiveProps=a),"function"==typeof t.getSnapshotBeforeUpdate){if("function"!=typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=l;var y=t.componentDidUpdate;t.componentDidUpdate=function(e,t,n){var r=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;y.call(this,e,t,r)}}return e}n.r(t),n.d(t,"polyfill",(function(){return d})),r.__suppressDeprecationWarning=!0,a.__suppressDeprecationWarning=!0,l.__suppressDeprecationWarning=!0},function(e,t,n){"use strict";t.__esModule=!0;var r=p(n(94)),a=p(n(1)),l=p(n(0)),d=p(n(38)),h=p(n(401)),f=p(n(123));function p(e){return e&&e.__esModule?e:{default:e}}var y=function(e){function t(n,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var l=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,a));return l.addEventListeners=function(){var e=l.props.event,t=(0,f.default)(l);l.documentMouseCaptureListener=(0,h.default)(t,e,l.handleMouseCapture,!0),l.documentMouseListener=(0,h.default)(t,e,l.handleMouse),l.documentKeyupListener=(0,h.default)(t,"keyup",l.handleKeyUp)},l.removeEventListeners=function(){l.documentMouseCaptureListener&&l.documentMouseCaptureListener.remove(),l.documentMouseListener&&l.documentMouseListener.remove(),l.documentKeyupListener&&l.documentKeyupListener.remove()},l.handleMouseCapture=function(e){var t;l.preventMouseRootClose=!!((t=e).metaKey||t.altKey||t.ctrlKey||t.shiftKey)||!function(e){return 0===e.button}(e)||(0,r.default)(d.default.findDOMNode(l),e.target)},l.handleMouse=function(e){!l.preventMouseRootClose&&l.props.onRootClose&&l.props.onRootClose(e)},l.handleKeyUp=function(e){27===e.keyCode&&l.props.onRootClose&&l.props.onRootClose(e)},l.preventMouseRootClose=!1,l}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this.props.disabled||this.addEventListeners()},t.prototype.componentDidUpdate=function(e){!this.props.disabled&&e.disabled?this.addEventListeners():this.props.disabled&&!e.disabled&&this.removeEventListeners()},t.prototype.componentWillUnmount=function(){this.props.disabled||this.removeEventListeners()},t.prototype.render=function(){return this.props.children},t}(l.default.Component);y.displayName="RootCloseWrapper",y.propTypes={onRootClose:a.default.func,children:a.default.element,disabled:a.default.bool,event:a.default.oneOf(["click","mousedown"])},y.defaultProps={event:"click"},t.default=y,e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){return(0,r.default)(e)||(t=e,t&&"body"===t.tagName.toLowerCase())?function(e){var t=(0,a.default)(e),n=(0,r.default)(t).innerWidth;if(!n){var l=t.documentElement.getBoundingClientRect();n=l.right-Math.abs(l.left)}return t.body.clientWidth<n}(e):e.scrollHeight>e.clientHeight;var t};var r=l(n(196)),a=l(n(106));function l(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},function(e,t,n){var r,a,l,d,h,f,p,y;e.exports=(y=n(324),a=(r=y).lib,l=a.WordArray,d=a.Hasher,h=r.algo,f=[],p=h.SHA1=d.extend({_doReset:function(){this._hash=new l.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],a=n[1],l=n[2],d=n[3],h=n[4],p=0;p<80;p++){if(p<16)f[p]=0|e[t+p];else{var y=f[p-3]^f[p-8]^f[p-14]^f[p-16];f[p]=y<<1|y>>>31}var w=(r<<5|r>>>27)+h+f[p];w+=p<20?1518500249+(a&l|~a&d):p<40?1859775393+(a^l^d):p<60?(a&l|a&d|l&d)-1894007588:(a^l^d)-899497514,h=d,d=l,l=a<<30|a>>>2,a=r,r=w}n[0]=n[0]+r|0,n[1]=n[1]+a|0,n[2]=n[2]+l|0,n[3]=n[3]+d|0,n[4]=n[4]+h|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(r+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=d.clone.call(this);return e._hash=this._hash.clone(),e}}),r.SHA1=d._createHelper(p),r.HmacSHA1=d._createHmacHelper(p),y.SHA1)},,function(e,t,n){"use strict";(function(e,r){var a,l=n(422);a="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:r;var d=Object(l.a)(a);t.a=d}).call(this,n(39),n(226)(e))},function(e,t,n){"use strict";(function(e){function r(e){l.length||(a(),!0),l[l.length]=e}n.d(t,"a",(function(){return r}));var a,l=[],d=0;function h(){for(;d<l.length;){var e=d;if(d+=1,l[e].call(),d>1024){for(var t=0,n=l.length-d;t<n;t++)l[t]=l[t+d];l.length-=d,d=0}}l.length=0,d=0,!1}var f,p,y,w=void 0!==e?e:self,_=w.MutationObserver||w.WebKitMutationObserver;function C(e){return function(){var t=setTimeout(r,0),n=setInterval(r,50);function r(){clearTimeout(t),clearInterval(n),e()}}}"function"==typeof _?(f=1,p=new _(h),y=document.createTextNode(""),p.observe(y,{characterData:!0}),a=function(){f=-f,y.data=f}):a=C(h),r.requestFlush=a,r.makeRequestCallFromTimer=C}).call(this,n(39))},function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=y(n(1)),l=y(n(25)),d=y(n(0)),h=y(n(402)),f=y(n(689)),p=y(n(279));function y(e){return e&&e.__esModule?e:{default:e}}var w=function(e){function t(n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,r));return a.handleHidden=function(){var e;(a.setState({exited:!0}),a.props.onExited)&&(e=a.props).onExited.apply(e,arguments)},a.state={exited:!n.show},a.onHiddenListener=a.handleHidden.bind(a),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.UNSAFE_componentWillReceiveProps=function(e){e.show?this.setState({exited:!1}):e.transition||this.setState({exited:!0})},t.prototype.render=function(){var e=this.props,t=e.container,n=e.containerPadding,r=e.target,a=e.placement,l=e.shouldUpdatePosition,y=e.rootClose,w=e.children,_=e.transition,C=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["container","containerPadding","target","placement","shouldUpdatePosition","rootClose","children","transition"]);if(!(C.show||_&&!this.state.exited))return null;var S=w;if(S=d.default.createElement(f.default,{container:t,containerPadding:n,target:r,placement:a,shouldUpdatePosition:l},S),_){var k=C.onExit,x=C.onExiting,E=C.onEnter,A=C.onEntering,T=C.onEntered;S=d.default.createElement(_,{in:C.show,appear:!0,onExit:k,onExiting:x,onExited:this.onHiddenListener,onEnter:E,onEntering:A,onEntered:T},S)}return y&&(S=d.default.createElement(p.default,{onRootClose:C.onHide,event:C.rootCloseEvent},S)),d.default.createElement(h.default,{container:t},S)},t}(d.default.Component);w.propTypes=r({},h.default.propTypes,f.default.propTypes,{show:a.default.bool,rootClose:a.default.bool,rootCloseEvent:p.default.propTypes.event,onHide:function(e){var t=a.default.func;e.rootClose&&(t=t.isRequired);for(var n=arguments.length,r=Array(n>1?n-1:0),l=1;l<n;l++)r[l-1]=arguments[l];return t.apply(void 0,[e].concat(r))},transition:l.default,onEnter:a.default.func,onEntering:a.default.func,onEntered:a.default.func,onExit:a.default.func,onExiting:a.default.func,onExited:a.default.func}),t.default=w,e.exports=t.default},function(e,t,n){"use strict";var r=n(40);t.__esModule=!0,t.default=void 0;var a=r(n(273));t.on=a.default;var l=r(n(274));t.off=l.default;var d=r(n(703));t.filter=d.default;var h=r(n(705));t.listen=h.default;var f={on:a.default,off:l.default,filter:d.default,listen:h.default};t.default=f},function(e,t,n){var r=n(715);e.exports=function(e,t){if(null==e)return{};var n,a,l=r(e,t);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(a=0;a<d.length;a++)n=d[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var r=n(249),a=n(173),l=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var d=e[t];l.call(e,t)&&a(d,n)&&(void 0!==n||t in e)||r(e,t,n)}},function(e,t,n){var r=n(102),a=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=a},function(e,t,n){var r=n(141),a=n(172);e.exports=function(e){if(!a(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,n(39))},function(e,t){var n=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return n.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t,n){var r=n(173),a=n(174),l=n(252),d=n(172);e.exports=function(e,t,n){if(!d(n))return!1;var h=typeof t;return!!("number"==h?a(n)&&l(t,n.length):"string"==h&&t in n)&&r(n[t],e)}},function(e,t){var n=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},function(e,t,n){var r=n(526),a=n(142),l=Object.prototype,d=l.hasOwnProperty,h=l.propertyIsEnumerable,f=r(function(){return arguments}())?r:function(e){return a(e)&&d.call(e,"callee")&&!h.call(e,"callee")};e.exports=f},function(e,t,n){(function(e){var r=n(83),a=n(527),l=t&&!t.nodeType&&t,d=l&&"object"==typeof e&&e&&!e.nodeType&&e,h=d&&d.exports===l?r.Buffer:void 0,f=(h?h.isBuffer:void 0)||a;e.exports=f}).call(this,n(68)(e))},function(e,t,n){var r=n(528),a=n(529),l=n(530),d=l&&l.isTypedArray,h=d?a(d):r;e.exports=h},function(e,t,n){var r=n(535),a=n(175);e.exports=function(e,t){return e&&r(e,t,a)}},function(e,t,n){var r=n(537),a=n(583),l=n(250),d=n(84),h=n(594);e.exports=function(e){return"function"==typeof e?e:null==e?l:"object"==typeof e?d(e)?a(e[0],e[1]):r(e):h(e)}},function(e,t,n){var r=n(176),a=n(544),l=n(545),d=n(546),h=n(547),f=n(548);function p(e){var t=this.__data__=new r(e);this.size=t.size}p.prototype.clear=a,p.prototype.delete=l,p.prototype.get=d,p.prototype.has=h,p.prototype.set=f,e.exports=p},function(e,t,n){var r=n(561),a=n(142);e.exports=function e(t,n,l,d,h){return t===n||(null==t||null==n||!a(t)&&!a(n)?t!=t&&n!=n:r(t,n,l,d,e,h))}},function(e,t,n){var r=n(562),a=n(357),l=n(565);e.exports=function(e,t,n,d,h,f){var p=1&n,y=e.length,w=t.length;if(y!=w&&!(p&&w>y))return!1;var _=f.get(e);if(_&&f.get(t))return _==t;var C=-1,S=!0,k=2&n?new r:void 0;for(f.set(e,t),f.set(t,e);++C<y;){var x=e[C],E=t[C];if(d)var A=p?d(E,x,C,t,e,f):d(x,E,C,e,t,f);if(void 0!==A){if(A)continue;S=!1;break}if(k){if(!a(t,(function(e,t){if(!l(k,t)&&(x===e||h(x,e,n,d,f)))return k.push(t)}))){S=!1;break}}else if(x!==E&&!h(x,E,n,d,f)){S=!1;break}}return f.delete(e),f.delete(t),S}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},function(e,t,n){var r=n(172);e.exports=function(e){return e==e&&!r(e)}},function(e,t){e.exports=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}},function(e,t,n){var r=n(361),a=n(180);e.exports=function(e,t){for(var n=0,l=(t=r(t,e)).length;null!=e&&n<l;)e=e[a(t[n++])];return n&&n==l?e:void 0}},function(e,t,n){var r=n(84),a=n(255),l=n(585),d=n(588);e.exports=function(e,t){return r(e)?e:a(e,t)?[e]:l(d(e))}},function(e,t,n){"use strict";var r=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable;function d(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,h,f=d(e),p=1;p<arguments.length;p++){for(var y in n=Object(arguments[p]))a.call(n,y)&&(f[y]=n[y]);if(r){h=r(n);for(var w=0;w<h.length;w++)l.call(n,h[w])&&(f[h[w]]=n[h[w]])}}return f}},function(e,t,n){var r=n(103),a=n(364),l=n(257),d=n(181),h=n(259),f=n(91),p=n(365),y=Object.getOwnPropertyDescriptor;t.f=r?y:function(e,t){if(e=d(e),t=h(t,!0),p)try{return y(e,t)}catch(e){}if(f(e,t))return l(!a.f.call(e,t),e[t])}},function(e,t,n){"use strict";var r={}.propertyIsEnumerable,a=Object.getOwnPropertyDescriptor,l=a&&!r.call({1:2},1);t.f=l?function(e){var t=a(this,e);return!!t&&t.enumerable}:r},function(e,t,n){var r=n(103),a=n(62),l=n(608);e.exports=!r&&!a((function(){return 7!=Object.defineProperty(l("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(70),a=n(144),l=n(91),d=n(260),h=n(367),f=n(609),p=f.get,y=f.enforce,w=String(String).split("String");(e.exports=function(e,t,n,h){var f,p=!!h&&!!h.unsafe,_=!!h&&!!h.enumerable,C=!!h&&!!h.noTargetGet;"function"==typeof n&&("string"!=typeof t||l(n,"name")||a(n,"name",t),(f=y(n)).source||(f.source=w.join("string"==typeof t?t:""))),e!==r?(p?!C&&e[t]&&(_=!0):delete e[t],_?e[t]=n:a(e,t,n)):_?e[t]=n:d(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&p(this).source||h(this)}))},function(e,t,n){var r=n(261),a=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(e){return a.call(e)}),e.exports=r.inspectSource},function(e,t,n){var r=n(369),a=n(370),l=r("keys");e.exports=function(e){return l[e]||(l[e]=a(e))}},function(e,t,n){var r=n(611),a=n(261);(e.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.8.3",mode:r?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++n+r).toString(36)}},function(e,t){e.exports={}},function(e,t,n){var r=n(614),a=n(70),l=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?l(r[e])||l(a[e]):r[e]&&r[e][t]||a[e]&&a[e][t]}},function(e,t,n){var r=n(91),a=n(181),l=n(616).indexOf,d=n(371);e.exports=function(e,t){var n,h=a(e),f=0,p=[];for(n in h)!r(d,n)&&r(h,n)&&p.push(n);for(;t.length>f;)r(h,n=t[f++])&&(~l(p,n)||p.push(n));return p}},function(e,t,n){var r=n(145),a=Math.max,l=Math.min;e.exports=function(e,t){var n=r(e);return n<0?a(n+t,0):l(n,t)}},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(143),a=n(623),l=n(262)("species");e.exports=function(e,t){var n;return a(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!a(n.prototype)?r(n)&&null===(n=n[l])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},function(e,t,n){var r=n(62);e.exports=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())}))},function(e,t,n){var r=n(62),a=n(262),l=n(625),d=a("species");e.exports=function(e){return l>=51||!r((function(){var t=[];return(t.constructor={})[d]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},function(e,t,n){var r=n(103),a=n(62),l=n(91),d=Object.defineProperty,h={},f=function(e){throw e};e.exports=function(e,t){if(l(h,e))return h[e];t||(t={});var n=[][e],p=!!l(t,"ACCESSORS")&&t.ACCESSORS,y=l(t,0)?t[0]:f,w=l(t,1)?t[1]:void 0;return h[e]=!!n&&!a((function(){if(p&&!r)return!0;var e={length:-1};p?d(e,1,{enumerable:!0,get:f}):e[1]=1,n.call(e,y,w)}))}},function(e,t,n){var r=n(62);e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},function(e,t,n){"use strict";var r=n(120),a=n(263);r({target:"RegExp",proto:!0,forced:/./.exec!==a},{exec:a})},function(e,t,n){"use strict";var r=n(18),a=n(37),l=n(159),d=n(57),h=n(384),f=n(221),p=n(133),y=n(46),w=n(28),_=n(222),C=n(97),S=n(315);e.exports=function(e,t,n){var k=-1!==e.indexOf("Map"),x=-1!==e.indexOf("Weak"),E=k?"set":"add",A=a[e],T=A&&A.prototype,R=A,O={},M=function(e){var t=T[e];d(T,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(x&&!y(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return x&&!y(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(x&&!y(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})};if(l(e,"function"!=typeof A||!(x||T.forEach&&!w((function(){(new A).entries().next()})))))R=n.getConstructor(t,e,k,E),h.REQUIRED=!0;else if(l(e,!0)){var P=new R,L=P[E](x?{}:-0,1)!=P,D=w((function(){P.has(1)})),I=_((function(e){new A(e)})),F=!x&&w((function(){for(var e=new A,t=5;t--;)e[E](t,t);return!e.has(-0)}));I||((R=t((function(t,n){p(t,R,e);var r=S(new A,t,R);return null!=n&&f(n,r[E],r,k),r}))).prototype=T,T.constructor=R),(D||F)&&(M("delete"),M("has"),k&&M("get")),(F||L)&&M(E),x&&T.clear&&delete T.clear}return O[e]=R,r({global:!0,forced:R!=A},O),C(R,e),x||n.setStrong(R,e,k),R}},function(e,t,n){var r=n(131),a=n(46),l=n(49),d=n(55).f,h=n(156),f=n(643),p=h("meta"),y=0,w=Object.isExtensible||function(){return!0},_=function(e){d(e,p,{value:{objectID:"O"+ ++y,weakData:{}}})},C=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!a(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!l(e,p)){if(!w(e))return"F";if(!t)return"E";_(e)}return e[p].objectID},getWeakData:function(e,t){if(!l(e,p)){if(!w(e))return!0;if(!t)return!1;_(e)}return e[p].weakData},onFreeze:function(e){return f&&C.REQUIRED&&w(e)&&!l(e,p)&&_(e),e}};r[p]=!0},function(e,t,n){"use strict";var r=n(55).f,a=n(136),l=n(219),d=n(98),h=n(133),f=n(221),p=n(231),y=n(220),w=n(54),_=n(384).fastKey,C=n(80),S=C.set,k=C.getterFor;e.exports={getConstructor:function(e,t,n,p){var y=e((function(e,r){h(e,y,t),S(e,{type:t,index:a(null),first:void 0,last:void 0,size:0}),w||(e.size=0),null!=r&&f(r,e[p],e,n)})),C=k(t),x=function(e,t,n){var r,a,l=C(e),d=E(e,t);return d?d.value=n:(l.last=d={index:a=_(t,!0),key:t,value:n,previous:r=l.last,next:void 0,removed:!1},l.first||(l.first=d),r&&(r.next=d),w?l.size++:e.size++,"F"!==a&&(l.index[a]=d)),e},E=function(e,t){var n,r=C(e),a=_(t);if("F"!==a)return r.index[a];for(n=r.first;n;n=n.next)if(n.key==t)return n};return l(y.prototype,{clear:function(){for(var e=C(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,w?e.size=0:this.size=0},delete:function(e){var t=C(this),n=E(this,e);if(n){var r=n.next,a=n.previous;delete t.index[n.index],n.removed=!0,a&&(a.next=r),r&&(r.previous=a),t.first==n&&(t.first=r),t.last==n&&(t.last=a),w?t.size--:this.size--}return!!n},forEach:function(e){for(var t,n=C(this),r=d(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!E(this,e)}}),l(y.prototype,n?{get:function(e){var t=E(this,e);return t&&t.value},set:function(e,t){return x(this,0===e?0:e,t)}}:{add:function(e){return x(this,e=0===e?0:e,e)}}),w&&r(y.prototype,"size",{get:function(){return C(this).size}}),y},setStrong:function(e,t,n){var r=t+" Iterator",a=k(t),l=k(r);p(e,t,(function(e,t){S(this,{type:r,target:e,state:a(e),kind:t,last:void 0})}),(function(){for(var e=l(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),y(t)}}},,,,function(e,t,n){var r=n(650);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,a){return e.call(t,n,r,a)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){var r=n(265),a=n(146).document,l=r(a)&&r(a.createElement);e.exports=function(e){return l?a.createElement(e):{}}},function(e,t,n){var r=n(268);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){var r=n(270),a=Math.min;e.exports=function(e){return e>0?a(r(e),9007199254740991):0}},function(e,t,n){var r=n(72),a=n(146),l=a["__core-js_shared__"]||(a["__core-js_shared__"]={});(e.exports=function(e,t){return l[e]||(l[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(394)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports=!0},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var r=n(189),a=n(663),l=n(396),d=n(271)("IE_PROTO"),h=function(){},f=function(){var e,t=n(390)("iframe"),r=l.length;for(t.style.display="none",n(664).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),f=e.F;r--;)delete f.prototype[l[r]];return f()};e.exports=Object.create||function(e,t){var n;return null!==e?(h.prototype=r(e),n=new h,h.prototype=null,n[d]=e):n=f(),void 0===t?n:a(n,t)}},function(e,t,n){var r=n(122),a=n(192),l=n(267),d=n(397).f;e.exports=function(e){return function(t){for(var n,h=l(t),f=a(h),p=f.length,y=0,w=[];p>y;)n=f[y++],r&&!d.call(h,n)||w.push(e?[n,h[n]]:h[n]);return w}}},function(e,t,n){var r=n(188).f,a=n(191),l=n(104)("toStringTag");e.exports=function(e,t,n){e&&!a(e=n?e:e.prototype,l)&&r(e,l,{configurable:!0,value:t})}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t,n,l){return(0,r.default)(e,t,n,l),{remove:function(){(0,a.default)(e,t,n,l)}}};var r=l(n(273)),a=l(n(274));function l(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0;var r=w(n(75)),a=w(n(1)),l=w(n(194)),d=w(n(0)),h=w(n(38)),f=w(n(195)),p=w(n(123)),y=w(n(688));function w(e){return e&&e.__esModule?e:{default:e}}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var S=function(e){function t(){var n,r;_(this,t);for(var a=arguments.length,l=Array(a),d=0;d<a;d++)l[d]=arguments[d];return n=r=C(this,e.call.apply(e,[this].concat(l))),r.getMountNode=function(){return r._portalContainerNode},C(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.UNSAFE_componentWillMount=function(){if(r.default){var e=this.props.container;"function"==typeof e&&(e=e()),e&&!h.default.findDOMNode(e)||this.setContainer(e)}},t.prototype.componentDidMount=function(){this._portalContainerNode?this.props.onRendered&&this.props.onRendered():(this.setContainer(this.props.container),this.forceUpdate(this.props.onRendered))},t.prototype.UNSAFE_componentWillReceiveProps=function(e){e.container!==this.props.container&&this.setContainer(e.container)},t.prototype.componentWillUnmount=function(){this._portalContainerNode=null},t.prototype.setContainer=function(e){this._portalContainerNode=(0,f.default)(e,(0,p.default)(this).body)},t.prototype.render=function(){return this.props.children&&this._portalContainerNode?h.default.createPortal(this.props.children,this._portalContainerNode):null},t}(d.default.Component);S.displayName="Portal",S.propTypes={container:a.default.oneOfType([l.default,a.default.func]),onRendered:a.default.func},t.default=h.default.createPortal?S:y.default,e.exports=t.default},function(e,t,n){"use strict";var r=n(40);t.__esModule=!0,t.default=function(e){var t=(0,d.default)(e),n=(0,l.default)(t),r=t&&t.documentElement,h={top:0,left:0,height:0,width:0};if(!t)return;if(!(0,a.default)(r,e))return h;void 0!==e.getBoundingClientRect&&(h=e.getBoundingClientRect());return h={top:h.top+(n.pageYOffset||r.scrollTop)-(r.clientTop||0),left:h.left+(n.pageXOffset||r.scrollLeft)-(r.clientLeft||0),width:(null==h.width?e.offsetWidth:h.width)||0,height:(null==h.height?e.offsetHeight:h.height)||0}};var a=r(n(94)),l=r(n(196)),d=r(n(106));e.exports=t.default},function(e,t,n){"use strict";var r=n(40);t.__esModule=!0,t.default=function(e){return(0,a.default)(e.replace(l,"ms-"))};var a=r(n(694)),l=/^-ms-/;e.exports=t.default},function(e,t,n){"use strict";var r=n(40);t.__esModule=!0,t.default=function(e,t){var n=(0,a.default)(e);if(void 0===t)return n?"pageYOffset"in n?n.pageYOffset:n.document.documentElement.scrollTop:e.scrollTop;n?n.scrollTo("pageXOffset"in n?n.pageXOffset:n.document.documentElement.scrollLeft,t):e.scrollTop=t};var a=r(n(196));e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")},e.exports=t.default},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t,n){(function(e){ace.define("ace/snippets",[],(function(e,t,n){"use strict";var r=e("./lib/oop"),a=e("./lib/event_emitter").EventEmitter,l=e("./lib/lang"),d=e("./range").Range,h=e("./range_list").RangeList,f=e("./keyboard/hash_handler").HashHandler,p=e("./tokenizer").Tokenizer,y=e("./clipboard"),w={CURRENT_WORD:function(e){return e.session.getTextRange(e.session.getWordRange())},SELECTION:function(e,t,n){var r=e.session.getTextRange();return n?r.replace(/\n\r?([ \t]*\S)/g,"\n"+n+"$1"):r},CURRENT_LINE:function(e){return e.session.getLine(e.getCursorPosition().row)},PREV_LINE:function(e){return e.session.getLine(e.getCursorPosition().row-1)},LINE_INDEX:function(e){return e.getCursorPosition().row},LINE_NUMBER:function(e){return e.getCursorPosition().row+1},SOFT_TABS:function(e){return e.session.getUseSoftTabs()?"YES":"NO"},TAB_SIZE:function(e){return e.session.getTabSize()},CLIPBOARD:function(e){return y.getText&&y.getText()},FILENAME:function(e){return/[^/\\]*$/.exec(this.FILEPATH(e))[0]},FILENAME_BASE:function(e){return/[^/\\]*$/.exec(this.FILEPATH(e))[0].replace(/\.[^.]*$/,"")},DIRECTORY:function(e){return this.FILEPATH(e).replace(/[^/\\]*$/,"")},FILEPATH:function(e){return"/not implemented.txt"},WORKSPACE_NAME:function(){return"Unknown"},FULLNAME:function(){return"Unknown"},BLOCK_COMMENT_START:function(e){var t=e.session.$mode||{};return t.blockComment&&t.blockComment.start||""},BLOCK_COMMENT_END:function(e){var t=e.session.$mode||{};return t.blockComment&&t.blockComment.end||""},LINE_COMMENT:function(e){return(e.session.$mode||{}).lineCommentStart||""},CURRENT_YEAR:_.bind(null,{year:"numeric"}),CURRENT_YEAR_SHORT:_.bind(null,{year:"2-digit"}),CURRENT_MONTH:_.bind(null,{month:"numeric"}),CURRENT_MONTH_NAME:_.bind(null,{month:"long"}),CURRENT_MONTH_NAME_SHORT:_.bind(null,{month:"short"}),CURRENT_DATE:_.bind(null,{day:"2-digit"}),CURRENT_DAY_NAME:_.bind(null,{weekday:"long"}),CURRENT_DAY_NAME_SHORT:_.bind(null,{weekday:"short"}),CURRENT_HOUR:_.bind(null,{hour:"2-digit",hour12:!1}),CURRENT_MINUTE:_.bind(null,{minute:"2-digit"}),CURRENT_SECOND:_.bind(null,{second:"2-digit"})};function _(e){var t=(new Date).toLocaleString("en-us",e);return 1==t.length?"0"+t:t}w.SELECTED_TEXT=w.SELECTION;var C=function(){this.snippetMap={},this.snippetNameMap={}};(function(){r.implement(this,a),this.getTokenizer=function(){return C.$tokenizer||this.createTokenizer()},this.createTokenizer=function(){function e(e){return e=e.substr(1),/^\d+$/.test(e)?[{tabstopId:parseInt(e,10)}]:[{text:e}]}function t(e){return"(?:[^\\\\"+e+"]|\\\\.)"}var n={regex:"/("+t("/")+"+)/",onMatch:function(e,t,n){var r=n[0];return r.fmtString=!0,r.guard=e.slice(1,-1),r.flag="",""},next:"formatString"};return C.$tokenizer=new p({start:[{regex:/\\./,onMatch:function(e,t,n){var r=e[1];return("}"==r&&n.length||-1!="`$\\".indexOf(r))&&(e=r),[e]}},{regex:/}/,onMatch:function(e,t,n){return[n.length?n.shift():e]}},{regex:/\$(?:\d+|\w+)/,onMatch:e},{regex:/\$\{[\dA-Z_a-z]+/,onMatch:function(t,n,r){var a=e(t.substr(1));return r.unshift(a[0]),a},next:"snippetVar"},{regex:/\n/,token:"newline",merge:!1}],snippetVar:[{regex:"\\|"+t("\\|")+"*\\|",onMatch:function(e,t,n){var r=e.slice(1,-1).replace(/\\[,|\\]|,/g,(function(e){return 2==e.length?e[1]:"\0"})).split("\0").map((function(e){return{value:e}}));return n[0].choices=r,[r[0]]},next:"start"},n,{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"start"}],formatString:[{regex:/:/,onMatch:function(e,t,n){return n.length&&n[0].expectElse?(n[0].expectElse=!1,n[0].ifEnd={elseEnd:n[0]},[n[0].ifEnd]):":"}},{regex:/\\./,onMatch:function(e,t,n){var r=e[1];return"}"==r&&n.length||-1!="`$\\".indexOf(r)?e=r:"n"==r?e="\n":"t"==r?e="\t":-1!="ulULE".indexOf(r)&&(e={changeCase:r,local:r>"a"}),[e]}},{regex:"/\\w*}",onMatch:function(e,t,n){var r=n.shift();return r&&(r.flag=e.slice(1,-1)),this.next=r&&r.tabstopId?"start":"",[r||e]},next:"start"},{regex:/\$(?:\d+|\w+)/,onMatch:function(e,t,n){return[{text:e.slice(1)}]}},{regex:/\${\w+/,onMatch:function(e,t,n){var r={text:e.slice(2)};return n.unshift(r),[r]},next:"formatStringVar"},{regex:/\n/,token:"newline",merge:!1},{regex:/}/,onMatch:function(e,t,n){var r=n.shift();return this.next=r&&r.tabstopId?"start":"",[r||e]},next:"start"}],formatStringVar:[{regex:/:\/\w+}/,onMatch:function(e,t,n){return n[0].formatFunction=e.slice(2,-1),[n.shift()]},next:"formatString"},n,{regex:/:[\?\-+]?/,onMatch:function(e,t,n){"+"==e[1]&&(n[0].ifEnd=n[0]),"?"==e[1]&&(n[0].expectElse=!0)},next:"formatString"},{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"formatString"}]})},this.tokenizeTmSnippet=function(e,t){return this.getTokenizer().getLineTokens(e,t).tokens.map((function(e){return e.value||e}))},this.getVariableValue=function(e,t,n){if(/^\d+$/.test(t))return(this.variables.__||{})[t]||"";if(/^[A-Z]\d+$/.test(t))return(this.variables[t[0]+"__"]||{})[t.substr(1)]||"";if(t=t.replace(/^TM_/,""),!this.variables.hasOwnProperty(t))return"";var r=this.variables[t];return"function"==typeof r&&(r=this.variables[t](e,t,n)),null==r?"":r},this.variables=w,this.tmStrFormat=function(e,t,n){if(!t.fmt)return e;var r=t.flag||"",a=t.guard;a=new RegExp(a,r.replace(/[^gim]/g,""));var l="string"==typeof t.fmt?this.tokenizeTmSnippet(t.fmt,"formatString"):t.fmt,d=this;return e.replace(a,(function(){var e=d.variables.__;d.variables.__=[].slice.call(arguments);for(var t=d.resolveVariables(l,n),r="E",a=0;a<t.length;a++){var h=t[a];if("object"==typeof h)if(t[a]="",h.changeCase&&h.local){var f=t[a+1];f&&"string"==typeof f&&("u"==h.changeCase?t[a]=f[0].toUpperCase():t[a]=f[0].toLowerCase(),t[a+1]=f.substr(1))}else h.changeCase&&(r=h.changeCase);else"U"==r?t[a]=h.toUpperCase():"L"==r&&(t[a]=h.toLowerCase())}return d.variables.__=e,t.join("")}))},this.tmFormatFunction=function(e,t,n){return"upcase"==t.formatFunction?e.toUpperCase():"downcase"==t.formatFunction?e.toLowerCase():e},this.resolveVariables=function(e,t){for(var n=[],r="",a=!0,l=0;l<e.length;l++){var d=e[l];if("string"!=typeof d){if(d){if(a=!1,d.fmtString){var h=e.indexOf(d,l+1);-1==h&&(h=e.length),d.fmt=e.slice(l+1,h),l=h}if(d.text){var f=this.getVariableValue(t,d.text,r)+"";d.fmtString&&(f=this.tmStrFormat(f,d,t)),d.formatFunction&&(f=this.tmFormatFunction(f,d,t)),f&&!d.ifEnd?(n.push(f),p(d)):!f&&d.ifEnd&&p(d.ifEnd)}else d.elseEnd?p(d.elseEnd):(null!=d.tabstopId||null!=d.changeCase)&&n.push(d)}}else n.push(d),"\n"==d?(a=!0,r=""):a&&(r=/^\t*/.exec(d)[0],a=/\S/.test(d))}function p(t){var n=e.indexOf(t,l+1);-1!=n&&(l=n)}return n},this.insertSnippetForSelection=function(e,t){var n=e.getCursorPosition(),r=e.session.getLine(n.row),a=e.session.getTabString(),l=r.match(/^\s*/)[0];n.column<l.length&&(l=l.slice(0,n.column)),t=t.replace(/\r/g,"");var d=this.tokenizeTmSnippet(t);d=(d=this.resolveVariables(d,e)).map((function(e){return"\n"==e?e+l:"string"==typeof e?e.replace(/\t/g,a):e}));var h=[];d.forEach((function(e,t){if("object"==typeof e){var n=e.tabstopId,r=h[n];if(r||((r=h[n]=[]).index=n,r.value="",r.parents={}),-1===r.indexOf(e)){e.choices&&!r.choices&&(r.choices=e.choices),r.push(e);var a=d.indexOf(e,t+1);if(-1!==a){var l=d.slice(t+1,a);l.some((function(e){return"object"==typeof e}))&&!r.value?r.value=l:!l.length||r.value&&"string"==typeof r.value||(r.value=l.join(""))}}}})),h.forEach((function(e){e.length=0}));var f={};function p(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];if("object"==typeof r){if(f[r.tabstopId])continue;r=t[e.lastIndexOf(r,n-1)]||{tabstopId:r.tabstopId}}t[n]=r}return t}for(var y=0;y<d.length;y++){var w=d[y];if("object"==typeof w){var _=w.tabstopId,C=h[_],k=d.indexOf(w,y+1);if(f[_])f[_]===w&&(delete f[_],Object.keys(f).forEach((function(e){C.parents[e]=!0})));else{f[_]=w;var x=C.value;"string"!=typeof x?x=p(x):w.fmt&&(x=this.tmStrFormat(x,w,e)),d.splice.apply(d,[y+1,Math.max(0,k-y)].concat(x,w)),-1===C.indexOf(w)&&C.push(w)}}}var E=0,A=0,T="";d.forEach((function(e){if("string"==typeof e){var t=e.split("\n");t.length>1?(A=t[t.length-1].length,E+=t.length-1):A+=e.length,T+=e}else e&&(e.start?e.end={row:E,column:A}:e.start={row:E,column:A})}));var R=e.getSelectionRange(),O=e.session.replace(R,T),M=new S(e),P=e.inVirtualSelectionMode&&e.selection.index;M.addTabstops(h,R.start,O,P)},this.insertSnippet=function(e,t){var n=this;if(e.inVirtualSelectionMode)return n.insertSnippetForSelection(e,t);e.forEachSelection((function(){n.insertSnippetForSelection(e,t)}),null,{keepOrder:!0}),e.tabstopManager&&e.tabstopManager.tabNext()},this.$getScope=function(e){var t=e.session.$mode.$id||"";if("html"===(t=t.split("/").pop())||"php"===t){"php"!==t||e.session.$mode.inlinePhp||(t="html");var n=e.getCursorPosition(),r=e.session.getState(n.row);"object"==typeof r&&(r=r[0]),r.substring&&("js-"==r.substring(0,3)?t="javascript":"css-"==r.substring(0,4)?t="css":"php-"==r.substring(0,4)&&(t="php"))}return t},this.getActiveScopes=function(e){var t=this.$getScope(e),n=[t],r=this.snippetMap;return r[t]&&r[t].includeScopes&&n.push.apply(n,r[t].includeScopes),n.push("_"),n},this.expandWithTab=function(e,t){var n=this,r=e.forEachSelection((function(){return n.expandSnippetForSelection(e,t)}),null,{keepOrder:!0});return r&&e.tabstopManager&&e.tabstopManager.tabNext(),r},this.expandSnippetForSelection=function(e,t){var n,r=e.getCursorPosition(),a=e.session.getLine(r.row),l=a.substring(0,r.column),d=a.substr(r.column),h=this.snippetMap;return this.getActiveScopes(e).some((function(e){var t=h[e];return t&&(n=this.findMatchingSnippet(t,l,d)),!!n}),this),!!n&&(t&&t.dryRun||(e.session.doc.removeInLine(r.row,r.column-n.replaceBefore.length,r.column+n.replaceAfter.length),this.variables.M__=n.matchBefore,this.variables.T__=n.matchAfter,this.insertSnippetForSelection(e,n.content),this.variables.M__=this.variables.T__=null),!0)},this.findMatchingSnippet=function(e,t,n){for(var r=e.length;r--;){var a=e[r];if((!a.startRe||a.startRe.test(t))&&((!a.endRe||a.endRe.test(n))&&(a.startRe||a.endRe)))return a.matchBefore=a.startRe?a.startRe.exec(t):[""],a.matchAfter=a.endRe?a.endRe.exec(n):[""],a.replaceBefore=a.triggerRe?a.triggerRe.exec(t)[0]:"",a.replaceAfter=a.endTriggerRe?a.endTriggerRe.exec(n)[0]:"",a}},this.snippetMap={},this.snippetNameMap={},this.register=function(e,t){var n=this.snippetMap,r=this.snippetNameMap,a=this;function d(e){return e&&!/^\^?\(.*\)\$?$|^\\b$/.test(e)&&(e="(?:"+e+")"),e||""}function h(e,t,n){return e=d(e),t=d(t),n?(e=t+e)&&"$"!=e[e.length-1]&&(e+="$"):(e+=t)&&"^"!=e[0]&&(e="^"+e),new RegExp(e)}function f(e){e.scope||(e.scope=t||"_"),t=e.scope,n[t]||(n[t]=[],r[t]={});var d=r[t];if(e.name){var f=d[e.name];f&&a.unregister(f),d[e.name]=e}n[t].push(e),e.prefix&&(e.tabTrigger=e.prefix),!e.content&&e.body&&(e.content=Array.isArray(e.body)?e.body.join("\n"):e.body),e.tabTrigger&&!e.trigger&&(!e.guard&&/^\w/.test(e.tabTrigger)&&(e.guard="\\b"),e.trigger=l.escapeRegExp(e.tabTrigger)),(e.trigger||e.guard||e.endTrigger||e.endGuard)&&(e.startRe=h(e.trigger,e.guard,!0),e.triggerRe=new RegExp(e.trigger),e.endRe=h(e.endTrigger,e.endGuard,!0),e.endTriggerRe=new RegExp(e.endTrigger))}e||(e=[]),Array.isArray(e)?e.forEach(f):Object.keys(e).forEach((function(t){f(e[t])})),this._signal("registerSnippets",{scope:t})},this.unregister=function(e,t){var n=this.snippetMap,r=this.snippetNameMap;function a(e){var a=r[e.scope||t];if(a&&a[e.name]){delete a[e.name];var l=n[e.scope||t],d=l&&l.indexOf(e);d>=0&&l.splice(d,1)}}e.content?a(e):Array.isArray(e)&&e.forEach(a)},this.parseSnippetFile=function(e){e=e.replace(/\r/g,"");for(var t,n=[],r={},a=/^#.*|^({[\s\S]*})\s*$|^(\S+) (.*)$|^((?:\n*\t.*)+)/gm;t=a.exec(e);){if(t[1])try{r=JSON.parse(t[1]),n.push(r)}catch(e){}if(t[4])r.content=t[4].replace(/^\t/gm,""),n.push(r),r={};else{var l=t[2],d=t[3];if("regex"==l){var h=/\/((?:[^\/\\]|\\.)*)|$/g;r.guard=h.exec(d)[1],r.trigger=h.exec(d)[1],r.endTrigger=h.exec(d)[1],r.endGuard=h.exec(d)[1]}else"snippet"==l?(r.tabTrigger=d.match(/^\S*/)[0],r.name||(r.name=d)):l&&(r[l]=d)}}return n},this.getSnippetByName=function(e,t){var n,r=this.snippetNameMap;return this.getActiveScopes(t).some((function(t){var a=r[t];return a&&(n=a[e]),!!n}),this),n}}).call(C.prototype);var S=function(e){if(e.tabstopManager)return e.tabstopManager;e.tabstopManager=this,this.$onChange=this.onChange.bind(this),this.$onChangeSelection=l.delayedCall(this.onChangeSelection.bind(this)).schedule,this.$onChangeSession=this.onChangeSession.bind(this),this.$onAfterExec=this.onAfterExec.bind(this),this.attach(e)};(function(){this.attach=function(e){this.index=0,this.ranges=[],this.tabstops=[],this.$openTabstops=null,this.selectedTabstop=null,this.editor=e,this.editor.on("change",this.$onChange),this.editor.on("changeSelection",this.$onChangeSelection),this.editor.on("changeSession",this.$onChangeSession),this.editor.commands.on("afterExec",this.$onAfterExec),this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler)},this.detach=function(){this.tabstops.forEach(this.removeTabstopMarkers,this),this.ranges=null,this.tabstops=null,this.selectedTabstop=null,this.editor.removeListener("change",this.$onChange),this.editor.removeListener("changeSelection",this.$onChangeSelection),this.editor.removeListener("changeSession",this.$onChangeSession),this.editor.commands.removeListener("afterExec",this.$onAfterExec),this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.tabstopManager=null,this.editor=null},this.onChange=function(e){for(var t="r"==e.action[0],n=this.selectedTabstop||{},r=n.parents||{},a=(this.tabstops||[]).slice(),l=0;l<a.length;l++){var d=a[l],h=d==n||r[d.index];if(d.rangeList.$bias=h?0:1,"remove"==e.action&&d!==n){var f=d.parents&&d.parents[n.index],p=d.rangeList.pointIndex(e.start,f);p=p<0?-p-1:p+1;var y=d.rangeList.pointIndex(e.end,f);y=y<0?-y-1:y-1;for(var w=d.rangeList.ranges.slice(p,y),_=0;_<w.length;_++)this.removeRange(w[_])}d.rangeList.$onChange(e)}var C=this.editor.session;this.$inChange||!t||1!=C.getLength()||C.getValue()||this.detach()},this.updateLinkedFields=function(){var e=this.selectedTabstop;if(e&&e.hasLinkedRanges&&e.firstNonLinked){this.$inChange=!0;for(var n=this.editor.session,r=n.getTextRange(e.firstNonLinked),a=0;a<e.length;a++){var l=e[a];if(l.linked){var d=l.original,h=t.snippetManager.tmStrFormat(r,d,this.editor);n.replace(l,h)}}this.$inChange=!1}},this.onAfterExec=function(e){e.command&&!e.command.readOnly&&this.updateLinkedFields()},this.onChangeSelection=function(){if(this.editor){for(var e=this.editor.selection.lead,t=this.editor.selection.anchor,n=this.editor.selection.isEmpty(),r=0;r<this.ranges.length;r++)if(!this.ranges[r].linked){var a=this.ranges[r].contains(e.row,e.column),l=n||this.ranges[r].contains(t.row,t.column);if(a&&l)return}this.detach()}},this.onChangeSession=function(){this.detach()},this.tabNext=function(e){var t=this.tabstops.length,n=this.index+(e||1);(n=Math.min(Math.max(n,1),t))==t&&(n=0),this.selectTabstop(n),0===n&&this.detach()},this.selectTabstop=function(e){this.$openTabstops=null;var t=this.tabstops[this.index];if(t&&this.addTabstopMarkers(t),this.index=e,(t=this.tabstops[this.index])&&t.length){this.selectedTabstop=t;var n=t.firstNonLinked||t;if(t.choices&&(n.cursor=n.start),this.editor.inVirtualSelectionMode)this.editor.selection.fromOrientedRange(n);else{var r=this.editor.multiSelect;r.toSingleRange(n);for(var a=0;a<t.length;a++)t.hasLinkedRanges&&t[a].linked||r.addRange(t[a].clone(),!0)}this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler),this.selectedTabstop&&this.selectedTabstop.choices&&this.editor.execCommand("startAutocomplete",{matches:this.selectedTabstop.choices})}},this.addTabstops=function(e,t,n){var r=this.useLink||!this.editor.getOption("enableMultiselect");if(this.$openTabstops||(this.$openTabstops=[]),!e[0]){var a=d.fromPoints(n,n);x(a.start,t),x(a.end,t),e[0]=[a],e[0].index=0}var l=[this.index+1,0],f=this.ranges;e.forEach((function(e,n){for(var a=this.$openTabstops[n]||e,p=0;p<e.length;p++){var y=e[p],w=d.fromPoints(y.start,y.end||y.start);k(w.start,t),k(w.end,t),w.original=y,w.tabstop=a,f.push(w),a!=e?a.unshift(w):a[p]=w,y.fmtString||a.firstNonLinked&&r?(w.linked=!0,a.hasLinkedRanges=!0):a.firstNonLinked||(a.firstNonLinked=w)}a.firstNonLinked||(a.hasLinkedRanges=!1),a===e&&(l.push(a),this.$openTabstops[n]=a),this.addTabstopMarkers(a),a.rangeList=a.rangeList||new h,a.rangeList.$bias=0,a.rangeList.addList(a)}),this),l.length>2&&(this.tabstops.length&&l.push(l.splice(2,1)[0]),this.tabstops.splice.apply(this.tabstops,l))},this.addTabstopMarkers=function(e){var t=this.editor.session;e.forEach((function(e){e.markerId||(e.markerId=t.addMarker(e,"ace_snippet-marker","text"))}))},this.removeTabstopMarkers=function(e){var t=this.editor.session;e.forEach((function(e){t.removeMarker(e.markerId),e.markerId=null}))},this.removeRange=function(e){var t=e.tabstop.indexOf(e);-1!=t&&e.tabstop.splice(t,1),-1!=(t=this.ranges.indexOf(e))&&this.ranges.splice(t,1),-1!=(t=e.tabstop.rangeList.ranges.indexOf(e))&&e.tabstop.splice(t,1),this.editor.session.removeMarker(e.markerId),e.tabstop.length||(-1!=(t=this.tabstops.indexOf(e.tabstop))&&this.tabstops.splice(t,1),this.tabstops.length||this.detach())},this.keyboardHandler=new f,this.keyboardHandler.bindKeys({Tab:function(e){t.snippetManager&&t.snippetManager.expandWithTab(e)||(e.tabstopManager.tabNext(1),e.renderer.scrollCursorIntoView())},"Shift-Tab":function(e){e.tabstopManager.tabNext(-1),e.renderer.scrollCursorIntoView()},Esc:function(e){e.tabstopManager.detach()}})}).call(S.prototype);var k=function(e,t){0==e.row&&(e.column+=t.column),e.row+=t.row},x=function(e,t){e.row==t.row&&(e.column-=t.column),e.row-=t.row};e("./lib/dom").importCssString(".ace_snippet-marker {    -moz-box-sizing: border-box;    box-sizing: border-box;    background: rgba(194, 193, 208, 0.09);    border: 1px dotted rgba(211, 208, 235, 0.62);    position: absolute;}"),t.snippetManager=new C;var E=e("./editor").Editor;(function(){this.insertSnippet=function(e,n){return t.snippetManager.insertSnippet(this,e,n)},this.expandSnippet=function(e){return t.snippetManager.expandWithTab(this,e)}}).call(E.prototype)})),ace.define("ace/autocomplete/popup",[],(function(e,t,n){"use strict";var r=e("../virtual_renderer").VirtualRenderer,a=e("../editor").Editor,l=e("../range").Range,d=e("../lib/event"),h=e("../lib/lang"),f=e("../lib/dom"),p=function(e){var t=new r(e);t.$maxLines=4;var n=new a(t);return n.setHighlightActiveLine(!1),n.setShowPrintMargin(!1),n.renderer.setShowGutter(!1),n.renderer.setHighlightGutterLine(!1),n.$mouseHandler.$focusTimeout=0,n.$highlightTagPending=!0,n};f.importCssString(".ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {    background-color: #CAD6FA;    z-index: 1;}.ace_dark.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {    background-color: #3a674e;}.ace_editor.ace_autocomplete .ace_line-hover {    border: 1px solid #abbffe;    margin-top: -1px;    background: rgba(233,233,253,0.4);    position: absolute;    z-index: 2;}.ace_dark.ace_editor.ace_autocomplete .ace_line-hover {    border: 1px solid rgba(109, 150, 13, 0.8);    background: rgba(58, 103, 78, 0.62);}.ace_completion-meta {    opacity: 0.5;    margin: 0.9em;}.ace_completion-message {    color: blue;}.ace_editor.ace_autocomplete .ace_completion-highlight{    color: #2d69c7;}.ace_dark.ace_editor.ace_autocomplete .ace_completion-highlight{    color: #93ca12;}.ace_editor.ace_autocomplete {    width: 300px;    z-index: 200000;    border: 1px lightgray solid;    position: fixed;    box-shadow: 2px 3px 5px rgba(0,0,0,.2);    line-height: 1.4;    background: #fefefe;    color: #111;}.ace_dark.ace_editor.ace_autocomplete {    border: 1px #484747 solid;    box-shadow: 2px 3px 5px rgba(0, 0, 0, 0.51);    line-height: 1.4;    background: #25282c;    color: #c1c1c1;}","autocompletion.css"),t.AcePopup=function(e){var t=f.createElement("div"),n=new p(t);e&&e.appendChild(t),t.style.display="none",n.renderer.content.style.cursor="default",n.renderer.setStyle("ace_autocomplete"),n.setOption("displayIndentGuides",!1),n.setOption("dragDelay",150);var r,a=function(){};n.focus=a,n.$isFocused=!0,n.renderer.$cursorLayer.restartTimer=a,n.renderer.$cursorLayer.element.style.opacity=0,n.renderer.$maxLines=8,n.renderer.$keepTextAreaAtCursor=!1,n.setHighlightActiveLine(!1),n.session.highlight(""),n.session.$searchHighlight.clazz="ace_highlight-marker",n.on("mousedown",(function(e){var t=e.getDocumentPosition();n.selection.moveToPosition(t),w.start.row=w.end.row=t.row,e.stop()}));var y=new l(-1,0,-1,1/0),w=new l(-1,0,-1,1/0);w.id=n.session.addMarker(w,"ace_active-line","fullLine"),n.setSelectOnHover=function(e){e?y.id&&(n.session.removeMarker(y.id),y.id=null):y.id=n.session.addMarker(y,"ace_line-hover","fullLine")},n.setSelectOnHover(!1),n.on("mousemove",(function(e){if(r){if(r.x!=e.x||r.y!=e.y){(r=e).scrollTop=n.renderer.scrollTop;var t=r.getDocumentPosition().row;y.start.row!=t&&(y.id||n.setRow(t),C(t))}}else r=e})),n.renderer.on("beforeRender",(function(){if(r&&-1!=y.start.row){r.$pos=null;var e=r.getDocumentPosition().row;y.id||n.setRow(e),C(e,!0)}})),n.renderer.on("afterRender",(function(){var e=n.getRow(),t=n.renderer.$textLayer,r=t.element.childNodes[e-t.config.firstRow];r!==t.selectedNode&&t.selectedNode&&f.removeCssClass(t.selectedNode,"ace_selected"),t.selectedNode=r,r&&f.addCssClass(r,"ace_selected")}));var _=function(){C(-1)},C=function(e,t){e!==y.start.row&&(y.start.row=y.end.row=e,t||n.session._emit("changeBackMarker"),n._emit("changeHoverMarker"))};n.getHoveredRow=function(){return y.start.row},d.addListener(n.container,"mouseout",_),n.on("hide",_),n.on("changeSelection",_),n.session.doc.getLength=function(){return n.data.length},n.session.doc.getLine=function(e){var t=n.data[e];return"string"==typeof t?t:t&&t.value||""};var S=n.session.bgTokenizer;return S.$tokenizeRow=function(e){var t=n.data[e],r=[];if(!t)return r;"string"==typeof t&&(t={value:t});var a=t.caption||t.value||t.name;function l(e,n){e&&r.push({type:(t.className||"")+(n||""),value:e})}for(var d=a.toLowerCase(),h=(n.filterText||"").toLowerCase(),f=0,p=0,y=0;y<=h.length;y++)if(y!=p&&(t.matchMask&1<<y||y==h.length)){var w=h.slice(p,y);p=y;var _=d.indexOf(w,f);if(-1==_)continue;l(a.slice(f,_),""),f=_+w.length,l(a.slice(_,f),"completion-highlight")}return l(a.slice(f,a.length),""),t.meta&&r.push({type:"completion-meta",value:t.meta}),t.message&&r.push({type:"completion-message",value:t.message}),r},S.$updateOnChange=a,S.start=a,n.session.$computeWidth=function(){return this.screenWidth=0},n.isOpen=!1,n.isTopdown=!1,n.autoSelect=!0,n.filterText="",n.data=[],n.setData=function(e,t){n.filterText=t||"",n.setValue(h.stringRepeat("\n",e.length),-1),n.data=e||[],n.setRow(0)},n.getData=function(e){return n.data[e]},n.getRow=function(){return w.start.row},n.setRow=function(e){e=Math.max(this.autoSelect?0:-1,Math.min(this.data.length,e)),w.start.row!=e&&(n.selection.clearSelection(),w.start.row=w.end.row=e||0,n.session._emit("changeBackMarker"),n.moveCursorTo(e||0,0),n.isOpen&&n._signal("select"))},n.on("changeSelection",(function(){n.isOpen&&n.setRow(n.selection.lead.row),n.renderer.scrollCursorIntoView()})),n.hide=function(){this.container.style.display="none",this._signal("hide"),n.isOpen=!1},n.show=function(e,t,a){var l=this.container,d=window.innerHeight,h=window.innerWidth,f=this.renderer,p=f.$maxLines*t*1.4,y=e.top+this.$borderSize;y>d/2&&!a&&y+t+p>d?(f.$maxPixelHeight=y-2*this.$borderSize,l.style.top="",l.style.bottom=d-y+"px",n.isTopdown=!1):(y+=t,f.$maxPixelHeight=d-y-.2*t,l.style.top=y+"px",l.style.bottom="",n.isTopdown=!0),l.style.display="";var w=e.left;w+l.offsetWidth>h&&(w=h-l.offsetWidth),l.style.left=w+"px",this._signal("show"),r=null,n.isOpen=!0},n.goTo=function(e){var t=this.getRow(),n=this.session.getLength()-1;switch(e){case"up":t=t<=0?n:t-1;break;case"down":t=t>=n?-1:t+1;break;case"start":t=0;break;case"end":t=n}this.setRow(t)},n.getTextLeftOffset=function(){return this.$borderSize+this.renderer.$padding+this.$imageSize},n.$imageSize=0,n.$borderSize=1,n},t.$singleLineEditor=p})),ace.define("ace/autocomplete/util",[],(function(e,t,n){"use strict";t.parForEach=function(e,t,n){var r=0,a=e.length;0===a&&n();for(var l=0;l<a;l++)t(e[l],(function(e,t){++r===a&&n(e,t)}))};var r=/[a-zA-Z_0-9\$\-\u00A2-\u2000\u2070-\uFFFF]/;t.retrievePrecedingIdentifier=function(e,t,n){n=n||r;for(var a=[],l=t-1;l>=0&&n.test(e[l]);l--)a.push(e[l]);return a.reverse().join("")},t.retrieveFollowingIdentifier=function(e,t,n){n=n||r;for(var a=[],l=t;l<e.length&&n.test(e[l]);l++)a.push(e[l]);return a},t.getCompletionPrefix=function(e){var t,n=e.getCursorPosition(),r=e.session.getLine(n.row);return e.completers.forEach(function(e){e.identifierRegexps&&e.identifierRegexps.forEach(function(e){!t&&e&&(t=this.retrievePrecedingIdentifier(r,n.column,e))}.bind(this))}.bind(this)),t||this.retrievePrecedingIdentifier(r,n.column)}})),ace.define("ace/autocomplete",[],(function(e,t,n){"use strict";var r=e("./keyboard/hash_handler").HashHandler,a=e("./autocomplete/popup").AcePopup,l=e("./autocomplete/util"),d=e("./lib/lang"),h=e("./lib/dom"),f=e("./snippets").snippetManager,p=e("./config"),y=function(){this.autoInsert=!1,this.autoSelect=!0,this.exactMatch=!1,this.gatherCompletionsId=0,this.keyboardHandler=new r,this.keyboardHandler.bindKeys(this.commands),this.blurListener=this.blurListener.bind(this),this.changeListener=this.changeListener.bind(this),this.mousedownListener=this.mousedownListener.bind(this),this.mousewheelListener=this.mousewheelListener.bind(this),this.changeTimer=d.delayedCall(function(){this.updateCompletions(!0)}.bind(this)),this.tooltipTimer=d.delayedCall(this.updateDocTooltip.bind(this),50)};(function(){this.$init=function(){return this.popup=new a(document.body||document.documentElement),this.popup.on("click",function(e){this.insertMatch(),e.stop()}.bind(this)),this.popup.focus=this.editor.focus.bind(this.editor),this.popup.on("show",this.tooltipTimer.bind(null,null)),this.popup.on("select",this.tooltipTimer.bind(null,null)),this.popup.on("changeHoverMarker",this.tooltipTimer.bind(null,null)),this.popup},this.getPopup=function(){return this.popup||this.$init()},this.openPopup=function(e,t,n){this.popup||this.$init(),this.popup.autoSelect=this.autoSelect,this.popup.setData(this.completions.filtered,this.completions.filterText),e.keyBinding.addKeyboardHandler(this.keyboardHandler);var r=e.renderer;if(this.popup.setRow(this.autoSelect?0:-1),n)n&&!t&&this.detach();else{this.popup.setTheme(e.getTheme()),this.popup.setFontSize(e.getFontSize());var a=r.layerConfig.lineHeight,l=r.$cursorLayer.getPixelPosition(this.base,!0);l.left-=this.popup.getTextLeftOffset();var d=e.container.getBoundingClientRect();l.top+=d.top-r.layerConfig.offset,l.left+=d.left-e.renderer.scrollLeft,l.left+=r.gutterWidth,this.popup.show(l,a)}this.changeTimer.cancel()},this.detach=function(){this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.off("changeSelection",this.changeListener),this.editor.off("blur",this.blurListener),this.editor.off("mousedown",this.mousedownListener),this.editor.off("mousewheel",this.mousewheelListener),this.changeTimer.cancel(),this.hideDocTooltip(),this.gatherCompletionsId+=1,this.popup&&this.popup.isOpen&&this.popup.hide(),this.base&&this.base.detach(),this.activated=!1,this.completions=this.base=null},this.changeListener=function(e){var t=this.editor.selection.lead;(t.row!=this.base.row||t.column<this.base.column)&&this.detach(),this.activated?this.changeTimer.schedule():this.detach()},this.blurListener=function(e){var t=document.activeElement,n=this.editor.textInput.getElement(),r=e.relatedTarget&&this.tooltipNode&&this.tooltipNode.contains(e.relatedTarget),a=this.popup&&this.popup.container;t==n||t.parentNode==a||r||t==this.tooltipNode||e.relatedTarget==n||this.detach()},this.mousedownListener=function(e){this.detach()},this.mousewheelListener=function(e){this.detach()},this.goTo=function(e){this.popup.goTo(e)},this.insertMatch=function(e,t){if(e||(e=this.popup.getData(this.popup.getRow())),!e)return!1;var n=this.completions;if(this.editor.startOperation({command:{name:"insertMatch"}}),e.completer&&e.completer.insertMatch)e.completer.insertMatch(this.editor,e);else{if(n.filterText)for(var r,a=this.editor.selection.getAllRanges(),l=0;r=a[l];l++)r.start.column-=n.filterText.length,this.editor.session.remove(r);e.snippet?f.insertSnippet(this.editor,e.snippet):this.editor.execCommand("insertstring",e.value||e)}this.completions==n&&this.detach(),this.editor.endOperation()},this.commands={Up:function(e){e.completer.goTo("up")},Down:function(e){e.completer.goTo("down")},"Ctrl-Up|Ctrl-Home":function(e){e.completer.goTo("start")},"Ctrl-Down|Ctrl-End":function(e){e.completer.goTo("end")},Esc:function(e){e.completer.detach()},Return:function(e){return e.completer.insertMatch()},"Shift-Return":function(e){e.completer.insertMatch(null,{deleteSuffix:!0})},Tab:function(e){var t=e.completer.insertMatch();if(t||e.tabstopManager)return t;e.completer.goTo("down")},PageUp:function(e){e.completer.popup.gotoPageUp()},PageDown:function(e){e.completer.popup.gotoPageDown()}},this.gatherCompletions=function(e,t){var n=e.getSession(),r=e.getCursorPosition(),a=l.getCompletionPrefix(e);this.base=n.doc.createAnchor(r.row,r.column-a.length),this.base.$insertRight=!0;var d=[],h=e.completers.length;return e.completers.forEach((function(f,p){f.getCompletions(e,n,r,a,(function(n,r){!n&&r&&(d=d.concat(r)),t(null,{prefix:l.getCompletionPrefix(e),matches:d,finished:0==--h})}))})),!0},this.showPopup=function(e,t){this.editor&&this.detach(),this.activated=!0,this.editor=e,e.completer!=this&&(e.completer&&e.completer.detach(),e.completer=this),e.on("changeSelection",this.changeListener),e.on("blur",this.blurListener),e.on("mousedown",this.mousedownListener),e.on("mousewheel",this.mousewheelListener),this.updateCompletions(!1,t)},this.updateCompletions=function(e,t){if(e&&this.base&&this.completions){var n=this.editor.getCursorPosition(),r=this.editor.session.getTextRange({start:this.base,end:n});if(r==this.completions.filterText)return;return this.completions.setFilter(r),this.completions.filtered.length?1!=this.completions.filtered.length||this.completions.filtered[0].value!=r||this.completions.filtered[0].snippet?void this.openPopup(this.editor,r,e):this.detach():this.detach()}if(t&&t.matches){n=this.editor.getSelectionRange().start;return this.base=this.editor.session.doc.createAnchor(n.row,n.column),this.base.$insertRight=!0,this.completions=new w(t.matches),this.openPopup(this.editor,"",e)}var a=this.gatherCompletionsId;this.gatherCompletions(this.editor,function(t,n){var r=function(){if(n.finished)return this.detach()}.bind(this),l=n.prefix,d=n&&n.matches;if(!d||!d.length)return r();if(0===l.indexOf(n.prefix)&&a==this.gatherCompletionsId){this.completions=new w(d),this.exactMatch&&(this.completions.exactMatch=!0),this.completions.setFilter(l);var h=this.completions.filtered;return h.length&&(1!=h.length||h[0].value!=l||h[0].snippet)?this.autoInsert&&1==h.length&&n.finished?this.insertMatch(h[0]):void this.openPopup(this.editor,l,e):r()}}.bind(this))},this.cancelContextMenu=function(){this.editor.$mouseHandler.cancelContextMenu()},this.updateDocTooltip=function(){var e=this.popup,t=e.data,n=t&&(t[e.getHoveredRow()]||t[e.getRow()]),r=null;return n&&this.editor&&this.popup.isOpen?(this.editor.completers.some((function(e){return e.getDocTooltip&&(r=e.getDocTooltip(n)),r})),r||"string"==typeof n||(r=n),"string"==typeof r&&(r={docText:r}),r&&(r.docHTML||r.docText)?void this.showDocTooltip(r):this.hideDocTooltip()):this.hideDocTooltip()},this.showDocTooltip=function(e){this.tooltipNode||(this.tooltipNode=h.createElement("div"),this.tooltipNode.className="ace_tooltip ace_doc-tooltip",this.tooltipNode.style.margin=0,this.tooltipNode.style.pointerEvents="auto",this.tooltipNode.tabIndex=-1,this.tooltipNode.onblur=this.blurListener.bind(this),this.tooltipNode.onclick=this.onTooltipClick.bind(this));var t=this.tooltipNode;e.docHTML?t.innerHTML=e.docHTML:e.docText&&(t.textContent=e.docText),t.parentNode||document.body.appendChild(t);var n=this.popup,r=n.container.getBoundingClientRect();t.style.top=n.container.style.top,t.style.bottom=n.container.style.bottom,t.style.display="block",window.innerWidth-r.right<320?r.left<320?n.isTopdown?(t.style.top=r.bottom+"px",t.style.left=r.left+"px",t.style.right="",t.style.bottom=""):(t.style.top=n.container.offsetTop-t.offsetHeight+"px",t.style.left=r.left+"px",t.style.right="",t.style.bottom=""):(t.style.right=window.innerWidth-r.left+"px",t.style.left=""):(t.style.left=r.right+1+"px",t.style.right="")},this.hideDocTooltip=function(){if(this.tooltipTimer.cancel(),this.tooltipNode){var e=this.tooltipNode;this.editor.isFocused()||document.activeElement!=e||this.editor.focus(),this.tooltipNode=null,e.parentNode&&e.parentNode.removeChild(e)}},this.onTooltipClick=function(e){for(var t=e.target;t&&t!=this.tooltipNode;){if("A"==t.nodeName&&t.href){t.rel="noreferrer",t.target="_blank";break}t=t.parentNode}},this.destroy=function(){if(this.detach(),this.popup){this.popup.destroy();var e=this.popup.container;e&&e.parentNode&&e.parentNode.removeChild(e)}this.editor&&this.editor.completer==this&&this.editor.completer,this.popup=null}}).call(y.prototype),y.for=function(e){return e.completer||(p.get("sharedPopups")?(y.$shared||(y.$sharedInstance=new y),e.completer=y.$sharedInstance):(e.completer=new y,e.once("destroy",(function(e,t){t.completer.destroy()})))),e.completer},y.startCommand={name:"startAutocomplete",exec:function(e,t){var n=y.for(e);n.autoInsert=!1,n.autoSelect=!0,n.showPopup(e,t),n.cancelContextMenu()},bindKey:"Ctrl-Space|Ctrl-Shift-Space|Alt-Space"};var w=function(e,t){this.all=e,this.filtered=e,this.filterText=t||"",this.exactMatch=!1};(function(){this.setFilter=function(e){if(e.length>this.filterText&&0===e.lastIndexOf(this.filterText,0))var t=this.filtered;else t=this.all;this.filterText=e,t=(t=this.filterCompletions(t,this.filterText)).sort((function(e,t){return t.exactMatch-e.exactMatch||t.$score-e.$score||(e.caption||e.value).localeCompare(t.caption||t.value)}));var n=null;t=t.filter((function(e){var t=e.snippet||e.caption||e.value;return t!==n&&(n=t,!0)})),this.filtered=t},this.filterCompletions=function(e,t){var n=[],r=t.toUpperCase(),a=t.toLowerCase();e:for(var l,d=0;l=e[d];d++){var h=l.value||l.caption||l.snippet;if(h){var f,p,y=-1,w=0,_=0;if(this.exactMatch){if(t!==h.substr(0,t.length))continue e}else{var C=h.toLowerCase().indexOf(a);if(C>-1)_=C;else for(var S=0;S<t.length;S++){var k=h.indexOf(a[S],y+1),x=h.indexOf(r[S],y+1);if((f=k>=0&&(x<0||k<x)?k:x)<0)continue e;(p=f-y-1)>0&&(-1===y&&(_+=10),_+=p,w|=1<<S),y=f}}l.matchMask=w,l.exactMatch=_?0:1,l.$score=(l.score||0)-_,n.push(l)}}return n}}).call(w.prototype),t.Autocomplete=y,t.FilteredList=w})),ace.define("ace/autocomplete/text_completer",[],(function(e,t,n){var r=e("../range").Range,a=/[^a-zA-Z_0-9\$\-\u00C0-\u1FFF\u2C00-\uD7FF\w]+/;function l(e,t){var n=function(e,t){return e.getTextRange(r.fromPoints({row:0,column:0},t)).split(a).length-1}(e,t),l=e.getValue().split(a),d=Object.create(null),h=l[n];return l.forEach((function(e,t){if(e&&e!==h){var r=Math.abs(n-t),a=l.length-r;d[e]?d[e]=Math.max(a,d[e]):d[e]=a}})),d}t.getCompletions=function(e,t,n,r,a){var d=l(t,n);a(null,Object.keys(d).map((function(e){return{caption:e,value:e,score:d[e],meta:"local"}})))}})),ace.define("ace/ext/language_tools",[],(function(e,t,n){"use strict";var r=e("../snippets").snippetManager,a=e("../autocomplete").Autocomplete,l=e("../config"),d=e("../lib/lang"),h=e("../autocomplete/util"),f=e("../autocomplete/text_completer"),p={getCompletions:function(e,t,n,r,a){if(t.$mode.completer)return t.$mode.completer.getCompletions(e,t,n,r,a);var l=e.session.getState(n.row);a(null,t.$mode.getCompletions(l,t,n,r))}},y={getCompletions:function(e,t,n,a,l){var d=[],h=t.getTokenAt(n.row,n.column);h&&h.type.match(/(tag-name|tag-open|tag-whitespace|attribute-name|attribute-value)\.xml$/)?d.push("html-tag"):d=r.getActiveScopes(e);var f=r.snippetMap,p=[];d.forEach((function(e){for(var t=f[e]||[],n=t.length;n--;){var r=t[n],a=r.name||r.tabTrigger;a&&p.push({caption:a,snippet:r.content,meta:r.tabTrigger&&!r.name?r.tabTrigger+"⇥ ":"snippet",type:"snippet"})}}),this),l(null,p)},getDocTooltip:function(e){"snippet"!=e.type||e.docHTML||(e.docHTML=["<b>",d.escapeHTML(e.caption),"</b>","<hr></hr>",d.escapeHTML(e.snippet)].join(""))}},w=[y,f,p];t.setCompleters=function(e){w.length=0,e&&w.push.apply(w,e)},t.addCompleter=function(e){w.push(e)},t.textCompleter=f,t.keyWordCompleter=p,t.snippetCompleter=y;var _={name:"expandSnippet",exec:function(e){return r.expandWithTab(e)},bindKey:"Tab"},C=function(e,t){S(t.session.$mode)},S=function(e){"string"==typeof e&&(e=l.$modes[e]),e&&(r.files||(r.files={}),k(e.$id,e.snippetFileId),e.modes&&e.modes.forEach(S))},k=function(e,t){t&&e&&!r.files[e]&&(r.files[e]={},l.loadModule(t,(function(t){t&&(r.files[e]=t,!t.snippets&&t.snippetText&&(t.snippets=r.parseSnippetFile(t.snippetText)),r.register(t.snippets||[],t.scope),t.includeScopes&&(r.snippetMap[t.scope].includeScopes=t.includeScopes,t.includeScopes.forEach((function(e){S("ace/mode/"+e)}))))})))},x=function(e){var t=e.editor,n=t.completer&&t.completer.activated;if("backspace"===e.command.name)n&&!h.getCompletionPrefix(t)&&t.completer.detach();else if("insertstring"===e.command.name){if(h.getCompletionPrefix(t)&&!n){var r=a.for(t);r.autoInsert=!1,r.showPopup(t)}}},E=e("../editor").Editor;e("../config").defineOptions(E.prototype,"editor",{enableBasicAutocompletion:{set:function(e){e?(this.completers||(this.completers=Array.isArray(e)?e:w),this.commands.addCommand(a.startCommand)):this.commands.removeCommand(a.startCommand)},value:!1},enableLiveAutocompletion:{set:function(e){e?(this.completers||(this.completers=Array.isArray(e)?e:w),this.commands.on("afterExec",x)):this.commands.removeListener("afterExec",x)},value:!1},enableSnippets:{set:function(e){e?(this.commands.addCommand(_),this.on("changeMode",C),C(0,this)):(this.commands.removeCommand(_),this.off("changeMode",C))},value:!1}})})),ace.require(["ace/ext/language_tools"],(function(t){e&&(e.exports=t)}))}).call(this,n(68)(e))},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var a=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),a[t]=e>>>((3&t)<<3)&255;return a}}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,a=n;return a[e[r++]]+a[e[r++]]+a[e[r++]]+a[e[r++]]+"-"+a[e[r++]]+a[e[r++]]+"-"+a[e[r++]]+a[e[r++]]+"-"+a[e[r++]]+a[e[r++]]+"-"+a[e[r++]]+a[e[r++]]+a[e[r++]]+a[e[r++]]+a[e[r++]]+a[e[r++]]}},function(e,t){e.exports=function(){return new Worker("/js/pdfjs-worker.e24624992ea4cedb9146.js")}},function(e,t){!function(t){"use strict";var n=Object.prototype,r=n.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},l=a.iterator||"@@iterator",d=a.asyncIterator||"@@asyncIterator",h=a.toStringTag||"@@toStringTag",f="object"==typeof e,p=t.regeneratorRuntime;if(p)f&&(e.exports=p);else{(p=t.regeneratorRuntime=f?e.exports:{}).wrap=k;var y={},w={};w[l]=function(){return this};var _=Object.getPrototypeOf,C=_&&_(_(I([])));C&&C!==n&&r.call(C,l)&&(w=C);var S=T.prototype=E.prototype=Object.create(w);A.prototype=S.constructor=T,T.constructor=A,T[h]=A.displayName="GeneratorFunction",p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===A||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,T):(e.__proto__=T,h in e||(e[h]="GeneratorFunction")),e.prototype=Object.create(S),e},p.awrap=function(e){return{__await:e}},R(O.prototype),O.prototype[d]=function(){return this},p.AsyncIterator=O,p.async=function(e,t,n,r){var a=new O(k(e,t,n,r));return p.isGeneratorFunction(t)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},R(S),S[h]="Generator",S[l]=function(){return this},S.toString=function(){return"[object Generator]"},p.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},p.values=I,D.prototype={constructor:D,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(L),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return d.type="throw",d.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var l=this.tryEntries[a],d=l.completion;if("root"===l.tryLoc)return n("end");if(l.tryLoc<=this.prev){var h=r.call(l,"catchLoc"),f=r.call(l,"finallyLoc");if(h&&f){if(this.prev<l.catchLoc)return n(l.catchLoc,!0);if(this.prev<l.finallyLoc)return n(l.finallyLoc)}else if(h){if(this.prev<l.catchLoc)return n(l.catchLoc,!0)}else{if(!f)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return n(l.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var l=a;break}}l&&("break"===e||"continue"===e)&&l.tryLoc<=t&&t<=l.finallyLoc&&(l=null);var d=l?l.completion:{};return d.type=e,d.arg=t,l?(this.method="next",this.next=l.finallyLoc,y):this.complete(d)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),L(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;L(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),y}}}function k(e,t,n,r){var a=t&&t.prototype instanceof E?t:E,l=Object.create(a.prototype),d=new D(r||[]);return l._invoke=function(e,t,n){var r="suspendedStart";return function(a,l){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw l;return F()}for(n.method=a,n.arg=l;;){var d=n.delegate;if(d){var h=M(d,n);if(h){if(h===y)continue;return h}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var f=x(e,t,n);if("normal"===f.type){if(r=n.done?"completed":"suspendedYield",f.arg===y)continue;return{value:f.arg,done:n.done}}"throw"===f.type&&(r="completed",n.method="throw",n.arg=f.arg)}}}(e,n,d),l}function x(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function E(){}function A(){}function T(){}function R(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function O(e){var t;this._invoke=function(n,a){function l(){return new Promise((function(t,l){!function t(n,a,l,d){var h=x(e[n],e,a);if("throw"!==h.type){var f=h.arg,p=f.value;return p&&"object"==typeof p&&r.call(p,"__await")?Promise.resolve(p.__await).then((function(e){t("next",e,l,d)}),(function(e){t("throw",e,l,d)})):Promise.resolve(p).then((function(e){f.value=e,l(f)}),d)}d(h.arg)}(n,a,t,l)}))}return t=t?t.then(l,l):l()}}function M(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,M(e,t),"throw"===t.method))return y;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var r=x(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,y;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,y):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,y)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function I(e){if(e){var t=e[l];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:F}}function F(){return{value:void 0,done:!0}}}(function(){return this}()||Function("return this")())},,,,,,,,,function(e,t,n){!function(e,t){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;var n={error:null,info:null},r=function(e){var r,a;function l(){for(var t,r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return(t=e.call.apply(e,[this].concat(a))||this).state=n,t.resetErrorBoundary=function(){for(var e,r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];null==t.props.onReset||(e=t.props).onReset.apply(e,a),t.setState(n)},t}a=e,(r=l).prototype=Object.create(a.prototype),r.prototype.constructor=r,r.__proto__=a;var d=l.prototype;return d.componentDidCatch=function(e,t){var n,r;null==(n=(r=this.props).onError)||n.call(r,e,null==t?void 0:t.componentStack),this.setState({error:e,info:t})},d.componentDidUpdate=function(e){var t,r,a,l,d=this.state.error,h=this.props.resetKeys;null!==d&&(void 0===(a=e.resetKeys)&&(a=[]),void 0===(l=h)&&(l=[]),a.length!==l.length||a.some((function(e,t){return!Object.is(e,l[t])})))&&(null==(t=(r=this.props).onResetKeysChange)||t.call(r,e.resetKeys,h),this.setState(n))},d.render=function(){var e=this.state,n=e.error,r=e.info,a=this.props,l=a.fallbackRender,d=a.FallbackComponent,h=a.fallback;if(null!==n){var f={componentStack:null==r?void 0:r.componentStack,error:n,resetErrorBoundary:this.resetErrorBoundary};if(t.isValidElement(h))return h;if("function"==typeof l)return l(f);if(d)return t.createElement(d,f);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},l}(t.Component);e.ErrorBoundary=r,e.useErrorHandler=function(e){var n=t.useState(null),r=n[0],a=n[1];if(e)throw e;if(r)throw r;return a},e.withErrorBoundary=function(e,n){function a(a){return t.createElement(r,n,t.createElement(e,a))}var l=e.displayName||e.name||"Unknown";return a.displayName="withErrorBoundary("+l+")",a},Object.defineProperty(e,"__esModule",{value:!0})}(t,n(0))},function(e,t,n){"use strict";function r(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}n.d(t,"a",(function(){return r}))},function(e,t,n){var r=n(644),a=n(645),l=n(646);e.exports=function(e,t){return r(e)||a(e,t)||l()}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},function(e,t,n){e.exports=n(648)},function(e,t,n){e.exports=n(658)},function(e,t,n){e.exports=n(661)},function(e,t,n){e.exports=n(671)},function(e,t,n){e.exports=n(685)},function(e,t,n){e.exports={parse:n(716),stringify:n(719)}},function(e,t,n){(function(r){var a,l,d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,l=void 0;try{for(var d,h=e[Symbol.iterator]();!(r=(d=h.next()).done)&&(n.push(d.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{!r&&h.return&&h.return()}finally{if(a)throw l}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}a=[n(63),n(281)],void 0===(l=function(e,t){var n,r,a,l=void 0;window.sharejs=l={};var y=l.types={};l._bt=r=function(e,t,n,r){var a=void 0;return e.transformX=e.transformX=a=function(e,l){n(e),n(l);var d,h,p,y=[],w=!0,_=!1,C=void 0;try{for(var S,k=Array.from(l)[Symbol.iterator]();!(w=(S=k.next()).done);w=!0){for(var x=S.value,E=[],A=0;A<e.length;){var T,R=[];if(d=e[A],p=R,t(E,d,h=x,"left"),t(p,h,d,"right"),A++,1!==R.length){if(0===R.length){var O=!0,M=!1,P=void 0;try{for(var L,D=Array.from(e.slice(A))[Symbol.iterator]();!(O=(L=D.next()).done);O=!0)T=L.value,r(E,T)}catch(e){M=!0,P=e}finally{try{!O&&D.return&&D.return()}finally{if(M)throw P}}x=null;break}var I=Array.from(a(e.slice(A),R)),F=f(I,2),j=F[0],N=F[1],B=!0,z=!1,H=void 0;try{for(var U,W=Array.from(j)[Symbol.iterator]();!(B=(U=W.next()).done);B=!0)T=U.value,r(E,T)}catch(e){z=!0,H=e}finally{try{!B&&W.return&&W.return()}finally{if(z)throw H}}var V=!0,q=!1,G=void 0;try{for(var K,Y=Array.from(N)[Symbol.iterator]();!(V=(K=Y.next()).done);V=!0){var X=K.value;r(y,X)}}catch(e){q=!0,G=e}finally{try{!V&&Y.return&&Y.return()}finally{if(q)throw G}}x=null;break}x=R[0]}null!=x&&r(y,x),e=E}}catch(e){_=!0,C=e}finally{try{!w&&k.return&&k.return()}finally{if(_)throw C}}return[e,y]},e.transform=e.transform=function(e,n,r){if("left"!==r&&"right"!==r)throw new Error("type must be 'left' or 'right'");if(0===n.length)return e;if(1===e.length&&1===n.length)return t([],e[0],n[0],r);if("left"===r){var l,d=Array.from(a(e,n)),h=f(d,2);return l=h[0],h[1],l}var p=Array.from(a(n,e)),y=f(p,2);return y[0],y[1]}};var w={name:"text",create:function(){return""}},_=function(e,t,n){return e.slice(0,t)+n+e.slice(t)},C=function(e){if("number"!=typeof e.p)throw new Error("component missing position field");if(!("string"===h(e.i)^"string"===h(e.d)^"string"===h(e.c)))throw new Error("component needs an i, d or c field");if(!(e.p>=0))throw new Error("position cannot be negative")},S=function(e){var t=!0,n=!1,r=void 0;try{for(var a,l=Array.from(e)[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var d=a.value;C(d)}}catch(e){n=!0,r=e}finally{try{!t&&l.return&&l.return()}finally{if(n)throw r}}return!0};w.apply=function(e,t){S(t);var n=!0,r=!1,a=void 0;try{for(var l,d=Array.from(t)[Symbol.iterator]();!(n=(l=d.next()).done);n=!0){var h=l.value;if(null!=h.i)e=_(e,h.p,h.i);else if(null!=h.d){var f=e.slice(h.p,h.p+h.d.length);if(h.d!==f)throw new Error("Delete component '"+h.d+"' does not match deleted text '"+f+"'");e=e.slice(0,h.p)+e.slice(h.p+h.d.length)}else{if(null==h.c)throw new Error("Unknown op type");var p=e.slice(h.p,h.p+h.c.length);if(h.c!==p)throw new Error("Comment component '"+h.c+"' does not match commented text '"+p+"'")}}}catch(e){r=!0,a=e}finally{try{!n&&d.return&&d.return()}finally{if(r)throw a}}return e};var k=function(e,t){var n=void 0,r={};for(var a in e)n=e[a],r[a]=n;for(a in t)n=t[a],r[a]=n;return r};w._append=n=function(e,t){if(""!==t.i&&""!==t.d){if(0===e.length)return e.push(t);var n=e[e.length-1];return null!=n.i&&null!=t.i&&n.p<=t.p&&t.p<=n.p+n.i.length&&n.u===t.u?e[e.length-1]=k(n,{i:_(n.i,t.p-n.p,t.i)}):null!=n.d&&null!=t.d&&t.p<=n.p&&n.p<=t.p+t.d.length&&n.u===t.u?e[e.length-1]=k(n,{d:_(t.d,n.p-t.p,n.d),p:t.p}):e.push(t)}},w.compose=function(e,t){S(e),S(t);var r=e.slice(),a=!0,l=!1,d=void 0;try{for(var h,f=Array.from(t)[Symbol.iterator]();!(a=(h=f.next()).done);a=!0){var p=h.value;n(r,p)}}catch(e){l=!0,d=e}finally{try{!a&&f.return&&f.return()}finally{if(l)throw d}}return r},w.compress=function(e){return w.compose([],e)},w.normalize=function(e){var t=[];null==e.i&&null==e.p||(e=[e]);var r=!0,a=!1,l=void 0;try{for(var d,h=Array.from(e)[Symbol.iterator]();!(r=(d=h.next()).done);r=!0){var f=d.value;null==f.p&&(f.p=0),n(t,f)}}catch(e){a=!0,l=e}finally{try{!r&&h.return&&h.return()}finally{if(a)throw l}}return t};var x=function(e,t,n){if(null!=t.i)return t.p<e||t.p===e&&n?e+t.i.length:e;if(null!=t.d)return e<=t.p?e:e<=t.p+t.d.length?t.p:e-t.d.length;if(null!=t.c)return e;throw new Error("unknown op type")};w.transformCursor=function(e,t,n){var r="right"===n,a=!0,l=!1,d=void 0;try{for(var h,f=Array.from(t)[Symbol.iterator]();!(a=(h=f.next()).done);a=!0){var p=h.value;e=x(e,p,r)}}catch(e){l=!0,d=e}finally{try{!a&&f.return&&f.return()}finally{if(l)throw d}}return e},w._tc=a=function(e,t,r,a){var l=void 0,d=void 0,h=void 0;if(S([t]),S([r]),null!=t.i)n(e,k(t,{p:x(t.p,r,"right"===a)}));else if(null!=t.d)if(null!=r.i){var f=t.d;t.p<r.p&&(n(e,k(t,{d:f.slice(0,r.p-t.p)})),f=f.slice(r.p-t.p)),""!==f&&n(e,k(t,{d:f,p:t.p+r.i.length}))}else if(null!=r.d)if(t.p>=r.p+r.d.length)n(e,k(t,{p:t.p-r.d.length}));else if(t.p+t.d.length<=r.p)n(e,t);else{if(h=k(t,{d:""}),t.p<r.p&&(h.d=t.d.slice(0,r.p-t.p)),t.p+t.d.length>r.p+r.d.length&&(h.d+=t.d.slice(r.p+r.d.length-t.p)),d=Math.max(t.p,r.p),l=Math.min(t.p+t.d.length,r.p+r.d.length),t.d.slice(d-t.p,l-t.p)!==r.d.slice(d-r.p,l-r.p))throw new Error("Delete ops delete different text in the same region of the document");""!==h.d&&(h.p=x(h.p,r),n(e,h))}else{if(null==r.c)throw new Error("unknown op type");n(e,t)}else if(null!=t.c)if(null!=r.i)if(t.p<r.p&&r.p<t.p+t.c.length){var p=r.p-t.p,y=t.c.slice(0,+(p-1)+1||void 0)+r.i+t.c.slice(p);n(e,k(t,{c:y}))}else n(e,k(t,{p:x(t.p,r,!0)}));else if(null!=r.d)if(t.p>=r.p+r.d.length)n(e,k(t,{p:t.p-r.d.length}));else if(t.p+t.c.length<=r.p)n(e,t);else{if(h=k(t,{c:""}),t.p<r.p&&(h.c=t.c.slice(0,r.p-t.p)),t.p+t.c.length>r.p+r.d.length&&(h.c+=t.c.slice(r.p+r.d.length-t.p)),d=Math.max(t.p,r.p),l=Math.min(t.p+t.c.length,r.p+r.d.length),t.c.slice(d-t.p,l-t.p)!==r.d.slice(d-r.p,l-r.p))throw new Error("Delete ops delete different text in the same region of the document");h.p=x(h.p,r),n(e,h)}else{if(null==r.c)throw new Error("unknown op type");n(e,t)}return e};w.invert=function(e){return Array.from(e.slice().reverse()).map((function(e){return function(e){return null!=e.i?{d:e.i,p:e.p}:{i:e.d,p:e.p}}(e)}))},l.types||(l.types={}),r(w,a,S,n),l.types.text=w,w.api={provides:{text:!0},getLength:function(){return this.snapshot.length},getText:function(){return this.snapshot},insert:function(e,t,n,r){var a={p:e,i:t};return n&&(a.u=!0),a=[a],this.submitOp(a,r),a},del:function(e,t,n,r){var a={p:e,d:this.snapshot.slice(e,e+t)};return n&&(a.u=!0),a=[a],this.submitOp(a,r),a},_register:function(){return this.on("remoteop",(function(e){var t=this;return function(){var n=[],r=!0,a=!1,l=void 0;try{for(var d,h=Array.from(e)[Symbol.iterator]();!(r=(d=h.next()).done);r=!0){var f=d.value;void 0!==f.i?n.push(t.emit("insert",f.p,f.i)):void 0!==f.d?n.push(t.emit("delete",f.p,f.d)):n.push(void 0)}}catch(e){a=!0,l=e}finally{try{!r&&h.return&&h.return()}finally{if(a)throw l}}return n}()}))}};var E=function(e){return setTimeout(e,0)},A=function(){function e(){p(this,e)}return d(e,[{key:"on",value:function(e,t){return this._events||(this._events={}),this._events[e]||(this._events[e]=[]),this._events[e].push(t),this}},{key:"removeListener",value:function(e,t){var n=this;this._events||(this._events={});for(var r=this._events[e]||(this._events[e]=[]),a=0;a<r.length;)r[a]===t&&(r[a]=void 0),a++;return E((function(){return n._events[e]=Array.from(n._events[e]).filter((function(e){return e}))})),this}},{key:"emit",value:function(e){if(!(null!=this._events?this._events[e]:void 0))return this;for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=!0,l=!1,d=void 0;try{for(var h,f=Array.from(this._events[e])[Symbol.iterator]();!(a=(h=f.next()).done);a=!0){var p=h.value;p&&p.apply(this,n)}}catch(e){l=!0,d=e}finally{try{!a&&f.return&&f.return()}finally{if(l)throw d}}return this}}]),e}();A.mixin=function(e){var t=e.prototype||e;return t.on=A.prototype.on,t.removeListener=A.prototype.removeListener,t.emit=A.prototype.emit,e},l.extendDoc=function(e,t){return T.prototype[e]=t};var T=function(){function e(t,n,r){p(this,e),this.flush=this.flush.bind(this),this.setFlushDelay=this.setFlushDelay.bind(this),this.shout=this.shout.bind(this),this.connection=t,this.name=n,r||(r={}),this.version=r.v,this.snapshot=r.snaphot,r.type&&this._setType(r.type),this.state="closed",this.autoOpen=!1,this._create=r.create,this.inflightOp=null,this.inflightCallbacks=[],this.inflightSubmittedIds=[],this.pendingOp=null,this.pendingCallbacks=[],this.serverOps={}}return d(e,[{key:"_xf",value:function(e,t){return this.type.transformX?this.type.transformX(e,t):[this.type.transform(e,t,"left"),this.type.transform(t,e,"right")]}},{key:"_otApply",value:function(e,t,n){var r=this.snapshot;if(this.snapshot=this.type.apply(this.snapshot,e),this.emit("change",e,r,n),t)return this.emit("remoteop",e,r,n)}},{key:"_connectionStateChanged",value:function(e,t){switch(e){case"disconnected":this.state="closed",this.inflightOp&&this.inflightSubmittedIds.push(this.connection.id),this.emit("closed");break;case"ok":this.autoOpen&&this.open();break;case"stopped":"function"==typeof this._openCallback&&this._openCallback(t)}return this.emit(e,t)}},{key:"_setType",value:function(e){if("string"==typeof e&&(e=y[e]),!e||!e.compose)throw new Error("Support for types without compose() is not implemented");if(this.type=e,e.api){for(var t in e.api){var n=e.api[t];this[t]=n}return"function"==typeof this._register?this._register():void 0}return this.provides={}}},{key:"_onMessage",value:function(e){if(!0===e.open){if(this.state="open",this._create=!1,null==this.created&&(this.created=!!e.create),e.type&&this._setType(e.type),e.create?(this.created=!0,this.snapshot=this.type.create()):(!0!==this.created&&(this.created=!1),void 0!==e.snapshot&&(this.snapshot=e.snapshot)),null!=e.v&&(this.version=e.v),this.inflightOp){var t={doc:this.name,op:this.inflightOp,v:this.version};this.inflightSubmittedIds.length&&(t.dupIfSource=this.inflightSubmittedIds),this.connection.send(t)}else this.flush();return this.emit("open"),"function"==typeof this._openCallback?this._openCallback(null):void 0}if(!1===e.open)return e.error&&("undefined"!=typeof console&&null!==console&&console.error("Could not open document: "+e.error),this.emit("error",e.error),"function"==typeof this._openCallback&&this._openCallback(e.error)),this.state="closed",this.emit("closed"),"function"==typeof this._closeCallback&&this._closeCallback(),this._closeCallback=null;if(null===e.op&&"Op already submitted"===r);else{if(void 0===e.op&&void 0!==e.v||e.op&&Array.from(this.inflightSubmittedIds).includes(e.meta.source)){var n=this.inflightOp;this.inflightOp=null,this.inflightSubmittedIds.length=0,null===this.pendingOp&&this.emit("saved");var r=e.error;if(r){if(this.type.invert){var a=this.type.invert(n);if(this.pendingOp){var l=Array.from(this._xf(this.pendingOp,a)),d=f(l,2);this.pendingOp=d[0],a=d[1]}this._otApply(a,!0,e)}else this.emit("error","Op apply failed ("+r+") and the op could not be reverted");var h=!0,p=!1,y=void 0;try{for(var w,_=Array.from(this.inflightCallbacks)[Symbol.iterator]();!(h=(w=_.next()).done);h=!0)(0,w.value)(r)}catch(e){p=!0,y=e}finally{try{!h&&_.return&&_.return()}finally{if(p)throw y}}}else{if(e.v<this.version)return;if(e.v!==this.version)throw new Error("Invalid version from server");this.serverOps[this.version]=n,this.version++,this.emit("acknowledge",n);var C=!0,S=!1,k=void 0;try{for(var x,E=Array.from(this.inflightCallbacks)[Symbol.iterator]();!(C=(x=E.next()).done);C=!0)(0,x.value)(null,n)}catch(e){S=!0,k=e}finally{try{!C&&E.return&&E.return()}finally{if(S)throw k}}}return this.delayedFlush()}if(e.op){if(e.v<this.version)return;if(e.doc!==this.name)return this.emit("error","Expected docName '"+this.name+"' but got "+e.doc);if(e.v!==this.version)return this.emit("error","Expected version "+this.version+" but got "+e.v);var A=e.op;this.serverOps[this.version]=A;var T=A;if(null!==this.inflightOp){var R=Array.from(this._xf(this.inflightOp,T)),O=f(R,2);this.inflightOp=O[0],T=O[1]}if(null!==this.pendingOp){var M=Array.from(this._xf(this.pendingOp,T)),P=f(M,2);this.pendingOp=P[0],T=P[1]}return this.version++,this._otApply(T,!0,e)}if(!e.meta)return"undefined"!=typeof console&&null!==console?console.warn("Unhandled document message:",e):void 0;var L=e.meta,D=L.path,I=L.value;switch(null!=D?D[0]:void 0){case"shout":return this.emit("shout",I);default:return"undefined"!=typeof console&&null!==console?console.warn("Unhandled meta op:",e):void 0}}}},{key:"flush",value:function(){if(this.flushTimeout=null,"ok"===this.connection.state&&null===this.inflightOp&&null!==this.pendingOp){if(this.inflightOp=this.pendingOp,this.inflightCallbacks=this.pendingCallbacks,this.pendingOp=null,this.pendingCallbacks=[],this.emit("flipped_pending_to_inflight"),window.useShareJsHash||window.sl_debugging){var e=Date.now(),n=this.__lastSubmitTimestamp&&e-this.__lastSubmitTimestamp;if(!this.__lastSubmitTimestamp||n>5e3||n<0||window.sl_debugging){var r=t("blob "+this.snapshot.length+"\0"+this.snapshot).toString();this.__lastSubmitTimestamp=e}}var a=this.__lastVersion;return this.__lastVersion=this.version,this.connection.send({doc:this.name,op:this.inflightOp,v:this.version,lastV:a,hash:r})}}},{key:"submitOp",value:function(e,t){null!=this.type.normalize&&(e=this.type.normalize(e));var n=this.snapshot;return this.snapshot=this.type.apply(this.snapshot,e),null!==this.pendingOp?this.pendingOp=this.type.compose(this.pendingOp,e):this.pendingOp=e,t&&this.pendingCallbacks.push(t),this.emit("change",e,n),this.delayedFlush()}},{key:"delayedFlush",value:function(){if(null==this.flushTimeout)return this.flushTimeout=setTimeout(this.flush,this._flushDelay||0)}},{key:"setFlushDelay",value:function(e){return this._flushDelay=e}},{key:"shout",value:function(e){return this.connection.send({doc:this.name,meta:{path:["shout"],value:e}})}},{key:"open",value:function(e){var t=this;if(this.autoOpen=!0,"closed"===this.state){var n={doc:this.name,open:!0};return void 0===this.snapshot&&(n.snapshot=null),this.type&&(n.type=this.type.name),null!=this.version&&(n.v=this.version),this._create&&(n.create=!0),this.connection.send(n),this.state="opening",this._openCallback=function(n){return t._openCallback=null,"function"==typeof e?e(n):void 0}}}},{key:"close",value:function(e){return this.autoOpen=!1,"closed"===this.state?"function"==typeof e?e():void 0:(this.connection.send({doc:this.name,open:!1}),this.state="closed",this.emit("closing"),this._closeCallback=e)}}]),e}();A.mixin(T),l.Doc=T;var R=ace.require("ace/range").Range;window.sharejs.extendDoc("attach_ace",(function(e,t,n){if(!this.provides.text)throw new Error("Only text documents can be attached to ace");var r=this,a=e.getSession().getDocument();function l(){return window.setTimeout((function(){var e=a.getValue(),t=r.getText();if(e!==t)return r.emit("error","Text does not match in ace"),console.error("Text does not match!"),console.error("editor: "+e),console.error("ot:     "+t)}),0)}function d(t){if("remote"!==t.origin){if(!(null!=n&&a.getValue().length>n)){var d=!(!e.getSession().$fromUndo&&!e.getSession().$fromReject);return function(e,t,n,r){var a=function(t){for(var n=e.getLines(0,t.row),r=0,a=0;a<n.length;a++){var l=n[a];r+=a<t.row?l.length:t.column}return r+t.row}(t.start);switch(t.action){case"insert":w=t.lines.join("\n"),n.insert(a,w,r);break;case"remove":w=t.lines.join("\n"),n.del(a,w.length,r);break;default:throw new Error("unknown action: "+t.action)}}(a,t,r,d),l()}r.emit("error",new Error("document length is greater than maxDocLength"))}}function h(e){var t=a.getAllLines(),n=0;for(n=0;n<t.length;n++){if(e<=t[n].length)break;e-=t[n].length+1}return{row:n,column:e}}function f(e,t){a.getLength()<=1&&a.$detectNewLine(t);var n=a.$split(t),r=h(e),d=a.clippedPos(r.row,r.column),f={row:d.row+n.length-1,column:(1===n.length?d.column:0)+n[n.length-1].length};return a.applyDelta({start:d,end:f,action:"insert",lines:n,origin:"remote"}),l()}function p(e,t){var n=R.fromPoints(h(e),h(e+t.length)),r=a.clippedPos(n.start.row,n.start.column),d=a.clippedPos(n.end.row,n.end.column);return a.applyDelta({start:r,end:d,action:"remove",lines:a.getLinesForRange({start:r,end:d}),origin:"remote"}),l()}a.setNewLineMode("unix"),p(0,a.getValue()),f(0,r.getText()),l(),a.on("change",d),r.on("insert",f),r.on("delete",p),r.detach_ace=function(){return r.removeListener("insert",f),r.removeListener("delete",p),a.removeListener("change",d),delete r.detach_ace}}));return window.sharejs.extendDoc("attach_cm",(function(e,t){if(!this.provides.text)throw new Error("Only text documents can be attached to CodeMirror2");var n=this,r=e.getDoc();function a(){return window.setTimeout((function(){var t=e.getValue(),r=n.getText();if(t!==r)return n.emit("error","Text does not match in CodeMirror"),console.error("Text does not match!"),console.error("editor: "+t),console.error("ot:     "+r)}),0)}function l(e,t){if("remote"!==t.origin){var r="undo"===t.origin;return function(e,t,n,r){for(var a=0,l=0,d=n.snapshot.split("\n",t.from.line);l<t.from.line;)a+=d[l].length+1,l++;if(a+=t.from.ch,t.removed&&n.del(a,t.removed.join("\n").length,r),t.text)n.insert(a,t.text.join("\n"),r)}(0,t,n,r),a()}}function d(t,n){return e.replaceRange(n,e.posFromIndex(t),void 0,"remote"),e.clearHistory(),a()}function h(t,n){var r=e.posFromIndex(t),l=e.posFromIndex(t+n.length);return e.replaceRange("",r,l,"remote"),e.clearHistory(),a()}h(0,e.getValue()),d(0,n.getText()),a(),r.on("change",l),this.on("insert",d),this.on("delete",h),this.detach_cm=function(){return this.removeListener("insert",d),this.removeListener("delete",h),r.off("change",l),delete this.detach_cm}})),window.sharejs}.apply(t,a))||(e.exports=l)}).call(this,n(113))},function(e,t,n){var r;void 0===(r=function(){var e,t,n,r,a,l,d,h;return 79,t=/^LaTeX Warning: (.*)$/,e=/^(Over|Under)full \\(v|h)box/,d=/^(Package \b.+\b Warning:.*)$/,n=/lines? ([0-9]+)/,l=/^Package (\b.+\b) Warning/,function(){this.nextLine=function(){return this.row++,!(this.row>=this.lines.length)&&this.lines[this.row]},this.rewindLine=function(){this.row--},this.linesUpToNextWhitespaceLine=function(){return this.linesUpToNextMatchingLine(/^ *$/)},this.linesUpToNextMatchingLine=function(e){var t,n;for(t=[],!1!==(n=this.nextLine())&&t.push(n);!1!==n&&!n.match(e)&&!1!==n;)!1!==(n=this.nextLine())&&t.push(n);return t}}.call((a=function(e){var t,n;for(this.text=e.replace(/(\r\n)|\r/g,"\n"),n=this.text.split("\n"),this.lines=[n[0]],t=1;t<n.length;)79===n[t-1].length&&"..."!==n[t-1].slice(-3)?this.lines[this.lines.length-1]+=n[t]:this.lines.push(n[t]),t++;this.row=0}).prototype),h={NORMAL:0,ERROR:1},function(){return this.parse=function(){for(var e;!1!==(this.currentLine=this.log.nextLine());)this.state===h.NORMAL&&(this.currentLineIsError()?(this.state=h.ERROR,this.currentError={line:null,file:this.currentFilePath,level:"error",message:this.currentLine.slice(2),content:"",raw:this.currentLine+"\n"}):this.currentLineIsRunawayArgument()?this.parseRunawayArgumentError():this.currentLineIsWarning()?this.parseSingleWarningLine(t):this.currentLineIsHboxWarning()?this.parseHboxLine():this.currentLineIsPackageWarning()?this.parseMultipleWarningLine():this.parseParensForFilenames()),this.state===h.ERROR&&(this.currentError.content+=this.log.linesUpToNextMatchingLine(/^l\.[0-9]+/).join("\n"),this.currentError.content+="\n",this.currentError.content+=this.log.linesUpToNextWhitespaceLine().join("\n"),this.currentError.content+="\n",this.currentError.content+=this.log.linesUpToNextWhitespaceLine().join("\n"),this.currentError.raw+=this.currentError.content,(e=this.currentError.raw.match(/l\.([0-9]+)/))&&(this.currentError.line=parseInt(e[1],10)),this.data.push(this.currentError),this.state=h.NORMAL);return this.postProcess(this.data)},this.currentLineIsError=function(){return"!"===this.currentLine[0]},this.currentLineIsRunawayArgument=function(){return this.currentLine.match(/^Runaway argument/)},this.currentLineIsWarning=function(){return!!this.currentLine.match(t)},this.currentLineIsPackageWarning=function(){return!!this.currentLine.match(d)},this.currentLineIsHboxWarning=function(){return!!this.currentLine.match(e)},this.parseRunawayArgumentError=function(){var e;return this.currentError={line:null,file:this.currentFilePath,level:"error",message:this.currentLine,content:"",raw:this.currentLine+"\n"},this.currentError.content+=this.log.linesUpToNextWhitespaceLine().join("\n"),this.currentError.content+="\n",this.currentError.content+=this.log.linesUpToNextWhitespaceLine().join("\n"),this.currentError.raw+=this.currentError.content,(e=this.currentError.raw.match(/l\.([0-9]+)/))&&(this.currentError.line=parseInt(e[1],10)),this.data.push(this.currentError)},this.parseSingleWarningLine=function(e){var t,r,a,l;(l=this.currentLine.match(e))&&(t=(r=(a=l[1]).match(n))?parseInt(r[1],10):null,this.data.push({line:t,file:this.currentFilePath,level:"warning",message:a,raw:a}))},this.parseMultipleWarningLine=function(){var e,t,r,a,h,f,p;if(f=this.currentLine.match(d)){for(p=[f[1]],e=(t=this.currentLine.match(n))?parseInt(t[1],10):null,r=this.currentLine.match(l)[1],a=new RegExp("(?:\\("+r+"\\))*[\\s]*(.*)","i");this.currentLine=this.log.nextLine();)e=(t=this.currentLine.match(n))?parseInt(t[1],10):e,f=this.currentLine.match(a),p.push(f[1]);h=p.join(" "),this.data.push({line:e,file:this.currentFilePath,level:"warning",message:h,raw:h})}},this.parseHboxLine=function(){var e,t;e=(t=this.currentLine.match(n))?parseInt(t[1],10):null,this.data.push({line:e,file:this.currentFilePath,level:"typesetting",message:this.currentLine,raw:this.currentLine})},this.parseParensForFilenames=function(){var e,t,n,r,a;-1!==(n=this.currentLine.search(/\(|\)/))&&(a=this.currentLine[n],this.currentLine=this.currentLine.slice(n+1),"("===a?(e=this.consumeFilePath())?(this.currentFilePath=e,t={path:e,files:[]},this.fileStack.push(t),this.currentFileList.push(t),this.currentFileList=t.files):this.openParens++:")"===a&&(this.openParens>0?this.openParens--:this.fileStack.length>1&&(this.fileStack.pop(),r=this.fileStack[this.fileStack.length-1],this.currentFilePath=r.path,this.currentFileList=r.files)),this.parseParensForFilenames())},this.consumeFilePath=function(){var e,t;return!!this.currentLine.match(/^\/?([^ \)]+\/)+/)&&(t=void 0,-1===(e=this.currentLine.search(RegExp(" |\\)")))?(t=this.currentLine,this.currentLine=""):(t=this.currentLine.slice(0,e),this.currentLine=this.currentLine.slice(e)),t)},this.postProcess=function(e){var t,n,r,a,l,d,h;for(t=[],n=[],h=[],d=[],a=[],r=function(e){return e.raw},l=0;l<e.length;)this.ignoreDuplicates&&a.indexOf(r(e[l]))>-1||("error"===e[l].level?n.push(e[l]):"typesetting"===e[l].level?d.push(e[l]):"warning"===e[l].level&&h.push(e[l]),t.push(e[l]),a.push(r(e[l]))),l++;return{errors:n,warnings:h,typesetting:d,all:t,files:this.rootFileList}}}.call((r=function(e,t){this.log=new a(e),this.state=h.NORMAL,t=t||{},this.fileBaseNames=t.fileBaseNames||[/compiles/,/\/usr\/local/],this.ignoreDuplicates=t.ignoreDuplicates,this.data=[],this.fileStack=[],this.currentFileList=this.rootFileList=[],this.openParens=0}).prototype),r.parse=function(e,t){return new r(e,t).parse()},r}.call(t,n,t,e))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(){var e,t,n,r,a,l;return t=/^\[(\d+)].*>\s(INFO|WARN|ERROR)\s-\s(.*)$/,n={INFO:"info",WARN:"warning",ERROR:"error"},e=function(e,t){if("string"!=typeof e)throw new Error("BibLogParser Error: text parameter must be a string");this.text=e.replace(/(\r\n)|\r/g,"\n"),this.options=t||{},this.lines=e.split("\n")},r=function(e,t,n){var r,a,l,d,h,f;for(f=e,h=[],d=t,r=0;a=d.exec(f);){r+=1,l=n(a);var p=100;if(r>=p){var y=l.level+"s";return l.message=["Over",p,y,"returned. Download raw logs to see full list"].join(" "),l.line=void 0,h.unshift(l),[h,""]}h.push(l),f=a.input.slice(0,a.index)+a.input.slice(a.index+a[0].length+1,a.input.length)}return[h,f]},BST_ERROR_REGEX=/^(.*?)\nwhile executing---line (\d+) of file (.*)/m,l=[[/^Warning--(.+)\n--line (\d+) of file (.+)$/m,function(e){var t,n,r;return t=e[0],r=e[1],n=e[2],{file:e[3],level:"warning",message:r,line:n,raw:t}}],[/^Warning--(.+)$/m,function(e){var t;return t=e[0],{file:"",level:"warning",message:e[1],line:"",raw:t}}]],a=[[/^(.*)---line (\d+) of file (.*)\n([^]+?)\nI'm skipping whatever remains of this entry$/m,function(e){var t,n,r;return n=e[0],t=e[1],r=e[2],{file:e[3],level:"error",message:t+"\n"+e[4],line:r,raw:n}}],[/^(A bad cross reference---entry ".+?"\nrefers to entry.+?, which doesn't exist)$/m,function(e){var t;return t=e[0],{file:"",level:"error",message:e[1],line:"",raw:t}}],[/^(.*)\n?---line (\d+) of file (.*)\n([^]+?)\nI'm skipping whatever remains of this command$/m,function(e){var t,n,r;return n=e[0],t=e[1],r=e[2],{file:e[3],level:"error",message:t+"\n"+e[4],line:r,raw:n}}],[BST_ERROR_REGEX,function(e){var t,n,r;return n=e[0],t=e[1],r=e[2],{file:e[3],level:"error",message:t,line:r,raw:n}}]],function(){return this.parseBibtex=function(){var e,t,n,d,h,f;return f={all:[],errors:[],warnings:[],files:[],typesetting:[]},t=(n=l.reduce((function(e,t){var n,a,l,d,h,f,p;return a=e[0],f=e[1],h=t[0],l=t[1],p=(d=r(f,h,l))[0],n=d[1],[a.concat(p),n]}),[[],this.text]))[0],h=n[1],e=(d=a.reduce((function(e,t){var n,a,l,d,h,f,p;return a=e[0],p=e[1],f=t[0],d=t[1],l=(h=r(p,f,d))[0],n=h[1],[a.concat(l),n]}),[[],h]))[0],h=d[1],f.warnings=t,f.errors=e,f.all=t.concat(e),f},this.parseBiber=function(){var e;return e={all:[],errors:[],warnings:[],files:[],typesetting:[]},this.lines.forEach((function(r){var a,l,d,h,f,p,y,w,_;if(f=r.match(t))switch(l=f[0],h=f[1],y=f[2],p=f[3],(d=(w={file:"",level:n[y]||"INFO",message:p,line:"",raw:l}).message.match(/^BibTeX subsystem: \/.+\/(\w+\.\w+)_.+, line (\d+), (.+)$/))&&4===d.length&&(d[0],a=d[1],h=d[2],_=d[3],w.file=a,w.line=h,w.message=_),e.all.push(w),w.level){case"error":return e.errors.push(w);case"warning":return e.warnings.push(w)}})),e},this.parse=function(){var e;if((e=this.lines[0]).match(/^.*INFO - This is Biber.*$/))return this.parseBiber();if(e.match(/^This is BibTeX, Version.+$/))return this.parseBibtex();throw new Error("BibLogParser Error: cannot determine whether text is biber or bibtex output")}}.call(e.prototype),e.parse=function(t,n){return new e(t,n).parse()},e}.call(t,n,t,e))||(e.exports=r)},function(e,t,n){var r=n(727),a=n(728),l=a;l.v1=r,l.v4=a,e.exports=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(740),l=(r=a)&&r.__esModule?r:{default:r};t.default=l.default},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){e.exports=function(e){for(var t=-1,n=e?e.length:0,r={};++t<n;){var a=e[t];r[a[0]]=a[1]}return r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(508),a=n(534),l=n(597),d=function(){function e(){this.__isFirstRender=!0,this.state={},this.props={}}return e.prototype.$onChanges=function(e){var t=this.props,n=a(e,"currentValue"),l=r({},this.props,n);if(this.__isFirstRender)r(this,{props:l}),this.componentWillMount(),this.render(),this.__isFirstRender=!1;else{if(!this.didPropsChange(n,t))return;this.componentWillReceiveProps(l);var d=this.shouldComponentUpdate(l,this.state);if(r(this,{props:l}),!d)return;this.componentWillUpdate(this.props,this.state),this.render(),this.componentDidUpdate(this.props,this.state)}},e.prototype.$postLink=function(){this.componentDidMount()},e.prototype.$onDestroy=function(){this.componentWillUnmount()},e.prototype.didPropsChange=function(e,t){return l(e,(function(e,n){return e!==t[n]}))},e.prototype.componentWillMount=function(){},e.prototype.componentDidMount=function(){},e.prototype.componentWillReceiveProps=function(e){},e.prototype.shouldComponentUpdate=function(e,t){return!0},e.prototype.componentWillUpdate=function(e,t){},e.prototype.componentDidUpdate=function(e,t){},e.prototype.componentWillUnmount=function(){},e.prototype.render=function(){},e}();t.default=d},function(e,t,n){var r=n(342),a=n(515),l=n(516),d=n(174),h=n(348),f=n(175),p=Object.prototype.hasOwnProperty,y=l((function(e,t){if(h(t)||d(t))a(t,f(t),e);else for(var n in t)p.call(t,n)&&r(e,n,t[n])}));e.exports=y},function(e,t,n){var r=n(344),a=n(512),l=n(172),d=n(346),h=/^\[object .+?Constructor\]$/,f=Function.prototype,p=Object.prototype,y=f.toString,w=p.hasOwnProperty,_=RegExp("^"+y.call(w).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!l(e)||a(e))&&(r(e)?_:h).test(d(e))}},function(e,t,n){var r=n(171),a=Object.prototype,l=a.hasOwnProperty,d=a.toString,h=r?r.toStringTag:void 0;e.exports=function(e){var t=l.call(e,h),n=e[h];try{e[h]=void 0;var r=!0}catch(e){}var a=d.call(e);return r&&(t?e[h]=n:delete e[h]),a}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},function(e,t,n){var r,a=n(513),l=(r=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!l&&l in e}},function(e,t,n){var r=n(83)["__core-js_shared__"];e.exports=r},function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t,n){var r=n(342),a=n(249);e.exports=function(e,t,n,l){var d=!n;n||(n={});for(var h=-1,f=t.length;++h<f;){var p=t[h],y=l?l(n[p],e[p],p,n,e):void 0;void 0===y&&(y=e[p]),d?a(n,p,y):r(n,p,y)}return n}},function(e,t,n){var r=n(517),a=n(347);e.exports=function(e){return r((function(t,n){var r=-1,l=n.length,d=l>1?n[l-1]:void 0,h=l>2?n[2]:void 0;for(d=e.length>3&&"function"==typeof d?(l--,d):void 0,h&&a(n[0],n[1],h)&&(d=l<3?void 0:d,l=1),t=Object(t);++r<l;){var f=n[r];f&&e(t,f,r,d)}return t}))}},function(e,t,n){var r=n(250),a=n(518),l=n(520);e.exports=function(e,t){return l(a(e,t,r),e+"")}},function(e,t,n){var r=n(519),a=Math.max;e.exports=function(e,t,n){return t=a(void 0===t?e.length-1:t,0),function(){for(var l=arguments,d=-1,h=a(l.length-t,0),f=Array(h);++d<h;)f[d]=l[t+d];d=-1;for(var p=Array(t+1);++d<t;)p[d]=l[d];return p[t]=n(f),r(e,this,p)}}},function(e,t){e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},function(e,t,n){var r=n(521),a=n(523)(r);e.exports=a},function(e,t,n){var r=n(522),a=n(343),l=n(250),d=a?function(e,t){return a(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:l;e.exports=d},function(e,t){e.exports=function(e){return function(){return e}}},function(e,t){var n=Date.now;e.exports=function(e){var t=0,r=0;return function(){var a=n(),l=16-(a-r);if(r=a,l>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},function(e,t,n){var r=n(525),a=n(349),l=n(84),d=n(350),h=n(252),f=n(351),p=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=l(e),y=!n&&a(e),w=!n&&!y&&d(e),_=!n&&!y&&!w&&f(e),C=n||y||w||_,S=C?r(e.length,String):[],k=S.length;for(var x in e)!t&&!p.call(e,x)||C&&("length"==x||w&&("offset"==x||"parent"==x)||_&&("buffer"==x||"byteLength"==x||"byteOffset"==x)||h(x,k))||S.push(x);return S}},function(e,t){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},function(e,t,n){var r=n(141),a=n(142);e.exports=function(e){return a(e)&&"[object Arguments]"==r(e)}},function(e,t){e.exports=function(){return!1}},function(e,t,n){var r=n(141),a=n(251),l=n(142),d={};d["[object Float32Array]"]=d["[object Float64Array]"]=d["[object Int8Array]"]=d["[object Int16Array]"]=d["[object Int32Array]"]=d["[object Uint8Array]"]=d["[object Uint8ClampedArray]"]=d["[object Uint16Array]"]=d["[object Uint32Array]"]=!0,d["[object Arguments]"]=d["[object Array]"]=d["[object ArrayBuffer]"]=d["[object Boolean]"]=d["[object DataView]"]=d["[object Date]"]=d["[object Error]"]=d["[object Function]"]=d["[object Map]"]=d["[object Number]"]=d["[object Object]"]=d["[object RegExp]"]=d["[object Set]"]=d["[object String]"]=d["[object WeakMap]"]=!1,e.exports=function(e){return l(e)&&a(e.length)&&!!d[r(e)]}},function(e,t){e.exports=function(e){return function(t){return e(t)}}},function(e,t,n){(function(e){var r=n(345),a=t&&!t.nodeType&&t,l=a&&"object"==typeof e&&e&&!e.nodeType&&e,d=l&&l.exports===a&&r.process,h=function(){try{var e=l&&l.require&&l.require("util").types;return e||d&&d.binding&&d.binding("util")}catch(e){}}();e.exports=h}).call(this,n(68)(e))},function(e,t,n){var r=n(348),a=n(532),l=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return a(e);var t=[];for(var n in Object(e))l.call(e,n)&&"constructor"!=n&&t.push(n);return t}},function(e,t,n){var r=n(533)(Object.keys,Object);e.exports=r},function(e,t){e.exports=function(e,t){return function(n){return e(t(n))}}},function(e,t,n){var r=n(249),a=n(352),l=n(353);e.exports=function(e,t){var n={};return t=l(t,3),a(e,(function(e,a,l){r(n,a,t(e,a,l))})),n}},function(e,t,n){var r=n(536)();e.exports=r},function(e,t){e.exports=function(e){return function(t,n,r){for(var a=-1,l=Object(t),d=r(t),h=d.length;h--;){var f=d[e?h:++a];if(!1===n(l[f],f,l))break}return t}}},function(e,t,n){var r=n(538),a=n(582),l=n(359);e.exports=function(e){var t=a(e);return 1==t.length&&t[0][2]?l(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},function(e,t,n){var r=n(354),a=n(355);e.exports=function(e,t,n,l){var d=n.length,h=d,f=!l;if(null==e)return!h;for(e=Object(e);d--;){var p=n[d];if(f&&p[2]?p[1]!==e[p[0]]:!(p[0]in e))return!1}for(;++d<h;){var y=(p=n[d])[0],w=e[y],_=p[1];if(f&&p[2]){if(void 0===w&&!(y in e))return!1}else{var C=new r;if(l)var S=l(w,_,y,e,t,C);if(!(void 0===S?a(_,w,3,l,C):S))return!1}}return!0}},function(e,t){e.exports=function(){this.__data__=[],this.size=0}},function(e,t,n){var r=n(177),a=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():a.call(t,n,1),--this.size,!0)}},function(e,t,n){var r=n(177);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},function(e,t,n){var r=n(177);e.exports=function(e){return r(this.__data__,e)>-1}},function(e,t,n){var r=n(177);e.exports=function(e,t){var n=this.__data__,a=r(n,e);return a<0?(++this.size,n.push([e,t])):n[a][1]=t,this}},function(e,t,n){var r=n(176);e.exports=function(){this.__data__=new r,this.size=0}},function(e,t){e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},function(e,t){e.exports=function(e){return this.__data__.get(e)}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t,n){var r=n(176),a=n(253),l=n(254);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var d=n.__data__;if(!a||d.length<199)return d.push([e,t]),this.size=++n.size,this;n=this.__data__=new l(d)}return n.set(e,t),this.size=n.size,this}},function(e,t,n){var r=n(550),a=n(176),l=n(253);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(l||a),string:new r}}},function(e,t,n){var r=n(551),a=n(552),l=n(553),d=n(554),h=n(555);function f(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}f.prototype.clear=r,f.prototype.delete=a,f.prototype.get=l,f.prototype.has=d,f.prototype.set=h,e.exports=f},function(e,t,n){var r=n(178);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(e,t){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},function(e,t,n){var r=n(178),a=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return a.call(t,e)?t[e]:void 0}},function(e,t,n){var r=n(178),a=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:a.call(t,e)}},function(e,t,n){var r=n(178);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},function(e,t,n){var r=n(179);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},function(e,t){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},function(e,t,n){var r=n(179);e.exports=function(e){return r(this,e).get(e)}},function(e,t,n){var r=n(179);e.exports=function(e){return r(this,e).has(e)}},function(e,t,n){var r=n(179);e.exports=function(e,t){var n=r(this,e),a=n.size;return n.set(e,t),this.size+=n.size==a?0:1,this}},function(e,t,n){var r=n(354),a=n(356),l=n(566),d=n(570),h=n(577),f=n(84),p=n(350),y=n(351),w="[object Object]",_=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,C,S,k){var x=f(e),E=f(t),A=x?"[object Array]":h(e),T=E?"[object Array]":h(t),R=(A="[object Arguments]"==A?w:A)==w,O=(T="[object Arguments]"==T?w:T)==w,M=A==T;if(M&&p(e)){if(!p(t))return!1;x=!0,R=!1}if(M&&!R)return k||(k=new r),x||y(e)?a(e,t,n,C,S,k):l(e,t,A,n,C,S,k);if(!(1&n)){var P=R&&_.call(e,"__wrapped__"),L=O&&_.call(t,"__wrapped__");if(P||L){var D=P?e.value():e,I=L?t.value():t;return k||(k=new r),S(D,I,n,C,k)}}return!!M&&(k||(k=new r),d(e,t,n,C,S,k))}},function(e,t,n){var r=n(254),a=n(563),l=n(564);function d(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}d.prototype.add=d.prototype.push=a,d.prototype.has=l,e.exports=d},function(e,t){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t){e.exports=function(e,t){return e.has(t)}},function(e,t,n){var r=n(171),a=n(567),l=n(173),d=n(356),h=n(568),f=n(569),p=r?r.prototype:void 0,y=p?p.valueOf:void 0;e.exports=function(e,t,n,r,p,w,_){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!w(new a(e),new a(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return l(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var C=h;case"[object Set]":var S=1&r;if(C||(C=f),e.size!=t.size&&!S)return!1;var k=_.get(e);if(k)return k==t;r|=2,_.set(e,t);var x=d(C(e),C(t),r,p,w,_);return _.delete(e),x;case"[object Symbol]":if(y)return y.call(e)==y.call(t)}return!1}},function(e,t,n){var r=n(83).Uint8Array;e.exports=r},function(e,t){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},function(e,t){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},function(e,t,n){var r=n(571),a=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,l,d,h){var f=1&n,p=r(e),y=p.length;if(y!=r(t).length&&!f)return!1;for(var w=y;w--;){var _=p[w];if(!(f?_ in t:a.call(t,_)))return!1}var C=h.get(e);if(C&&h.get(t))return C==t;var S=!0;h.set(e,t),h.set(t,e);for(var k=f;++w<y;){var x=e[_=p[w]],E=t[_];if(l)var A=f?l(E,x,_,t,e,h):l(x,E,_,e,t,h);if(!(void 0===A?x===E||d(x,E,n,l,h):A)){S=!1;break}k||(k="constructor"==_)}if(S&&!k){var T=e.constructor,R=t.constructor;T==R||!("constructor"in e)||!("constructor"in t)||"function"==typeof T&&T instanceof T&&"function"==typeof R&&R instanceof R||(S=!1)}return h.delete(e),h.delete(t),S}},function(e,t,n){var r=n(572),a=n(574),l=n(175);e.exports=function(e){return r(e,l,a)}},function(e,t,n){var r=n(573),a=n(84);e.exports=function(e,t,n){var l=t(e);return a(e)?l:r(l,n(e))}},function(e,t){e.exports=function(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}},function(e,t,n){var r=n(575),a=n(576),l=Object.prototype.propertyIsEnumerable,d=Object.getOwnPropertySymbols,h=d?function(e){return null==e?[]:(e=Object(e),r(d(e),(function(t){return l.call(e,t)})))}:a;e.exports=h},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,a=0,l=[];++n<r;){var d=e[n];t(d,n,e)&&(l[a++]=d)}return l}},function(e,t){e.exports=function(){return[]}},function(e,t,n){var r=n(578),a=n(253),l=n(579),d=n(580),h=n(581),f=n(141),p=n(346),y=p(r),w=p(a),_=p(l),C=p(d),S=p(h),k=f;(r&&"[object DataView]"!=k(new r(new ArrayBuffer(1)))||a&&"[object Map]"!=k(new a)||l&&"[object Promise]"!=k(l.resolve())||d&&"[object Set]"!=k(new d)||h&&"[object WeakMap]"!=k(new h))&&(k=function(e){var t=f(e),n="[object Object]"==t?e.constructor:void 0,r=n?p(n):"";if(r)switch(r){case y:return"[object DataView]";case w:return"[object Map]";case _:return"[object Promise]";case C:return"[object Set]";case S:return"[object WeakMap]"}return t}),e.exports=k},function(e,t,n){var r=n(102)(n(83),"DataView");e.exports=r},function(e,t,n){var r=n(102)(n(83),"Promise");e.exports=r},function(e,t,n){var r=n(102)(n(83),"Set");e.exports=r},function(e,t,n){var r=n(102)(n(83),"WeakMap");e.exports=r},function(e,t,n){var r=n(358),a=n(175);e.exports=function(e){for(var t=a(e),n=t.length;n--;){var l=t[n],d=e[l];t[n]=[l,d,r(d)]}return t}},function(e,t,n){var r=n(355),a=n(584),l=n(591),d=n(255),h=n(358),f=n(359),p=n(180);e.exports=function(e,t){return d(e)&&h(t)?f(p(e),t):function(n){var d=a(n,e);return void 0===d&&d===t?l(n,e):r(t,d,3)}}},function(e,t,n){var r=n(360);e.exports=function(e,t,n){var a=null==e?void 0:r(e,t);return void 0===a?n:a}},function(e,t,n){var r=n(586),a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,l=/\\(\\)?/g,d=r((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(a,(function(e,n,r,a){t.push(r?a.replace(l,"$1"):n||e)})),t}));e.exports=d},function(e,t,n){var r=n(587);e.exports=function(e){var t=r(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},function(e,t,n){var r=n(254);function a(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,a=t?t.apply(this,r):r[0],l=n.cache;if(l.has(a))return l.get(a);var d=e.apply(this,r);return n.cache=l.set(a,d)||l,d};return n.cache=new(a.Cache||r),n}a.Cache=r,e.exports=a},function(e,t,n){var r=n(589);e.exports=function(e){return null==e?"":r(e)}},function(e,t,n){var r=n(171),a=n(590),l=n(84),d=n(256),h=r?r.prototype:void 0,f=h?h.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(l(t))return a(t,e)+"";if(d(t))return f?f.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a}},function(e,t,n){var r=n(592),a=n(593);e.exports=function(e,t){return null!=e&&a(e,t,r)}},function(e,t){e.exports=function(e,t){return null!=e&&t in Object(e)}},function(e,t,n){var r=n(361),a=n(349),l=n(84),d=n(252),h=n(251),f=n(180);e.exports=function(e,t,n){for(var p=-1,y=(t=r(t,e)).length,w=!1;++p<y;){var _=f(t[p]);if(!(w=null!=e&&n(e,_)))break;e=e[_]}return w||++p!=y?w:!!(y=null==e?0:e.length)&&h(y)&&d(_,y)&&(l(e)||a(e))}},function(e,t,n){var r=n(595),a=n(596),l=n(255),d=n(180);e.exports=function(e){return l(e)?r(d(e)):a(e)}},function(e,t){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},function(e,t,n){var r=n(360);e.exports=function(e){return function(t){return r(t,e)}}},function(e,t,n){var r=n(357),a=n(353),l=n(598),d=n(84),h=n(347);e.exports=function(e,t,n){var f=d(e)?r:l;return n&&h(e,t,n)&&(t=void 0),f(e,a(t,3))}},function(e,t,n){var r=n(599);e.exports=function(e,t){var n;return r(e,(function(e,r,a){return!(n=t(e,r,a))})),!!n}},function(e,t,n){var r=n(352),a=n(600)(r);e.exports=a},function(e,t,n){var r=n(174);e.exports=function(e,t){return function(n,a){if(null==n)return n;if(!r(n))return e(n,a);for(var l=n.length,d=t?l:-1,h=Object(n);(t?d--:++d<l)&&!1!==a(h[d],d,h););return n}}},function(e,t,n){"use strict";var r=n(362),a="function"==typeof Symbol&&Symbol.for,l=a?Symbol.for("react.element"):60103,d=a?Symbol.for("react.portal"):60106,h=a?Symbol.for("react.fragment"):60107,f=a?Symbol.for("react.strict_mode"):60108,p=a?Symbol.for("react.profiler"):60114,y=a?Symbol.for("react.provider"):60109,w=a?Symbol.for("react.context"):60110,_=a?Symbol.for("react.forward_ref"):60112,C=a?Symbol.for("react.suspense"):60113,S=a?Symbol.for("react.memo"):60115,k=a?Symbol.for("react.lazy"):60116,x="function"==typeof Symbol&&Symbol.iterator;function E(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T={};function R(e,t,n){this.props=e,this.context=t,this.refs=T,this.updater=n||A}function O(){}function M(e,t,n){this.props=e,this.context=t,this.refs=T,this.updater=n||A}R.prototype.isReactComponent={},R.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(E(85));this.updater.enqueueSetState(this,e,t,"setState")},R.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},O.prototype=R.prototype;var P=M.prototype=new O;P.constructor=M,r(P,R.prototype),P.isPureReactComponent=!0;var L={current:null},D=Object.prototype.hasOwnProperty,I={key:!0,ref:!0,__self:!0,__source:!0};function F(e,t,n){var r,a={},d=null,h=null;if(null!=t)for(r in void 0!==t.ref&&(h=t.ref),void 0!==t.key&&(d=""+t.key),t)D.call(t,r)&&!I.hasOwnProperty(r)&&(a[r]=t[r]);var f=arguments.length-2;if(1===f)a.children=n;else if(1<f){for(var p=Array(f),y=0;y<f;y++)p[y]=arguments[y+2];a.children=p}if(e&&e.defaultProps)for(r in f=e.defaultProps)void 0===a[r]&&(a[r]=f[r]);return{$$typeof:l,type:e,key:d,ref:h,props:a,_owner:L.current}}function j(e){return"object"==typeof e&&null!==e&&e.$$typeof===l}var N=/\/+/g,B=[];function z(e,t,n,r){if(B.length){var a=B.pop();return a.result=e,a.keyPrefix=t,a.func=n,a.context=r,a.count=0,a}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function H(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>B.length&&B.push(e)}function U(e,t,n){return null==e?0:function e(t,n,r,a){var h=typeof t;"undefined"!==h&&"boolean"!==h||(t=null);var f=!1;if(null===t)f=!0;else switch(h){case"string":case"number":f=!0;break;case"object":switch(t.$$typeof){case l:case d:f=!0}}if(f)return r(a,t,""===n?"."+W(t,0):n),1;if(f=0,n=""===n?".":n+":",Array.isArray(t))for(var p=0;p<t.length;p++){var y=n+W(h=t[p],p);f+=e(h,y,r,a)}else if(null===t||"object"!=typeof t?y=null:y="function"==typeof(y=x&&t[x]||t["@@iterator"])?y:null,"function"==typeof y)for(t=y.call(t),p=0;!(h=t.next()).done;)f+=e(h=h.value,y=n+W(h,p++),r,a);else if("object"===h)throw r=""+t,Error(E(31,"[object Object]"===r?"object with keys {"+Object.keys(t).join(", ")+"}":r,""));return f}(e,"",t,n)}function W(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function V(e,t){e.func.call(e.context,t,e.count++)}function q(e,t,n){var r=e.result,a=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?G(e,r,n,(function(e){return e})):null!=e&&(j(e)&&(e=function(e,t){return{$$typeof:l,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,a+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(N,"$&/")+"/")+n)),r.push(e))}function G(e,t,n,r,a){var l="";null!=n&&(l=(""+n).replace(N,"$&/")+"/"),U(e,q,t=z(t,l,r,a)),H(t)}var K={current:null};function Y(){var e=K.current;if(null===e)throw Error(E(321));return e}var X={ReactCurrentDispatcher:K,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:L,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:function(e,t,n){if(null==e)return e;var r=[];return G(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;U(e,V,t=z(null,null,t,n)),H(t)},count:function(e){return U(e,(function(){return null}),null)},toArray:function(e){var t=[];return G(e,t,null,(function(e){return e})),t},only:function(e){if(!j(e))throw Error(E(143));return e}},t.Component=R,t.Fragment=h,t.Profiler=p,t.PureComponent=M,t.StrictMode=f,t.Suspense=C,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X,t.cloneElement=function(e,t,n){if(null==e)throw Error(E(267,e));var a=r({},e.props),d=e.key,h=e.ref,f=e._owner;if(null!=t){if(void 0!==t.ref&&(h=t.ref,f=L.current),void 0!==t.key&&(d=""+t.key),e.type&&e.type.defaultProps)var p=e.type.defaultProps;for(y in t)D.call(t,y)&&!I.hasOwnProperty(y)&&(a[y]=void 0===t[y]&&void 0!==p?p[y]:t[y])}var y=arguments.length-2;if(1===y)a.children=n;else if(1<y){p=Array(y);for(var w=0;w<y;w++)p[w]=arguments[w+2];a.children=p}return{$$typeof:l,type:e.type,key:d,ref:h,props:a,_owner:f}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:w,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:y,_context:e},e.Consumer=e},t.createElement=F,t.createFactory=function(e){var t=F.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:_,render:e}},t.isValidElement=j,t.lazy=function(e){return{$$typeof:k,_ctor:e,_status:-1,_result:null}},t.memo=function(e,t){return{$$typeof:S,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return Y().useCallback(e,t)},t.useContext=function(e,t){return Y().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return Y().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return Y().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return Y().useLayoutEffect(e,t)},t.useMemo=function(e,t){return Y().useMemo(e,t)},t.useReducer=function(e,t,n){return Y().useReducer(e,t,n)},t.useRef=function(e){return Y().useRef(e)},t.useState=function(e){return Y().useState(e)},t.version="16.13.1"},function(e,t,n){"use strict";var r=n(0),a=n(362),l=n(603);function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(d(227));function h(e,t,n,r,a,l,d,h,f){var p=Array.prototype.slice.call(arguments,3);try{t.apply(n,p)}catch(e){this.onError(e)}}var f=!1,p=null,y=!1,w=null,_={onError:function(e){f=!0,p=e}};function C(e,t,n,r,a,l,d,y,w){f=!1,p=null,h.apply(_,arguments)}var S=null,k=null,x=null;function E(e,t,n){var r=e.type||"unknown-event";e.currentTarget=x(n),function(e,t,n,r,a,l,h,_,S){if(C.apply(this,arguments),f){if(!f)throw Error(d(198));var k=p;f=!1,p=null,y||(y=!0,w=k)}}(r,t,void 0,e),e.currentTarget=null}var A=null,T={};function R(){if(A)for(var e in T){var t=T[e],n=A.indexOf(e);if(!(-1<n))throw Error(d(96,e));if(!M[n]){if(!t.extractEvents)throw Error(d(97,e));for(var r in M[n]=t,n=t.eventTypes){var a=void 0,l=n[r],h=t,f=r;if(P.hasOwnProperty(f))throw Error(d(99,f));P[f]=l;var p=l.phasedRegistrationNames;if(p){for(a in p)p.hasOwnProperty(a)&&O(p[a],h,f);a=!0}else l.registrationName?(O(l.registrationName,h,f),a=!0):a=!1;if(!a)throw Error(d(98,r,e))}}}}function O(e,t,n){if(L[e])throw Error(d(100,e));L[e]=t,D[e]=t.eventTypes[n].dependencies}var M=[],P={},L={},D={};function I(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];if(!T.hasOwnProperty(t)||T[t]!==r){if(T[t])throw Error(d(102,t));T[t]=r,n=!0}}n&&R()}var F=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),j=null,N=null,B=null;function z(e){if(e=k(e)){if("function"!=typeof j)throw Error(d(280));var t=e.stateNode;t&&(t=S(t),j(e.stateNode,e.type,t))}}function H(e){N?B?B.push(e):B=[e]:N=e}function U(){if(N){var e=N,t=B;if(B=N=null,z(e),t)for(e=0;e<t.length;e++)z(t[e])}}function W(e,t){return e(t)}function V(e,t,n,r,a){return e(t,n,r,a)}function q(){}var G=W,K=!1,Y=!1;function X(){null===N&&null===B||(q(),U())}function J(e,t,n){if(Y)return e(t,n);Y=!0;try{return G(e,t,n)}finally{Y=!1,X()}}var Q=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Z=Object.prototype.hasOwnProperty,ee={},te={};function ne(e,t,n,r,a,l){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l}var re={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){re[e]=new ne(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];re[t]=new ne(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){re[e]=new ne(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){re[e]=new ne(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){re[e]=new ne(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){re[e]=new ne(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){re[e]=new ne(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){re[e]=new ne(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){re[e]=new ne(e,5,!1,e.toLowerCase(),null,!1)}));var oe=/[\-:]([a-z])/g;function ae(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(oe,ae);re[t]=new ne(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(oe,ae);re[t]=new ne(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(oe,ae);re[t]=new ne(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){re[e]=new ne(e,1,!1,e.toLowerCase(),null,!1)})),re.xlinkHref=new ne("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){re[e]=new ne(e,1,!1,e.toLowerCase(),null,!0)}));var se=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function le(e,t,n,r){var a=re.hasOwnProperty(t)?re[t]:null;(null!==a?0===a.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!Z.call(te,e)||!Z.call(ee,e)&&(Q.test(e)?te[e]=!0:(ee[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}se.hasOwnProperty("ReactCurrentDispatcher")||(se.ReactCurrentDispatcher={current:null}),se.hasOwnProperty("ReactCurrentBatchConfig")||(se.ReactCurrentBatchConfig={suspense:null});var ce=/^(.*)[\\\/]/,ue="function"==typeof Symbol&&Symbol.for,de=ue?Symbol.for("react.element"):60103,he=ue?Symbol.for("react.portal"):60106,fe=ue?Symbol.for("react.fragment"):60107,pe=ue?Symbol.for("react.strict_mode"):60108,ge=ue?Symbol.for("react.profiler"):60114,me=ue?Symbol.for("react.provider"):60109,ve=ue?Symbol.for("react.context"):60110,ye=ue?Symbol.for("react.concurrent_mode"):60111,be=ue?Symbol.for("react.forward_ref"):60112,we=ue?Symbol.for("react.suspense"):60113,_e=ue?Symbol.for("react.suspense_list"):60120,Ce=ue?Symbol.for("react.memo"):60115,Se=ue?Symbol.for("react.lazy"):60116,ke=ue?Symbol.for("react.block"):60121,xe="function"==typeof Symbol&&Symbol.iterator;function Ee(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=xe&&e[xe]||e["@@iterator"])?e:null}function Ae(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case fe:return"Fragment";case he:return"Portal";case ge:return"Profiler";case pe:return"StrictMode";case we:return"Suspense";case _e:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case ve:return"Context.Consumer";case me:return"Context.Provider";case be:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case Ce:return Ae(e.type);case ke:return Ae(e.render);case Se:if(e=1===e._status?e._result:null)return Ae(e)}return null}function Te(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,a=e._debugSource,l=Ae(e.type);n=null,r&&(n=Ae(r.type)),r=l,l="",a?l=" (at "+a.fileName.replace(ce,"")+":"+a.lineNumber+")":n&&(l=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+l}t+=n,e=e.return}while(e);return t}function $e(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Re(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Oe(e){e._valueTracker||(e._valueTracker=function(e){var t=Re(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var a=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,l.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Me(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Re(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Pe(e,t){var n=t.checked;return a({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Le(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=$e(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function De(e,t){null!=(t=t.checked)&&le(e,"checked",t,!1)}function Ie(e,t){De(e,t);var n=$e(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?je(e,t.type,n):t.hasOwnProperty("defaultValue")&&je(e,t.type,$e(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Fe(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function je(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function Ne(e,t){return e=a({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function Be(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+$e(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function ze(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(d(91));return a({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function He(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(d(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(d(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:$e(n)}}function Ue(e,t){var n=$e(t.value),r=$e(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function We(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var Ve="http://www.w3.org/1999/xhtml",qe="http://www.w3.org/2000/svg";function Ge(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ke(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Ge(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var Ye,Xe=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction((function(){return e(t,n)}))}:e}((function(e,t){if(e.namespaceURI!==qe||"innerHTML"in e)e.innerHTML=t;else{for((Ye=Ye||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ye.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}));function Je(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function Qe(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ze={animationend:Qe("Animation","AnimationEnd"),animationiteration:Qe("Animation","AnimationIteration"),animationstart:Qe("Animation","AnimationStart"),transitionend:Qe("Transition","TransitionEnd")},et={},tt={};function nt(e){if(et[e])return et[e];if(!Ze[e])return e;var t,n=Ze[e];for(t in n)if(n.hasOwnProperty(t)&&t in tt)return et[e]=n[t];return e}F&&(tt=document.createElement("div").style,"AnimationEvent"in window||(delete Ze.animationend.animation,delete Ze.animationiteration.animation,delete Ze.animationstart.animation),"TransitionEvent"in window||delete Ze.transitionend.transition);var rt=nt("animationend"),it=nt("animationiteration"),ot=nt("animationstart"),at=nt("transitionend"),st="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lt=new("function"==typeof WeakMap?WeakMap:Map);function ct(e){var t=lt.get(e);return void 0===t&&(t=new Map,lt.set(e,t)),t}function ut(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).effectTag)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function dt(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function ht(e){if(ut(e)!==e)throw Error(d(188))}function ft(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=ut(e)))throw Error(d(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var l=a.alternate;if(null===l){if(null!==(r=a.return)){n=r;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===n)return ht(a),e;if(l===r)return ht(a),t;l=l.sibling}throw Error(d(188))}if(n.return!==r.return)n=a,r=l;else{for(var h=!1,f=a.child;f;){if(f===n){h=!0,n=a,r=l;break}if(f===r){h=!0,r=a,n=l;break}f=f.sibling}if(!h){for(f=l.child;f;){if(f===n){h=!0,n=l,r=a;break}if(f===r){h=!0,r=l,n=a;break}f=f.sibling}if(!h)throw Error(d(189))}}if(n.alternate!==r)throw Error(d(190))}if(3!==n.tag)throw Error(d(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function pt(e,t){if(null==t)throw Error(d(30));return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function gt(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var mt=null;function vt(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)E(e,t[r],n[r]);else t&&E(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function yt(e){if(null!==e&&(mt=pt(mt,e)),e=mt,mt=null,e){if(gt(e,vt),mt)throw Error(d(95));if(y)throw e=w,y=!1,w=null,e}}function bt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function wt(e){if(!F)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"==typeof t[e]),t}var _t=[];function Ct(e){e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>_t.length&&_t.push(e)}function St(e,t,n,r){if(_t.length){var a=_t.pop();return a.topLevelType=e,a.eventSystemFlags=r,a.nativeEvent=t,a.targetInst=n,a}return{topLevelType:e,eventSystemFlags:r,nativeEvent:t,targetInst:n,ancestors:[]}}function kt(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(t=n.tag)&&6!==t||e.ancestors.push(n),n=Nn(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var a=bt(e.nativeEvent);r=e.topLevelType;var l=e.nativeEvent,d=e.eventSystemFlags;0===n&&(d|=64);for(var h=null,f=0;f<M.length;f++){var p=M[f];p&&(p=p.extractEvents(r,t,l,a,d))&&(h=pt(h,p))}yt(h)}}function xt(e,t,n){if(!n.has(e)){switch(e){case"scroll":an(t,"scroll",!0);break;case"focus":case"blur":an(t,"focus",!0),an(t,"blur",!0),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":wt(e)&&an(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===st.indexOf(e)&&on(e,t)}n.set(e,null)}}var Et,At,Tt,$t=!1,Rt=[],Ot=null,Mt=null,Pt=null,Lt=new Map,Dt=new Map,It=[],Ft="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),jt="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function Nt(e,t,n,r,a){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|n,nativeEvent:a,container:r}}function Bt(e,t){switch(e){case"focus":case"blur":Ot=null;break;case"dragenter":case"dragleave":Mt=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":Lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function zt(e,t,n,r,a,l){return null===e||e.nativeEvent!==l?(e=Nt(t,n,r,a,l),null!==t&&(null!==(t=Bn(t))&&At(t)),e):(e.eventSystemFlags|=r,e)}function Ht(e){var t=Nn(e.target);if(null!==t){var n=ut(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=dt(n)))return e.blockedOn=t,void l.unstable_runWithPriority(e.priority,(function(){Tt(n)}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;var t=un(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);if(null!==t){var n=Bn(t);return null!==n&&At(n),e.blockedOn=t,!1}return!0}function Wt(e,t,n){Ut(e)&&n.delete(t)}function Vt(){for($t=!1;0<Rt.length;){var e=Rt[0];if(null!==e.blockedOn){null!==(e=Bn(e.blockedOn))&&Et(e);break}var t=un(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);null!==t?e.blockedOn=t:Rt.shift()}null!==Ot&&Ut(Ot)&&(Ot=null),null!==Mt&&Ut(Mt)&&(Mt=null),null!==Pt&&Ut(Pt)&&(Pt=null),Lt.forEach(Wt),Dt.forEach(Wt)}function qt(e,t){e.blockedOn===t&&(e.blockedOn=null,$t||($t=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,Vt)))}function Gt(e){function t(t){return qt(t,e)}if(0<Rt.length){qt(Rt[0],e);for(var n=1;n<Rt.length;n++){var r=Rt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ot&&qt(Ot,e),null!==Mt&&qt(Mt,e),null!==Pt&&qt(Pt,e),Lt.forEach(t),Dt.forEach(t),n=0;n<It.length;n++)(r=It[n]).blockedOn===e&&(r.blockedOn=null);for(;0<It.length&&null===(n=It[0]).blockedOn;)Ht(n),null===n.blockedOn&&It.shift()}var Kt={},Yt=new Map,Xt=new Map,Jt=["abort","abort",rt,"animationEnd",it,"animationIteration",ot,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",at,"transitionEnd","waiting","waiting"];function Qt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],a=e[n+1],l="on"+(a[0].toUpperCase()+a.slice(1));l={phasedRegistrationNames:{bubbled:l,captured:l+"Capture"},dependencies:[r],eventPriority:t},Xt.set(r,t),Yt.set(r,l),Kt[a]=l}}Qt("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Qt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Qt(Jt,2);for(var Zt="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),en=0;en<Zt.length;en++)Xt.set(Zt[en],0);var tn=l.unstable_UserBlockingPriority,nn=l.unstable_runWithPriority,rn=!0;function on(e,t){an(t,e,!1)}function an(e,t,n){var r=Xt.get(t);switch(void 0===r?2:r){case 0:r=sn.bind(null,t,1,e);break;case 1:r=ln.bind(null,t,1,e);break;default:r=cn.bind(null,t,1,e)}n?e.addEventListener(t,r,!0):e.addEventListener(t,r,!1)}function sn(e,t,n,r){K||q();var a=cn,l=K;K=!0;try{V(a,e,t,n,r)}finally{(K=l)||X()}}function ln(e,t,n,r){nn(tn,cn.bind(null,e,t,n,r))}function cn(e,t,n,r){if(rn)if(0<Rt.length&&-1<Ft.indexOf(e))e=Nt(null,e,t,n,r),Rt.push(e);else{var a=un(e,t,n,r);if(null===a)Bt(e,r);else if(-1<Ft.indexOf(e))e=Nt(a,e,t,n,r),Rt.push(e);else if(!function(e,t,n,r,a){switch(t){case"focus":return Ot=zt(Ot,e,t,n,r,a),!0;case"dragenter":return Mt=zt(Mt,e,t,n,r,a),!0;case"mouseover":return Pt=zt(Pt,e,t,n,r,a),!0;case"pointerover":var l=a.pointerId;return Lt.set(l,zt(Lt.get(l)||null,e,t,n,r,a)),!0;case"gotpointercapture":return l=a.pointerId,Dt.set(l,zt(Dt.get(l)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r)){Bt(e,r),e=St(e,r,null,t);try{J(kt,e)}finally{Ct(e)}}}}function un(e,t,n,r){if(null!==(n=Nn(n=bt(r)))){var a=ut(n);if(null===a)n=null;else{var l=a.tag;if(13===l){if(null!==(n=dt(a)))return n;n=null}else if(3===l){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;n=null}else a!==n&&(n=null)}}e=St(e,r,n,t);try{J(kt,e)}finally{Ct(e)}return null}var dn={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hn=["Webkit","ms","Moz","O"];function pn(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||dn.hasOwnProperty(e)&&dn[e]?(""+t).trim():t+"px"}function gn(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=pn(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(dn).forEach((function(e){hn.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),dn[t]=dn[e]}))}));var mn=a({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vn(e,t){if(t){if(mn[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(d(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(d(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(d(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(d(62,""))}}function yn(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bn=Ve;function wn(e,t){var n=ct(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=D[t];for(var r=0;r<t.length;r++)xt(t[r],e,n)}function _n(){}function Cn(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Sn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function kn(e,t){var n,r=Sn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Sn(r)}}function xn(){for(var e=window,t=Cn();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=Cn((e=t.contentWindow).document)}return t}function En(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var An=null,Tn=null;function $n(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Rn(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var On="function"==typeof setTimeout?setTimeout:void 0,Mn="function"==typeof clearTimeout?clearTimeout:void 0;function Pn(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Ln(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Dn=Math.random().toString(36).slice(2),In="__reactInternalInstance$"+Dn,Fn="__reactEventHandlers$"+Dn,jn="__reactContainere$"+Dn;function Nn(e){var t=e[In];if(t)return t;for(var n=e.parentNode;n;){if(t=n[jn]||n[In]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Ln(e);null!==e;){if(n=e[In])return n;e=Ln(e)}return t}n=(e=n).parentNode}return null}function Bn(e){return!(e=e[In]||e[jn])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function zn(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(d(33))}function Hn(e){return e[Fn]||null}function Un(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function Wn(e,t){var n=e.stateNode;if(!n)return null;var r=S(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(d(231,t,typeof n));return n}function Vn(e,t,n){(t=Wn(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=pt(n._dispatchListeners,t),n._dispatchInstances=pt(n._dispatchInstances,e))}function qn(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=Un(t);for(t=n.length;0<t--;)Vn(n[t],"captured",e);for(t=0;t<n.length;t++)Vn(n[t],"bubbled",e)}}function Gn(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=Wn(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=pt(n._dispatchListeners,t),n._dispatchInstances=pt(n._dispatchInstances,e))}function Kn(e){e&&e.dispatchConfig.registrationName&&Gn(e._targetInst,null,e)}function Yn(e){gt(e,qn)}var Xn=null,Jn=null,Qn=null;function Zn(){if(Qn)return Qn;var e,t,n=Jn,r=n.length,a="value"in Xn?Xn.value:Xn.textContent,l=a.length;for(e=0;e<r&&n[e]===a[e];e++);var d=r-e;for(t=1;t<=d&&n[r-t]===a[l-t];t++);return Qn=a.slice(e,1<t?1-t:void 0)}function er(){return!0}function tr(){return!1}function nr(e,t,n,r){for(var a in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(a)&&((t=e[a])?this[a]=t(n):"target"===a?this.target=r:this[a]=n[a]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?er:tr,this.isPropagationStopped=tr,this}function rr(e,t,n,r){if(this.eventPool.length){var a=this.eventPool.pop();return this.call(a,e,t,n,r),a}return new this(e,t,n,r)}function ir(e){if(!(e instanceof this))throw Error(d(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function or(e){e.eventPool=[],e.getPooled=rr,e.release=ir}a(nr.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=er)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=er)},persist:function(){this.isPersistent=er},isPersistent:tr,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=tr,this._dispatchInstances=this._dispatchListeners=null}}),nr.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},nr.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var l=new t;return a(l,n.prototype),n.prototype=l,n.prototype.constructor=n,n.Interface=a({},r.Interface,e),n.extend=r.extend,or(n),n},or(nr);var ar=nr.extend({data:null}),sr=nr.extend({data:null}),lr=[9,13,27,32],cr=F&&"CompositionEvent"in window,ur=null;F&&"documentMode"in document&&(ur=document.documentMode);var dr=F&&"TextEvent"in window&&!ur,hr=F&&(!cr||ur&&8<ur&&11>=ur),fr=String.fromCharCode(32),pr={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},gr=!1;function mr(e,t){switch(e){case"keyup":return-1!==lr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function vr(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var yr=!1;var br={eventTypes:pr,extractEvents:function(e,t,n,r){var a;if(cr)e:{switch(e){case"compositionstart":var l=pr.compositionStart;break e;case"compositionend":l=pr.compositionEnd;break e;case"compositionupdate":l=pr.compositionUpdate;break e}l=void 0}else yr?mr(e,n)&&(l=pr.compositionEnd):"keydown"===e&&229===n.keyCode&&(l=pr.compositionStart);return l?(hr&&"ko"!==n.locale&&(yr||l!==pr.compositionStart?l===pr.compositionEnd&&yr&&(a=Zn()):(Jn="value"in(Xn=r)?Xn.value:Xn.textContent,yr=!0)),l=ar.getPooled(l,t,n,r),a?l.data=a:null!==(a=vr(n))&&(l.data=a),Yn(l),a=l):a=null,(e=dr?function(e,t){switch(e){case"compositionend":return vr(t);case"keypress":return 32!==t.which?null:(gr=!0,fr);case"textInput":return(e=t.data)===fr&&gr?null:e;default:return null}}(e,n):function(e,t){if(yr)return"compositionend"===e||!cr&&mr(e,t)?(e=Zn(),Qn=Jn=Xn=null,yr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return hr&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))?((t=sr.getPooled(pr.beforeInput,t,n,r)).data=e,Yn(t)):t=null,null===a?t:null===t?a:[a,t]}},wr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _r(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!wr[e.type]:"textarea"===t}var Cr={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function Sr(e,t,n){return(e=nr.getPooled(Cr.change,e,t,n)).type="change",H(n),Yn(e),e}var kr=null,xr=null;function Er(e){yt(e)}function Ar(e){if(Me(zn(e)))return e}function Tr(e,t){if("change"===e)return t}var $r=!1;function Rr(){kr&&(kr.detachEvent("onpropertychange",Or),xr=kr=null)}function Or(e){if("value"===e.propertyName&&Ar(xr))if(e=Sr(xr,e,bt(e)),K)yt(e);else{K=!0;try{W(Er,e)}finally{K=!1,X()}}}function Mr(e,t,n){"focus"===e?(Rr(),xr=n,(kr=t).attachEvent("onpropertychange",Or)):"blur"===e&&Rr()}function Pr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Ar(xr)}function Lr(e,t){if("click"===e)return Ar(t)}function Dr(e,t){if("input"===e||"change"===e)return Ar(t)}F&&($r=wt("input")&&(!document.documentMode||9<document.documentMode));var Ir={eventTypes:Cr,_isInputEventSupported:$r,extractEvents:function(e,t,n,r){var a=t?zn(t):window,l=a.nodeName&&a.nodeName.toLowerCase();if("select"===l||"input"===l&&"file"===a.type)var d=Tr;else if(_r(a))if($r)d=Dr;else{d=Pr;var h=Mr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(d=Lr);if(d&&(d=d(e,t)))return Sr(d,n,r);h&&h(e,a,t),"blur"===e&&(e=a._wrapperState)&&e.controlled&&"number"===a.type&&je(a,"number",a.value)}},Fr=nr.extend({view:null,detail:null}),jr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=jr[e])&&!!t[e]}function Br(){return Nr}var zr=0,Hr=0,Ur=!1,Wr=!1,Vr=Fr.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Br,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=zr;return zr=e.screenX,Ur?"mousemove"===e.type?e.screenX-t:0:(Ur=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Hr;return Hr=e.screenY,Wr?"mousemove"===e.type?e.screenY-t:0:(Wr=!0,0)}}),qr=Vr.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Gr={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Kr={eventTypes:Gr,extractEvents:function(e,t,n,r,a){var l="mouseover"===e||"pointerover"===e,d="mouseout"===e||"pointerout"===e;if(l&&0==(32&a)&&(n.relatedTarget||n.fromElement)||!d&&!l)return null;(l=r.window===r?r:(l=r.ownerDocument)?l.defaultView||l.parentWindow:window,d)?(d=t,null!==(t=(t=n.relatedTarget||n.toElement)?Nn(t):null)&&(t!==ut(t)||5!==t.tag&&6!==t.tag)&&(t=null)):d=null;if(d===t)return null;if("mouseout"===e||"mouseover"===e)var h=Vr,f=Gr.mouseLeave,p=Gr.mouseEnter,y="mouse";else"pointerout"!==e&&"pointerover"!==e||(h=qr,f=Gr.pointerLeave,p=Gr.pointerEnter,y="pointer");if(e=null==d?l:zn(d),l=null==t?l:zn(t),(f=h.getPooled(f,d,n,r)).type=y+"leave",f.target=e,f.relatedTarget=l,(n=h.getPooled(p,t,n,r)).type=y+"enter",n.target=l,n.relatedTarget=e,y=t,(r=d)&&y)e:{for(p=y,d=0,e=h=r;e;e=Un(e))d++;for(e=0,t=p;t;t=Un(t))e++;for(;0<d-e;)h=Un(h),d--;for(;0<e-d;)p=Un(p),e--;for(;d--;){if(h===p||h===p.alternate)break e;h=Un(h),p=Un(p)}h=null}else h=null;for(p=h,h=[];r&&r!==p&&(null===(d=r.alternate)||d!==p);)h.push(r),r=Un(r);for(r=[];y&&y!==p&&(null===(d=y.alternate)||d!==p);)r.push(y),y=Un(y);for(y=0;y<h.length;y++)Gn(h[y],"bubbled",f);for(y=r.length;0<y--;)Gn(r[y],"captured",n);return 0==(64&a)?[f]:[f,n]}};var Yr="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},Xr=Object.prototype.hasOwnProperty;function Jr(e,t){if(Yr(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Xr.call(t,n[r])||!Yr(e[n[r]],t[n[r]]))return!1;return!0}var Qr=F&&"documentMode"in document&&11>=document.documentMode,Zr={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},ei=null,ti=null,ni=null,ri=!1;function ii(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return ri||null==ei||ei!==Cn(n)?null:("selectionStart"in(n=ei)&&En(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},ni&&Jr(ni,n)?null:(ni=n,(e=nr.getPooled(Zr.select,ti,e,t)).type="select",e.target=ei,Yn(e),e))}var oi={eventTypes:Zr,extractEvents:function(e,t,n,r,a,l){if(!(l=!(a=l||(r.window===r?r.document:9===r.nodeType?r:r.ownerDocument)))){e:{a=ct(a),l=D.onSelect;for(var d=0;d<l.length;d++)if(!a.has(l[d])){a=!1;break e}a=!0}l=!a}if(l)return null;switch(a=t?zn(t):window,e){case"focus":(_r(a)||"true"===a.contentEditable)&&(ei=a,ti=t,ni=null);break;case"blur":ni=ti=ei=null;break;case"mousedown":ri=!0;break;case"contextmenu":case"mouseup":case"dragend":return ri=!1,ii(n,r);case"selectionchange":if(Qr)break;case"keydown":case"keyup":return ii(n,r)}return null}},ai=nr.extend({animationName:null,elapsedTime:null,pseudoElement:null}),si=nr.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),li=Fr.extend({relatedTarget:null});function ci(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var ui={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},di={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hi=Fr.extend({key:function(e){if(e.key){var t=ui[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ci(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?di[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Br,charCode:function(e){return"keypress"===e.type?ci(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ci(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),fi=Vr.extend({dataTransfer:null}),pi=Fr.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Br}),gi=nr.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),mi=Vr.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),vi={eventTypes:Kt,extractEvents:function(e,t,n,r){var a=Yt.get(e);if(!a)return null;switch(e){case"keypress":if(0===ci(n))return null;case"keydown":case"keyup":e=hi;break;case"blur":case"focus":e=li;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=Vr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=fi;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=pi;break;case rt:case it:case ot:e=ai;break;case at:e=gi;break;case"scroll":e=Fr;break;case"wheel":e=mi;break;case"copy":case"cut":case"paste":e=si;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=qr;break;default:e=nr}return Yn(t=e.getPooled(a,t,n,r)),t}};if(A)throw Error(d(101));A=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),R(),S=Hn,k=Bn,x=zn,I({SimpleEventPlugin:vi,EnterLeaveEventPlugin:Kr,ChangeEventPlugin:Ir,SelectEventPlugin:oi,BeforeInputEventPlugin:br});var yi=[],bi=-1;function wi(e){0>bi||(e.current=yi[bi],yi[bi]=null,bi--)}function _i(e,t){bi++,yi[bi]=e.current,e.current=t}var Ci={},Si={current:Ci},ki={current:!1},xi=Ci;function Ei(e,t){var n=e.type.contextTypes;if(!n)return Ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,l={};for(a in n)l[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function Ai(e){return null!=(e=e.childContextTypes)}function Ti(){wi(ki),wi(Si)}function $i(e,t,n){if(Si.current!==Ci)throw Error(d(168));_i(Si,t),_i(ki,n)}function Ri(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var l in r=r.getChildContext())if(!(l in e))throw Error(d(108,Ae(t)||"Unknown",l));return a({},n,{},r)}function Oi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,xi=Si.current,_i(Si,e),_i(ki,ki.current),!0}function Mi(e,t,n){var r=e.stateNode;if(!r)throw Error(d(169));n?(e=Ri(e,t,xi),r.__reactInternalMemoizedMergedChildContext=e,wi(ki),wi(Si),_i(Si,e)):wi(ki),_i(ki,n)}var Pi=l.unstable_runWithPriority,Li=l.unstable_scheduleCallback,Di=l.unstable_cancelCallback,Ii=l.unstable_requestPaint,Fi=l.unstable_now,ji=l.unstable_getCurrentPriorityLevel,Ni=l.unstable_ImmediatePriority,Bi=l.unstable_UserBlockingPriority,zi=l.unstable_NormalPriority,Hi=l.unstable_LowPriority,Ui=l.unstable_IdlePriority,Wi={},Vi=l.unstable_shouldYield,qi=void 0!==Ii?Ii:function(){},Gi=null,Ki=null,Yi=!1,Xi=Fi(),Ji=1e4>Xi?Fi:function(){return Fi()-Xi};function Qi(){switch(ji()){case Ni:return 99;case Bi:return 98;case zi:return 97;case Hi:return 96;case Ui:return 95;default:throw Error(d(332))}}function Zi(e){switch(e){case 99:return Ni;case 98:return Bi;case 97:return zi;case 96:return Hi;case 95:return Ui;default:throw Error(d(332))}}function eo(e,t){return e=Zi(e),Pi(e,t)}function to(e,t,n){return e=Zi(e),Li(e,t,n)}function no(e){return null===Gi?(Gi=[e],Ki=Li(Ni,io)):Gi.push(e),Wi}function ro(){if(null!==Ki){var e=Ki;Ki=null,Di(e)}io()}function io(){if(!Yi&&null!==Gi){Yi=!0;var e=0;try{var t=Gi;eo(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Gi=null}catch(t){throw null!==Gi&&(Gi=Gi.slice(e+1)),Li(Ni,ro),t}finally{Yi=!1}}}function oo(e,t,n){return 1073741821-(1+((1073741821-e+t/10)/(n/=10)|0))*n}function ao(e,t){if(e&&e.defaultProps)for(var n in t=a({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var so={current:null},lo=null,co=null,uo=null;function ho(){uo=co=lo=null}function fo(e){var t=so.current;wi(so),e.type._context._currentValue=t}function po(e,t){for(;null!==e;){var n=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t);else{if(!(null!==n&&n.childExpirationTime<t))break;n.childExpirationTime=t}e=e.return}}function go(e,t){lo=e,uo=co=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(Ha=!0),e.firstContext=null)}function mo(e,t){if(uo!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(uo=e,t=1073741823),t={context:e,observedBits:t,next:null},null===co){if(null===lo)throw Error(d(308));co=t,lo.dependencies={expirationTime:0,firstContext:t,responders:null}}else co=co.next=t;return e._currentValue}var vo=!1;function yo(e){e.updateQueue={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function bo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,baseQueue:e.baseQueue,shared:e.shared,effects:e.effects})}function wo(e,t){return(e={expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null}).next=e}function _o(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function Co(e,t){var n=e.alternate;null!==n&&bo(n,e),null===(n=(e=e.updateQueue).baseQueue)?(e.baseQueue=t.next=t,t.next=t):(t.next=n.next,n.next=t)}function So(e,t,n,r){var l=e.updateQueue;vo=!1;var d=l.baseQueue,h=l.shared.pending;if(null!==h){if(null!==d){var f=d.next;d.next=h.next,h.next=f}d=h,l.shared.pending=null,null!==(f=e.alternate)&&(null!==(f=f.updateQueue)&&(f.baseQueue=h))}if(null!==d){f=d.next;var p=l.baseState,y=0,w=null,_=null,C=null;if(null!==f)for(var S=f;;){if((h=S.expirationTime)<r){var k={expirationTime:S.expirationTime,suspenseConfig:S.suspenseConfig,tag:S.tag,payload:S.payload,callback:S.callback,next:null};null===C?(_=C=k,w=p):C=C.next=k,h>y&&(y=h)}else{null!==C&&(C=C.next={expirationTime:1073741823,suspenseConfig:S.suspenseConfig,tag:S.tag,payload:S.payload,callback:S.callback,next:null}),vl(h,S.suspenseConfig);e:{var x=e,E=S;switch(h=t,k=n,E.tag){case 1:if("function"==typeof(x=E.payload)){p=x.call(k,p,h);break e}p=x;break e;case 3:x.effectTag=-4097&x.effectTag|64;case 0:if(null==(h="function"==typeof(x=E.payload)?x.call(k,p,h):x))break e;p=a({},p,h);break e;case 2:vo=!0}}null!==S.callback&&(e.effectTag|=32,null===(h=l.effects)?l.effects=[S]:h.push(S))}if(null===(S=S.next)||S===f){if(null===(h=l.shared.pending))break;S=d.next=h.next,h.next=f,l.baseQueue=d=h,l.shared.pending=null}}null===C?w=p:C.next=_,l.baseState=w,l.baseQueue=C,yl(y),e.expirationTime=y,e.memoizedState=p}}function ko(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=a,a=n,"function"!=typeof r)throw Error(d(191,r));r.call(a)}}}var xo=se.ReactCurrentBatchConfig,Eo=(new r.Component).refs;function Ao(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:a({},t,n),e.memoizedState=n,0===e.expirationTime&&(e.updateQueue.baseState=n)}var To={isMounted:function(e){return!!(e=e._reactInternalFiber)&&ut(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=il(),a=xo.suspense;(a=wo(r=ol(r,e,a),a)).payload=t,null!=n&&(a.callback=n),_o(e,a),al(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=il(),a=xo.suspense;(a=wo(r=ol(r,e,a),a)).tag=1,a.payload=t,null!=n&&(a.callback=n),_o(e,a),al(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=il(),r=xo.suspense;(r=wo(n=ol(n,e,r),r)).tag=2,null!=t&&(r.callback=t),_o(e,r),al(e,n)}};function $o(e,t,n,r,a,l,d){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,l,d):!t.prototype||!t.prototype.isPureReactComponent||(!Jr(n,r)||!Jr(a,l))}function Ro(e,t,n){var r=!1,a=Ci,l=t.contextType;return"object"==typeof l&&null!==l?l=mo(l):(a=Ai(t)?xi:Si.current,l=(r=null!=(r=t.contextTypes))?Ei(e,a):Ci),t=new t(n,l),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=To,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=l),t}function Oo(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&To.enqueueReplaceState(t,t.state,null)}function Mo(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=Eo,yo(e);var l=t.contextType;"object"==typeof l&&null!==l?a.context=mo(l):(l=Ai(t)?xi:Si.current,a.context=Ei(e,l)),So(e,n,a,r),a.state=e.memoizedState,"function"==typeof(l=t.getDerivedStateFromProps)&&(Ao(e,t,l,n),a.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof a.getSnapshotBeforeUpdate||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||(t=a.state,"function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&To.enqueueReplaceState(a,a.state,null),So(e,n,a,r),a.state=e.memoizedState),"function"==typeof a.componentDidMount&&(e.effectTag|=4)}var Po=Array.isArray;function Lo(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(d(309));var r=n.stateNode}if(!r)throw Error(d(147,e));var a=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===a?t.ref:((t=function(e){var t=r.refs;t===Eo&&(t=r.refs={}),null===e?delete t[a]:t[a]=e})._stringRef=a,t)}if("string"!=typeof e)throw Error(d(284));if(!n._owner)throw Error(d(290,e))}return e}function Do(e,t){if("textarea"!==e.type)throw Error(d(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function Io(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=jl(e,t)).index=0,e.sibling=null,e}function l(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function h(t){return e&&null===t.alternate&&(t.effectTag=2),t}function f(e,t,n,r){return null===t||6!==t.tag?((t=zl(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function p(e,t,n,r){return null!==t&&t.elementType===n.type?((r=a(t,n.props)).ref=Lo(e,t,n),r.return=e,r):((r=Nl(n.type,n.key,n.props,null,e.mode,r)).ref=Lo(e,t,n),r.return=e,r)}function y(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Hl(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function w(e,t,n,r,l){return null===t||7!==t.tag?((t=Bl(n,e.mode,r,l)).return=e,t):((t=a(t,n)).return=e,t)}function _(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=zl(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case de:return(n=Nl(t.type,t.key,t.props,null,e.mode,n)).ref=Lo(e,null,t),n.return=e,n;case he:return(t=Hl(t,e.mode,n)).return=e,t}if(Po(t)||Ee(t))return(t=Bl(t,e.mode,n,null)).return=e,t;Do(e,t)}return null}function C(e,t,n,r){var a=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==a?null:f(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case de:return n.key===a?n.type===fe?w(e,t,n.props.children,r,a):p(e,t,n,r):null;case he:return n.key===a?y(e,t,n,r):null}if(Po(n)||Ee(n))return null!==a?null:w(e,t,n,r,null);Do(e,n)}return null}function S(e,t,n,r,a){if("string"==typeof r||"number"==typeof r)return f(t,e=e.get(n)||null,""+r,a);if("object"==typeof r&&null!==r){switch(r.$$typeof){case de:return e=e.get(null===r.key?n:r.key)||null,r.type===fe?w(t,e,r.props.children,a,r.key):p(t,e,r,a);case he:return y(t,e=e.get(null===r.key?n:r.key)||null,r,a)}if(Po(r)||Ee(r))return w(t,e=e.get(n)||null,r,a,null);Do(t,r)}return null}function k(a,d,h,f){for(var p=null,y=null,w=d,k=d=0,x=null;null!==w&&k<h.length;k++){w.index>k?(x=w,w=null):x=w.sibling;var E=C(a,w,h[k],f);if(null===E){null===w&&(w=x);break}e&&w&&null===E.alternate&&t(a,w),d=l(E,d,k),null===y?p=E:y.sibling=E,y=E,w=x}if(k===h.length)return n(a,w),p;if(null===w){for(;k<h.length;k++)null!==(w=_(a,h[k],f))&&(d=l(w,d,k),null===y?p=w:y.sibling=w,y=w);return p}for(w=r(a,w);k<h.length;k++)null!==(x=S(w,a,k,h[k],f))&&(e&&null!==x.alternate&&w.delete(null===x.key?k:x.key),d=l(x,d,k),null===y?p=x:y.sibling=x,y=x);return e&&w.forEach((function(e){return t(a,e)})),p}function x(a,h,f,p){var y=Ee(f);if("function"!=typeof y)throw Error(d(150));if(null==(f=y.call(f)))throw Error(d(151));for(var w=y=null,k=h,x=h=0,E=null,A=f.next();null!==k&&!A.done;x++,A=f.next()){k.index>x?(E=k,k=null):E=k.sibling;var T=C(a,k,A.value,p);if(null===T){null===k&&(k=E);break}e&&k&&null===T.alternate&&t(a,k),h=l(T,h,x),null===w?y=T:w.sibling=T,w=T,k=E}if(A.done)return n(a,k),y;if(null===k){for(;!A.done;x++,A=f.next())null!==(A=_(a,A.value,p))&&(h=l(A,h,x),null===w?y=A:w.sibling=A,w=A);return y}for(k=r(a,k);!A.done;x++,A=f.next())null!==(A=S(k,a,x,A.value,p))&&(e&&null!==A.alternate&&k.delete(null===A.key?x:A.key),h=l(A,h,x),null===w?y=A:w.sibling=A,w=A);return e&&k.forEach((function(e){return t(a,e)})),y}return function(e,r,l,f){var p="object"==typeof l&&null!==l&&l.type===fe&&null===l.key;p&&(l=l.props.children);var y="object"==typeof l&&null!==l;if(y)switch(l.$$typeof){case de:e:{for(y=l.key,p=r;null!==p;){if(p.key===y){switch(p.tag){case 7:if(l.type===fe){n(e,p.sibling),(r=a(p,l.props.children)).return=e,e=r;break e}break;default:if(p.elementType===l.type){n(e,p.sibling),(r=a(p,l.props)).ref=Lo(e,p,l),r.return=e,e=r;break e}}n(e,p);break}t(e,p),p=p.sibling}l.type===fe?((r=Bl(l.props.children,e.mode,f,l.key)).return=e,e=r):((f=Nl(l.type,l.key,l.props,null,e.mode,f)).ref=Lo(e,r,l),f.return=e,e=f)}return h(e);case he:e:{for(p=l.key;null!==r;){if(r.key===p){if(4===r.tag&&r.stateNode.containerInfo===l.containerInfo&&r.stateNode.implementation===l.implementation){n(e,r.sibling),(r=a(r,l.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Hl(l,e.mode,f)).return=e,e=r}return h(e)}if("string"==typeof l||"number"==typeof l)return l=""+l,null!==r&&6===r.tag?(n(e,r.sibling),(r=a(r,l)).return=e,e=r):(n(e,r),(r=zl(l,e.mode,f)).return=e,e=r),h(e);if(Po(l))return k(e,r,l,f);if(Ee(l))return x(e,r,l,f);if(y&&Do(e,l),void 0===l&&!p)switch(e.tag){case 1:case 0:throw e=e.type,Error(d(152,e.displayName||e.name||"Component"))}return n(e,r)}}var Fo=Io(!0),jo=Io(!1),No={},Bo={current:No},zo={current:No},Ho={current:No};function Uo(e){if(e===No)throw Error(d(174));return e}function Wo(e,t){switch(_i(Ho,t),_i(zo,e),_i(Bo,No),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ke(null,"");break;default:t=Ke(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}wi(Bo),_i(Bo,t)}function Vo(){wi(Bo),wi(zo),wi(Ho)}function qo(e){Uo(Ho.current);var t=Uo(Bo.current),n=Ke(t,e.type);t!==n&&(_i(zo,e),_i(Bo,n))}function Go(e){zo.current===e&&(wi(Bo),wi(zo))}var Ko={current:0};function Yo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Xo(e,t){return{responder:e,props:t}}var Jo=se.ReactCurrentDispatcher,Qo=se.ReactCurrentBatchConfig,Zo=0,ea=null,ta=null,na=null,ra=!1;function ia(){throw Error(d(321))}function oa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Yr(e[n],t[n]))return!1;return!0}function aa(e,t,n,r,a,l){if(Zo=l,ea=t,t.memoizedState=null,t.updateQueue=null,t.expirationTime=0,Jo.current=null===e||null===e.memoizedState?$a:Ra,e=n(r,a),t.expirationTime===Zo){l=0;do{if(t.expirationTime=0,!(25>l))throw Error(d(301));l+=1,na=ta=null,t.updateQueue=null,Jo.current=Oa,e=n(r,a)}while(t.expirationTime===Zo)}if(Jo.current=Ta,t=null!==ta&&null!==ta.next,Zo=0,na=ta=ea=null,ra=!1,t)throw Error(d(300));return e}function sa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===na?ea.memoizedState=na=e:na=na.next=e,na}function la(){if(null===ta){var e=ea.alternate;e=null!==e?e.memoizedState:null}else e=ta.next;var t=null===na?ea.memoizedState:na.next;if(null!==t)na=t,ta=e;else{if(null===e)throw Error(d(310));e={memoizedState:(ta=e).memoizedState,baseState:ta.baseState,baseQueue:ta.baseQueue,queue:ta.queue,next:null},null===na?ea.memoizedState=na=e:na=na.next=e}return na}function ca(e,t){return"function"==typeof t?t(e):t}function ua(e){var t=la(),n=t.queue;if(null===n)throw Error(d(311));n.lastRenderedReducer=e;var r=ta,a=r.baseQueue,l=n.pending;if(null!==l){if(null!==a){var h=a.next;a.next=l.next,l.next=h}r.baseQueue=a=l,n.pending=null}if(null!==a){a=a.next,r=r.baseState;var f=h=l=null,p=a;do{var y=p.expirationTime;if(y<Zo){var w={expirationTime:p.expirationTime,suspenseConfig:p.suspenseConfig,action:p.action,eagerReducer:p.eagerReducer,eagerState:p.eagerState,next:null};null===f?(h=f=w,l=r):f=f.next=w,y>ea.expirationTime&&(ea.expirationTime=y,yl(y))}else null!==f&&(f=f.next={expirationTime:1073741823,suspenseConfig:p.suspenseConfig,action:p.action,eagerReducer:p.eagerReducer,eagerState:p.eagerState,next:null}),vl(y,p.suspenseConfig),r=p.eagerReducer===e?p.eagerState:e(r,p.action);p=p.next}while(null!==p&&p!==a);null===f?l=r:f.next=h,Yr(r,t.memoizedState)||(Ha=!0),t.memoizedState=r,t.baseState=l,t.baseQueue=f,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function da(e){var t=la(),n=t.queue;if(null===n)throw Error(d(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,l=t.memoizedState;if(null!==a){n.pending=null;var h=a=a.next;do{l=e(l,h.action),h=h.next}while(h!==a);Yr(l,t.memoizedState)||(Ha=!0),t.memoizedState=l,null===t.baseQueue&&(t.baseState=l),n.lastRenderedState=l}return[l,r]}function ha(e){var t=sa();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:ca,lastRenderedState:e}).dispatch=Aa.bind(null,ea,e),[t.memoizedState,e]}function fa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ea.updateQueue)?(t={lastEffect:null},ea.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function pa(){return la().memoizedState}function ga(e,t,n,r){var a=sa();ea.effectTag|=e,a.memoizedState=fa(1|t,n,void 0,void 0===r?null:r)}function ma(e,t,n,r){var a=la();r=void 0===r?null:r;var l=void 0;if(null!==ta){var d=ta.memoizedState;if(l=d.destroy,null!==r&&oa(r,d.deps))return void fa(t,n,l,r)}ea.effectTag|=e,a.memoizedState=fa(1|t,n,l,r)}function va(e,t){return ga(516,4,e,t)}function ya(e,t){return ma(516,4,e,t)}function ba(e,t){return ma(4,2,e,t)}function wa(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function _a(e,t,n){return n=null!=n?n.concat([e]):null,ma(4,2,wa.bind(null,t,e),n)}function Ca(){}function Sa(e,t){return sa().memoizedState=[e,void 0===t?null:t],e}function ka(e,t){var n=la();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&oa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function xa(e,t){var n=la();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&oa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ea(e,t,n){var r=Qi();eo(98>r?98:r,(function(){e(!0)})),eo(97<r?97:r,(function(){var r=Qo.suspense;Qo.suspense=void 0===t?null:t;try{e(!1),n()}finally{Qo.suspense=r}}))}function Aa(e,t,n){var r=il(),a=xo.suspense;a={expirationTime:r=ol(r,e,a),suspenseConfig:a,action:n,eagerReducer:null,eagerState:null,next:null};var l=t.pending;if(null===l?a.next=a:(a.next=l.next,l.next=a),t.pending=a,l=e.alternate,e===ea||null!==l&&l===ea)ra=!0,a.expirationTime=Zo,ea.expirationTime=Zo;else{if(0===e.expirationTime&&(null===l||0===l.expirationTime)&&null!==(l=t.lastRenderedReducer))try{var d=t.lastRenderedState,h=l(d,n);if(a.eagerReducer=l,a.eagerState=h,Yr(h,d))return}catch(e){}al(e,r)}}var Ta={readContext:mo,useCallback:ia,useContext:ia,useEffect:ia,useImperativeHandle:ia,useLayoutEffect:ia,useMemo:ia,useReducer:ia,useRef:ia,useState:ia,useDebugValue:ia,useResponder:ia,useDeferredValue:ia,useTransition:ia},$a={readContext:mo,useCallback:Sa,useContext:mo,useEffect:va,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,ga(4,2,wa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ga(4,2,e,t)},useMemo:function(e,t){var n=sa();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=sa();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Aa.bind(null,ea,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},sa().memoizedState=e},useState:ha,useDebugValue:Ca,useResponder:Xo,useDeferredValue:function(e,t){var n=ha(e),r=n[0],a=n[1];return va((function(){var n=Qo.suspense;Qo.suspense=void 0===t?null:t;try{a(e)}finally{Qo.suspense=n}}),[e,t]),r},useTransition:function(e){var t=ha(!1),n=t[0];return t=t[1],[Sa(Ea.bind(null,t,e),[t,e]),n]}},Ra={readContext:mo,useCallback:ka,useContext:mo,useEffect:ya,useImperativeHandle:_a,useLayoutEffect:ba,useMemo:xa,useReducer:ua,useRef:pa,useState:function(){return ua(ca)},useDebugValue:Ca,useResponder:Xo,useDeferredValue:function(e,t){var n=ua(ca),r=n[0],a=n[1];return ya((function(){var n=Qo.suspense;Qo.suspense=void 0===t?null:t;try{a(e)}finally{Qo.suspense=n}}),[e,t]),r},useTransition:function(e){var t=ua(ca),n=t[0];return t=t[1],[ka(Ea.bind(null,t,e),[t,e]),n]}},Oa={readContext:mo,useCallback:ka,useContext:mo,useEffect:ya,useImperativeHandle:_a,useLayoutEffect:ba,useMemo:xa,useReducer:da,useRef:pa,useState:function(){return da(ca)},useDebugValue:Ca,useResponder:Xo,useDeferredValue:function(e,t){var n=da(ca),r=n[0],a=n[1];return ya((function(){var n=Qo.suspense;Qo.suspense=void 0===t?null:t;try{a(e)}finally{Qo.suspense=n}}),[e,t]),r},useTransition:function(e){var t=da(ca),n=t[0];return t=t[1],[ka(Ea.bind(null,t,e),[t,e]),n]}},Ma=null,Pa=null,La=!1;function Da(e,t){var n=Il(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Ia(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function Fa(e){if(La){var t=Pa;if(t){var n=t;if(!Ia(e,t)){if(!(t=Pn(n.nextSibling))||!Ia(e,t))return e.effectTag=-1025&e.effectTag|2,La=!1,void(Ma=e);Da(Ma,n)}Ma=e,Pa=Pn(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,La=!1,Ma=e}}function ja(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ma=e}function Na(e){if(e!==Ma)return!1;if(!La)return ja(e),La=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Rn(t,e.memoizedProps))for(t=Pa;t;)Da(e,t),t=Pn(t.nextSibling);if(ja(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(d(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Pa=Pn(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Pa=null}}else Pa=Ma?Pn(e.stateNode.nextSibling):null;return!0}function Ba(){Pa=Ma=null,La=!1}var za=se.ReactCurrentOwner,Ha=!1;function Ua(e,t,n,r){t.child=null===e?jo(t,null,n,r):Fo(t,e.child,n,r)}function Wa(e,t,n,r,a){n=n.render;var l=t.ref;return go(t,a),r=aa(e,t,n,r,l,a),null===e||Ha?(t.effectTag|=1,Ua(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=a&&(e.expirationTime=0),as(e,t,a))}function Va(e,t,n,r,a,l){if(null===e){var d=n.type;return"function"!=typeof d||Fl(d)||void 0!==d.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Nl(n.type,null,r,null,t.mode,l)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=d,qa(e,t,d,r,a,l))}return d=e.child,a<l&&(a=d.memoizedProps,(n=null!==(n=n.compare)?n:Jr)(a,r)&&e.ref===t.ref)?as(e,t,l):(t.effectTag|=1,(e=jl(d,r)).ref=t.ref,e.return=t,t.child=e)}function qa(e,t,n,r,a,l){return null!==e&&Jr(e.memoizedProps,r)&&e.ref===t.ref&&(Ha=!1,a<l)?(t.expirationTime=e.expirationTime,as(e,t,l)):Ka(e,t,n,r,l)}function Ga(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function Ka(e,t,n,r,a){var l=Ai(n)?xi:Si.current;return l=Ei(t,l),go(t,a),n=aa(e,t,n,r,l,a),null===e||Ha?(t.effectTag|=1,Ua(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=a&&(e.expirationTime=0),as(e,t,a))}function Ya(e,t,n,r,a){if(Ai(n)){var l=!0;Oi(t)}else l=!1;if(go(t,a),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),Ro(t,n,r),Mo(t,n,r,a),r=!0;else if(null===e){var d=t.stateNode,h=t.memoizedProps;d.props=h;var f=d.context,p=n.contextType;"object"==typeof p&&null!==p?p=mo(p):p=Ei(t,p=Ai(n)?xi:Si.current);var y=n.getDerivedStateFromProps,w="function"==typeof y||"function"==typeof d.getSnapshotBeforeUpdate;w||"function"!=typeof d.UNSAFE_componentWillReceiveProps&&"function"!=typeof d.componentWillReceiveProps||(h!==r||f!==p)&&Oo(t,d,r,p),vo=!1;var _=t.memoizedState;d.state=_,So(t,r,d,a),f=t.memoizedState,h!==r||_!==f||ki.current||vo?("function"==typeof y&&(Ao(t,n,y,r),f=t.memoizedState),(h=vo||$o(t,n,h,r,_,f,p))?(w||"function"!=typeof d.UNSAFE_componentWillMount&&"function"!=typeof d.componentWillMount||("function"==typeof d.componentWillMount&&d.componentWillMount(),"function"==typeof d.UNSAFE_componentWillMount&&d.UNSAFE_componentWillMount()),"function"==typeof d.componentDidMount&&(t.effectTag|=4)):("function"==typeof d.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=f),d.props=r,d.state=f,d.context=p,r=h):("function"==typeof d.componentDidMount&&(t.effectTag|=4),r=!1)}else d=t.stateNode,bo(e,t),h=t.memoizedProps,d.props=t.type===t.elementType?h:ao(t.type,h),f=d.context,"object"==typeof(p=n.contextType)&&null!==p?p=mo(p):p=Ei(t,p=Ai(n)?xi:Si.current),(w="function"==typeof(y=n.getDerivedStateFromProps)||"function"==typeof d.getSnapshotBeforeUpdate)||"function"!=typeof d.UNSAFE_componentWillReceiveProps&&"function"!=typeof d.componentWillReceiveProps||(h!==r||f!==p)&&Oo(t,d,r,p),vo=!1,f=t.memoizedState,d.state=f,So(t,r,d,a),_=t.memoizedState,h!==r||f!==_||ki.current||vo?("function"==typeof y&&(Ao(t,n,y,r),_=t.memoizedState),(y=vo||$o(t,n,h,r,f,_,p))?(w||"function"!=typeof d.UNSAFE_componentWillUpdate&&"function"!=typeof d.componentWillUpdate||("function"==typeof d.componentWillUpdate&&d.componentWillUpdate(r,_,p),"function"==typeof d.UNSAFE_componentWillUpdate&&d.UNSAFE_componentWillUpdate(r,_,p)),"function"==typeof d.componentDidUpdate&&(t.effectTag|=4),"function"==typeof d.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!=typeof d.componentDidUpdate||h===e.memoizedProps&&f===e.memoizedState||(t.effectTag|=4),"function"!=typeof d.getSnapshotBeforeUpdate||h===e.memoizedProps&&f===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=_),d.props=r,d.state=_,d.context=p,r=y):("function"!=typeof d.componentDidUpdate||h===e.memoizedProps&&f===e.memoizedState||(t.effectTag|=4),"function"!=typeof d.getSnapshotBeforeUpdate||h===e.memoizedProps&&f===e.memoizedState||(t.effectTag|=256),r=!1);return Xa(e,t,n,r,l,a)}function Xa(e,t,n,r,a,l){Ga(e,t);var d=0!=(64&t.effectTag);if(!r&&!d)return a&&Mi(t,n,!1),as(e,t,l);r=t.stateNode,za.current=t;var h=d&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&d?(t.child=Fo(t,e.child,null,l),t.child=Fo(t,null,h,l)):Ua(e,t,h,l),t.memoizedState=r.state,a&&Mi(t,n,!0),t.child}function Ja(e){var t=e.stateNode;t.pendingContext?$i(0,t.pendingContext,t.pendingContext!==t.context):t.context&&$i(0,t.context,!1),Wo(e,t.containerInfo)}var Qa,Za,es,ts={dehydrated:null,retryTime:0};function ns(e,t,n){var r,a=t.mode,l=t.pendingProps,d=Ko.current,h=!1;if((r=0!=(64&t.effectTag))||(r=0!=(2&d)&&(null===e||null!==e.memoizedState)),r?(h=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===l.fallback||!0===l.unstable_avoidThisFallback||(d|=1),_i(Ko,1&d),null===e){if(void 0!==l.fallback&&Fa(t),h){if(h=l.fallback,(l=Bl(null,a,0,null)).return=t,0==(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,l.child=e;null!==e;)e.return=l,e=e.sibling;return(n=Bl(h,a,n,null)).return=t,l.sibling=n,t.memoizedState=ts,t.child=l,n}return a=l.children,t.memoizedState=null,t.child=jo(t,null,a,n)}if(null!==e.memoizedState){if(a=(e=e.child).sibling,h){if(l=l.fallback,(n=jl(e,e.pendingProps)).return=t,0==(2&t.mode)&&(h=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(n.child=h;null!==h;)h.return=n,h=h.sibling;return(a=jl(a,l)).return=t,n.sibling=a,n.childExpirationTime=0,t.memoizedState=ts,t.child=n,a}return n=Fo(t,e.child,l.children,n),t.memoizedState=null,t.child=n}if(e=e.child,h){if(h=l.fallback,(l=Bl(null,a,0,null)).return=t,l.child=e,null!==e&&(e.return=l),0==(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,l.child=e;null!==e;)e.return=l,e=e.sibling;return(n=Bl(h,a,n,null)).return=t,l.sibling=n,n.effectTag|=2,l.childExpirationTime=0,t.memoizedState=ts,t.child=l,n}return t.memoizedState=null,t.child=Fo(t,e,l.children,n)}function rs(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t),po(e.return,t)}function is(e,t,n,r,a,l){var d=e.memoizedState;null===d?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailExpiration:0,tailMode:a,lastEffect:l}:(d.isBackwards=t,d.rendering=null,d.renderingStartTime=0,d.last=r,d.tail=n,d.tailExpiration=0,d.tailMode=a,d.lastEffect=l)}function os(e,t,n){var r=t.pendingProps,a=r.revealOrder,l=r.tail;if(Ua(e,t,r.children,n),0!=(2&(r=Ko.current)))r=1&r|2,t.effectTag|=64;else{if(null!==e&&0!=(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&rs(e,n);else if(19===e.tag)rs(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(_i(Ko,r),0==(2&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===Yo(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),is(t,!1,a,n,l,t.lastEffect);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===Yo(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}is(t,!0,n,null,l,t.lastEffect);break;case"together":is(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function as(e,t,n){null!==e&&(t.dependencies=e.dependencies);var r=t.expirationTime;if(0!==r&&yl(r),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child)throw Error(d(153));if(null!==t.child){for(n=jl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=jl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function ss(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ls(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Ai(t.type)&&Ti(),null;case 3:return Vo(),wi(ki),wi(Si),(n=t.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||!Na(t)||(t.effectTag|=4),null;case 5:Go(t),n=Uo(Ho.current);var l=t.type;if(null!==e&&null!=t.stateNode)Za(e,t,l,r,n),e.ref!==t.ref&&(t.effectTag|=128);else{if(!r){if(null===t.stateNode)throw Error(d(166));return null}if(e=Uo(Bo.current),Na(t)){r=t.stateNode,l=t.type;var h=t.memoizedProps;switch(r[In]=t,r[Fn]=h,l){case"iframe":case"object":case"embed":on("load",r);break;case"video":case"audio":for(e=0;e<st.length;e++)on(st[e],r);break;case"source":on("error",r);break;case"img":case"image":case"link":on("error",r),on("load",r);break;case"form":on("reset",r),on("submit",r);break;case"details":on("toggle",r);break;case"input":Le(r,h),on("invalid",r),wn(n,"onChange");break;case"select":r._wrapperState={wasMultiple:!!h.multiple},on("invalid",r),wn(n,"onChange");break;case"textarea":He(r,h),on("invalid",r),wn(n,"onChange")}for(var f in vn(l,h),e=null,h)if(h.hasOwnProperty(f)){var p=h[f];"children"===f?"string"==typeof p?r.textContent!==p&&(e=["children",p]):"number"==typeof p&&r.textContent!==""+p&&(e=["children",""+p]):L.hasOwnProperty(f)&&null!=p&&wn(n,f)}switch(l){case"input":Oe(r),Fe(r,h,!0);break;case"textarea":Oe(r),We(r);break;case"select":case"option":break;default:"function"==typeof h.onClick&&(r.onclick=_n)}n=e,t.updateQueue=n,null!==n&&(t.effectTag|=4)}else{switch(f=9===n.nodeType?n:n.ownerDocument,e===bn&&(e=Ge(l)),e===bn?"script"===l?((e=f.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=f.createElement(l,{is:r.is}):(e=f.createElement(l),"select"===l&&(f=e,r.multiple?f.multiple=!0:r.size&&(f.size=r.size))):e=f.createElementNS(e,l),e[In]=t,e[Fn]=r,Qa(e,t),t.stateNode=e,f=yn(l,r),l){case"iframe":case"object":case"embed":on("load",e),p=r;break;case"video":case"audio":for(p=0;p<st.length;p++)on(st[p],e);p=r;break;case"source":on("error",e),p=r;break;case"img":case"image":case"link":on("error",e),on("load",e),p=r;break;case"form":on("reset",e),on("submit",e),p=r;break;case"details":on("toggle",e),p=r;break;case"input":Le(e,r),p=Pe(e,r),on("invalid",e),wn(n,"onChange");break;case"option":p=Ne(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},p=a({},r,{value:void 0}),on("invalid",e),wn(n,"onChange");break;case"textarea":He(e,r),p=ze(e,r),on("invalid",e),wn(n,"onChange");break;default:p=r}vn(l,p);var y=p;for(h in y)if(y.hasOwnProperty(h)){var w=y[h];"style"===h?gn(e,w):"dangerouslySetInnerHTML"===h?null!=(w=w?w.__html:void 0)&&Xe(e,w):"children"===h?"string"==typeof w?("textarea"!==l||""!==w)&&Je(e,w):"number"==typeof w&&Je(e,""+w):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(L.hasOwnProperty(h)?null!=w&&wn(n,h):null!=w&&le(e,h,w,f))}switch(l){case"input":Oe(e),Fe(e,r,!1);break;case"textarea":Oe(e),We(e);break;case"option":null!=r.value&&e.setAttribute("value",""+$e(r.value));break;case"select":e.multiple=!!r.multiple,null!=(n=r.value)?Be(e,!!r.multiple,n,!1):null!=r.defaultValue&&Be(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof p.onClick&&(e.onclick=_n)}$n(l,r)&&(t.effectTag|=4)}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)es(0,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(d(166));n=Uo(Ho.current),Uo(Bo.current),Na(t)?(n=t.stateNode,r=t.memoizedProps,n[In]=t,n.nodeValue!==r&&(t.effectTag|=4)):((n=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[In]=t,t.stateNode=n)}return null;case 13:return wi(Ko),r=t.memoizedState,0!=(64&t.effectTag)?(t.expirationTime=n,t):(n=null!==r,r=!1,null===e?void 0!==t.memoizedProps.fallback&&Na(t):(r=null!==(l=e.memoizedState),n||null===l||null!==(l=e.child.sibling)&&(null!==(h=t.firstEffect)?(t.firstEffect=l,l.nextEffect=h):(t.firstEffect=t.lastEffect=l,l.nextEffect=null),l.effectTag=8)),n&&!r&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&Ko.current)?Ns===Ms&&(Ns=Ps):(Ns!==Ms&&Ns!==Ps||(Ns=Ls),0!==Ws&&null!==Is&&(Vl(Is,js),ql(Is,Ws)))),(n||r)&&(t.effectTag|=4),null);case 4:return Vo(),null;case 10:return fo(t),null;case 17:return Ai(t.type)&&Ti(),null;case 19:if(wi(Ko),null===(r=t.memoizedState))return null;if(l=0!=(64&t.effectTag),null===(h=r.rendering)){if(l)ss(r,!1);else if(Ns!==Ms||null!==e&&0!=(64&e.effectTag))for(h=t.child;null!==h;){if(null!==(e=Yo(h))){for(t.effectTag|=64,ss(r,!1),null!==(l=e.updateQueue)&&(t.updateQueue=l,t.effectTag|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=t.child;null!==r;)h=n,(l=r).effectTag&=2,l.nextEffect=null,l.firstEffect=null,l.lastEffect=null,null===(e=l.alternate)?(l.childExpirationTime=0,l.expirationTime=h,l.child=null,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null):(l.childExpirationTime=e.childExpirationTime,l.expirationTime=e.expirationTime,l.child=e.child,l.memoizedProps=e.memoizedProps,l.memoizedState=e.memoizedState,l.updateQueue=e.updateQueue,h=e.dependencies,l.dependencies=null===h?null:{expirationTime:h.expirationTime,firstContext:h.firstContext,responders:h.responders}),r=r.sibling;return _i(Ko,1&Ko.current|2),t.child}h=h.sibling}}else{if(!l)if(null!==(e=Yo(h))){if(t.effectTag|=64,l=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.effectTag|=4),ss(r,!0),null===r.tail&&"hidden"===r.tailMode&&!h.alternate)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Ji()-r.renderingStartTime>r.tailExpiration&&1<n&&(t.effectTag|=64,l=!0,ss(r,!1),t.expirationTime=t.childExpirationTime=n-1);r.isBackwards?(h.sibling=t.child,t.child=h):(null!==(n=r.last)?n.sibling=h:t.child=h,r.last=h)}return null!==r.tail?(0===r.tailExpiration&&(r.tailExpiration=Ji()+500),n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Ji(),n.sibling=null,t=Ko.current,_i(Ko,l?1&t|2:1&t),n):null}throw Error(d(156,t.tag))}function cs(e){switch(e.tag){case 1:Ai(e.type)&&Ti();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(Vo(),wi(ki),wi(Si),0!=(64&(t=e.effectTag)))throw Error(d(285));return e.effectTag=-4097&t|64,e;case 5:return Go(e),null;case 13:return wi(Ko),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return wi(Ko),null;case 4:return Vo(),null;case 10:return fo(e),null;default:return null}}function us(e,t){return{value:e,source:t,stack:Te(t)}}Qa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Za=function(e,t,n,r,l){var d=e.memoizedProps;if(d!==r){var h,f,p=t.stateNode;switch(Uo(Bo.current),e=null,n){case"input":d=Pe(p,d),r=Pe(p,r),e=[];break;case"option":d=Ne(p,d),r=Ne(p,r),e=[];break;case"select":d=a({},d,{value:void 0}),r=a({},r,{value:void 0}),e=[];break;case"textarea":d=ze(p,d),r=ze(p,r),e=[];break;default:"function"!=typeof d.onClick&&"function"==typeof r.onClick&&(p.onclick=_n)}for(h in vn(n,r),n=null,d)if(!r.hasOwnProperty(h)&&d.hasOwnProperty(h)&&null!=d[h])if("style"===h)for(f in p=d[h])p.hasOwnProperty(f)&&(n||(n={}),n[f]="");else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(L.hasOwnProperty(h)?e||(e=[]):(e=e||[]).push(h,null));for(h in r){var y=r[h];if(p=null!=d?d[h]:void 0,r.hasOwnProperty(h)&&y!==p&&(null!=y||null!=p))if("style"===h)if(p){for(f in p)!p.hasOwnProperty(f)||y&&y.hasOwnProperty(f)||(n||(n={}),n[f]="");for(f in y)y.hasOwnProperty(f)&&p[f]!==y[f]&&(n||(n={}),n[f]=y[f])}else n||(e||(e=[]),e.push(h,n)),n=y;else"dangerouslySetInnerHTML"===h?(y=y?y.__html:void 0,p=p?p.__html:void 0,null!=y&&p!==y&&(e=e||[]).push(h,y)):"children"===h?p===y||"string"!=typeof y&&"number"!=typeof y||(e=e||[]).push(h,""+y):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(L.hasOwnProperty(h)?(null!=y&&wn(l,h),e||p===y||(e=[])):(e=e||[]).push(h,y))}n&&(e=e||[]).push("style",n),l=e,(t.updateQueue=l)&&(t.effectTag|=4)}},es=function(e,t,n,r){n!==r&&(t.effectTag|=4)};var ds="function"==typeof WeakSet?WeakSet:Set;function hs(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=Te(n)),null!==n&&Ae(n.type),t=t.value,null!==e&&1===e.tag&&Ae(e.type);try{console.error(t)}catch(e){setTimeout((function(){throw e}))}}function fs(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Rl(e,t)}else t.current=null}function ps(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:ao(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(d(163))}function gs(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.destroy;n.destroy=void 0,void 0!==r&&r()}n=n.next}while(n!==t)}}function ms(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function vs(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:return void ms(3,n);case 1:if(e=n.stateNode,4&n.effectTag)if(null===t)e.componentDidMount();else{var r=n.elementType===n.type?t.memoizedProps:ao(n.type,t.memoizedProps);e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate)}return void(null!==(t=n.updateQueue)&&ko(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}ko(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.effectTag&&$n(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&Gt(n)))));case 19:case 17:case 20:case 21:return}throw Error(d(163))}function ys(e,t,n){switch("function"==typeof Ll&&Ll(t),t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e.next;eo(97<n?97:n,(function(){var e=r;do{var n=e.destroy;if(void 0!==n){var a=t;try{n()}catch(e){Rl(a,e)}}e=e.next}while(e!==r)}))}break;case 1:fs(t),"function"==typeof(n=t.stateNode).componentWillUnmount&&function(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){Rl(e,t)}}(t,n);break;case 5:fs(t);break;case 4:Cs(e,t,n)}}function bs(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,e.stateNode=null,null!==t&&bs(t)}function ws(e){return 5===e.tag||3===e.tag||4===e.tag}function _s(e){e:{for(var t=e.return;null!==t;){if(ws(t)){var n=t;break e}t=t.return}throw Error(d(160))}switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(d(161))}16&n.effectTag&&(Je(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||ws(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}r?function e(t,n,r){var a=t.tag,l=5===a||6===a;if(l)t=l?t.stateNode:t.stateNode.instance,n?8===r.nodeType?r.parentNode.insertBefore(t,n):r.insertBefore(t,n):(8===r.nodeType?(n=r.parentNode).insertBefore(t,r):(n=r).appendChild(t),null!==(r=r._reactRootContainer)&&void 0!==r||null!==n.onclick||(n.onclick=_n));else if(4!==a&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,n,t):function e(t,n,r){var a=t.tag,l=5===a||6===a;if(l)t=l?t.stateNode:t.stateNode.instance,n?r.insertBefore(t,n):r.appendChild(t);else if(4!==a&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,n,t)}function Cs(e,t,n){for(var r,a,l=t,h=!1;;){if(!h){h=l.return;e:for(;;){if(null===h)throw Error(d(160));switch(r=h.stateNode,h.tag){case 5:a=!1;break e;case 3:case 4:r=r.containerInfo,a=!0;break e}h=h.return}h=!0}if(5===l.tag||6===l.tag){e:for(var f=e,p=l,y=n,w=p;;)if(ys(f,w,y),null!==w.child&&4!==w.tag)w.child.return=w,w=w.child;else{if(w===p)break e;for(;null===w.sibling;){if(null===w.return||w.return===p)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}a?(f=r,p=l.stateNode,8===f.nodeType?f.parentNode.removeChild(p):f.removeChild(p)):r.removeChild(l.stateNode)}else if(4===l.tag){if(null!==l.child){r=l.stateNode.containerInfo,a=!0,l.child.return=l,l=l.child;continue}}else if(ys(e,l,n),null!==l.child){l.child.return=l,l=l.child;continue}if(l===t)break;for(;null===l.sibling;){if(null===l.return||l.return===t)return;4===(l=l.return).tag&&(h=!1)}l.sibling.return=l.return,l=l.sibling}}function Ss(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void gs(3,t);case 1:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,a=null!==e?e.memoizedProps:r;e=t.type;var l=t.updateQueue;if(t.updateQueue=null,null!==l){for(n[Fn]=r,"input"===e&&"radio"===r.type&&null!=r.name&&De(n,r),yn(e,a),t=yn(e,r),a=0;a<l.length;a+=2){var h=l[a],f=l[a+1];"style"===h?gn(n,f):"dangerouslySetInnerHTML"===h?Xe(n,f):"children"===h?Je(n,f):le(n,h,f,t)}switch(e){case"input":Ie(n,r);break;case"textarea":Ue(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(e=r.value)?Be(n,!!r.multiple,e,!1):t!==!!r.multiple&&(null!=r.defaultValue?Be(n,!!r.multiple,r.defaultValue,!0):Be(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(d(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((t=t.stateNode).hydrate&&(t.hydrate=!1,Gt(t.containerInfo)));case 12:return;case 13:if(n=t,null===t.memoizedState?r=!1:(r=!0,n=t.child,qs=Ji()),null!==n)e:for(e=n;;){if(5===e.tag)l=e.stateNode,r?"function"==typeof(l=l.style).setProperty?l.setProperty("display","none","important"):l.display="none":(l=e.stateNode,a=null!=(a=e.memoizedProps.style)&&a.hasOwnProperty("display")?a.display:null,l.style.display=pn("display",a));else if(6===e.tag)e.stateNode.nodeValue=r?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(l=e.child.sibling).return=e,e=l;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===n)break;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}return void ks(t);case 19:return void ks(t);case 17:return}throw Error(d(163))}function ks(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ds),t.forEach((function(t){var r=Ml.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}var xs="function"==typeof WeakMap?WeakMap:Map;function Es(e,t,n){(n=wo(n,null)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ks||(Ks=!0,Ys=r),hs(e,t)},n}function As(e,t,n){(n=wo(n,null)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var a=t.value;n.payload=function(){return hs(e,t),r(a)}}var l=e.stateNode;return null!==l&&"function"==typeof l.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===Xs?Xs=new Set([this]):Xs.add(this),hs(e,t));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}var Ts,$s=Math.ceil,Rs=se.ReactCurrentDispatcher,Os=se.ReactCurrentOwner,Ms=0,Ps=3,Ls=4,Ds=0,Is=null,Fs=null,js=0,Ns=Ms,Bs=null,zs=1073741823,Hs=1073741823,Us=null,Ws=0,Vs=!1,qs=0,Gs=null,Ks=!1,Ys=null,Xs=null,Js=!1,Qs=null,Zs=90,el=null,tl=0,nl=null,rl=0;function il(){return 0!=(48&Ds)?1073741821-(Ji()/10|0):0!==rl?rl:rl=1073741821-(Ji()/10|0)}function ol(e,t,n){if(0==(2&(t=t.mode)))return 1073741823;var r=Qi();if(0==(4&t))return 99===r?1073741823:1073741822;if(0!=(16&Ds))return js;if(null!==n)e=oo(e,0|n.timeoutMs||5e3,250);else switch(r){case 99:e=1073741823;break;case 98:e=oo(e,150,100);break;case 97:case 96:e=oo(e,5e3,250);break;case 95:e=2;break;default:throw Error(d(326))}return null!==Is&&e===js&&--e,e}function al(e,t){if(50<tl)throw tl=0,nl=null,Error(d(185));if(null!==(e=sl(e,t))){var n=Qi();1073741823===t?0!=(8&Ds)&&0==(48&Ds)?dl(e):(cl(e),0===Ds&&ro()):cl(e),0==(4&Ds)||98!==n&&99!==n||(null===el?el=new Map([[e,t]]):(void 0===(n=el.get(e))||n>t)&&el.set(e,t))}}function sl(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,a=null;if(null===r&&3===e.tag)a=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){a=r.stateNode;break}r=r.return}return null!==a&&(Is===a&&(yl(t),Ns===Ls&&Vl(a,js)),ql(a,t)),a}function ll(e){var t=e.lastExpiredTime;if(0!==t)return t;if(!Wl(e,t=e.firstPendingTime))return t;var n=e.lastPingedTime;return 2>=(e=n>(e=e.nextKnownPendingLevel)?n:e)&&t!==e?0:e}function cl(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=no(dl.bind(null,e));else{var t=ll(e),n=e.callbackNode;if(0===t)null!==n&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var r=il();if(1073741823===t?r=99:1===t||2===t?r=95:r=0>=(r=10*(1073741821-t)-10*(1073741821-r))?99:250>=r?98:5250>=r?97:95,null!==n){var a=e.callbackPriority;if(e.callbackExpirationTime===t&&a>=r)return;n!==Wi&&Di(n)}e.callbackExpirationTime=t,e.callbackPriority=r,t=1073741823===t?no(dl.bind(null,e)):to(r,ul.bind(null,e),{timeout:10*(1073741821-t)-Ji()}),e.callbackNode=t}}}function ul(e,t){if(rl=0,t)return Gl(e,t=il()),cl(e),null;var n=ll(e);if(0!==n){if(t=e.callbackNode,0!=(48&Ds))throw Error(d(327));if(Al(),e===Is&&n===js||pl(e,n),null!==Fs){var r=Ds;Ds|=16;for(var a=ml();;)try{wl();break}catch(t){gl(e,t)}if(ho(),Ds=r,Rs.current=a,1===Ns)throw t=Bs,pl(e,n),Vl(e,n),cl(e),t;if(null===Fs)switch(a=e.finishedWork=e.current.alternate,e.finishedExpirationTime=n,r=Ns,Is=null,r){case Ms:case 1:throw Error(d(345));case 2:Gl(e,2<n?2:n);break;case Ps:if(Vl(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=Sl(a)),1073741823===zs&&10<(a=qs+500-Ji())){if(Vs){var l=e.lastPingedTime;if(0===l||l>=n){e.lastPingedTime=n,pl(e,n);break}}if(0!==(l=ll(e))&&l!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}e.timeoutHandle=On(kl.bind(null,e),a);break}kl(e);break;case Ls:if(Vl(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=Sl(a)),Vs&&(0===(a=e.lastPingedTime)||a>=n)){e.lastPingedTime=n,pl(e,n);break}if(0!==(a=ll(e))&&a!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}if(1073741823!==Hs?r=10*(1073741821-Hs)-Ji():1073741823===zs?r=0:(r=10*(1073741821-zs)-5e3,0>(r=(a=Ji())-r)&&(r=0),(n=10*(1073741821-n)-a)<(r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*$s(r/1960))-r)&&(r=n)),10<r){e.timeoutHandle=On(kl.bind(null,e),r);break}kl(e);break;case 5:if(1073741823!==zs&&null!==Us){l=zs;var h=Us;if(0>=(r=0|h.busyMinDurationMs)?r=0:(a=0|h.busyDelayMs,r=(l=Ji()-(10*(1073741821-l)-(0|h.timeoutMs||5e3)))<=a?0:a+r-l),10<r){Vl(e,n),e.timeoutHandle=On(kl.bind(null,e),r);break}}kl(e);break;default:throw Error(d(329))}if(cl(e),e.callbackNode===t)return ul.bind(null,e)}}return null}function dl(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,0!=(48&Ds))throw Error(d(327));if(Al(),e===Is&&t===js||pl(e,t),null!==Fs){var n=Ds;Ds|=16;for(var r=ml();;)try{bl();break}catch(t){gl(e,t)}if(ho(),Ds=n,Rs.current=r,1===Ns)throw n=Bs,pl(e,t),Vl(e,t),cl(e),n;if(null!==Fs)throw Error(d(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,Is=null,kl(e),cl(e)}return null}function hl(e,t){var n=Ds;Ds|=1;try{return e(t)}finally{0===(Ds=n)&&ro()}}function fl(e,t){var n=Ds;Ds&=-2,Ds|=8;try{return e(t)}finally{0===(Ds=n)&&ro()}}function pl(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Mn(n)),null!==Fs)for(n=Fs.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&Ti();break;case 3:Vo(),wi(ki),wi(Si);break;case 5:Go(r);break;case 4:Vo();break;case 13:case 19:wi(Ko);break;case 10:fo(r)}n=n.return}Is=e,Fs=jl(e.current,null),js=t,Ns=Ms,Bs=null,Hs=zs=1073741823,Us=null,Ws=0,Vs=!1}function gl(e,t){for(;;){try{if(ho(),Jo.current=Ta,ra)for(var n=ea.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}if(Zo=0,na=ta=ea=null,ra=!1,null===Fs||null===Fs.return)return Ns=1,Bs=t,Fs=null;e:{var a=e,l=Fs.return,d=Fs,h=t;if(t=js,d.effectTag|=2048,d.firstEffect=d.lastEffect=null,null!==h&&"object"==typeof h&&"function"==typeof h.then){var f=h;if(0==(2&d.mode)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.expirationTime=p.expirationTime):(d.updateQueue=null,d.memoizedState=null)}var y=0!=(1&Ko.current),w=l;do{var _;if(_=13===w.tag){var C=w.memoizedState;if(null!==C)_=null!==C.dehydrated;else{var S=w.memoizedProps;_=void 0!==S.fallback&&(!0!==S.unstable_avoidThisFallback||!y)}}if(_){var k=w.updateQueue;if(null===k){var x=new Set;x.add(f),w.updateQueue=x}else k.add(f);if(0==(2&w.mode)){if(w.effectTag|=64,d.effectTag&=-2981,1===d.tag)if(null===d.alternate)d.tag=17;else{var E=wo(1073741823,null);E.tag=2,_o(d,E)}d.expirationTime=1073741823;break e}h=void 0,d=t;var A=a.pingCache;if(null===A?(A=a.pingCache=new xs,h=new Set,A.set(f,h)):void 0===(h=A.get(f))&&(h=new Set,A.set(f,h)),!h.has(d)){h.add(d);var T=Ol.bind(null,a,f,d);f.then(T,T)}w.effectTag|=4096,w.expirationTime=t;break e}w=w.return}while(null!==w);h=Error((Ae(d.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+Te(d))}5!==Ns&&(Ns=2),h=us(h,d),w=l;do{switch(w.tag){case 3:f=h,w.effectTag|=4096,w.expirationTime=t,Co(w,Es(w,f,t));break e;case 1:f=h;var R=w.type,O=w.stateNode;if(0==(64&w.effectTag)&&("function"==typeof R.getDerivedStateFromError||null!==O&&"function"==typeof O.componentDidCatch&&(null===Xs||!Xs.has(O)))){w.effectTag|=4096,w.expirationTime=t,Co(w,As(w,f,t));break e}}w=w.return}while(null!==w)}Fs=Cl(Fs)}catch(e){t=e;continue}break}}function ml(){var e=Rs.current;return Rs.current=Ta,null===e?Ta:e}function vl(e,t){e<zs&&2<e&&(zs=e),null!==t&&e<Hs&&2<e&&(Hs=e,Us=t)}function yl(e){e>Ws&&(Ws=e)}function bl(){for(;null!==Fs;)Fs=_l(Fs)}function wl(){for(;null!==Fs&&!Vi();)Fs=_l(Fs)}function _l(e){var t=Ts(e.alternate,e,js);return e.memoizedProps=e.pendingProps,null===t&&(t=Cl(e)),Os.current=null,t}function Cl(e){Fs=e;do{var t=Fs.alternate;if(e=Fs.return,0==(2048&Fs.effectTag)){if(t=ls(t,Fs,js),1===js||1!==Fs.childExpirationTime){for(var n=0,r=Fs.child;null!==r;){var a=r.expirationTime,l=r.childExpirationTime;a>n&&(n=a),l>n&&(n=l),r=r.sibling}Fs.childExpirationTime=n}if(null!==t)return t;null!==e&&0==(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=Fs.firstEffect),null!==Fs.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=Fs.firstEffect),e.lastEffect=Fs.lastEffect),1<Fs.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=Fs:e.firstEffect=Fs,e.lastEffect=Fs))}else{if(null!==(t=cs(Fs)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=Fs.sibling))return t;Fs=e}while(null!==Fs);return Ns===Ms&&(Ns=5),null}function Sl(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function kl(e){var t=Qi();return eo(99,xl.bind(null,e,t)),null}function xl(e,t){do{Al()}while(null!==Qs);if(0!=(48&Ds))throw Error(d(327));var n=e.finishedWork,r=e.finishedExpirationTime;if(null===n)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,n===e.current)throw Error(d(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var a=Sl(n);if(e.firstPendingTime=a,r<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:r<=e.firstSuspendedTime&&(e.firstSuspendedTime=r-1),r<=e.lastPingedTime&&(e.lastPingedTime=0),r<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===Is&&(Fs=Is=null,js=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,a=n.firstEffect):a=n:a=n.firstEffect,null!==a){var l=Ds;Ds|=32,Os.current=null,An=rn;var h=xn();if(En(h)){if("selectionStart"in h)var f={start:h.selectionStart,end:h.selectionEnd};else e:{var p=(f=(f=h.ownerDocument)&&f.defaultView||window).getSelection&&f.getSelection();if(p&&0!==p.rangeCount){f=p.anchorNode;var y=p.anchorOffset,w=p.focusNode;p=p.focusOffset;try{f.nodeType,w.nodeType}catch(e){f=null;break e}var _=0,C=-1,S=-1,k=0,x=0,E=h,A=null;t:for(;;){for(var T;E!==f||0!==y&&3!==E.nodeType||(C=_+y),E!==w||0!==p&&3!==E.nodeType||(S=_+p),3===E.nodeType&&(_+=E.nodeValue.length),null!==(T=E.firstChild);)A=E,E=T;for(;;){if(E===h)break t;if(A===f&&++k===y&&(C=_),A===w&&++x===p&&(S=_),null!==(T=E.nextSibling))break;A=(E=A).parentNode}E=T}f=-1===C||-1===S?null:{start:C,end:S}}else f=null}f=f||{start:0,end:0}}else f=null;Tn={activeElementDetached:null,focusedElem:h,selectionRange:f},rn=!1,Gs=a;do{try{El()}catch(e){if(null===Gs)throw Error(d(330));Rl(Gs,e),Gs=Gs.nextEffect}}while(null!==Gs);Gs=a;do{try{for(h=e,f=t;null!==Gs;){var R=Gs.effectTag;if(16&R&&Je(Gs.stateNode,""),128&R){var O=Gs.alternate;if(null!==O){var M=O.ref;null!==M&&("function"==typeof M?M(null):M.current=null)}}switch(1038&R){case 2:_s(Gs),Gs.effectTag&=-3;break;case 6:_s(Gs),Gs.effectTag&=-3,Ss(Gs.alternate,Gs);break;case 1024:Gs.effectTag&=-1025;break;case 1028:Gs.effectTag&=-1025,Ss(Gs.alternate,Gs);break;case 4:Ss(Gs.alternate,Gs);break;case 8:Cs(h,y=Gs,f),bs(y)}Gs=Gs.nextEffect}}catch(e){if(null===Gs)throw Error(d(330));Rl(Gs,e),Gs=Gs.nextEffect}}while(null!==Gs);if(M=Tn,O=xn(),R=M.focusedElem,f=M.selectionRange,O!==R&&R&&R.ownerDocument&&function e(t,n){return!(!t||!n)&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(R.ownerDocument.documentElement,R)){null!==f&&En(R)&&(O=f.start,void 0===(M=f.end)&&(M=O),"selectionStart"in R?(R.selectionStart=O,R.selectionEnd=Math.min(M,R.value.length)):(M=(O=R.ownerDocument||document)&&O.defaultView||window).getSelection&&(M=M.getSelection(),y=R.textContent.length,h=Math.min(f.start,y),f=void 0===f.end?h:Math.min(f.end,y),!M.extend&&h>f&&(y=f,f=h,h=y),y=kn(R,h),w=kn(R,f),y&&w&&(1!==M.rangeCount||M.anchorNode!==y.node||M.anchorOffset!==y.offset||M.focusNode!==w.node||M.focusOffset!==w.offset)&&((O=O.createRange()).setStart(y.node,y.offset),M.removeAllRanges(),h>f?(M.addRange(O),M.extend(w.node,w.offset)):(O.setEnd(w.node,w.offset),M.addRange(O))))),O=[];for(M=R;M=M.parentNode;)1===M.nodeType&&O.push({element:M,left:M.scrollLeft,top:M.scrollTop});for("function"==typeof R.focus&&R.focus(),R=0;R<O.length;R++)(M=O[R]).element.scrollLeft=M.left,M.element.scrollTop=M.top}rn=!!An,Tn=An=null,e.current=n,Gs=a;do{try{for(R=e;null!==Gs;){var P=Gs.effectTag;if(36&P&&vs(R,Gs.alternate,Gs),128&P){O=void 0;var L=Gs.ref;if(null!==L){var D=Gs.stateNode;switch(Gs.tag){case 5:O=D;break;default:O=D}"function"==typeof L?L(O):L.current=O}}Gs=Gs.nextEffect}}catch(e){if(null===Gs)throw Error(d(330));Rl(Gs,e),Gs=Gs.nextEffect}}while(null!==Gs);Gs=null,qi(),Ds=l}else e.current=n;if(Js)Js=!1,Qs=e,Zs=t;else for(Gs=a;null!==Gs;)t=Gs.nextEffect,Gs.nextEffect=null,Gs=t;if(0===(t=e.firstPendingTime)&&(Xs=null),1073741823===t?e===nl?tl++:(tl=0,nl=e):tl=0,"function"==typeof Pl&&Pl(n.stateNode,r),cl(e),Ks)throw Ks=!1,e=Ys,Ys=null,e;return 0!=(8&Ds)||ro(),null}function El(){for(;null!==Gs;){var e=Gs.effectTag;0!=(256&e)&&ps(Gs.alternate,Gs),0==(512&e)||Js||(Js=!0,to(97,(function(){return Al(),null}))),Gs=Gs.nextEffect}}function Al(){if(90!==Zs){var e=97<Zs?97:Zs;return Zs=90,eo(e,Tl)}}function Tl(){if(null===Qs)return!1;var e=Qs;if(Qs=null,0!=(48&Ds))throw Error(d(331));var t=Ds;for(Ds|=32,e=e.current.firstEffect;null!==e;){try{var n=e;if(0!=(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:case 22:gs(5,n),ms(5,n)}}catch(t){if(null===e)throw Error(d(330));Rl(e,t)}n=e.nextEffect,e.nextEffect=null,e=n}return Ds=t,ro(),!0}function $l(e,t,n){_o(e,t=Es(e,t=us(n,t),1073741823)),null!==(e=sl(e,1073741823))&&cl(e)}function Rl(e,t){if(3===e.tag)$l(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){$l(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Xs||!Xs.has(r))){_o(n,e=As(n,e=us(t,e),1073741823)),null!==(n=sl(n,1073741823))&&cl(n);break}}n=n.return}}function Ol(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),Is===e&&js===n?Ns===Ls||Ns===Ps&&1073741823===zs&&Ji()-qs<500?pl(e,js):Vs=!0:Wl(e,n)&&(0!==(t=e.lastPingedTime)&&t<n||(e.lastPingedTime=n,cl(e)))}function Ml(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(t=ol(t=il(),e,null)),null!==(e=sl(e,t))&&cl(e)}Ts=function(e,t,n){var r=t.expirationTime;if(null!==e){var a=t.pendingProps;if(e.memoizedProps!==a||ki.current)Ha=!0;else{if(r<n){switch(Ha=!1,t.tag){case 3:Ja(t),Ba();break;case 5:if(qo(t),4&t.mode&&1!==n&&a.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:Ai(t.type)&&Oi(t);break;case 4:Wo(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value,a=t.type._context,_i(so,a._currentValue),a._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&r>=n?ns(e,t,n):(_i(Ko,1&Ko.current),null!==(t=as(e,t,n))?t.sibling:null);_i(Ko,1&Ko.current);break;case 19:if(r=t.childExpirationTime>=n,0!=(64&e.effectTag)){if(r)return os(e,t,n);t.effectTag|=64}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null),_i(Ko,Ko.current),!r)return null}return as(e,t,n)}Ha=!1}}else Ha=!1;switch(t.expirationTime=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,a=Ei(t,Si.current),go(t,n),a=aa(null,t,r,e,a,n),t.effectTag|=1,"object"==typeof a&&null!==a&&"function"==typeof a.render&&void 0===a.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ai(r)){var l=!0;Oi(t)}else l=!1;t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,yo(t);var h=r.getDerivedStateFromProps;"function"==typeof h&&Ao(t,r,h,e),a.updater=To,t.stateNode=a,a._reactInternalFiber=t,Mo(t,r,e,n),t=Xa(null,t,r,!0,l,n)}else t.tag=0,Ua(null,t,a,n),t=t.child;return t;case 16:e:{if(a=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}(a),1!==a._status)throw a._result;switch(a=a._result,t.type=a,l=t.tag=function(e){if("function"==typeof e)return Fl(e)?1:0;if(null!=e){if((e=e.$$typeof)===be)return 11;if(e===Ce)return 14}return 2}(a),e=ao(a,e),l){case 0:t=Ka(null,t,a,e,n);break e;case 1:t=Ya(null,t,a,e,n);break e;case 11:t=Wa(null,t,a,e,n);break e;case 14:t=Va(null,t,a,ao(a.type,e),r,n);break e}throw Error(d(306,a,""))}return t;case 0:return r=t.type,a=t.pendingProps,Ka(e,t,r,a=t.elementType===r?a:ao(r,a),n);case 1:return r=t.type,a=t.pendingProps,Ya(e,t,r,a=t.elementType===r?a:ao(r,a),n);case 3:if(Ja(t),r=t.updateQueue,null===e||null===r)throw Error(d(282));if(r=t.pendingProps,a=null!==(a=t.memoizedState)?a.element:null,bo(e,t),So(t,r,null,n),(r=t.memoizedState.element)===a)Ba(),t=as(e,t,n);else{if((a=t.stateNode.hydrate)&&(Pa=Pn(t.stateNode.containerInfo.firstChild),Ma=t,a=La=!0),a)for(n=jo(t,null,r,n),t.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else Ua(e,t,r,n),Ba();t=t.child}return t;case 5:return qo(t),null===e&&Fa(t),r=t.type,a=t.pendingProps,l=null!==e?e.memoizedProps:null,h=a.children,Rn(r,a)?h=null:null!==l&&Rn(r,l)&&(t.effectTag|=16),Ga(e,t),4&t.mode&&1!==n&&a.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(Ua(e,t,h,n),t=t.child),t;case 6:return null===e&&Fa(t),null;case 13:return ns(e,t,n);case 4:return Wo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Fo(t,null,r,n):Ua(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,Wa(e,t,r,a=t.elementType===r?a:ao(r,a),n);case 7:return Ua(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ua(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,a=t.pendingProps,h=t.memoizedProps,l=a.value;var f=t.type._context;if(_i(so,f._currentValue),f._currentValue=l,null!==h)if(f=h.value,0===(l=Yr(f,l)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(f,l):1073741823))){if(h.children===a.children&&!ki.current){t=as(e,t,n);break e}}else for(null!==(f=t.child)&&(f.return=t);null!==f;){var p=f.dependencies;if(null!==p){h=f.child;for(var y=p.firstContext;null!==y;){if(y.context===r&&0!=(y.observedBits&l)){1===f.tag&&((y=wo(n,null)).tag=2,_o(f,y)),f.expirationTime<n&&(f.expirationTime=n),null!==(y=f.alternate)&&y.expirationTime<n&&(y.expirationTime=n),po(f.return,n),p.expirationTime<n&&(p.expirationTime=n);break}y=y.next}}else h=10===f.tag&&f.type===t.type?null:f.child;if(null!==h)h.return=f;else for(h=f;null!==h;){if(h===t){h=null;break}if(null!==(f=h.sibling)){f.return=h.return,h=f;break}h=h.return}f=h}Ua(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=(l=t.pendingProps).children,go(t,n),r=r(a=mo(a,l.unstable_observedBits)),t.effectTag|=1,Ua(e,t,r,n),t.child;case 14:return l=ao(a=t.type,t.pendingProps),Va(e,t,a,l=ao(a.type,l),r,n);case 15:return qa(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:ao(r,a),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,Ai(r)?(e=!0,Oi(t)):e=!1,go(t,n),Ro(t,r,a),Mo(t,r,a,n),Xa(null,t,r,!0,e,n);case 19:return os(e,t,n)}throw Error(d(156,t.tag))};var Pl=null,Ll=null;function Dl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Il(e,t,n,r){return new Dl(e,t,n,r)}function Fl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function jl(e,t){var n=e.alternate;return null===n?((n=Il(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Nl(e,t,n,r,a,l){var h=2;if(r=e,"function"==typeof e)Fl(e)&&(h=1);else if("string"==typeof e)h=5;else e:switch(e){case fe:return Bl(n.children,a,l,t);case ye:h=8,a|=7;break;case pe:h=8,a|=1;break;case ge:return(e=Il(12,n,t,8|a)).elementType=ge,e.type=ge,e.expirationTime=l,e;case we:return(e=Il(13,n,t,a)).type=we,e.elementType=we,e.expirationTime=l,e;case _e:return(e=Il(19,n,t,a)).elementType=_e,e.expirationTime=l,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case me:h=10;break e;case ve:h=9;break e;case be:h=11;break e;case Ce:h=14;break e;case Se:h=16,r=null;break e;case ke:h=22;break e}throw Error(d(130,null==e?e:typeof e,""))}return(t=Il(h,n,t,a)).elementType=e,t.type=r,t.expirationTime=l,t}function Bl(e,t,n,r){return(e=Il(7,e,r,t)).expirationTime=n,e}function zl(e,t,n){return(e=Il(6,e,null,t)).expirationTime=n,e}function Hl(e,t,n){return(t=Il(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ul(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Wl(e,t){var n=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==n&&n>=t&&e<=t}function Vl(e,t){var n=e.firstSuspendedTime,r=e.lastSuspendedTime;n<t&&(e.firstSuspendedTime=t),(r>t||0===n)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function ql(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var n=e.firstSuspendedTime;0!==n&&(t>=n?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function Gl(e,t){var n=e.lastExpiredTime;(0===n||n>t)&&(e.lastExpiredTime=t)}function Kl(e,t,n,r){var a=t.current,l=il(),h=xo.suspense;l=ol(l,a,h);e:if(n){t:{if(ut(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(d(170));var f=n;do{switch(f.tag){case 3:f=f.stateNode.context;break t;case 1:if(Ai(f.type)){f=f.stateNode.__reactInternalMemoizedMergedChildContext;break t}}f=f.return}while(null!==f);throw Error(d(171))}if(1===n.tag){var p=n.type;if(Ai(p)){n=Ri(n,p,f);break e}}n=f}else n=Ci;return null===t.context?t.context=n:t.pendingContext=n,(t=wo(l,h)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),_o(a,t),al(a,l),l}function Yl(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Xl(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function Jl(e,t){Xl(e,t),(e=e.alternate)&&Xl(e,t)}function Ql(e,t,n){var r=new Ul(e,t,n=null!=n&&!0===n.hydrate),a=Il(3,null,null,2===t?7:1===t?3:0);r.current=a,a.stateNode=r,yo(a),e[jn]=r.current,n&&0!==t&&function(e,t){var n=ct(t);Ft.forEach((function(e){xt(e,t,n)})),jt.forEach((function(e){xt(e,t,n)}))}(0,9===e.nodeType?e:e.ownerDocument),this._internalRoot=r}function Zl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ec(e,t,n,r,a){var l=n._reactRootContainer;if(l){var d=l._internalRoot;if("function"==typeof a){var h=a;a=function(){var e=Yl(d);h.call(e)}}Kl(t,d,e,a)}else{if(l=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Ql(e,0,t?{hydrate:!0}:void 0)}(n,r),d=l._internalRoot,"function"==typeof a){var f=a;a=function(){var e=Yl(d);f.call(e)}}fl((function(){Kl(t,d,e,a)}))}return Yl(d)}function tc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:he,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function nc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Zl(t))throw Error(d(200));return tc(e,t,null,n)}Ql.prototype.render=function(e){Kl(e,this._internalRoot,null,null)},Ql.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Kl(null,e,null,(function(){t[jn]=null}))},Et=function(e){if(13===e.tag){var t=oo(il(),150,100);al(e,t),Jl(e,t)}},At=function(e){13===e.tag&&(al(e,3),Jl(e,3))},Tt=function(e){if(13===e.tag){var t=il();al(e,t=ol(t,e,null)),Jl(e,t)}},j=function(e,t,n){switch(t){case"input":if(Ie(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=Hn(r);if(!a)throw Error(d(90));Me(r),Ie(r,a)}}}break;case"textarea":Ue(e,n);break;case"select":null!=(t=n.value)&&Be(e,!!n.multiple,t,!1)}},W=hl,V=function(e,t,n,r,a){var l=Ds;Ds|=4;try{return eo(98,e.bind(null,t,n,r,a))}finally{0===(Ds=l)&&ro()}},q=function(){0==(49&Ds)&&(function(){if(null!==el){var e=el;el=null,e.forEach((function(e,t){Gl(t,e),cl(t)})),ro()}}(),Al())},G=function(e,t){var n=Ds;Ds|=2;try{return e(t)}finally{0===(Ds=n)&&ro()}};var rc,ic,oc={Events:[Bn,zn,Hn,I,P,Yn,function(e){gt(e,Kn)},H,U,cn,yt,Al,{current:!1}]};ic=(rc={findFiberByHostInstance:Nn,bundleType:0,version:"16.13.1",rendererPackageName:"react-dom"}).findFiberByHostInstance,function(e){if(void 0==={isDisabled:!0})return!1;var t={isDisabled:!0};if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);Pl=function(e){try{t.onCommitFiberRoot(n,e,void 0,64==(64&e.current.effectTag))}catch(e){}},Ll=function(e){try{t.onCommitFiberUnmount(n,e)}catch(e){}}}catch(e){}}(a({},rc,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:se.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=ft(e))?null:e.stateNode},findFiberByHostInstance:function(e){return ic?ic(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null})),t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oc,t.createPortal=nc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(void 0===t){if("function"==typeof e.render)throw Error(d(188));throw Error(d(268,Object.keys(e)))}return e=null===(e=ft(t))?null:e.stateNode},t.flushSync=function(e,t){if(0!=(48&Ds))throw Error(d(187));var n=Ds;Ds|=1;try{return eo(99,e.bind(null,t))}finally{Ds=n,ro()}},t.hydrate=function(e,t,n){if(!Zl(t))throw Error(d(200));return ec(null,e,t,!0,n)},t.render=function(e,t,n){if(!Zl(t))throw Error(d(200));return ec(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Zl(e))throw Error(d(40));return!!e._reactRootContainer&&(fl((function(){ec(null,null,e,!1,(function(){e._reactRootContainer=null,e[jn]=null}))})),!0)},t.unstable_batchedUpdates=hl,t.unstable_createPortal=function(e,t){return nc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Zl(n))throw Error(d(200));if(null==e||void 0===e._reactInternalFiber)throw Error(d(38));return ec(e,t,n,!1,r)},t.version="16.13.1"},function(e,t,n){"use strict";e.exports=n(604)},function(e,t,n){"use strict";var r,a,l,d,h;if("undefined"==typeof window||"function"!=typeof MessageChannel){var f=null,p=null,y=function(){if(null!==f)try{var e=t.unstable_now();f(!0,e),f=null}catch(e){throw setTimeout(y,0),e}},w=Date.now();t.unstable_now=function(){return Date.now()-w},r=function(e){null!==f?setTimeout(r,0,e):(f=e,setTimeout(y,0))},a=function(e,t){p=setTimeout(e,t)},l=function(){clearTimeout(p)},d=function(){return!1},h=t.unstable_forceFrameRate=function(){}}else{var _=window.performance,C=window.Date,S=window.setTimeout,k=window.clearTimeout;if("undefined"!=typeof console){var x=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof x&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"==typeof _&&"function"==typeof _.now)t.unstable_now=function(){return _.now()};else{var E=C.now();t.unstable_now=function(){return C.now()-E}}var A=!1,T=null,R=-1,O=5,M=0;d=function(){return t.unstable_now()>=M},h=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):O=0<e?Math.floor(1e3/e):5};var P=new MessageChannel,L=P.port2;P.port1.onmessage=function(){if(null!==T){var e=t.unstable_now();M=e+O;try{T(!0,e)?L.postMessage(null):(A=!1,T=null)}catch(e){throw L.postMessage(null),e}}else A=!1},r=function(e){T=e,A||(A=!0,L.postMessage(null))},a=function(e,n){R=S((function(){e(t.unstable_now())}),n)},l=function(){k(R),R=-1}}function D(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,a=e[r];if(!(void 0!==a&&0<j(a,t)))break e;e[r]=t,e[n]=a,n=r}}function I(e){return void 0===(e=e[0])?null:e}function F(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length;r<a;){var l=2*(r+1)-1,d=e[l],h=l+1,f=e[h];if(void 0!==d&&0>j(d,n))void 0!==f&&0>j(f,d)?(e[r]=f,e[h]=n,r=h):(e[r]=d,e[l]=n,r=l);else{if(!(void 0!==f&&0>j(f,n)))break e;e[r]=f,e[h]=n,r=h}}}return t}return null}function j(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var N=[],B=[],z=1,H=null,U=3,W=!1,V=!1,q=!1;function G(e){for(var t=I(B);null!==t;){if(null===t.callback)F(B);else{if(!(t.startTime<=e))break;F(B),t.sortIndex=t.expirationTime,D(N,t)}t=I(B)}}function K(e){if(q=!1,G(e),!V)if(null!==I(N))V=!0,r(Y);else{var t=I(B);null!==t&&a(K,t.startTime-e)}}function Y(e,n){V=!1,q&&(q=!1,l()),W=!0;var r=U;try{for(G(n),H=I(N);null!==H&&(!(H.expirationTime>n)||e&&!d());){var h=H.callback;if(null!==h){H.callback=null,U=H.priorityLevel;var f=h(H.expirationTime<=n);n=t.unstable_now(),"function"==typeof f?H.callback=f:H===I(N)&&F(N),G(n)}else F(N);H=I(N)}if(null!==H)var p=!0;else{var y=I(B);null!==y&&a(K,y.startTime-n),p=!1}return p}finally{H=null,U=r,W=!1}}function X(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var J=h;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){V||W||(V=!0,r(Y))},t.unstable_getCurrentPriorityLevel=function(){return U},t.unstable_getFirstCallbackNode=function(){return I(N)},t.unstable_next=function(e){switch(U){case 1:case 2:case 3:var t=3;break;default:t=U}var n=U;U=t;try{return e()}finally{U=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=J,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=U;U=e;try{return t()}finally{U=n}},t.unstable_scheduleCallback=function(e,n,d){var h=t.unstable_now();if("object"==typeof d&&null!==d){var f=d.delay;f="number"==typeof f&&0<f?h+f:h,d="number"==typeof d.timeout?d.timeout:X(e)}else d=X(e),f=h;return e={id:z++,callback:n,priorityLevel:e,startTime:f,expirationTime:d=f+d,sortIndex:-1},f>h?(e.sortIndex=f,D(B,e),null===I(N)&&e===I(B)&&(q?l():q=!0,a(K,f-h))):(e.sortIndex=d,D(N,e),V||W||(V=!0,r(Y))),e},t.unstable_shouldYield=function(){var e=t.unstable_now();G(e);var n=I(N);return n!==H&&null!==H&&null!==n&&null!==n.callback&&n.startTime<=e&&n.expirationTime<H.expirationTime||d()},t.unstable_wrapCallback=function(e){var t=U;return function(){var n=U;U=t;try{return e.apply(this,arguments)}finally{U=n}}}},function(e,t,n){"use strict";var r=n(606);function a(){}function l(){}l.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,l,d){if(d!==r){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:l,resetWarningCache:a};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";var r=n(120),a=n(182),l=n(181),d=n(618),h=[].join,f=a!=Object,p=d("join",",");r({target:"Array",proto:!0,forced:f||!p},{join:function(e){return h.call(l(this),void 0===e?",":e)}})},function(e,t,n){var r=n(70),a=n(143),l=r.document,d=a(l)&&a(l.createElement);e.exports=function(e){return d?l.createElement(e):{}}},function(e,t,n){var r,a,l,d=n(610),h=n(70),f=n(143),p=n(144),y=n(91),w=n(261),_=n(368),C=n(371),S=h.WeakMap;if(d){var k=w.state||(w.state=new S),x=k.get,E=k.has,A=k.set;r=function(e,t){return t.facade=e,A.call(k,e,t),t},a=function(e){return x.call(k,e)||{}},l=function(e){return E.call(k,e)}}else{var T=_("state");C[T]=!0,r=function(e,t){return t.facade=e,p(e,T,t),t},a=function(e){return y(e,T)?e[T]:{}},l=function(e){return y(e,T)}}e.exports={set:r,get:a,has:l,enforce:function(e){return l(e)?a(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!f(t)||(n=a(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}}},function(e,t,n){var r=n(70),a=n(367),l=r.WeakMap;e.exports="function"==typeof l&&/native code/.test(a(l))},function(e,t){e.exports=!1},function(e,t,n){var r=n(91),a=n(613),l=n(363),d=n(184);e.exports=function(e,t){for(var n=a(t),h=d.f,f=l.f,p=0;p<n.length;p++){var y=n[p];r(e,y)||h(e,y,f(t,y))}}},function(e,t,n){var r=n(372),a=n(615),l=n(376),d=n(185);e.exports=r("Reflect","ownKeys")||function(e){var t=a.f(d(e)),n=l.f;return n?t.concat(n(e)):t}},function(e,t,n){var r=n(70);e.exports=r},function(e,t,n){var r=n(373),a=n(375).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,a)}},function(e,t,n){var r=n(181),a=n(186),l=n(374),d=function(e){return function(t,n,d){var h,f=r(t),p=a(f.length),y=l(d,p);if(e&&n!=n){for(;p>y;)if((h=f[y++])!=h)return!0}else for(;p>y;y++)if((e||y in f)&&f[y]===n)return e||y||0;return!e&&-1}};e.exports={includes:d(!0),indexOf:d(!1)}},function(e,t,n){var r=n(62),a=/#|\.prototype\./,l=function(e,t){var n=h[d(e)];return n==p||n!=f&&("function"==typeof t?r(t):!!t)},d=l.normalize=function(e){return String(e).replace(a,".").toLowerCase()},h=l.data={},f=l.NATIVE="N",p=l.POLYFILL="P";e.exports=l},function(e,t,n){"use strict";var r=n(62);e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){throw 1},1)}))}},function(e,t,n){"use strict";var r=n(120),a=n(620).map,l=n(379),d=n(380),h=l("map"),f=d("map");r({target:"Array",proto:!0,forced:!h||!f},{map:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){var r=n(621),a=n(182),l=n(121),d=n(186),h=n(377),f=[].push,p=function(e){var t=1==e,n=2==e,p=3==e,y=4==e,w=6==e,_=7==e,C=5==e||w;return function(S,k,x,E){for(var A,T,R=l(S),O=a(R),M=r(k,x,3),P=d(O.length),L=0,D=E||h,I=t?D(S,P):n||_?D(S,0):void 0;P>L;L++)if((C||L in O)&&(T=M(A=O[L],L,R),e))if(t)I[L]=T;else if(T)switch(e){case 3:return!0;case 5:return A;case 6:return L;case 2:f.call(I,A)}else switch(e){case 4:return!1;case 7:f.call(I,A)}return w?-1:p||y?y:I}};e.exports={forEach:p(0),map:p(1),filter:p(2),some:p(3),every:p(4),find:p(5),findIndex:p(6),filterOut:p(7)}},function(e,t,n){var r=n(622);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,a){return e.call(t,n,r,a)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},function(e,t,n){var r=n(258);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(378);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(e,t,n){var r,a,l=n(70),d=n(626),h=l.process,f=h&&h.versions,p=f&&f.v8;p?a=(r=p.split("."))[0]+r[1]:d&&(!(r=d.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=d.match(/Chrome\/(\d+)/))&&(a=r[1]),e.exports=a&&+a},function(e,t,n){var r=n(372);e.exports=r("navigator","userAgent")||""},function(e,t,n){"use strict";var r=n(120),a=n(374),l=n(145),d=n(186),h=n(121),f=n(377),p=n(628),y=n(379),w=n(380),_=y("splice"),C=w("splice",{ACCESSORS:!0,0:0,1:2}),S=Math.max,k=Math.min;r({target:"Array",proto:!0,forced:!_||!C},{splice:function(e,t){var n,r,y,w,_,C,x=h(this),E=d(x.length),A=a(e,E),T=arguments.length;if(0===T?n=r=0:1===T?(n=0,r=E-A):(n=T-2,r=k(S(l(t),0),E-A)),E+n-r>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(y=f(x,r),w=0;w<r;w++)(_=A+w)in x&&p(y,w,x[_]);if(y.length=r,n<r){for(w=A;w<E-r;w++)C=w+n,(_=w+r)in x?x[C]=x[_]:delete x[C];for(w=E;w>E-r+n;w--)delete x[w-1]}else if(n>r)for(w=E-r;w>A;w--)C=w+n-1,(_=w+r-1)in x?x[C]=x[_]:delete x[C];for(w=0;w<n;w++)x[w+A]=arguments[w+2];return x.length=E-r+n,y}})},function(e,t,n){"use strict";var r=n(259),a=n(184),l=n(257);e.exports=function(e,t,n){var d=r(t);d in e?a.f(e,d,l(0,n)):e[d]=n}},function(e,t,n){var r=n(103),a=n(184).f,l=Function.prototype,d=l.toString,h=/^\s*function ([^ (]*)/;r&&!("name"in l)&&a(l,"name",{configurable:!0,get:function(){try{return d.call(this).match(h)[1]}catch(e){return""}}})},function(e,t,n){var r=n(120),a=n(631);r({target:"Object",stat:!0,forced:Object.assign!==a},{assign:a})},function(e,t,n){"use strict";var r=n(103),a=n(62),l=n(632),d=n(376),h=n(364),f=n(121),p=n(182),y=Object.assign,w=Object.defineProperty;e.exports=!y||a((function(){if(r&&1!==y({b:1},y(w({},"a",{enumerable:!0,get:function(){w(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol();return e[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(e){t[e]=e})),7!=y({},e)[n]||"abcdefghijklmnopqrst"!=l(y({},t)).join("")}))?function(e,t){for(var n=f(e),a=arguments.length,y=1,w=d.f,_=h.f;a>y;)for(var C,S=p(arguments[y++]),k=w?l(S).concat(w(S)):l(S),x=k.length,E=0;x>E;)C=k[E++],r&&!_.call(S,C)||(n[C]=S[C]);return n}:y},function(e,t,n){var r=n(373),a=n(375);e.exports=Object.keys||function(e){return r(e,a)}},function(e,t,n){var r=n(120),a=n(62),l=n(121),d=n(634),h=n(381);r({target:"Object",stat:!0,forced:a((function(){d(1)})),sham:!h},{getPrototypeOf:function(e){return d(l(e))}})},function(e,t,n){var r=n(91),a=n(121),l=n(368),d=n(381),h=l("IE_PROTO"),f=Object.prototype;e.exports=d?Object.getPrototypeOf:function(e){return e=a(e),r(e,h)?e[h]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?f:null}},function(e,t,n){"use strict";var r=n(185);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){"use strict";var r=n(62);function a(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=r((function(){var e=a("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=r((function(){var e=a("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},function(e,t,n){"use strict";var r=n(638),a=n(185),l=n(186),d=n(145),h=n(183),f=n(639),p=n(641),y=n(642),w=Math.max,_=Math.min;r("replace",2,(function(e,t,n,r){var C=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,S=r.REPLACE_KEEPS_$0,k=C?"$":"$0";return[function(n,r){var a=h(this),l=null==n?void 0:n[e];return void 0!==l?l.call(n,a,r):t.call(String(a),n,r)},function(e,r){if(!C&&S||"string"==typeof r&&-1===r.indexOf(k)){var h=n(t,e,this,r);if(h.done)return h.value}var x=a(e),E=String(this),A="function"==typeof r;A||(r=String(r));var T=x.global;if(T){var R=x.unicode;x.lastIndex=0}for(var O=[];;){var M=y(x,E);if(null===M)break;if(O.push(M),!T)break;""===String(M[0])&&(x.lastIndex=f(E,l(x.lastIndex),R))}for(var P,L="",D=0,I=0;I<O.length;I++){M=O[I];for(var F=String(M[0]),j=w(_(d(M.index),E.length),0),N=[],B=1;B<M.length;B++)N.push(void 0===(P=M[B])?P:String(P));var z=M.groups;if(A){var H=[F].concat(N,j,E);void 0!==z&&H.push(z);var U=String(r.apply(void 0,H))}else U=p(F,E,j,N,z,r);j>=D&&(L+=E.slice(D,j)+U,D=j+F.length)}return L+E.slice(D)}]}))},function(e,t,n){"use strict";n(382);var r=n(366),a=n(62),l=n(262),d=n(263),h=n(144),f=l("species"),p=!a((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),y="$0"==="a".replace(/./,"$0"),w=l("replace"),_=!!/./[w]&&""===/./[w]("a","$0"),C=!a((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));e.exports=function(e,t,n,w){var S=l(e),k=!a((function(){var t={};return t[S]=function(){return 7},7!=""[e](t)})),x=k&&!a((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[f]=function(){return n},n.flags="",n[S]=/./[S]),n.exec=function(){return t=!0,null},n[S](""),!t}));if(!k||!x||"replace"===e&&(!p||!y||_)||"split"===e&&!C){var E=/./[S],A=n(S,""[e],(function(e,t,n,r,a){return t.exec===d?k&&!a?{done:!0,value:E.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:y,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:_}),T=A[0],R=A[1];r(String.prototype,e,T),r(RegExp.prototype,S,2==t?function(e,t){return R.call(e,this,t)}:function(e){return R.call(e,this)})}w&&h(RegExp.prototype[S],"sham",!0)}},function(e,t,n){"use strict";var r=n(640).charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},function(e,t,n){var r=n(145),a=n(183),l=function(e){return function(t,n){var l,d,h=String(a(t)),f=r(n),p=h.length;return f<0||f>=p?e?"":void 0:(l=h.charCodeAt(f))<55296||l>56319||f+1===p||(d=h.charCodeAt(f+1))<56320||d>57343?e?h.charAt(f):l:e?h.slice(f,f+2):d-56320+(l-55296<<10)+65536}};e.exports={codeAt:l(!1),charAt:l(!0)}},function(e,t,n){var r=n(121),a=Math.floor,l="".replace,d=/\$([$&'`]|\d\d?|<[^>]*>)/g,h=/\$([$&'`]|\d\d?)/g;e.exports=function(e,t,n,f,p,y){var w=n+e.length,_=f.length,C=h;return void 0!==p&&(p=r(p),C=d),l.call(y,C,(function(r,l){var d;switch(l.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(w);case"<":d=p[l.slice(1,-1)];break;default:var h=+l;if(0===h)return r;if(h>_){var y=a(h/10);return 0===y?r:y<=_?void 0===f[y-1]?l.charAt(1):f[y-1]+l.charAt(1):r}d=f[h-1]}return void 0===d?"":d}))}},function(e,t,n){var r=n(258),a=n(263);e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var l=n.call(e,t);if("object"!=typeof l)throw TypeError("RegExp exec method returned something other than an Object or null");return l}if("RegExp"!==r(e))throw TypeError("RegExp#exec called on incompatible receiver");return a.call(e,t)}},function(e,t,n){var r=n(28);e.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){var n=[],r=!0,a=!1,l=void 0;try{for(var d,h=e[Symbol.iterator]();!(r=(d=h.next()).done)&&(n.push(d.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==h.return||h.return()}finally{if(a)throw l}}return n}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(e,t,n){"use strict";var r,a=n(18),l=n(111).f,d=n(47),h=n(229),f=n(65),p=n(230),y=n(81),w="".endsWith,_=Math.min,C=p("endsWith");a({target:"String",proto:!0,forced:!!(y||C||(r=l(String.prototype,"endsWith"),!r||r.writable))&&!C},{endsWith:function(e){var t=String(f(this));h(e);var n=arguments.length>1?arguments[1]:void 0,r=d(t.length),a=void 0===n?r:_(d(n),r),l=String(e);return w?w.call(t,l,a):t.slice(a-l.length,a)===l}})},function(e,t,n){n(649),e.exports=n(72).Object.assign},function(e,t,n){var r=n(92);r(r.S+r.F,"Object",{assign:n(653)})},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){e.exports=!n(122)&&!n(190)((function(){return 7!=Object.defineProperty(n(390)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(265);e.exports=function(e,t){if(!r(e))return e;var n,a;if(t&&"function"==typeof(n=e.toString)&&!r(a=n.call(e)))return a;if("function"==typeof(n=e.valueOf)&&!r(a=n.call(e)))return a;if(!t&&"function"==typeof(n=e.toString)&&!r(a=n.call(e)))return a;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){"use strict";var r=n(122),a=n(192),l=n(657),d=n(397),h=n(193),f=n(391),p=Object.assign;e.exports=!p||n(190)((function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=p({},e)[n]||Object.keys(p({},t)).join("")!=r}))?function(e,t){for(var n=h(e),p=arguments.length,y=1,w=l.f,_=d.f;p>y;)for(var C,S=f(arguments[y++]),k=w?a(S).concat(w(S)):a(S),x=k.length,E=0;x>E;)C=k[E++],r&&!_.call(S,C)||(n[C]=S[C]);return n}:p},function(e,t,n){var r=n(191),a=n(267),l=n(655)(!1),d=n(271)("IE_PROTO");e.exports=function(e,t){var n,h=a(e),f=0,p=[];for(n in h)n!=d&&r(h,n)&&p.push(n);for(;t.length>f;)r(h,n=t[f++])&&(~l(p,n)||p.push(n));return p}},function(e,t,n){var r=n(267),a=n(392),l=n(656);e.exports=function(e){return function(t,n,d){var h,f=r(t),p=a(f.length),y=l(d,p);if(e&&n!=n){for(;p>y;)if((h=f[y++])!=h)return!0}else for(;p>y;y++)if((e||y in f)&&f[y]===n)return e||y||0;return!e&&-1}}},function(e,t,n){var r=n(270),a=Math.max,l=Math.min;e.exports=function(e,t){return(e=r(e))<0?a(e+t,0):l(e,t)}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){n(659),e.exports=n(72).Object.keys},function(e,t,n){var r=n(193),a=n(192);n(660)("keys",(function(){return function(e){return a(r(e))}}))},function(e,t,n){var r=n(92),a=n(72),l=n(190);e.exports=function(e,t){var n=(a.Object||{})[e]||Object[e],d={};d[e]=t(n),r(r.S+r.F*l((function(){n(1)})),"Object",d)}},function(e,t,n){n(662);var r=n(72).Object;e.exports=function(e,t){return r.create(e,t)}},function(e,t,n){var r=n(92);r(r.S,"Object",{create:n(398)})},function(e,t,n){var r=n(188),a=n(189),l=n(192);e.exports=n(122)?Object.defineProperties:function(e,t){a(e);for(var n,d=l(t),h=d.length,f=0;h>f;)r.f(e,n=d[f++],t[n]);return e}},function(e,t,n){var r=n(146).document;e.exports=r&&r.documentElement},function(e,t,n){n(666),e.exports=n(72).Object.entries},function(e,t,n){var r=n(92),a=n(399)(!0);r(r.S,"Object",{entries:function(e){return a(e)}})},function(e,t,n){"use strict";e.exports=n(668)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&Symbol.for,a=r?Symbol.for("react.element"):60103,l=r?Symbol.for("react.portal"):60106,d=r?Symbol.for("react.fragment"):60107,h=r?Symbol.for("react.strict_mode"):60108,f=r?Symbol.for("react.profiler"):60114,p=r?Symbol.for("react.provider"):60109,y=r?Symbol.for("react.context"):60110,w=r?Symbol.for("react.async_mode"):60111,_=r?Symbol.for("react.concurrent_mode"):60111,C=r?Symbol.for("react.forward_ref"):60112,S=r?Symbol.for("react.suspense"):60113,k=r?Symbol.for("react.suspense_list"):60120,x=r?Symbol.for("react.memo"):60115,E=r?Symbol.for("react.lazy"):60116,A=r?Symbol.for("react.fundamental"):60117,T=r?Symbol.for("react.responder"):60118;function R(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case a:switch(e=e.type){case w:case _:case d:case f:case h:case S:return e;default:switch(e=e&&e.$$typeof){case y:case C:case p:return e;default:return t}}case E:case x:case l:return t}}}function O(e){return R(e)===_}t.typeOf=R,t.AsyncMode=w,t.ConcurrentMode=_,t.ContextConsumer=y,t.ContextProvider=p,t.Element=a,t.ForwardRef=C,t.Fragment=d,t.Lazy=E,t.Memo=x,t.Portal=l,t.Profiler=f,t.StrictMode=h,t.Suspense=S,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===d||e===_||e===f||e===h||e===S||e===k||"object"==typeof e&&null!==e&&(e.$$typeof===E||e.$$typeof===x||e.$$typeof===p||e.$$typeof===y||e.$$typeof===C||e.$$typeof===A||e.$$typeof===T)},t.isAsyncMode=function(e){return O(e)||R(e)===w},t.isConcurrentMode=O,t.isContextConsumer=function(e){return R(e)===y},t.isContextProvider=function(e){return R(e)===p},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===a},t.isForwardRef=function(e){return R(e)===C},t.isFragment=function(e){return R(e)===d},t.isLazy=function(e){return R(e)===E},t.isMemo=function(e){return R(e)===x},t.isPortal=function(e){return R(e)===l},t.isProfiler=function(e){return R(e)===f},t.isStrictMode=function(e){return R(e)===h},t.isSuspense=function(e){return R(e)===S}},function(e,t,n){n(670),e.exports=n(72).Object.values},function(e,t,n){var r=n(92),a=n(399)(!1);r(r.S,"Object",{values:function(e){return a(e)}})},function(e,t,n){n(672),n(678),e.exports=n(72).Array.from},function(e,t,n){"use strict";var r=n(673)(!0);n(674)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})}))},function(e,t,n){var r=n(270),a=n(269);e.exports=function(e){return function(t,n){var l,d,h=String(a(t)),f=r(n),p=h.length;return f<0||f>=p?e?"":void 0:(l=h.charCodeAt(f))<55296||l>56319||f+1===p||(d=h.charCodeAt(f+1))<56320||d>57343?e?h.charAt(f):l:e?h.slice(f,f+2):d-56320+(l-55296<<10)+65536}}},function(e,t,n){"use strict";var r=n(394),a=n(92),l=n(675),d=n(187),h=n(272),f=n(676),p=n(400),y=n(677),w=n(104)("iterator"),_=!([].keys&&"next"in[].keys()),C=function(){return this};e.exports=function(e,t,n,S,k,x,E){f(n,t,S);var A,T,R,O=function(e){if(!_&&e in D)return D[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},M=t+" Iterator",P="values"==k,L=!1,D=e.prototype,I=D[w]||D["@@iterator"]||k&&D[k],F=I||O(k),j=k?P?O("entries"):F:void 0,N="Array"==t&&D.entries||I;if(N&&(R=y(N.call(new e)))!==Object.prototype&&R.next&&(p(R,M,!0),r||"function"==typeof R[w]||d(R,w,C)),P&&I&&"values"!==I.name&&(L=!0,F=function(){return I.call(this)}),r&&!E||!_&&!L&&D[w]||d(D,w,F),h[t]=F,h[M]=C,k)if(A={values:P?F:O("values"),keys:x?F:O("keys"),entries:j},E)for(T in A)T in D||l(D,T,A[T]);else a(a.P+a.F*(_||L),t,A);return A}},function(e,t,n){e.exports=n(187)},function(e,t,n){"use strict";var r=n(398),a=n(266),l=n(400),d={};n(187)(d,n(104)("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=r(d,{next:a(1,n)}),l(e,t+" Iterator")}},function(e,t,n){var r=n(191),a=n(193),l=n(271)("IE_PROTO"),d=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=a(e),r(e,l)?e[l]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?d:null}},function(e,t,n){"use strict";var r=n(389),a=n(92),l=n(193),d=n(679),h=n(680),f=n(392),p=n(681),y=n(682);a(a.S+a.F*!n(684)((function(e){Array.from(e)})),"Array",{from:function(e){var t,n,a,w,_=l(e),C="function"==typeof this?this:Array,S=arguments.length,k=S>1?arguments[1]:void 0,x=void 0!==k,E=0,A=y(_);if(x&&(k=r(k,S>2?arguments[2]:void 0,2)),null==A||C==Array&&h(A))for(n=new C(t=f(_.length));t>E;E++)p(n,E,x?k(_[E],E):_[E]);else for(w=A.call(_),n=new C;!(a=w.next()).done;E++)p(n,E,x?d(w,k,[a.value,E],!0):a.value);return n.length=E,n}})},function(e,t,n){var r=n(189);e.exports=function(e,t,n,a){try{return a?t(r(n)[0],n[1]):t(n)}catch(t){var l=e.return;throw void 0!==l&&r(l.call(e)),t}}},function(e,t,n){var r=n(272),a=n(104)("iterator"),l=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||l[a]===e)}},function(e,t,n){"use strict";var r=n(188),a=n(266);e.exports=function(e,t,n){t in e?r.f(e,t,a(0,n)):e[t]=n}},function(e,t,n){var r=n(683),a=n(104)("iterator"),l=n(272);e.exports=n(72).getIteratorMethod=function(e){if(null!=e)return e[a]||e["@@iterator"]||l[r(e)]}},function(e,t,n){var r=n(268),a=n(104)("toStringTag"),l="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,n,d;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),a))?n:l?r(t):"Object"==(d=r(t))&&"function"==typeof t.callee?"Arguments":d}},function(e,t,n){var r=n(104)("iterator"),a=!1;try{var l=[7][r]();l.return=function(){a=!0},Array.from(l,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!a)return!1;var n=!1;try{var l=[7],d=l[r]();d.next=function(){return{done:n=!0}},l[r]=function(){return d},e(l)}catch(e){}return n}},function(e,t,n){n(686),e.exports=n(72).Array.isArray},function(e,t,n){var r=n(92);r(r.S,"Array",{isArray:n(687)})},function(e,t,n){var r=n(268);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){"use strict";t.__esModule=!0;var r=p(n(1)),a=p(n(194)),l=p(n(0)),d=p(n(38)),h=p(n(195)),f=p(n(123));function p(e){return e&&e.__esModule?e:{default:e}}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var _=function(e){function t(){var n,r;y(this,t);for(var a=arguments.length,p=Array(a),_=0;_<a;_++)p[_]=arguments[_];return n=r=w(this,e.call.apply(e,[this].concat(p))),r._mountOverlayTarget=function(){r._overlayTarget||(r._overlayTarget=document.createElement("div"),r._portalContainerNode=(0,h.default)(r.props.container,(0,f.default)(r).body),r._portalContainerNode.appendChild(r._overlayTarget))},r._unmountOverlayTarget=function(){r._overlayTarget&&(r._portalContainerNode.removeChild(r._overlayTarget),r._overlayTarget=null),r._portalContainerNode=null},r._renderOverlay=function(){var e=r.props.children?l.default.Children.only(r.props.children):null;if(null!==e){r._mountOverlayTarget();var t=!r._overlayInstance;r._overlayInstance=d.default.unstable_renderSubtreeIntoContainer(r,e,r._overlayTarget,(function(){t&&r.props.onRendered&&r.props.onRendered()}))}else r._unrenderOverlay(),r._unmountOverlayTarget()},r._unrenderOverlay=function(){r._overlayTarget&&(d.default.unmountComponentAtNode(r._overlayTarget),r._overlayInstance=null)},r.getMountNode=function(){return r._overlayTarget},w(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this._isMounted=!0,this._renderOverlay()},t.prototype.componentDidUpdate=function(){this._renderOverlay()},t.prototype.UNSAFE_componentWillReceiveProps=function(e){this._overlayTarget&&e.container!==this.props.container&&(this._portalContainerNode.removeChild(this._overlayTarget),this._portalContainerNode=(0,h.default)(e.container,(0,f.default)(this).body),this._portalContainerNode.appendChild(this._overlayTarget))},t.prototype.componentWillUnmount=function(){this._isMounted=!1,this._unrenderOverlay(),this._unmountOverlayTarget()},t.prototype.render=function(){return null},t}(l.default.Component);_.displayName="Portal",_.propTypes={container:r.default.oneOfType([a.default,r.default.func]),onRendered:r.default.func},t.default=_,e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=C(n(5)),l=C(n(1)),d=C(n(194)),h=n(0),f=C(h),p=C(n(38)),y=C(n(690)),w=C(n(195)),_=C(n(123));function C(e){return e&&e.__esModule?e:{default:e}}function S(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var k=function(e){function t(n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,r));return a.getTarget=function(){var e=a.props.target,t="function"==typeof e?e():e;return t&&p.default.findDOMNode(t)||null},a.maybeUpdatePosition=function(e){var t=a.getTarget();(a.props.shouldUpdatePosition||t!==a._lastTarget||e)&&a.updatePosition(t)},a.state={positionLeft:0,positionTop:0,arrowOffsetLeft:null,arrowOffsetTop:null},a._needsFlush=!1,a._lastTarget=null,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this.updatePosition(this.getTarget())},t.prototype.UNSAFE_componentWillReceiveProps=function(){this._needsFlush=!0},t.prototype.componentDidUpdate=function(e){this._needsFlush&&(this._needsFlush=!1,this.maybeUpdatePosition(this.props.placement!==e.placement))},t.prototype.render=function(){var e=this.props,t=e.children,n=e.className,l=S(e,["children","className"]),d=this.state,p=d.positionLeft,y=d.positionTop,w=S(d,["positionLeft","positionTop"]);delete l.target,delete l.container,delete l.containerPadding,delete l.shouldUpdatePosition;var _=f.default.Children.only(t);return(0,h.cloneElement)(_,r({},l,w,{positionLeft:p,positionTop:y,className:(0,a.default)(n,_.props.className),style:r({},_.props.style,{left:p,top:y})}))},t.prototype.updatePosition=function(e){if(this._lastTarget=e,e){var t=p.default.findDOMNode(this),n=(0,w.default)(this.props.container,(0,_.default)(this).body);this.setState((0,y.default)(this.props.placement,t,e,n,this.props.containerPadding))}else this.setState({positionLeft:0,positionTop:0,arrowOffsetLeft:null,arrowOffsetTop:null})},t}(f.default.Component);k.propTypes={target:l.default.oneOfType([d.default,l.default.func]),container:l.default.oneOfType([d.default,l.default.func]),containerPadding:l.default.number,placement:l.default.oneOf(["top","right","bottom","left"]),shouldUpdatePosition:l.default.bool},k.displayName="Position",k.defaultProps={containerPadding:0,placement:"right",shouldUpdatePosition:!1},t.default=k,e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t,n,l,d){var h="BODY"===l.tagName?(0,r.default)(n):(0,a.default)(n,l),p=(0,r.default)(t),y=p.height,w=p.width,_=void 0,C=void 0,S=void 0,k=void 0;if("left"===e||"right"===e){C=h.top+(h.height-y)/2,_="left"===e?h.left-w:h.left+h.width;var x=function(e,t,n,r){var a=f(n),l=a.scroll,d=a.height,h=e-r-l,p=e+r-l+t;return h<0?-h:p>d?d-p:0}(C,y,l,d);C+=x,k=50*(1-2*x/y)+"%",S=void 0}else{if("top"!==e&&"bottom"!==e)throw new Error('calcOverlayPosition(): No such placement of "'+e+'" found.');_=h.left+(h.width-w)/2,C="top"===e?h.top-y:h.top+h.height;var E=function(e,t,n,r){var a=f(n).width,l=e-r,d=e+r+t;if(l<0)return-l;if(d>a)return a-d;return 0}(_,w,l,d);_+=E,S=50*(1-2*E/w)+"%",k=void 0}return{positionLeft:_,positionTop:C,arrowOffsetLeft:S,arrowOffsetTop:k}};var r=h(n(403)),a=h(n(691)),l=h(n(405)),d=h(n(123));function h(e){return e&&e.__esModule?e:{default:e}}function f(e){var t=void 0,n=void 0,a=void 0;if("BODY"===e.tagName)t=window.innerWidth,n=window.innerHeight,a=(0,l.default)((0,d.default)(e).documentElement)||(0,l.default)(e);else{var h=(0,r.default)(e);t=h.width,n=h.height,a=(0,l.default)(e)}return{width:t,height:n,scroll:a}}e.exports=t.default},function(e,t,n){"use strict";var r=n(40);t.__esModule=!0,t.default=function(e,t){var n,r={top:0,left:0};"fixed"===(0,p.default)(e,"position")?n=e.getBoundingClientRect():(t=t||(0,d.default)(e),n=(0,l.default)(e),"html"!==function(e){return e.nodeName&&e.nodeName.toLowerCase()}(t)&&(r=(0,l.default)(t)),r.top+=parseInt((0,p.default)(t,"borderTopWidth"),10)-(0,h.default)(t)||0,r.left+=parseInt((0,p.default)(t,"borderLeftWidth"),10)-(0,f.default)(t)||0);return(0,a.default)({},n,{top:n.top-r.top-(parseInt((0,p.default)(e,"marginTop"),10)||0),left:n.left-r.left-(parseInt((0,p.default)(e,"marginLeft"),10)||0)})};var a=r(n(692)),l=r(n(403)),d=r(n(693)),h=r(n(405)),f=r(n(701)),p=r(n(275));e.exports=t.default},function(e,t){function n(){return e.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n.apply(this,arguments)}e.exports=n},function(e,t,n){"use strict";var r=n(40);t.__esModule=!0,t.default=function(e){var t=(0,a.default)(e),n=e&&e.offsetParent;for(;n&&"html"!==d(e)&&"static"===(0,l.default)(n,"position");)n=n.offsetParent;return n||t.documentElement};var a=r(n(106)),l=r(n(275));function d(e){return e.nodeName&&e.nodeName.toLowerCase()}e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){return e.replace(r,(function(e,t){return t.toUpperCase()}))};var r=/-(.)/g;e.exports=t.default},function(e,t,n){"use strict";var r=n(40);t.__esModule=!0,t.default=function(e){return(0,a.default)(e).replace(l,"-ms-")};var a=r(n(696)),l=/^ms-/;e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){return e.replace(r,"-$1").toLowerCase()};var r=/([A-Z])/g;e.exports=t.default},function(e,t,n){"use strict";var r=n(40);t.__esModule=!0,t.default=function(e){if(!e)throw new TypeError("No Element passed to `getComputedStyle()`");var t=e.ownerDocument;return"defaultView"in t?t.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):window.getComputedStyle(e,null):{getPropertyValue:function(t){var n=e.style;"float"==(t=(0,a.default)(t))&&(t="styleFloat");var r=e.currentStyle[t]||null;if(null==r&&n&&n[t]&&(r=n[t]),d.test(r)&&!l.test(t)){var h=n.left,f=e.runtimeStyle,p=f&&f.left;p&&(f.left=e.currentStyle.left),n.left="fontSize"===t?"1em":r,r=n.pixelLeft+"px",n.left=h,p&&(f.left=p)}return r}}};var a=r(n(404)),l=/^(top|right|bottom|left)$/,d=/^([+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|))(?!px)[a-z%]+$/i;e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){return"removeProperty"in e.style?e.style.removeProperty(t):e.style.removeAttribute(t)},e.exports=t.default},function(e,t,n){"use strict";var r=n(40);t.__esModule=!0,t.default=t.animationEnd=t.animationDelay=t.animationTiming=t.animationDuration=t.animationName=t.transitionEnd=t.transitionDuration=t.transitionDelay=t.transitionTiming=t.transitionProperty=t.transform=void 0;var a,l,d,h,f,p,y,w,_,C,S,k=r(n(75)),x="transform";if(t.transform=x,t.animationEnd=d,t.transitionEnd=l,t.transitionDelay=y,t.transitionTiming=p,t.transitionDuration=f,t.transitionProperty=h,t.animationDelay=S,t.animationTiming=C,t.animationDuration=_,t.animationName=w,k.default){var E=function(){for(var e,t,n=document.createElement("div").style,r={O:function(e){return"o"+e.toLowerCase()},Moz:function(e){return e.toLowerCase()},Webkit:function(e){return"webkit"+e},ms:function(e){return"MS"+e}},a=Object.keys(r),l="",d=0;d<a.length;d++){var h=a[d];if(h+"TransitionProperty"in n){l="-"+h.toLowerCase(),e=r[h]("TransitionEnd"),t=r[h]("AnimationEnd");break}}!e&&"transitionProperty"in n&&(e="transitionend");!t&&"animationName"in n&&(t="animationend");return n=null,{animationEnd:t,transitionEnd:e,prefix:l}}();a=E.prefix,t.transitionEnd=l=E.transitionEnd,t.animationEnd=d=E.animationEnd,t.transform=x=a+"-"+x,t.transitionProperty=h=a+"-transition-property",t.transitionDuration=f=a+"-transition-duration",t.transitionDelay=y=a+"-transition-delay",t.transitionTiming=p=a+"-transition-timing-function",t.animationName=w=a+"-animation-name",t.animationDuration=_=a+"-animation-duration",t.animationTiming=C=a+"-animation-delay",t.animationDelay=S=a+"-animation-timing-function"}var A={transform:x,end:l,property:h,timing:p,delay:y,duration:f};t.default=A},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){return!(!e||!r.test(e))};var r=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;e.exports=t.default},function(e,t,n){"use strict";var r=n(40);t.__esModule=!0,t.default=function(e,t){var n=(0,a.default)(e);if(void 0===t)return n?"pageXOffset"in n?n.pageXOffset:n.document.documentElement.scrollLeft:e.scrollLeft;n?n.scrollTo(t,"pageYOffset"in n?n.pageYOffset:n.document.documentElement.scrollTop):e.scrollLeft=t};var a=r(n(196));e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.classNamesShape=t.timeoutsShape=void 0;var r;(r=n(1))&&r.__esModule;t.timeoutsShape=null;t.classNamesShape=null},function(e,t,n){"use strict";var r=n(40);t.__esModule=!0,t.default=function(e,t){return function(n){var r=n.currentTarget,d=n.target;(0,l.default)(r,e).some((function(e){return(0,a.default)(e,d)}))&&t.call(this,n)}};var a=r(n(94)),l=r(n(704));e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){var n,l="#"===t[0],d="."===t[0],h=l||d?t.slice(1):t;if(r.test(h))return l?(e=e.getElementById?e:document,(n=e.getElementById(h))?[n]:[]):e.getElementsByClassName&&d?a(e.getElementsByClassName(h)):a(e.getElementsByTagName(t));return a(e.querySelectorAll(t))};var r=/^[\w-]*$/,a=Function.prototype.bind.call(Function.prototype.call,[].slice);e.exports=t.default},function(e,t,n){"use strict";var r=n(40);t.__esModule=!0,t.default=void 0;var a=r(n(75)),l=r(n(273)),d=r(n(274)),h=function(){};a.default&&(h=function(e,t,n,r){return(0,l.default)(e,t,n,r),function(){(0,d.default)(e,t,n,r)}});var f=h;t.default=f,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=h;var r,a=n(707),l=(r=a)&&r.__esModule?r:{default:r};var d={};function h(e,t){return function(n,r,a,h,f){var p=a||"<<anonymous>>",y=f||r;if(null!=n[r]){var w=a+"."+r;(0,l.default)(d[w],"The "+h+" `"+y+"` of `"+p+"` is deprecated. "+t+"."),d[w]=!0}for(var _=arguments.length,C=Array(_>5?_-5:0),S=5;S<_;S++)C[S-5]=arguments[S];return e.apply(void 0,[n,r,a,h,f].concat(C))}}h._resetWarned=function(){d={}},e.exports=t.default},function(e,t,n){"use strict";var r=function(){};e.exports=r},function(e,t,n){"use strict";t.__esModule=!0;var r=f(n(709)),a=f(n(275)),l=f(n(202)),d=f(n(280)),h=n(712);function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){return n=function(e){return-1!==e.modals.indexOf(t)},r=-1,e.some((function(e,t){if(n(e,t))return r=t,!0})),r;var n,r}function w(e,t){var n={overflow:"hidden"};e.style={overflow:t.style.overflow,paddingRight:t.style.paddingRight},e.overflowing&&(n.paddingRight=parseInt((0,a.default)(t,"paddingRight")||0,10)+(0,l.default)()+"px"),(0,a.default)(t,n)}function _(e,t){var n=e.style;Object.keys(n).forEach((function(e){return t.style[e]=n[e]}))}t.default=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=n.hideSiblingNodes,l=void 0===a||a,f=n.handleContainerOverflow,C=void 0===f||f;p(this,e),this.add=function(e,n,a){var l=t.modals.indexOf(e),f=t.containers.indexOf(n);if(-1!==l)return l;if(l=t.modals.length,t.modals.push(e),t.hideSiblingNodes&&(0,h.hideSiblings)(n,e.mountNode),-1!==f)return t.data[f].modals.push(e),l;var p={modals:[e],classes:a?a.split(/\s+/):[],overflowing:(0,d.default)(n)};return t.handleContainerOverflow&&w(p,n),p.classes.forEach(r.default.addClass.bind(null,n)),t.containers.push(n),t.data.push(p),l},this.remove=function(e){var n=t.modals.indexOf(e);if(-1!==n){var a=y(t.data,e),l=t.data[a],d=t.containers[a];l.modals.splice(l.modals.indexOf(e),1),t.modals.splice(n,1),0===l.modals.length?(l.classes.forEach(r.default.removeClass.bind(null,d)),t.handleContainerOverflow&&_(l,d),t.hideSiblingNodes&&(0,h.showSiblings)(d,e.mountNode),t.containers.splice(a,1),t.data.splice(a,1)):t.hideSiblingNodes&&(0,h.ariaHidden)(!1,l.modals[l.modals.length-1].mountNode)}},this.isTopModal=function(e){return!!t.modals.length&&t.modals[t.modals.length-1]===e},this.hideSiblingNodes=l,this.handleContainerOverflow=C,this.modals=[],this.containers=[],this.data=[]},e.exports=t.default},function(e,t,n){"use strict";var r=n(40);t.__esModule=!0,t.default=void 0;var a=r(n(710));t.addClass=a.default;var l=r(n(711));t.removeClass=l.default;var d=r(n(406));t.hasClass=d.default;var h={addClass:a.default,removeClass:l.default,hasClass:d.default};t.default=h},function(e,t,n){"use strict";var r=n(40);t.__esModule=!0,t.default=function(e,t){e.classList?e.classList.add(t):(0,a.default)(e,t)||("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))};var a=r(n(406));e.exports=t.default},function(e,t,n){"use strict";function r(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}e.exports=function(e,t){e.classList?e.classList.remove(t):"string"==typeof e.className?e.className=r(e.className,t):e.setAttribute("class",r(e.className&&e.className.baseVal||"",t))}},function(e,t,n){"use strict";t.__esModule=!0,t.ariaHidden=l,t.hideSiblings=function(e,t){a(e,t,(function(e){return l(!0,e)}))},t.showSiblings=function(e,t){a(e,t,(function(e){return l(!1,e)}))};var r=["template","script","style"],a=function(e,t,n){t=[].concat(t),[].forEach.call(e.children,(function(e){var a,l,d;-1===t.indexOf(e)&&(l=(a=e).nodeType,d=a.tagName,1===l&&-1===r.indexOf(d.toLowerCase()))&&n(e)}))};function l(e,t){t&&(e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden"))}},function(e,t,n){"use strict";t.__esModule=!0;var r=l(n(1)),a=l(n(0));function l(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f={children:r.default.node},p=function(e){function t(){return d(this,t),h(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){return this.props.children},t}(a.default.Component);p.propTypes=f,t.default=p,e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){var t=!document.addEventListener,n=void 0;t?(document.attachEvent("onfocusin",e),n=function(){return document.detachEvent("onfocusin",e)}):(document.addEventListener("focus",e,!0),n=function(){return document.removeEventListener("focus",e,!0)});return{remove:n}},e.exports=t.default},function(e,t){e.exports=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}},function(e,t,n){var r=/(?:<!--[\S\s]*?-->|<(?:"[^"]*"['"]*|'[^']*'['"]*|[^'">])+>)/g,a=n(717),l=Object.create?Object.create(null):{};function d(e,t,n,r,a){var l=t.indexOf("<",r),d=t.slice(r,-1===l?void 0:l);/^\s*$/.test(d)&&(d=" "),(!a&&l>-1&&n+e.length>=0||" "!==d)&&e.push({type:"text",content:d})}e.exports=function(e,t){t||(t={}),t.components||(t.components=l);var n,h=[],f=-1,p=[],y={},w=!1;return e.replace(r,(function(r,l){if(w){if(r!=="</"+n.name+">")return;w=!1}var _,C="/"!==r.charAt(1),S=0===r.indexOf("\x3c!--"),k=l+r.length,x=e.charAt(k);C&&!S&&(f++,"tag"===(n=a(r)).type&&t.components[n.name]&&(n.type="component",w=!0),n.voidElement||w||!x||"<"===x||d(n.children,e,f,k,t.ignoreWhitespace),y[n.tagName]=n,0===f&&h.push(n),(_=p[f-1])&&_.children.push(n),p[f]=n),(S||!C||n.voidElement)&&(S||f--,!w&&"<"!==x&&x&&d(_=-1===f?h:p[f].children,e,f,k,t.ignoreWhitespace))})),!h.length&&e.length&&d(h,e,0,0,t.ignoreWhitespace),h}},function(e,t,n){var r=/([\w-]+)|=|(['"])([.\s\S]*?)\2/g,a=n(718);e.exports=function(e){var t,n=0,l=!0,d={type:"tag",name:"",voidElement:!1,attrs:{},children:[]};return e.replace(r,(function(r){if("="===r)return l=!0,void n++;l?0===n?((a[r]||"/"===e.charAt(e.length-2))&&(d.voidElement=!0),d.name=r):(d.attrs[t]=r.replace(/^['"]|['"]$/g,""),t=void 0):(t&&(d.attrs[t]=t),t=r),n++,l=!1})),d}},function(e,t){e.exports={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,menuitem:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}},function(e,t){function n(e,t){switch(t.type){case"text":return e+t.content;case"tag":return e+="<"+t.name+(t.attrs?function(e){var t=[];for(var n in e)t.push(n+'="'+e[n]+'"');return t.length?" "+t.join(" "):""}(t.attrs):"")+(t.voidElement?"/>":">"),t.voidElement?e:e+t.children.reduce(n,"")+"</"+t.name+">"}}e.exports=function(e){return e.reduce((function(e,t){return e+n("",t)}),"")}},function(e,t,n){var r={"./cs.json":[780,2],"./da.json":[781,3],"./de.json":[782,4],"./en.json":[783,5],"./es.json":[784,6],"./fi.json":[785,7],"./fr.json":[786,8],"./it.json":[787,11],"./ja.json":[788,12],"./ko.json":[789,13],"./nl.json":[790,17],"./no.json":[791,18],"./pl.json":[792,19],"./pt.json":[793,20],"./ru.json":[794,23],"./sv.json":[795,25],"./tr.json":[796,26],"./zh-CN.json":[797,28]};function a(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],a=t[0];return n.e(t[1]).then((function(){return n.t(a,3)}))}a.keys=function(){return Object.keys(r)},a.id=720,e.exports=a},function(e,t,n){"use strict";var r=n(383),a=n(385);e.exports=r("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),a)},function(e,t,n){var r=n(18),a=n(723),l=n(135);r({target:"Array",proto:!0},{fill:a}),l("fill")},function(e,t,n){"use strict";var r=n(58),a=n(158),l=n(47);e.exports=function(e){for(var t=r(this),n=l(t.length),d=arguments.length,h=a(d>1?arguments[1]:void 0,n),f=d>2?arguments[2]:void 0,p=void 0===f?n:a(f,n);p>h;)t[h++]=e;return t}},function(e,t,n){(function(e){ace.define("ace/ext/searchbox",[],(function(e,t,n){"use strict";var r=e("../lib/dom"),a=e("../lib/lang"),l=e("../lib/event"),d=e("../keyboard/hash_handler").HashHandler,h=e("../lib/keys");r.importCssString('.ace_search {background-color: #ddd;color: #666;border: 1px solid #cbcbcb;border-top: 0 none;overflow: hidden;margin: 0;padding: 4px 6px 0 4px;position: absolute;top: 0;z-index: 99;white-space: normal;}.ace_search.left {border-left: 0 none;border-radius: 0px 0px 5px 0px;left: 0;}.ace_search.right {border-radius: 0px 0px 0px 5px;border-right: 0 none;right: 0;}.ace_search_form, .ace_replace_form {margin: 0 20px 4px 0;overflow: hidden;line-height: 1.9;}.ace_replace_form {margin-right: 0;}.ace_search_form.ace_nomatch {outline: 1px solid red;}.ace_search_field {border-radius: 3px 0 0 3px;background-color: white;color: black;border: 1px solid #cbcbcb;border-right: 0 none;outline: 0;padding: 0;font-size: inherit;margin: 0;line-height: inherit;padding: 0 6px;min-width: 17em;vertical-align: top;min-height: 1.8em;box-sizing: content-box;}.ace_searchbtn {border: 1px solid #cbcbcb;line-height: inherit;display: inline-block;padding: 0 6px;background: #fff;border-right: 0 none;border-left: 1px solid #dcdcdc;cursor: pointer;margin: 0;position: relative;color: #666;}.ace_searchbtn:last-child {border-radius: 0 3px 3px 0;border-right: 1px solid #cbcbcb;}.ace_searchbtn:disabled {background: none;cursor: default;}.ace_searchbtn:hover {background-color: #eef1f6;}.ace_searchbtn.prev, .ace_searchbtn.next {padding: 0px 0.7em}.ace_searchbtn.prev:after, .ace_searchbtn.next:after {content: "";border: solid 2px #888;width: 0.5em;height: 0.5em;border-width:  2px 0 0 2px;display:inline-block;transform: rotate(-45deg);}.ace_searchbtn.next:after {border-width: 0 2px 2px 0 ;}.ace_searchbtn_close {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAcCAYAAABRVo5BAAAAZ0lEQVR42u2SUQrAMAhDvazn8OjZBilCkYVVxiis8H4CT0VrAJb4WHT3C5xU2a2IQZXJjiQIRMdkEoJ5Q2yMqpfDIo+XY4k6h+YXOyKqTIj5REaxloNAd0xiKmAtsTHqW8sR2W5f7gCu5nWFUpVjZwAAAABJRU5ErkJggg==) no-repeat 50% 0;border-radius: 50%;border: 0 none;color: #656565;cursor: pointer;font: 16px/16px Arial;padding: 0;height: 14px;width: 14px;top: 9px;right: 7px;position: absolute;}.ace_searchbtn_close:hover {background-color: #656565;background-position: 50% 100%;color: white;}.ace_button {margin-left: 2px;cursor: pointer;-webkit-user-select: none;-moz-user-select: none;-o-user-select: none;-ms-user-select: none;user-select: none;overflow: hidden;opacity: 0.7;border: 1px solid rgba(100,100,100,0.23);padding: 1px;box-sizing:    border-box!important;color: black;}.ace_button:hover {background-color: #eee;opacity:1;}.ace_button:active {background-color: #ddd;}.ace_button.checked {border-color: #3399ff;opacity:1;}.ace_search_options{margin-bottom: 3px;text-align: right;-webkit-user-select: none;-moz-user-select: none;-o-user-select: none;-ms-user-select: none;user-select: none;clear: both;}.ace_search_counter {float: left;font-family: arial;padding: 0 8px;}',"ace_searchbox");var f=function(e,t,n){var a=r.createElement("div");r.buildDom(["div",{class:"ace_search right"},["span",{action:"hide",class:"ace_searchbtn_close"}],["div",{class:"ace_search_form"},["input",{class:"ace_search_field",placeholder:"Search for",spellcheck:"false"}],["span",{action:"findPrev",class:"ace_searchbtn prev"},"​"],["span",{action:"findNext",class:"ace_searchbtn next"},"​"],["span",{action:"findAll",class:"ace_searchbtn",title:"Alt-Enter"},"All"]],["div",{class:"ace_replace_form"},["input",{class:"ace_search_field",placeholder:"Replace with",spellcheck:"false"}],["span",{action:"replaceAndFindNext",class:"ace_searchbtn"},"Replace"],["span",{action:"replaceAll",class:"ace_searchbtn"},"All"]],["div",{class:"ace_search_options"},["span",{action:"toggleReplace",class:"ace_button",title:"Toggle Replace mode",style:"float:left;margin-top:-2px;padding:0 5px;"},"+"],["span",{class:"ace_search_counter"}],["span",{action:"toggleRegexpMode",class:"ace_button",title:"RegExp Search"},".*"],["span",{action:"toggleCaseSensitive",class:"ace_button",title:"CaseSensitive Search"},"Aa"],["span",{action:"toggleWholeWords",class:"ace_button",title:"Whole Word Search"},"\\b"],["span",{action:"searchInSelection",class:"ace_button",title:"Search In Selection"},"S"]]],a),this.element=a.firstChild,this.setSession=this.setSession.bind(this),this.$init(),this.setEditor(e)};(function(){this.setEditor=function(e){e.searchBox=this,e.renderer.scroller.appendChild(this.element),this.editor=e},this.setSession=function(e){this.searchRange=null,this.$syncOptions(!0)},this.$initElements=function(e){this.searchBox=e.querySelector(".ace_search_form"),this.replaceBox=e.querySelector(".ace_replace_form"),this.searchOption=e.querySelector("[action=searchInSelection]"),this.replaceOption=e.querySelector("[action=toggleReplace]"),this.regExpOption=e.querySelector("[action=toggleRegexpMode]"),this.caseSensitiveOption=e.querySelector("[action=toggleCaseSensitive]"),this.wholeWordOption=e.querySelector("[action=toggleWholeWords]"),this.searchInput=this.searchBox.querySelector(".ace_search_field"),this.replaceInput=this.replaceBox.querySelector(".ace_search_field"),this.searchCounter=e.querySelector(".ace_search_counter")},this.$init=function(){var e=this.element;this.$initElements(e);var t=this;l.addListener(e,"mousedown",(function(e){setTimeout((function(){t.activeInput.focus()}),0),l.stopPropagation(e)})),l.addListener(e,"click",(function(e){var n=(e.target||e.srcElement).getAttribute("action");n&&t[n]?t[n]():t.$searchBarKb.commands[n]&&t.$searchBarKb.commands[n].exec(t),l.stopPropagation(e)})),l.addCommandKeyListener(e,(function(e,n,r){var a=h.keyCodeToString(r),d=t.$searchBarKb.findKeyCommand(n,a);d&&d.exec&&(d.exec(t),l.stopEvent(e))})),this.$onChange=a.delayedCall((function(){t.find(!1,!1)})),l.addListener(this.searchInput,"input",(function(){t.$onChange.schedule(20)})),l.addListener(this.searchInput,"focus",(function(){t.activeInput=t.searchInput,t.searchInput.value&&t.highlight()})),l.addListener(this.replaceInput,"focus",(function(){t.activeInput=t.replaceInput,t.searchInput.value&&t.highlight()}))},this.$closeSearchBarKb=new d([{bindKey:"Esc",name:"closeSearchBar",exec:function(e){e.searchBox.hide()}}]),this.$searchBarKb=new d,this.$searchBarKb.bindKeys({"Ctrl-f|Command-f":function(e){var t=e.isReplace=!e.isReplace;e.replaceBox.style.display=t?"":"none",e.replaceOption.checked=!1,e.$syncOptions(),e.searchInput.focus()},"Ctrl-H|Command-Option-F":function(e){e.editor.getReadOnly()||(e.replaceOption.checked=!0,e.$syncOptions(),e.replaceInput.focus())},"Ctrl-G|Command-G":function(e){e.findNext()},"Ctrl-Shift-G|Command-Shift-G":function(e){e.findPrev()},esc:function(e){setTimeout((function(){e.hide()}))},Return:function(e){e.activeInput==e.replaceInput&&e.replace(),e.findNext()},"Shift-Return":function(e){e.activeInput==e.replaceInput&&e.replace(),e.findPrev()},"Alt-Return":function(e){e.activeInput==e.replaceInput&&e.replaceAll(),e.findAll()},Tab:function(e){(e.activeInput==e.replaceInput?e.searchInput:e.replaceInput).focus()}}),this.$searchBarKb.addCommands([{name:"toggleRegexpMode",bindKey:{win:"Alt-R|Alt-/",mac:"Ctrl-Alt-R|Ctrl-Alt-/"},exec:function(e){e.regExpOption.checked=!e.regExpOption.checked,e.$syncOptions()}},{name:"toggleCaseSensitive",bindKey:{win:"Alt-C|Alt-I",mac:"Ctrl-Alt-R|Ctrl-Alt-I"},exec:function(e){e.caseSensitiveOption.checked=!e.caseSensitiveOption.checked,e.$syncOptions()}},{name:"toggleWholeWords",bindKey:{win:"Alt-B|Alt-W",mac:"Ctrl-Alt-B|Ctrl-Alt-W"},exec:function(e){e.wholeWordOption.checked=!e.wholeWordOption.checked,e.$syncOptions()}},{name:"toggleReplace",exec:function(e){e.replaceOption.checked=!e.replaceOption.checked,e.$syncOptions()}},{name:"searchInSelection",exec:function(e){e.searchOption.checked=!e.searchRange,e.setSearchRange(e.searchOption.checked&&e.editor.getSelectionRange()),e.$syncOptions()}}]),this.setSearchRange=function(e){this.searchRange=e,e?this.searchRangeMarker=this.editor.session.addMarker(e,"ace_active-line"):this.searchRangeMarker&&(this.editor.session.removeMarker(this.searchRangeMarker),this.searchRangeMarker=null)},this.$syncOptions=function(e){r.setCssClass(this.replaceOption,"checked",this.searchRange),r.setCssClass(this.searchOption,"checked",this.searchOption.checked),this.replaceOption.textContent=this.replaceOption.checked?"-":"+",r.setCssClass(this.regExpOption,"checked",this.regExpOption.checked),r.setCssClass(this.wholeWordOption,"checked",this.wholeWordOption.checked),r.setCssClass(this.caseSensitiveOption,"checked",this.caseSensitiveOption.checked);var t=this.editor.getReadOnly();this.replaceOption.style.display=t?"none":"",this.replaceBox.style.display=this.replaceOption.checked&&!t?"":"none",this.find(!1,!1,e)},this.highlight=function(e){this.editor.session.highlight(e||this.editor.$search.$options.re),this.editor.renderer.updateBackMarkers()},this.find=function(e,t,n){var a=!this.editor.find(this.searchInput.value,{skipCurrent:e,backwards:t,wrap:!0,regExp:this.regExpOption.checked,caseSensitive:this.caseSensitiveOption.checked,wholeWord:this.wholeWordOption.checked,preventScroll:n,range:this.searchRange})&&this.searchInput.value;r.setCssClass(this.searchBox,"ace_nomatch",a),this.editor._emit("findSearchBox",{match:!a}),this.highlight(),this.updateCounter()},this.updateCounter=function(){var e=this.editor,t=e.$search.$options.re,n=0,r=0;if(t){var a=this.searchRange?e.session.getTextRange(this.searchRange):e.getValue(),l=e.session.doc.positionToIndex(e.selection.anchor);this.searchRange&&(l-=e.session.doc.positionToIndex(this.searchRange.start));for(var d,h=t.lastIndex=0;(d=t.exec(a))&&(n++,(h=d.index)<=l&&r++,!(n>999))&&(d[0]||(t.lastIndex=h+=1,!(h>=a.length))););}this.searchCounter.textContent=r+" of "+(n>999?"999+":n)},this.findNext=function(){this.find(!0,!1)},this.findPrev=function(){this.find(!0,!0)},this.findAll=function(){var e=!this.editor.findAll(this.searchInput.value,{regExp:this.regExpOption.checked,caseSensitive:this.caseSensitiveOption.checked,wholeWord:this.wholeWordOption.checked})&&this.searchInput.value;r.setCssClass(this.searchBox,"ace_nomatch",e),this.editor._emit("findSearchBox",{match:!e}),this.highlight(),this.hide()},this.replace=function(){this.editor.getReadOnly()||this.editor.replace(this.replaceInput.value)},this.replaceAndFindNext=function(){this.editor.getReadOnly()||(this.editor.replace(this.replaceInput.value),this.findNext())},this.replaceAll=function(){this.editor.getReadOnly()||this.editor.replaceAll(this.replaceInput.value)},this.hide=function(){this.active=!1,this.setSearchRange(null),this.editor.off("changeSession",this.setSession),this.element.style.display="none",this.editor.keyBinding.removeKeyboardHandler(this.$closeSearchBarKb),this.editor.focus()},this.show=function(e,t){this.active=!0,this.editor.on("changeSession",this.setSession),this.element.style.display="",this.replaceOption.checked=t,e&&(this.searchInput.value=e),this.searchInput.focus(),this.searchInput.select(),this.editor.keyBinding.addKeyboardHandler(this.$closeSearchBarKb),this.$syncOptions(!0)},this.isFocused=function(){var e=document.activeElement;return e==this.searchInput||e==this.replaceInput}}).call(f.prototype),t.SearchBox=f,t.Search=function(e,t){(e.searchBox||new f(e)).show(e.session.getTextRange(),t)}})),ace.require(["ace/ext/searchbox"],(function(t){e&&(e.exports=t)}))}).call(this,n(68)(e))},function(e,t,n){(function(e){ace.define("ace/ext/modelist",[],(function(e,t,n){"use strict";var r=[];var a=function(e,t,n){var r;this.name=e,this.caption=t,this.mode="ace/mode/"+e,this.extensions=n,r=/\^/.test(n)?n.replace(/\|(\^)?/g,(function(e,t){return"$|"+(t?"^":"^.*\\.")}))+"$":"^.*\\.("+n+")$",this.extRe=new RegExp(r,"gi")};a.prototype.supportsFile=function(e){return e.match(this.extRe)};var l={ABAP:["abap"],ABC:["abc"],ActionScript:["as"],ADA:["ada|adb"],Alda:["alda"],Apache_Conf:["^htaccess|^htgroups|^htpasswd|^conf|htaccess|htgroups|htpasswd"],Apex:["apex|cls|trigger|tgr"],AQL:["aql"],AsciiDoc:["asciidoc|adoc"],ASL:["dsl|asl"],Assembly_x86:["asm|a"],AutoHotKey:["ahk"],BatchFile:["bat|cmd"],C_Cpp:["cpp|c|cc|cxx|h|hh|hpp|ino"],C9Search:["c9search_results"],Cirru:["cirru|cr"],Clojure:["clj|cljs"],Cobol:["CBL|COB"],coffee:["coffee|cf|cson|^Cakefile"],ColdFusion:["cfm"],Crystal:["cr"],CSharp:["cs"],Csound_Document:["csd"],Csound_Orchestra:["orc"],Csound_Score:["sco"],CSS:["css"],Curly:["curly"],D:["d|di"],Dart:["dart"],Diff:["diff|patch"],Dockerfile:["^Dockerfile"],Dot:["dot"],Drools:["drl"],Edifact:["edi"],Eiffel:["e|ge"],EJS:["ejs"],Elixir:["ex|exs"],Elm:["elm"],Erlang:["erl|hrl"],Forth:["frt|fs|ldr|fth|4th"],Fortran:["f|f90"],FSharp:["fsi|fs|ml|mli|fsx|fsscript"],FSL:["fsl"],FTL:["ftl"],Gcode:["gcode"],Gherkin:["feature"],Gitignore:["^.gitignore"],Glsl:["glsl|frag|vert"],Gobstones:["gbs"],golang:["go"],GraphQLSchema:["gql"],Groovy:["groovy"],HAML:["haml"],Handlebars:["hbs|handlebars|tpl|mustache"],Haskell:["hs"],Haskell_Cabal:["cabal"],haXe:["hx"],Hjson:["hjson"],HTML:["html|htm|xhtml|vue|we|wpy"],HTML_Elixir:["eex|html.eex"],HTML_Ruby:["erb|rhtml|html.erb"],INI:["ini|conf|cfg|prefs"],Io:["io"],Jack:["jack"],Jade:["jade|pug"],Java:["java"],JavaScript:["js|jsm|jsx"],JSON:["json"],JSON5:["json5"],JSONiq:["jq"],JSP:["jsp"],JSSM:["jssm|jssm_state"],JSX:["jsx"],Julia:["jl"],Kotlin:["kt|kts"],LaTeX:["tex|latex|ltx|bib"],LESS:["less"],Liquid:["liquid"],Lisp:["lisp"],LiveScript:["ls"],LogiQL:["logic|lql"],LSL:["lsl"],Lua:["lua"],LuaPage:["lp"],Lucene:["lucene"],Makefile:["^Makefile|^GNUmakefile|^makefile|^OCamlMakefile|make"],Markdown:["md|markdown"],Mask:["mask"],MATLAB:["matlab"],Maze:["mz"],MediaWiki:["wiki|mediawiki"],MEL:["mel"],MIXAL:["mixal"],MUSHCode:["mc|mush"],MySQL:["mysql"],Nginx:["nginx|conf"],Nim:["nim"],Nix:["nix"],NSIS:["nsi|nsh"],Nunjucks:["nunjucks|nunjs|nj|njk"],ObjectiveC:["m|mm"],OCaml:["ml|mli"],Pascal:["pas|p"],Perl:["pl|pm"],Perl6:["p6|pl6|pm6"],pgSQL:["pgsql"],PHP:["php|inc|phtml|shtml|php3|php4|php5|phps|phpt|aw|ctp|module"],PHP_Laravel_blade:["blade.php"],Pig:["pig"],Powershell:["ps1"],Praat:["praat|praatscript|psc|proc"],Prisma:["prisma"],Prolog:["plg|prolog"],Properties:["properties"],Protobuf:["proto"],Puppet:["epp|pp"],Python:["py"],QML:["qml"],R:["r"],Razor:["cshtml|asp"],RDoc:["Rd"],Red:["red|reds"],RHTML:["Rhtml"],RST:["rst"],Ruby:["rb|ru|gemspec|rake|^Guardfile|^Rakefile|^Gemfile"],Rust:["rs"],SASS:["sass"],SCAD:["scad"],Scala:["scala|sbt"],Scheme:["scm|sm|rkt|oak|scheme"],SCSS:["scss"],SH:["sh|bash|^.bashrc"],SJS:["sjs"],Slim:["slim|skim"],Smarty:["smarty|tpl"],snippets:["snippets"],Soy_Template:["soy"],Space:["space"],SQL:["sql"],SQLServer:["sqlserver"],Stylus:["styl|stylus"],SVG:["svg"],Swift:["swift"],Tcl:["tcl"],Terraform:["tf","tfvars","terragrunt"],Tex:["tex"],Text:["txt"],Textile:["textile"],Toml:["toml"],TSX:["tsx"],Twig:["latte|twig|swig"],Typescript:["ts|typescript|str"],Vala:["vala"],VBScript:["vbs|vb"],Velocity:["vm"],Verilog:["v|vh|sv|svh"],VHDL:["vhd|vhdl"],Visualforce:["vfp|component|page"],Wollok:["wlk|wpgm|wtest"],XML:["xml|rdf|rss|wsdl|xslt|atom|mathml|mml|xul|xbl|xaml"],XQuery:["xq"],YAML:["yaml|yml"],Zeek:["zeek|bro"],Django:["html"]},d={ObjectiveC:"Objective-C",CSharp:"C#",golang:"Go",C_Cpp:"C and C++",Csound_Document:"Csound Document",Csound_Orchestra:"Csound",Csound_Score:"Csound Score",coffee:"CoffeeScript",HTML_Ruby:"HTML (Ruby)",HTML_Elixir:"HTML (Elixir)",FTL:"FreeMarker",PHP_Laravel_blade:"PHP (Blade Template)",Perl6:"Perl 6",AutoHotKey:"AutoHotkey / AutoIt"},h={};for(var f in l){var p=l[f],y=(d[f]||f).replace(/_/g," "),w=f.toLowerCase(),_=new a(w,y,p[0]);h[w]=_,r.push(_)}n.exports={getModeForPath:function(e){for(var t=h.text,n=e.split(/[\/\\]/).pop(),a=0;a<r.length;a++)if(r[a].supportsFile(n)){t=r[a];break}return t},modes:r,modesByName:h}})),ace.require(["ace/ext/modelist"],(function(t){e&&(e.exports=t)}))}).call(this,n(68)(e))},function(e,t,n){(function(e){ace.define("ace/keyboard/vim",[],(function(e,t,n){"use strict";var r=e("../range").Range,a=e("../lib/event_emitter").EventEmitter,l=e("../lib/dom"),d=e("../lib/oop"),h=e("../lib/keys"),f=e("../lib/event"),p=e("../search").Search,y=e("../lib/useragent"),w=e("../search_highlight").SearchHighlight,_=e("../commands/multi_select_commands"),C=e("../mode/text").Mode.prototype.tokenRe;e("../multi_select");var S=function(e){this.ace=e,this.state={},this.marks={},this.$uid=0,this.onChange=this.onChange.bind(this),this.onSelectionChange=this.onSelectionChange.bind(this),this.onBeforeEndOperation=this.onBeforeEndOperation.bind(this),this.ace.on("change",this.onChange),this.ace.on("changeSelection",this.onSelectionChange),this.ace.on("beforeEndOperation",this.onBeforeEndOperation)};function k(e){return{row:e.line,column:e.ch}}function x(e){return new R(e.row,e.column)}S.Pos=function(e,t){if(!(this instanceof R))return new R(e,t);this.line=e,this.ch=t},S.defineOption=function(e,t,n){},S.commands={redo:function(e){e.ace.redo()},undo:function(e){e.ace.undo()},newlineAndIndent:function(e){e.ace.insert("\n")}},S.keyMap={},S.addClass=S.rmClass=function(){},S.e_stop=S.e_preventDefault=f.stopEvent,S.keyName=function(e){var t=h[e.keyCode]||e.key||"";return 1==t.length&&(t=t.toUpperCase()),t=f.getModifierString(e).replace(/(^|-)\w/g,(function(e){return e.toUpperCase()}))+t},S.keyMap.default=function(e){return function(t){var n=t.ace.commands.commandKeyBinding[e.toLowerCase()];return n&&!1!==t.ace.execCommand(n)}},S.lookupKey=function e(t,n,r){n||(n="default"),"string"==typeof n&&(n=S.keyMap[n]);var a="function"==typeof n?n(t):n[t];if(!1===a)return"nothing";if("..."===a)return"multi";if(null!=a&&r(a))return"handled";if(n.fallthrough){if(!Array.isArray(n.fallthrough))return e(t,n.fallthrough,r);for(var l=0;l<n.fallthrough.length;l++){var d=e(t,n.fallthrough[l],r);if(d)return d}}},S.signal=function(e,t,n){return e._signal(t,n)},S.on=f.addListener,S.off=f.removeListener,S.isWordChar=function(e){return e<""?/^\w$/.test(e):(C.lastIndex=0,C.test(e))},function(){d.implement(S.prototype,a),this.destroy=function(){this.ace.off("change",this.onChange),this.ace.off("changeSelection",this.onSelectionChange),this.ace.off("beforeEndOperation",this.onBeforeEndOperation),this.removeOverlay()},this.virtualSelectionMode=function(){return this.ace.inVirtualSelectionMode&&this.ace.selection.index},this.onChange=function(e){var t={text:"i"==e.action[0]?e.lines:[]},n=this.curOp=this.curOp||{};n.changeHandlers||(n.changeHandlers=this._eventRegistry.change&&this._eventRegistry.change.slice()),n.lastChange?n.lastChange.next=n.lastChange=t:n.lastChange=n.change=t,this.$updateMarkers(e)},this.onSelectionChange=function(){var e=this.curOp=this.curOp||{};e.cursorActivityHandlers||(e.cursorActivityHandlers=this._eventRegistry.cursorActivity&&this._eventRegistry.cursorActivity.slice()),this.curOp.cursorActivity=!0,this.ace.inMultiSelectMode&&this.ace.keyBinding.removeKeyboardHandler(_.keyboardHandler)},this.operation=function(e,t){if(!t&&this.curOp||t&&this.curOp&&this.curOp.force)return e();if(!t&&this.ace.curOp||this.curOp&&this.onBeforeEndOperation(),!this.ace.curOp){var n=this.ace.prevOp;this.ace.startOperation({command:{name:"vim",scrollIntoView:"cursor"}})}var r=this.curOp=this.curOp||{};this.curOp.force=t;var a=e();return this.ace.curOp&&"vim"==this.ace.curOp.command.name&&(this.state.dialog&&(this.ace.curOp.command.scrollIntoView=!1),this.ace.endOperation(),r.cursorActivity||r.lastChange||!n||(this.ace.prevOp=n)),!t&&this.ace.curOp||this.curOp&&this.onBeforeEndOperation(),a},this.onBeforeEndOperation=function(){var e=this.curOp;e&&(e.change&&this.signal("change",e.change,e),e&&e.cursorActivity&&this.signal("cursorActivity",null,e),this.curOp=null)},this.signal=function(e,t,n){var r=n?n[e+"Handlers"]:(this._eventRegistry||{})[e];if(r){r=r.slice();for(var a=0;a<r.length;a++)r[a](this,t)}},this.firstLine=function(){return 0},this.lastLine=function(){return this.ace.session.getLength()-1},this.lineCount=function(){return this.ace.session.getLength()},this.setCursor=function(e,t){"object"==typeof e&&(t=e.ch,e=e.line),this.ace.inVirtualSelectionMode||this.ace.exitMultiSelectMode(),this.ace.session.unfold({row:e,column:t}),this.ace.selection.moveTo(e,t)},this.getCursor=function(e){var t=this.ace.selection;return x("anchor"==e?t.isEmpty()?t.lead:t.anchor:"head"!=e&&e?t.getRange()[e]:t.lead)},this.listSelections=function(e){var t=this.ace.multiSelect.rangeList.ranges;return!t.length||this.ace.inVirtualSelectionMode?[{anchor:this.getCursor("anchor"),head:this.getCursor("head")}]:t.map((function(e){return{anchor:this.clipPos(x(e.cursor==e.end?e.start:e.end)),head:this.clipPos(x(e.cursor))}}),this)},this.setSelections=function(e,t){var n=this.ace.multiSelect,a=e.map((function(e){var t=k(e.anchor),n=k(e.head),a=r.comparePoints(t,n)<0?new r.fromPoints(t,n):new r.fromPoints(n,t);return a.cursor=r.comparePoints(a.start,n)?a.end:a.start,a}));if(this.ace.inVirtualSelectionMode)this.ace.selection.fromOrientedRange(a[0]);else{t?a[t]&&a.push(a.splice(t,1)[0]):a=a.reverse(),n.toSingleRange(a[0].clone());for(var l=this.ace.session,d=0;d<a.length;d++){var h=l.$clipRangeToDocument(a[d]);n.addRange(h)}}},this.setSelection=function(e,t,n){var r=this.ace.selection;r.moveTo(e.line,e.ch),r.selectTo(t.line,t.ch),n&&"*mouse"==n.origin&&this.onBeforeEndOperation()},this.somethingSelected=function(e){return!this.ace.selection.isEmpty()},this.clipPos=function(e){return x(this.ace.session.$clipPositionToDocument(e.line,e.ch))},this.markText=function(e){return{clear:function(){},find:function(){}}},this.$updateMarkers=function(e){var t="insert"==e.action,n=e.start,a=e.end,l=(a.row-n.row)*(t?1:-1),d=(a.column-n.column)*(t?1:-1);for(var h in t&&(a=n),this.marks){var f=this.marks[h],p=r.comparePoints(f,n);if(!(p<0)){if(0===p&&t){if(1!=f.bias){f.bias=-1;continue}p=1}var y=t?p:r.comparePoints(f,a);y>0?(f.row+=l,f.column+=f.row==a.row?d:0):!t&&y<=0&&(f.row=n.row,f.column=n.column,0===y&&(f.bias=1))}}};var e=function(e,t,n,r){this.cm=e,this.id=t,this.row=n,this.column=r,e.marks[this.id]=this};e.prototype.clear=function(){delete this.cm.marks[this.id]},e.prototype.find=function(){return x(this)},this.setBookmark=function(t,n){var r=new e(this,this.$uid++,t.line,t.ch);return n&&n.insertLeft||(r.$insertRight=!0),this.marks[r.id]=r,r},this.moveH=function(e,t){if("char"==t){var n=this.ace.selection;n.clearSelection(),n.moveCursorBy(0,e)}},this.findPosV=function(e,t,n,r){if("page"==n){var a=this.ace.renderer.layerConfig;t*=Math.floor(a.height/a.lineHeight),n="line"}if("line"==n){var l=this.ace.session.documentToScreenPosition(e.line,e.ch);return null!=r&&(l.column=r),l.row+=t,l.row=Math.min(Math.max(0,l.row),this.ace.session.getScreenLength()-1),x(this.ace.session.screenToDocumentPosition(l.row,l.column))}},this.charCoords=function(e,t){if("div"==t||!t)return{left:(r=this.ace.session.documentToScreenPosition(e.line,e.ch)).column,top:r.row};if("local"==t){var n=this.ace.renderer,r=this.ace.session.documentToScreenPosition(e.line,e.ch),a=n.layerConfig.lineHeight,l=n.layerConfig.characterWidth,d=a*r.row;return{left:r.column*l,top:d,bottom:d+a}}},this.coordsChar=function(e,t){var n=this.ace.renderer;if("local"==t){var r=Math.max(0,Math.floor(e.top/n.lineHeight)),a=Math.max(0,Math.floor(e.left/n.characterWidth));return x(n.session.screenToDocumentPosition(r,a))}if("div"==t)throw"not implemented"},this.getSearchCursor=function(e,t,n){var r=!1,a=!1;e instanceof RegExp&&!e.global&&(r=!e.ignoreCase,e=e.source,a=!0);var l=new p;null==t.ch&&(t.ch=Number.MAX_VALUE);var d={row:t.line,column:t.ch},h=this,f=null;return{findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(t){l.setOptions({needle:e,caseSensitive:r,wrap:!1,backwards:t,regExp:a,start:f||d});var n=l.find(h.ace.session);return n&&n.isEmpty()&&h.getLine(n.start.row).length==n.start.column&&(l.$options.start=n,n=l.find(h.ace.session)),f=n},from:function(){return f&&x(f.start)},to:function(){return f&&x(f.end)},replace:function(e){f&&(f.end=h.ace.session.doc.replace(f,e))}}},this.scrollTo=function(e,t){var n=this.ace.renderer,r=n.layerConfig,a=r.maxHeight;a-=(n.$size.scrollerHeight-n.lineHeight)*n.$scrollPastEnd,null!=t&&this.ace.session.setScrollTop(Math.max(0,Math.min(t,a))),null!=e&&this.ace.session.setScrollLeft(Math.max(0,Math.min(e,r.width)))},this.scrollInfo=function(){return 0},this.scrollIntoView=function(e,t){if(e){var n=this.ace.renderer,r={top:0,bottom:t};n.scrollCursorIntoView(k(e),2*n.lineHeight/n.$size.scrollerHeight,r)}},this.getLine=function(e){return this.ace.session.getLine(e)},this.getRange=function(e,t){return this.ace.session.getTextRange(new r(e.line,e.ch,t.line,t.ch))},this.replaceRange=function(e,t,n){return n||(n=t),this.ace.session.replace(new r(t.line,t.ch,n.line,n.ch),e)},this.replaceSelection=this.replaceSelections=function(e){var t=this.ace.selection;if(this.ace.inVirtualSelectionMode)this.ace.session.replace(t.getRange(),e[0]||"");else{t.inVirtualSelectionMode=!0;var n=t.rangeList.ranges;n.length||(n=[this.ace.multiSelect.getRange()]);for(var r=n.length;r--;)this.ace.session.replace(n[r],e[r]||"");t.inVirtualSelectionMode=!1}},this.getSelection=function(){return this.ace.getSelectedText()},this.getSelections=function(){return this.listSelections().map((function(e){return this.getRange(e.anchor,e.head)}),this)},this.getInputField=function(){return this.ace.textInput.getElement()},this.getWrapperElement=function(){return this.ace.container};var t={indentWithTabs:"useSoftTabs",indentUnit:"tabSize",tabSize:"tabSize",firstLineNumber:"firstLineNumber",readOnly:"readOnly"};this.setOption=function(e,n){switch(this.state[e]=n,e){case"indentWithTabs":e=t[e],n=!n;break;case"keyMap":return void(this.state.$keyMap=n);default:e=t[e]}e&&this.ace.setOption(e,n)},this.getOption=function(e,n){var r=t[e];switch(r&&(n=this.ace.getOption(r)),e){case"indentWithTabs":return e=t[e],!n;case"keyMap":return this.state.$keyMap}return r?n:this.state[e]},this.toggleOverwrite=function(e){return this.state.overwrite=e,this.ace.setOverwrite(e)},this.addOverlay=function(e){if(!this.$searchHighlight||!this.$searchHighlight.session){var t=new w(null,"ace_highlight-marker","text"),n=this.ace.session.addDynamicMarker(t);t.id=n.id,t.session=this.ace.session,t.destroy=function(e){t.session.off("change",t.updateOnChange),t.session.off("changeEditor",t.destroy),t.session.removeMarker(t.id),t.session=null},t.updateOnChange=function(e){var n=e.start.row;n==e.end.row?t.cache[n]=void 0:t.cache.splice(n,t.cache.length)},t.session.on("changeEditor",t.destroy),t.session.on("change",t.updateOnChange)}var r=new RegExp(e.query.source,"gmi");this.$searchHighlight=e.highlight=t,this.$searchHighlight.setRegexp(r),this.ace.renderer.updateBackMarkers()},this.removeOverlay=function(e){this.$searchHighlight&&this.$searchHighlight.session&&this.$searchHighlight.destroy()},this.getScrollInfo=function(){var e=this.ace.renderer,t=e.layerConfig;return{left:e.scrollLeft,top:e.scrollTop,height:t.maxHeight,width:t.width,clientHeight:t.height,clientWidth:t.width}},this.getValue=function(){return this.ace.getValue()},this.setValue=function(e){return this.ace.setValue(e,-1)},this.getTokenTypeAt=function(e){var t=this.ace.session.getTokenAt(e.line,e.ch);return t&&/comment|string/.test(t.type)?"string":""},this.findMatchingBracket=function(e){var t=this.ace.session.findMatchingBracket(k(e));return{to:t&&x(t)}},this.indentLine=function(e,t){!0===t?this.ace.session.indentRows(e,e,"\t"):!1===t&&this.ace.session.outdentRows(new r(e,0,e,0))},this.indexFromPos=function(e){return this.ace.session.doc.positionToIndex(k(e))},this.posFromIndex=function(e){return x(this.ace.session.doc.indexToPosition(e))},this.focus=function(e){return this.ace.textInput.focus()},this.blur=function(e){return this.ace.blur()},this.defaultTextHeight=function(e){return this.ace.renderer.layerConfig.lineHeight},this.scanForBracket=function(e,t,n,r){var a=r.bracketRegex.source,l=/paren|text|operator|tag/;if(1==t)var d=this.ace.session.$findClosingBracket(a.slice(1,2),k(e),l);else d=this.ace.session.$findOpeningBracket(a.slice(-2,-1),{row:e.line,column:e.ch+1},l);return d&&{pos:x(d)}},this.refresh=function(){return this.ace.resize(!0)},this.getMode=function(){return{name:this.getOption("mode")}},this.execCommand=function(e){"indentAuto"==e?this.ace.execCommand("autoindent"):console.log(e+" is not implemented")}}.call(S.prototype),(S.StringStream=function(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0}).prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(e){var t=this.string.charAt(this.pos);if("string"==typeof e)var n=t==e;else n=t&&(e.test?e.test(t):e(t));if(n)return++this.pos,t},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},backUp:function(e){this.pos-=e},column:function(){throw"not implemented"},indentation:function(){throw"not implemented"},match:function(e,t,n){if("string"!=typeof e){var r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&!1!==t&&(this.pos+=r[0].length),r)}var a=function(e){return n?e.toLowerCase():e};if(a(this.string.substr(this.pos,e.length))==a(e))return!1!==t&&(this.pos+=e.length),!0},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}}},S.defineExtension=function(e,t){S.prototype[e]=t},l.importCssString(".normal-mode .ace_cursor{    border: none;    background-color: rgba(255,0,0,0.5);}.normal-mode .ace_hidden-cursors .ace_cursor{  background-color: transparent;  border: 1px solid red;  opacity: 0.7}.ace_dialog {  position: absolute;  left: 0; right: 0;  background: inherit;  z-index: 15;  padding: .1em .8em;  overflow: hidden;  color: inherit;}.ace_dialog-top {  border-bottom: 1px solid #444;  top: 0;}.ace_dialog-bottom {  border-top: 1px solid #444;  bottom: 0;}.ace_dialog input {  border: none;  outline: none;  background: transparent;  width: 20em;  color: inherit;  font-family: monospace;}","vimMode"),function(){function e(e,t,n){var r;return(r=e.ace.container.appendChild(document.createElement("div"))).className=n?"ace_dialog ace_dialog-bottom":"ace_dialog ace_dialog-top","string"==typeof t?r.innerHTML=t:r.appendChild(t),r}function t(e,t){e.state.currentNotificationClose&&e.state.currentNotificationClose(),e.state.currentNotificationClose=t}S.defineExtension("openDialog",(function(n,r,a){if(!this.virtualSelectionMode()){a||(a={}),t(this,null);var l=e(this,n,a.bottom),d=!1,h=this;this.state.dialog=l;var f,p=l.getElementsByTagName("input")[0];return p?(a.value&&(p.value=a.value,!1!==a.selectValueOnOpen&&p.select()),a.onInput&&S.on(p,"input",(function(e){a.onInput(e,p.value,y)})),a.onKeyUp&&S.on(p,"keyup",(function(e){a.onKeyUp(e,p.value,y)})),S.on(p,"keydown",(function(e){a&&a.onKeyDown&&a.onKeyDown(e,p.value,y)||(13==e.keyCode&&r(p.value),(27==e.keyCode||!1!==a.closeOnEnter&&13==e.keyCode)&&(p.blur(),S.e_stop(e),y()))})),!1!==a.closeOnBlur&&S.on(p,"blur",y),p.focus()):(f=l.getElementsByTagName("button")[0])&&(S.on(f,"click",(function(){y(),h.focus()})),!1!==a.closeOnBlur&&S.on(f,"blur",y),f.focus()),y}function y(e){if("string"==typeof e)p.value=e;else{if(d)return;if(e&&"blur"==e.type&&document.activeElement===p)return;h.state.dialog=null,d=!0,l.parentNode.removeChild(l),h.focus(),a.onClose&&a.onClose(l)}}})),S.defineExtension("openNotification",(function(n,r){if(!this.virtualSelectionMode()){t(this,f);var a,l=e(this,n,r&&r.bottom),d=!1,h=r&&void 0!==r.duration?r.duration:5e3;return S.on(l,"click",(function(e){S.e_preventDefault(e),f()})),h&&(a=setTimeout(f,h)),f}function f(){d||(d=!0,clearTimeout(a),l.parentNode.removeChild(l))}}))}();var E=[{keys:"<Left>",type:"keyToKey",toKeys:"h"},{keys:"<Right>",type:"keyToKey",toKeys:"l"},{keys:"<Up>",type:"keyToKey",toKeys:"k"},{keys:"<Down>",type:"keyToKey",toKeys:"j"},{keys:"<Space>",type:"keyToKey",toKeys:"l"},{keys:"<BS>",type:"keyToKey",toKeys:"h",context:"normal"},{keys:"<Del>",type:"keyToKey",toKeys:"x",context:"normal"},{keys:"<C-Space>",type:"keyToKey",toKeys:"W"},{keys:"<C-BS>",type:"keyToKey",toKeys:"B",context:"normal"},{keys:"<S-Space>",type:"keyToKey",toKeys:"w"},{keys:"<S-BS>",type:"keyToKey",toKeys:"b",context:"normal"},{keys:"<C-n>",type:"keyToKey",toKeys:"j"},{keys:"<C-p>",type:"keyToKey",toKeys:"k"},{keys:"<C-[>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-c>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-[>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"<C-c>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"<C-Esc>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-Esc>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"s",type:"keyToKey",toKeys:"cl",context:"normal"},{keys:"s",type:"keyToKey",toKeys:"c",context:"visual"},{keys:"S",type:"keyToKey",toKeys:"cc",context:"normal"},{keys:"S",type:"keyToKey",toKeys:"VdO",context:"visual"},{keys:"<Home>",type:"keyToKey",toKeys:"0"},{keys:"<End>",type:"keyToKey",toKeys:"$"},{keys:"<PageUp>",type:"keyToKey",toKeys:"<C-b>"},{keys:"<PageDown>",type:"keyToKey",toKeys:"<C-f>"},{keys:"<CR>",type:"keyToKey",toKeys:"j^",context:"normal"},{keys:"<Ins>",type:"action",action:"toggleOverwrite",context:"insert"},{keys:"H",type:"motion",motion:"moveToTopLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"M",type:"motion",motion:"moveToMiddleLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"L",type:"motion",motion:"moveToBottomLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"h",type:"motion",motion:"moveByCharacters",motionArgs:{forward:!1}},{keys:"l",type:"motion",motion:"moveByCharacters",motionArgs:{forward:!0}},{keys:"j",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,linewise:!0}},{keys:"k",type:"motion",motion:"moveByLines",motionArgs:{forward:!1,linewise:!0}},{keys:"gj",type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!0}},{keys:"gk",type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!1}},{keys:"w",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1}},{keys:"W",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1,bigWord:!0}},{keys:"e",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,inclusive:!0}},{keys:"E",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:"b",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1}},{keys:"B",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1,bigWord:!0}},{keys:"ge",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,inclusive:!0}},{keys:"gE",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:"{",type:"motion",motion:"moveByParagraph",motionArgs:{forward:!1,toJumplist:!0}},{keys:"}",type:"motion",motion:"moveByParagraph",motionArgs:{forward:!0,toJumplist:!0}},{keys:"(",type:"motion",motion:"moveBySentence",motionArgs:{forward:!1}},{keys:")",type:"motion",motion:"moveBySentence",motionArgs:{forward:!0}},{keys:"<C-f>",type:"motion",motion:"moveByPage",motionArgs:{forward:!0}},{keys:"<C-b>",type:"motion",motion:"moveByPage",motionArgs:{forward:!1}},{keys:"<C-d>",type:"motion",motion:"moveByScroll",motionArgs:{forward:!0,explicitRepeat:!0}},{keys:"<C-u>",type:"motion",motion:"moveByScroll",motionArgs:{forward:!1,explicitRepeat:!0}},{keys:"gg",type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:"G",type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!0,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:"0",type:"motion",motion:"moveToStartOfLine"},{keys:"^",type:"motion",motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"+",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0}},{keys:"-",type:"motion",motion:"moveByLines",motionArgs:{forward:!1,toFirstChar:!0}},{keys:"_",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0,repeatOffset:-1}},{keys:"$",type:"motion",motion:"moveToEol",motionArgs:{inclusive:!0}},{keys:"%",type:"motion",motion:"moveToMatchedSymbol",motionArgs:{inclusive:!0,toJumplist:!0}},{keys:"f<character>",type:"motion",motion:"moveToCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:"F<character>",type:"motion",motion:"moveToCharacter",motionArgs:{forward:!1}},{keys:"t<character>",type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:"T<character>",type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!1}},{keys:";",type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!0}},{keys:",",type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!1}},{keys:"'<character>",type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0,linewise:!0}},{keys:"`<character>",type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0}},{keys:"]`",type:"motion",motion:"jumpToMark",motionArgs:{forward:!0}},{keys:"[`",type:"motion",motion:"jumpToMark",motionArgs:{forward:!1}},{keys:"]'",type:"motion",motion:"jumpToMark",motionArgs:{forward:!0,linewise:!0}},{keys:"['",type:"motion",motion:"jumpToMark",motionArgs:{forward:!1,linewise:!0}},{keys:"]p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0,matchIndent:!0}},{keys:"[p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0,matchIndent:!0}},{keys:"]<character>",type:"motion",motion:"moveToSymbol",motionArgs:{forward:!0,toJumplist:!0}},{keys:"[<character>",type:"motion",motion:"moveToSymbol",motionArgs:{forward:!1,toJumplist:!0}},{keys:"|",type:"motion",motion:"moveToColumn"},{keys:"o",type:"motion",motion:"moveToOtherHighlightedEnd",context:"visual"},{keys:"O",type:"motion",motion:"moveToOtherHighlightedEnd",motionArgs:{sameLine:!0},context:"visual"},{keys:"d",type:"operator",operator:"delete"},{keys:"y",type:"operator",operator:"yank"},{keys:"c",type:"operator",operator:"change"},{keys:"=",type:"operator",operator:"indentAuto"},{keys:">",type:"operator",operator:"indent",operatorArgs:{indentRight:!0}},{keys:"<",type:"operator",operator:"indent",operatorArgs:{indentRight:!1}},{keys:"g~",type:"operator",operator:"changeCase"},{keys:"gu",type:"operator",operator:"changeCase",operatorArgs:{toLower:!0},isEdit:!0},{keys:"gU",type:"operator",operator:"changeCase",operatorArgs:{toLower:!1},isEdit:!0},{keys:"n",type:"motion",motion:"findNext",motionArgs:{forward:!0,toJumplist:!0}},{keys:"N",type:"motion",motion:"findNext",motionArgs:{forward:!1,toJumplist:!0}},{keys:"x",type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!0},operatorMotionArgs:{visualLine:!1}},{keys:"X",type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!1},operatorMotionArgs:{visualLine:!0}},{keys:"D",type:"operatorMotion",operator:"delete",motion:"moveToEol",motionArgs:{inclusive:!0},context:"normal"},{keys:"D",type:"operator",operator:"delete",operatorArgs:{linewise:!0},context:"visual"},{keys:"Y",type:"operatorMotion",operator:"yank",motion:"expandToLine",motionArgs:{linewise:!0},context:"normal"},{keys:"Y",type:"operator",operator:"yank",operatorArgs:{linewise:!0},context:"visual"},{keys:"C",type:"operatorMotion",operator:"change",motion:"moveToEol",motionArgs:{inclusive:!0},context:"normal"},{keys:"C",type:"operator",operator:"change",operatorArgs:{linewise:!0},context:"visual"},{keys:"~",type:"operatorMotion",operator:"changeCase",motion:"moveByCharacters",motionArgs:{forward:!0},operatorArgs:{shouldMoveCursor:!0},context:"normal"},{keys:"~",type:"operator",operator:"changeCase",context:"visual"},{keys:"<C-w>",type:"operatorMotion",operator:"delete",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1},context:"insert"},{keys:"<C-w>",type:"idle",context:"normal"},{keys:"<C-i>",type:"action",action:"jumpListWalk",actionArgs:{forward:!0}},{keys:"<C-o>",type:"action",action:"jumpListWalk",actionArgs:{forward:!1}},{keys:"<C-e>",type:"action",action:"scroll",actionArgs:{forward:!0,linewise:!0}},{keys:"<C-y>",type:"action",action:"scroll",actionArgs:{forward:!1,linewise:!0}},{keys:"a",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"charAfter"},context:"normal"},{keys:"A",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"eol"},context:"normal"},{keys:"A",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"endOfSelectedArea"},context:"visual"},{keys:"i",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"inplace"},context:"normal"},{keys:"gi",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"lastEdit"},context:"normal"},{keys:"I",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"firstNonBlank"},context:"normal"},{keys:"gI",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"bol"},context:"normal"},{keys:"I",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"startOfSelectedArea"},context:"visual"},{keys:"o",type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!0},context:"normal"},{keys:"O",type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!1},context:"normal"},{keys:"v",type:"action",action:"toggleVisualMode"},{keys:"V",type:"action",action:"toggleVisualMode",actionArgs:{linewise:!0}},{keys:"<C-v>",type:"action",action:"toggleVisualMode",actionArgs:{blockwise:!0}},{keys:"<C-q>",type:"action",action:"toggleVisualMode",actionArgs:{blockwise:!0}},{keys:"gv",type:"action",action:"reselectLastSelection"},{keys:"J",type:"action",action:"joinLines",isEdit:!0},{keys:"gJ",type:"action",action:"joinLines",actionArgs:{keepSpaces:!0},isEdit:!0},{keys:"p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0}},{keys:"P",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0}},{keys:"r<character>",type:"action",action:"replace",isEdit:!0},{keys:"@<character>",type:"action",action:"replayMacro"},{keys:"q<character>",type:"action",action:"enterMacroRecordMode"},{keys:"R",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{replace:!0},context:"normal"},{keys:"R",type:"operator",operator:"change",operatorArgs:{linewise:!0,fullLine:!0},context:"visual",exitVisualBlock:!0},{keys:"u",type:"action",action:"undo",context:"normal"},{keys:"u",type:"operator",operator:"changeCase",operatorArgs:{toLower:!0},context:"visual",isEdit:!0},{keys:"U",type:"operator",operator:"changeCase",operatorArgs:{toLower:!1},context:"visual",isEdit:!0},{keys:"<C-r>",type:"action",action:"redo"},{keys:"m<character>",type:"action",action:"setMark"},{keys:'"<character>',type:"action",action:"setRegister"},{keys:"zz",type:"action",action:"scrollToCursor",actionArgs:{position:"center"}},{keys:"z.",type:"action",action:"scrollToCursor",actionArgs:{position:"center"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"zt",type:"action",action:"scrollToCursor",actionArgs:{position:"top"}},{keys:"z<CR>",type:"action",action:"scrollToCursor",actionArgs:{position:"top"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"z-",type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"}},{keys:"zb",type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:".",type:"action",action:"repeatLastEdit"},{keys:"<C-a>",type:"action",action:"incrementNumberToken",isEdit:!0,actionArgs:{increase:!0,backtrack:!1}},{keys:"<C-x>",type:"action",action:"incrementNumberToken",isEdit:!0,actionArgs:{increase:!1,backtrack:!1}},{keys:"<C-t>",type:"action",action:"indent",actionArgs:{indentRight:!0},context:"insert"},{keys:"<C-d>",type:"action",action:"indent",actionArgs:{indentRight:!1},context:"insert"},{keys:"a<character>",type:"motion",motion:"textObjectManipulation"},{keys:"i<character>",type:"motion",motion:"textObjectManipulation",motionArgs:{textObjectInner:!0}},{keys:"/",type:"search",searchArgs:{forward:!0,querySrc:"prompt",toJumplist:!0}},{keys:"?",type:"search",searchArgs:{forward:!1,querySrc:"prompt",toJumplist:!0}},{keys:"*",type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",wholeWordOnly:!0,toJumplist:!0}},{keys:"#",type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor",wholeWordOnly:!0,toJumplist:!0}},{keys:"g*",type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:"g#",type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:":",type:"ex"}],A=E.length,T=[{name:"colorscheme",shortName:"colo"},{name:"map"},{name:"imap",shortName:"im"},{name:"nmap",shortName:"nm"},{name:"vmap",shortName:"vm"},{name:"unmap"},{name:"write",shortName:"w"},{name:"undo",shortName:"u"},{name:"redo",shortName:"red"},{name:"set",shortName:"se"},{name:"set",shortName:"se"},{name:"setlocal",shortName:"setl"},{name:"setglobal",shortName:"setg"},{name:"sort",shortName:"sor"},{name:"substitute",shortName:"s",possiblyAsync:!0},{name:"nohlsearch",shortName:"noh"},{name:"yank",shortName:"y"},{name:"delmarks",shortName:"delm"},{name:"registers",shortName:"reg",excludeFromCommandHistory:!0},{name:"global",shortName:"g"}],R=S.Pos,O=function(){return de};function M(e,t){this==S.keyMap.vim&&S.rmClass(e.getWrapperElement(),"cm-fat-cursor"),t&&t.attach==P||function(e){e.setOption("disableInput",!1),e.off("cursorActivity",kt),S.off(e.getInputField(),"paste",F(e)),e.state.vim=null}(e)}function P(e,t){this==S.keyMap.vim&&S.addClass(e.getWrapperElement(),"cm-fat-cursor"),t&&t.attach==P||function(e){e.setOption("disableInput",!0),e.setOption("showCursorWhenSelecting",!1),S.signal(e,"vim-mode-change",{mode:"normal"}),e.on("cursorActivity",kt),ce(e),S.on(e.getInputField(),"paste",F(e))}(e)}function L(e,t){if(t){if(this[e])return this[e];var n=function(e){if("'"==e.charAt(0))return e.charAt(1);var t=e.split(/-(?!$)/),n=t[t.length-1];if(1==t.length&&1==t[0].length)return!1;if(2==t.length&&"Shift"==t[0]&&1==n.length)return!1;for(var r=!1,a=0;a<t.length;a++){var l=t[a];l in D?t[a]=D[l]:r=!0,l in I&&(t[a]=I[l])}if(!r)return!1;Y(n)&&(t[t.length-1]=n.toLowerCase());return"<"+t.join("-")+">"}(e);if(!n)return!1;var r=S.Vim.findKey(t,n);return"function"==typeof r&&S.signal(t,"vim-keypress",n),r}}S.defineOption("vimMode",!1,(function(e,t,n){t&&"vim"!=e.getOption("keyMap")?e.setOption("keyMap","vim"):!t&&n!=S.Init&&/^vim/.test(e.getOption("keyMap"))&&e.setOption("keyMap","default")}));var D={Shift:"S",Ctrl:"C",Alt:"A",Cmd:"D",Mod:"A"},I={Enter:"CR",Backspace:"BS",Delete:"Del",Insert:"Ins"};function F(e){var t=e.state.vim;return t.onPasteFn||(t.onPasteFn=function(){t.insertMode||(e.setCursor(ke(e.getCursor(),0,1)),_e.enterInsertMode(e,{},t))}),t.onPasteFn}var j=/[\d]/,N=[S.isWordChar,function(e){return e&&!S.isWordChar(e)&&!/\s/.test(e)}],B=[function(e){return/\S/.test(e)}];function z(e,t){for(var n=[],r=e;r<e+t;r++)n.push(String.fromCharCode(r));return n}var H=z(65,26),U=z(97,26),W=z(48,10),V=[].concat(H,U,W,["<",">"]),q=[].concat(H,U,W,["-",'"',".",":","/"]);function G(e,t){return t>=e.firstLine()&&t<=e.lastLine()}function K(e){return/^[a-z]$/.test(e)}function Y(e){return/^[A-Z]$/.test(e)}function X(e){return/^\s*$/.test(e)}function J(e){return-1!=".?!".indexOf(e)}function Q(e,t){for(var n=0;n<t.length;n++)if(t[n]==e)return!0;return!1}var Z={};function ee(e,t,n,r,a){if(void 0===t&&!a)throw Error("defaultValue is required unless callback is provided");if(n||(n="string"),Z[e]={type:n,defaultValue:t,callback:a},r)for(var l=0;l<r.length;l++)Z[r[l]]=Z[e];t&&te(e,t)}function te(e,t,n,r){var a=Z[e],l=(r=r||{}).scope;if(!a)return new Error("Unknown option: "+e);if("boolean"==a.type){if(t&&!0!==t)return new Error("Invalid argument: "+e+"="+t);!1!==t&&(t=!0)}a.callback?("local"!==l&&a.callback(t,void 0),"global"!==l&&n&&a.callback(t,n)):("local"!==l&&(a.value="boolean"==a.type?!!t:t),"global"!==l&&n&&(n.state.vim.options[e]={value:t}))}function ne(e,t,n){var r=Z[e],a=(n=n||{}).scope;if(!r)return new Error("Unknown option: "+e);if(r.callback){var l=t&&r.callback(void 0,t);return"global"!==a&&void 0!==l?l:"local"!==a?r.callback():void 0}return((l="global"!==a&&t&&t.state.vim.options[e])||"local"!==a&&r||{}).value}ee("filetype",void 0,"string",["ft"],(function(e,t){if(void 0!==t){if(void 0===e)return"null"==(n=t.getOption("mode"))?"":n;var n=""==e?"null":e;t.setOption("mode",n)}}));var re,oe,ae=function(){var e=-1,t=0,n=0,r=new Array(100);function a(a,l){(e+=l)>t?e=t:e<n&&(e=n);var d=r[(100+e)%100];if(d&&!d.find()){var h,f=l>0?1:-1,p=a.getCursor();do{if((d=r[(100+(e+=f))%100])&&(h=d.find())&&!Te(p,h))break}while(e<t&&e>n)}return d}return{cachedCursor:void 0,add:function(a,l,d){var h=r[e%100];function f(t){var n=++e%100,l=r[n];l&&l.clear(),r[n]=a.setBookmark(t)}if(h){var p=h.find();p&&!Te(p,l)&&f(l)}else f(l);f(d),t=e,(n=e-100+1)<0&&(n=0)},find:function(t,n){var r=e,l=a(t,n);return e=r,l&&l.find()},move:a}},se=function(e){return e?{changes:e.changes,expectCursorActivityForChange:e.expectCursorActivityForChange}:{changes:[],expectCursorActivityForChange:!1}};function le(){this.latestRegister=void 0,this.isPlaying=!1,this.isRecording=!1,this.replaySearchQueries=[],this.onRecordingDone=void 0,this.lastInsertModeChanges=se()}function ce(e){return e.state.vim||(e.state.vim={inputState:new he,lastEditInputState:void 0,lastEditActionCommand:void 0,lastHPos:-1,lastHSPos:-1,lastMotion:null,marks:{},fakeCursor:null,insertMode:!1,insertModeRepeat:void 0,visualMode:!1,visualLine:!1,visualBlock:!1,lastSelection:null,lastPastedText:null,sel:{},options:{}}),e.state.vim}function ue(){for(var e in re={searchQuery:null,searchIsReversed:!1,lastSubstituteReplacePart:void 0,jumpList:ae(),macroModeState:new le,lastCharacterSearch:{increment:0,forward:!0,selectedCharacter:""},registerController:new ge({}),searchHistoryController:new me,exCommandHistoryController:new me},Z){var t=Z[e];t.value=t.defaultValue}}le.prototype={exitMacroRecordMode:function(){var e=re.macroModeState;e.onRecordingDone&&e.onRecordingDone(),e.onRecordingDone=void 0,e.isRecording=!1},enterMacroRecordMode:function(e,t){var n=re.registerController.getRegister(t);n&&(n.clear(),this.latestRegister=t,e.openDialog&&(this.onRecordingDone=e.openDialog("(recording)["+t+"]",null,{bottom:!0})),this.isRecording=!0)}};var de={buildKeyMap:function(){},getRegisterController:function(){return re.registerController},resetVimGlobalState_:ue,getVimGlobalState_:function(){return re},maybeInitVimState_:ce,suppressErrorLogging:!1,InsertModeKey:At,map:function(e,t,n){bt.map(e,t,n)},unmap:function(e,t){bt.unmap(e,t)},noremap:function(e,t,n){function r(e){return e?[e]:["normal","insert","visual"]}for(var a=r(n),l=E.length,d=l-A;d<l&&a.length;d++){var h=E[d];if(!(h.keys!=t||n&&h.context&&h.context!==n||"ex"===h.type.substr(0,2)||"key"===h.type.substr(0,3))){var f={};for(var p in h)f[p]=h[p];f.keys=e,n&&!f.context&&(f.context=n),this._mapCommand(f);var y=r(h.context);a=a.filter((function(e){return-1===y.indexOf(e)}))}}},mapclear:function(e){var t=E.length,n=A,r=E.slice(0,t-n);if(E=E.slice(t-n),e)for(var a=r.length-1;a>=0;a--){var l=r[a];if(e!==l.context)if(l.context)this._mapCommand(l);else{var d=["normal","insert","visual"];for(var h in d)if(d[h]!==e){var f={};for(var p in l)f[p]=l[p];f.context=d[h],this._mapCommand(f)}}}},setOption:te,getOption:ne,defineOption:ee,defineEx:function(e,t,n){if(t){if(0!==e.indexOf(t))throw new Error('(Vim.defineEx) "'+t+'" is not a prefix of "'+e+'", command not registered')}else t=e;yt[e]=n,bt.commandMap_[t]={name:e,shortName:t,type:"api"}},handleKey:function(e,t,n){var r=this.findKey(e,t,n);if("function"==typeof r)return r()},findKey:function(e,t,n){var r,a=ce(e);function l(){var r=re.macroModeState;if(r.isRecording){if("q"==t)return r.exitMacroRecordMode(),fe(e),!0;"mapping"!=n&&function(e,t){if(e.isPlaying)return;var n=e.latestRegister,r=re.registerController.getRegister(n);r&&r.pushText(t)}(r,t)}}function d(){if("<Esc>"==t)return fe(e),a.visualMode?ze(e):a.insertMode&&wt(e),!0}return!1===(r=a.insertMode?function(){if(d())return!0;for(var n=a.inputState.keyBuffer=a.inputState.keyBuffer+t,r=1==t.length,l=ve.matchCommand(n,E,a.inputState,"insert");n.length>1&&"full"!=l.type;){n=a.inputState.keyBuffer=n.slice(1);var h=ve.matchCommand(n,E,a.inputState,"insert");"none"!=h.type&&(l=h)}if("none"==l.type)return fe(e),!1;if("partial"==l.type)return oe&&window.clearTimeout(oe),oe=window.setTimeout((function(){a.insertMode&&a.inputState.keyBuffer&&fe(e)}),ne("insertModeEscKeysTimeout")),!r;if(oe&&window.clearTimeout(oe),r){for(var f=e.listSelections(),p=0;p<f.length;p++){var y=f[p].head;e.replaceRange("",ke(y,0,-(n.length-1)),y,"+input")}re.macroModeState.lastInsertModeChanges.changes.pop()}return fe(e),l.command}():function(){if(l()||d())return!0;var n=a.inputState.keyBuffer=a.inputState.keyBuffer+t;if(/^[1-9]\d*$/.test(n))return!0;if(!(r=/^(\d*)(.*)$/.exec(n)))return fe(e),!1;var r,h=a.visualMode?"visual":"normal",f=ve.matchCommand(r[2]||r[1],E,a.inputState,h);return"none"==f.type?(fe(e),!1):"partial"==f.type||(a.inputState.keyBuffer="",(r=/^(\d*)(.*)$/.exec(n))[1]&&"0"!=r[1]&&a.inputState.pushRepeatDigit(r[1]),f.command)}())?void 0:!0===r?function(){return!0}:function(){if(!r.operator&&!r.isEdit||!e.getOption("readOnly"))return e.operation((function(){e.curOp.isVimOp=!0;try{"keyToKey"==r.type?function(n){for(var r;n;)r=/<\w+-.+?>|<\w+>|./.exec(n),t=r[0],n=n.substring(r.index+t.length),S.Vim.handleKey(e,t,"mapping")}(r.toKeys):ve.processCommand(e,a,r)}catch(t){throw e.state.vim=void 0,ce(e),S.Vim.suppressErrorLogging||console.log(t),t}return!0}))}},handleEx:function(e,t){bt.processCommand(e,t)},defineMotion:function(e,t){ye[e]=t},defineAction:function(e,t){_e[e]=t},defineOperator:function(e,t){we[e]=t},mapCommand:function(e,t,n,r,a){var l={keys:e,type:t};for(var d in l[t]=n,l[t+"Args"]=r,a)l[d]=a[d];_t(l)},_mapCommand:_t,defineRegister:function(e,t){var n=re.registerController.registers;if(!e||1!=e.length)throw Error("Register name must be 1 character");n[e]=t,q.push(e)},exitVisualMode:ze,exitInsertMode:wt};function he(){this.prefixRepeat=[],this.motionRepeat=[],this.operator=null,this.operatorArgs=null,this.motion=null,this.motionArgs=null,this.keyBuffer=[],this.registerName=null}function fe(e,t){e.state.vim.inputState=new he,S.signal(e,"vim-command-done",t)}function pe(e,t,n){this.clear(),this.keyBuffer=[e||""],this.insertModeChanges=[],this.searchQueries=[],this.linewise=!!t,this.blockwise=!!n}function ge(e){this.registers=e,this.unnamedRegister=e['"']=new pe,e["."]=new pe,e[":"]=new pe,e["/"]=new pe}function me(){this.historyBuffer=[],this.iterator=0,this.initialPrefix=null}he.prototype.pushRepeatDigit=function(e){this.operator?this.motionRepeat=this.motionRepeat.concat(e):this.prefixRepeat=this.prefixRepeat.concat(e)},he.prototype.getRepeat=function(){var e=0;return(this.prefixRepeat.length>0||this.motionRepeat.length>0)&&(e=1,this.prefixRepeat.length>0&&(e*=parseInt(this.prefixRepeat.join(""),10)),this.motionRepeat.length>0&&(e*=parseInt(this.motionRepeat.join(""),10))),e},pe.prototype={setText:function(e,t,n){this.keyBuffer=[e||""],this.linewise=!!t,this.blockwise=!!n},pushText:function(e,t){t&&(this.linewise||this.keyBuffer.push("\n"),this.linewise=!0),this.keyBuffer.push(e)},pushInsertModeChanges:function(e){this.insertModeChanges.push(se(e))},pushSearchQuery:function(e){this.searchQueries.push(e)},clear:function(){this.keyBuffer=[],this.insertModeChanges=[],this.searchQueries=[],this.linewise=!1},toString:function(){return this.keyBuffer.join("")}},ge.prototype={pushText:function(e,t,n,r,a){r&&"\n"!==n.charAt(n.length-1)&&(n+="\n");var l=this.isValidRegister(e)?this.getRegister(e):null;if(l){Y(e)?l.pushText(n,r):l.setText(n,r,a),this.unnamedRegister.setText(l.toString(),r)}else{switch(t){case"yank":this.registers[0]=new pe(n,r,a);break;case"delete":case"change":-1==n.indexOf("\n")?this.registers["-"]=new pe(n,r):(this.shiftNumericRegisters_(),this.registers[1]=new pe(n,r))}this.unnamedRegister.setText(n,r,a)}},getRegister:function(e){return this.isValidRegister(e)?(e=e.toLowerCase(),this.registers[e]||(this.registers[e]=new pe),this.registers[e]):this.unnamedRegister},isValidRegister:function(e){return e&&Q(e,q)},shiftNumericRegisters_:function(){for(var e=9;e>=2;e--)this.registers[e]=this.getRegister(""+(e-1))}},me.prototype={nextMatch:function(e,t){var n=this.historyBuffer,r=t?-1:1;null===this.initialPrefix&&(this.initialPrefix=e);for(var a=this.iterator+r;t?a>=0:a<n.length;a+=r)for(var l=n[a],d=0;d<=l.length;d++)if(this.initialPrefix==l.substring(0,d))return this.iterator=a,l;return a>=n.length?(this.iterator=n.length,this.initialPrefix):a<0?e:void 0},pushInput:function(e){var t=this.historyBuffer.indexOf(e);t>-1&&this.historyBuffer.splice(t,1),e.length&&this.historyBuffer.push(e)},reset:function(){this.initialPrefix=null,this.iterator=this.historyBuffer.length}};var ve={matchCommand:function(e,t,n,r){var a,l=function(e,t,n,r){for(var a,l=[],d=[],h=0;h<t.length;h++){var f=t[h];"insert"==n&&"insert"!=f.context||f.context&&f.context!=n||r.operator&&"action"==f.type||!(a=xe(e,f.keys))||("partial"==a&&l.push(f),"full"==a&&d.push(f))}return{partial:l.length&&l,full:d.length&&d}}(e,t,r,n);if(!l.full&&!l.partial)return{type:"none"};if(!l.full&&l.partial)return{type:"partial"};for(var d=0;d<l.full.length;d++){var h=l.full[d];a||(a=h)}if("<character>"==a.keys.slice(-11)){var f=function(e){var t=/^.*(<[^>]+>)$/.exec(e),n=t?t[1]:e.slice(-1);if(n.length>1)switch(n){case"<CR>":n="\n";break;case"<Space>":n=" ";break;default:n=""}return n}(e);if(/<C-.>/.test(f)||!f)return{type:"none"};n.selectedCharacter=f}return{type:"full",command:a}},processCommand:function(e,t,n){switch(t.inputState.repeatOverride=n.repeatOverride,n.type){case"motion":this.processMotion(e,t,n);break;case"operator":this.processOperator(e,t,n);break;case"operatorMotion":this.processOperatorMotion(e,t,n);break;case"action":this.processAction(e,t,n);break;case"search":this.processSearch(e,t,n);break;case"ex":case"keyToEx":this.processEx(e,t,n)}},processMotion:function(e,t,n){t.inputState.motion=n.motion,t.inputState.motionArgs=Se(n.motionArgs),this.evalInput(e,t)},processOperator:function(e,t,n){var r=t.inputState;if(r.operator){if(r.operator==n.operator)return r.motion="expandToLine",r.motionArgs={linewise:!0},void this.evalInput(e,t);fe(e)}r.operator=n.operator,r.operatorArgs=Se(n.operatorArgs),n.exitVisualBlock&&(t.visualBlock=!1,Ne(e)),t.visualMode&&this.evalInput(e,t)},processOperatorMotion:function(e,t,n){var r=t.visualMode,a=Se(n.operatorMotionArgs);a&&r&&a.visualLine&&(t.visualLine=!0),this.processOperator(e,t,n),r||this.processMotion(e,t,n)},processAction:function(e,t,n){var r=t.inputState,a=r.getRepeat(),l=!!a,d=Se(n.actionArgs)||{};r.selectedCharacter&&(d.selectedCharacter=r.selectedCharacter),n.operator&&this.processOperator(e,t,n),n.motion&&this.processMotion(e,t,n),(n.motion||n.operator)&&this.evalInput(e,t),d.repeat=a||1,d.repeatIsExplicit=l,d.registerName=r.registerName,fe(e),t.lastMotion=null,n.isEdit&&this.recordLastEdit(t,r,n),_e[n.action](e,d,t)},processSearch:function(e,t,n){if(e.getSearchCursor){var r=n.searchArgs.forward,a=n.searchArgs.wholeWordOnly;et(e).setReversed(!r);var l=r?"/":"?",d=et(e).getQuery(),h=e.getScrollInfo();switch(n.searchArgs.querySrc){case"prompt":var f=re.macroModeState;if(f.isPlaying)_(w=f.replaySearchQueries.shift(),!0,!1);else ct(e,{onClose:function(t){e.scrollTo(h.left,h.top),_(t,!0,!0);var n=re.macroModeState;n.isRecording&&function(e,t){if(e.isPlaying)return;var n=e.latestRegister,r=re.registerController.getRegister(n);r&&r.pushSearchQuery&&r.pushSearchQuery(t)}(n,t)},prefix:l,desc:lt,onKeyUp:function(t,n,a){var l,d,f,p=S.keyName(t);"Up"==p||"Down"==p?(l="Up"==p,d=t.target?t.target.selectionEnd:0,a(n=re.searchHistoryController.nextMatch(n,l)||""),d&&t.target&&(t.target.selectionEnd=t.target.selectionStart=Math.min(d,t.target.value.length))):"Left"!=p&&"Right"!=p&&"Ctrl"!=p&&"Alt"!=p&&"Shift"!=p&&re.searchHistoryController.reset();try{f=ut(e,n,!0,!0)}catch(t){}f?e.scrollIntoView(ht(e,!r,f),30):(ft(e),e.scrollTo(h.left,h.top))},onKeyDown:function(t,n,r){var a=S.keyName(t);"Esc"==a||"Ctrl-C"==a||"Ctrl-["==a||"Backspace"==a&&""==n?(re.searchHistoryController.pushInput(n),re.searchHistoryController.reset(),ut(e,d),ft(e),e.scrollTo(h.left,h.top),S.e_stop(t),fe(e),r(),e.focus()):"Up"==a||"Down"==a?S.e_stop(t):"Ctrl-U"==a&&(S.e_stop(t),r(""))}});break;case"wordUnderCursor":var p=Ue(e,!1,!0,!1,!0),y=!0;if(p||(p=Ue(e,!1,!0,!1,!1),y=!1),!p)return;var w=e.getLine(p.start.line).substring(p.start.ch,p.end.ch);w=y&&a?"\\b"+w+"\\b":function(e){return e.replace(/([.?*+$\[\]\/\\(){}|\-])/g,"\\$1")}(w),re.jumpList.cachedCursor=e.getCursor(),e.setCursor(p.start),_(w,!0,!1)}}function _(r,a,l){re.searchHistoryController.pushInput(r),re.searchHistoryController.reset();try{ut(e,r,a,l)}catch(t){return st(e,"Invalid regex: "+r),void fe(e)}ve.processMotion(e,t,{type:"motion",motion:"findNext",motionArgs:{forward:!0,toJumplist:n.searchArgs.toJumplist}})}},processEx:function(e,t,n){function r(t){re.exCommandHistoryController.pushInput(t),re.exCommandHistoryController.reset(),bt.processCommand(e,t)}function a(t,n,r){var a,l,d=S.keyName(t);("Esc"==d||"Ctrl-C"==d||"Ctrl-["==d||"Backspace"==d&&""==n)&&(re.exCommandHistoryController.pushInput(n),re.exCommandHistoryController.reset(),S.e_stop(t),fe(e),r(),e.focus()),"Up"==d||"Down"==d?(S.e_stop(t),a="Up"==d,l=t.target?t.target.selectionEnd:0,r(n=re.exCommandHistoryController.nextMatch(n,a)||""),l&&t.target&&(t.target.selectionEnd=t.target.selectionStart=Math.min(l,t.target.value.length))):"Ctrl-U"==d?(S.e_stop(t),r("")):"Left"!=d&&"Right"!=d&&"Ctrl"!=d&&"Alt"!=d&&"Shift"!=d&&re.exCommandHistoryController.reset()}"keyToEx"==n.type?bt.processCommand(e,n.exArgs.input):t.visualMode?ct(e,{onClose:r,prefix:":",value:"'<,'>",onKeyDown:a,selectValueOnOpen:!1}):ct(e,{onClose:r,prefix:":",onKeyDown:a})},evalInput:function(e,t){var n,r,a,l=t.inputState,d=l.motion,h=l.motionArgs||{},f=l.operator,p=l.operatorArgs||{},y=l.registerName,w=t.sel,_=Ae(t.visualMode?Ce(e,w.head):e.getCursor("head")),C=Ae(t.visualMode?Ce(e,w.anchor):e.getCursor("anchor")),S=Ae(_),k=Ae(C);if(f&&this.recordLastEdit(t,l),(a=void 0!==l.repeatOverride?l.repeatOverride:l.getRepeat())>0&&h.explicitRepeat?h.repeatIsExplicit=!0:(h.noRepeat||!h.explicitRepeat&&0===a)&&(a=1,h.repeatIsExplicit=!1),l.selectedCharacter&&(h.selectedCharacter=p.selectedCharacter=l.selectedCharacter),h.repeat=a,fe(e),d){var x=ye[d](e,_,h,t);if(t.lastMotion=ye[d],!x)return;if(h.toJumplist){f||null==e.ace.curOp||(e.ace.curOp.command.scrollIntoView="center-animate");var E=re.jumpList,A=E.cachedCursor;A?(We(e,A,x),delete E.cachedCursor):We(e,_,x)}x instanceof Array?(r=x[0],n=x[1]):n=x,n||(n=Ae(_)),t.visualMode?(t.visualBlock&&n.ch===1/0||(n=Ce(e,n,t.visualBlock)),r&&(r=Ce(e,r,!0)),r=r||k,w.anchor=r,w.head=n,Ne(e),Xe(e,t,"<",$e(r,n)?r:n),Xe(e,t,">",$e(r,n)?n:r)):f||(n=Ce(e,n),e.setCursor(n.line,n.ch))}if(f){if(p.lastSel){r=k;var T=p.lastSel,O=Math.abs(T.head.line-T.anchor.line),M=Math.abs(T.head.ch-T.anchor.ch);n=T.visualLine?R(k.line+O,k.ch):T.visualBlock?R(k.line+O,k.ch+M):T.head.line==T.anchor.line?R(k.line,k.ch+M):R(k.line+O,k.ch),t.visualMode=!0,t.visualLine=T.visualLine,t.visualBlock=T.visualBlock,w=t.sel={anchor:r,head:n},Ne(e)}else t.visualMode&&(p.lastSel={anchor:Ae(w.anchor),head:Ae(w.head),visualBlock:t.visualBlock,visualLine:t.visualLine});var P,L,D,I,F;if(t.visualMode){if(P=Re(w.head,w.anchor),L=Oe(w.head,w.anchor),D=t.visualLine||p.linewise,F=Be(e,{anchor:P,head:L},I=t.visualBlock?"block":D?"line":"char"),D){var j=F.ranges;if("block"==I)for(var N=0;N<j.length;N++)j[N].head.ch=Pe(e,j[N].head.line);else"line"==I&&(j[0].head=R(j[0].head.line+1,0))}}else{if(P=Ae(r||k),$e(L=Ae(n||S),P)){var B=P;P=L,L=B}(D=h.linewise||p.linewise)?function(e,t,n){t.ch=0,n.ch=0,n.line++}(0,P,L):h.forward&&function(e,t,n){var r=e.getRange(t,n);if(/\n\s*$/.test(r)){var a=r.split("\n");a.pop();for(var l=a.pop();a.length>0&&l&&X(l);l=a.pop())n.line--,n.ch=0;l?(n.line--,n.ch=Pe(e,n.line)):n.ch=0}}(e,P,L),F=Be(e,{anchor:P,head:L},I="char",!h.inclusive||D)}e.setSelections(F.ranges,F.primary),t.lastMotion=null,p.repeat=a,p.registerName=y,p.linewise=D;var z=we[f](e,p,F.ranges,k,n);t.visualMode&&ze(e,null!=z),z&&e.setCursor(z)}},recordLastEdit:function(e,t,n){var r=re.macroModeState;r.isPlaying||(e.lastEditInputState=t,e.lastEditActionCommand=n,r.lastInsertModeChanges.changes=[],r.lastInsertModeChanges.expectCursorActivityForChange=!1,r.lastInsertModeChanges.visualBlock=e.visualBlock?e.sel.head.line-e.sel.anchor.line:0)}},ye={moveToTopLine:function(e,t,n){var r=pt(e).top+n.repeat-1;return R(r,He(e.getLine(r)))},moveToMiddleLine:function(e){var t=pt(e),n=Math.floor(.5*(t.top+t.bottom));return R(n,He(e.getLine(n)))},moveToBottomLine:function(e,t,n){var r=pt(e).bottom-n.repeat+1;return R(r,He(e.getLine(r)))},expandToLine:function(e,t,n){return R(t.line+n.repeat-1,1/0)},findNext:function(e,t,n){var r=et(e),a=r.getQuery();if(a){var l=!n.forward;return l=r.isReversed()?!l:l,dt(e,a),ht(e,l,a,n.repeat)}},goToMark:function(e,t,n,r){var a=gt(e,r,n.selectedCharacter);return a?n.linewise?{line:a.line,ch:He(e.getLine(a.line))}:a:null},moveToOtherHighlightedEnd:function(e,t,n,r){if(r.visualBlock&&n.sameLine){var a=r.sel;return[Ce(e,R(a.anchor.line,a.head.ch)),Ce(e,R(a.head.line,a.anchor.ch))]}return[r.sel.head,r.sel.anchor]},jumpToMark:function(e,t,n,r){for(var a=t,l=0;l<n.repeat;l++){var d=a;for(var h in r.marks)if(K(h)){var f=r.marks[h].find();if(!((n.forward?$e(f,d):$e(d,f))||n.linewise&&f.line==d.line)){var p=Te(d,a),y=n.forward?Me(d,f,a):Me(a,f,d);(p||y)&&(a=f)}}}return n.linewise&&(a=R(a.line,He(e.getLine(a.line)))),a},moveByCharacters:function(e,t,n){var r=t,a=n.repeat,l=n.forward?r.ch+a:r.ch-a;return R(r.line,l)},moveByLines:function(e,t,n,r){var a=t,l=a.ch;switch(r.lastMotion){case this.moveByLines:case this.moveByDisplayLines:case this.moveByScroll:case this.moveToColumn:case this.moveToEol:l=r.lastHPos;break;default:r.lastHPos=l}var d=n.repeat+(n.repeatOffset||0),h=n.forward?a.line+d:a.line-d,f=e.firstLine(),p=e.lastLine();if(h<f&&a.line==f)return this.moveToStartOfLine(e,t,n,r);if(h>p&&a.line==p)return this.moveToEol(e,t,n,r,!0);var y=e.ace.session.getFoldLine(h);return y&&(n.forward?h>y.start.row&&(h=y.end.row+1):h=y.start.row),n.toFirstChar&&(l=He(e.getLine(h)),r.lastHPos=l),r.lastHSPos=e.charCoords(R(h,l),"div").left,R(h,l)},moveByDisplayLines:function(e,t,n,r){var a=t;switch(r.lastMotion){case this.moveByDisplayLines:case this.moveByScroll:case this.moveByLines:case this.moveToColumn:case this.moveToEol:break;default:r.lastHSPos=e.charCoords(a,"div").left}var l=n.repeat;if((h=e.findPosV(a,n.forward?l:-l,"line",r.lastHSPos)).hitSide)if(n.forward)var d={top:e.charCoords(h,"div").top+8,left:r.lastHSPos},h=e.coordsChar(d,"div");else{var f=e.charCoords(R(e.firstLine(),0),"div");f.left=r.lastHSPos,h=e.coordsChar(f,"div")}return r.lastHPos=h.ch,h},moveByPage:function(e,t,n){var r=t,a=n.repeat;return e.findPosV(r,n.forward?a:-a,"page")},moveByParagraph:function(e,t,n){var r=n.forward?1:-1;return Qe(e,t,n.repeat,r)},moveBySentence:function(e,t,n){var r=n.forward?1:-1;return function(e,t,n,r){function a(e,t){if(t.pos+t.dir<0||t.pos+t.dir>=t.line.length){if(t.ln+=t.dir,!G(e,t.ln))return t.line=null,t.ln=null,void(t.pos=null);t.line=e.getLine(t.ln),t.pos=t.dir>0?0:t.line.length-1}else t.pos+=t.dir}function l(e,t,n,r){var l=""===(p=e.getLine(t)),d={line:p,ln:t,pos:n,dir:r},h={ln:d.ln,pos:d.pos},f=""===d.line;for(a(e,d);null!==d.line;){if(h.ln=d.ln,h.pos=d.pos,""===d.line&&!f)return{ln:d.ln,pos:d.pos};if(l&&""!==d.line&&!X(d.line[d.pos]))return{ln:d.ln,pos:d.pos};!J(d.line[d.pos])||l||d.pos!==d.line.length-1&&!X(d.line[d.pos+1])||(l=!0),a(e,d)}var p=e.getLine(h.ln);h.pos=0;for(var y=p.length-1;y>=0;--y)if(!X(p[y])){h.pos=y;break}return h}function d(e,t,n,r){var l={line:f=e.getLine(t),ln:t,pos:n,dir:r},d={ln:l.ln,pos:null},h=""===l.line;for(a(e,l);null!==l.line;){if(""===l.line&&!h)return null!==d.pos?d:{ln:l.ln,pos:l.pos};if(J(l.line[l.pos])&&null!==d.pos&&(l.ln!==d.ln||l.pos+1!==d.pos))return d;""===l.line||X(l.line[l.pos])||(h=!1,d={ln:l.ln,pos:l.pos}),a(e,l)}var f=e.getLine(d.ln);d.pos=0;for(var p=0;p<f.length;++p)if(!X(f[p])){d.pos=p;break}return d}var h={ln:t.line,pos:t.ch};for(;n>0;)h=r<0?d(e,h.ln,h.pos,r):l(e,h.ln,h.pos,r),n--;return R(h.ln,h.pos)}(e,t,n.repeat,r)},moveByScroll:function(e,t,n,r){var a=e.getScrollInfo(),l=null,d=n.repeat;d||(d=a.clientHeight/(2*e.defaultTextHeight()));var h=e.charCoords(t,"local");if(n.repeat=d,!(l=ye.moveByDisplayLines(e,t,n,r)))return null;var f=e.charCoords(l,"local");return e.scrollTo(null,a.top+f.top-h.top),l},moveByWords:function(e,t,n){return function(e,t,n,r,a,l){var d=Ae(t),h=[];(r&&!a||!r&&a)&&n++;for(var f=!(r&&a),p=0;p<n;p++){var y=Ke(e,t,r,l,f);if(!y){var w=Pe(e,e.lastLine());h.push(r?{line:e.lastLine(),from:w,to:w}:{line:0,from:0,to:0});break}h.push(y),t=R(y.line,r?y.to-1:y.from)}var _=h.length!=n,C=h[0],S=h.pop();return r&&!a?(_||C.from==d.ch&&C.line==d.line||(S=h.pop()),R(S.line,S.from)):r&&a?R(S.line,S.to-1):!r&&a?(_||C.to==d.ch&&C.line==d.line||(S=h.pop()),R(S.line,S.to)):R(S.line,S.from)}(e,t,n.repeat,!!n.forward,!!n.wordEnd,!!n.bigWord)},moveTillCharacter:function(e,t,n){var r=Ye(e,n.repeat,n.forward,n.selectedCharacter),a=n.forward?-1:1;return Ve(a,n),r?(r.ch+=a,r):null},moveToCharacter:function(e,t,n){var r=n.repeat;return Ve(0,n),Ye(e,r,n.forward,n.selectedCharacter)||t},moveToSymbol:function(e,t,n){return function(e,t,n,r){var a=Ae(e.getCursor()),l=n?1:-1,d=n?e.lineCount():-1,h=a.ch,f=a.line,p=e.getLine(f),y={lineText:p,nextCh:p.charAt(h),lastCh:null,index:h,symb:r,reverseSymb:(n?{")":"(","}":"{"}:{"(":")","{":"}"})[r],forward:n,depth:0,curMoveThrough:!1},w=qe[r];if(!w)return a;var _=Ge[w].init,C=Ge[w].isComplete;_&&_(y);for(;f!==d&&t;){if(y.index+=l,y.nextCh=y.lineText.charAt(y.index),!y.nextCh){if(f+=l,y.lineText=e.getLine(f)||"",l>0)y.index=0;else{var S=y.lineText.length;y.index=S>0?S-1:0}y.nextCh=y.lineText.charAt(y.index)}C(y)&&(a.line=f,a.ch=y.index,t--)}if(y.nextCh||y.curMoveThrough)return R(f,y.index);return a}(e,n.repeat,n.forward,n.selectedCharacter)||t},moveToColumn:function(e,t,n,r){var a=n.repeat;return r.lastHPos=a-1,r.lastHSPos=e.charCoords(t,"div").left,function(e,t){var n=e.getCursor().line;return Ce(e,R(n,t-1))}(e,a)},moveToEol:function(e,t,n,r,a){var l=R(t.line+n.repeat-1,1/0),d=e.clipPos(l);return d.ch--,a||(r.lastHPos=1/0,r.lastHSPos=e.charCoords(d,"div").left),l},moveToFirstNonWhiteSpaceCharacter:function(e,t){var n=t;return R(n.line,He(e.getLine(n.line)))},moveToMatchedSymbol:function(e,t){for(var n,r=t,a=r.line,l=r.ch,d=e.getLine(a);l<d.length;l++)if((n=d.charAt(l))&&-1!="()[]{}".indexOf(n)){var h=e.getTokenTypeAt(R(a,l+1));if("string"!==h&&"comment"!==h)break}if(l<d.length){var f=/[<>]/.test(d[l])?/[(){}[\]<>]/:/[(){}[\]]/;return e.findMatchingBracket(R(a,l+1),{bracketRegex:f}).to}return r},moveToStartOfLine:function(e,t){return R(t.line,0)},moveToLineOrEdgeOfDocument:function(e,t,n){var r=n.forward?e.lastLine():e.firstLine();return n.repeatIsExplicit&&(r=n.repeat-e.getOption("firstLineNumber")),R(r,He(e.getLine(r)))},textObjectManipulation:function(e,t,n,r){var a=n.selectedCharacter;"b"==a?a="(":"B"==a&&(a="{");var l,d=!n.textObjectInner;if({"(":")",")":"(","{":"}","}":"{","[":"]","]":"[","<":">",">":"<"}[a])l=function(e,t,n,r){var a,l,d=t,h={"(":/[()]/,")":/[()]/,"[":/[[\]]/,"]":/[[\]]/,"{":/[{}]/,"}":/[{}]/,"<":/[<>]/,">":/[<>]/}[n],f={"(":"(",")":"(","[":"[","]":"[","{":"{","}":"{","<":"<",">":"<"}[n],p=e.getLine(d.line).charAt(d.ch)===f?1:0;if(a=e.scanForBracket(R(d.line,d.ch+p),-1,void 0,{bracketRegex:h}),l=e.scanForBracket(R(d.line,d.ch+p),1,void 0,{bracketRegex:h}),!a||!l)return{start:d,end:d};if(a=a.pos,l=l.pos,a.line==l.line&&a.ch>l.ch||a.line>l.line){var y=a;a=l,l=y}r?l.ch+=1:a.ch+=1;return{start:a,end:l}}(e,t,a,d);else if({"'":!0,'"':!0,"`":!0}[a])l=function(e,t,n,r){var a,l,d,h,f=Ae(t),p=e.getLine(f.line).split(""),y=p.indexOf(n);f.ch<y?f.ch=y:y<f.ch&&p[f.ch]==n&&(l=f.ch,--f.ch);if(p[f.ch]!=n||l)for(d=f.ch;d>-1&&!a;d--)p[d]==n&&(a=d+1);else a=f.ch+1;if(a&&!l)for(d=a,h=p.length;d<h&&!l;d++)p[d]==n&&(l=d);if(!a||!l)return{start:f,end:f};r&&(--a,++l);return{start:R(f.line,a),end:R(f.line,l)}}(e,t,a,d);else if("W"===a)l=Ue(e,d,!0,!0);else if("w"===a)l=Ue(e,d,!0,!1);else{if("p"!==a)return null;if(l=Qe(e,t,n.repeat,0,d),n.linewise=!0,r.visualMode)r.visualLine||(r.visualLine=!0);else{var h=r.inputState.operatorArgs;h&&(h.linewise=!0),l.end.line--}}return e.state.vim.visualMode?function(e,t,n){var r,a=e.state.vim.sel,l=a.head,d=a.anchor;$e(n,t)&&(r=n,n=t,t=r);$e(l,d)?(l=Re(t,l),d=Oe(d,n)):(d=Re(t,d),-1==(l=ke(l=Oe(l,n),0,-1)).ch&&l.line!=e.firstLine()&&(l=R(l.line-1,Pe(e,l.line-1))));return[d,l]}(e,l.start,l.end):[l.start,l.end]},repeatLastCharacterSearch:function(e,t,n){var r=re.lastCharacterSearch,a=n.repeat,l=n.forward===r.forward,d=(r.increment?1:0)*(l?-1:1);e.moveH(-d,"char"),n.inclusive=!!l;var h=Ye(e,a,l,r.selectedCharacter);return h?(h.ch+=d,h):(e.moveH(d,"char"),t)}};function be(e,t){for(var n=[],r=0;r<t;r++)n.push(e);return n}var we={change:function(e,t,n){var r,a,l=e.state.vim,d=n[0].anchor,h=n[0].head;if(l.visualMode)if(t.fullLine)h.ch=Number.MAX_VALUE,h.line--,e.setSelection(d,h),a=e.getSelection(),e.replaceSelection(""),r=d;else{a=e.getSelection();var f=be("",n.length);e.replaceSelections(f),r=Re(n[0].head,n[0].anchor)}else{a=e.getRange(d,h);var p=l.lastEditInputState||{};if("moveByWords"==p.motion&&!X(a)){var y=/\s+$/.exec(a);y&&p.motionArgs&&p.motionArgs.forward&&(h=ke(h,0,-y[0].length),a=a.slice(0,-y[0].length))}var w=new R(d.line-1,Number.MAX_VALUE),_=e.firstLine()==e.lastLine();h.line>e.lastLine()&&t.linewise&&!_?e.replaceRange("",w,h):e.replaceRange("",d,h),t.linewise&&(_||(e.setCursor(w),S.commands.newlineAndIndent(e)),d.ch=Number.MAX_VALUE),r=d}re.registerController.pushText(t.registerName,"change",a,t.linewise,n.length>1),_e.enterInsertMode(e,{head:r},e.state.vim)},delete:function(e,t,n){var r,a,l=e.state.vim;if(l.visualBlock){a=e.getSelection();var d=be("",n.length);e.replaceSelections(d),r=n[0].anchor}else{var h=n[0].anchor,f=n[0].head;t.linewise&&f.line!=e.firstLine()&&h.line==e.lastLine()&&h.line==f.line-1&&(h.line==e.firstLine()?h.ch=0:h=R(h.line-1,Pe(e,h.line-1))),a=e.getRange(h,f),e.replaceRange("",h,f),r=h,t.linewise&&(r=ye.moveToFirstNonWhiteSpaceCharacter(e,h))}return re.registerController.pushText(t.registerName,"delete",a,t.linewise,l.visualBlock),Ce(e,r,l.insertMode)},indent:function(e,t,n){var r=e.state.vim,a=n[0].anchor.line,l=r.visualBlock?n[n.length-1].anchor.line:n[0].head.line,d=r.visualMode?t.repeat:1;t.linewise&&l--;for(var h=a;h<=l;h++)for(var f=0;f<d;f++)e.indentLine(h,t.indentRight);return ye.moveToFirstNonWhiteSpaceCharacter(e,n[0].anchor)},indentAuto:function(e,t,n){return e.execCommand("indentAuto"),ye.moveToFirstNonWhiteSpaceCharacter(e,n[0].anchor)},changeCase:function(e,t,n,r,a){for(var l=e.getSelections(),d=[],h=t.toLower,f=0;f<l.length;f++){var p=l[f],y="";if(!0===h)y=p.toLowerCase();else if(!1===h)y=p.toUpperCase();else for(var w=0;w<p.length;w++){var _=p.charAt(w);y+=Y(_)?_.toLowerCase():_.toUpperCase()}d.push(y)}return e.replaceSelections(d),t.shouldMoveCursor?a:!e.state.vim.visualMode&&t.linewise&&n[0].anchor.line+1==n[0].head.line?ye.moveToFirstNonWhiteSpaceCharacter(e,r):t.linewise?r:Re(n[0].anchor,n[0].head)},yank:function(e,t,n,r){var a=e.state.vim,l=e.getSelection(),d=a.visualMode?Re(a.sel.anchor,a.sel.head,n[0].head,n[0].anchor):r;return re.registerController.pushText(t.registerName,"yank",l,t.linewise,a.visualBlock),d}};var _e={jumpListWalk:function(e,t,n){if(!n.visualMode){var r=t.repeat,a=t.forward,l=re.jumpList.move(e,a?r:-r),d=l?l.find():void 0;d=d||e.getCursor(),e.setCursor(d),e.ace.curOp.command.scrollIntoView="center-animate"}},scroll:function(e,t,n){if(!n.visualMode){var r=t.repeat||1,a=e.defaultTextHeight(),l=e.getScrollInfo().top,d=a*r,h=t.forward?l+d:l-d,f=Ae(e.getCursor()),p=e.charCoords(f,"local");if(t.forward)h>p.top?(f.line+=(h-p.top)/a,f.line=Math.ceil(f.line),e.setCursor(f),p=e.charCoords(f,"local"),e.scrollTo(null,p.top)):e.scrollTo(null,h);else{var y=h+e.getScrollInfo().clientHeight;y<p.bottom?(f.line-=(p.bottom-y)/a,f.line=Math.floor(f.line),e.setCursor(f),p=e.charCoords(f,"local"),e.scrollTo(null,p.bottom-e.getScrollInfo().clientHeight)):e.scrollTo(null,h)}}},scrollToCursor:function(e,t){var n=e.getCursor().line,r=e.charCoords(R(n,0),"local"),a=e.getScrollInfo().clientHeight,l=r.top,d=r.bottom-l;switch(t.position){case"center":l=l-a/2+d;break;case"bottom":l=l-a+d}e.scrollTo(null,l)},replayMacro:function(e,t,n){var r=t.selectedCharacter,a=t.repeat,l=re.macroModeState;for("@"==r?r=l.latestRegister:l.latestRegister=r;a--;)Ct(e,n,l,r)},enterMacroRecordMode:function(e,t){var n=re.macroModeState,r=t.selectedCharacter;re.registerController.isValidRegister(r)&&n.enterMacroRecordMode(e,r)},toggleOverwrite:function(e){e.state.overwrite?(e.toggleOverwrite(!1),e.setOption("keyMap","vim-insert"),S.signal(e,"vim-mode-change",{mode:"insert"})):(e.toggleOverwrite(!0),e.setOption("keyMap","vim-replace"),S.signal(e,"vim-mode-change",{mode:"replace"}))},enterInsertMode:function(e,t,n){if(!e.getOption("readOnly")){n.insertMode=!0,n.insertModeRepeat=t&&t.repeat||1;var r=t?t.insertAt:null,a=n.sel,l=t.head||e.getCursor("head"),d=e.listSelections().length;if("eol"==r)l=R(l.line,Pe(e,l.line));else if("bol"==r)l=R(l.line,0);else if("charAfter"==r)l=ke(l,0,1);else if("firstNonBlank"==r)l=ye.moveToFirstNonWhiteSpaceCharacter(e,l);else if("startOfSelectedArea"==r){if(!n.visualMode)return;n.visualBlock?(l=R(Math.min(a.head.line,a.anchor.line),Math.min(a.head.ch,a.anchor.ch)),d=Math.abs(a.head.line-a.anchor.line)+1):l=a.head.line<a.anchor.line?a.head:R(a.anchor.line,0)}else if("endOfSelectedArea"==r){if(!n.visualMode)return;n.visualBlock?(l=R(Math.min(a.head.line,a.anchor.line),Math.max(a.head.ch+1,a.anchor.ch)),d=Math.abs(a.head.line-a.anchor.line)+1):l=a.head.line>=a.anchor.line?ke(a.head,0,1):R(a.anchor.line,0)}else if("inplace"==r){if(n.visualMode)return}else"lastEdit"==r&&(l=mt(e)||l);e.setOption("disableInput",!1),t&&t.replace?(e.toggleOverwrite(!0),e.setOption("keyMap","vim-replace"),S.signal(e,"vim-mode-change",{mode:"replace"})):(e.toggleOverwrite(!1),e.setOption("keyMap","vim-insert"),S.signal(e,"vim-mode-change",{mode:"insert"})),re.macroModeState.isPlaying||(e.on("change",St),S.on(e.getInputField(),"keydown",Tt)),n.visualMode&&ze(e),Fe(e,l,d)}},toggleVisualMode:function(e,t,n){var r,a=t.repeat,l=e.getCursor();n.visualMode?n.visualLine^t.linewise||n.visualBlock^t.blockwise?(n.visualLine=!!t.linewise,n.visualBlock=!!t.blockwise,S.signal(e,"vim-mode-change",{mode:"visual",subMode:n.visualLine?"linewise":n.visualBlock?"blockwise":""}),Ne(e)):ze(e):(n.visualMode=!0,n.visualLine=!!t.linewise,n.visualBlock=!!t.blockwise,r=Ce(e,R(l.line,l.ch+a-1),!0),n.sel={anchor:l,head:r},S.signal(e,"vim-mode-change",{mode:"visual",subMode:n.visualLine?"linewise":n.visualBlock?"blockwise":""}),Ne(e),Xe(e,n,"<",Re(l,r)),Xe(e,n,">",Oe(l,r)))},reselectLastSelection:function(e,t,n){var r=n.lastSelection;if(n.visualMode&&je(e,n),r){var a=r.anchorMark.find(),l=r.headMark.find();if(!a||!l)return;n.sel={anchor:a,head:l},n.visualMode=!0,n.visualLine=r.visualLine,n.visualBlock=r.visualBlock,Ne(e),Xe(e,n,"<",Re(a,l)),Xe(e,n,">",Oe(a,l)),S.signal(e,"vim-mode-change",{mode:"visual",subMode:n.visualLine?"linewise":n.visualBlock?"blockwise":""})}},joinLines:function(e,t,n){var r,a;if(n.visualMode){if(r=e.getCursor("anchor"),$e(a=e.getCursor("head"),r)){var l=a;a=r,r=l}a.ch=Pe(e,a.line)-1}else{var d=Math.max(t.repeat,2);r=e.getCursor(),a=Ce(e,R(r.line+d-1,1/0))}for(var h=0,f=r.line;f<a.line;f++){h=Pe(e,r.line);l=R(r.line+1,Pe(e,r.line+1));var p=e.getRange(r,l);p=t.keepSpaces?p.replace(/\n\r?/g,""):p.replace(/\n\s*/g," "),e.replaceRange(p,r,l)}var y=R(r.line,h);n.visualMode&&ze(e,!1),e.setCursor(y)},newLineAndEnterInsertMode:function(e,t,n){n.insertMode=!0;var r=Ae(e.getCursor());r.line!==e.firstLine()||t.after?(r.line=t.after?r.line:r.line-1,r.ch=Pe(e,r.line),e.setCursor(r),(S.commands.newlineAndIndentContinueComment||S.commands.newlineAndIndent)(e)):(e.replaceRange("\n",R(e.firstLine(),0)),e.setCursor(e.firstLine(),0));this.enterInsertMode(e,{repeat:t.repeat},n)},paste:function(e,t,n){var r=Ae(e.getCursor()),a=re.registerController.getRegister(t.registerName);if(_=a.toString()){if(t.matchIndent){var l=e.getOption("tabSize"),d=function(e){var t=e.split("\t").length-1,n=e.split(" ").length-1;return t*l+1*n},h=e.getLine(e.getCursor().line),f=d(h.match(/^\s*/)[0]),p=_.replace(/\n$/,""),y=_!==p,w=d(_.match(/^\s*/)[0]),_=p.replace(/^\s*/gm,(function(t){var n=f+(d(t)-w);if(n<0)return"";if(e.getOption("indentWithTabs")){var r=Math.floor(n/l);return Array(r+1).join("\t")}return Array(n+1).join(" ")}));_+=y?"\n":""}if(t.repeat>1)_=Array(t.repeat+1).join(_);var C,S,k=a.linewise,x=a.blockwise;if(x){_=_.split("\n"),k&&_.pop();for(var E=0;E<_.length;E++)_[E]=""==_[E]?" ":_[E];r.ch+=t.after?1:0,r.ch=Math.min(Pe(e,r.line),r.ch)}else k?n.visualMode?_=n.visualLine?_.slice(0,-1):"\n"+_.slice(0,_.length-1)+"\n":t.after?(_="\n"+_.slice(0,_.length-1),r.ch=Pe(e,r.line)):r.ch=0:r.ch+=t.after?1:0;if(n.visualMode){var A;n.lastPastedText=_;var T=function(e,t){var n=t.lastSelection;return t.visualMode?function(){var t=e.listSelections(),n=t[0],r=t[t.length-1];return[$e(n.anchor,n.head)?n.anchor:n.head,$e(r.anchor,r.head)?r.head:r.anchor]}():function(){var t=e.getCursor(),r=e.getCursor(),a=n.visualBlock;if(a){var l=a.width,d=a.height;r=R(t.line+d,t.ch+l);for(var h=[],f=t.line;f<r.line;f++){var p={anchor:R(f,t.ch),head:R(f,r.ch)};h.push(p)}e.setSelections(h)}else{var y=n.anchorMark.find(),w=n.headMark.find(),_=w.line-y.line,C=w.ch-y.ch;r={line:r.line+_,ch:_?r.ch:C+r.ch},n.visualLine&&(t=R(t.line,0),r=R(r.line,Pe(e,r.line))),e.setSelection(t,r)}return[t,r]}()}(e,n),O=T[0],M=T[1],P=e.getSelection(),L=e.listSelections(),D=new Array(L.length).join("1").split("1");n.lastSelection&&(A=n.lastSelection.headMark.find()),re.registerController.unnamedRegister.setText(P),x?(e.replaceSelections(D),M=R(O.line+_.length-1,O.ch),e.setCursor(O),Ie(e,M),e.replaceSelections(_),C=O):n.visualBlock?(e.replaceSelections(D),e.setCursor(O),e.replaceRange(_,O,O),C=O):(e.replaceRange(_,O,M),C=e.posFromIndex(e.indexFromPos(O)+_.length-1)),A&&(n.lastSelection.headMark=e.setBookmark(A)),k&&(C.ch=0)}else if(x){e.setCursor(r);for(E=0;E<_.length;E++){var I=r.line+E;I>e.lastLine()&&e.replaceRange("\n",R(I,0)),Pe(e,I)<r.ch&&De(e,I,r.ch)}e.setCursor(r),Ie(e,R(r.line+_.length-1,r.ch)),e.replaceSelections(_),C=r}else e.replaceRange(_,r),k&&t.after?C=R(r.line+1,He(e.getLine(r.line+1))):k&&!t.after?C=R(r.line,He(e.getLine(r.line))):!k&&t.after?(S=e.indexFromPos(r),C=e.posFromIndex(S+_.length-1)):(S=e.indexFromPos(r),C=e.posFromIndex(S+_.length));n.visualMode&&ze(e,!1),e.setCursor(C)}},undo:function(e,t){e.operation((function(){Ee(e,S.commands.undo,t.repeat)(),e.setCursor(e.getCursor("anchor"))}))},redo:function(e,t){Ee(e,S.commands.redo,t.repeat)()},setRegister:function(e,t,n){n.inputState.registerName=t.selectedCharacter},setMark:function(e,t,n){Xe(e,n,t.selectedCharacter,e.getCursor())},replace:function(e,t,n){var r,a,l=t.selectedCharacter,d=e.getCursor(),h=e.listSelections();if(n.visualMode)d=e.getCursor("start"),a=e.getCursor("end");else{var f=e.getLine(d.line);(r=d.ch+t.repeat)>f.length&&(r=f.length),a=R(d.line,r)}if("\n"==l)n.visualMode||e.replaceRange("",d,a),(S.commands.newlineAndIndentContinueComment||S.commands.newlineAndIndent)(e);else{var p=e.getRange(d,a);if(p=p.replace(/[^\n]/g,l),n.visualBlock){var y=new Array(e.getOption("tabSize")+1).join(" ");p=(p=e.getSelection()).replace(/\t/g,y).replace(/[^\n]/g,l).split("\n"),e.replaceSelections(p)}else e.replaceRange(p,d,a);n.visualMode?(d=$e(h[0].anchor,h[0].head)?h[0].anchor:h[0].head,e.setCursor(d),ze(e,!1)):e.setCursor(ke(a,0,-1))}},incrementNumberToken:function(e,t){for(var n,r,a,l,d=e.getCursor(),h=e.getLine(d.line),f=/(-?)(?:(0x)([\da-f]+)|(0b|0|)(\d+))/gi;null!==(n=f.exec(h))&&(a=(r=n.index)+n[0].length,!(d.ch<a)););if((t.backtrack||!(a<=d.ch))&&n){var p=n[2]||n[4],y=n[3]||n[5],w=t.increase?1:-1,_={"0b":2,0:8,"":10,"0x":16}[p.toLowerCase()];l=(parseInt(n[1]+y,_)+w*t.repeat).toString(_);var C=p?new Array(y.length-l.length+1+n[1].length).join("0"):"";l="-"===l.charAt(0)?"-"+p+C+l.substr(1):p+C+l;var S=R(d.line,r),k=R(d.line,a);e.replaceRange(l,S,k),e.setCursor(R(d.line,r+l.length-1))}},repeatLastEdit:function(e,t,n){if(n.lastEditInputState){var r=t.repeat;r&&t.repeatIsExplicit?n.lastEditInputState.repeatOverride=r:r=n.lastEditInputState.repeatOverride||r,$t(e,n,r,!1)}},indent:function(e,t){e.indentLine(e.getCursor().line,t.indentRight)},exitInsertMode:wt};function Ce(e,t,n){var r=Math.min(Math.max(e.firstLine(),t.line),e.lastLine()),a=Pe(e,r)-1;a=n?a+1:a;var l=Math.min(Math.max(0,t.ch),a);return R(r,l)}function Se(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function ke(e,t,n){return"object"==typeof t&&(n=t.ch,t=t.line),R(e.line+t,e.ch+n)}function xe(e,t){if("<character>"==t.slice(-11)){var n=t.length-11,r=e.slice(0,n),a=t.slice(0,n);return r==a&&e.length>n?"full":0==a.indexOf(r)&&"partial"}return e==t?"full":0==t.indexOf(e)&&"partial"}function Ee(e,t,n){return function(){for(var r=0;r<n;r++)t(e)}}function Ae(e){return R(e.line,e.ch)}function Te(e,t){return e.ch==t.ch&&e.line==t.line}function $e(e,t){return e.line<t.line||e.line==t.line&&e.ch<t.ch}function Re(e,t){return arguments.length>2&&(t=Re.apply(void 0,Array.prototype.slice.call(arguments,1))),$e(e,t)?e:t}function Oe(e,t){return arguments.length>2&&(t=Oe.apply(void 0,Array.prototype.slice.call(arguments,1))),$e(e,t)?t:e}function Me(e,t,n){var r=$e(e,t),a=$e(t,n);return r&&a}function Pe(e,t){return e.getLine(t).length}function Le(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function De(e,t,n){var r=Pe(e,t),a=new Array(n-r+1).join(" ");e.setCursor(R(t,r)),e.replaceRange(a,e.getCursor())}function Ie(e,t){var n=[],r=e.listSelections(),a=Ae(e.clipPos(t)),l=!Te(t,a),d=function(e,t,n){for(var r=0;r<e.length;r++){var a="head"!=n&&Te(e[r].anchor,t),l="anchor"!=n&&Te(e[r].head,t);if(a||l)return r}return-1}(r,e.getCursor("head")),h=Te(r[d].head,r[d].anchor),f=r.length-1,p=f-d>d?f:0,y=r[p].anchor,w=Math.min(y.line,a.line),_=Math.max(y.line,a.line),C=y.ch,S=a.ch,k=r[p].head.ch-C,x=S-C;k>0&&x<=0?(C++,l||S--):k<0&&x>=0?(C--,h||S++):k<0&&-1==x&&(C--,S++);for(var E=w;E<=_;E++){var A={anchor:new R(E,C),head:new R(E,S)};n.push(A)}return e.setSelections(n),t.ch=S,y.ch=C,y}function Fe(e,t,n){for(var r=[],a=0;a<n;a++){var l=ke(t,a,0);r.push({anchor:l,head:l})}e.setSelections(r,0)}function je(e,t){var n=t.sel.anchor,r=t.sel.head;t.lastPastedText&&(r=e.posFromIndex(e.indexFromPos(n)+t.lastPastedText.length),t.lastPastedText=null),t.lastSelection={anchorMark:e.setBookmark(n),headMark:e.setBookmark(r),anchor:Ae(n),head:Ae(r),visualMode:t.visualMode,visualLine:t.visualLine,visualBlock:t.visualBlock}}function Ne(e,t,n){var r=e.state.vim,a=Be(e,t=t||r.sel,n=n||r.visualLine?"line":r.visualBlock?"block":"char");e.setSelections(a.ranges,a.primary),xt(e)}function Be(e,t,n,r){var a=Ae(t.head),l=Ae(t.anchor);if("char"==n){var d=r||$e(t.head,t.anchor)?0:1,h=$e(t.head,t.anchor)?1:0;return a=ke(t.head,0,d),{ranges:[{anchor:l=ke(t.anchor,0,h),head:a}],primary:0}}if("line"==n){if($e(t.head,t.anchor))a.ch=0,l.ch=Pe(e,l.line);else{l.ch=0;var f=e.lastLine();a.line>f&&(a.line=f),a.ch=Pe(e,a.line)}return{ranges:[{anchor:l,head:a}],primary:0}}if("block"==n){for(var p=Math.min(l.line,a.line),y=Math.min(l.ch,a.ch),w=Math.max(l.line,a.line),_=Math.max(l.ch,a.ch)+1,C=w-p+1,S=a.line==p?0:C-1,k=[],x=0;x<C;x++)k.push({anchor:R(p+x,y),head:R(p+x,_)});return{ranges:k,primary:S}}}function ze(e,t){var n=e.state.vim;!1!==t&&e.setCursor(Ce(e,n.sel.head)),je(e,n),n.visualMode=!1,n.visualLine=!1,n.visualBlock=!1,S.signal(e,"vim-mode-change",{mode:"normal"}),n.fakeCursor&&n.fakeCursor.clear()}function He(e){if(!e)return 0;var t=e.search(/\S/);return-1==t?e.length:t}function Ue(e,t,n,r,a){for(var l=function(e){var t=e.getCursor("head");return 1==e.getSelection().length&&(t=Re(t,e.getCursor("anchor"))),t}(e),d=e.getLine(l.line),h=l.ch,f=a?N[0]:B[0];!f(d.charAt(h));)if(++h>=d.length)return null;r?f=B[0]:(f=N[0])(d.charAt(h))||(f=N[1]);for(var p=h,y=h;f(d.charAt(p))&&p<d.length;)p++;for(;f(d.charAt(y))&&y>=0;)y--;if(y++,t){for(var w=p;/\s/.test(d.charAt(p))&&p<d.length;)p++;if(w==p){for(var _=y;/\s/.test(d.charAt(y-1))&&y>0;)y--;y||(y=_)}}return{start:R(l.line,y),end:R(l.line,p)}}function We(e,t,n){Te(t,n)||re.jumpList.add(e,t,n)}function Ve(e,t){re.lastCharacterSearch.increment=e,re.lastCharacterSearch.forward=t.forward,re.lastCharacterSearch.selectedCharacter=t.selectedCharacter}var qe={"(":"bracket",")":"bracket","{":"bracket","}":"bracket","[":"section","]":"section","*":"comment","/":"comment",m:"method",M:"method","#":"preprocess"},Ge={bracket:{isComplete:function(e){if(e.nextCh===e.symb){if(e.depth++,e.depth>=1)return!0}else e.nextCh===e.reverseSymb&&e.depth--;return!1}},section:{init:function(e){e.curMoveThrough=!0,e.symb=(e.forward?"]":"[")===e.symb?"{":"}"},isComplete:function(e){return 0===e.index&&e.nextCh===e.symb}},comment:{isComplete:function(e){var t="*"===e.lastCh&&"/"===e.nextCh;return e.lastCh=e.nextCh,t}},method:{init:function(e){e.symb="m"===e.symb?"{":"}",e.reverseSymb="{"===e.symb?"}":"{"},isComplete:function(e){return e.nextCh===e.symb}},preprocess:{init:function(e){e.index=0},isComplete:function(e){if("#"===e.nextCh){var t=e.lineText.match(/#(\w+)/)[1];if("endif"===t){if(e.forward&&0===e.depth)return!0;e.depth++}else if("if"===t){if(!e.forward&&0===e.depth)return!0;e.depth--}if("else"===t&&0===e.depth)return!0}return!1}}};function Ke(e,t,n,r,a){var l=t.line,d=t.ch,h=e.getLine(l),f=n?1:-1,p=r?B:N;if(a&&""==h){if(l+=f,h=e.getLine(l),!G(e,l))return null;d=n?0:h.length}for(;;){if(a&&""==h)return{from:0,to:0,line:l};for(var y=f>0?h.length:-1,w=y,_=y;d!=y;){for(var C=!1,S=0;S<p.length&&!C;++S)if(p[S](h.charAt(d))){for(w=d;d!=y&&p[S](h.charAt(d));)d+=f;if(C=w!=(_=d),w==t.ch&&l==t.line&&_==w+f)continue;return{from:Math.min(w,_+1),to:Math.max(w,_),line:l}}C||(d+=f)}if(!G(e,l+=f))return null;h=e.getLine(l),d=f>0?0:h.length}}function Ye(e,t,n,r){for(var a,l=e.getCursor(),d=l.ch,h=0;h<t;h++){if(-1==(a=Je(d,e.getLine(l.line),r,n,!0)))return null;d=a}return R(e.getCursor().line,a)}function Xe(e,t,n,r){Q(n,V)&&(t.marks[n]&&t.marks[n].clear(),t.marks[n]=e.setBookmark(r))}function Je(e,t,n,r,a){var l;return r?-1==(l=t.indexOf(n,e+1))||a||(l-=1):-1==(l=t.lastIndexOf(n,e-1))||a||(l+=1),l}function Qe(e,t,n,r,a){var l,d=t.line,h=e.firstLine(),f=e.lastLine(),p=d;function y(t){return!/\S/.test(e.getLine(t))}function w(e,t,n){return n?y(e)!=y(e+t):!y(e)&&y(e+t)}function _(t){r=r>0?1:-1;var n=e.ace.session.getFoldLine(t);n&&t+r>n.start.row&&t+r<n.end.row&&(r=(r>0?n.end.row:n.start.row)-t)}if(r){for(;h<=p&&p<=f&&n>0;)_(p),w(p,r)&&n--,p+=r;return new R(p,0)}var C=e.state.vim;if(C.visualLine&&w(d,1,!0)){var S=C.sel.anchor;w(S.line,-1,!0)&&(a&&S.line==d||(d+=1))}var k=y(d);for(p=d;p<=f&&n;p++)w(p,1,!0)&&(a&&y(p)==k||n--);for(l=new R(p,0),p>f&&!k?k=!0:a=!1,p=d;p>h&&(a&&y(p)!=k&&p!=d||!w(p,-1,!0));p--);return{start:new R(p,0),end:l}}function Ze(){}function et(e){var t=e.state.vim;return t.searchState_||(t.searchState_=new Ze)}function tt(e,t,n,r,a){e.openDialog?e.openDialog(t,r,{bottom:!0,value:a.value,onKeyDown:a.onKeyDown,onKeyUp:a.onKeyUp,selectValueOnOpen:!1,onClose:function(){e.state.vim&&(e.state.vim.status="",e.ace.renderer.$loop.schedule(e.ace.renderer.CHANGE_CURSOR))}}):r(prompt(n,""))}function nt(e,t){var n=rt(e,t)||[];if(!n.length)return[];var r=[];if(0===n[0]){for(var a=0;a<n.length;a++)"number"==typeof n[a]&&r.push(e.substring(n[a]+1,n[a+1]));return r}}function rt(e,t){t||(t="/");for(var n=!1,r=[],a=0;a<e.length;a++){var l=e.charAt(a);n||l!=t||r.push(a),n=!n&&"\\"==l}return r}ee("pcre",!0,"boolean"),Ze.prototype={getQuery:function(){return re.query},setQuery:function(e){re.query=e},getOverlay:function(){return this.searchOverlay},setOverlay:function(e){this.searchOverlay=e},isReversed:function(){return re.isReversed},setReversed:function(e){re.isReversed=e},getScrollbarAnnotate:function(){return this.annotate},setScrollbarAnnotate:function(e){this.annotate=e}};var it={"\\n":"\n","\\r":"\r","\\t":"\t"};var ot={"\\/":"/","\\\\":"\\","\\n":"\n","\\r":"\r","\\t":"\t"};function at(e,t,n){if(re.registerController.getRegister("/").setText(e),e instanceof RegExp)return e;var r,a,l=rt(e,"/");l.length?(r=e.substring(0,l[0]),a=-1!=e.substring(l[0]).indexOf("i")):r=e;return r?(ne("pcre")||(r=function(e){for(var t=!1,n=[],r=-1;r<e.length;r++){var a=e.charAt(r)||"",l=e.charAt(r+1)||"",d=l&&-1!="|(){".indexOf(l);t?("\\"===a&&d||n.push(a),t=!1):"\\"===a?(t=!0,l&&-1!="}".indexOf(l)&&(d=!0),d&&"\\"!==l||n.push(a)):(n.push(a),d&&"\\"!==l&&n.push("\\"))}return n.join("")}(r)),n&&(t=/^[^A-Z]*$/.test(r)),new RegExp(r,t||a?"i":void 0)):null}function st(e,t){e.openNotification?e.openNotification('<span style="color: red">'+t+"</span>",{bottom:!0,duration:5e3}):alert(t)}var lt="(Javascript regexp)";function ct(e,t){var n,r,a,l=(t.prefix||"")+" "+(t.desc||"");tt(e,(n=t.prefix,r=t.desc,a='<span style="font-family: monospace; white-space: pre">'+(n||"")+'<input type="text" autocorrect="off" autocapitalize="none" autocomplete="off"></span>',r&&(a+=' <span style="color: #888">'+r+"</span>"),a),l,t.onClose,t)}function ut(e,t,n,r){if(t){var a=et(e),l=at(t,!!n,!!r);if(l)return dt(e,l),function(e,t){if(e instanceof RegExp&&t instanceof RegExp){for(var n=["global","multiline","ignoreCase","source"],r=0;r<n.length;r++){var a=n[r];if(e[a]!==t[a])return!1}return!0}return!1}(l,a.getQuery())||a.setQuery(l),l}}function dt(e,t){var n=et(e),r=n.getOverlay();r&&t==r.query||(r&&e.removeOverlay(r),r=function(e){if("^"==e.source.charAt(0))var t=!0;return{token:function(n){if(!t||n.sol()){var r=n.match(e,!1);if(r)return 0==r[0].length?(n.next(),"searching"):n.sol()||(n.backUp(1),e.exec(n.next()+r[0]))?(n.match(e),"searching"):(n.next(),null);for(;!n.eol()&&(n.next(),!n.match(e,!1)););}else n.skipToEnd()},query:e}}(t),e.addOverlay(r),e.showMatchesOnScrollbar&&(n.getScrollbarAnnotate()&&n.getScrollbarAnnotate().clear(),n.setScrollbarAnnotate(e.showMatchesOnScrollbar(t))),n.setOverlay(r))}function ht(e,t,n,r){return void 0===r&&(r=1),e.operation((function(){for(var a=e.getCursor(),l=e.getSearchCursor(n,a),d=0;d<r;d++){var h=l.find(t);if(0==d&&h&&Te(l.from(),a)&&(h=l.find(t)),!h&&!(l=e.getSearchCursor(n,t?R(e.lastLine()):R(e.firstLine(),0))).find(t))return}return l.from()}))}function ft(e){var t=et(e);e.removeOverlay(et(e).getOverlay()),t.setOverlay(null),t.getScrollbarAnnotate()&&(t.getScrollbarAnnotate().clear(),t.setScrollbarAnnotate(null))}function pt(e){var t=e.ace.renderer;return{top:t.getFirstFullyVisibleRow(),bottom:t.getLastFullyVisibleRow()}}function gt(e,t,n){if("'"==n||"`"==n)return re.jumpList.find(e,-1)||R(0,0);if("."==n)return mt(e);var r=t.marks[n];return r&&r.find()}function mt(e){var t=e.ace.session.$undoManager;if(t&&t.$lastDelta)return x(t.$lastDelta.end)}var vt=function(){this.buildCommandMap_()};vt.prototype={processCommand:function(e,t,n){var r=this;e.operation((function(){e.curOp.isVimOp=!0,r._processCommand(e,t,n)}))},_processCommand:function(e,t,n){var r=e.state.vim,a=re.registerController.getRegister(":"),l=a.toString();r.visualMode&&ze(e);var d=new S.StringStream(t);a.setText(t);var h,f,p=n||{};p.input=t;try{this.parseInput_(e,d,p)}catch(t){throw st(e,t),t}if(p.commandName){if(h=this.matchCommand_(p.commandName)){if(f=h.name,h.excludeFromCommandHistory&&a.setText(l),this.parseCommandArgs_(d,p,h),"exToKey"==h.type){for(var y=0;y<h.toKeys.length;y++)S.Vim.handleKey(e,h.toKeys[y],"mapping");return}if("exToEx"==h.type)return void this.processCommand(e,h.toInput)}}else void 0!==p.line&&(f="move");if(f)try{yt[f](e,p),h&&h.possiblyAsync||!p.callback||p.callback()}catch(t){throw st(e,t),t}else st(e,'Not an editor command ":'+t+'"')},parseInput_:function(e,t,n){t.eatWhile(":"),t.eat("%")?(n.line=e.firstLine(),n.lineEnd=e.lastLine()):(n.line=this.parseLineSpec_(e,t),void 0!==n.line&&t.eat(",")&&(n.lineEnd=this.parseLineSpec_(e,t)));var r=t.match(/^(\w+)/);return n.commandName=r?r[1]:t.match(/.*/)[0],n},parseLineSpec_:function(e,t){var n=t.match(/^(\d+)/);if(n)return parseInt(n[1],10)-1;switch(t.next()){case".":return this.parseLineSpecOffset_(t,e.getCursor().line);case"$":return this.parseLineSpecOffset_(t,e.lastLine());case"'":var r=t.next(),a=gt(e,e.state.vim,r);if(!a)throw new Error("Mark not set");return this.parseLineSpecOffset_(t,a.line);case"-":case"+":return t.backUp(1),this.parseLineSpecOffset_(t,e.getCursor().line);default:return void t.backUp(1)}},parseLineSpecOffset_:function(e,t){var n=e.match(/^([+-])?(\d+)/);if(n){var r=parseInt(n[2],10);"-"==n[1]?t-=r:t+=r}return t},parseCommandArgs_:function(e,t,n){if(!e.eol()){t.argString=e.match(/.*/)[0];var r=n.argDelimiter||/\s+/,a=Le(t.argString).split(r);a.length&&a[0]&&(t.args=a)}},matchCommand_:function(e){for(var t=e.length;t>0;t--){var n=e.substring(0,t);if(this.commandMap_[n]){var r=this.commandMap_[n];if(0===r.name.indexOf(e))return r}}return null},buildCommandMap_:function(){this.commandMap_={};for(var e=0;e<T.length;e++){var t=T[e],n=t.shortName||t.name;this.commandMap_[n]=t}},map:function(e,t,n){if(":"!=e&&":"==e.charAt(0)){if(n)throw Error("Mode not supported for ex mappings");var r=e.substring(1);":"!=t&&":"==t.charAt(0)?this.commandMap_[r]={name:r,type:"exToEx",toInput:t.substring(1),user:!0}:this.commandMap_[r]={name:r,type:"exToKey",toKeys:t,user:!0}}else if(":"!=t&&":"==t.charAt(0)){var a={keys:e,type:"keyToEx",exArgs:{input:t.substring(1)}};n&&(a.context=n),E.unshift(a)}else{a={keys:e,type:"keyToKey",toKeys:t};n&&(a.context=n),E.unshift(a)}},unmap:function(e,t){if(":"!=e&&":"==e.charAt(0)){if(t)throw Error("Mode not supported for ex mappings");var n=e.substring(1);if(this.commandMap_[n]&&this.commandMap_[n].user)return void delete this.commandMap_[n]}else for(var r=e,a=0;a<E.length;a++)if(r==E[a].keys&&E[a].context===t)return void E.splice(a,1)}};var yt={colorscheme:function(e,t){!t.args||t.args.length<1?st(e,e.getOption("theme")):e.setOption("theme",t.args[0])},map:function(e,t,n){var r=t.args;!r||r.length<2?e&&st(e,"Invalid mapping: "+t.input):bt.map(r[0],r[1],n)},imap:function(e,t){this.map(e,t,"insert")},nmap:function(e,t){this.map(e,t,"normal")},vmap:function(e,t){this.map(e,t,"visual")},unmap:function(e,t,n){var r=t.args;!r||r.length<1?e&&st(e,"No such mapping: "+t.input):bt.unmap(r[0],n)},move:function(e,t){ve.processCommand(e,e.state.vim,{type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0},repeatOverride:t.line+1})},set:function(e,t){var n=t.args,r=t.setCfg||{};if(!n||n.length<1)e&&st(e,"Invalid mapping: "+t.input);else{var a=n[0].split("="),l=a[0],d=a[1],h=!1;if("?"==l.charAt(l.length-1)){if(d)throw Error("Trailing characters: "+t.argString);l=l.substring(0,l.length-1),h=!0}void 0===d&&"no"==l.substring(0,2)&&(l=l.substring(2),d=!1);var f=Z[l]&&"boolean"==Z[l].type;if(f&&null==d&&(d=!0),!f&&void 0===d||h){var p=ne(l,e,r);p instanceof Error?st(e,p.message):st(e,!0===p||!1===p?" "+(p?"":"no")+l:"  "+l+"="+p)}else{var y=te(l,d,e,r);y instanceof Error&&st(e,y.message)}}},setlocal:function(e,t){t.setCfg={scope:"local"},this.set(e,t)},setglobal:function(e,t){t.setCfg={scope:"global"},this.set(e,t)},registers:function(e,t){var n=t.args,r=re.registerController.registers,a="----------Registers----------<br><br>";if(n){n=n.join("");for(var l=0;l<n.length;l++){if(d=n.charAt(l),re.registerController.isValidRegister(d))a+='"'+d+"    "+(r[d]||new pe).toString()+"<br>"}}else for(var d in r){var h=r[d].toString();h.length&&(a+='"'+d+"    "+h+"<br>")}st(e,a)},sort:function(e,t){var n,r,a,l,d;var h=function(){if(t.argString){var e=new S.StringStream(t.argString);if(e.eat("!")&&(n=!0),e.eol())return;if(!e.eatSpace())return"Invalid arguments";var h=e.match(/([dinuox]+)?\s*(\/.+\/)?\s*/);if(!h&&!e.eol())return"Invalid arguments";if(h[1]){r=-1!=h[1].indexOf("i"),a=-1!=h[1].indexOf("u");var f=-1!=h[1].indexOf("d")||-1!=h[1].indexOf("n")&&1,p=-1!=h[1].indexOf("x")&&1,y=-1!=h[1].indexOf("o")&&1;if(f+p+y>1)return"Invalid arguments";l=(f?"decimal":p&&"hex")||y&&"octal"}h[2]&&(d=new RegExp(h[2].substr(1,h[2].length-2),r?"i":""))}}();if(h)st(e,h+": "+t.argString);else{var f=t.line||e.firstLine(),p=t.lineEnd||t.line||e.lastLine();if(f!=p){var y=R(f,0),w=R(p,Pe(e,p)),_=e.getRange(y,w).split("\n"),C=d||("decimal"==l?/(-?)([\d]+)/:"hex"==l?/(-?)(?:0x)?([0-9a-f]+)/i:"octal"==l?/([0-7]+)/:null),k="decimal"==l?10:"hex"==l?16:"octal"==l?8:null,x=[],E=[];if(l||d)for(var A=0;A<_.length;A++){var T=d?_[A].match(d):null;T&&""!=T[0]?x.push(T):!d&&C.exec(_[A])?x.push(_[A]):E.push(_[A])}else E=_;if(x.sort(d?function(e,t){var a;return n&&(a=e,e=t,t=a),r&&(e[0]=e[0].toLowerCase(),t[0]=t[0].toLowerCase()),e[0]<t[0]?-1:1}:P),d)for(A=0;A<x.length;A++)x[A]=x[A].input;else l||E.sort(P);if(_=n?x.concat(E):E.concat(x),a){var O,M=_;_=[];for(A=0;A<M.length;A++)M[A]!=O&&_.push(M[A]),O=M[A]}e.replaceRange(_.join("\n"),y,w)}}function P(e,t){var a;n&&(a=e,e=t,t=a);r&&(e=e.toLowerCase(),t=t.toLowerCase());var d=l&&C.exec(e),h=l&&C.exec(t);return d?(d=parseInt((d[1]+d[2]).toLowerCase(),k))-(h=parseInt((h[1]+h[2]).toLowerCase(),k)):e<t?-1:1}},global:function(e,t){var n=t.argString;if(n){var r,a=void 0!==t.line?t.line:e.firstLine(),l=t.lineEnd||t.line||e.lastLine(),d=function(e){return nt(e,"/")}(n),h=n;if(d.length&&(h=d[0],r=d.slice(1,d.length).join("/")),h)try{ut(e,h,!0,!0)}catch(t){return void st(e,"Invalid regex: "+h)}for(var f=et(e).getQuery(),p=[],y="",w=a;w<=l;w++){f.test(e.getLine(w))&&(p.push(w+1),y+=e.getLine(w)+"<br>")}if(r){var _=0,C=function(){if(_<p.length){var t=p[_]+r;bt.processCommand(e,t,{callback:C})}_++};C()}else st(e,y)}else st(e,"Regular Expression missing from global")},substitute:function(e,t){if(!e.getSearchCursor)throw new Error("Search feature not available. Requires searchcursor.js or any other getSearchCursor implementation.");var n,r,a,l,d=t.argString,h=d?nt(d,d[0]):[],f="",p=!1,y=!1;if(h.length)n=h[0],ne("pcre")&&""!==n&&(n=new RegExp(n).source),f=h[1],n&&"$"===n[n.length-1]&&(n=n.slice(0,n.length-1)+"\\n",f=f?f+"\n":"\n"),void 0!==f&&(f=ne("pcre")?function(e){for(var t=new S.StringStream(e),n=[];!t.eol();){for(;t.peek()&&"\\"!=t.peek();)n.push(t.next());var r=!1;for(var a in ot)if(t.match(a,!0)){r=!0,n.push(ot[a]);break}r||n.push(t.next())}return n.join("")}(f.replace(/([^\\])&/g,"$1$$&")):function(e){for(var t,n=!1,r=[],a=-1;a<e.length;a++){var l=e.charAt(a)||"",d=e.charAt(a+1)||"";it[l+d]?(r.push(it[l+d]),a++):n?(r.push(l),n=!1):"\\"===l?(n=!0,t=d,j.test(t)||"$"===d?r.push("$"):"/"!==d&&"\\"!==d&&r.push("\\")):("$"===l&&r.push("$"),r.push(l),"/"===d&&r.push("\\"))}return r.join("")}(f),re.lastSubstituteReplacePart=f),r=h[2]?h[2].split(" "):[];else if(d&&d.length)return void st(e,"Substitutions should be of the form :s/pattern/replace/");if(r&&(a=r[0],l=parseInt(r[1]),a&&(-1!=a.indexOf("c")&&(p=!0,a.replace("c","")),-1!=a.indexOf("g")&&(y=!0,a.replace("g","")),n=ne("pcre")?n+"/"+a:n.replace(/\//g,"\\/")+"/"+a)),n)try{ut(e,n,!0,!0)}catch(t){return void st(e,"Invalid regex: "+n)}if(void 0!==(f=f||re.lastSubstituteReplacePart)){var w=et(e).getQuery(),_=void 0!==t.line?t.line:e.getCursor().line,C=t.lineEnd||_;_==e.firstLine()&&C==e.lastLine()&&(C=1/0),l&&(C=(_=C)+l-1);var k=Ce(e,R(_,0)),x=e.getSearchCursor(w,k);!function(e,t,n,r,a,l,d,h,f){e.state.vim.exMode=!0;var p=!1,y=l.from();function w(){e.operation((function(){for(;!p;)_(),C();k()}))}function _(){var t=e.getRange(l.from(),l.to()).replace(d,h);l.replace(t)}function C(){for(;l.findNext()&&(t=l.from(),d=r,h=a,"number"!=typeof t&&(t=t.line),d instanceof Array?Q(t,d):h?t>=d&&t<=h:t==d);)if(n||!y||l.from().line!=y.line)return e.scrollIntoView(l.from(),30),e.setSelection(l.from(),l.to()),y=l.from(),void(p=!1);var t,d,h;p=!0}function k(t){if(t&&t(),e.focus(),y){e.setCursor(y);var n=e.state.vim;n.exMode=!1,n.lastHPos=n.lastHSPos=y.ch}f&&f()}if(C(),p)return void st(e,"No matches for "+d.source);if(!t)return w(),void(f&&f());ct(e,{prefix:"replace with <strong>"+h+"</strong> (y/n/a/q/l)",onKeyDown:function(t,n,r){switch(S.e_stop(t),S.keyName(t)){case"Y":_(),C();break;case"N":C();break;case"A":var a=f;f=void 0,e.operation(w),f=a;break;case"L":_();case"Q":case"Esc":case"Ctrl-C":case"Ctrl-[":k(r)}return p&&k(r),!0}})}(e,p,y,_,C,x,w,f,t.callback)}else st(e,"No previous substitute regular expression")},redo:S.commands.redo,undo:S.commands.undo,write:function(e){S.commands.save?S.commands.save(e):e.save&&e.save()},nohlsearch:function(e){ft(e)},yank:function(e){var t=Ae(e.getCursor()).line,n=e.getLine(t);re.registerController.pushText("0","yank",n,!0,!0)},delmarks:function(e,t){if(t.argString&&Le(t.argString))for(var n=e.state.vim,r=new S.StringStream(Le(t.argString));!r.eol();){r.eatSpace();var a=r.pos;if(!r.match(/[a-zA-Z]/,!1))return void st(e,"Invalid argument: "+t.argString.substring(a));var l=r.next();if(r.match("-",!0)){if(!r.match(/[a-zA-Z]/,!1))return void st(e,"Invalid argument: "+t.argString.substring(a));var d=l,h=r.next();if(!(K(d)&&K(h)||Y(d)&&Y(h)))return void st(e,"Invalid argument: "+d+"-");var f=d.charCodeAt(0),p=h.charCodeAt(0);if(f>=p)return void st(e,"Invalid argument: "+t.argString.substring(a));for(var y=0;y<=p-f;y++){var w=String.fromCharCode(f+y);delete n.marks[w]}}else delete n.marks[l]}else st(e,"Argument required")}},bt=new vt;function wt(e){var t=e.state.vim,n=re.macroModeState,r=re.registerController.getRegister("."),a=n.isPlaying,l=n.lastInsertModeChanges;a||(e.off("change",St),S.off(e.getInputField(),"keydown",Tt)),!a&&t.insertModeRepeat>1&&($t(e,t,t.insertModeRepeat-1,!0),t.lastEditInputState.repeatOverride=t.insertModeRepeat),delete t.insertModeRepeat,t.insertMode=!1,e.setCursor(e.getCursor().line,e.getCursor().ch-1),e.setOption("keyMap","vim"),e.setOption("disableInput",!0),e.toggleOverwrite(!1),r.setText(l.changes.join("")),S.signal(e,"vim-mode-change",{mode:"normal"}),n.isRecording&&function(e){if(e.isPlaying)return;var t=e.latestRegister,n=re.registerController.getRegister(t);n&&n.pushInsertModeChanges&&n.pushInsertModeChanges(e.lastInsertModeChanges)}(n)}function _t(e){E.unshift(e)}function Ct(e,t,n,r){var a=re.registerController.getRegister(r);if(":"==r)return a.keyBuffer[0]&&bt.processCommand(e,a.keyBuffer[0]),void(n.isPlaying=!1);var l=a.keyBuffer,d=0;n.isPlaying=!0,n.replaySearchQueries=a.searchQueries.slice(0);for(var h=0;h<l.length;h++)for(var f,p,y=l[h];y;)if(p=(f=/<\w+-.+?>|<\w+>|./.exec(y))[0],y=y.substring(f.index+p.length),S.Vim.handleKey(e,p,"macro"),t.insertMode){var w=a.insertModeChanges[d++].changes;re.macroModeState.lastInsertModeChanges.changes=w,Rt(e,w,1),wt(e)}n.isPlaying=!1}function St(e,t){var n=re.macroModeState,r=n.lastInsertModeChanges;if(!n.isPlaying)for(;t;){if(r.expectCursorActivityForChange=!0,r.ignoreCount>1)r.ignoreCount--;else if("+input"==t.origin||"paste"==t.origin||void 0===t.origin){var a=e.listSelections().length;a>1&&(r.ignoreCount=a);var l=t.text.join("\n");r.maybeReset&&(r.changes=[],r.maybeReset=!1),l&&(e.state.overwrite&&!/\n/.test(l)?r.changes.push([l]):r.changes.push(l))}t=t.next}}function kt(e){var t=e.state.vim;if(t.insertMode){var n=re.macroModeState;if(n.isPlaying)return;var r=n.lastInsertModeChanges;r.expectCursorActivityForChange?r.expectCursorActivityForChange=!1:r.maybeReset=!0}else e.curOp.isVimOp||Et(e,t);t.visualMode&&xt(e)}function xt(e){var t=e.state.vim,n=Ce(e,Ae(t.sel.head)),r=ke(n,0,1);t.fakeCursor&&t.fakeCursor.clear(),t.fakeCursor=e.markText(n,r,{className:"cm-animate-fat-cursor"})}function Et(e,t,n){var r=e.getCursor("anchor"),a=e.getCursor("head");if(t.visualMode&&!e.somethingSelected()?ze(e,!1):t.visualMode||t.insertMode||!e.somethingSelected()||(t.visualMode=!0,t.visualLine=!1,S.signal(e,"vim-mode-change",{mode:"visual"})),t.visualMode){var l=$e(a,r)?0:-1,d=$e(a,r)?-1:0;a=ke(a,0,l),r=ke(r,0,d),t.sel={anchor:r,head:a},Xe(e,t,"<",Re(a,r)),Xe(e,t,">",Oe(a,r))}else t.insertMode||n||(t.lastHPos=e.getCursor().ch)}function At(e){this.keyName=e}function Tt(e){var t=re.macroModeState.lastInsertModeChanges,n=S.keyName(e);n&&(-1==n.indexOf("Delete")&&-1==n.indexOf("Backspace")||S.lookupKey(n,"vim-insert",(function(){return t.maybeReset&&(t.changes=[],t.maybeReset=!1),t.changes.push(new At(n)),!0})))}function $t(e,t,n,r){var a=re.macroModeState;a.isPlaying=!0;var l=!!t.lastEditActionCommand,d=t.inputState;function h(){l?ve.processAction(e,t,t.lastEditActionCommand):ve.evalInput(e,t)}function f(n){if(a.lastInsertModeChanges.changes.length>0){n=t.lastEditActionCommand?n:1;var r=a.lastInsertModeChanges;Rt(e,r.changes,n)}}if(t.inputState=t.lastEditInputState,l&&t.lastEditActionCommand.interlaceInsertRepeat)for(var p=0;p<n;p++)h(),f(1);else r||h(),f(n);t.inputState=d,t.insertMode&&!r&&wt(e),a.isPlaying=!1}function Rt(e,t,n){function r(t){return"string"==typeof t?S.commands[t](e):t(e),!0}var a=e.getCursor("head"),l=re.macroModeState.lastInsertModeChanges.visualBlock;l&&(Fe(e,a,l+1),n=e.listSelections().length,e.setCursor(a));for(var d=0;d<n;d++){l&&e.setCursor(ke(a,d,0));for(var h=0;h<t.length;h++){var f=t[h];if(f instanceof At)S.lookupKey(f.keyName,"vim-insert",r);else if("string"==typeof f){var p=e.getCursor();e.replaceRange(f,p,p)}else{var y=e.getCursor(),w=ke(y,0,f[0].length);e.replaceRange(f[0],y,w)}}}l&&e.setCursor(ke(a,0,1))}S.keyMap.vim={attach:P,detach:M,call:L},ee("insertModeEscKeysTimeout",200,"number"),S.keyMap["vim-insert"]={fallthrough:["default"],attach:P,detach:M,call:L},S.keyMap["vim-replace"]={Backspace:"goCharLeft",fallthrough:["vim-insert"],attach:P,detach:M,call:L},ue(),S.Vim=O();var Ot={return:"CR",backspace:"BS",delete:"Del",esc:"Esc",left:"Left",right:"Right",up:"Up",down:"Down",space:"Space",home:"Home",end:"End",pageup:"PageUp",pagedown:"PageDown",enter:"CR"};var Mt=(O=S.Vim).handleKey.bind(O);function Pt(e){var t=new e.constructor;return Object.keys(e).forEach((function(n){var r=e[n];Array.isArray(r)?r=r.slice():r&&"object"==typeof r&&r.constructor!=Object&&(r=Pt(r)),t[n]=r})),e.sel&&(t.sel={head:e.sel.head&&Ae(e.sel.head),anchor:e.sel.anchor&&Ae(e.sel.anchor)}),t}O.handleKey=function(e,t,n){return e.operation((function(){return Mt(e,t,n)}),!0)},t.CodeMirror=S;var Lt=O.maybeInitVimState_;function Dt(e,t){t.off("beforeEndOperation",Dt);var n=t.state.cm.vimCmd;n&&t.execCommand(n.exec?n:n.name,n.args),t.curOp=t.prevOp}t.handler={$id:"ace/keyboard/vim",drawCursor:function(e,t,n,a,d){var h=this.state.vim||{},f=n.characterWidth,p=n.lineHeight,y=t.top,w=t.left;h.insertMode||!(a.cursor?r.comparePoints(a.cursor,a.start)<=0:d.selection.isBackwards()||d.selection.isEmpty())&&w>f&&(w-=f);!h.insertMode&&h.status&&(y+=p/=2),l.translate(e,w,y),l.setStyle(e.style,"width",f+"px"),l.setStyle(e.style,"height",p+"px")},handleKeyboard:function(e,t,n,r,a){var l=e.editor,d=l.state.cm,h=Lt(d);if(-1!=r){if(h.insertMode||(-1==t?(n.charCodeAt(0)>255&&e.inputKey&&(n=e.inputKey)&&4==e.inputHash&&(n=n.toUpperCase()),e.inputChar=n):4==t||0==t?e.inputKey==n&&e.inputHash==t&&e.inputChar?(n=e.inputChar,t=-1):(e.inputChar=null,e.inputKey=n,e.inputHash=t):e.inputChar=e.inputKey=null),"c"==n&&1==t&&!y.isMac&&l.getCopyText())return l.once("copy",(function(){l.selection.clearSelection()})),{command:"null",passEvent:!0};if("esc"==n&&!h.insertMode&&!h.visualMode&&!d.ace.inMultiSelectMode){var f=et(d).getOverlay();f&&d.removeOverlay(f)}if(-1==t||1&t||0===t&&n.length>1){var p=h.insertMode,w=function(e,t,n){t.length>1&&"n"==t[0]&&(t=t.replace("numpad","")),t=Ot[t]||t;var r="";return n.ctrlKey&&(r+="C-"),n.altKey&&(r+="A-"),(r||t.length>1)&&n.shiftKey&&(r+="S-"),(r+=t).length>1&&(r="<"+r+">"),r}(0,n,a||{});null==h.status&&(h.status="");var _=function(e,t,n){var r=!1,a=O.maybeInitVimState_(e),l=a.visualBlock||a.wasInVisualBlock,d=e.ace.inMultiSelectMode;if(a.wasInVisualBlock&&!d?a.wasInVisualBlock=!1:d&&a.visualBlock&&(a.wasInVisualBlock=!0),"<Esc>"!=t||a.insertMode||a.visualMode||!d)if(l||!d||e.ace.inVirtualSelectionMode)r=O.handleKey(e,t,n);else{var h=Pt(a);e.operation((function(){e.ace.forEachSelection((function(){var a=e.ace.selection;e.state.vim.lastHPos=null==a.$desiredColumn?a.lead.column:a.$desiredColumn;var l=e.getCursor("head"),d=e.getCursor("anchor"),f=$e(l,d)?0:-1,p=$e(l,d)?-1:0;l=ke(l,0,f),d=ke(d,0,p),e.state.vim.sel.head=l,e.state.vim.sel.anchor=d,r=Mt(e,t,n),a.$desiredColumn=-1==e.state.vim.lastHPos?null:e.state.vim.lastHPos,e.virtualSelectionMode()&&(e.state.vim=Pt(h))})),e.curOp.cursorActivity&&!r&&(e.curOp.cursorActivity=!1)}),!0)}else e.ace.exitMultiSelectMode();return!r||a.visualMode||a.insert||a.visualMode==e.somethingSelected()||Et(e,a,!0),r}(d,w,"user");if(h=Lt(d),_&&null!=h.status?h.status+=w:null==h.status&&(h.status=""),d._signal("changeStatus"),!_&&(-1!=t||p))return;return{command:"null",passEvent:!_}}}},attach:function(e){e.state||(e.state={});var t=new S(e);function n(){var n=Lt(t).insertMode;t.ace.renderer.setStyle("normal-mode",!n),e.textInput.setCommandMode(!n),e.renderer.$keepTextAreaAtCursor=n,e.renderer.$blockCursor=!n}e.state.cm=t,e.$vimModeHandler=this,S.keyMap.vim.attach(t),Lt(t).status=null,t.on("vim-command-done",(function(){t.virtualSelectionMode()||(Lt(t).status=null,t.ace._signal("changeStatus"),t.ace.session.markUndoGroup())})),t.on("changeStatus",(function(){t.ace.renderer.updateCursor(),t.ace._signal("changeStatus")})),t.on("vim-mode-change",(function(){t.virtualSelectionMode()||(n(),t._signal("changeStatus"))})),n(),e.renderer.$cursorLayer.drawCursor=this.drawCursor.bind(t)},detach:function(e){var t=e.state.cm;S.keyMap.vim.detach(t),t.destroy(),e.state.cm=null,e.$vimModeHandler=null,e.renderer.$cursorLayer.drawCursor=null,e.renderer.setStyle("normal-mode",!1),e.textInput.setCommandMode(!1),e.renderer.$keepTextAreaAtCursor=!0},getStatusText:function(e){var t=e.state.cm,n=Lt(t);if(n.insertMode)return"INSERT";var r="";return n.visualMode&&(r+="VISUAL",n.visualLine&&(r+=" LINE"),n.visualBlock&&(r+=" BLOCK")),n.status&&(r+=(r?" ":"")+n.status),r}},O.defineOption({name:"wrap",set:function(e,t){t&&t.ace.setOption("wrap",e)},type:"boolean"},!1),O.defineEx("write","w",(function(){console.log(":write is not implemented")})),E.push({keys:"zc",type:"action",action:"fold",actionArgs:{open:!1}},{keys:"zC",type:"action",action:"fold",actionArgs:{open:!1,all:!0}},{keys:"zo",type:"action",action:"fold",actionArgs:{open:!0}},{keys:"zO",type:"action",action:"fold",actionArgs:{open:!0,all:!0}},{keys:"za",type:"action",action:"fold",actionArgs:{toggle:!0}},{keys:"zA",type:"action",action:"fold",actionArgs:{toggle:!0,all:!0}},{keys:"zf",type:"action",action:"fold",actionArgs:{open:!0,all:!0}},{keys:"zd",type:"action",action:"fold",actionArgs:{open:!0,all:!0}},{keys:"<C-A-k>",type:"action",action:"aceCommand",actionArgs:{name:"addCursorAbove"}},{keys:"<C-A-j>",type:"action",action:"aceCommand",actionArgs:{name:"addCursorBelow"}},{keys:"<C-A-S-k>",type:"action",action:"aceCommand",actionArgs:{name:"addCursorAboveSkipCurrent"}},{keys:"<C-A-S-j>",type:"action",action:"aceCommand",actionArgs:{name:"addCursorBelowSkipCurrent"}},{keys:"<C-A-h>",type:"action",action:"aceCommand",actionArgs:{name:"selectMoreBefore"}},{keys:"<C-A-l>",type:"action",action:"aceCommand",actionArgs:{name:"selectMoreAfter"}},{keys:"<C-A-S-h>",type:"action",action:"aceCommand",actionArgs:{name:"selectNextBefore"}},{keys:"<C-A-S-l>",type:"action",action:"aceCommand",actionArgs:{name:"selectNextAfter"}}),_e.aceCommand=function(e,t,n){e.vimCmd=t,e.ace.inVirtualSelectionMode?e.ace.on("beforeEndOperation",Dt):Dt(null,e.ace)},_e.fold=function(e,t,n){e.ace.execCommand(["toggleFoldWidget","toggleFoldWidget","foldOther","unfoldall"][(t.all?2:0)+(t.open?1:0)])},t.handler.defaultKeymap=E,t.handler.actions=_e,t.Vim=O})),ace.require(["ace/keyboard/vim"],(function(t){e&&(e.exports=t)}))}).call(this,n(68)(e))},function(e,t,n){var r,a,l=n(409),d=n(410),h=0,f=0;e.exports=function(e,t,n){var p=t&&n||0,y=t||[],w=(e=e||{}).node||r,_=void 0!==e.clockseq?e.clockseq:a;if(null==w||null==_){var C=l();null==w&&(w=r=[1|C[0],C[1],C[2],C[3],C[4],C[5]]),null==_&&(_=a=16383&(C[6]<<8|C[7]))}var S=void 0!==e.msecs?e.msecs:(new Date).getTime(),k=void 0!==e.nsecs?e.nsecs:f+1,x=S-h+(k-f)/1e4;if(x<0&&void 0===e.clockseq&&(_=_+1&16383),(x<0||S>h)&&void 0===e.nsecs&&(k=0),k>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");h=S,f=k,a=_;var E=(1e4*(268435455&(S+=122192928e5))+k)%4294967296;y[p++]=E>>>24&255,y[p++]=E>>>16&255,y[p++]=E>>>8&255,y[p++]=255&E;var A=S/4294967296*1e4&268435455;y[p++]=A>>>8&255,y[p++]=255&A,y[p++]=A>>>24&15|16,y[p++]=A>>>16&255,y[p++]=_>>>8|128,y[p++]=255&_;for(var T=0;T<6;++T)y[p+T]=w[T];return t||d(y)}},function(e,t,n){var r=n(409),a=n(410);e.exports=function(e,t,n){var l=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var d=(e=e||{}).random||(e.rng||r)();if(d[6]=15&d[6]|64,d[8]=63&d[8]|128,t)for(var h=0;h<16;++h)t[l+h]=d[h];return t||a(d)}},function(e,t,n){(function(t,r,a){var l;l=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";var r=n(1),a=n(147),l=n(162),d=n(163),h=n(151),f=n(164),p=n(156),y=n(153);if(n(4)()){var w=n(165).PDFNodeStream;a.setPDFNetworkStreamFactory((function(e){return new w(e)}))}else{var _,C=n(168).PDFNetworkStream;h.isFetchSupported()&&(_=n(169).PDFFetchStream),a.setPDFNetworkStreamFactory((function(e){return _&&h.isValidFetchUrl(e.url)?new _(e):new C(e)}))}t.build=a.build,t.version=a.version,t.getDocument=a.getDocument,t.LoopbackPort=a.LoopbackPort,t.PDFDataRangeTransport=a.PDFDataRangeTransport,t.PDFWorker=a.PDFWorker,t.renderTextLayer=l.renderTextLayer,t.AnnotationLayer=d.AnnotationLayer,t.createPromiseCapability=r.createPromiseCapability,t.PasswordResponses=r.PasswordResponses,t.InvalidPDFException=r.InvalidPDFException,t.MissingPDFException=r.MissingPDFException,t.SVGGraphics=f.SVGGraphics,t.NativeImageDecoding=r.NativeImageDecoding,t.CMapCompressionType=r.CMapCompressionType,t.PermissionFlag=r.PermissionFlag,t.UnexpectedResponseException=r.UnexpectedResponseException,t.OPS=r.OPS,t.VerbosityLevel=r.VerbosityLevel,t.UNSUPPORTED_FEATURES=r.UNSUPPORTED_FEATURES,t.createValidAbsoluteUrl=r.createValidAbsoluteUrl,t.createObjectURL=r.createObjectURL,t.removeNullCharacters=r.removeNullCharacters,t.shadow=r.shadow,t.Util=r.Util,t.ReadableStream=r.ReadableStream,t.URL=r.URL,t.RenderingCancelledException=h.RenderingCancelledException,t.getFilenameFromUrl=h.getFilenameFromUrl,t.LinkTarget=h.LinkTarget,t.addLinkAttributes=h.addLinkAttributes,t.loadScript=h.loadScript,t.PDFDateString=h.PDFDateString,t.GlobalWorkerOptions=p.GlobalWorkerOptions,t.apiCompatibilityParams=y.apiCompatibilityParams},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arrayByteLength=R,t.arraysToBytes=function(e){if(1===e.length&&e[0]instanceof Uint8Array)return e[0];var t,n,r,a=0,l=e.length;for(t=0;t<l;t++)n=e[t],r=R(n),a+=r;var d=0,h=new Uint8Array(a);for(t=0;t<l;t++)(n=e[t])instanceof Uint8Array||(n="string"==typeof n?T(n):new Uint8Array(n)),r=n.byteLength,h.set(n,d),d+=r;return h},t.assert=y,t.bytesToString=function(e){y(null!==e&&"object"===l(e)&&void 0!==e.length,"Invalid argument for bytesToString");var t=e.length;if(t<8192)return String.fromCharCode.apply(null,e);for(var n=[],r=0;r<t;r+=8192){var a=Math.min(r+8192,t),d=e.subarray(r,a);n.push(String.fromCharCode.apply(null,d))}return n.join("")},t.createPromiseCapability=function(){var e=Object.create(null),t=!1;return Object.defineProperty(e,"settled",{get:function(){return t}}),e.promise=new Promise((function(n,r){e.resolve=function(e){t=!0,n(e)},e.reject=function(e){t=!0,r(e)}})),e},t.getVerbosityLevel=function(){return h},t.info=function(e){h>=d.INFOS&&console.log("Info: "+e)},t.isArrayBuffer=function(e){return"object"===l(e)&&null!==e&&void 0!==e.byteLength},t.isArrayEqual=function(e,t){return e.length===t.length&&e.every((function(e,n){return e===t[n]}))},t.isBool=function(e){return"boolean"==typeof e},t.isEmptyObj=function(e){for(var t in e)return!1;return!0},t.isNum=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isSpace=function(e){return 32===e||9===e||13===e||10===e},t.isSameOrigin=function(e,t){try{var n=new a.URL(e);if(!n.origin||"null"===n.origin)return!1}catch(e){return!1}var r=new a.URL(t,n);return n.origin===r.origin},t.createValidAbsoluteUrl=function(e,t){if(!e)return null;try{var n=t?new a.URL(e,t):new a.URL(e);if(function(e){if(!e)return!1;switch(e.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(n))return n}catch(e){}return null},t.isLittleEndian=function(){var e=new Uint8Array(4);return e[0]=1,1===new Uint32Array(e.buffer,0,1)[0]},t.isEvalSupported=function(){try{return new Function(""),!0}catch(e){return!1}},t.log2=function(e){return e<=0?0:Math.ceil(Math.log2(e))},t.readInt8=function(e,t){return e[t]<<24>>24},t.readUint16=function(e,t){return e[t]<<8|e[t+1]},t.readUint32=function(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0},t.removeNullCharacters=function(e){return"string"!=typeof e?(f("The argument for removeNullCharacters must be a string."),e):e.replace(A,"")},t.setVerbosityLevel=function(e){Number.isInteger(e)&&(h=e)},t.shadow=function(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!1}),n},t.string32=function(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)},t.stringToBytes=T,t.stringToPDFString=function(e){var t,n=e.length,r=[];if("þ"===e[0]&&"ÿ"===e[1])for(t=2;t<n;t+=2)r.push(String.fromCharCode(e.charCodeAt(t)<<8|e.charCodeAt(t+1)));else for(t=0;t<n;++t){var a=P[e.charCodeAt(t)];r.push(a?String.fromCharCode(a):e.charAt(t))}return r.join("")},t.stringToUTF8String=function(e){return decodeURIComponent(escape(e))},t.utf8StringToString=function(e){return unescape(encodeURIComponent(e))},t.warn=f,t.unreachable=p,Object.defineProperty(t,"ReadableStream",{enumerable:!0,get:function(){return r.ReadableStream}}),Object.defineProperty(t,"URL",{enumerable:!0,get:function(){return a.URL}}),t.createObjectURL=t.FormatError=t.Util=t.UnknownErrorException=t.UnexpectedResponseException=t.TextRenderingMode=t.StreamType=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.NativeImageDecoding=t.MissingPDFException=t.InvalidPDFException=t.AbortException=t.CMapCompressionType=t.ImageKind=t.FontType=t.AnnotationType=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationBorderStyleType=t.UNSUPPORTED_FEATURES=t.VerbosityLevel=t.OPS=t.IDENTITY_MATRIX=t.FONT_IDENTITY_MATRIX=void 0,n(2);var r=n(143),a=n(145);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.IDENTITY_MATRIX=[1,0,0,1,0,0],t.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],t.NativeImageDecoding={NONE:"none",DECODE:"decode",DISPLAY:"display"},t.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},t.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},t.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},t.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},t.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},t.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},t.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},t.StreamType={UNKNOWN:0,FLATE:1,LZW:2,DCT:3,JPX:4,JBIG:5,A85:6,AHX:7,CCF:8,RL:9},t.FontType={UNKNOWN:0,TYPE1:1,TYPE1C:2,CIDFONTTYPE0:3,CIDFONTTYPE0C:4,TRUETYPE:5,CIDFONTTYPE2:6,TYPE3:7,OPENTYPE:8,TYPE0:9,MMTYPE1:10};var d={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=d,t.CMapCompressionType={NONE:0,BINARY:1,STREAM:2},t.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},t.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",smask:"smask",shadingPattern:"shadingPattern",font:"font"},t.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};var h=d.WARNINGS;function f(e){h>=d.WARNINGS&&console.log("Warning: "+e)}function p(e){throw new Error(e)}function y(e,t){e||p(t)}var w=function(){function e(e,t){this.name="PasswordException",this.message=e,this.code=t}return e.prototype=new Error,e.constructor=e,e}();t.PasswordException=w;var _=function(){function e(e,t){this.name="UnknownErrorException",this.message=e,this.details=t}return e.prototype=new Error,e.constructor=e,e}();t.UnknownErrorException=_;var C=function(){function e(e){this.name="InvalidPDFException",this.message=e}return e.prototype=new Error,e.constructor=e,e}();t.InvalidPDFException=C;var S=function(){function e(e){this.name="MissingPDFException",this.message=e}return e.prototype=new Error,e.constructor=e,e}();t.MissingPDFException=S;var k=function(){function e(e,t){this.name="UnexpectedResponseException",this.message=e,this.status=t}return e.prototype=new Error,e.constructor=e,e}();t.UnexpectedResponseException=k;var x=function(){function FormatError(e){this.message=e}return FormatError.prototype=new Error,FormatError.prototype.name="FormatError",FormatError.constructor=FormatError,FormatError}();t.FormatError=x;var E=function(){function e(e){this.name="AbortException",this.message=e}return e.prototype=new Error,e.constructor=e,e}();t.AbortException=E;var A=/\x00/g;function T(e){y("string"==typeof e,"Invalid argument for stringToBytes");for(var t=e.length,n=new Uint8Array(t),r=0;r<t;++r)n[r]=255&e.charCodeAt(r);return n}function R(e){return void 0!==e.length?e.length:(y(void 0!==e.byteLength),e.byteLength)}var O=function(){function e(){}var t=["rgb(",0,",",0,",",0,")"];return e.makeCssRgb=function(e,n,r){return t[1]=e,t[3]=n,t[5]=r,t.join("")},e.transform=function(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]},e.applyTransform=function(e,t){return[e[0]*t[0]+e[1]*t[2]+t[4],e[0]*t[1]+e[1]*t[3]+t[5]]},e.applyInverseTransform=function(e,t){var n=t[0]*t[3]-t[1]*t[2];return[(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/n,(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/n]},e.getAxialAlignedBoundingBox=function(t,n){var r=e.applyTransform(t,n),a=e.applyTransform(t.slice(2,4),n),l=e.applyTransform([t[0],t[3]],n),d=e.applyTransform([t[2],t[1]],n);return[Math.min(r[0],a[0],l[0],d[0]),Math.min(r[1],a[1],l[1],d[1]),Math.max(r[0],a[0],l[0],d[0]),Math.max(r[1],a[1],l[1],d[1])]},e.inverseTransform=function(e){var t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]},e.apply3dTransform=function(e,t){return[e[0]*t[0]+e[1]*t[1]+e[2]*t[2],e[3]*t[0]+e[4]*t[1]+e[5]*t[2],e[6]*t[0]+e[7]*t[1]+e[8]*t[2]]},e.singularValueDecompose2dScale=function(e){var t=[e[0],e[2],e[1],e[3]],n=e[0]*t[0]+e[1]*t[2],r=e[0]*t[1]+e[1]*t[3],a=e[2]*t[0]+e[3]*t[2],l=e[2]*t[1]+e[3]*t[3],d=(n+l)/2,h=Math.sqrt((n+l)*(n+l)-4*(n*l-a*r))/2,f=d+h||1,p=d-h||1;return[Math.sqrt(f),Math.sqrt(p)]},e.normalizeRect=function(e){var t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t},e.intersect=function(t,n){function r(e,t){return e-t}var a=[t[0],t[2],n[0],n[2]].sort(r),l=[t[1],t[3],n[1],n[3]].sort(r),d=[];return t=e.normalizeRect(t),n=e.normalizeRect(n),(a[0]===t[0]&&a[1]===n[0]||a[0]===n[0]&&a[1]===t[0])&&(d[0]=a[1],d[2]=a[2],(l[0]===t[1]&&l[1]===n[1]||l[0]===n[1]&&l[1]===t[1])&&(d[1]=l[1],d[3]=l[2],d))},e}();t.Util=O;var M,P=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364],L=(M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!n&&a.URL.createObjectURL){var r=new Blob([e],{type:t});return a.URL.createObjectURL(r)}for(var l="data:"+t+";base64,",d=0,h=e.length;d<h;d+=3){var f=255&e[d],p=255&e[d+1],y=255&e[d+2],w=f>>2,_=(3&f)<<4|p>>4,C=d+1<h?(15&p)<<2|y>>6:64,S=d+2<h?63&y:64;l+=M[w]+M[_]+M[C]+M[S]}return l});t.createObjectURL=L},function(e,n,r){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l=r(3);if(!l._pdfjsCompatibilityChecked){l._pdfjsCompatibilityChecked=!0;var d=r(4),h="object"===("undefined"==typeof window?"undefined":a(window))&&"object"===("undefined"==typeof document?"undefined":a(document));!l.btoa&&d()&&(l.btoa=function(e){return t.from(e,"binary").toString("base64")}),!l.atob&&d()&&(l.atob=function(e){return t.from(e,"base64").toString("binary")}),h&&void 0===Element.prototype.remove&&(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),function(){if(h&&!d()){var e=document.createElement("div");if(e.classList.add("testOne","testTwo"),!0!==e.classList.contains("testOne")||!0!==e.classList.contains("testTwo")){var t=DOMTokenList.prototype.add,n=DOMTokenList.prototype.remove;DOMTokenList.prototype.add=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(var a=0,l=n;a<l.length;a++){var d=l[a];t.call(this,d)}},DOMTokenList.prototype.remove=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var a=0,l=t;a<l.length;a++){var d=l[a];n.call(this,d)}}}}}(),h&&!d()&&!1!==document.createElement("div").classList.toggle("test",0)&&(DOMTokenList.prototype.toggle=function(e){var t=arguments.length>1?!!arguments[1]:!this.contains(e);return this[t?"add":"remove"](e),t}),String.prototype.startsWith||r(5),String.prototype.endsWith||r(36),String.prototype.includes||r(38),Array.prototype.includes||r(40),Array.from||r(47),Object.assign||r(70),Math.log2||(Math.log2=r(75)),Number.isNaN||(Number.isNaN=r(77)),Number.isInteger||(Number.isInteger=r(79)),l.Promise&&l.Promise.prototype&&l.Promise.prototype.finally||(l.Promise=r(82)),l.WeakMap||(l.WeakMap=r(102)),l.WeakSet||(l.WeakSet=r(119)),String.codePointAt||(String.codePointAt=r(123)),String.fromCodePoint||(String.fromCodePoint=r(125)),l.Symbol||r(127),String.prototype.padStart||r(134),String.prototype.padEnd||r(138),Object.values||(Object.values=r(140))}},function(e,t,n){"use strict";e.exports="undefined"!=typeof window&&window.Math===Math?window:void 0!==r&&r.Math===Math?r:"undefined"!=typeof self&&self.Math===Math?self:{}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(){return"object"===(void 0===a?"undefined":r(a))&&a+""=="[object process]"&&!a.versions.nw&&!a.versions.electron}},function(e,t,n){"use strict";n(6),e.exports=n(9).String.startsWith},function(e,t,n){"use strict";var r=n(7),a=n(28),l=n(30),d="".startsWith;r(r.P+r.F*n(35)("startsWith"),"String",{startsWith:function(e){var t=l(this,e,"startsWith"),n=a(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),r=String(e);return d?d.call(t,r,n):t.slice(n,n+r.length)===r}})},function(e,t,n){"use strict";var r=n(8),a=n(9),l=n(10),d=n(20),h=n(26),f=function e(t,n,f){var p,y,w,_,C=t&e.F,S=t&e.G,k=t&e.P,x=t&e.B,E=S?r:t&e.S?r[n]||(r[n]={}):(r[n]||{}).prototype,A=S?a:a[n]||(a[n]={}),T=A.prototype||(A.prototype={});for(p in S&&(f=n),f)w=((y=!C&&E&&void 0!==E[p])?E:f)[p],_=x&&y?h(w,r):k&&"function"==typeof w?h(Function.call,w):w,E&&d(E,p,w,t&e.U),A[p]!=w&&l(A,p,_),k&&T[p]!=w&&(T[p]=w)};r.core=a,f.F=1,f.G=2,f.S=4,f.P=8,f.B=16,f.W=32,f.U=64,f.R=128,e.exports=f},function(e,t,n){"use strict";var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(e,t,n){"use strict";var r=e.exports={version:"2.6.9"};"number"==typeof __e&&(__e=r)},function(e,t,n){"use strict";var r=n(11),a=n(19);e.exports=n(15)?function(e,t,n){return r.f(e,t,a(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){"use strict";var r=n(12),a=n(14),l=n(18),d=Object.defineProperty;t.f=n(15)?Object.defineProperty:function(e,t,n){if(r(e),t=l(t,!0),r(n),a)try{return d(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){"use strict";var r=n(13);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e){return"object"===r(e)?null!==e:"function"==typeof e}},function(e,t,n){"use strict";e.exports=!n(15)&&!n(16)((function(){return 7!=Object.defineProperty(n(17)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){"use strict";e.exports=!n(16)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,n){"use strict";e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){"use strict";var r=n(13),a=n(8).document,l=r(a)&&r(a.createElement);e.exports=function(e){return l?a.createElement(e):{}}},function(e,t,n){"use strict";var r=n(13);e.exports=function(e,t){if(!r(e))return e;var n,a;if(t&&"function"==typeof(n=e.toString)&&!r(a=n.call(e)))return a;if("function"==typeof(n=e.valueOf)&&!r(a=n.call(e)))return a;if(!t&&"function"==typeof(n=e.toString)&&!r(a=n.call(e)))return a;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){"use strict";e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){"use strict";var r=n(8),a=n(10),l=n(21),d=n(22)("src"),h=n(23),f=(""+h).split("toString");n(9).inspectSource=function(e){return h.call(e)},(e.exports=function(e,t,n,h){var p="function"==typeof n;p&&(l(n,"name")||a(n,"name",t)),e[t]!==n&&(p&&(l(n,d)||a(n,d,e[t]?""+e[t]:f.join(String(t)))),e===r?e[t]=n:h?e[t]?e[t]=n:a(e,t,n):(delete e[t],a(e,t,n)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[d]||h.call(this)}))},function(e,t,n){"use strict";var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},function(e,t,n){"use strict";var r=0,a=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+a).toString(36))}},function(e,t,n){"use strict";e.exports=n(24)("native-function-to-string",Function.toString)},function(e,t,n){"use strict";var r=n(9),a=n(8),l=a["__core-js_shared__"]||(a["__core-js_shared__"]={});(e.exports=function(e,t){return l[e]||(l[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(25)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t,n){"use strict";e.exports=!1},function(e,t,n){"use strict";var r=n(27);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,a){return e.call(t,n,r,a)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){"use strict";e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){"use strict";var r=n(29),a=Math.min;e.exports=function(e){return e>0?a(r(e),9007199254740991):0}},function(e,t,n){"use strict";var r=Math.ceil,a=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?a:r)(e)}},function(e,t,n){"use strict";var r=n(31),a=n(34);e.exports=function(e,t,n){if(r(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(a(e))}},function(e,t,n){"use strict";var r=n(13),a=n(32),l=n(33)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[l])?!!t:"RegExp"==a(e))}},function(e,t,n){"use strict";var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},function(e,t,n){"use strict";var r=n(24)("wks"),a=n(22),l=n(8).Symbol,d="function"==typeof l;(e.exports=function(e){return r[e]||(r[e]=d&&l[e]||(d?l:a)("Symbol."+e))}).store=r},function(e,t,n){"use strict";e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){"use strict";var r=n(33)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,!"/./"[e](t)}catch(e){}}return!0}},function(e,t,n){"use strict";n(37),e.exports=n(9).String.endsWith},function(e,t,n){"use strict";var r=n(7),a=n(28),l=n(30),d="".endsWith;r(r.P+r.F*n(35)("endsWith"),"String",{endsWith:function(e){var t=l(this,e,"endsWith"),n=arguments.length>1?arguments[1]:void 0,r=a(t.length),h=void 0===n?r:Math.min(a(n),r),f=String(e);return d?d.call(t,f,h):t.slice(h-f.length,h)===f}})},function(e,t,n){"use strict";n(39),e.exports=n(9).String.includes},function(e,t,n){"use strict";var r=n(7),a=n(30);r(r.P+r.F*n(35)("includes"),"String",{includes:function(e){return!!~a(this,e,"includes").indexOf(e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";n(41),e.exports=n(9).Array.includes},function(e,t,n){"use strict";var r=n(7),a=n(42)(!0);r(r.P,"Array",{includes:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),n(46)("includes")},function(e,t,n){"use strict";var r=n(43),a=n(28),l=n(45);e.exports=function(e){return function(t,n,d){var h,f=r(t),p=a(f.length),y=l(d,p);if(e&&n!=n){for(;p>y;)if((h=f[y++])!=h)return!0}else for(;p>y;y++)if((e||y in f)&&f[y]===n)return e||y||0;return!e&&-1}}},function(e,t,n){"use strict";var r=n(44),a=n(34);e.exports=function(e){return r(a(e))}},function(e,t,n){"use strict";var r=n(32);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){"use strict";var r=n(29),a=Math.max,l=Math.min;e.exports=function(e,t){return(e=r(e))<0?a(e+t,0):l(e,t)}},function(e,t,n){"use strict";var r=n(33)("unscopables"),a=Array.prototype;null==a[r]&&n(10)(a,r,{}),e.exports=function(e){a[r][e]=!0}},function(e,t,n){"use strict";n(48),n(63),e.exports=n(9).Array.from},function(e,t,n){"use strict";var r=n(49)(!0);n(50)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})}))},function(e,t,n){"use strict";var r=n(29),a=n(34);e.exports=function(e){return function(t,n){var l,d,h=String(a(t)),f=r(n),p=h.length;return f<0||f>=p?e?"":void 0:(l=h.charCodeAt(f))<55296||l>56319||f+1===p||(d=h.charCodeAt(f+1))<56320||d>57343?e?h.charAt(f):l:e?h.slice(f,f+2):d-56320+(l-55296<<10)+65536}}},function(e,t,n){"use strict";var r=n(25),a=n(7),l=n(20),d=n(10),h=n(51),f=n(52),p=n(60),y=n(61),w=n(33)("iterator"),_=!([].keys&&"next"in[].keys()),C=function(){return this};e.exports=function(e,t,n,S,k,x,E){f(n,t,S);var A,T,R,O=function(e){if(!_&&e in D)return D[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},M=t+" Iterator",P="values"==k,L=!1,D=e.prototype,I=D[w]||D["@@iterator"]||k&&D[k],F=I||O(k),j=k?P?O("entries"):F:void 0,N="Array"==t&&D.entries||I;if(N&&(R=y(N.call(new e)))!==Object.prototype&&R.next&&(p(R,M,!0),r||"function"==typeof R[w]||d(R,w,C)),P&&I&&"values"!==I.name&&(L=!0,F=function(){return I.call(this)}),r&&!E||!_&&!L&&D[w]||d(D,w,F),h[t]=F,h[M]=C,k)if(A={values:P?F:O("values"),keys:x?F:O("keys"),entries:j},E)for(T in A)T in D||l(D,T,A[T]);else a(a.P+a.F*(_||L),t,A);return A}},function(e,t,n){"use strict";e.exports={}},function(e,t,n){"use strict";var r=n(53),a=n(19),l=n(60),d={};n(10)(d,n(33)("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=r(d,{next:a(1,n)}),l(e,t+" Iterator")}},function(e,t,n){"use strict";var r=n(12),a=n(54),l=n(58),d=n(57)("IE_PROTO"),h=function(){},f=function(){var e,t=n(17)("iframe"),r=l.length;for(t.style.display="none",n(59).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),f=e.F;r--;)delete f.prototype[l[r]];return f()};e.exports=Object.create||function(e,t){var n;return null!==e?(h.prototype=r(e),n=new h,h.prototype=null,n[d]=e):n=f(),void 0===t?n:a(n,t)}},function(e,t,n){"use strict";var r=n(11),a=n(12),l=n(55);e.exports=n(15)?Object.defineProperties:function(e,t){a(e);for(var n,d=l(t),h=d.length,f=0;h>f;)r.f(e,n=d[f++],t[n]);return e}},function(e,t,n){"use strict";var r=n(56),a=n(58);e.exports=Object.keys||function(e){return r(e,a)}},function(e,t,n){"use strict";var r=n(21),a=n(43),l=n(42)(!1),d=n(57)("IE_PROTO");e.exports=function(e,t){var n,h=a(e),f=0,p=[];for(n in h)n!=d&&r(h,n)&&p.push(n);for(;t.length>f;)r(h,n=t[f++])&&(~l(p,n)||p.push(n));return p}},function(e,t,n){"use strict";var r=n(24)("keys"),a=n(22);e.exports=function(e){return r[e]||(r[e]=a(e))}},function(e,t,n){"use strict";e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){"use strict";var r=n(8).document;e.exports=r&&r.documentElement},function(e,t,n){"use strict";var r=n(11).f,a=n(21),l=n(33)("toStringTag");e.exports=function(e,t,n){e&&!a(e=n?e:e.prototype,l)&&r(e,l,{configurable:!0,value:t})}},function(e,t,n){"use strict";var r=n(21),a=n(62),l=n(57)("IE_PROTO"),d=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=a(e),r(e,l)?e[l]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?d:null}},function(e,t,n){"use strict";var r=n(34);e.exports=function(e){return Object(r(e))}},function(e,t,n){"use strict";var r=n(26),a=n(7),l=n(62),d=n(64),h=n(65),f=n(28),p=n(66),y=n(67);a(a.S+a.F*!n(69)((function(e){Array.from(e)})),"Array",{from:function(e){var t,n,a,w,_=l(e),C="function"==typeof this?this:Array,S=arguments.length,k=S>1?arguments[1]:void 0,x=void 0!==k,E=0,A=y(_);if(x&&(k=r(k,S>2?arguments[2]:void 0,2)),null==A||C==Array&&h(A))for(n=new C(t=f(_.length));t>E;E++)p(n,E,x?k(_[E],E):_[E]);else for(w=A.call(_),n=new C;!(a=w.next()).done;E++)p(n,E,x?d(w,k,[a.value,E],!0):a.value);return n.length=E,n}})},function(e,t,n){"use strict";var r=n(12);e.exports=function(e,t,n,a){try{return a?t(r(n)[0],n[1]):t(n)}catch(t){var l=e.return;throw void 0!==l&&r(l.call(e)),t}}},function(e,t,n){"use strict";var r=n(51),a=n(33)("iterator"),l=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||l[a]===e)}},function(e,t,n){"use strict";var r=n(11),a=n(19);e.exports=function(e,t,n){t in e?r.f(e,t,a(0,n)):e[t]=n}},function(e,t,n){"use strict";var r=n(68),a=n(33)("iterator"),l=n(51);e.exports=n(9).getIteratorMethod=function(e){if(null!=e)return e[a]||e["@@iterator"]||l[r(e)]}},function(e,t,n){"use strict";var r=n(32),a=n(33)("toStringTag"),l="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,n,d;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),a))?n:l?r(t):"Object"==(d=r(t))&&"function"==typeof t.callee?"Arguments":d}},function(e,t,n){"use strict";var r=n(33)("iterator"),a=!1;try{var l=[7][r]();l.return=function(){a=!0},Array.from(l,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!a)return!1;var n=!1;try{var l=[7],d=l[r]();d.next=function(){return{done:n=!0}},l[r]=function(){return d},e(l)}catch(e){}return n}},function(e,t,n){"use strict";n(71),e.exports=n(9).Object.assign},function(e,t,n){"use strict";var r=n(7);r(r.S+r.F,"Object",{assign:n(72)})},function(e,t,n){"use strict";var r=n(15),a=n(55),l=n(73),d=n(74),h=n(62),f=n(44),p=Object.assign;e.exports=!p||n(16)((function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=p({},e)[n]||Object.keys(p({},t)).join("")!=r}))?function(e,t){for(var n=h(e),p=arguments.length,y=1,w=l.f,_=d.f;p>y;)for(var C,S=f(arguments[y++]),k=w?a(S).concat(w(S)):a(S),x=k.length,E=0;x>E;)C=k[E++],r&&!_.call(S,C)||(n[C]=S[C]);return n}:p},function(e,t,n){"use strict";t.f=Object.getOwnPropertySymbols},function(e,t,n){"use strict";t.f={}.propertyIsEnumerable},function(e,t,n){"use strict";n(76),e.exports=n(9).Math.log2},function(e,t,n){"use strict";var r=n(7);r(r.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},function(e,t,n){"use strict";n(78),e.exports=n(9).Number.isNaN},function(e,t,n){"use strict";var r=n(7);r(r.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,n){"use strict";n(80),e.exports=n(9).Number.isInteger},function(e,t,n){"use strict";var r=n(7);r(r.S,"Number",{isInteger:n(81)})},function(e,t,n){"use strict";var r=n(13),a=Math.floor;e.exports=function(e){return!r(e)&&isFinite(e)&&a(e)===e}},function(e,t,n){"use strict";n(83),n(48),n(84),n(87),n(100),n(101),e.exports=n(9).Promise},function(e,t,n){"use strict";var r=n(68),a={};a[n(33)("toStringTag")]="z",a+""!="[object z]"&&n(20)(Object.prototype,"toString",(function(){return"[object "+r(this)+"]"}),!0)},function(e,t,n){"use strict";for(var r=n(85),a=n(55),l=n(20),d=n(8),h=n(10),f=n(51),p=n(33),y=p("iterator"),w=p("toStringTag"),_=f.Array,C={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},S=a(C),k=0;k<S.length;k++){var x,E=S[k],A=C[E],T=d[E],R=T&&T.prototype;if(R&&(R[y]||h(R,y,_),R[w]||h(R,w,E),f[E]=_,A))for(x in r)R[x]||l(R,x,r[x],!0)}},function(e,t,n){"use strict";var r=n(46),a=n(86),l=n(51),d=n(43);e.exports=n(50)(Array,"Array",(function(e,t){this._t=d(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,a(1)):a(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),l.Arguments=l.Array,r("keys"),r("values"),r("entries")},function(e,t,n){"use strict";e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){"use strict";var r,a,l,d,h=n(25),f=n(8),p=n(26),y=n(68),w=n(7),_=n(13),C=n(27),S=n(88),k=n(89),x=n(90),E=n(91).set,A=n(93)(),T=n(94),R=n(95),O=n(96),M=n(97),P=f.TypeError,L=f.process,D=L&&L.versions,I=D&&D.v8||"",F=f.Promise,j="process"==y(L),N=function(){},B=a=T.f,z=!!function(){try{var e=F.resolve(1),t=(e.constructor={})[n(33)("species")]=function(e){e(N,N)};return(j||"function"==typeof PromiseRejectionEvent)&&e.then(N)instanceof t&&0!==I.indexOf("6.6")&&-1===O.indexOf("Chrome/66")}catch(e){}}(),H=function(e){var t;return!(!_(e)||"function"!=typeof(t=e.then))&&t},U=function(e,t){if(!e._n){e._n=!0;var n=e._c;A((function(){for(var r=e._v,a=1==e._s,l=0,d=function(t){var n,l,d,h=a?t.ok:t.fail,f=t.resolve,p=t.reject,y=t.domain;try{h?(a||(2==e._h&&q(e),e._h=1),!0===h?n=r:(y&&y.enter(),n=h(r),y&&(y.exit(),d=!0)),n===t.promise?p(P("Promise-chain cycle")):(l=H(n))?l.call(n,f,p):f(n)):p(r)}catch(e){y&&!d&&y.exit(),p(e)}};n.length>l;)d(n[l++]);e._c=[],e._n=!1,t&&!e._h&&W(e)}))}},W=function(e){E.call(f,(function(){var t,n,r,a=e._v,l=V(e);if(l&&(t=R((function(){j?L.emit("unhandledRejection",a,e):(n=f.onunhandledrejection)?n({promise:e,reason:a}):(r=f.console)&&r.error&&r.error("Unhandled promise rejection",a)})),e._h=j||V(e)?2:1),e._a=void 0,l&&t.e)throw t.v}))},V=function(e){return 1!==e._h&&0===(e._a||e._c).length},q=function(e){E.call(f,(function(){var t;j?L.emit("rejectionHandled",e):(t=f.onrejectionhandled)&&t({promise:e,reason:e._v})}))},G=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),U(t,!0))},K=function e(t){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw P("Promise can't be resolved itself");(n=H(t))?A((function(){var a={_w:r,_d:!1};try{n.call(t,p(e,a,1),p(G,a,1))}catch(e){G.call(a,e)}})):(r._v=t,r._s=1,U(r,!1))}catch(e){G.call({_w:r,_d:!1},e)}}};z||(F=function(e){S(this,F,"Promise","_h"),C(e),r.call(this);try{e(p(K,this,1),p(G,this,1))}catch(e){G.call(this,e)}},(r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(98)(F.prototype,{then:function(e,t){var n=B(x(this,F));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=j?L.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&U(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),l=function(){var e=new r;this.promise=e,this.resolve=p(K,e,1),this.reject=p(G,e,1)},T.f=B=function(e){return e===F||e===d?new l(e):a(e)}),w(w.G+w.W+w.F*!z,{Promise:F}),n(60)(F,"Promise"),n(99)("Promise"),d=n(9).Promise,w(w.S+w.F*!z,"Promise",{reject:function(e){var t=B(this);return(0,t.reject)(e),t.promise}}),w(w.S+w.F*(h||!z),"Promise",{resolve:function(e){return M(h&&this===d?F:this,e)}}),w(w.S+w.F*!(z&&n(69)((function(e){F.all(e).catch(N)}))),"Promise",{all:function(e){var t=this,n=B(t),r=n.resolve,a=n.reject,l=R((function(){var n=[],l=0,d=1;k(e,!1,(function(e){var h=l++,f=!1;n.push(void 0),d++,t.resolve(e).then((function(e){f||(f=!0,n[h]=e,--d||r(n))}),a)})),--d||r(n)}));return l.e&&a(l.v),n.promise},race:function(e){var t=this,n=B(t),r=n.reject,a=R((function(){k(e,!1,(function(e){t.resolve(e).then(n.resolve,r)}))}));return a.e&&r(a.v),n.promise}})},function(e,t,n){"use strict";e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){"use strict";var r=n(26),a=n(64),l=n(65),d=n(12),h=n(28),f=n(67),p={},y={},w=e.exports=function(e,t,n,w,_){var C,S,k,x,E=_?function(){return e}:f(e),A=r(n,w,t?2:1),T=0;if("function"!=typeof E)throw TypeError(e+" is not iterable!");if(l(E)){for(C=h(e.length);C>T;T++)if((x=t?A(d(S=e[T])[0],S[1]):A(e[T]))===p||x===y)return x}else for(k=E.call(e);!(S=k.next()).done;)if((x=a(k,A,S.value,t))===p||x===y)return x};w.BREAK=p,w.RETURN=y},function(e,t,n){"use strict";var r=n(12),a=n(27),l=n(33)("species");e.exports=function(e,t){var n,d=r(e).constructor;return void 0===d||null==(n=r(d)[l])?t:a(n)}},function(e,t,n){"use strict";var r,a,l,d=n(26),h=n(92),f=n(59),p=n(17),y=n(8),w=y.process,_=y.setImmediate,C=y.clearImmediate,S=y.MessageChannel,k=y.Dispatch,x=0,E={},A=function(){var e=+this;if(E.hasOwnProperty(e)){var t=E[e];delete E[e],t()}},T=function(e){A.call(e.data)};_&&C||(_=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return E[++x]=function(){h("function"==typeof e?e:Function(e),t)},r(x),x},C=function(e){delete E[e]},"process"==n(32)(w)?r=function(e){w.nextTick(d(A,e,1))}:k&&k.now?r=function(e){k.now(d(A,e,1))}:S?(l=(a=new S).port2,a.port1.onmessage=T,r=d(l.postMessage,l,1)):y.addEventListener&&"function"==typeof postMessage&&!y.importScripts?(r=function(e){y.postMessage(e+"","*")},y.addEventListener("message",T,!1)):r="onreadystatechange"in p("script")?function(e){f.appendChild(p("script")).onreadystatechange=function(){f.removeChild(this),A.call(e)}}:function(e){setTimeout(d(A,e,1),0)}),e.exports={set:_,clear:C}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){"use strict";var r=n(8),a=n(91).set,l=r.MutationObserver||r.WebKitMutationObserver,d=r.process,h=r.Promise,f="process"==n(32)(d);e.exports=function(){var e,t,n,p=function(){var r,a;for(f&&(r=d.domain)&&r.exit();e;){a=e.fn,e=e.next;try{a()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(f)n=function(){d.nextTick(p)};else if(!l||r.navigator&&r.navigator.standalone)if(h&&h.resolve){var y=h.resolve(void 0);n=function(){y.then(p)}}else n=function(){a.call(r,p)};else{var w=!0,_=document.createTextNode("");new l(p).observe(_,{characterData:!0}),n=function(){_.data=w=!w}}return function(r){var a={fn:r,next:void 0};t&&(t.next=a),e||(e=a,n()),t=a}}},function(e,t,n){"use strict";var r=n(27);function a(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)}e.exports.f=function(e){return new a(e)}},function(e,t,n){"use strict";e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){"use strict";var r=n(8).navigator;e.exports=r&&r.userAgent||""},function(e,t,n){"use strict";var r=n(12),a=n(13),l=n(94);e.exports=function(e,t){if(r(e),a(t)&&t.constructor===e)return t;var n=l.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){"use strict";var r=n(20);e.exports=function(e,t,n){for(var a in t)r(e,a,t[a],n);return e}},function(e,t,n){"use strict";var r=n(8),a=n(11),l=n(15),d=n(33)("species");e.exports=function(e){var t=r[e];l&&t&&!t[d]&&a.f(t,d,{configurable:!0,get:function(){return this}})}},function(e,t,n){"use strict";var r=n(7),a=n(9),l=n(8),d=n(90),h=n(97);r(r.P+r.R,"Promise",{finally:function(e){var t=d(this,a.Promise||l.Promise),n="function"==typeof e;return this.then(n?function(n){return h(t,e()).then((function(){return n}))}:e,n?function(n){return h(t,e()).then((function(){throw n}))}:e)}})},function(e,t,n){"use strict";var r=n(7),a=n(94),l=n(95);r(r.S,"Promise",{try:function(e){var t=a.f(this),n=l(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},function(e,t,n){"use strict";n(83),n(84),n(103),n(115),n(117),e.exports=n(9).WeakMap},function(e,t,n){"use strict";var r,a=n(8),l=n(104)(0),d=n(20),h=n(108),f=n(72),p=n(109),y=n(13),w=n(110),_=n(110),C=!a.ActiveXObject&&"ActiveXObject"in a,S=h.getWeak,k=Object.isExtensible,x=p.ufstore,E=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},A={get:function(e){if(y(e)){var t=S(e);return!0===t?x(w(this,"WeakMap")).get(e):t?t[this._i]:void 0}},set:function(e,t){return p.def(w(this,"WeakMap"),e,t)}},T=e.exports=n(111)("WeakMap",E,A,p,!0,!0);_&&C&&(f((r=p.getConstructor(E,"WeakMap")).prototype,A),h.NEED=!0,l(["delete","has","get","set"],(function(e){var t=T.prototype,n=t[e];d(t,e,(function(t,a){if(y(t)&&!k(t)){this._f||(this._f=new r);var l=this._f[e](t,a);return"set"==e?this:l}return n.call(this,t,a)}))})))},function(e,t,n){"use strict";var r=n(26),a=n(44),l=n(62),d=n(28),h=n(105);e.exports=function(e,t){var n=1==e,f=2==e,p=3==e,y=4==e,w=6==e,_=5==e||w,C=t||h;return function(t,h,S){for(var k,x,E=l(t),A=a(E),T=r(h,S,3),R=d(A.length),O=0,M=n?C(t,R):f?C(t,0):void 0;R>O;O++)if((_||O in A)&&(x=T(k=A[O],O,E),e))if(n)M[O]=x;else if(x)switch(e){case 3:return!0;case 5:return k;case 6:return O;case 2:M.push(k)}else if(y)return!1;return w?-1:p||y?y:M}}},function(e,t,n){"use strict";var r=n(106);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){"use strict";var r=n(13),a=n(107),l=n(33)("species");e.exports=function(e){var t;return a(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!a(t.prototype)||(t=void 0),r(t)&&null===(t=t[l])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){"use strict";var r=n(32);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=n(22)("meta"),l=n(13),d=n(21),h=n(11).f,f=0,p=Object.isExtensible||function(){return!0},y=!n(16)((function(){return p(Object.preventExtensions({}))})),w=function(e){h(e,a,{value:{i:"O"+ ++f,w:{}}})},_=e.exports={KEY:a,NEED:!1,fastKey:function(e,t){if(!l(e))return"symbol"==r(e)?e:("string"==typeof e?"S":"P")+e;if(!d(e,a)){if(!p(e))return"F";if(!t)return"E";w(e)}return e[a].i},getWeak:function(e,t){if(!d(e,a)){if(!p(e))return!0;if(!t)return!1;w(e)}return e[a].w},onFreeze:function(e){return y&&_.NEED&&p(e)&&!d(e,a)&&w(e),e}}},function(e,t,n){"use strict";var r=n(98),a=n(108).getWeak,l=n(12),d=n(13),h=n(88),f=n(89),p=n(104),y=n(21),w=n(110),_=p(5),C=p(6),S=0,k=function(e){return e._l||(e._l=new x)},x=function(){this.a=[]},E=function(e,t){return _(e.a,(function(e){return e[0]===t}))};x.prototype={get:function(e){var t=E(this,e);if(t)return t[1]},has:function(e){return!!E(this,e)},set:function(e,t){var n=E(this,e);n?n[1]=t:this.a.push([e,t])},delete:function(e){var t=C(this.a,(function(t){return t[0]===e}));return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,n,l){var p=e((function(e,r){h(e,p,t,"_i"),e._t=t,e._i=S++,e._l=void 0,null!=r&&f(r,n,e[l],e)}));return r(p.prototype,{delete:function(e){if(!d(e))return!1;var n=a(e);return!0===n?k(w(this,t)).delete(e):n&&y(n,this._i)&&delete n[this._i]},has:function(e){if(!d(e))return!1;var n=a(e);return!0===n?k(w(this,t)).has(e):n&&y(n,this._i)}}),p},def:function(e,t,n){var r=a(l(t),!0);return!0===r?k(e).set(t,n):r[e._i]=n,e},ufstore:k}},function(e,t,n){"use strict";var r=n(13);e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,n){"use strict";var r=n(8),a=n(7),l=n(20),d=n(98),h=n(108),f=n(89),p=n(88),y=n(13),w=n(16),_=n(69),C=n(60),S=n(112);e.exports=function(e,t,n,k,x,E){var A=r[e],T=A,R=x?"set":"add",O=T&&T.prototype,M={},P=function(e){var t=O[e];l(O,e,"delete"==e||"has"==e?function(e){return!(E&&!y(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return E&&!y(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,n){return t.call(this,0===e?0:e,n),this})};if("function"==typeof T&&(E||O.forEach&&!w((function(){(new T).entries().next()})))){var L=new T,D=L[R](E?{}:-0,1)!=L,I=w((function(){L.has(1)})),F=_((function(e){new T(e)})),j=!E&&w((function(){for(var e=new T,t=5;t--;)e[R](t,t);return!e.has(-0)}));F||((T=t((function(t,n){p(t,T,e);var r=S(new A,t,T);return null!=n&&f(n,x,r[R],r),r}))).prototype=O,O.constructor=T),(I||j)&&(P("delete"),P("has"),x&&P("get")),(j||D)&&P(R),E&&O.clear&&delete O.clear}else T=k.getConstructor(t,e,x,R),d(T.prototype,n),h.NEED=!0;return C(T,e),M[e]=T,a(a.G+a.W+a.F*(T!=A),M),E||k.setStrong(T,e,x),T}},function(e,t,n){"use strict";var r=n(13),a=n(113).set;e.exports=function(e,t,n){var l,d=t.constructor;return d!==n&&"function"==typeof d&&(l=d.prototype)!==n.prototype&&r(l)&&a&&a(e,l),e}},function(e,t,n){"use strict";var r=n(13),a=n(12),l=function(e,t){if(a(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{(r=n(26)(Function.call,n(114).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return l(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:l}},function(e,t,n){"use strict";var r=n(74),a=n(19),l=n(43),d=n(18),h=n(21),f=n(14),p=Object.getOwnPropertyDescriptor;t.f=n(15)?p:function(e,t){if(e=l(e),t=d(t,!0),f)try{return p(e,t)}catch(e){}if(h(e,t))return a(!r.f.call(e,t),e[t])}},function(e,t,n){"use strict";n(116)("WeakMap")},function(e,t,n){"use strict";var r=n(7);e.exports=function(e){r(r.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,n){"use strict";n(118)("WeakMap")},function(e,t,n){"use strict";var r=n(7),a=n(27),l=n(26),d=n(89);e.exports=function(e){r(r.S,e,{from:function(e){var t,n,r,h,f=arguments[1];return a(this),(t=void 0!==f)&&a(f),null==e?new this:(n=[],t?(r=0,h=l(f,arguments[2],2),d(e,!1,(function(e){n.push(h(e,r++))}))):d(e,!1,n.push,n),new this(n))}})}},function(e,t,n){"use strict";n(83),n(84),n(120),n(121),n(122),e.exports=n(9).WeakSet},function(e,t,n){"use strict";var r=n(109),a=n(110);n(111)("WeakSet",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return r.def(a(this,"WeakSet"),e,!0)}},r,!1,!0)},function(e,t,n){"use strict";n(116)("WeakSet")},function(e,t,n){"use strict";n(118)("WeakSet")},function(e,t,n){"use strict";n(124),e.exports=n(9).String.codePointAt},function(e,t,n){"use strict";var r=n(7),a=n(49)(!1);r(r.P,"String",{codePointAt:function(e){return a(this,e)}})},function(e,t,n){"use strict";n(126),e.exports=n(9).String.fromCodePoint},function(e,t,n){"use strict";var r=n(7),a=n(45),l=String.fromCharCode,d=String.fromCodePoint;r(r.S+r.F*(!!d&&1!=d.length),"String",{fromCodePoint:function(e){for(var t,n=[],r=arguments.length,d=0;r>d;){if(t=+arguments[d++],a(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(t<65536?l(t):l(55296+((t-=65536)>>10),t%1024+56320))}return n.join("")}})},function(e,t,n){"use strict";n(128),n(83),e.exports=n(9).Symbol},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=n(8),l=n(21),d=n(15),h=n(7),f=n(20),p=n(108).KEY,y=n(16),w=n(24),_=n(60),C=n(22),S=n(33),k=n(129),x=n(130),E=n(131),A=n(107),T=n(12),R=n(13),O=n(62),M=n(43),P=n(18),L=n(19),D=n(53),I=n(132),F=n(114),j=n(73),N=n(11),B=n(55),z=F.f,H=N.f,U=I.f,W=a.Symbol,V=a.JSON,q=V&&V.stringify,G=S("_hidden"),K=S("toPrimitive"),Y={}.propertyIsEnumerable,X=w("symbol-registry"),J=w("symbols"),Q=w("op-symbols"),Z=Object.prototype,ee="function"==typeof W&&!!j.f,te=a.QObject,ne=!te||!te.prototype||!te.prototype.findChild,re=d&&y((function(){return 7!=D(H({},"a",{get:function(){return H(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=z(Z,t);r&&delete Z[t],H(e,t,n),r&&e!==Z&&H(Z,t,r)}:H,oe=function(e){var t=J[e]=D(W.prototype);return t._k=e,t},ae=ee&&"symbol"==r(W.iterator)?function(e){return"symbol"==r(e)}:function(e){return e instanceof W},se=function(e,t,n){return e===Z&&se(Q,t,n),T(e),t=P(t,!0),T(n),l(J,t)?(n.enumerable?(l(e,G)&&e[G][t]&&(e[G][t]=!1),n=D(n,{enumerable:L(0,!1)})):(l(e,G)||H(e,G,L(1,{})),e[G][t]=!0),re(e,t,n)):H(e,t,n)},le=function(e,t){T(e);for(var n,r=E(t=M(t)),a=0,l=r.length;l>a;)se(e,n=r[a++],t[n]);return e},ce=function(e){var t=Y.call(this,e=P(e,!0));return!(this===Z&&l(J,e)&&!l(Q,e))&&(!(t||!l(this,e)||!l(J,e)||l(this,G)&&this[G][e])||t)},ue=function(e,t){if(e=M(e),t=P(t,!0),e!==Z||!l(J,t)||l(Q,t)){var n=z(e,t);return!n||!l(J,t)||l(e,G)&&e[G][t]||(n.enumerable=!0),n}},de=function(e){for(var t,n=U(M(e)),r=[],a=0;n.length>a;)l(J,t=n[a++])||t==G||t==p||r.push(t);return r},he=function(e){for(var t,n=e===Z,r=U(n?Q:M(e)),a=[],d=0;r.length>d;)!l(J,t=r[d++])||n&&!l(Z,t)||a.push(J[t]);return a};ee||(f((W=function(){if(this instanceof W)throw TypeError("Symbol is not a constructor!");var e=C(arguments.length>0?arguments[0]:void 0),t=function t(n){this===Z&&t.call(Q,n),l(this,G)&&l(this[G],e)&&(this[G][e]=!1),re(this,e,L(1,n))};return d&&ne&&re(Z,e,{configurable:!0,set:t}),oe(e)}).prototype,"toString",(function(){return this._k})),F.f=ue,N.f=se,n(133).f=I.f=de,n(74).f=ce,j.f=he,d&&!n(25)&&f(Z,"propertyIsEnumerable",ce,!0),k.f=function(e){return oe(S(e))}),h(h.G+h.W+h.F*!ee,{Symbol:W});for(var fe="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),pe=0;fe.length>pe;)S(fe[pe++]);for(var ge=B(S.store),me=0;ge.length>me;)x(ge[me++]);h(h.S+h.F*!ee,"Symbol",{for:function(e){return l(X,e+="")?X[e]:X[e]=W(e)},keyFor:function(e){if(!ae(e))throw TypeError(e+" is not a symbol!");for(var t in X)if(X[t]===e)return t},useSetter:function(){ne=!0},useSimple:function(){ne=!1}}),h(h.S+h.F*!ee,"Object",{create:function(e,t){return void 0===t?D(e):le(D(e),t)},defineProperty:se,defineProperties:le,getOwnPropertyDescriptor:ue,getOwnPropertyNames:de,getOwnPropertySymbols:he});var ve=y((function(){j.f(1)}));h(h.S+h.F*ve,"Object",{getOwnPropertySymbols:function(e){return j.f(O(e))}}),V&&h(h.S+h.F*(!ee||y((function(){var e=W();return"[null]"!=q([e])||"{}"!=q({a:e})||"{}"!=q(Object(e))}))),"JSON",{stringify:function(e){for(var t,n,r=[e],a=1;arguments.length>a;)r.push(arguments[a++]);if(n=t=r[1],(R(t)||void 0!==e)&&!ae(e))return A(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!ae(t))return t}),r[1]=t,q.apply(V,r)}}),W.prototype[K]||n(10)(W.prototype,K,W.prototype.valueOf),_(W,"Symbol"),_(Math,"Math",!0),_(a.JSON,"JSON",!0)},function(e,t,n){"use strict";t.f=n(33)},function(e,t,n){"use strict";var r=n(8),a=n(9),l=n(25),d=n(129),h=n(11).f;e.exports=function(e){var t=a.Symbol||(a.Symbol=l?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||h(t,e,{value:d.f(e)})}},function(e,t,n){"use strict";var r=n(55),a=n(73),l=n(74);e.exports=function(e){var t=r(e),n=a.f;if(n)for(var d,h=n(e),f=l.f,p=0;h.length>p;)f.call(e,d=h[p++])&&t.push(d);return t}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=n(43),l=n(133).f,d={}.toString,h="object"==("undefined"==typeof window?"undefined":r(window))&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return h&&"[object Window]"==d.call(e)?function(e){try{return l(e)}catch(e){return h.slice()}}(e):l(a(e))}},function(e,t,n){"use strict";var r=n(56),a=n(58).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,a)}},function(e,t,n){"use strict";n(135),e.exports=n(9).String.padStart},function(e,t,n){"use strict";var r=n(7),a=n(136),l=n(96),d=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(l);r(r.P+r.F*d,"String",{padStart:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0,!0)}})},function(e,t,n){"use strict";var r=n(28),a=n(137),l=n(34);e.exports=function(e,t,n,d){var h=String(l(e)),f=h.length,p=void 0===n?" ":String(n),y=r(t);if(y<=f||""==p)return h;var w=y-f,_=a.call(p,Math.ceil(w/p.length));return _.length>w&&(_=_.slice(0,w)),d?_+h:h+_}},function(e,t,n){"use strict";var r=n(29),a=n(34);e.exports=function(e){var t=String(a(this)),n="",l=r(e);if(l<0||l==1/0)throw RangeError("Count can't be negative");for(;l>0;(l>>>=1)&&(t+=t))1&l&&(n+=t);return n}},function(e,t,n){"use strict";n(139),e.exports=n(9).String.padEnd},function(e,t,n){"use strict";var r=n(7),a=n(136),l=n(96),d=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(l);r(r.P+r.F*d,"String",{padEnd:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0,!1)}})},function(e,t,n){"use strict";n(141),e.exports=n(9).Object.values},function(e,t,n){"use strict";var r=n(7),a=n(142)(!1);r(r.S,"Object",{values:function(e){return a(e)}})},function(e,t,n){"use strict";var r=n(15),a=n(55),l=n(43),d=n(74).f;e.exports=function(e){return function(t){for(var n,h=l(t),f=a(h),p=f.length,y=0,w=[];p>y;)n=f[y++],r&&!d.call(h,n)||w.push(e?[n,h[n]]:h[n]);return w}}},function(e,t,n){"use strict";var r=!1;if("undefined"!=typeof ReadableStream)try{new ReadableStream({start:function(e){e.close()}}),r=!0}catch(e){}t.ReadableStream=r?ReadableStream:n(144).ReadableStream},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,t){for(var n in t)e[n]=t[n]}(t,function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=7)}([function(e,t,n){var a="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)},l=n(1).assert;function d(e){return"string"==typeof e||"symbol"===(void 0===e?"undefined":a(e))}function h(e,t,n){if("function"!=typeof e)throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,t,n)}t.typeIsObject=function(e){return"object"===(void 0===e?"undefined":a(e))&&null!==e||"function"==typeof e},t.createDataProperty=function(e,n,r){l(t.typeIsObject(e)),Object.defineProperty(e,n,{value:r,writable:!0,enumerable:!0,configurable:!0})},t.createArrayFromList=function(e){return e.slice()},t.ArrayBufferCopy=function(e,t,n,r,a){new Uint8Array(e).set(new Uint8Array(n,r,a),t)},t.CreateIterResultObject=function(e,t){l("boolean"==typeof t);var n={};return Object.defineProperty(n,"value",{value:e,enumerable:!0,writable:!0,configurable:!0}),Object.defineProperty(n,"done",{value:t,enumerable:!0,writable:!0,configurable:!0}),n},t.IsFiniteNonNegativeNumber=function(e){return!(Number.isNaN(e)||e===1/0||e<0)},t.InvokeOrNoop=function(e,t,n){l(void 0!==e),l(d(t)),l(Array.isArray(n));var r=e[t];if(void 0!==r)return h(r,e,n)},t.PromiseInvokeOrNoop=function(e,n,r){l(void 0!==e),l(d(n)),l(Array.isArray(r));try{return Promise.resolve(t.InvokeOrNoop(e,n,r))}catch(e){return Promise.reject(e)}},t.PromiseInvokeOrPerformFallback=function(e,t,n,r,a){l(void 0!==e),l(d(t)),l(Array.isArray(n)),l(Array.isArray(a));var f=void 0;try{f=e[t]}catch(e){return Promise.reject(e)}if(void 0===f)return r.apply(null,a);try{return Promise.resolve(h(f,e,n))}catch(e){return Promise.reject(e)}},t.TransferArrayBuffer=function(e){return e.slice()},t.ValidateAndNormalizeHighWaterMark=function(e){if(e=Number(e),Number.isNaN(e)||e<0)throw new RangeError("highWaterMark property of a queuing strategy must be non-negative and non-NaN");return e},t.ValidateAndNormalizeQueuingStrategy=function(e,n){if(void 0!==e&&"function"!=typeof e)throw new TypeError("size property of a queuing strategy must be a function");return{size:e,highWaterMark:n=t.ValidateAndNormalizeHighWaterMark(n)}}},function(e,t,n){function AssertionError(e){this.name="AssertionError",this.message=e||"",this.stack=(new Error).stack}AssertionError.prototype=Object.create(Error.prototype),AssertionError.prototype.constructor=AssertionError,e.exports={rethrowAssertionErrorRejection:function(e){e&&e.constructor===AssertionError&&setTimeout((function(){throw e}),0)},AssertionError:AssertionError,assert:function(e,t){if(!e)throw new AssertionError(t)}}},function(e,t,n){var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var l=n(0),d=l.InvokeOrNoop,h=l.PromiseInvokeOrNoop,f=l.ValidateAndNormalizeQueuingStrategy,p=l.typeIsObject,y=n(1),w=y.assert,_=y.rethrowAssertionErrorRejection,C=n(3),S=C.DequeueValue,k=C.EnqueueValueWithSize,x=C.PeekQueueValue,E=C.ResetQueue,A=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.size,l=n.highWaterMark,d=void 0===l?1:l;a(this,e),this._state="writable",this._storedError=void 0,this._writer=void 0,this._writableStreamController=void 0,this._writeRequests=[],this._inFlightWriteRequest=void 0,this._closeRequest=void 0,this._inFlightCloseRequest=void 0,this._pendingAbortRequest=void 0,this._backpressure=!1;var h=t.type;if(void 0!==h)throw new RangeError("Invalid type is specified");this._writableStreamController=new K(this,t,r,d),this._writableStreamController.__startSteps()}return r(e,[{key:"abort",value:function(e){return!1===R(this)?Promise.reject(Z("abort")):!0===O(this)?Promise.reject(new TypeError("Cannot abort a stream that already has a writer")):M(this,e)}},{key:"getWriter",value:function(){if(!1===R(this))throw Z("getWriter");return T(this)}},{key:"locked",get:function(){if(!1===R(this))throw Z("locked");return O(this)}}]),e}();function T(e){return new z(e)}function R(e){return!!p(e)&&!!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")}function O(e){return w(!0===R(e),"IsWritableStreamLocked should only be used on known writable streams"),void 0!==e._writer}function M(e,t){var n=e._state;if("closed"===n)return Promise.resolve(void 0);if("errored"===n)return Promise.reject(e._storedError);var r=new TypeError("Requested to abort");if(void 0!==e._pendingAbortRequest)return Promise.reject(r);w("writable"===n||"erroring"===n,"state must be writable or erroring");var a=!1;"erroring"===n&&(a=!0,t=void 0);var l=new Promise((function(n,r){e._pendingAbortRequest={_resolve:n,_reject:r,_reason:t,_wasAlreadyErroring:a}}));return!1===a&&L(e,r),l}function P(e,t){var n=e._state;"writable"!==n?(w("erroring"===n),D(e)):L(e,t)}function L(e,t){w(void 0===e._storedError,"stream._storedError === undefined"),w("writable"===e._state,"state must be writable");var n=e._writableStreamController;w(void 0!==n,"controller must not be undefined"),e._state="erroring",e._storedError=t;var r=e._writer;void 0!==r&&V(r,t),!1===j(e)&&!0===n._started&&D(e)}function D(e){w("erroring"===e._state,"stream._state === erroring"),w(!1===j(e),"WritableStreamHasOperationMarkedInFlight(stream) === false"),e._state="errored",e._writableStreamController.__errorSteps();for(var t=e._storedError,n=0;n<e._writeRequests.length;n++)e._writeRequests[n]._reject(t);if(e._writeRequests=[],void 0!==e._pendingAbortRequest){var r=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,!0===r._wasAlreadyErroring)return r._reject(t),void N(e);e._writableStreamController.__abortSteps(r._reason).then((function(){r._resolve(),N(e)}),(function(t){r._reject(t),N(e)}))}else N(e)}function I(e){w(void 0!==e._inFlightCloseRequest),e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0;var t=e._state;w("writable"===t||"erroring"===t),"erroring"===t&&(e._storedError=void 0,void 0!==e._pendingAbortRequest&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";var n=e._writer;void 0!==n&&function(e){w(void 0!==e._closedPromise_resolve,"writer._closedPromise_resolve !== undefined"),w(void 0!==e._closedPromise_reject,"writer._closedPromise_reject !== undefined"),w("pending"===e._closedPromiseState,"writer._closedPromiseState is pending"),e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved"}(n),w(void 0===e._pendingAbortRequest,"stream._pendingAbortRequest === undefined"),w(void 0===e._storedError,"stream._storedError === undefined")}function F(e){return void 0!==e._closeRequest||void 0!==e._inFlightCloseRequest}function j(e){return void 0!==e._inFlightWriteRequest||void 0!==e._inFlightCloseRequest}function N(e){w("errored"===e._state,'_stream_.[[state]] is `"errored"`'),void 0!==e._closeRequest&&(w(void 0===e._inFlightCloseRequest),e._closeRequest._reject(e._storedError),e._closeRequest=void 0);var t=e._writer;void 0!==t&&(re(t,e._storedError),t._closedPromise.catch((function(){})))}function B(e,t){w("writable"===e._state),w(!1===F(e));var n=e._writer;void 0!==n&&t!==e._backpressure&&(!0===t?function(e){w(void 0===e._readyPromise_resolve,"writer._readyPromise_resolve === undefined"),w(void 0===e._readyPromise_reject,"writer._readyPromise_reject === undefined"),e._readyPromise=new Promise((function(t,n){e._readyPromise_resolve=t,e._readyPromise_reject=n})),e._readyPromiseState="pending"}(n):(w(!1===t),se(n))),e._backpressure=t}e.exports={AcquireWritableStreamDefaultWriter:T,IsWritableStream:R,IsWritableStreamLocked:O,WritableStream:A,WritableStreamAbort:M,WritableStreamDefaultControllerError:WritableStreamDefaultControllerError,WritableStreamDefaultWriterCloseWithErrorPropagation:function(e){var t=e._ownerWritableStream;w(void 0!==t);var n=t._state;return!0===F(t)||"closed"===n?Promise.resolve():"errored"===n?Promise.reject(t._storedError):(w("writable"===n||"erroring"===n),U(e))},WritableStreamDefaultWriterRelease:q,WritableStreamDefaultWriterWrite:G,WritableStreamCloseQueuedOrInFlight:F};var z=function(){function e(t){if(a(this,e),!1===R(t))throw new TypeError("WritableStreamDefaultWriter can only be constructed with a WritableStream instance");if(!0===O(t))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=t,t._writer=this;var n,r=t._state;if("writable"===r)!1===F(t)&&!0===t._backpressure?((n=this)._readyPromise=new Promise((function(e,t){n._readyPromise_resolve=e,n._readyPromise_reject=t})),n._readyPromiseState="pending"):ae(this),ne(this);else if("erroring"===r)oe(this,t._storedError),this._readyPromise.catch((function(){})),ne(this);else if("closed"===r)ae(this),function(e){e._closedPromise=Promise.resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved"}(this);else{w("errored"===r,"state must be errored");var l=t._storedError;oe(this,l),this._readyPromise.catch((function(){})),function(e,t){e._closedPromise=Promise.reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected"}(this,l),this._closedPromise.catch((function(){}))}}return r(e,[{key:"abort",value:function(e){return!1===H(this)?Promise.reject(ee("abort")):void 0===this._ownerWritableStream?Promise.reject(te("abort")):function(e,t){var n=e._ownerWritableStream;return w(void 0!==n),M(n,t)}(this,e)}},{key:"close",value:function(){if(!1===H(this))return Promise.reject(ee("close"));var e=this._ownerWritableStream;return void 0===e?Promise.reject(te("close")):!0===F(e)?Promise.reject(new TypeError("cannot close an already-closing stream")):U(this)}},{key:"releaseLock",value:function(){if(!1===H(this))throw ee("releaseLock");var e=this._ownerWritableStream;void 0!==e&&(w(void 0!==e._writer),q(this))}},{key:"write",value:function(e){return!1===H(this)?Promise.reject(ee("write")):void 0===this._ownerWritableStream?Promise.reject(te("write to")):G(this,e)}},{key:"closed",get:function(){return!1===H(this)?Promise.reject(ee("closed")):this._closedPromise}},{key:"desiredSize",get:function(){if(!1===H(this))throw ee("desiredSize");if(void 0===this._ownerWritableStream)throw te("desiredSize");return e=this._ownerWritableStream,"errored"===(t=e._state)||"erroring"===t?null:"closed"===t?0:Y(e._writableStreamController);var e,t}},{key:"ready",get:function(){return!1===H(this)?Promise.reject(ee("ready")):this._readyPromise}}]),e}();function H(e){return!!p(e)&&!!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")}function U(e){var t=e._ownerWritableStream;w(void 0!==t);var n=t._state;if("closed"===n||"errored"===n)return Promise.reject(new TypeError("The stream (in "+n+" state) is not in the writable state and cannot be closed"));w("writable"===n||"erroring"===n),w(!1===F(t));var r,a=new Promise((function(e,n){var r={_resolve:e,_reject:n};t._closeRequest=r}));return!0===t._backpressure&&"writable"===n&&se(e),r=t._writableStreamController,k(r,"close",0),X(r),a}function W(e,t){"pending"===e._closedPromiseState?re(e,t):function(e,t){w(void 0===e._closedPromise_resolve,"writer._closedPromise_resolve === undefined"),w(void 0===e._closedPromise_reject,"writer._closedPromise_reject === undefined"),w("pending"!==e._closedPromiseState,"writer._closedPromiseState is not pending"),e._closedPromise=Promise.reject(t),e._closedPromiseState="rejected"}(e,t),e._closedPromise.catch((function(){}))}function V(e,t){"pending"===e._readyPromiseState?function(e,t){w(void 0!==e._readyPromise_resolve,"writer._readyPromise_resolve !== undefined"),w(void 0!==e._readyPromise_reject,"writer._readyPromise_reject !== undefined"),e._readyPromise_reject(t),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected"}(e,t):function(e,t){w(void 0===e._readyPromise_resolve,"writer._readyPromise_resolve === undefined"),w(void 0===e._readyPromise_reject,"writer._readyPromise_reject === undefined"),e._readyPromise=Promise.reject(t),e._readyPromiseState="rejected"}(e,t),e._readyPromise.catch((function(){}))}function q(e){var t=e._ownerWritableStream;w(void 0!==t),w(t._writer===e);var n=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");V(e,n),W(e,n),t._writer=void 0,e._ownerWritableStream=void 0}function G(e,t){var n=e._ownerWritableStream;w(void 0!==n);var r=n._writableStreamController,a=function(e,t){var n=e._strategySize;if(void 0===n)return 1;try{return n(t)}catch(t){return J(e,t),1}}(r,t);if(n!==e._ownerWritableStream)return Promise.reject(te("write to"));var l=n._state;if("errored"===l)return Promise.reject(n._storedError);if(!0===F(n)||"closed"===l)return Promise.reject(new TypeError("The stream is closing or closed and cannot be written to"));if("erroring"===l)return Promise.reject(n._storedError);w("writable"===l);var d=function(e){return w(!0===O(e)),w("writable"===e._state),new Promise((function(t,n){var r={_resolve:t,_reject:n};e._writeRequests.push(r)}))}(n);return function(e,t,n){var r={chunk:t};try{k(e,r,n)}catch(t){return void J(e,t)}var a=e._controlledWritableStream;if(!1===F(a)&&"writable"===a._state){var l=Q(e);B(a,l)}X(e)}(r,t,a),d}var K=function(){function e(t,n,r,l){if(a(this,e),!1===R(t))throw new TypeError("WritableStreamDefaultController can only be constructed with a WritableStream instance");if(void 0!==t._writableStreamController)throw new TypeError("WritableStreamDefaultController instances can only be created by the WritableStream constructor");this._controlledWritableStream=t,this._underlyingSink=n,this._queue=void 0,this._queueTotalSize=void 0,E(this),this._started=!1;var d=f(r,l);this._strategySize=d.size,this._strategyHWM=d.highWaterMark,B(t,Q(this))}return r(e,[{key:"error",value:function(e){if(!1==(!!p(t=this)&&!!Object.prototype.hasOwnProperty.call(t,"_underlyingSink")))throw new TypeError("WritableStreamDefaultController.prototype.error can only be used on a WritableStreamDefaultController");var t;"writable"===this._controlledWritableStream._state&&WritableStreamDefaultControllerError(this,e)}},{key:"__abortSteps",value:function(e){return h(this._underlyingSink,"abort",[e])}},{key:"__errorSteps",value:function(){E(this)}},{key:"__startSteps",value:function(){var e=this,t=d(this._underlyingSink,"start",[this]),n=this._controlledWritableStream;Promise.resolve(t).then((function(){w("writable"===n._state||"erroring"===n._state),e._started=!0,X(e)}),(function(t){w("writable"===n._state||"erroring"===n._state),e._started=!0,P(n,t)})).catch(_)}}]),e}();function Y(e){return e._strategyHWM-e._queueTotalSize}function X(e){var t=e._controlledWritableStream;if(!1!==e._started&&void 0===t._inFlightWriteRequest){var n=t._state;if("closed"!==n&&"errored"!==n)if("erroring"!==n){if(0!==e._queue.length){var r=x(e);"close"===r?function(e){var t=e._controlledWritableStream;(function(e){w(void 0===e._inFlightCloseRequest),w(void 0!==e._closeRequest),e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0})(t),S(e),w(0===e._queue.length,"queue must be empty once the final write record is dequeued"),h(e._underlyingSink,"close",[]).then((function(){I(t)}),(function(e){!function WritableStreamFinishInFlightCloseWithError(e,t){w(void 0!==e._inFlightCloseRequest),e._inFlightCloseRequest._reject(t),e._inFlightCloseRequest=void 0,w("writable"===e._state||"erroring"===e._state),void 0!==e._pendingAbortRequest&&(e._pendingAbortRequest._reject(t),e._pendingAbortRequest=void 0),P(e,t)}(t,e)})).catch(_)}(e):function(e,t){var n=e._controlledWritableStream;(function(e){w(void 0===e._inFlightWriteRequest,"there must be no pending write request"),w(0!==e._writeRequests.length,"writeRequests must not be empty"),e._inFlightWriteRequest=e._writeRequests.shift()})(n),h(e._underlyingSink,"write",[t,e]).then((function(){!function(e){w(void 0!==e._inFlightWriteRequest),e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}(n);var t=n._state;if(w("writable"===t||"erroring"===t),S(e),!1===F(n)&&"writable"===t){var r=Q(e);B(n,r)}X(e)}),(function(e){!function WritableStreamFinishInFlightWriteWithError(e,t){w(void 0!==e._inFlightWriteRequest),e._inFlightWriteRequest._reject(t),e._inFlightWriteRequest=void 0,w("writable"===e._state||"erroring"===e._state),P(e,t)}(n,e)})).catch(_)}(e,r.chunk)}}else D(t)}}function J(e,t){"writable"===e._controlledWritableStream._state&&WritableStreamDefaultControllerError(e,t)}function Q(e){return Y(e)<=0}function WritableStreamDefaultControllerError(e,t){var n=e._controlledWritableStream;w("writable"===n._state),L(n,t)}function Z(e){return new TypeError("WritableStream.prototype."+e+" can only be used on a WritableStream")}function ee(e){return new TypeError("WritableStreamDefaultWriter.prototype."+e+" can only be used on a WritableStreamDefaultWriter")}function te(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function ne(e){e._closedPromise=new Promise((function(t,n){e._closedPromise_resolve=t,e._closedPromise_reject=n,e._closedPromiseState="pending"}))}function re(e,t){w(void 0!==e._closedPromise_resolve,"writer._closedPromise_resolve !== undefined"),w(void 0!==e._closedPromise_reject,"writer._closedPromise_reject !== undefined"),w("pending"===e._closedPromiseState,"writer._closedPromiseState is pending"),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected"}function oe(e,t){e._readyPromise=Promise.reject(t),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected"}function ae(e){e._readyPromise=Promise.resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled"}function se(e){w(void 0!==e._readyPromise_resolve,"writer._readyPromise_resolve !== undefined"),w(void 0!==e._readyPromise_reject,"writer._readyPromise_reject !== undefined"),e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled"}},function(e,t,n){var r=n(0).IsFiniteNonNegativeNumber,a=n(1).assert;t.DequeueValue=function(e){a("_queue"in e&&"_queueTotalSize"in e,"Spec-level failure: DequeueValue should only be used on containers with [[queue]] and [[queueTotalSize]]."),a(e._queue.length>0,"Spec-level failure: should never dequeue from an empty queue.");var t=e._queue.shift();return e._queueTotalSize-=t.size,e._queueTotalSize<0&&(e._queueTotalSize=0),t.value},t.EnqueueValueWithSize=function(e,t,n){if(a("_queue"in e&&"_queueTotalSize"in e,"Spec-level failure: EnqueueValueWithSize should only be used on containers with [[queue]] and [[queueTotalSize]]."),n=Number(n),!r(n))throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:t,size:n}),e._queueTotalSize+=n},t.PeekQueueValue=function(e){return a("_queue"in e&&"_queueTotalSize"in e,"Spec-level failure: PeekQueueValue should only be used on containers with [[queue]] and [[queueTotalSize]]."),a(e._queue.length>0,"Spec-level failure: should never peek at an empty queue."),e._queue[0].value},t.ResetQueue=function(e){a("_queue"in e&&"_queueTotalSize"in e,"Spec-level failure: ResetQueue should only be used on containers with [[queue]] and [[queueTotalSize]]."),e._queue=[],e._queueTotalSize=0}},function(e,t,n){var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var l=n(0),d=l.ArrayBufferCopy,h=l.CreateIterResultObject,f=l.IsFiniteNonNegativeNumber,p=l.InvokeOrNoop,y=l.PromiseInvokeOrNoop,w=l.TransferArrayBuffer,_=l.ValidateAndNormalizeQueuingStrategy,C=l.ValidateAndNormalizeHighWaterMark,S=n(0),k=S.createArrayFromList,x=S.createDataProperty,E=S.typeIsObject,A=n(1),T=A.assert,R=A.rethrowAssertionErrorRejection,O=n(3),M=O.DequeueValue,P=O.EnqueueValueWithSize,L=O.ResetQueue,D=n(2),I=D.AcquireWritableStreamDefaultWriter,F=D.IsWritableStream,j=D.IsWritableStreamLocked,N=D.WritableStreamAbort,B=D.WritableStreamDefaultWriterCloseWithErrorPropagation,z=D.WritableStreamDefaultWriterRelease,H=D.WritableStreamDefaultWriterWrite,U=D.WritableStreamCloseQueuedOrInFlight,W=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.size,l=n.highWaterMark;a(this,e),this._state="readable",this._reader=void 0,this._storedError=void 0,this._disturbed=!1,this._readableStreamController=void 0;var d=t.type,h=String(d);if("bytes"===h)void 0===l&&(l=0),this._readableStreamController=new Ce(this,t,l);else{if(void 0!==d)throw new RangeError("Invalid type is specified");void 0===l&&(l=1),this._readableStreamController=new pe(this,t,r,l)}}return r(e,[{key:"cancel",value:function(e){return!1===G(this)?Promise.reject(je("cancel")):!0===K(this)?Promise.reject(new TypeError("Cannot cancel a stream that already has a reader")):Q(this,e)}},{key:"getReader",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mode;if(!1===G(this))throw je("getReader");if(void 0===t)return q(this);if("byob"===(t=String(t)))return V(this);throw new RangeError("Invalid mode is specified")}},{key:"pipeThrough",value:function(e,t){var n=e.writable,r=e.readable;return function(e){try{Promise.prototype.then.call(e,void 0,(function(){}))}catch(e){}}(this.pipeTo(n,t)),r}},{key:"pipeTo",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.preventClose,a=n.preventAbort,l=n.preventCancel;if(!1===G(this))return Promise.reject(je("pipeTo"));if(!1===F(e))return Promise.reject(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));if(r=Boolean(r),a=Boolean(a),l=Boolean(l),!0===K(this))return Promise.reject(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream"));if(!0===j(e))return Promise.reject(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream"));var d=q(this),h=I(e),f=!1,p=Promise.resolve();return new Promise((function(n,y){var w,_,C;if(x(t,d._closedPromise,(function(t){!1===a?E((function(){return N(e,t)}),!0,t):A(!0,t)})),x(e,h._closedPromise,(function(e){!1===l?E((function(){return Q(t,e)}),!0,e):A(!0,e)})),w=t,_=d._closedPromise,C=function(){!1===r?E((function(){return B(h)})):A()},"closed"===w._state?C():_.then(C).catch(R),!0===U(e)||"closed"===e._state){var S=new TypeError("the destination writable stream closed before all data could be piped to it");!1===l?E((function(){return Q(t,S)}),!0,S):A(!0,S)}function k(){var e=p;return p.then((function(){return e!==p?k():void 0}))}function x(e,t,n){"errored"===e._state?n(e._storedError):t.catch(n).catch(R)}function E(t,n,r){function a(){t().then((function(){return T(n,r)}),(function(e){return T(!0,e)})).catch(R)}!0!==f&&(f=!0,"writable"===e._state&&!1===U(e)?k().then(a):a())}function A(t,n){!0!==f&&(f=!0,"writable"===e._state&&!1===U(e)?k().then((function(){return T(t,n)})).catch(R):T(t,n))}function T(e,t){z(h),he(d),e?y(t):n(void 0)}(function e(){return p=Promise.resolve(),!0===f?Promise.resolve():h._readyPromise.then((function(){return fe(d).then((function(e){var t=e.value;!0!==e.done&&(p=H(h,t).catch((function(){})))}))})).then(e)})().catch((function(e){p=Promise.resolve(),R(e)}))}))}},{key:"tee",value:function(){if(!1===G(this))throw je("tee");var e=Y(this,!1);return k(e)}},{key:"locked",get:function(){if(!1===G(this))throw je("locked");return K(this)}}]),e}();function V(e){return new se(e)}function q(e){return new ae(e)}function G(e){return!!E(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")}function K(e){return T(!0===G(e),"IsReadableStreamLocked should only be used on known readable streams"),void 0!==e._reader}function Y(e,t){T(!0===G(e)),T("boolean"==typeof t);var n=q(e),r={closedOrErrored:!1,canceled1:!1,canceled2:!1,reason1:void 0,reason2:void 0};r.promise=new Promise((function(e){r._resolve=e}));var a=function e(){var t=e._branch1,n=e._branch2,r=e._teeState;return fe(e._reader).then((function(e){T(E(e));var a=e.value,l=e.done;if(T("boolean"==typeof l),!0===l&&!1===r.closedOrErrored&&(!1===r.canceled1&&ve(t),!1===r.canceled2&&ve(n),r.closedOrErrored=!0),!0!==r.closedOrErrored){var d=a,h=a;!1===r.canceled1&&ye(t,d),!1===r.canceled2&&ye(n,h)}}))};a._reader=n,a._teeState=r,a._cloneForBranch2=t;var l=function e(t){var n=e._stream,r=e._teeState;if(r.canceled1=!0,r.reason1=t,!0===r.canceled2){var a=Q(n,k([r.reason1,r.reason2]));r._resolve(a)}return r.promise};l._stream=e,l._teeState=r;var d=function e(t){var n=e._stream,r=e._teeState;if(r.canceled2=!0,r.reason2=t,!0===r.canceled1){var a=Q(n,k([r.reason1,r.reason2]));r._resolve(a)}return r.promise};d._stream=e,d._teeState=r;var h=Object.create(Object.prototype);x(h,"pull",a),x(h,"cancel",l);var f=new W(h),p=Object.create(Object.prototype);x(p,"pull",a),x(p,"cancel",d);var y=new W(p);return a._branch1=f._readableStreamController,a._branch2=y._readableStreamController,n._closedPromise.catch((function(e){!0!==r.closedOrErrored&&(ReadableStreamDefaultControllerError(a._branch1,e),ReadableStreamDefaultControllerError(a._branch2,e),r.closedOrErrored=!0)})),[f,y]}function X(e){return T(!0===le(e._reader)),T("readable"===e._state||"closed"===e._state),new Promise((function(t,n){var r={_resolve:t,_reject:n};e._reader._readIntoRequests.push(r)}))}function J(e){return T(!0===ce(e._reader)),T("readable"===e._state),new Promise((function(t,n){var r={_resolve:t,_reject:n};e._reader._readRequests.push(r)}))}function Q(e,t){return e._disturbed=!0,"closed"===e._state?Promise.resolve(void 0):"errored"===e._state?Promise.reject(e._storedError):(Z(e),e._readableStreamController.__cancelSteps(t).then((function(){})))}function Z(e){T("readable"===e._state),e._state="closed";var t=e._reader;if(void 0!==t){if(!0===ce(t)){for(var n=0;n<t._readRequests.length;n++)(0,t._readRequests[n]._resolve)(h(void 0,!0));t._readRequests=[]}!function(e){T(void 0!==e._closedPromise_resolve),T(void 0!==e._closedPromise_reject),e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0}(t)}}function ReadableStreamError(e,t){T(!0===G(e),"stream must be ReadableStream"),T("readable"===e._state,"state must be readable"),e._state="errored",e._storedError=t;var n=e._reader;if(void 0!==n){if(!0===ce(n)){for(var r=0;r<n._readRequests.length;r++)n._readRequests[r]._reject(t);n._readRequests=[]}else{T(le(n),"reader must be ReadableStreamBYOBReader");for(var a=0;a<n._readIntoRequests.length;a++)n._readIntoRequests[a]._reject(t);n._readIntoRequests=[]}ze(n,t),n._closedPromise.catch((function(){}))}}function ee(e,t,n){var r=e._reader;T(r._readRequests.length>0),r._readRequests.shift()._resolve(h(t,n))}function te(e){return e._reader._readIntoRequests.length}function ne(e){return e._reader._readRequests.length}function re(e){var t=e._reader;return void 0!==t&&!1!==le(t)}function oe(e){var t=e._reader;return void 0!==t&&!1!==ce(t)}e.exports={ReadableStream:W,IsReadableStreamDisturbed:function(e){return T(!0===G(e),"IsReadableStreamDisturbed should only be used on known readable streams"),e._disturbed},ReadableStreamDefaultControllerClose:ve,ReadableStreamDefaultControllerEnqueue:ye,ReadableStreamDefaultControllerError:ReadableStreamDefaultControllerError,ReadableStreamDefaultControllerGetDesiredSize:we};var ae=function(){function e(t){if(a(this,e),!1===G(t))throw new TypeError("ReadableStreamDefaultReader can only be constructed with a ReadableStream instance");if(!0===K(t))throw new TypeError("This stream has already been locked for exclusive reading by another reader");ue(this,t),this._readRequests=[]}return r(e,[{key:"cancel",value:function(e){return!1===ce(this)?Promise.reject(Be("cancel")):void 0===this._ownerReadableStream?Promise.reject(Ne("cancel")):de(this,e)}},{key:"read",value:function(){return!1===ce(this)?Promise.reject(Be("read")):void 0===this._ownerReadableStream?Promise.reject(Ne("read from")):fe(this)}},{key:"releaseLock",value:function(){if(!1===ce(this))throw Be("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");he(this)}}},{key:"closed",get:function(){return!1===ce(this)?Promise.reject(Be("closed")):this._closedPromise}}]),e}(),se=function(){function e(t){if(a(this,e),!G(t))throw new TypeError("ReadableStreamBYOBReader can only be constructed with a ReadableStream instance given a byte source");if(!1===Se(t._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");if(K(t))throw new TypeError("This stream has already been locked for exclusive reading by another reader");ue(this,t),this._readIntoRequests=[]}return r(e,[{key:"cancel",value:function(e){return le(this)?void 0===this._ownerReadableStream?Promise.reject(Ne("cancel")):de(this,e):Promise.reject(He("cancel"))}},{key:"read",value:function(e){return le(this)?void 0===this._ownerReadableStream?Promise.reject(Ne("read from")):ArrayBuffer.isView(e)?0===e.byteLength?Promise.reject(new TypeError("view must have non-zero byteLength")):function(e,t){var n=e._ownerReadableStream;return T(void 0!==n),n._disturbed=!0,"errored"===n._state?Promise.reject(n._storedError):function(e,t){var n=e._controlledReadableStream,r=1;t.constructor!==DataView&&(r=t.constructor.BYTES_PER_ELEMENT);var a=t.constructor,l={buffer:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength,bytesFilled:0,elementSize:r,ctor:a,readerType:"byob"};if(e._pendingPullIntos.length>0)return l.buffer=w(l.buffer),e._pendingPullIntos.push(l),X(n);if("closed"===n._state){var d=new t.constructor(l.buffer,l.byteOffset,0);return Promise.resolve(h(d,!0))}if(e._queueTotalSize>0){if(!0===Re(e,l)){var f=Te(l);return Me(e),Promise.resolve(h(f,!1))}if(!0===e._closeRequested){var p=new TypeError("Insufficient bytes to fill elements in the given buffer");return ReadableByteStreamControllerError(e,p),Promise.reject(p)}}l.buffer=w(l.buffer),e._pendingPullIntos.push(l);var y=X(n);return xe(e),y}(n._readableStreamController,t)}(this,e):Promise.reject(new TypeError("view must be an array buffer view")):Promise.reject(He("read"))}},{key:"releaseLock",value:function(){if(!le(this))throw He("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");he(this)}}},{key:"closed",get:function(){return le(this)?this._closedPromise:Promise.reject(He("closed"))}}]),e}();function le(e){return!!E(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")}function ce(e){return!!E(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readRequests")}function ue(e,t){e._ownerReadableStream=t,t._reader=e,"readable"===t._state?function(e){e._closedPromise=new Promise((function(t,n){e._closedPromise_resolve=t,e._closedPromise_reject=n}))}(e):"closed"===t._state?function(e){e._closedPromise=Promise.resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0}(e):(T("errored"===t._state,"state must be errored"),function(e,t){e._closedPromise=Promise.reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0}(e,t._storedError),e._closedPromise.catch((function(){})))}function de(e,t){var n=e._ownerReadableStream;return T(void 0!==n),Q(n,t)}function he(e){T(void 0!==e._ownerReadableStream),T(e._ownerReadableStream._reader===e),"readable"===e._ownerReadableStream._state?ze(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):function(e,t){T(void 0===e._closedPromise_resolve),T(void 0===e._closedPromise_reject),e._closedPromise=Promise.reject(t)}(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._closedPromise.catch((function(){})),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function fe(e){var t=e._ownerReadableStream;return T(void 0!==t),t._disturbed=!0,"closed"===t._state?Promise.resolve(h(void 0,!0)):"errored"===t._state?Promise.reject(t._storedError):(T("readable"===t._state),t._readableStreamController.__pullSteps())}var pe=function(){function e(t,n,r,l){if(a(this,e),!1===G(t))throw new TypeError("ReadableStreamDefaultController can only be constructed with a ReadableStream instance");if(void 0!==t._readableStreamController)throw new TypeError("ReadableStreamDefaultController instances can only be created by the ReadableStream constructor");this._controlledReadableStream=t,this._underlyingSource=n,this._queue=void 0,this._queueTotalSize=void 0,L(this),this._started=!1,this._closeRequested=!1,this._pullAgain=!1,this._pulling=!1;var d=_(r,l);this._strategySize=d.size,this._strategyHWM=d.highWaterMark;var h=this,f=p(n,"start",[this]);Promise.resolve(f).then((function(){h._started=!0,T(!1===h._pulling),T(!1===h._pullAgain),me(h)}),(function(e){be(h,e)})).catch(R)}return r(e,[{key:"close",value:function(){if(!1===ge(this))throw Ue("close");if(!0===this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");var e=this._controlledReadableStream._state;if("readable"!==e)throw new TypeError("The stream (in "+e+" state) is not in the readable state and cannot be closed");ve(this)}},{key:"enqueue",value:function(e){if(!1===ge(this))throw Ue("enqueue");if(!0===this._closeRequested)throw new TypeError("stream is closed or draining");var t=this._controlledReadableStream._state;if("readable"!==t)throw new TypeError("The stream (in "+t+" state) is not in the readable state and cannot be enqueued to");return ye(this,e)}},{key:"error",value:function(e){if(!1===ge(this))throw Ue("error");var t=this._controlledReadableStream;if("readable"!==t._state)throw new TypeError("The stream is "+t._state+" and so cannot be errored");ReadableStreamDefaultControllerError(this,e)}},{key:"__cancelSteps",value:function(e){return L(this),y(this._underlyingSource,"cancel",[e])}},{key:"__pullSteps",value:function(){var e=this._controlledReadableStream;if(this._queue.length>0){var t=M(this);return!0===this._closeRequested&&0===this._queue.length?Z(e):me(this),Promise.resolve(h(t,!1))}var n=J(e);return me(this),n}},{key:"desiredSize",get:function(){if(!1===ge(this))throw Ue("desiredSize");return we(this)}}]),e}();function ge(e){return!!E(e)&&!!Object.prototype.hasOwnProperty.call(e,"_underlyingSource")}function me(e){!1!==function(e){var t=e._controlledReadableStream;return"closed"!==t._state&&"errored"!==t._state&&(!0!==e._closeRequested&&(!1!==e._started&&(!0===K(t)&&ne(t)>0||we(e)>0)))}(e)&&(!0!==e._pulling?(T(!1===e._pullAgain),e._pulling=!0,y(e._underlyingSource,"pull",[e]).then((function(){if(e._pulling=!1,!0===e._pullAgain)return e._pullAgain=!1,me(e)}),(function(t){be(e,t)})).catch(R)):e._pullAgain=!0)}function ve(e){var t=e._controlledReadableStream;T(!1===e._closeRequested),T("readable"===t._state),e._closeRequested=!0,0===e._queue.length&&Z(t)}function ye(e,t){var n=e._controlledReadableStream;if(T(!1===e._closeRequested),T("readable"===n._state),!0===K(n)&&ne(n)>0)ee(n,t,!1);else{var r=1;if(void 0!==e._strategySize){var a=e._strategySize;try{r=a(t)}catch(t){throw be(e,t),t}}try{P(e,t,r)}catch(t){throw be(e,t),t}}me(e)}function ReadableStreamDefaultControllerError(e,t){var n=e._controlledReadableStream;T("readable"===n._state),L(e),ReadableStreamError(n,t)}function be(e,t){"readable"===e._controlledReadableStream._state&&ReadableStreamDefaultControllerError(e,t)}function we(e){var t=e._controlledReadableStream._state;return"errored"===t?null:"closed"===t?0:e._strategyHWM-e._queueTotalSize}var _e=function(){function e(t,n){a(this,e),this._associatedReadableByteStreamController=t,this._view=n}return r(e,[{key:"respond",value:function(e){if(!1===ke(this))throw We("respond");if(void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");!function(e,t){if(t=Number(t),!1===f(t))throw new RangeError("bytesWritten must be a finite");T(e._pendingPullIntos.length>0),De(e,t)}(this._associatedReadableByteStreamController,e)}},{key:"respondWithNewView",value:function(e){if(!1===ke(this))throw We("respond");if(void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");if(!ArrayBuffer.isView(e))throw new TypeError("You can only respond with array buffer views");!function(e,t){T(e._pendingPullIntos.length>0);var n=e._pendingPullIntos[0];if(n.byteOffset+n.bytesFilled!==t.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(n.byteLength!==t.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");n.buffer=t.buffer,De(e,t.byteLength)}(this._associatedReadableByteStreamController,e)}},{key:"view",get:function(){return this._view}}]),e}(),Ce=function(){function e(t,n,r){if(a(this,e),!1===G(t))throw new TypeError("ReadableByteStreamController can only be constructed with a ReadableStream instance given a byte source");if(void 0!==t._readableStreamController)throw new TypeError("ReadableByteStreamController instances can only be created by the ReadableStream constructor given a byte source");this._controlledReadableStream=t,this._underlyingByteSource=n,this._pullAgain=!1,this._pulling=!1,Ee(this),this._queue=this._queueTotalSize=void 0,L(this),this._closeRequested=!1,this._started=!1,this._strategyHWM=C(r);var l=n.autoAllocateChunkSize;if(void 0!==l&&(!1===Number.isInteger(l)||l<=0))throw new RangeError("autoAllocateChunkSize must be a positive integer");this._autoAllocateChunkSize=l,this._pendingPullIntos=[];var d=this,h=p(n,"start",[this]);Promise.resolve(h).then((function(){d._started=!0,T(!1===d._pulling),T(!1===d._pullAgain),xe(d)}),(function(e){"readable"===t._state&&ReadableByteStreamControllerError(d,e)})).catch(R)}return r(e,[{key:"close",value:function(){if(!1===Se(this))throw Ve("close");if(!0===this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");var e=this._controlledReadableStream._state;if("readable"!==e)throw new TypeError("The stream (in "+e+" state) is not in the readable state and cannot be closed");!function(e){var t=e._controlledReadableStream;if(T(!1===e._closeRequested),T("readable"===t._state),e._queueTotalSize>0)e._closeRequested=!0;else{if(e._pendingPullIntos.length>0&&e._pendingPullIntos[0].bytesFilled>0){var n=new TypeError("Insufficient bytes to fill elements in the given buffer");throw ReadableByteStreamControllerError(e,n),n}Z(t)}}(this)}},{key:"enqueue",value:function(e){if(!1===Se(this))throw Ve("enqueue");if(!0===this._closeRequested)throw new TypeError("stream is closed or draining");var t=this._controlledReadableStream._state;if("readable"!==t)throw new TypeError("The stream (in "+t+" state) is not in the readable state and cannot be enqueued to");if(!ArrayBuffer.isView(e))throw new TypeError("You can only enqueue array buffer views when using a ReadableByteStreamController");!function(e,t){var n=e._controlledReadableStream;T(!1===e._closeRequested),T("readable"===n._state);var r=t.buffer,a=t.byteOffset,l=t.byteLength,d=w(r);if(!0===oe(n))if(0===ne(n))$e(e,d,a,l);else{T(0===e._queue.length);var h=new Uint8Array(d,a,l);ee(n,h,!1)}else!0===re(n)?($e(e,d,a,l),Le(e)):(T(!1===K(n),"stream must not be locked"),$e(e,d,a,l))}(this,e)}},{key:"error",value:function(e){if(!1===Se(this))throw Ve("error");var t=this._controlledReadableStream;if("readable"!==t._state)throw new TypeError("The stream is "+t._state+" and so cannot be errored");ReadableByteStreamControllerError(this,e)}},{key:"__cancelSteps",value:function(e){return this._pendingPullIntos.length>0&&(this._pendingPullIntos[0].bytesFilled=0),L(this),y(this._underlyingByteSource,"cancel",[e])}},{key:"__pullSteps",value:function(){var e=this._controlledReadableStream;if(T(!0===oe(e)),this._queueTotalSize>0){T(0===ne(e));var t=this._queue.shift();this._queueTotalSize-=t.byteLength,Me(this);var n=void 0;try{n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}catch(e){return Promise.reject(e)}return Promise.resolve(h(n,!1))}var r=this._autoAllocateChunkSize;if(void 0!==r){var a=void 0;try{a=new ArrayBuffer(r)}catch(e){return Promise.reject(e)}var l={buffer:a,byteOffset:0,byteLength:r,bytesFilled:0,elementSize:1,ctor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(l)}var d=J(e);return xe(this),d}},{key:"byobRequest",get:function(){if(!1===Se(this))throw Ve("byobRequest");if(void 0===this._byobRequest&&this._pendingPullIntos.length>0){var e=this._pendingPullIntos[0],t=new Uint8Array(e.buffer,e.byteOffset+e.bytesFilled,e.byteLength-e.bytesFilled);this._byobRequest=new _e(this,t)}return this._byobRequest}},{key:"desiredSize",get:function(){if(!1===Se(this))throw Ve("desiredSize");return Fe(this)}}]),e}();function Se(e){return!!E(e)&&!!Object.prototype.hasOwnProperty.call(e,"_underlyingByteSource")}function ke(e){return!!E(e)&&!!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")}function xe(e){!1!==function(e){var t=e._controlledReadableStream;return"readable"===t._state&&(!0!==e._closeRequested&&(!1!==e._started&&(!0===oe(t)&&ne(t)>0||(!0===re(t)&&te(t)>0||Fe(e)>0))))}(e)&&(!0!==e._pulling?(T(!1===e._pullAgain),e._pulling=!0,y(e._underlyingByteSource,"pull",[e]).then((function(){e._pulling=!1,!0===e._pullAgain&&(e._pullAgain=!1,xe(e))}),(function(t){"readable"===e._controlledReadableStream._state&&ReadableByteStreamControllerError(e,t)})).catch(R)):e._pullAgain=!0)}function Ee(e){Pe(e),e._pendingPullIntos=[]}function Ae(e,t){T("errored"!==e._state,"state must not be errored");var n=!1;"closed"===e._state&&(T(0===t.bytesFilled),n=!0);var r=Te(t);"default"===t.readerType?ee(e,r,n):(T("byob"===t.readerType),function(e,t,n){var r=e._reader;T(r._readIntoRequests.length>0),r._readIntoRequests.shift()._resolve(h(t,n))}(e,r,n))}function Te(e){var t=e.bytesFilled,n=e.elementSize;return T(t<=e.byteLength),T(t%n==0),new e.ctor(e.buffer,e.byteOffset,t/n)}function $e(e,t,n,r){e._queue.push({buffer:t,byteOffset:n,byteLength:r}),e._queueTotalSize+=r}function Re(e,t){var n=t.elementSize,r=t.bytesFilled-t.bytesFilled%n,a=Math.min(e._queueTotalSize,t.byteLength-t.bytesFilled),l=t.bytesFilled+a,h=l-l%n,f=a,p=!1;h>r&&(f=h-t.bytesFilled,p=!0);for(var y=e._queue;f>0;){var w=y[0],_=Math.min(f,w.byteLength),C=t.byteOffset+t.bytesFilled;d(t.buffer,C,w.buffer,w.byteOffset,_),w.byteLength===_?y.shift():(w.byteOffset+=_,w.byteLength-=_),e._queueTotalSize-=_,Oe(e,_,t),f-=_}return!1===p&&(T(0===e._queueTotalSize,"queue must be empty"),T(t.bytesFilled>0),T(t.bytesFilled<t.elementSize)),p}function Oe(e,t,n){T(0===e._pendingPullIntos.length||e._pendingPullIntos[0]===n),Pe(e),n.bytesFilled+=t}function Me(e){T("readable"===e._controlledReadableStream._state),0===e._queueTotalSize&&!0===e._closeRequested?Z(e._controlledReadableStream):xe(e)}function Pe(e){void 0!==e._byobRequest&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=void 0,e._byobRequest=void 0)}function Le(e){for(T(!1===e._closeRequested);e._pendingPullIntos.length>0;){if(0===e._queueTotalSize)return;var t=e._pendingPullIntos[0];!0===Re(e,t)&&(Ie(e),Ae(e._controlledReadableStream,t))}}function De(e,t){var n=e._pendingPullIntos[0],r=e._controlledReadableStream;if("closed"===r._state){if(0!==t)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream");!function(e,t){t.buffer=w(t.buffer),T(0===t.bytesFilled,"bytesFilled must be 0");var n=e._controlledReadableStream;if(!0===re(n))for(;te(n)>0;)Ae(n,Ie(e))}(e,n)}else T("readable"===r._state),function(e,t,n){if(n.bytesFilled+t>n.byteLength)throw new RangeError("bytesWritten out of range");if(Oe(e,t,n),!(n.bytesFilled<n.elementSize)){Ie(e);var r=n.bytesFilled%n.elementSize;if(r>0){var a=n.byteOffset+n.bytesFilled,l=n.buffer.slice(a-r,a);$e(e,l,0,l.byteLength)}n.buffer=w(n.buffer),n.bytesFilled-=r,Ae(e._controlledReadableStream,n),Le(e)}}(e,t,n)}function Ie(e){var t=e._pendingPullIntos.shift();return Pe(e),t}function ReadableByteStreamControllerError(e,t){var n=e._controlledReadableStream;T("readable"===n._state),Ee(e),L(e),ReadableStreamError(n,t)}function Fe(e){var t=e._controlledReadableStream._state;return"errored"===t?null:"closed"===t?0:e._strategyHWM-e._queueTotalSize}function je(e){return new TypeError("ReadableStream.prototype."+e+" can only be used on a ReadableStream")}function Ne(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function Be(e){return new TypeError("ReadableStreamDefaultReader.prototype."+e+" can only be used on a ReadableStreamDefaultReader")}function ze(e,t){T(void 0!==e._closedPromise_resolve),T(void 0!==e._closedPromise_reject),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0}function He(e){return new TypeError("ReadableStreamBYOBReader.prototype."+e+" can only be used on a ReadableStreamBYOBReader")}function Ue(e){return new TypeError("ReadableStreamDefaultController.prototype."+e+" can only be used on a ReadableStreamDefaultController")}function We(e){return new TypeError("ReadableStreamBYOBRequest.prototype."+e+" can only be used on a ReadableStreamBYOBRequest")}function Ve(e){return new TypeError("ReadableByteStreamController.prototype."+e+" can only be used on a ReadableByteStreamController")}},function(e,t,n){var r=n(6),a=n(4),l=n(2);t.TransformStream=r.TransformStream,t.ReadableStream=a.ReadableStream,t.IsReadableStreamDisturbed=a.IsReadableStreamDisturbed,t.ReadableStreamDefaultControllerClose=a.ReadableStreamDefaultControllerClose,t.ReadableStreamDefaultControllerEnqueue=a.ReadableStreamDefaultControllerEnqueue,t.ReadableStreamDefaultControllerError=a.ReadableStreamDefaultControllerError,t.ReadableStreamDefaultControllerGetDesiredSize=a.ReadableStreamDefaultControllerGetDesiredSize,t.AcquireWritableStreamDefaultWriter=l.AcquireWritableStreamDefaultWriter,t.IsWritableStream=l.IsWritableStream,t.IsWritableStreamLocked=l.IsWritableStreamLocked,t.WritableStream=l.WritableStream,t.WritableStreamAbort=l.WritableStreamAbort,t.WritableStreamDefaultControllerError=l.WritableStreamDefaultControllerError,t.WritableStreamDefaultWriterCloseWithErrorPropagation=l.WritableStreamDefaultWriterCloseWithErrorPropagation,t.WritableStreamDefaultWriterRelease=l.WritableStreamDefaultWriterRelease,t.WritableStreamDefaultWriterWrite=l.WritableStreamDefaultWriterWrite},function(e,t,n){var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var l=n(1).assert,d=n(0),h=d.InvokeOrNoop,f=d.PromiseInvokeOrPerformFallback,p=d.PromiseInvokeOrNoop,y=d.typeIsObject,w=n(4),_=w.ReadableStream,C=w.ReadableStreamDefaultControllerClose,S=w.ReadableStreamDefaultControllerEnqueue,k=w.ReadableStreamDefaultControllerError,x=w.ReadableStreamDefaultControllerGetDesiredSize,E=n(2),A=E.WritableStream,T=E.WritableStreamDefaultControllerError;function R(e,t){if(!0===e._errored)throw new TypeError("TransformStream is already errored");if(!0===e._readableClosed)throw new TypeError("Readable side is already closed");var n=e._readableController;try{S(n,t)}catch(t){throw e._readableClosed=!0,M(e,t),e._storedError}!0==x(n)<=0&&!1===e._backpressure&&D(e,!0)}function O(e){l(!1===e._errored),l(!1===e._readableClosed);try{C(e._readableController)}catch(e){l(!1)}e._readableClosed=!0}function M(e,t){!1===e._errored&&P(e,t)}function P(e,t){l(!1===e._errored),e._errored=!0,e._storedError=t,!1===e._writableDone&&T(e._writableController,t),!1===e._readableClosed&&k(e._readableController,t)}function L(e){return l(void 0!==e._backpressureChangePromise,"_backpressureChangePromise should have been initialized"),!1===e._backpressure?Promise.resolve():(l(!0===e._backpressure,"_backpressure should have been initialized"),e._backpressureChangePromise)}function D(e,t){l(e._backpressure!==t,"TransformStreamSetBackpressure() should be called only when backpressure is changed"),void 0!==e._backpressureChangePromise&&e._backpressureChangePromise_resolve(t),e._backpressureChangePromise=new Promise((function(t){e._backpressureChangePromise_resolve=t})),e._backpressureChangePromise.then((function(e){l(e!==t,"_backpressureChangePromise should be fulfilled only when backpressure is changed")})),e._backpressure=t}function I(e,t){return R(t._controlledTransformStream,e),Promise.resolve()}function F(e){return!!y(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")}function j(e){return!!y(e)&&!!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")}var N=function(){function e(t,n){a(this,e),this._transformStream=t,this._startPromise=n}return r(e,[{key:"start",value:function(e){var t=this._transformStream;return t._writableController=e,this._startPromise.then((function(){return L(t)}))}},{key:"write",value:function(e){return function(e,t){l(!1===e._errored),l(!1===e._transforming),l(!1===e._backpressure),e._transforming=!0;var n=e._transformer,r=e._transformStreamController;return f(n,"transform",[t,r],I,[t,r]).then((function(){return e._transforming=!1,L(e)}),(function(t){return M(e,t),Promise.reject(t)}))}(this._transformStream,e)}},{key:"abort",value:function(){var e=this._transformStream;e._writableDone=!0,P(e,new TypeError("Writable side aborted"))}},{key:"close",value:function(){var e=this._transformStream;return l(!1===e._transforming),e._writableDone=!0,p(e._transformer,"flush",[e._transformStreamController]).then((function(){return!0===e._errored?Promise.reject(e._storedError):(!1===e._readableClosed&&O(e),Promise.resolve())})).catch((function(t){return M(e,t),Promise.reject(e._storedError)}))}}]),e}(),B=function(){function e(t,n){a(this,e),this._transformStream=t,this._startPromise=n}return r(e,[{key:"start",value:function(e){var t=this._transformStream;return t._readableController=e,this._startPromise.then((function(){return l(void 0!==t._backpressureChangePromise,"_backpressureChangePromise should have been initialized"),!0===t._backpressure?Promise.resolve():(l(!1===t._backpressure,"_backpressure should have been initialized"),t._backpressureChangePromise)}))}},{key:"pull",value:function(){var e=this._transformStream;return l(!0===e._backpressure,"pull() should be never called while _backpressure is false"),l(void 0!==e._backpressureChangePromise,"_backpressureChangePromise should have been initialized"),D(e,!1),e._backpressureChangePromise}},{key:"cancel",value:function(){var e=this._transformStream;e._readableClosed=!0,P(e,new TypeError("Readable side canceled"))}}]),e}(),z=function(){function e(t){if(a(this,e),!1===j(t))throw new TypeError("TransformStreamDefaultController can only be constructed with a TransformStream instance");if(void 0!==t._transformStreamController)throw new TypeError("TransformStreamDefaultController instances can only be created by the TransformStream constructor");this._controlledTransformStream=t}return r(e,[{key:"enqueue",value:function(e){if(!1===F(this))throw U("enqueue");R(this._controlledTransformStream,e)}},{key:"close",value:function(){if(!1===F(this))throw U("close");!function(e){if(!0===e._errored)throw new TypeError("TransformStream is already errored");if(!0===e._readableClosed)throw new TypeError("Readable side is already closed");O(e)}(this._controlledTransformStream)}},{key:"error",value:function(e){if(!1===F(this))throw U("error");!function TransformStreamError(e,t){if(!0===e._errored)throw new TypeError("TransformStream is already errored");P(e,t)}(this._controlledTransformStream,e)}},{key:"desiredSize",get:function(){if(!1===F(this))throw U("desiredSize");var e=this._controlledTransformStream._readableController;return x(e)}}]),e}(),H=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this._transformer=t;var n=t.readableStrategy,r=t.writableStrategy;this._transforming=!1,this._errored=!1,this._storedError=void 0,this._writableController=void 0,this._readableController=void 0,this._transformStreamController=void 0,this._writableDone=!1,this._readableClosed=!1,this._backpressure=void 0,this._backpressureChangePromise=void 0,this._backpressureChangePromise_resolve=void 0,this._transformStreamController=new z(this);var d=void 0,f=new Promise((function(e){d=e})),p=new B(this,f);this._readable=new _(p,n);var y=new N(this,f);this._writable=new A(y,r),l(void 0!==this._writableController),l(void 0!==this._readableController);var w=x(this._readableController);D(this,w<=0);var C=this,S=h(t,"start",[C._transformStreamController]);d(S),f.catch((function(e){!1===C._errored&&(C._errored=!0,C._storedError=e)}))}return r(e,[{key:"readable",get:function(){if(!1===j(this))throw W("readable");return this._readable}},{key:"writable",get:function(){if(!1===j(this))throw W("writable");return this._writable}}]),e}();function U(e){return new TypeError("TransformStreamDefaultController.prototype."+e+" can only be used on a TransformStreamDefaultController")}function W(e){return new TypeError("TransformStream.prototype."+e+" can only be used on a TransformStream")}e.exports={TransformStream:H}},function(e,t,n){e.exports=n(5)}]))},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=!1;try{if("function"==typeof URL&&"object"===r(URL.prototype)&&"origin"in URL.prototype){var l=new URL("b","http://a");l.pathname="c%20d",a="http://a/c%20d"===l.href}}catch(e){}if(a)t.URL=URL;else{var d=n(146).URL,h=n(3).URL;h&&(d.createObjectURL=function(e){return h.createObjectURL.apply(h,arguments)},d.revokeObjectURL=function(e){h.revokeObjectURL(e)}),t.URL=d}},function(e,t,n){"use strict";!function(){var e=Object.create(null);e.ftp=21,e.file=0,e.gopher=70,e.http=80,e.https=443,e.ws=80,e.wss=443;var n=Object.create(null);function r(t){return void 0!==e[t]}function a(){_.call(this),this._isInvalid=!0}function l(e){return""===e&&a.call(this),e.toLowerCase()}function d(e){var t=e.charCodeAt(0);return t>32&&t<127&&-1===[34,35,60,62,63,96].indexOf(t)?e:encodeURIComponent(e)}function h(e){var t=e.charCodeAt(0);return t>32&&t<127&&-1===[34,35,60,62,96].indexOf(t)?e:encodeURIComponent(e)}n["%2e"]=".",n[".%2e"]="..",n["%2e."]="..",n["%2e%2e"]="..";var f,p=/[a-zA-Z]/,y=/[a-zA-Z0-9\+\-\.]/;function w(t,w,_){function C(e){T.push(e)}var S=w||"scheme start",k=0,x="",E=!1,A=!1,T=[];e:for(;(t[k-1]!==f||0===k)&&!this._isInvalid;){var R=t[k];switch(S){case"scheme start":if(!R||!p.test(R)){if(w){C("Invalid scheme.");break e}x="",S="no scheme";continue}x+=R.toLowerCase(),S="scheme";break;case"scheme":if(R&&y.test(R))x+=R.toLowerCase();else{if(":"!==R){if(w){if(R===f)break e;C("Code point not allowed in scheme: "+R);break e}x="",k=0,S="no scheme";continue}if(this._scheme=x,x="",w)break e;r(this._scheme)&&(this._isRelative=!0),S="file"===this._scheme?"relative":this._isRelative&&_&&_._scheme===this._scheme?"relative or authority":this._isRelative?"authority first slash":"scheme data"}break;case"scheme data":"?"===R?(this._query="?",S="query"):"#"===R?(this._fragment="#",S="fragment"):R!==f&&"\t"!==R&&"\n"!==R&&"\r"!==R&&(this._schemeData+=d(R));break;case"no scheme":if(_&&r(_._scheme)){S="relative";continue}C("Missing scheme."),a.call(this);break;case"relative or authority":if("/"!==R||"/"!==t[k+1]){C("Expected /, got: "+R),S="relative";continue}S="authority ignore slashes";break;case"relative":if(this._isRelative=!0,"file"!==this._scheme&&(this._scheme=_._scheme),R===f){this._host=_._host,this._port=_._port,this._path=_._path.slice(),this._query=_._query,this._username=_._username,this._password=_._password;break e}if("/"===R||"\\"===R)"\\"===R&&C("\\ is an invalid code point."),S="relative slash";else if("?"===R)this._host=_._host,this._port=_._port,this._path=_._path.slice(),this._query="?",this._username=_._username,this._password=_._password,S="query";else{if("#"!==R){var O=t[k+1],M=t[k+2];("file"!==this._scheme||!p.test(R)||":"!==O&&"|"!==O||M!==f&&"/"!==M&&"\\"!==M&&"?"!==M&&"#"!==M)&&(this._host=_._host,this._port=_._port,this._username=_._username,this._password=_._password,this._path=_._path.slice(),this._path.pop()),S="relative path";continue}this._host=_._host,this._port=_._port,this._path=_._path.slice(),this._query=_._query,this._fragment="#",this._username=_._username,this._password=_._password,S="fragment"}break;case"relative slash":if("/"!==R&&"\\"!==R){"file"!==this._scheme&&(this._host=_._host,this._port=_._port,this._username=_._username,this._password=_._password),S="relative path";continue}"\\"===R&&C("\\ is an invalid code point."),S="file"===this._scheme?"file host":"authority ignore slashes";break;case"authority first slash":if("/"!==R){C("Expected '/', got: "+R),S="authority ignore slashes";continue}S="authority second slash";break;case"authority second slash":if(S="authority ignore slashes","/"!==R){C("Expected '/', got: "+R);continue}break;case"authority ignore slashes":if("/"!==R&&"\\"!==R){S="authority";continue}C("Expected authority, got: "+R);break;case"authority":if("@"===R){E&&(C("@ already seen."),x+="%40"),E=!0;for(var P=0;P<x.length;P++){var L=x[P];if("\t"!==L&&"\n"!==L&&"\r"!==L)if(":"!==L||null!==this._password){var D=d(L);null!==this._password?this._password+=D:this._username+=D}else this._password="";else C("Invalid whitespace in authority.")}x=""}else{if(R===f||"/"===R||"\\"===R||"?"===R||"#"===R){k-=x.length,x="",S="host";continue}x+=R}break;case"file host":if(R===f||"/"===R||"\\"===R||"?"===R||"#"===R){2!==x.length||!p.test(x[0])||":"!==x[1]&&"|"!==x[1]?(0===x.length||(this._host=l.call(this,x),x=""),S="relative path start"):S="relative path";continue}"\t"===R||"\n"===R||"\r"===R?C("Invalid whitespace in file host."):x+=R;break;case"host":case"hostname":if(":"!==R||A){if(R===f||"/"===R||"\\"===R||"?"===R||"#"===R){if(this._host=l.call(this,x),x="",S="relative path start",w)break e;continue}"\t"!==R&&"\n"!==R&&"\r"!==R?("["===R?A=!0:"]"===R&&(A=!1),x+=R):C("Invalid code point in host/hostname: "+R)}else if(this._host=l.call(this,x),x="",S="port","hostname"===w)break e;break;case"port":if(/[0-9]/.test(R))x+=R;else{if(R===f||"/"===R||"\\"===R||"?"===R||"#"===R||w){if(""!==x){var I=parseInt(x,10);I!==e[this._scheme]&&(this._port=I+""),x=""}if(w)break e;S="relative path start";continue}"\t"===R||"\n"===R||"\r"===R?C("Invalid code point in port: "+R):a.call(this)}break;case"relative path start":if("\\"===R&&C("'\\' not allowed in path."),S="relative path","/"!==R&&"\\"!==R)continue;break;case"relative path":var F;R!==f&&"/"!==R&&"\\"!==R&&(w||"?"!==R&&"#"!==R)?"\t"!==R&&"\n"!==R&&"\r"!==R&&(x+=d(R)):("\\"===R&&C("\\ not allowed in relative path."),(F=n[x.toLowerCase()])&&(x=F),".."===x?(this._path.pop(),"/"!==R&&"\\"!==R&&this._path.push("")):"."===x&&"/"!==R&&"\\"!==R?this._path.push(""):"."!==x&&("file"===this._scheme&&0===this._path.length&&2===x.length&&p.test(x[0])&&"|"===x[1]&&(x=x[0]+":"),this._path.push(x)),x="","?"===R?(this._query="?",S="query"):"#"===R&&(this._fragment="#",S="fragment"));break;case"query":w||"#"!==R?R!==f&&"\t"!==R&&"\n"!==R&&"\r"!==R&&(this._query+=h(R)):(this._fragment="#",S="fragment");break;case"fragment":R!==f&&"\t"!==R&&"\n"!==R&&"\r"!==R&&(this._fragment+=R)}k++}}function _(){this._scheme="",this._schemeData="",this._username="",this._password=null,this._host="",this._port="",this._path=[],this._query="",this._fragment="",this._isInvalid=!1,this._isRelative=!1}function C(e,t){void 0===t||t instanceof C||(t=new C(String(t))),this._url=e,_.call(this);var n=e.replace(/^[ \t\r\n\f]+|[ \t\r\n\f]+$/g,"");w.call(this,n,null,t)}C.prototype={toString:function(){return this.href},get href(){if(this._isInvalid)return this._url;var e="";return""===this._username&&null===this._password||(e=this._username+(null!==this._password?":"+this._password:"")+"@"),this.protocol+(this._isRelative?"//"+e+this.host:"")+this.pathname+this._query+this._fragment},set href(e){_.call(this),w.call(this,e)},get protocol(){return this._scheme+":"},set protocol(e){this._isInvalid||w.call(this,e+":","scheme start")},get host(){return this._isInvalid?"":this._port?this._host+":"+this._port:this._host},set host(e){!this._isInvalid&&this._isRelative&&w.call(this,e,"host")},get hostname(){return this._host},set hostname(e){!this._isInvalid&&this._isRelative&&w.call(this,e,"hostname")},get port(){return this._port},set port(e){!this._isInvalid&&this._isRelative&&w.call(this,e,"port")},get pathname(){return this._isInvalid?"":this._isRelative?"/"+this._path.join("/"):this._schemeData},set pathname(e){!this._isInvalid&&this._isRelative&&(this._path=[],w.call(this,e,"relative path start"))},get search(){return this._isInvalid||!this._query||"?"===this._query?"":this._query},set search(e){!this._isInvalid&&this._isRelative&&(this._query="?","?"===e[0]&&(e=e.slice(1)),w.call(this,e,"query"))},get hash(){return this._isInvalid||!this._fragment||"#"===this._fragment?"":this._fragment},set hash(e){this._isInvalid||(this._fragment="#","#"===e[0]&&(e=e.slice(1)),w.call(this,e,"fragment"))},get origin(){var e;if(this._isInvalid||!this._scheme)return"";switch(this._scheme){case"data":case"file":case"javascript":case"mailto":return"null";case"blob":try{return new C(this._schemeData).origin||"null"}catch(e){}return"null"}return(e=this.host)?this._scheme+"://"+e:""}},t.URL=C}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDocument=function(e){var t,n=new H;if("string"==typeof e)t={url:e};else if((0,l.isArrayBuffer)(e))t={data:e};else if(e instanceof U)t={range:e};else{if("object"!==P(e))throw new Error("Invalid parameter in getDocument, need either Uint8Array, string or a parameter object");if(!e.url&&!e.data&&!e.range)throw new Error("Invalid parameter object: need either .data, .range or .url");t=e}var r=Object.create(null),a=null,h=null;for(var p in t)if("url"!==p||"undefined"==typeof window)if("range"!==p)if("worker"!==p)if("data"!==p||t[p]instanceof Uint8Array)r[p]=t[p];else{var y=t[p];if("string"==typeof y)r[p]=(0,l.stringToBytes)(y);else if("object"!==P(y)||null===y||isNaN(y.length)){if(!(0,l.isArrayBuffer)(y))throw new Error("Invalid PDF binary data: either typed array, string or array-like object is expected in the data property.");r[p]=new Uint8Array(y)}else r[p]=new Uint8Array(y)}else h=t[p];else a=t[p];else r[p]=new l.URL(t[p],window.location).href;r.rangeChunkSize=r.rangeChunkSize||65536,r.CMapReaderFactory=r.CMapReaderFactory||d.DOMCMapReaderFactory,r.ignoreErrors=!0!==r.stopAtErrors,r.pdfBug=!0===r.pdfBug;var C=Object.values(l.NativeImageDecoding);if(void 0!==r.nativeImageDecoderSupport&&C.includes(r.nativeImageDecoderSupport)||(r.nativeImageDecoderSupport=f.apiCompatibilityParams.nativeImageDecoderSupport||l.NativeImageDecoding.DECODE),Number.isInteger(r.maxImageSize)||(r.maxImageSize=-1),"boolean"!=typeof r.isEvalSupported&&(r.isEvalSupported=!0),"boolean"!=typeof r.disableFontFace&&(r.disableFontFace=f.apiCompatibilityParams.disableFontFace||!1),"boolean"!=typeof r.disableRange&&(r.disableRange=!1),"boolean"!=typeof r.disableStream&&(r.disableStream=!1),"boolean"!=typeof r.disableAutoFetch&&(r.disableAutoFetch=!1),"boolean"!=typeof r.disableCreateObjectURL&&(r.disableCreateObjectURL=f.apiCompatibilityParams.disableCreateObjectURL||!1),(0,l.setVerbosityLevel)(r.verbosity),!h){var k={postMessageTransfers:r.postMessageTransfers,verbosity:r.verbosity,port:w.GlobalWorkerOptions.workerPort};h=k.port?G.fromPort(k):new G(k),n._worker=h}var x=n.docId;return h.promise.then((function(){if(n.destroyed)throw new Error("Loading aborted");return function(e,t,n,r){return e.destroyed?Promise.reject(new Error("Worker was destroyed")):(n&&(t.length=n.length,t.initialData=n.initialData,t.progressiveDone=n.progressiveDone),e.messageHandler.sendWithPromise("GetDocRequest",{docId:r,apiVersion:"2.2.228",source:{data:t.data,url:t.url,password:t.password,disableAutoFetch:t.disableAutoFetch,rangeChunkSize:t.rangeChunkSize,length:t.length},maxImageSize:t.maxImageSize,disableFontFace:t.disableFontFace,disableCreateObjectURL:t.disableCreateObjectURL,postMessageTransfers:e.postMessageTransfers,docBaseUrl:t.docBaseUrl,nativeImageDecoderSupport:t.nativeImageDecoderSupport,ignoreErrors:t.ignoreErrors,isEvalSupported:t.isEvalSupported}).then((function(t){if(e.destroyed)throw new Error("Worker was destroyed");return t})))}(h,r,a,x).then((function(e){if(n.destroyed)throw new Error("Loading aborted");var t;a?t=new S.PDFDataTransportStream({length:r.length,initialData:r.initialData,progressiveDone:r.progressiveDone,disableRange:r.disableRange,disableStream:r.disableStream},a):r.data||(t=j({url:r.url,length:r.length,httpHeaders:r.httpHeaders,withCredentials:r.withCredentials,rangeChunkSize:r.rangeChunkSize,disableRange:r.disableRange,disableStream:r.disableStream}));var l=new _.MessageHandler(x,e,h.port);l.postMessageTransfers=h.postMessageTransfers;var d=new Y(l,n,t,r);n._transport=d,l.send("Ready",null)}))})).catch(n._capability.reject),n},t.setPDFNetworkStreamFactory=function(e){j=e},t.build=t.version=t.PDFPageProxy=t.PDFDocumentProxy=t.PDFWorker=t.PDFDataRangeTransport=t.LoopbackPort=void 0;var a=x(r(148)),l=r(1),d=r(151),h=r(152),f=r(153),p=r(154),y=x(r(3)),w=r(156),_=r(157),C=r(158),S=r(160),k=r(161);function x(e){return e&&e.__esModule?e:{default:e}}function E(e,t,n,r,a,l,d){try{var h=e[l](d),f=h.value}catch(e){return void n(e)}h.done?t(f):Promise.resolve(f).then(r,a)}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,l=void 0;try{for(var d,h=e[Symbol.iterator]();!(r=(d=h.next()).done)&&(n.push(d.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==h.return||h.return()}finally{if(a)throw l}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function T(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function R(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function M(e,t,n){return t&&O(e.prototype,t),n&&O(e,n),e}function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var L,D,I=!1,F=!1;"undefined"==typeof window?(I=!0,F=!0):F=!0,"undefined"!=typeof requirejs&&requirejs.toUrl&&(L=requirejs.toUrl("pdfjs-dist/build/pdf.worker.js"));var j,N="undefined"!=typeof requirejs&&requirejs.load;if(D=F?function(){return new Promise((function(e,t){Promise.resolve().then(function(){try{var r;r=n(411),e(r.WorkerMessageHandler)}catch(e){t(e)}}.bind(null,n)).catch(t)}))}:N?function(){return new Promise((function(e,t){requirejs(["pdfjs-dist/build/pdf.worker"],(function(n){try{e(n.WorkerMessageHandler)}catch(e){t(e)}}),t)}))}:null,!L&&"object"===("undefined"==typeof document?"undefined":P(document))&&"currentScript"in document){var B=document.currentScript&&document.currentScript.src;B&&(L=B.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}var z,H=(z=0,function(){function e(){R(this,e),this._capability=(0,l.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId="d"+z++,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}return M(e,[{key:"destroy",value:function(){var e=this;return this.destroyed=!0,(this._transport?this._transport.destroy():Promise.resolve()).then((function(){e._transport=null,e._worker&&(e._worker.destroy(),e._worker=null)}))}},{key:"then",value:function(e,t){return(0,d.deprecated)("PDFDocumentLoadingTask.then method, use the `promise` getter instead."),this.promise.then.apply(this.promise,arguments)}},{key:"promise",get:function(){return this._capability.promise}}]),e}()),U=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];R(this,e),this.length=t,this.initialData=n,this.progressiveDone=r,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,l.createPromiseCapability)()}return M(e,[{key:"addRangeListener",value:function(e){this._rangeListeners.push(e)}},{key:"addProgressListener",value:function(e){this._progressListeners.push(e)}},{key:"addProgressiveReadListener",value:function(e){this._progressiveReadListeners.push(e)}},{key:"addProgressiveDoneListener",value:function(e){this._progressiveDoneListeners.push(e)}},{key:"onDataRange",value:function(e,t){var n=!0,r=!1,a=void 0;try{for(var l,d=this._rangeListeners[Symbol.iterator]();!(n=(l=d.next()).done);n=!0)(0,l.value)(e,t)}catch(e){r=!0,a=e}finally{try{n||null==d.return||d.return()}finally{if(r)throw a}}}},{key:"onDataProgress",value:function(e,t){var n=this;this._readyCapability.promise.then((function(){var r=!0,a=!1,l=void 0;try{for(var d,h=n._progressListeners[Symbol.iterator]();!(r=(d=h.next()).done);r=!0)(0,d.value)(e,t)}catch(e){a=!0,l=e}finally{try{r||null==h.return||h.return()}finally{if(a)throw l}}}))}},{key:"onDataProgressiveRead",value:function(e){var t=this;this._readyCapability.promise.then((function(){var n=!0,r=!1,a=void 0;try{for(var l,d=t._progressiveReadListeners[Symbol.iterator]();!(n=(l=d.next()).done);n=!0)(0,l.value)(e)}catch(e){r=!0,a=e}finally{try{n||null==d.return||d.return()}finally{if(r)throw a}}}))}},{key:"onDataProgressiveDone",value:function(){var e=this;this._readyCapability.promise.then((function(){var t=!0,n=!1,r=void 0;try{for(var a,l=e._progressiveDoneListeners[Symbol.iterator]();!(t=(a=l.next()).done);t=!0)(0,a.value)()}catch(e){n=!0,r=e}finally{try{t||null==l.return||l.return()}finally{if(n)throw r}}}))}},{key:"transportReady",value:function(){this._readyCapability.resolve()}},{key:"requestDataRange",value:function(e,t){(0,l.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}},{key:"abort",value:function(){}}]),e}();t.PDFDataRangeTransport=U;var W=function(){function e(t,n){R(this,e),this._pdfInfo=t,this._transport=n}return M(e,[{key:"getPage",value:function(e){return this._transport.getPage(e)}},{key:"getPageIndex",value:function(e){return this._transport.getPageIndex(e)}},{key:"getDestinations",value:function(){return this._transport.getDestinations()}},{key:"getDestination",value:function(e){return this._transport.getDestination(e)}},{key:"getPageLabels",value:function(){return this._transport.getPageLabels()}},{key:"getPageLayout",value:function(){return this._transport.getPageLayout()}},{key:"getPageMode",value:function(){return this._transport.getPageMode()}},{key:"getViewerPreferences",value:function(){return this._transport.getViewerPreferences()}},{key:"getOpenActionDestination",value:function(){return this._transport.getOpenActionDestination()}},{key:"getAttachments",value:function(){return this._transport.getAttachments()}},{key:"getJavaScript",value:function(){return this._transport.getJavaScript()}},{key:"getOutline",value:function(){return this._transport.getOutline()}},{key:"getPermissions",value:function(){return this._transport.getPermissions()}},{key:"getMetadata",value:function(){return this._transport.getMetadata()}},{key:"getData",value:function(){return this._transport.getData()}},{key:"getDownloadInfo",value:function(){return this._transport.downloadInfoCapability.promise}},{key:"getStats",value:function(){return this._transport.getStats()}},{key:"cleanup",value:function(){this._transport.startCleanup()}},{key:"destroy",value:function(){return this.loadingTask.destroy()}},{key:"numPages",get:function(){return this._pdfInfo.numPages}},{key:"fingerprint",get:function(){return this._pdfInfo.fingerprint}},{key:"loadingParams",get:function(){return this._transport.loadingParams}},{key:"loadingTask",get:function(){return this._transport.loadingTask}}]),e}();t.PDFDocumentProxy=W;var V=function(){function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];R(this,e),this.pageIndex=t,this._pageInfo=n,this._transport=r,this._stats=a?new d.StatTimer:d.DummyStatTimer,this._pdfBug=a,this.commonObjs=r.commonObjs,this.objs=new X,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this.intentStates=Object.create(null),this.destroyed=!1}return M(e,[{key:"getViewport",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.scale,n=e.rotation,r=void 0===n?this.rotate:n,a=e.dontFlip,l=void 0!==a&&a;return(arguments.length>1||"number"==typeof arguments[0])&&((0,d.deprecated)("getViewport is called with obsolete arguments."),t=arguments[0],r="number"==typeof arguments[1]?arguments[1]:this.rotate,l="boolean"==typeof arguments[2]&&arguments[2]),new d.PageViewport({viewBox:this.view,scale:t,rotation:r,dontFlip:l})}},{key:"getAnnotations",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.intent,n=void 0===t?null:t;return this.annotationsPromise&&this.annotationsIntent===n||(this.annotationsPromise=this._transport.getAnnotations(this.pageIndex,n),this.annotationsIntent=n),this.annotationsPromise}},{key:"render",value:function(e){var t=this,n=e.canvasContext,r=e.viewport,a=e.intent,h=void 0===a?"display":a,f=e.enableWebGL,p=void 0!==f&&f,y=e.renderInteractiveForms,w=void 0!==y&&y,_=e.transform,C=void 0===_?null:_,S=e.imageLayer,x=void 0===S?null:S,E=e.canvasFactory,A=void 0===E?null:E,T=e.background,R=void 0===T?null:T,O=this._stats;O.time("Overall"),this.pendingCleanup=!1;var M="print"===h?"print":"display",P=A||new d.DOMCanvasFactory,L=new k.WebGLContext({enable:p});this.intentStates[M]||(this.intentStates[M]=Object.create(null));var D=this.intentStates[M];D.displayReadyCapability||(D.receivingOperatorList=!0,D.displayReadyCapability=(0,l.createPromiseCapability)(),D.operatorList={fnArray:[],argsArray:[],lastChunk:!1},O.time("Page Request"),this._transport.messageHandler.send("RenderPageRequest",{pageIndex:this.pageNumber-1,intent:M,renderInteractiveForms:!0===w}));var I=function(e){var n=D.renderTasks.indexOf(F);n>=0&&D.renderTasks.splice(n,1),(t.cleanupAfterRender||"print"===M)&&(t.pendingCleanup=!0),t._tryCleanup(),e?F.capability.reject(e):F.capability.resolve(),O.timeEnd("Rendering"),O.timeEnd("Overall")},F=new Q({callback:I,params:{canvasContext:n,viewport:r,transform:C,imageLayer:x,background:R},objs:this.objs,commonObjs:this.commonObjs,operatorList:D.operatorList,pageNumber:this.pageNumber,canvasFactory:P,webGLContext:L,useRequestAnimationFrame:"print"!==M,pdfBug:this._pdfBug});D.renderTasks||(D.renderTasks=[]),D.renderTasks.push(F);var j=F.task;return D.displayReadyCapability.promise.then((function(e){t.pendingCleanup?I():(O.time("Rendering"),F.initializeGraphics(e),F.operatorListChanged())})).catch(I),j}},{key:"getOperatorList",value:function(){this.intentStates.oplist||(this.intentStates.oplist=Object.create(null));var e,t=this.intentStates.oplist;return t.opListReadCapability||((e={}).operatorListChanged=function(){if(t.operatorList.lastChunk){t.opListReadCapability.resolve(t.operatorList);var n=t.renderTasks.indexOf(e);n>=0&&t.renderTasks.splice(n,1)}},t.receivingOperatorList=!0,t.opListReadCapability=(0,l.createPromiseCapability)(),t.renderTasks=[],t.renderTasks.push(e),t.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats.time("Page Request"),this._transport.messageHandler.send("RenderPageRequest",{pageIndex:this.pageIndex,intent:"oplist"})),t.opListReadCapability.promise}},{key:"streamTextContent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.normalizeWhitespace,n=void 0!==t&&t,r=e.disableCombineTextItems,a=void 0!==r&&r,l=100;return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this.pageNumber-1,normalizeWhitespace:!0===n,combineTextItems:!0!==a},{highWaterMark:l,size:function(e){return e.items.length}})}},{key:"getTextContent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.streamTextContent(e);return new Promise((function(e,n){var r=t.getReader(),a={items:[],styles:Object.create(null)};!function t(){r.read().then((function(n){var r,l=n.value;n.done?e(a):(Object.assign(a.styles,l.styles),(r=a.items).push.apply(r,T(l.items)),t())}),n)}()}))}},{key:"_destroy",value:function(){this.destroyed=!0,this._transport.pageCache[this.pageIndex]=null;var e=[];return Object.keys(this.intentStates).forEach((function(t){"oplist"!==t&&this.intentStates[t].renderTasks.forEach((function(t){var n=t.capability.promise.catch((function(){}));e.push(n),t.cancel()}))}),this),this.objs.clear(),this.annotationsPromise=null,this.pendingCleanup=!1,Promise.all(e)}},{key:"cleanup",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.pendingCleanup=!0,this._tryCleanup(e)}},{key:"_tryCleanup",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.pendingCleanup&&!Object.keys(this.intentStates).some((function(e){var t=this.intentStates[e];return 0!==t.renderTasks.length||t.receivingOperatorList}),this)&&(Object.keys(this.intentStates).forEach((function(e){delete this.intentStates[e]}),this),this.objs.clear(),this.annotationsPromise=null,e&&this._stats instanceof d.StatTimer&&(this._stats=new d.StatTimer),this.pendingCleanup=!1)}},{key:"_startRenderPage",value:function(e,t){var n=this.intentStates[t];n.displayReadyCapability&&n.displayReadyCapability.resolve(e)}},{key:"_renderPageChunk",value:function(e,t){for(var n=this.intentStates[t],r=0,a=e.length;r<a;r++)n.operatorList.fnArray.push(e.fnArray[r]),n.operatorList.argsArray.push(e.argsArray[r]);n.operatorList.lastChunk=e.lastChunk;for(var l=0;l<n.renderTasks.length;l++)n.renderTasks[l].operatorListChanged();e.lastChunk&&(n.receivingOperatorList=!1,this._tryCleanup())}},{key:"pageNumber",get:function(){return this.pageIndex+1}},{key:"rotate",get:function(){return this._pageInfo.rotate}},{key:"ref",get:function(){return this._pageInfo.ref}},{key:"userUnit",get:function(){return this._pageInfo.userUnit}},{key:"view",get:function(){return this._pageInfo.view}},{key:"stats",get:function(){return this._stats instanceof d.StatTimer?this._stats:null}}]),e}();t.PDFPageProxy=V;var q=function(){function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];R(this,e),this._listeners=[],this._defer=t,this._deferred=Promise.resolve(void 0)}return M(e,[{key:"postMessage",value:function(e,t){var n=this;if(this._defer){var r=new WeakMap,a={data:function e(n){if("object"!==P(n)||null===n)return n;if(r.has(n))return r.get(n);var a,d;if((a=n.buffer)&&(0,l.isArrayBuffer)(a)){var h=t&&t.includes(a);return d=n===a?n:h?new n.constructor(a,n.byteOffset,n.byteLength):new n.constructor(n),r.set(n,d),d}for(var f in d=Array.isArray(n)?[]:{},r.set(n,d),n){for(var p=void 0,y=n;!(p=Object.getOwnPropertyDescriptor(y,f));)y=Object.getPrototypeOf(y);void 0!==p.value&&"function"!=typeof p.value&&(d[f]=e(p.value))}return d}(e)};this._deferred.then((function(){n._listeners.forEach((function(e){e.call(this,a)}),n)}))}else this._listeners.forEach((function(t){t.call(this,{data:e})}),this)}},{key:"addEventListener",value:function(e,t){this._listeners.push(t)}},{key:"removeEventListener",value:function(e,t){var n=this._listeners.indexOf(t);this._listeners.splice(n,1)}},{key:"terminate",value:function(){this._listeners.length=0}}]),e}();t.LoopbackPort=q;var G=function(){var e,t=new WeakMap,n=0;function r(){if(w.GlobalWorkerOptions.workerSrc)return w.GlobalWorkerOptions.workerSrc;if(void 0!==L)return L;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}function a(){try{if("undefined"!=typeof window)return window.pdfjsWorker&&window.pdfjsWorker.WorkerMessageHandler}catch(e){}return null}return function(){function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.name,r=void 0===n?null:n,a=e.port,d=void 0===a?null:a,f=e.postMessageTransfers,p=void 0===f||f,y=e.verbosity,w=void 0===y?(0,l.getVerbosityLevel)():y;if(R(this,h),d&&t.has(d))throw new Error("Cannot use more than one PDFWorker per port");if(this.name=r,this.destroyed=!1,this.postMessageTransfers=!1!==p,this.verbosity=w,this._readyCapability=(0,l.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,d)return t.set(d,this),void this._initializeFromPort(d);this._initialize()}return M(h,[{key:"_initializeFromPort",value:function(e){this._port=e,this._messageHandler=new _.MessageHandler("main","worker",e),this._messageHandler.on("ready",(function(){})),this._readyCapability.resolve()}},{key:"_initialize",value:function(){var e,t,n=this;if("undefined"!=typeof Worker&&!I&&!a()){var d=r();try{(0,l.isSameOrigin)(window.location.href,d)||(e=new l.URL(d,window.location).href,t="importScripts('"+e+"');",d=l.URL.createObjectURL(new Blob([t])));var h=new Worker(d),f=new _.MessageHandler("main","worker",h),p=function(){h.removeEventListener("error",y),f.destroy(),h.terminate(),n.destroyed?n._readyCapability.reject(new Error("Worker was destroyed")):n._setupFakeWorker()},y=function onWorkerError(){n._webWorker||p()};h.addEventListener("error",y),f.on("test",(function(e){h.removeEventListener("error",y),n.destroyed?p():e&&e.supportTypedArray?(n._messageHandler=f,n._port=h,n._webWorker=h,e.supportTransfers||(n.postMessageTransfers=!1),n._readyCapability.resolve(),f.send("configure",{verbosity:n.verbosity})):(n._setupFakeWorker(),f.destroy(),h.terminate())})),f.on("ready",(function(e){if(h.removeEventListener("error",y),n.destroyed)p();else try{w()}catch(e){n._setupFakeWorker()}}));var w=function(){var e=new Uint8Array([n.postMessageTransfers?255:0]);try{f.send("test",e,[e.buffer])}catch(t){(0,l.info)("Cannot use postMessage transfers"),e[0]=0,f.send("test",e)}};return void w()}catch(e){(0,l.info)("The worker has been disabled.")}}this._setupFakeWorker()}},{key:"_setupFakeWorker",value:function(){var t=this;I||((0,l.warn)("Setting up fake worker."),I=!0),function(){if(e)return e.promise;e=(0,l.createPromiseCapability)();var t=a();return t?(e.resolve(t),e.promise):((D||function(){return(0,d.loadScript)(r()).then((function(){return window.pdfjsWorker.WorkerMessageHandler}))})().then(e.resolve,e.reject),e.promise)}().then((function(e){if(t.destroyed)t._readyCapability.reject(new Error("Worker was destroyed"));else{var r=new q;t._port=r;var a="fake"+n++,l=new _.MessageHandler(a+"_worker",a,r);e.setup(l,r);var d=new _.MessageHandler(a,a+"_worker",r);t._messageHandler=d,t._readyCapability.resolve()}})).catch((function(e){t._readyCapability.reject(new Error('Setting up fake worker failed: "'.concat(e.message,'".')))}))}},{key:"destroy",value:function(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),t.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}},{key:"promise",get:function(){return this._readyCapability.promise}},{key:"port",get:function(){return this._port}},{key:"messageHandler",get:function(){return this._messageHandler}}],[{key:"fromPort",value:function(e){if(!e||!e.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return t.has(e.port)?t.get(e.port):new h(e)}},{key:"getWorkerSrc",value:function(){return r()}}]),h}()}();t.PDFWorker=G;var K,Y=function(){function e(t,n,r,a){R(this,e),this.messageHandler=t,this.loadingTask=n,this.commonObjs=new X,this.fontLoader=new h.FontLoader({docId:n.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this)}),this._params=a,this.CMapReaderFactory=new a.CMapReaderFactory({baseUrl:a.cMapUrl,isCompressed:a.cMapPacked}),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.pageCache=[],this.pagePromises=[],this.downloadInfoCapability=(0,l.createPromiseCapability)(),this.setupMessageHandler()}return M(e,[{key:"destroy",value:function(){var e=this;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,l.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));var t=[];this.pageCache.forEach((function(e){e&&t.push(e._destroy())})),this.pageCache.length=0,this.pagePromises.length=0;var n=this.messageHandler.sendWithPromise("Terminate",null);return t.push(n),Promise.all(t).then((function(){e.fontLoader.clear(),e._networkStream&&e._networkStream.cancelAllRequests(),e.messageHandler&&(e.messageHandler.destroy(),e.messageHandler=null),e.destroyCapability.resolve()}),this.destroyCapability.reject),this.destroyCapability.promise}},{key:"setupMessageHandler",value:function(){var e=this.messageHandler,t=this.loadingTask;e.on("GetReader",(function(e,t){var n=this;(0,l.assert)(this._networkStream),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=function(e){n._lastProgress={loaded:e.loaded,total:e.total}},t.onPull=function(){n._fullReader.read().then((function(e){var n=e.value;e.done?t.close():((0,l.assert)((0,l.isArrayBuffer)(n)),t.enqueue(new Uint8Array(n),1,[n]))})).catch((function(e){t.error(e)}))},t.onCancel=function(e){n._fullReader.cancel(e)}}),this),e.on("ReaderHeadersReady",(function(e){var n=this,r=(0,l.createPromiseCapability)(),a=this._fullReader;return a.headersReady.then((function(){a.isStreamingSupported&&a.isRangeSupported||(n._lastProgress&&t.onProgress&&t.onProgress(n._lastProgress),a.onProgress=function(e){t.onProgress&&t.onProgress({loaded:e.loaded,total:e.total})}),r.resolve({isStreamingSupported:a.isStreamingSupported,isRangeSupported:a.isRangeSupported,contentLength:a.contentLength})}),r.reject),r.promise}),this),e.on("GetRangeReader",(function(e,t){(0,l.assert)(this._networkStream);var n=this._networkStream.getRangeReader(e.begin,e.end);n?(t.onPull=function(){n.read().then((function(e){var n=e.value;e.done?t.close():((0,l.assert)((0,l.isArrayBuffer)(n)),t.enqueue(new Uint8Array(n),1,[n]))})).catch((function(e){t.error(e)}))},t.onCancel=function(e){n.cancel(e)}):t.close()}),this),e.on("GetDoc",(function(e){var n=e.pdfInfo;this._numPages=n.numPages,t._capability.resolve(new W(n,this))}),this),e.on("PasswordRequest",(function(e){var n=this;if(this._passwordCapability=(0,l.createPromiseCapability)(),t.onPassword)try{t.onPassword((function(e){n._passwordCapability.resolve({password:e})}),e.code)}catch(e){this._passwordCapability.reject(e)}else this._passwordCapability.reject(new l.PasswordException(e.message,e.code));return this._passwordCapability.promise}),this),e.on("PasswordException",(function(e){t._capability.reject(new l.PasswordException(e.message,e.code))}),this),e.on("InvalidPDF",(function(e){t._capability.reject(new l.InvalidPDFException(e.message))}),this),e.on("MissingPDF",(function(e){t._capability.reject(new l.MissingPDFException(e.message))}),this),e.on("UnexpectedResponse",(function(e){t._capability.reject(new l.UnexpectedResponseException(e.message,e.status))}),this),e.on("UnknownError",(function(e){t._capability.reject(new l.UnknownErrorException(e.message,e.details))}),this),e.on("DataLoaded",(function(e){t.onProgress&&t.onProgress({loaded:e.length,total:e.length}),this.downloadInfoCapability.resolve(e)}),this),e.on("StartRenderPage",(function(e){if(!this.destroyed){var t=this.pageCache[e.pageIndex];t._stats.timeEnd("Page Request"),t._startRenderPage(e.transparency,e.intent)}}),this),e.on("RenderPageChunk",(function(e){this.destroyed||this.pageCache[e.pageIndex]._renderPageChunk(e.operatorList,e.intent)}),this),e.on("commonobj",(function(t){var n=this;if(!this.destroyed){var r=A(t,3),a=r[0],d=r[1],f=r[2];if(!this.commonObjs.has(a))switch(d){case"Font":var p=this._params;if("error"in f){var w=f.error;(0,l.warn)("Error during font loading: ".concat(w)),this.commonObjs.resolve(a,w);break}var _=null;p.pdfBug&&y.default.FontInspector&&y.default.FontInspector.enabled&&(_={registerFont:function(e,t){y.default.FontInspector.fontAdded(e,t)}});var C=new h.FontFaceObject(f,{isEvalSupported:p.isEvalSupported,disableFontFace:p.disableFontFace,ignoreErrors:p.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:_});this.fontLoader.bind(C).then((function(){n.commonObjs.resolve(a,C)}),(function(t){e.sendWithPromise("FontFallback",{id:a}).finally((function(){n.commonObjs.resolve(a,C)}))}));break;case"FontPath":case"FontType3Res":this.commonObjs.resolve(a,f);break;default:throw new Error("Got unknown common object type ".concat(d))}}}),this),e.on("obj",(function(e){if(!this.destroyed){var t=A(e,4),n=t[0],r=t[1],a=t[2],l=t[3],h=this.pageCache[r];if(!h.objs.has(n))switch(a){case"JpegStream":return new Promise((function(e,t){var n=new Image;n.onload=function(){e(n)},n.onerror=function(){t(new Error("Error during JPEG image loading")),(0,d.releaseImageResources)(n)},n.src=l})).then((function(e){h.objs.resolve(n,e)}));case"Image":h.objs.resolve(n,l),l&&"data"in l&&l.data.length>8e6&&(h.cleanupAfterRender=!0);break;default:throw new Error("Got unknown object type ".concat(a))}}}),this),e.on("DocProgress",(function(e){this.destroyed||t.onProgress&&t.onProgress({loaded:e.loaded,total:e.total})}),this),e.on("PageError",(function(e){if(!this.destroyed){var t=this.pageCache[e.pageIndex].intentStates[e.intent];if(!t.displayReadyCapability)throw new Error(e.error);if(t.displayReadyCapability.reject(new Error(e.error)),t.operatorList){t.operatorList.lastChunk=!0;for(var n=0;n<t.renderTasks.length;n++)t.renderTasks[n].operatorListChanged()}}}),this),e.on("UnsupportedFeature",this._onUnsupportedFeature,this),e.on("JpegDecode",(function(e){if(this.destroyed)return Promise.reject(new Error("Worker was destroyed"));if("undefined"==typeof document)return Promise.reject(new Error('"document" is not defined.'));var t=A(e,2),n=t[0],r=t[1];return 3!==r&&1!==r?Promise.reject(new Error("Only 3 components or 1 component can be returned")):new Promise((function(e,t){var a=new Image;a.onload=function(){var t=a.width,n=a.height,l=t*n,h=4*l,f=new Uint8ClampedArray(l*r),p=document.createElement("canvas");p.width=t,p.height=n;var y=p.getContext("2d");y.drawImage(a,0,0);var w=y.getImageData(0,0,t,n).data;if(3===r)for(var _=0,C=0;_<h;_+=4,C+=3)f[C]=w[_],f[C+1]=w[_+1],f[C+2]=w[_+2];else if(1===r)for(var S=0,k=0;S<h;S+=4,k++)f[k]=w[S];e({data:f,width:t,height:n}),(0,d.releaseImageResources)(a),p.width=0,p.height=0,p=null,y=null},a.onerror=function(){t(new Error("JpegDecode failed to load image")),(0,d.releaseImageResources)(a)},a.src=n}))}),this),e.on("FetchBuiltInCMap",(function(e){return this.destroyed?Promise.reject(new Error("Worker was destroyed")):this.CMapReaderFactory.fetch({name:e.name})}),this)}},{key:"_onUnsupportedFeature",value:function(e){var t=e.featureId;this.destroyed||this.loadingTask.onUnsupportedFeature&&this.loadingTask.onUnsupportedFeature(t)}},{key:"getData",value:function(){return this.messageHandler.sendWithPromise("GetData",null)}},{key:"getPage",value:function(e){var t=this;if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request"));var n=e-1;if(n in this.pagePromises)return this.pagePromises[n];var r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:n}).then((function(e){if(t.destroyed)throw new Error("Transport destroyed");var r=new V(n,e,t,t._params.pdfBug);return t.pageCache[n]=r,r}));return this.pagePromises[n]=r,r}},{key:"getPageIndex",value:function(e){return this.messageHandler.sendWithPromise("GetPageIndex",{ref:e}).catch((function(e){return Promise.reject(new Error(e))}))}},{key:"getAnnotations",value:function(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}},{key:"getDestinations",value:function(){return this.messageHandler.sendWithPromise("GetDestinations",null)}},{key:"getDestination",value:function(e){return"string"!=typeof e?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}},{key:"getPageLabels",value:function(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}},{key:"getPageLayout",value:function(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}},{key:"getPageMode",value:function(){return this.messageHandler.sendWithPromise("GetPageMode",null)}},{key:"getViewerPreferences",value:function(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}},{key:"getOpenActionDestination",value:function(){return this.messageHandler.sendWithPromise("GetOpenActionDestination",null)}},{key:"getAttachments",value:function(){return this.messageHandler.sendWithPromise("GetAttachments",null)}},{key:"getJavaScript",value:function(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}},{key:"getOutline",value:function(){return this.messageHandler.sendWithPromise("GetOutline",null)}},{key:"getPermissions",value:function(){return this.messageHandler.sendWithPromise("GetPermissions",null)}},{key:"getMetadata",value:function(){var e=this;return this.messageHandler.sendWithPromise("GetMetadata",null).then((function(t){return{info:t[0],metadata:t[1]?new C.Metadata(t[1]):null,contentDispositionFilename:e._fullReader?e._fullReader.filename:null}}))}},{key:"getStats",value:function(){return this.messageHandler.sendWithPromise("GetStats",null)}},{key:"startCleanup",value:function(){var e=this;this.messageHandler.sendWithPromise("Cleanup",null).then((function(){for(var t=0,n=e.pageCache.length;t<n;t++){var r=e.pageCache[t];r&&r.cleanup()}e.commonObjs.clear(),e.fontLoader.clear()}))}},{key:"loadingParams",get:function(){var e=this._params;return(0,l.shadow)(this,"loadingParams",{disableAutoFetch:e.disableAutoFetch,disableCreateObjectURL:e.disableCreateObjectURL,disableFontFace:e.disableFontFace,nativeImageDecoderSupport:e.nativeImageDecoderSupport})}}]),e}(),X=function(){function e(){R(this,e),this._objs=Object.create(null)}return M(e,[{key:"_ensureObj",value:function(e){return this._objs[e]?this._objs[e]:this._objs[e]={capability:(0,l.createPromiseCapability)(),data:null,resolved:!1}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t)return this._ensureObj(e).capability.promise.then(t),null;var n=this._objs[e];if(!n||!n.resolved)throw new Error("Requesting object that isn't resolved yet ".concat(e,"."));return n.data}},{key:"has",value:function(e){var t=this._objs[e];return!!t&&t.resolved}},{key:"resolve",value:function(e,t){var n=this._ensureObj(e);n.resolved=!0,n.data=t,n.capability.resolve(t)}},{key:"clear",value:function(){for(var e in this._objs){var t=this._objs[e].data;"undefined"!=typeof Image&&t instanceof Image&&(0,d.releaseImageResources)(t)}this._objs=Object.create(null)}}]),e}(),J=function(){function e(t){R(this,e),this._internalRenderTask=t,this.onContinue=null}return M(e,[{key:"cancel",value:function(){this._internalRenderTask.cancel()}},{key:"then",value:function(e,t){return(0,d.deprecated)("RenderTask.then method, use the `promise` getter instead."),this.promise.then.apply(this.promise,arguments)}},{key:"promise",get:function(){return this._internalRenderTask.capability.promise}}]),e}(),Q=(K=new WeakSet,function(){function e(t){var n=t.callback,r=t.params,a=t.objs,d=t.commonObjs,h=t.operatorList,f=t.pageNumber,p=t.canvasFactory,y=t.webGLContext,w=t.useRequestAnimationFrame,_=void 0!==w&&w,C=t.pdfBug,S=void 0!==C&&C;R(this,e),this.callback=n,this.params=r,this.objs=a,this.commonObjs=d,this.operatorListIdx=null,this.operatorList=h,this.pageNumber=f,this.canvasFactory=p,this.webGLContext=y,this._pdfBug=S,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===_&&"undefined"!=typeof window,this.cancelled=!1,this.capability=(0,l.createPromiseCapability)(),this.task=new J(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=r.canvasContext.canvas}var t,n;return M(e,[{key:"initializeGraphics",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.cancelled){if(this._canvas){if(K.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");K.add(this._canvas)}this._pdfBug&&y.default.StepperManager&&y.default.StepperManager.enabled&&(this.stepper=y.default.StepperManager.create(this.pageNumber-1),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());var t=this.params,n=t.canvasContext,r=t.viewport,a=t.transform,l=t.imageLayer,d=t.background;this.gfx=new p.CanvasGraphics(n,this.commonObjs,this.objs,this.canvasFactory,this.webGLContext,l),this.gfx.beginDrawing({transform:a,viewport:r,transparency:e,background:d}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}}},{key:"cancel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&K.delete(this._canvas),this.callback(e||new d.RenderingCancelledException("Rendering cancelled, page ".concat(this.pageNumber),"canvas"))}},{key:"operatorListChanged",value:function(){this.graphicsReady?(this.stepper&&this.stepper.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}},{key:"_continue",value:function(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}},{key:"_scheduleNext",value:function(){var e=this;this._useRequestAnimationFrame?window.requestAnimationFrame((function(){e._nextBound().catch(e.cancel.bind(e))})):Promise.resolve().then(this._nextBound).catch(this.cancel.bind(this))}},{key:"_next",value:(t=a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.cancelled){e.next=2;break}return e.abrupt("return");case 2:this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&K.delete(this._canvas),this.callback()));case 4:case"end":return e.stop()}}),e,this)})),n=function(){var e=this,n=arguments;return new Promise((function(r,a){var l=t.apply(e,n);function d(e){E(l,r,a,d,h,"next",e)}function h(e){E(l,r,a,d,h,"throw",e)}d(void 0)}))},function(){return n.apply(this,arguments)})}]),e}());t.version="2.2.228",t.build="d7afb74a"},function(e,t,n){"use strict";e.exports=n(149)},function(e,t,n){"use strict";(function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=function(e){var n=Object.prototype,r=n.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},l=a.iterator||"@@iterator",d=a.asyncIterator||"@@asyncIterator",h=a.toStringTag||"@@toStringTag";function f(e,t,n,r){var a=t&&t.prototype instanceof w?t:w,l=Object.create(a.prototype),d=new P(r||[]);return l._invoke=function(e,t,n){var r="suspendedStart";return function(a,l){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw l;return{value:void 0,done:!0}}for(n.method=a,n.arg=l;;){var d=n.delegate;if(d){var h=R(d,n);if(h){if(h===y)continue;return h}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var f=p(e,t,n);if("normal"===f.type){if(r=n.done?"completed":"suspendedYield",f.arg===y)continue;return{value:f.arg,done:n.done}}"throw"===f.type&&(r="completed",n.method="throw",n.arg=f.arg)}}}(e,n,d),l}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=f;var y={};function w(){}function _(){}function C(){}var S={};S[l]=function(){return this};var k=Object.getPrototypeOf,x=k&&k(k(L([])));x&&x!==n&&r.call(x,l)&&(S=x);var E=C.prototype=w.prototype=Object.create(S);function A(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function T(e){var n;this._invoke=function(a,l){function d(){return new Promise((function(n,d){!function n(a,l,d,h){var f=p(e[a],e,l);if("throw"!==f.type){var y=f.arg,w=y.value;return w&&"object"===t(w)&&r.call(w,"__await")?Promise.resolve(w.__await).then((function(e){n("next",e,d,h)}),(function(e){n("throw",e,d,h)})):Promise.resolve(w).then((function(e){y.value=e,d(y)}),(function(e){return n("throw",e,d,h)}))}h(f.arg)}(a,l,n,d)}))}return n=n?n.then(d,d):d()}}function R(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,R(e,t),"throw"===t.method))return y;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var r=p(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,y;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,y):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,y)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function L(e){if(e){var t=e[l];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:D}}function D(){return{value:void 0,done:!0}}return _.prototype=E.constructor=C,C.constructor=_,C[h]=_.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,C):(e.__proto__=C,h in e||(e[h]="GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},A(T.prototype),T.prototype[d]=function(){return this},e.AsyncIterator=T,e.async=function(t,n,r,a){var l=new T(f(t,n,r,a));return e.isGeneratorFunction(n)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},A(E),E[h]="Generator",E[l]=function(){return this},E.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=L,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(M),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return d.type="throw",d.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var l=this.tryEntries[a],d=l.completion;if("root"===l.tryLoc)return n("end");if(l.tryLoc<=this.prev){var h=r.call(l,"catchLoc"),f=r.call(l,"finallyLoc");if(h&&f){if(this.prev<l.catchLoc)return n(l.catchLoc,!0);if(this.prev<l.finallyLoc)return n(l.finallyLoc)}else if(h){if(this.prev<l.catchLoc)return n(l.catchLoc,!0)}else{if(!f)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return n(l.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var l=a;break}}l&&("break"===e||"continue"===e)&&l.tryLoc<=t&&t<=l.finallyLoc&&(l=null);var d=l?l.completion:{};return d.type=e,d.arg=t,l?(this.method="next",this.next=l.finallyLoc,y):this.complete(d)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),M(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;M(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:L(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),y}},e}("object"===t(e)?e.exports:{});try{regeneratorRuntime=n}catch(e){Function("r","regeneratorRuntime = r")(n)}}).call(this,n(150)(e))},function(e,t,n){"use strict";e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addLinkAttributes=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.url,r=t.target,a=t.rel;if(e.href=e.title=n?(0,l.removeNullCharacters)(n):"",n){var d=Object.values(E),h=d.includes(r)?r:E.NONE;e.target=A[h],e.rel="string"==typeof a?a:"noopener noreferrer nofollow"}},t.getFilenameFromUrl=function(e){var t=e.indexOf("#"),n=e.indexOf("?"),r=Math.min(t>0?t:e.length,n>0?n:e.length);return e.substring(e.lastIndexOf("/",r)+1,r)},t.isFetchSupported=M,t.isValidFetchUrl=P,t.loadScript=function(e){return new Promise((function(t,n){var r=document.createElement("script");r.src=e,r.onload=t,r.onerror=function(){n(new Error("Cannot load script at: ".concat(r.src)))},(document.head||document.documentElement).appendChild(r)}))},t.deprecated=function(e){console.log("Deprecated API usage: "+e)},t.releaseImageResources=function(e){(0,l.assert)(e instanceof Image,"Invalid `img` parameter.");var t=e.src;"string"==typeof t&&t.startsWith("blob:")&&l.URL.revokeObjectURL&&l.URL.revokeObjectURL(t),e.removeAttribute("src")},t.PDFDateString=t.DummyStatTimer=t.StatTimer=t.DOMSVGFactory=t.DOMCMapReaderFactory=t.DOMCanvasFactory=t.DEFAULT_LINK_REL=t.LinkTarget=t.RenderingCancelledException=t.PageViewport=void 0;var r,a=(r=n(148))&&r.__esModule?r:{default:r},l=n(1);function d(e,t,n,r,a,l,d){try{var h=e[l](d),f=h.value}catch(e){return void n(e)}h.done?t(f):Promise.resolve(f).then(r,a)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var l=e.apply(t,n);function h(e){d(l,r,a,h,f,"next",e)}function f(e){d(l,r,a,h,f,"throw",e)}h(void 0)}))}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}t.DEFAULT_LINK_REL="noopener noreferrer nofollow";var w="http://www.w3.org/2000/svg",_=function(){function e(){f(this,e)}return y(e,[{key:"create",value:function(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");var n=document.createElement("canvas"),r=n.getContext("2d");return n.width=e,n.height=t,{canvas:n,context:r}}},{key:"reset",value:function(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}},{key:"destroy",value:function(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}}]),e}();t.DOMCanvasFactory=_;var C=function(){function e(t){var n=t.baseUrl,r=void 0===n?null:n,a=t.isCompressed,l=void 0!==a&&a;f(this,e),this.baseUrl=r,this.isCompressed=l}return y(e,[{key:"fetch",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=h(a.default.mark((function e(t){var n,r,d,f=this;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,this.baseUrl){e.next=3;break}throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');case 3:if(n){e.next=5;break}throw new Error("CMap name must be specified.");case 5:if(r=this.baseUrl+n+(this.isCompressed?".bcmap":""),d=this.isCompressed?l.CMapCompressionType.BINARY:l.CMapCompressionType.NONE,!M()||!P(r,document.baseURI)){e.next=9;break}return e.abrupt("return",fetch(r).then(function(){var e=h(a.default.mark((function e(t){var n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=2;break}throw new Error(t.statusText);case 2:if(!f.isCompressed){e.next=10;break}return e.t0=Uint8Array,e.next=6,t.arrayBuffer();case 6:e.t1=e.sent,n=new e.t0(e.t1),e.next=15;break;case 10:return e.t2=l.stringToBytes,e.next=13,t.text();case 13:e.t3=e.sent,n=(0,e.t2)(e.t3);case 15:return e.abrupt("return",{cMapData:n,compressionType:d});case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){throw new Error("Unable to load ".concat(f.isCompressed?"binary ":"")+"CMap at: ".concat(r))})));case 9:return e.abrupt("return",new Promise((function(e,t){var n=new XMLHttpRequest;n.open("GET",r,!0),f.isCompressed&&(n.responseType="arraybuffer"),n.onreadystatechange=function(){if(n.readyState===XMLHttpRequest.DONE){var r;if((200===n.status||0===n.status)&&(f.isCompressed&&n.response?r=new Uint8Array(n.response):!f.isCompressed&&n.responseText&&(r=(0,l.stringToBytes)(n.responseText)),r))return void e({cMapData:r,compressionType:d});t(new Error(n.statusText))}},n.send(null)})).catch((function(e){throw new Error("Unable to load ".concat(f.isCompressed?"binary ":"")+"CMap at: ".concat(r))})));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}())}]),e}();t.DOMCMapReaderFactory=C;var S=function(){function e(){f(this,e)}return y(e,[{key:"create",value:function(e,t){(0,l.assert)(e>0&&t>0,"Invalid SVG dimensions");var n=document.createElementNS(w,"svg:svg");return n.setAttribute("version","1.1"),n.setAttribute("width",e+"px"),n.setAttribute("height",t+"px"),n.setAttribute("preserveAspectRatio","none"),n.setAttribute("viewBox","0 0 "+e+" "+t),n}},{key:"createElement",value:function(e){return(0,l.assert)("string"==typeof e,"Invalid SVG element type"),document.createElementNS(w,e)}}]),e}();t.DOMSVGFactory=S;var k=function(){function e(t){var n=t.viewBox,r=t.scale,a=t.rotation,l=t.offsetX,d=void 0===l?0:l,h=t.offsetY,p=void 0===h?0:h,y=t.dontFlip,w=void 0!==y&&y;f(this,e),this.viewBox=n,this.scale=r,this.rotation=a,this.offsetX=d,this.offsetY=p;var _,C,S,k,x,E,A,T,R=(n[2]+n[0])/2,O=(n[3]+n[1])/2;switch(a=(a%=360)<0?a+360:a){case 180:_=-1,C=0,S=0,k=1;break;case 90:_=0,C=1,S=1,k=0;break;case 270:_=0,C=-1,S=-1,k=0;break;default:_=1,C=0,S=0,k=-1}w&&(S=-S,k=-k),0===_?(x=Math.abs(O-n[1])*r+d,E=Math.abs(R-n[0])*r+p,A=Math.abs(n[3]-n[1])*r,T=Math.abs(n[2]-n[0])*r):(x=Math.abs(R-n[0])*r+d,E=Math.abs(O-n[1])*r+p,A=Math.abs(n[2]-n[0])*r,T=Math.abs(n[3]-n[1])*r),this.transform=[_*r,C*r,S*r,k*r,x-_*r*R-S*r*O,E-C*r*R-k*r*O],this.width=A,this.height=T}return y(e,[{key:"clone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.scale,r=void 0===n?this.scale:n,a=t.rotation,l=void 0===a?this.rotation:a,d=t.dontFlip,h=void 0!==d&&d;return new e({viewBox:this.viewBox.slice(),scale:r,rotation:l,offsetX:this.offsetX,offsetY:this.offsetY,dontFlip:h})}},{key:"convertToViewportPoint",value:function(e,t){return l.Util.applyTransform([e,t],this.transform)}},{key:"convertToViewportRectangle",value:function(e){var t=l.Util.applyTransform([e[0],e[1]],this.transform),n=l.Util.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],n[0],n[1]]}},{key:"convertToPdfPoint",value:function(e,t){return l.Util.applyInverseTransform([e,t],this.transform)}}]),e}();t.PageViewport=k;var x=function(){function e(e,t){this.message=e,this.type=t}return e.prototype=new Error,e.prototype.name="RenderingCancelledException",e.constructor=e,e}();t.RenderingCancelledException=x;var E={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};t.LinkTarget=E;var A=["","_self","_blank","_parent","_top"],T=function(){function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];f(this,e),this.enabled=!!t,this.started=Object.create(null),this.times=[]}return y(e,[{key:"time",value:function(e){this.enabled&&(e in this.started&&(0,l.warn)("Timer is already running for "+e),this.started[e]=Date.now())}},{key:"timeEnd",value:function(e){this.enabled&&(e in this.started||(0,l.warn)("Timer has not been started for "+e),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e])}},{key:"toString",value:function(){var e="",t=0,n=!0,r=!1,a=void 0;try{for(var l,d=this.times[Symbol.iterator]();!(n=(l=d.next()).done);n=!0){var h=l.value.name;h.length>t&&(t=h.length)}}catch(e){r=!0,a=e}finally{try{n||null==d.return||d.return()}finally{if(r)throw a}}var f=!0,p=!1,y=void 0;try{for(var w,_=this.times[Symbol.iterator]();!(f=(w=_.next()).done);f=!0){var C=w.value,S=C.end-C.start;e+="".concat(C.name.padEnd(t)," ").concat(S,"ms\n")}}catch(e){p=!0,y=e}finally{try{f||null==_.return||_.return()}finally{if(p)throw y}}return e}}]),e}();t.StatTimer=T;var R,O=function(){function e(){f(this,e),(0,l.unreachable)("Cannot initialize DummyStatTimer.")}return y(e,null,[{key:"time",value:function(e){}},{key:"timeEnd",value:function(e){}},{key:"toString",value:function(){return""}}]),e}();function M(){return"undefined"!=typeof fetch&&"undefined"!=typeof Response&&"body"in Response.prototype&&"undefined"!=typeof ReadableStream}function P(e,t){try{var n=(t?new l.URL(e,t):new l.URL(e)).protocol;return"http:"===n||"https:"===n}catch(e){return!1}}t.DummyStatTimer=O;var L=function(){function e(){f(this,e)}return y(e,null,[{key:"toDateObject",value:function(e){if(!e||!(0,l.isString)(e))return null;R||(R=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));var t=R.exec(e);if(!t)return null;var n=parseInt(t[1],10),r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;var a=parseInt(t[3],10);a=a>=1&&a<=31?a:1;var d=parseInt(t[4],10);d=d>=0&&d<=23?d:0;var h=parseInt(t[5],10);h=h>=0&&h<=59?h:0;var f=parseInt(t[6],10);f=f>=0&&f<=59?f:0;var p=t[7]||"Z",y=parseInt(t[8],10);y=y>=0&&y<=23?y:0;var w=parseInt(t[9],10)||0;return w=w>=0&&w<=59?w:0,"-"===p?(d+=y,h+=w):"+"===p&&(d-=y,h-=w),new Date(Date.UTC(n,r,a,d,h,f))}}]),e}();t.PDFDateString=L},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FontLoader=t.FontFaceObject=void 0;var r,a=(r=n(148))&&r.__esModule?r:{default:r},l=n(1);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e,t,n,r,a,l,d){try{var h=e[l](d),f=h.value}catch(e){return void n(e)}h.done?t(f):Promise.resolve(f).then(r,a)}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t,n){return t&&_(e.prototype,t),n&&_(e,n),e}var S,k=function(){function e(t){var n=t.docId,r=t.onUnsupportedFeature;w(this,e),this.constructor===e&&(0,l.unreachable)("Cannot initialize BaseFontLoader."),this.docId=n,this._onUnsupportedFeature=r,this.nativeFontFaces=[],this.styleElement=null}var t,n;return C(e,[{key:"addNativeFontFace",value:function(e){this.nativeFontFaces.push(e),document.fonts.add(e)}},{key:"insertRule",value:function(e){var t=this.styleElement;t||((t=this.styleElement=document.createElement("style")).id="PDFJS_FONT_STYLE_TAG_".concat(this.docId),document.documentElement.getElementsByTagName("head")[0].appendChild(t));var n=t.sheet;n.insertRule(e,n.cssRules.length)}},{key:"clear",value:function(){this.nativeFontFaces.forEach((function(e){document.fonts.delete(e)})),this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}},{key:"bind",value:(t=a.default.mark((function e(t){var n,r,d=this;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.attached&&!t.missingFile){e.next=2;break}return e.abrupt("return",void 0);case 2:if(t.attached=!0,!this.isFontLoadingAPISupported){e.next=19;break}if(!(n=t.createNativeFontFace())){e.next=18;break}return this.addNativeFontFace(n),e.prev=7,e.next=10,n.loaded;case 10:e.next=18;break;case 12:throw e.prev=12,e.t0=e.catch(7),this._onUnsupportedFeature({featureId:l.UNSUPPORTED_FEATURES.font}),(0,l.warn)("Failed to load font '".concat(n.family,"': '").concat(e.t0,"'.")),t.disableFontFace=!0,e.t0;case 18:return e.abrupt("return",void 0);case 19:if(!(r=t.createFontFaceRule())){e.next=25;break}if(this.insertRule(r),!this.isSyncFontLoadingSupported){e.next=24;break}return e.abrupt("return",void 0);case 24:return e.abrupt("return",new Promise((function(e){var n=d._queueLoadingCallback(e);d._prepareFontLoadEvent([r],[t],n)})));case 25:return e.abrupt("return",void 0);case 26:case"end":return e.stop()}}),e,this,[[7,12]])})),n=function(){var e=this,n=arguments;return new Promise((function(r,a){var l=t.apply(e,n);function d(e){y(l,r,a,d,h,"next",e)}function h(e){y(l,r,a,d,h,"throw",e)}d(void 0)}))},function(e){return n.apply(this,arguments)})},{key:"_queueLoadingCallback",value:function(e){(0,l.unreachable)("Abstract method `_queueLoadingCallback`.")}},{key:"_prepareFontLoadEvent",value:function(e,t,n){(0,l.unreachable)("Abstract method `_prepareFontLoadEvent`.")}},{key:"isFontLoadingAPISupported",get:function(){(0,l.unreachable)("Abstract method `isFontLoadingAPISupported`.")}},{key:"isSyncFontLoadingSupported",get:function(){(0,l.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}},{key:"_loadTestFont",get:function(){(0,l.unreachable)("Abstract method `_loadTestFont`.")}}]),e}();t.FontLoader=S,t.FontLoader=S=function(e){function t(e){var n;return w(this,t),(n=h(this,f(t).call(this,e))).loadingContext={requests:[],nextRequestId:0},n.loadTestFontId=0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),C(t,[{key:"_queueLoadingCallback",value:function(e){var t=this.loadingContext,n={id:"pdfjs-font-loading-".concat(t.nextRequestId++),done:!1,complete:function(){for((0,l.assert)(!n.done,"completeRequest() cannot be called twice."),n.done=!0;t.requests.length>0&&t.requests[0].done;){var e=t.requests.shift();setTimeout(e.callback,0)}},callback:e};return t.requests.push(n),n}},{key:"_prepareFontLoadEvent",value:function(e,t,n){function r(e,t){return e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|255&e.charCodeAt(t+3)}function a(e,t,n,r){return e.substring(0,t)+r+e.substring(t+n)}var d,h,f=document.createElement("canvas");f.width=1,f.height=1;var p=f.getContext("2d"),y=0,w="lt".concat(Date.now()).concat(this.loadTestFontId++),_=this._loadTestFont,C=r(_=a(_,976,w.length,w),16);for(d=0,h=w.length-3;d<h;d+=4)C=C-1482184792+r(w,d)|0;d<w.length&&(C=C-1482184792+r(w+"XXX",d)|0),_=a(_,16,4,(0,l.string32)(C));var S="url(data:font/opentype;base64,".concat(btoa(_),");"),k='@font-face {font-family:"'.concat(w,'";src:').concat(S,"}");this.insertRule(k);var x=[];for(d=0,h=t.length;d<h;d++)x.push(t[d].loadedName);x.push(w);var E=document.createElement("div");for(E.setAttribute("style","visibility: hidden;width: 10px; height: 10px;position: absolute; top: 0px; left: 0px;"),d=0,h=x.length;d<h;++d){var A=document.createElement("span");A.textContent="Hi",A.style.fontFamily=x[d],E.appendChild(A)}document.body.appendChild(E),function e(t,n){if(++y>30)return(0,l.warn)("Load test font never loaded."),void n();p.font="30px "+t,p.fillText(".",0,20),p.getImageData(0,0,1,1).data[3]>0?n():setTimeout(e.bind(null,t,n))}(w,(function(){document.body.removeChild(E),n.complete()}))}},{key:"isFontLoadingAPISupported",get:function(){var e="undefined"!=typeof document&&!!document.fonts;if(e&&"undefined"!=typeof navigator){var t=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);t&&t[1]<63&&(e=!1)}return(0,l.shadow)(this,"isFontLoadingAPISupported",e)}},{key:"isSyncFontLoadingSupported",get:function(){var e=!1;if("undefined"==typeof navigator)e=!0;else{var t=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);t&&t[1]>=14&&(e=!0)}return(0,l.shadow)(this,"isSyncFontLoadingSupported",e)}},{key:"_loadTestFont",get:function(){return(0,l.shadow)(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}}]),t}(k);var x={get value(){return(0,l.shadow)(this,"value",(0,l.isEvalSupported)())}},E=function(){function e(t,n){var r=n.isEvalSupported,a=void 0===r||r,l=n.disableFontFace,d=void 0!==l&&l,h=n.ignoreErrors,f=void 0!==h&&h,p=n.onUnsupportedFeature,y=void 0===p?null:p,_=n.fontRegistry,C=void 0===_?null:_;for(var S in w(this,e),this.compiledGlyphs=Object.create(null),t)this[S]=t[S];this.isEvalSupported=!1!==a,this.disableFontFace=!0===d,this.ignoreErrors=!0===f,this._onUnsupportedFeature=y,this.fontRegistry=C}return C(e,[{key:"createNativeFontFace",value:function(){if(!this.data||this.disableFontFace)return null;var e=new FontFace(this.loadedName,this.data,{});return this.fontRegistry&&this.fontRegistry.registerFont(this),e}},{key:"createFontFaceRule",value:function(){if(!this.data||this.disableFontFace)return null;var e=(0,l.bytesToString)(new Uint8Array(this.data)),t="url(data:".concat(this.mimetype,";base64,").concat(btoa(e),");"),n='@font-face {font-family:"'.concat(this.loadedName,'";src:').concat(t,"}");return this.fontRegistry&&this.fontRegistry.registerFont(this,t),n}},{key:"getPathGenerator",value:function(e,t){if(void 0!==this.compiledGlyphs[t])return this.compiledGlyphs[t];var n,r;try{n=e.get(this.loadedName+"_path_"+t)}catch(e){if(!this.ignoreErrors)throw e;return this._onUnsupportedFeature&&this._onUnsupportedFeature({featureId:l.UNSUPPORTED_FEATURES.font}),(0,l.warn)('getPathGenerator - ignoring character: "'.concat(e,'".')),this.compiledGlyphs[t]=function(e,t){}}if(this.isEvalSupported&&x.value){for(var a,d="",h=0,f=n.length;h<f;h++)a=void 0!==(r=n[h]).args?r.args.join(","):"",d+="c."+r.cmd+"("+a+");\n";return this.compiledGlyphs[t]=new Function("c","size",d)}return this.compiledGlyphs[t]=function(e,t){for(var a=0,l=n.length;a<l;a++)"scale"===(r=n[a]).cmd&&(r.args=[t,-t]),e[r.cmd].apply(e,r.args)}}}]),e}();t.FontFaceObject=E},function(e,t,n){"use strict";var r=Object.create(null),a=n(4),l="undefined"!=typeof navigator&&navigator.userAgent||"",d=/Trident/.test(l),h=/CriOS/.test(l);(d||h)&&(r.disableCreateObjectURL=!0),a()&&(r.disableFontFace=!0,r.nativeImageDecoderSupport="none"),t.apiCompatibilityParams=Object.freeze(r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasGraphics=void 0;var r=n(1),a=n(155),l={get value(){return(0,r.shadow)(l,"value",(0,r.isLittleEndian)())}};function d(e){e.mozCurrentTransform||(e._originalSave=e.save,e._originalRestore=e.restore,e._originalRotate=e.rotate,e._originalScale=e.scale,e._originalTranslate=e.translate,e._originalTransform=e.transform,e._originalSetTransform=e.setTransform,e._transformMatrix=e._transformMatrix||[1,0,0,1,0,0],e._transformStack=[],Object.defineProperty(e,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(e,"mozCurrentTransformInverse",{get:function(){var e=this._transformMatrix,t=e[0],n=e[1],r=e[2],a=e[3],l=e[4],d=e[5],h=t*a-n*r,f=n*r-t*a;return[a/h,n/f,r/f,t/h,(a*l-r*d)/f,(n*l-t*d)/h]}}),e.save=function(){var e=this._transformMatrix;this._transformStack.push(e),this._transformMatrix=e.slice(0,6),this._originalSave()},e.restore=function(){var e=this._transformStack.pop();e&&(this._transformMatrix=e,this._originalRestore())},e.translate=function(e,t){var n=this._transformMatrix;n[4]=n[0]*e+n[2]*t+n[4],n[5]=n[1]*e+n[3]*t+n[5],this._originalTranslate(e,t)},e.scale=function(e,t){var n=this._transformMatrix;n[0]=n[0]*e,n[1]=n[1]*e,n[2]=n[2]*t,n[3]=n[3]*t,this._originalScale(e,t)},e.transform=function(t,n,r,a,l,d){var h=this._transformMatrix;this._transformMatrix=[h[0]*t+h[2]*n,h[1]*t+h[3]*n,h[0]*r+h[2]*a,h[1]*r+h[3]*a,h[0]*l+h[2]*d+h[4],h[1]*l+h[3]*d+h[5]],e._originalTransform(t,n,r,a,l,d)},e.setTransform=function(t,n,r,a,l,d){this._transformMatrix=[t,n,r,a,l,d],e._originalSetTransform(t,n,r,a,l,d)},e.rotate=function(e){var t=Math.cos(e),n=Math.sin(e),r=this._transformMatrix;this._transformMatrix=[r[0]*t+r[2]*n,r[1]*t+r[3]*n,r[0]*-n+r[2]*t,r[1]*-n+r[3]*t,r[4],r[5]],this._originalRotate(e)})}var h=function(){function e(e){this.canvasFactory=e,this.cache=Object.create(null)}return e.prototype={getCanvas:function(e,t,n,r){var a;return void 0!==this.cache[e]?(a=this.cache[e],this.canvasFactory.reset(a,t,n),a.context.setTransform(1,0,0,1,0,0)):(a=this.canvasFactory.create(t,n),this.cache[e]=a),r&&d(a.context),a},clear:function(){for(var e in this.cache){var t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}},e}(),f=function(){function e(){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=r.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=r.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=r.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.resumeSMaskCtx=null}return e.prototype={clone:function(){return Object.create(this)},setCurrentPoint:function(e,t){this.x=e,this.y=t}},e}(),p=function(){function e(e,t,n,r,a,l){this.ctx=e,this.current=new f,this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=r,this.webGLContext=a,this.imageLayer=l,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.cachedCanvases=new h(this.canvasFactory),e&&d(e),this._cachedGetSinglePixelWidth=null}function t(e,t){if("undefined"!=typeof ImageData&&t instanceof ImageData)e.putImageData(t,0,0);else{var n,a,d,h,f,p=t.height,y=t.width,w=p%16,_=(p-w)/16,C=0===w?_:_+1,S=e.createImageData(y,16),k=0,x=t.data,E=S.data;if(t.kind===r.ImageKind.GRAYSCALE_1BPP){var A=x.byteLength,T=new Uint32Array(E.buffer,0,E.byteLength>>2),R=T.length,O=y+7>>3,M=4294967295,P=l.value?4278190080:255;for(a=0;a<C;a++){for(h=a<_?16:w,n=0,d=0;d<h;d++){for(var L=A-k,D=0,I=L>O?y:8*L-7,F=-8&I,j=0,N=0;D<F;D+=8)N=x[k++],T[n++]=128&N?M:P,T[n++]=64&N?M:P,T[n++]=32&N?M:P,T[n++]=16&N?M:P,T[n++]=8&N?M:P,T[n++]=4&N?M:P,T[n++]=2&N?M:P,T[n++]=1&N?M:P;for(;D<I;D++)0===j&&(N=x[k++],j=128),T[n++]=N&j?M:P,j>>=1}for(;n<R;)T[n++]=0;e.putImageData(S,0,16*a)}}else if(t.kind===r.ImageKind.RGBA_32BPP){for(d=0,f=16*y*4,a=0;a<_;a++)E.set(x.subarray(k,k+f)),k+=f,e.putImageData(S,0,d),d+=16;a<C&&(f=y*w*4,E.set(x.subarray(k,k+f)),e.putImageData(S,0,d))}else{if(t.kind!==r.ImageKind.RGB_24BPP)throw new Error("bad image kind: ".concat(t.kind));for(f=y*(h=16),a=0;a<C;a++){for(a>=_&&(f=y*(h=w)),n=0,d=f;d--;)E[n++]=x[k++],E[n++]=x[k++],E[n++]=x[k++],E[n++]=255;e.putImageData(S,0,16*a)}}}}function n(e,t){for(var n=t.height,r=t.width,a=n%16,l=(n-a)/16,d=0===a?l:l+1,h=e.createImageData(r,16),f=0,p=t.data,y=h.data,w=0;w<d;w++){for(var _=w<l?16:a,C=3,S=0;S<_;S++)for(var k=0,x=0;x<r;x++){if(!k){var E=p[f++];k=128}y[C]=E&k?0:255,C+=4,k>>=1}e.putImageData(h,0,16*w)}}function p(e,t){for(var n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"],r=0,a=n.length;r<a;r++){var l=n[r];void 0!==e[l]&&(t[l]=e[l])}void 0!==e.setLineDash&&(t.setLineDash(e.getLineDash()),t.lineDashOffset=e.lineDashOffset)}function y(e){e.strokeStyle="#000000",e.fillStyle="#000000",e.fillRule="nonzero",e.globalAlpha=1,e.lineWidth=1,e.lineCap="butt",e.lineJoin="miter",e.miterLimit=10,e.globalCompositeOperation="source-over",e.font="10px sans-serif",void 0!==e.setLineDash&&(e.setLineDash([]),e.lineDashOffset=0)}function w(e,t,n,r){for(var a=e.length,l=3;l<a;l+=4){var d=e[l];if(0===d)e[l-3]=t,e[l-2]=n,e[l-1]=r;else if(d<255){var h=255-d;e[l-3]=e[l-3]*d+t*h>>8,e[l-2]=e[l-2]*d+n*h>>8,e[l-1]=e[l-1]*d+r*h>>8}}}function _(e,t,n){for(var r=e.length,a=3;a<r;a+=4){var l=n?n[e[a]]:e[a];t[a]=t[a]*l*(1/255)|0}}function C(e,t,n){for(var r=e.length,a=3;a<r;a+=4){var l=77*e[a-3]+152*e[a-2]+28*e[a-1];t[a]=n?t[a]*n[l>>8]>>8:t[a]*l>>16}}function S(e,t,n,r){var a=t.canvas,l=t.context;e.setTransform(t.scaleX,0,0,t.scaleY,t.offsetX,t.offsetY);var d=t.backdrop||null;if(!t.transferMap&&r.isEnabled){var h=r.composeSMask({layer:n.canvas,mask:a,properties:{subtype:t.subtype,backdrop:d}});return e.setTransform(1,0,0,1,0,0),void e.drawImage(h,t.offsetX,t.offsetY)}!function(e,t,n,r,a,l,d){var h,f=!!l,p=f?l[0]:0,y=f?l[1]:0,S=f?l[2]:0;h="Luminosity"===a?C:_;for(var k=Math.min(r,Math.ceil(1048576/n)),x=0;x<r;x+=k){var E=Math.min(k,r-x),A=e.getImageData(0,x,n,E),T=t.getImageData(0,x,n,E);f&&w(A.data,p,y,S),h(A.data,T.data,d),e.putImageData(T,0,x)}}(l,n,a.width,a.height,t.subtype,d,t.transferMap),e.drawImage(a,0,0)}var k=["butt","round","square"],x=["miter","round","bevel"],E={},A={};for(var T in e.prototype={beginDrawing:function(e){var t=e.transform,n=e.viewport,r=e.transparency,a=void 0!==r&&r,l=e.background,d=void 0===l?null:l,h=this.ctx.canvas.width,f=this.ctx.canvas.height;if(this.ctx.save(),this.ctx.fillStyle=d||"rgb(255, 255, 255)",this.ctx.fillRect(0,0,h,f),this.ctx.restore(),a){var p=this.cachedCanvases.getCanvas("transparent",h,f,!0);this.compositeCtx=this.ctx,this.transparentCanvas=p.canvas,this.ctx=p.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),y(this.ctx),t&&this.ctx.transform.apply(this.ctx,t),this.ctx.transform.apply(this.ctx,n.transform),this.baseTransform=this.ctx.mozCurrentTransform.slice(),this.imageLayer&&this.imageLayer.beginLayout()},executeOperatorList:function(e,t,n,a){var l=e.argsArray,d=e.fnArray,h=t||0,f=l.length;if(f===h)return h;for(var p,y=f-h>10&&"function"==typeof n,w=y?Date.now()+15:0,_=0,C=this.commonObjs,S=this.objs;;){if(void 0!==a&&h===a.nextBreakPoint)return a.breakIt(h,n),h;if((p=d[h])!==r.OPS.dependency)this[p].apply(this,l[h]);else{var k=!0,x=!1,E=void 0;try{for(var A,T=l[h][Symbol.iterator]();!(k=(A=T.next()).done);k=!0){var R=A.value,O=R.startsWith("g_")?C:S;if(!O.has(R))return O.get(R,n),h}}catch(e){x=!0,E=e}finally{try{k||null==T.return||T.return()}finally{if(x)throw E}}}if(++h===f)return h;if(y&&++_>10){if(Date.now()>w)return n(),h;_=0}}},endDrawing:function(){null!==this.current.activeSMask&&this.endSMaskGroup(),this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),this.webGLContext.clear(),this.imageLayer&&this.imageLayer.endLayout()},setLineWidth:function(e){this.current.lineWidth=e,this.ctx.lineWidth=e},setLineCap:function(e){this.ctx.lineCap=k[e]},setLineJoin:function(e){this.ctx.lineJoin=x[e]},setMiterLimit:function(e){this.ctx.miterLimit=e},setDash:function(e,t){var n=this.ctx;void 0!==n.setLineDash&&(n.setLineDash(e),n.lineDashOffset=t)},setRenderingIntent:function(e){},setFlatness:function(e){},setGState:function(e){for(var t=0,n=e.length;t<n;t++){var r=e[t],a=r[0],l=r[1];switch(a){case"LW":this.setLineWidth(l);break;case"LC":this.setLineCap(l);break;case"LJ":this.setLineJoin(l);break;case"ML":this.setMiterLimit(l);break;case"D":this.setDash(l[0],l[1]);break;case"RI":this.setRenderingIntent(l);break;case"FL":this.setFlatness(l);break;case"Font":this.setFont(l[0],l[1]);break;case"CA":this.current.strokeAlpha=r[1];break;case"ca":this.current.fillAlpha=r[1],this.ctx.globalAlpha=r[1];break;case"BM":this.ctx.globalCompositeOperation=l;break;case"SMask":this.current.activeSMask&&(this.stateStack.length>0&&this.stateStack[this.stateStack.length-1].activeSMask===this.current.activeSMask?this.suspendSMaskGroup():this.endSMaskGroup()),this.current.activeSMask=l?this.tempSMask:null,this.current.activeSMask&&this.beginSMaskGroup(),this.tempSMask=null}}},beginSMaskGroup:function(){var e=this.current.activeSMask,t=e.canvas.width,n=e.canvas.height,r="smaskGroupAt"+this.groupLevel,a=this.cachedCanvases.getCanvas(r,t,n,!0),l=this.ctx,d=l.mozCurrentTransform;this.ctx.save();var h=a.context;h.scale(1/e.scaleX,1/e.scaleY),h.translate(-e.offsetX,-e.offsetY),h.transform.apply(h,d),e.startTransformInverse=h.mozCurrentTransformInverse,p(l,h),this.ctx=h,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(l),this.groupLevel++},suspendSMaskGroup:function(){var e=this.ctx;this.groupLevel--,this.ctx=this.groupStack.pop(),S(this.ctx,this.current.activeSMask,e,this.webGLContext),this.ctx.restore(),this.ctx.save(),p(e,this.ctx),this.current.resumeSMaskCtx=e;var t=r.Util.transform(this.current.activeSMask.startTransformInverse,e.mozCurrentTransform);this.ctx.transform.apply(this.ctx,t),e.save(),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,e.canvas.width,e.canvas.height),e.restore()},resumeSMaskGroup:function(){var e=this.current.resumeSMaskCtx,t=this.ctx;this.ctx=e,this.groupStack.push(t),this.groupLevel++},endSMaskGroup:function(){var e=this.ctx;this.groupLevel--,this.ctx=this.groupStack.pop(),S(this.ctx,this.current.activeSMask,e,this.webGLContext),this.ctx.restore(),p(e,this.ctx);var t=r.Util.transform(this.current.activeSMask.startTransformInverse,e.mozCurrentTransform);this.ctx.transform.apply(this.ctx,t)},save:function(){this.ctx.save();var e=this.current;this.stateStack.push(e),this.current=e.clone(),this.current.resumeSMaskCtx=null},restore:function(){this.current.resumeSMaskCtx&&this.resumeSMaskGroup(),null===this.current.activeSMask||0!==this.stateStack.length&&this.stateStack[this.stateStack.length-1].activeSMask===this.current.activeSMask||this.endSMaskGroup(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.ctx.restore(),this.pendingClip=null,this._cachedGetSinglePixelWidth=null)},transform:function(e,t,n,r,a,l){this.ctx.transform(e,t,n,r,a,l),this._cachedGetSinglePixelWidth=null},constructPath:function(e,t){for(var n=this.ctx,a=this.current,l=a.x,d=a.y,h=0,f=0,p=e.length;h<p;h++)switch(0|e[h]){case r.OPS.rectangle:l=t[f++],d=t[f++];var y=t[f++],w=t[f++];0===y&&(y=this.getSinglePixelWidth()),0===w&&(w=this.getSinglePixelWidth());var _=l+y,C=d+w;this.ctx.moveTo(l,d),this.ctx.lineTo(_,d),this.ctx.lineTo(_,C),this.ctx.lineTo(l,C),this.ctx.lineTo(l,d),this.ctx.closePath();break;case r.OPS.moveTo:l=t[f++],d=t[f++],n.moveTo(l,d);break;case r.OPS.lineTo:l=t[f++],d=t[f++],n.lineTo(l,d);break;case r.OPS.curveTo:l=t[f+4],d=t[f+5],n.bezierCurveTo(t[f],t[f+1],t[f+2],t[f+3],l,d),f+=6;break;case r.OPS.curveTo2:n.bezierCurveTo(l,d,t[f],t[f+1],t[f+2],t[f+3]),l=t[f+2],d=t[f+3],f+=4;break;case r.OPS.curveTo3:l=t[f+2],d=t[f+3],n.bezierCurveTo(t[f],t[f+1],l,d,l,d),f+=4;break;case r.OPS.closePath:n.closePath()}a.setCurrentPoint(l,d)},closePath:function(){this.ctx.closePath()},stroke:function(e){e=void 0===e||e;var t=this.ctx,n=this.current.strokeColor;t.lineWidth=Math.max(.65*this.getSinglePixelWidth(),this.current.lineWidth),t.globalAlpha=this.current.strokeAlpha,n&&n.hasOwnProperty("type")&&"Pattern"===n.type?(t.save(),t.strokeStyle=n.getPattern(t,this),t.stroke(),t.restore()):t.stroke(),e&&this.consumePath(),t.globalAlpha=this.current.fillAlpha},closeStroke:function(){this.closePath(),this.stroke()},fill:function(e){e=void 0===e||e;var t=this.ctx,n=this.current.fillColor,r=!1;this.current.patternFill&&(t.save(),this.baseTransform&&t.setTransform.apply(t,this.baseTransform),t.fillStyle=n.getPattern(t,this),r=!0),this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill(),r&&t.restore(),e&&this.consumePath()},eoFill:function(){this.pendingEOFill=!0,this.fill()},fillStroke:function(){this.fill(!1),this.stroke(!1),this.consumePath()},eoFillStroke:function(){this.pendingEOFill=!0,this.fillStroke()},closeFillStroke:function(){this.closePath(),this.fillStroke()},closeEOFillStroke:function(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()},endPath:function(){this.consumePath()},clip:function(){this.pendingClip=E},eoClip:function(){this.pendingClip=A},beginText:function(){this.current.textMatrix=r.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0},endText:function(){var e=this.pendingTextPaths,t=this.ctx;if(void 0!==e){t.save(),t.beginPath();for(var n=0;n<e.length;n++){var r=e[n];t.setTransform.apply(t,r.transform),t.translate(r.x,r.y),r.addToPath(t,r.fontSize)}t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}else t.beginPath()},setCharSpacing:function(e){this.current.charSpacing=e},setWordSpacing:function(e){this.current.wordSpacing=e},setHScale:function(e){this.current.textHScale=e/100},setLeading:function(e){this.current.leading=-e},setFont:function(e,t){var n=this.commonObjs.get(e),a=this.current;if(!n)throw new Error("Can't find font for ".concat(e));if(a.fontMatrix=n.fontMatrix?n.fontMatrix:r.FONT_IDENTITY_MATRIX,0!==a.fontMatrix[0]&&0!==a.fontMatrix[3]||(0,r.warn)("Invalid font matrix for font "+e),t<0?(t=-t,a.fontDirection=-1):a.fontDirection=1,this.current.font=n,this.current.fontSize=t,!n.isType3Font){var l=n.loadedName||"sans-serif",d=n.black?"900":n.bold?"bold":"normal",h=n.italic?"italic":"normal",f='"'.concat(l,'", ').concat(n.fallbackName),p=t<16?16:t>100?100:t;this.current.fontSizeScale=t/p,this.ctx.font="".concat(h," ").concat(d," ").concat(p,"px ").concat(f)}},setTextRenderingMode:function(e){this.current.textRenderingMode=e},setTextRise:function(e){this.current.textRise=e},moveText:function(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t},setLeadingMoveText:function(e,t){this.setLeading(-t),this.moveText(e,t)},setTextMatrix:function(e,t,n,r,a,l){this.current.textMatrix=[e,t,n,r,a,l],this.current.textMatrixScale=Math.sqrt(e*e+t*t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0},nextLine:function(){this.moveText(0,this.current.leading)},paintChar:function(e,t,n,a){var l,d=this.ctx,h=this.current,f=h.font,p=h.textRenderingMode,y=h.fontSize/h.fontSizeScale,w=p&r.TextRenderingMode.FILL_STROKE_MASK,_=!!(p&r.TextRenderingMode.ADD_TO_PATH_FLAG),C=h.patternFill&&f.data;(f.disableFontFace||_||C)&&(l=f.getPathGenerator(this.commonObjs,e)),f.disableFontFace||C?(d.save(),d.translate(t,n),d.beginPath(),l(d,y),a&&d.setTransform.apply(d,a),w!==r.TextRenderingMode.FILL&&w!==r.TextRenderingMode.FILL_STROKE||d.fill(),w!==r.TextRenderingMode.STROKE&&w!==r.TextRenderingMode.FILL_STROKE||d.stroke(),d.restore()):(w!==r.TextRenderingMode.FILL&&w!==r.TextRenderingMode.FILL_STROKE||d.fillText(e,t,n),w!==r.TextRenderingMode.STROKE&&w!==r.TextRenderingMode.FILL_STROKE||d.strokeText(e,t,n)),_&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:d.mozCurrentTransform,x:t,y:n,fontSize:y,addToPath:l})},get isFontSubpixelAAEnabled(){var e=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10).context;e.scale(1.5,1),e.fillText("I",0,10);for(var t=e.getImageData(0,0,10,10).data,n=!1,a=3;a<t.length;a+=4)if(t[a]>0&&t[a]<255){n=!0;break}return(0,r.shadow)(this,"isFontSubpixelAAEnabled",n)},showText:function(e){var t=this.current,n=t.font;if(n.isType3Font)return this.showType3Text(e);var a=t.fontSize;if(0!==a){var l,d=this.ctx,h=t.fontSizeScale,f=t.charSpacing,p=t.wordSpacing,y=t.fontDirection,w=t.textHScale*y,_=e.length,C=n.vertical,S=C?1:-1,k=n.defaultVMetrics,x=a*t.fontMatrix[0],E=t.textRenderingMode===r.TextRenderingMode.FILL&&!n.disableFontFace&&!t.patternFill;if(d.save(),t.patternFill){d.save();var A=t.fillColor.getPattern(d,this);l=d.mozCurrentTransform,d.restore(),d.fillStyle=A}d.transform.apply(d,t.textMatrix),d.translate(t.x,t.y+t.textRise),y>0?d.scale(w,-1):d.scale(w,1);var T=t.lineWidth,R=t.textMatrixScale;if(0===R||0===T){var O=t.textRenderingMode&r.TextRenderingMode.FILL_STROKE_MASK;O!==r.TextRenderingMode.STROKE&&O!==r.TextRenderingMode.FILL_STROKE||(this._cachedGetSinglePixelWidth=null,T=.65*this.getSinglePixelWidth())}else T/=R;1!==h&&(d.scale(h,h),T/=h),d.lineWidth=T;var M,P=0;for(M=0;M<_;++M){var L=e[M];if((0,r.isNum)(L))P+=S*L*a/1e3;else{var D,I,F,j,N,B,z,H=!1,U=(L.isSpace?p:0)+f,W=L.fontChar,V=L.accent,q=L.width;if(C?(N=L.vmetric||k,B=-(B=L.vmetric?N[1]:.5*q)*x,z=N[2]*x,q=N?-N[0]:q,D=B/h,I=(P+z)/h):(D=P/h,I=0),n.remeasure&&q>0){var G=1e3*d.measureText(W).width/a*h;if(q<G&&this.isFontSubpixelAAEnabled){var K=q/G;H=!0,d.save(),d.scale(K,1),D/=K}else q!==G&&(D+=(q-G)/2e3*a/h)}(L.isInFont||n.missingFile)&&(E&&!V?d.fillText(W,D,I):(this.paintChar(W,D,I,l),V&&(F=D+V.offset.x/h,j=I-V.offset.y/h,this.paintChar(V.fontChar,F,j,l)))),P+=q*x+U*y,H&&d.restore()}}C?t.y-=P*w:t.x+=P*w,d.restore()}},showType3Text:function(e){var t,n,a,l,d=this.ctx,h=this.current,f=h.font,p=h.fontSize,y=h.fontDirection,w=f.vertical?1:-1,_=h.charSpacing,C=h.wordSpacing,S=h.textHScale*y,k=h.fontMatrix||r.FONT_IDENTITY_MATRIX,x=e.length;if(h.textRenderingMode!==r.TextRenderingMode.INVISIBLE&&0!==p){for(this._cachedGetSinglePixelWidth=null,d.save(),d.transform.apply(d,h.textMatrix),d.translate(h.x,h.y),d.scale(S,y),t=0;t<x;++t)if(n=e[t],(0,r.isNum)(n))l=w*n*p/1e3,this.ctx.translate(l,0),h.x+=l*S;else{var E=(n.isSpace?C:0)+_,A=f.charProcOperatorList[n.operatorListId];A?(this.processingType3=n,this.save(),d.scale(p,p),d.transform.apply(d,k),this.executeOperatorList(A),this.restore(),a=r.Util.applyTransform([n.width,0],k)[0]*p+E,d.translate(a,0),h.x+=a*S):(0,r.warn)('Type3 character "'.concat(n.operatorListId,'" is not available.'))}d.restore(),this.processingType3=null}},setCharWidth:function(e,t){},setCharWidthAndBounds:function(e,t,n,r,a,l){this.ctx.rect(n,r,a-n,l-r),this.clip(),this.endPath()},getColorN_Pattern:function(t){var n,r=this;if("TilingPattern"===t[0]){var l=t[1],d=this.baseTransform||this.ctx.mozCurrentTransform.slice(),h={createCanvasGraphics:function(t){return new e(t,r.commonObjs,r.objs,r.canvasFactory,r.webGLContext)}};n=new a.TilingPattern(t,l,this.ctx,h,d)}else n=(0,a.getShadingPatternFromIR)(t);return n},setStrokeColorN:function(){this.current.strokeColor=this.getColorN_Pattern(arguments)},setFillColorN:function(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0},setStrokeRGBColor:function(e,t,n){var a=r.Util.makeCssRgb(e,t,n);this.ctx.strokeStyle=a,this.current.strokeColor=a},setFillRGBColor:function(e,t,n){var a=r.Util.makeCssRgb(e,t,n);this.ctx.fillStyle=a,this.current.fillColor=a,this.current.patternFill=!1},shadingFill:function(e){var t=this.ctx;this.save();var n=(0,a.getShadingPatternFromIR)(e);t.fillStyle=n.getPattern(t,this,!0);var l=t.mozCurrentTransformInverse;if(l){var d=t.canvas,h=d.width,f=d.height,p=r.Util.applyTransform([0,0],l),y=r.Util.applyTransform([0,f],l),w=r.Util.applyTransform([h,0],l),_=r.Util.applyTransform([h,f],l),C=Math.min(p[0],y[0],w[0],_[0]),S=Math.min(p[1],y[1],w[1],_[1]),k=Math.max(p[0],y[0],w[0],_[0]),x=Math.max(p[1],y[1],w[1],_[1]);this.ctx.fillRect(C,S,k-C,x-S)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.restore()},beginInlineImage:function(){(0,r.unreachable)("Should not call beginInlineImage")},beginImageData:function(){(0,r.unreachable)("Should not call beginImageData")},paintFormXObjectBegin:function(e,t){if(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(e)&&6===e.length&&this.transform.apply(this,e),this.baseTransform=this.ctx.mozCurrentTransform,t){var n=t[2]-t[0],r=t[3]-t[1];this.ctx.rect(t[0],t[1],n,r),this.clip(),this.endPath()}},paintFormXObjectEnd:function(){this.restore(),this.baseTransform=this.baseTransformStack.pop()},beginGroup:function(e){this.save();var t=this.ctx;e.isolated||(0,r.info)("TODO: Support non-isolated groups."),e.knockout&&(0,r.warn)("Knockout groups not supported.");var n=t.mozCurrentTransform;if(e.matrix&&t.transform.apply(t,e.matrix),!e.bbox)throw new Error("Bounding box is required.");var a=r.Util.getAxialAlignedBoundingBox(e.bbox,t.mozCurrentTransform),l=[0,0,t.canvas.width,t.canvas.height];a=r.Util.intersect(a,l)||[0,0,0,0];var d=Math.floor(a[0]),h=Math.floor(a[1]),f=Math.max(Math.ceil(a[2])-d,1),y=Math.max(Math.ceil(a[3])-h,1),w=1,_=1;f>4096&&(w=f/4096,f=4096),y>4096&&(_=y/4096,y=4096);var C="groupAt"+this.groupLevel;e.smask&&(C+="_smask_"+this.smaskCounter++%2);var S=this.cachedCanvases.getCanvas(C,f,y,!0),k=S.context;k.scale(1/w,1/_),k.translate(-d,-h),k.transform.apply(k,n),e.smask?this.smaskStack.push({canvas:S.canvas,context:k,offsetX:d,offsetY:h,scaleX:w,scaleY:_,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(d,h),t.scale(w,_)),p(t,k),this.ctx=k,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++,this.current.activeSMask=null},endGroup:function(e){this.groupLevel--;var t=this.ctx;this.ctx=this.groupStack.pop(),void 0!==this.ctx.imageSmoothingEnabled?this.ctx.imageSmoothingEnabled=!1:this.ctx.mozImageSmoothingEnabled=!1,e.smask?this.tempSMask=this.smaskStack.pop():this.ctx.drawImage(t.canvas,0,0),this.restore()},beginAnnotations:function(){this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)},endAnnotations:function(){this.restore()},beginAnnotation:function(e,t,n){if(this.save(),y(this.ctx),this.current=new f,Array.isArray(e)&&4===e.length){var r=e[2]-e[0],a=e[3]-e[1];this.ctx.rect(e[0],e[1],r,a),this.clip(),this.endPath()}this.transform.apply(this,t),this.transform.apply(this,n)},endAnnotation:function(){this.restore()},paintJpegXObject:function(e,t,n){var a=this.processingType3?this.commonObjs.get(e):this.objs.get(e);if(a){this.save();var l=this.ctx;if(l.scale(1/t,-1/n),l.drawImage(a,0,0,a.width,a.height,0,-n,t,n),this.imageLayer){var d=l.mozCurrentTransformInverse,h=this.getCanvasPosition(0,0);this.imageLayer.appendImage({objId:e,left:h[0],top:h[1],width:t/d[0],height:n/d[3]})}this.restore()}else(0,r.warn)("Dependent image isn't ready yet")},paintImageMaskXObject:function(e){var t=this.ctx,r=e.width,a=e.height,l=this.current.fillColor,d=this.current.patternFill,h=this.processingType3;if(h&&void 0===h.compiled&&(h.compiled=r<=1e3&&a<=1e3?function(e){var t,n,r,a,l=e.width,d=e.height,h=l+1,f=new Uint8Array(h*(d+1)),p=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),y=l+7&-8,w=e.data,_=new Uint8Array(y*d),C=0;for(t=0,a=w.length;t<a;t++)for(var S=128,k=w[t];S>0;)_[C++]=k&S?0:255,S>>=1;var x=0;for(0!==_[C=0]&&(f[0]=1,++x),n=1;n<l;n++)_[C]!==_[C+1]&&(f[n]=_[C]?2:1,++x),C++;for(0!==_[C]&&(f[n]=2,++x),t=1;t<d;t++){r=t*h,_[(C=t*y)-y]!==_[C]&&(f[r]=_[C]?1:8,++x);var E=(_[C]?4:0)+(_[C-y]?8:0);for(n=1;n<l;n++)p[E=(E>>2)+(_[C+1]?4:0)+(_[C-y+1]?8:0)]&&(f[r+n]=p[E],++x),C++;if(_[C-y]!==_[C]&&(f[r+n]=_[C]?2:4,++x),x>1e3)return null}for(r=t*h,0!==_[C=y*(d-1)]&&(f[r]=8,++x),n=1;n<l;n++)_[C]!==_[C+1]&&(f[r+n]=_[C]?4:8,++x),C++;if(0!==_[C]&&(f[r+n]=4,++x),x>1e3)return null;var A=new Int32Array([0,h,-1,0,-h,0,0,0,1]),T=[];for(t=0;x&&t<=d;t++){for(var R=t*h,O=R+l;R<O&&!f[R];)R++;if(R!==O){var M,P=[R%h,t],L=f[R],D=R;do{var I=A[L];do{R+=I}while(!f[R]);5!==(M=f[R])&&10!==M?(L=M,f[R]=0):(L=M&51*L>>4,f[R]&=L>>2|L<<2),P.push(R%h),P.push(R/h|0),f[R]||--x}while(D!==R);T.push(P),--t}}return function(e){e.save(),e.scale(1/l,-1/d),e.translate(0,-d),e.beginPath();for(var t=0,n=T.length;t<n;t++){var r=T[t];e.moveTo(r[0],r[1]);for(var a=2,h=r.length;a<h;a+=2)e.lineTo(r[a],r[a+1])}e.fill(),e.beginPath(),e.restore()}}({data:e.data,width:r,height:a}):null),h&&h.compiled)h.compiled(t);else{var f=this.cachedCanvases.getCanvas("maskCanvas",r,a),p=f.context;p.save(),n(p,e),p.globalCompositeOperation="source-in",p.fillStyle=d?l.getPattern(p,this):l,p.fillRect(0,0,r,a),p.restore(),this.paintInlineImageXObject(f.canvas)}},paintImageMaskXObjectRepeat:function(e,t,r,a){var l=e.width,d=e.height,h=this.current.fillColor,f=this.current.patternFill,p=this.cachedCanvases.getCanvas("maskCanvas",l,d),y=p.context;y.save(),n(y,e),y.globalCompositeOperation="source-in",y.fillStyle=f?h.getPattern(y,this):h,y.fillRect(0,0,l,d),y.restore();for(var w=this.ctx,_=0,C=a.length;_<C;_+=2)w.save(),w.transform(t,0,0,r,a[_],a[_+1]),w.scale(1,-1),w.drawImage(p.canvas,0,0,l,d,0,-1,1,1),w.restore()},paintImageMaskXObjectGroup:function(e){for(var t=this.ctx,r=this.current.fillColor,a=this.current.patternFill,l=0,d=e.length;l<d;l++){var h=e[l],f=h.width,p=h.height,y=this.cachedCanvases.getCanvas("maskCanvas",f,p),w=y.context;w.save(),n(w,h),w.globalCompositeOperation="source-in",w.fillStyle=a?r.getPattern(w,this):r,w.fillRect(0,0,f,p),w.restore(),t.save(),t.transform.apply(t,h.transform),t.scale(1,-1),t.drawImage(y.canvas,0,0,f,p,0,-1,1,1),t.restore()}},paintImageXObject:function(e){var t=this.processingType3?this.commonObjs.get(e):this.objs.get(e);t?this.paintInlineImageXObject(t):(0,r.warn)("Dependent image isn't ready yet")},paintImageXObjectRepeat:function(e,t,n,a){var l=this.processingType3?this.commonObjs.get(e):this.objs.get(e);if(l){for(var d=l.width,h=l.height,f=[],p=0,y=a.length;p<y;p+=2)f.push({transform:[t,0,0,n,a[p],a[p+1]],x:0,y:0,w:d,h:h});this.paintInlineImageXObjectGroup(l,f)}else(0,r.warn)("Dependent image isn't ready yet")},paintInlineImageXObject:function(e){var n=e.width,r=e.height,a=this.ctx;this.save(),a.scale(1/n,-1/r);var l,d,h=a.mozCurrentTransformInverse,f=h[0],p=h[1],y=Math.max(Math.sqrt(f*f+p*p),1),w=h[2],_=h[3],C=Math.max(Math.sqrt(w*w+_*_),1);if("function"==typeof HTMLElement&&e instanceof HTMLElement||!e.data)l=e;else{var S=(d=this.cachedCanvases.getCanvas("inlineImage",n,r)).context;t(S,e),l=d.canvas}for(var k=n,x=r,E="prescale1";y>2&&k>1||C>2&&x>1;){var A=k,T=x;y>2&&k>1&&(y/=k/(A=Math.ceil(k/2))),C>2&&x>1&&(C/=x/(T=Math.ceil(x/2))),(S=(d=this.cachedCanvases.getCanvas(E,A,T)).context).clearRect(0,0,A,T),S.drawImage(l,0,0,k,x,0,0,A,T),l=d.canvas,k=A,x=T,E="prescale1"===E?"prescale2":"prescale1"}if(a.drawImage(l,0,0,k,x,0,-r,n,r),this.imageLayer){var R=this.getCanvasPosition(0,-r);this.imageLayer.appendImage({imgData:e,left:R[0],top:R[1],width:n/h[0],height:r/h[3]})}this.restore()},paintInlineImageXObjectGroup:function(e,n){var r=this.ctx,a=e.width,l=e.height,d=this.cachedCanvases.getCanvas("inlineImage",a,l);t(d.context,e);for(var h=0,f=n.length;h<f;h++){var p=n[h];if(r.save(),r.transform.apply(r,p.transform),r.scale(1,-1),r.drawImage(d.canvas,p.x,p.y,p.w,p.h,0,-1,1,1),this.imageLayer){var y=this.getCanvasPosition(p.x,p.y);this.imageLayer.appendImage({imgData:e,left:y[0],top:y[1],width:a,height:l})}r.restore()}},paintSolidColorImageMask:function(){this.ctx.fillRect(0,0,1,1)},paintXObject:function(){(0,r.warn)("Unsupported 'paintXObject' command.")},markPoint:function(e){},markPointProps:function(e,t){},beginMarkedContent:function(e){},beginMarkedContentProps:function(e,t){},endMarkedContent:function(){},beginCompat:function(){},endCompat:function(){},consumePath:function(){var e=this.ctx;this.pendingClip&&(this.pendingClip===A?e.clip("evenodd"):e.clip(),this.pendingClip=null),e.beginPath()},getSinglePixelWidth:function(e){if(null===this._cachedGetSinglePixelWidth){var t=this.ctx.mozCurrentTransformInverse;this._cachedGetSinglePixelWidth=Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1],t[2]*t[2]+t[3]*t[3]))}return this._cachedGetSinglePixelWidth},getCanvasPosition:function(e,t){var n=this.ctx.mozCurrentTransform;return[n[0]*e+n[2]*t+n[4],n[1]*e+n[3]*t+n[5]]}},r.OPS)e.prototype[r.OPS[T]]=e.prototype[T];return e}();t.CanvasGraphics=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getShadingPatternFromIR=function(e){var t=a[e[0]];if(!t)throw new Error("Unknown IR type: ".concat(e[0]));return t.fromIR(e)},t.TilingPattern=void 0;var r=n(1),a={RadialAxial:{fromIR:function(e){var t=e[1],n=e[2],r=e[3],a=e[4],l=e[5],d=e[6];return{type:"Pattern",getPattern:function(e){var h;"axial"===t?h=e.createLinearGradient(r[0],r[1],a[0],a[1]):"radial"===t&&(h=e.createRadialGradient(r[0],r[1],l,a[0],a[1],d));for(var f=0,p=n.length;f<p;++f){var y=n[f];h.addColorStop(y[0],y[1])}return h}}}}},l=function(){function e(e,t,n,r,a,l,d,h){var f,p=t.coords,y=t.colors,w=e.data,_=4*e.width;p[n+1]>p[r+1]&&(f=n,n=r,r=f,f=l,l=d,d=f),p[r+1]>p[a+1]&&(f=r,r=a,a=f,f=d,d=h,h=f),p[n+1]>p[r+1]&&(f=n,n=r,r=f,f=l,l=d,d=f);var C=(p[n]+t.offsetX)*t.scaleX,S=(p[n+1]+t.offsetY)*t.scaleY,k=(p[r]+t.offsetX)*t.scaleX,x=(p[r+1]+t.offsetY)*t.scaleY,E=(p[a]+t.offsetX)*t.scaleX,A=(p[a+1]+t.offsetY)*t.scaleY;if(!(S>=A))for(var T,R,O,M,P,L,D,I,F,j=y[l],N=y[l+1],B=y[l+2],z=y[d],H=y[d+1],U=y[d+2],W=y[h],V=y[h+1],q=y[h+2],G=Math.round(S),K=Math.round(A),Y=G;Y<=K;Y++){Y<x?(T=C-(C-k)*(F=Y<S?0:S===x?1:(S-Y)/(S-x)),R=j-(j-z)*F,O=N-(N-H)*F,M=B-(B-U)*F):(T=k-(k-E)*(F=Y>A?1:x===A?0:(x-Y)/(x-A)),R=z-(z-W)*F,O=H-(H-V)*F,M=U-(U-q)*F),P=C-(C-E)*(F=Y<S?0:Y>A?1:(S-Y)/(S-A)),L=j-(j-W)*F,D=N-(N-V)*F,I=B-(B-q)*F;for(var X=Math.round(Math.min(T,P)),J=Math.round(Math.max(T,P)),Q=_*Y+4*X,Z=X;Z<=J;Z++)F=(F=(T-Z)/(T-P))<0?0:F>1?1:F,w[Q++]=R-(R-L)*F|0,w[Q++]=O-(O-D)*F|0,w[Q++]=M-(M-I)*F|0,w[Q++]=255}}function t(t,n,r){var a,l,d=n.coords,h=n.colors;switch(n.type){case"lattice":var f=n.verticesPerRow,p=Math.floor(d.length/f)-1,y=f-1;for(a=0;a<p;a++)for(var w=a*f,_=0;_<y;_++,w++)e(t,r,d[w],d[w+1],d[w+f],h[w],h[w+1],h[w+f]),e(t,r,d[w+f+1],d[w+1],d[w+f],h[w+f+1],h[w+1],h[w+f]);break;case"triangles":for(a=0,l=d.length;a<l;a+=3)e(t,r,d[a],d[a+1],d[a+2],h[a],h[a+1],h[a+2]);break;default:throw new Error("illegal figure")}}return function(e,n,r,a,l,d,h,f){var p,y,w,_,C=Math.floor(e[0]),S=Math.floor(e[1]),k=Math.ceil(e[2])-C,x=Math.ceil(e[3])-S,E=Math.min(Math.ceil(Math.abs(k*n[0]*1.1)),3e3),A=Math.min(Math.ceil(Math.abs(x*n[1]*1.1)),3e3),T=k/E,R=x/A,O={coords:r,colors:a,offsetX:-C,offsetY:-S,scaleX:1/T,scaleY:1/R},M=E+4,P=A+4;if(f.isEnabled)p=f.drawFigures({width:E,height:A,backgroundColor:d,figures:l,context:O}),(y=h.getCanvas("mesh",M,P,!1)).context.drawImage(p,2,2),p=y.canvas;else{var L=(y=h.getCanvas("mesh",M,P,!1)).context,D=L.createImageData(E,A);if(d){var I=D.data;for(w=0,_=I.length;w<_;w+=4)I[w]=d[0],I[w+1]=d[1],I[w+2]=d[2],I[w+3]=255}for(w=0;w<l.length;w++)t(D,l[w],O);L.putImageData(D,2,2),p=y.canvas}return{canvas:p,offsetX:C-2*T,offsetY:S-2*R,scaleX:T,scaleY:R}}}();a.Mesh={fromIR:function(e){var t=e[2],n=e[3],a=e[4],d=e[5],h=e[6],f=e[8];return{type:"Pattern",getPattern:function(e,p,y){var w;if(y)w=r.Util.singularValueDecompose2dScale(e.mozCurrentTransform);else if(w=r.Util.singularValueDecompose2dScale(p.baseTransform),h){var _=r.Util.singularValueDecompose2dScale(h);w=[w[0]*_[0],w[1]*_[1]]}var C=l(d,w,t,n,a,y?null:f,p.cachedCanvases,p.webGLContext);return y||(e.setTransform.apply(e,p.baseTransform),h&&e.transform.apply(e,h)),e.translate(C.offsetX,C.offsetY),e.scale(C.scaleX,C.scaleY),e.createPattern(C.canvas,"no-repeat")}}}},a.Dummy={fromIR:function(){return{type:"Pattern",getPattern:function(){return"hotpink"}}}};var d=function(){var e=1,t=2;function n(e,t,n,r,a){this.operatorList=e[2],this.matrix=e[3]||[1,0,0,1,0,0],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.canvasGraphicsFactory=r,this.baseTransform=a,this.type="Pattern",this.ctx=n}return n.prototype={createPatternCanvas:function(e){var t=this.operatorList,n=this.bbox,a=this.xstep,l=this.ystep,d=this.paintType,h=this.tilingType,f=this.color,p=this.canvasGraphicsFactory;(0,r.info)("TilingType: "+h);var y=n[0],w=n[1],_=n[2],C=n[3],S=r.Util.singularValueDecompose2dScale(this.matrix),k=r.Util.singularValueDecompose2dScale(this.baseTransform),x=[S[0]*k[0],S[1]*k[1]],E=this.getSizeAndScale(a,this.ctx.canvas.width,x[0]),A=this.getSizeAndScale(l,this.ctx.canvas.height,x[1]),T=e.cachedCanvases.getCanvas("pattern",E.size,A.size,!0),R=T.context,O=p.createCanvasGraphics(R);return O.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(O,d,f),O.transform(E.scale,0,0,A.scale,0,0),O.transform(1,0,0,1,-y,-w),this.clipBbox(O,n,y,w,_,C),O.executeOperatorList(t),this.ctx.transform(1,0,0,1,y,w),this.ctx.scale(1/E.scale,1/A.scale),T.canvas},getSizeAndScale:function(e,t,n){e=Math.abs(e);var r=Math.max(3e3,t),a=Math.ceil(e*n);return a>=r?a=r:n=a/e,{scale:n,size:a}},clipBbox:function(e,t,n,r,a,l){if(Array.isArray(t)&&4===t.length){var d=a-n,h=l-r;e.ctx.rect(n,r,d,h),e.clip(),e.endPath()}},setFillAndStrokeStyleToContext:function(n,a,l){var d=n.ctx,h=n.current;switch(a){case e:var f=this.ctx;d.fillStyle=f.fillStyle,d.strokeStyle=f.strokeStyle,h.fillColor=f.fillStyle,h.strokeColor=f.strokeStyle;break;case t:var p=r.Util.makeCssRgb(l[0],l[1],l[2]);d.fillStyle=p,d.strokeStyle=p,h.fillColor=p,h.strokeColor=p;break;default:throw new r.FormatError("Unsupported paint type: ".concat(a))}},getPattern:function(e,t){(e=this.ctx).setTransform.apply(e,this.baseTransform),e.transform.apply(e,this.matrix);var n=this.createPatternCanvas(t);return e.createPattern(n,"repeat")}},n}();t.TilingPattern=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalWorkerOptions=void 0;var r=Object.create(null);t.GlobalWorkerOptions=r,r.workerPort=void 0===r.workerPort?null:r.workerPort,r.workerSrc=void 0===r.workerSrc?"":r.workerSrc},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHandler=S;var r,a=(r=n(148))&&r.__esModule?r:{default:r},l=n(1);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t,n,r,a,l,d){try{var h=e[l](d),f=h.value}catch(e){return void n(e)}h.done?t(f):Promise.resolve(f).then(r,a)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var l=e.apply(t,n);function d(e){h(l,r,a,d,f,"next",e)}function f(e){h(l,r,a,d,f,"throw",e)}d(void 0)}))}}function p(e,t){return y.apply(this,arguments)}function y(){return(y=f(a.default.mark((function e(t,n){var r,l=arguments;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=l.length>2&&void 0!==l[2]?l[2]:null,t){e.next=3;break}return e.abrupt("return",void 0);case 3:return e.abrupt("return",t.apply(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){if("object"!==d(e))return e;switch(e.name){case"AbortException":return new l.AbortException(e.message);case"MissingPDFException":return new l.MissingPDFException(e.message);case"UnexpectedResponseException":return new l.UnexpectedResponseException(e.message,e.status);default:return new l.UnknownErrorException(e.message,e.details)}}function _(e){return!(e instanceof Error)||e instanceof l.AbortException||e instanceof l.MissingPDFException||e instanceof l.UnexpectedResponseException||e instanceof l.UnknownErrorException?e:new l.UnknownErrorException(e.message,e.toString())}function C(e,t,n){t?e.resolve():e.reject(n)}function S(e,t,n){var r=this;this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.postMessageTransfers=!0,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null);var a=this.callbacksCapabilities=Object.create(null),l=this.actionHandler=Object.create(null);this._onComObjOnMessage=function(e){var t=e.data;if(t.targetName===r.sourceName)if(t.stream)r._processStreamMessage(t);else if(t.isReply){var d=t.callbackId;if(!(t.callbackId in a))throw new Error("Cannot resolve callback ".concat(d));var h=a[d];delete a[d],"error"in t?h.reject(w(t.error)):h.resolve(t.data)}else{if(!(t.action in l))throw new Error("Unknown action from worker: ".concat(t.action));var f=l[t.action];if(t.callbackId){var p=r.sourceName,y=t.sourceName;Promise.resolve().then((function(){return f[0].call(f[1],t.data)})).then((function(e){n.postMessage({sourceName:p,targetName:y,isReply:!0,callbackId:t.callbackId,data:e})}),(function(e){n.postMessage({sourceName:p,targetName:y,isReply:!0,callbackId:t.callbackId,error:_(e)})}))}else t.streamId?r._createStreamSink(t):f[0].call(f[1],t.data)}},n.addEventListener("message",this._onComObjOnMessage)}S.prototype={on:function(e,t,n){var r=this.actionHandler;if(r[e])throw new Error('There is already an actionName called "'.concat(e,'"'));r[e]=[t,n]},send:function(e,t,n){var r={sourceName:this.sourceName,targetName:this.targetName,action:e,data:t};this.postMessage(r,n)},sendWithPromise:function(e,t,n){var r=this.callbackId++,a={sourceName:this.sourceName,targetName:this.targetName,action:e,data:t,callbackId:r},d=(0,l.createPromiseCapability)();this.callbacksCapabilities[r]=d;try{this.postMessage(a,n)}catch(e){d.reject(e)}return d.promise},sendWithStream:function(e,t,n,r){var a=this,d=this.streamId++,h=this.sourceName,f=this.targetName;return new l.ReadableStream({start:function(n){var r=(0,l.createPromiseCapability)();return a.streamControllers[d]={controller:n,startCall:r,isClosed:!1},a.postMessage({sourceName:h,targetName:f,action:e,streamId:d,data:t,desiredSize:n.desiredSize}),r.promise},pull:function(e){var t=(0,l.createPromiseCapability)();return a.streamControllers[d].pullCall=t,a.postMessage({sourceName:h,targetName:f,stream:"pull",streamId:d,desiredSize:e.desiredSize}),t.promise},cancel:function(e){var t=(0,l.createPromiseCapability)();return a.streamControllers[d].cancelCall=t,a.streamControllers[d].isClosed=!0,a.postMessage({sourceName:h,targetName:f,stream:"cancel",reason:e,streamId:d}),t.promise}},n)},_createStreamSink:function(e){var t=this,n=this,r=this.actionHandler[e.action],a=e.streamId,d=e.desiredSize,h=this.sourceName,f=e.sourceName,y=(0,l.createPromiseCapability)(),w=function(e){var n=e.stream,r=e.chunk,l=e.transfers,d=e.success,p=e.reason;t.postMessage({sourceName:h,targetName:f,stream:n,streamId:a,chunk:r,success:d,reason:p},l)},_={enqueue:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0;if(!this.isCancelled){var r=this.desiredSize;this.desiredSize-=t,r>0&&this.desiredSize<=0&&(this.sinkCapability=(0,l.createPromiseCapability)(),this.ready=this.sinkCapability.promise),w({stream:"enqueue",chunk:e,transfers:n})}},close:function(){this.isCancelled||(this.isCancelled=!0,w({stream:"close"}),delete n.streamSinks[a])},error:function(e){this.isCancelled||(this.isCancelled=!0,w({stream:"error",reason:e}))},sinkCapability:y,onPull:null,onCancel:null,isCancelled:!1,desiredSize:d,ready:null};_.sinkCapability.resolve(),_.ready=_.sinkCapability.promise,this.streamSinks[a]=_,p(r[0],[e.data,_],r[1]).then((function(){w({stream:"start_complete",success:!0})}),(function(e){w({stream:"start_complete",success:!1,reason:e})}))},_processStreamMessage:function(e){var t=this,n=this.sourceName,r=e.sourceName,a=e.streamId,d=function(e){var l=e.stream,d=e.success,h=e.reason;t.comObj.postMessage({sourceName:n,targetName:r,stream:l,success:d,streamId:a,reason:h})},h=function(){Promise.all([t.streamControllers[e.streamId].startCall,t.streamControllers[e.streamId].pullCall,t.streamControllers[e.streamId].cancelCall].map((function(e){return e&&(t=e.promise,Promise.resolve(t).catch((function(){})));var t}))).then((function(){delete t.streamControllers[e.streamId]}))};switch(e.stream){case"start_complete":C(this.streamControllers[e.streamId].startCall,e.success,w(e.reason));break;case"pull_complete":C(this.streamControllers[e.streamId].pullCall,e.success,w(e.reason));break;case"pull":if(!this.streamSinks[e.streamId]){d({stream:"pull_complete",success:!0});break}this.streamSinks[e.streamId].desiredSize<=0&&e.desiredSize>0&&this.streamSinks[e.streamId].sinkCapability.resolve(),this.streamSinks[e.streamId].desiredSize=e.desiredSize,p(this.streamSinks[e.streamId].onPull).then((function(){d({stream:"pull_complete",success:!0})}),(function(e){d({stream:"pull_complete",success:!1,reason:e})}));break;case"enqueue":(0,l.assert)(this.streamControllers[e.streamId],"enqueue should have stream controller"),this.streamControllers[e.streamId].isClosed||this.streamControllers[e.streamId].controller.enqueue(e.chunk);break;case"close":if((0,l.assert)(this.streamControllers[e.streamId],"close should have stream controller"),this.streamControllers[e.streamId].isClosed)break;this.streamControllers[e.streamId].isClosed=!0,this.streamControllers[e.streamId].controller.close(),h();break;case"error":(0,l.assert)(this.streamControllers[e.streamId],"error should have stream controller"),this.streamControllers[e.streamId].controller.error(w(e.reason)),h();break;case"cancel_complete":C(this.streamControllers[e.streamId].cancelCall,e.success,w(e.reason)),h();break;case"cancel":if(!this.streamSinks[e.streamId])break;p(this.streamSinks[e.streamId].onCancel,[w(e.reason)]).then((function(){d({stream:"cancel_complete",success:!0})}),(function(e){d({stream:"cancel_complete",success:!1,reason:e})})),this.streamSinks[e.streamId].sinkCapability.reject(w(e.reason)),this.streamSinks[e.streamId].isCancelled=!0,delete this.streamSinks[e.streamId];break;default:throw new Error("Unexpected stream case")}},postMessage:function(e,t){t&&this.postMessageTransfers?this.comObj.postMessage(e,t):this.comObj.postMessage(e)},destroy:function(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var r=n(1),a=n(159);function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(0,r.assert)("string"==typeof t,"Metadata: input is not a string"),t=this._repair(t);var n=(new a.SimpleXMLParser).parseFromString(t);this._metadata=Object.create(null),n&&this._parse(n)}var t,n,d;return t=e,(n=[{key:"_repair",value:function(e){return e.replace(/^([^<]+)/,"").replace(/>\\376\\377([^<]+)/g,(function(e,t){for(var n=t.replace(/\\([0-3])([0-7])([0-7])/g,(function(e,t,n,r){return String.fromCharCode(64*t+8*n+1*r)})).replace(/&(amp|apos|gt|lt|quot);/g,(function(e,t){switch(t){case"amp":return"&";case"apos":return"'";case"gt":return">";case"lt":return"<";case"quot":return'"'}throw new Error("_repair: ".concat(t," isn't defined."))})),r="",a=0,l=n.length;a<l;a+=2){var d=256*n.charCodeAt(a)+n.charCodeAt(a+1);r+=d>=32&&d<127&&60!==d&&62!==d&&38!==d?String.fromCharCode(d):"&#x"+(65536+d).toString(16).substring(1)+";"}return">"+r}))}},{key:"_parse",value:function(e){var t=e.documentElement;if("rdf:rdf"!==t.nodeName.toLowerCase())for(t=t.firstChild;t&&"rdf:rdf"!==t.nodeName.toLowerCase();)t=t.nextSibling;var n=t?t.nodeName.toLowerCase():null;if(t&&"rdf:rdf"===n&&t.hasChildNodes())for(var r=t.childNodes,a=0,l=r.length;a<l;a++){var d=r[a];if("rdf:description"===d.nodeName.toLowerCase())for(var h=0,f=d.childNodes.length;h<f;h++)if("#text"!==d.childNodes[h].nodeName.toLowerCase()){var p=d.childNodes[h],y=p.nodeName.toLowerCase();this._metadata[y]=p.textContent.trim()}}}},{key:"get",value:function(e){var t=this._metadata[e];return void 0!==t?t:null}},{key:"getAll",value:function(){return this._metadata}},{key:"has",value:function(e){return void 0!==this._metadata[e]}}])&&l(t.prototype,n),d&&l(t,d),e}();t.Metadata=d},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,l=void 0;try{for(var d,h=e[Symbol.iterator]();!(r=(d=h.next()).done)&&(n.push(d.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==h.return||h.return()}finally{if(a)throw l}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e,t,n){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t,n){return t&&y(e.prototype,t),n&&y(e,n),e}Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleXMLParser=void 0;var _=0,C=-2,S=-3,k=-4,x=-5,E=-6,A=-9;function T(e,t){var n=e[t];return" "===n||"\n"===n||"\r"===n||"\t"===n}var R=function(){function e(){p(this,e)}return w(e,[{key:"_resolveEntities",value:function(e){var t=this;return e.replace(/&([^;]+);/g,(function(e,n){if("#x"===n.substring(0,2))return String.fromCharCode(parseInt(n.substring(2),16));if("#"===n.substring(0,1))return String.fromCharCode(parseInt(n.substring(1),10));switch(n){case"lt":return"<";case"gt":return">";case"amp":return"&";case"quot":return'"'}return t.onResolveEntity(n)}))}},{key:"_parseContent",value:function(e,t){var n,r=t,a=[];function l(){for(;r<e.length&&T(e,r);)++r}for(;r<e.length&&!T(e,r)&&">"!==e[r]&&"/"!==e[r];)++r;for(n=e.substring(t,r),l();r<e.length&&">"!==e[r]&&"/"!==e[r]&&"?"!==e[r];){l();for(var d,h="";r<e.length&&!T(e,r)&&"="!==e[r];)h+=e[r],++r;if(l(),"="!==e[r])return null;++r,l();var f=e[r];if('"'!==f&&"'"!==f)return null;var p=e.indexOf(f,++r);if(p<0)return null;d=e.substring(r,p),a.push({name:h,value:this._resolveEntities(d)}),r=p+1,l()}return{name:n,attributes:a,parsed:r-t}}},{key:"_parseProcessingInstruction",value:function(e,t){for(var n,r=t;r<e.length&&!T(e,r)&&">"!==e[r]&&"/"!==e[r];)++r;n=e.substring(t,r),function(){for(;r<e.length&&T(e,r);)++r}();for(var a=r;r<e.length&&("?"!==e[r]||">"!==e[r+1]);)++r;return{name:n,value:e.substring(a,r),parsed:r-t}}},{key:"parseXml",value:function(e){for(var t=0;t<e.length;){var n=t;if("<"===e[t]){var r=void 0;switch(e[++n]){case"/":if(++n,(r=e.indexOf(">",n))<0)return void this.onError(A);this.onEndElement(e.substring(n,r)),n=r+1;break;case"?":++n;var a=this._parseProcessingInstruction(e,n);if("?>"!==e.substring(n+a.parsed,n+a.parsed+2))return void this.onError(S);this.onPi(a.name,a.value),n+=a.parsed+2;break;case"!":if("--"===e.substring(n+1,n+3)){if((r=e.indexOf("--\x3e",n+3))<0)return void this.onError(x);this.onComment(e.substring(n+3,r)),n=r+3}else if("[CDATA["===e.substring(n+1,n+8)){if((r=e.indexOf("]]>",n+8))<0)return void this.onError(C);this.onCdata(e.substring(n+8,r)),n=r+3}else{if("DOCTYPE"!==e.substring(n+1,n+8))return void this.onError(E);var l=e.indexOf("[",n+8),d=!1;if((r=e.indexOf(">",n+8))<0)return void this.onError(k);if(l>0&&r>l){if((r=e.indexOf("]>",n+8))<0)return void this.onError(k);d=!0}var h=e.substring(n+8,r+(d?1:0));this.onDoctype(h),n=r+(d?2:1)}break;default:var f=this._parseContent(e,n);if(null===f)return void this.onError(E);var p=!1;if("/>"===e.substring(n+f.parsed,n+f.parsed+2))p=!0;else if(">"!==e.substring(n+f.parsed,n+f.parsed+1))return void this.onError(A);this.onBeginElement(f.name,f.attributes,p),n+=f.parsed+(p?2:1)}}else{for(;n<e.length&&"<"!==e[n];)n++;var y=e.substring(t,n);this.onText(this._resolveEntities(y))}t=n}}},{key:"onResolveEntity",value:function(e){return"&".concat(e,";")}},{key:"onPi",value:function(e,t){}},{key:"onComment",value:function(e){}},{key:"onCdata",value:function(e){}},{key:"onDoctype",value:function(e){}},{key:"onText",value:function(e){}},{key:"onBeginElement",value:function(e,t,n){}},{key:"onEndElement",value:function(e){}},{key:"onError",value:function onError(e){}}]),e}(),O=function(){function e(t,n){p(this,e),this.nodeName=t,this.nodeValue=n,Object.defineProperty(this,"parentNode",{value:null,writable:!0})}return w(e,[{key:"hasChildNodes",value:function(){return this.childNodes&&this.childNodes.length>0}},{key:"firstChild",get:function(){return this.childNodes&&this.childNodes[0]}},{key:"nextSibling",get:function(){var e=this.parentNode.childNodes;if(e){var t=e.indexOf(this);if(-1!==t)return e[t+1]}}},{key:"textContent",get:function(){return this.childNodes?this.childNodes.map((function(e){return e.textContent})).join(""):this.nodeValue||""}}]),e}(),M=function(e){function t(){var e;return p(this,t),(e=l(this,h(t).call(this)))._currentFragment=null,e._stack=null,e._errorCode=_,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,e),w(t,[{key:"parseFromString",value:function(e){if(this._currentFragment=[],this._stack=[],this._errorCode=_,this.parseXml(e),this._errorCode===_){var t=a(this._currentFragment,1)[0];if(t)return{documentElement:t}}}},{key:"onResolveEntity",value:function(e){switch(e){case"apos":return"'"}return d(h(t.prototype),"onResolveEntity",this).call(this,e)}},{key:"onText",value:function(e){if(!function(e){for(var t=0,n=e.length;t<n;t++)if(!T(e,t))return!1;return!0}(e)){var t=new O("#text",e);this._currentFragment.push(t)}}},{key:"onCdata",value:function(e){var t=new O("#text",e);this._currentFragment.push(t)}},{key:"onBeginElement",value:function(e,t,n){var r=new O(e);r.childNodes=[],this._currentFragment.push(r),n||(this._stack.push(this._currentFragment),this._currentFragment=r.childNodes)}},{key:"onEndElement",value:function(e){this._currentFragment=this._stack.pop()||[];var t=this._currentFragment[this._currentFragment.length-1];if(t)for(var n=0,r=t.childNodes.length;n<r;n++)t.childNodes[n].parentNode=t}},{key:"onError",value:function onError(e){this._errorCode=e}}]),t}(R);t.SimpleXMLParser=M},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PDFDataTransportStream=void 0;var r,a=(r=n(148))&&r.__esModule?r:{default:r},l=n(1);function d(e,t,n,r,a,l,d){try{var h=e[l](d),f=h.value}catch(e){return void n(e)}h.done?t(f):Promise.resolve(f).then(r,a)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var l=e.apply(t,n);function h(e){d(l,r,a,h,f,"next",e)}function f(e){d(l,r,a,h,f,"throw",e)}h(void 0)}))}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}var w=function(){function e(t,n){var r=this;f(this,e),(0,l.assert)(n),this._queuedChunks=[],this._progressiveDone=t.progressiveDone||!1;var a=t.initialData;if(a&&a.length>0){var d=new Uint8Array(a).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=n,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._contentLength=t.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((function(e,t){r._onReceiveData({begin:e,chunk:t})})),this._pdfDataRangeTransport.addProgressListener((function(e,t){r._onProgress({loaded:e,total:t})})),this._pdfDataRangeTransport.addProgressiveReadListener((function(e){r._onReceiveData({chunk:e})})),this._pdfDataRangeTransport.addProgressiveDoneListener((function(){r._onProgressiveDone()})),this._pdfDataRangeTransport.transportReady()}return y(e,[{key:"_onReceiveData",value:function(e){var t=new Uint8Array(e.chunk).buffer;if(void 0===e.begin)this._fullRequestReader?this._fullRequestReader._enqueue(t):this._queuedChunks.push(t);else{var n=this._rangeReaders.some((function(n){return n._begin===e.begin&&(n._enqueue(t),!0)}));(0,l.assert)(n)}}},{key:"_onProgress",value:function(e){if(void 0===e.total){var t=this._rangeReaders[0];t&&t.onProgress&&t.onProgress({loaded:e.loaded})}else{var n=this._fullRequestReader;n&&n.onProgress&&n.onProgress({loaded:e.loaded,total:e.total})}}},{key:"_onProgressiveDone",value:function(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}},{key:"_removeRangeReader",value:function(e){var t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}},{key:"getFullReader",value:function(){(0,l.assert)(!this._fullRequestReader);var e=this._queuedChunks;return this._queuedChunks=null,new _(this,e,this._progressiveDone)}},{key:"getRangeReader",value:function(e,t){if(t<=this._progressiveDataLength)return null;var n=new C(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}},{key:"cancelAllRequests",value:function(e){this._fullRequestReader&&this._fullRequestReader.cancel(e),this._rangeReaders.slice(0).forEach((function(t){t.cancel(e)})),this._pdfDataRangeTransport.abort()}},{key:"_progressiveDataLength",get:function(){return this._fullRequestReader?this._fullRequestReader._loaded:0}}]),e}();t.PDFDataTransportStream=w;var _=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];f(this,e),this._stream=t,this._done=r||!1,this._filename=null,this._queuedChunks=n||[],this._loaded=0;var a=!0,l=!1,d=void 0;try{for(var h,p=this._queuedChunks[Symbol.iterator]();!(a=(h=p.next()).done);a=!0){var y=h.value;this._loaded+=y.byteLength}}catch(e){l=!0,d=e}finally{try{a||null==p.return||p.return()}finally{if(l)throw d}}this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}var t;return y(e,[{key:"_enqueue",value:function(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}},{key:"read",value:(t=h(a.default.mark((function e(){var t,n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this._queuedChunks.length>0)){e.next=3;break}return t=this._queuedChunks.shift(),e.abrupt("return",{value:t,done:!1});case 3:if(!this._done){e.next=5;break}return e.abrupt("return",{value:void 0,done:!0});case 5:return n=(0,l.createPromiseCapability)(),this._requests.push(n),e.abrupt("return",n.promise);case 8:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"cancel",value:function(e){this._done=!0,this._requests.forEach((function(e){e.resolve({value:void 0,done:!0})})),this._requests=[]}},{key:"progressiveDone",value:function(){this._done||(this._done=!0)}},{key:"headersReady",get:function(){return this._headersReady}},{key:"filename",get:function(){return this._filename}},{key:"isRangeSupported",get:function(){return this._stream._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._stream._isStreamingSupported}},{key:"contentLength",get:function(){return this._stream._contentLength}}]),e}(),C=function(){function e(t,n,r){f(this,e),this._stream=t,this._begin=n,this._end=r,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}var t;return y(e,[{key:"_enqueue",value:function(e){this._done||(0===this._requests.length?this._queuedChunk=e:(this._requests.shift().resolve({value:e,done:!1}),this._requests.forEach((function(e){e.resolve({value:void 0,done:!0})})),this._requests=[]),this._done=!0,this._stream._removeRangeReader(this))}},{key:"read",value:(t=h(a.default.mark((function e(){var t,n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._queuedChunk){e.next=4;break}return t=this._queuedChunk,this._queuedChunk=null,e.abrupt("return",{value:t,done:!1});case 4:if(!this._done){e.next=6;break}return e.abrupt("return",{value:void 0,done:!0});case 6:return n=(0,l.createPromiseCapability)(),this._requests.push(n),e.abrupt("return",n.promise);case 9:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"cancel",value:function(e){this._done=!0,this._requests.forEach((function(e){e.resolve({value:void 0,done:!0})})),this._requests=[],this._stream._removeRangeReader(this)}},{key:"isStreamingSupported",get:function(){return!1}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLContext=void 0;var r=n(1);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(t){var n=t.enable,r=void 0!==n&&n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._enabled=!0===r}var t,n,l;return t=e,(n=[{key:"composeSMask",value:function(e){var t=e.layer,n=e.mask,r=e.properties;return d.composeSMask(t,n,r)}},{key:"drawFigures",value:function(e){var t=e.width,n=e.height,r=e.backgroundColor,a=e.figures,l=e.context;return d.drawFigures(t,n,r,a,l)}},{key:"clear",value:function(){d.cleanup()}},{key:"isEnabled",get:function(){var e=this._enabled;return e&&(e=d.tryInitGL()),(0,r.shadow)(this,"isEnabled",e)}}])&&a(t.prototype,n),l&&a(t,l),e}();t.WebGLContext=l;var d=function(){function e(e,t,n){var r=e.createShader(n);if(e.shaderSource(r,t),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS)){var a=e.getShaderInfoLog(r);throw new Error("Error during shader compilation: "+a)}return r}function t(t,n){return e(t,n,t.VERTEX_SHADER)}function n(t,n){return e(t,n,t.FRAGMENT_SHADER)}function r(e,t){for(var n=e.createProgram(),r=0,a=t.length;r<a;++r)e.attachShader(n,t[r]);if(e.linkProgram(n),!e.getProgramParameter(n,e.LINK_STATUS)){var l=e.getProgramInfoLog(n);throw new Error("Error during program linking: "+l)}return n}function a(e,t,n){e.activeTexture(n);var r=e.createTexture();return e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),r}var l,d;function h(){l||(d=document.createElement("canvas"),l=d.getContext("webgl",{premultipliedalpha:!1}))}var f=null,p=null;return{tryInitGL:function(){try{return h(),!!l}catch(e){}return!1},composeSMask:function(e,p,y){var w=e.width,_=e.height;f||function(){var e,a;h(),e=d,d=null,a=l,l=null;var p=r(a,[t(a,"  attribute vec2 a_position;                                      attribute vec2 a_texCoord;                                                                                                      uniform vec2 u_resolution;                                                                                                      varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec2 clipSpace = (a_position / u_resolution) * 2.0 - 1.0;       gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_texCoord = a_texCoord;                                      }                                                             "),n(a,"  precision mediump float;                                                                                                        uniform vec4 u_backdrop;                                        uniform int u_subtype;                                          uniform sampler2D u_image;                                      uniform sampler2D u_mask;                                                                                                       varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec4 imageColor = texture2D(u_image, v_texCoord);               vec4 maskColor = texture2D(u_mask, v_texCoord);                 if (u_backdrop.a > 0.0) {                                         maskColor.rgb = maskColor.rgb * maskColor.a +                                   u_backdrop.rgb * (1.0 - maskColor.a);         }                                                               float lum;                                                      if (u_subtype == 0) {                                             lum = maskColor.a;                                            } else {                                                          lum = maskColor.r * 0.3 + maskColor.g * 0.59 +                        maskColor.b * 0.11;                                     }                                                               imageColor.a *= lum;                                            imageColor.rgb *= imageColor.a;                                 gl_FragColor = imageColor;                                    }                                                             ")]);a.useProgram(p);var y={};y.gl=a,y.canvas=e,y.resolutionLocation=a.getUniformLocation(p,"u_resolution"),y.positionLocation=a.getAttribLocation(p,"a_position"),y.backdropLocation=a.getUniformLocation(p,"u_backdrop"),y.subtypeLocation=a.getUniformLocation(p,"u_subtype");var w=a.getAttribLocation(p,"a_texCoord"),_=a.getUniformLocation(p,"u_image"),C=a.getUniformLocation(p,"u_mask"),S=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,S),a.bufferData(a.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),a.STATIC_DRAW),a.enableVertexAttribArray(w),a.vertexAttribPointer(w,2,a.FLOAT,!1,0,0),a.uniform1i(_,0),a.uniform1i(C,1),f=y}();var C=f,S=C.canvas,k=C.gl;S.width=w,S.height=_,k.viewport(0,0,k.drawingBufferWidth,k.drawingBufferHeight),k.uniform2f(C.resolutionLocation,w,_),y.backdrop?k.uniform4f(C.resolutionLocation,y.backdrop[0],y.backdrop[1],y.backdrop[2],1):k.uniform4f(C.resolutionLocation,0,0,0,0),k.uniform1i(C.subtypeLocation,"Luminosity"===y.subtype?1:0);var x=a(k,e,k.TEXTURE0),E=a(k,p,k.TEXTURE1),A=k.createBuffer();return k.bindBuffer(k.ARRAY_BUFFER,A),k.bufferData(k.ARRAY_BUFFER,new Float32Array([0,0,w,0,0,_,0,_,w,0,w,_]),k.STATIC_DRAW),k.enableVertexAttribArray(C.positionLocation),k.vertexAttribPointer(C.positionLocation,2,k.FLOAT,!1,0,0),k.clearColor(0,0,0,0),k.enable(k.BLEND),k.blendFunc(k.ONE,k.ONE_MINUS_SRC_ALPHA),k.clear(k.COLOR_BUFFER_BIT),k.drawArrays(k.TRIANGLES,0,6),k.flush(),k.deleteTexture(x),k.deleteTexture(E),k.deleteBuffer(A),S},drawFigures:function(e,a,f,y,w){p||function(){var e,a;h(),e=d,d=null,a=l,l=null;var f=r(a,[t(a,"  attribute vec2 a_position;                                      attribute vec3 a_color;                                                                                                         uniform vec2 u_resolution;                                      uniform vec2 u_scale;                                           uniform vec2 u_offset;                                                                                                          varying vec4 v_color;                                                                                                           void main() {                                                     vec2 position = (a_position + u_offset) * u_scale;              vec2 clipSpace = (position / u_resolution) * 2.0 - 1.0;         gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_color = vec4(a_color / 255.0, 1.0);                         }                                                             "),n(a,"  precision mediump float;                                                                                                        varying vec4 v_color;                                                                                                           void main() {                                                     gl_FragColor = v_color;                                       }                                                             ")]);a.useProgram(f);var y={};y.gl=a,y.canvas=e,y.resolutionLocation=a.getUniformLocation(f,"u_resolution"),y.scaleLocation=a.getUniformLocation(f,"u_scale"),y.offsetLocation=a.getUniformLocation(f,"u_offset"),y.positionLocation=a.getAttribLocation(f,"a_position"),y.colorLocation=a.getAttribLocation(f,"a_color"),p=y}();var _=p,C=_.canvas,S=_.gl;C.width=e,C.height=a,S.viewport(0,0,S.drawingBufferWidth,S.drawingBufferHeight),S.uniform2f(_.resolutionLocation,e,a);var k,x,E,A=0;for(k=0,x=y.length;k<x;k++)switch(y[k].type){case"lattice":A+=((E=y[k].coords.length/y[k].verticesPerRow|0)-1)*(y[k].verticesPerRow-1)*6;break;case"triangles":A+=y[k].coords.length}var T=new Float32Array(2*A),R=new Uint8Array(3*A),O=w.coords,M=w.colors,P=0,L=0;for(k=0,x=y.length;k<x;k++){var D=y[k],I=D.coords,F=D.colors;switch(D.type){case"lattice":var j=D.verticesPerRow;E=I.length/j|0;for(var N=1;N<E;N++)for(var B=N*j+1,z=1;z<j;z++,B++)T[P]=O[I[B-j-1]],T[P+1]=O[I[B-j-1]+1],T[P+2]=O[I[B-j]],T[P+3]=O[I[B-j]+1],T[P+4]=O[I[B-1]],T[P+5]=O[I[B-1]+1],R[L]=M[F[B-j-1]],R[L+1]=M[F[B-j-1]+1],R[L+2]=M[F[B-j-1]+2],R[L+3]=M[F[B-j]],R[L+4]=M[F[B-j]+1],R[L+5]=M[F[B-j]+2],R[L+6]=M[F[B-1]],R[L+7]=M[F[B-1]+1],R[L+8]=M[F[B-1]+2],T[P+6]=T[P+2],T[P+7]=T[P+3],T[P+8]=T[P+4],T[P+9]=T[P+5],T[P+10]=O[I[B]],T[P+11]=O[I[B]+1],R[L+9]=R[L+3],R[L+10]=R[L+4],R[L+11]=R[L+5],R[L+12]=R[L+6],R[L+13]=R[L+7],R[L+14]=R[L+8],R[L+15]=M[F[B]],R[L+16]=M[F[B]+1],R[L+17]=M[F[B]+2],P+=12,L+=18;break;case"triangles":for(var H=0,U=I.length;H<U;H++)T[P]=O[I[H]],T[P+1]=O[I[H]+1],R[L]=M[F[H]],R[L+1]=M[F[H]+1],R[L+2]=M[F[H]+2],P+=2,L+=3}}f?S.clearColor(f[0]/255,f[1]/255,f[2]/255,1):S.clearColor(0,0,0,0),S.clear(S.COLOR_BUFFER_BIT);var W=S.createBuffer();S.bindBuffer(S.ARRAY_BUFFER,W),S.bufferData(S.ARRAY_BUFFER,T,S.STATIC_DRAW),S.enableVertexAttribArray(_.positionLocation),S.vertexAttribPointer(_.positionLocation,2,S.FLOAT,!1,0,0);var V=S.createBuffer();return S.bindBuffer(S.ARRAY_BUFFER,V),S.bufferData(S.ARRAY_BUFFER,R,S.STATIC_DRAW),S.enableVertexAttribArray(_.colorLocation),S.vertexAttribPointer(_.colorLocation,3,S.UNSIGNED_BYTE,!1,0,0),S.uniform2f(_.scaleLocation,w.scaleX,w.scaleY),S.uniform2f(_.offsetLocation,w.offsetX,w.offsetY),S.drawArrays(S.TRIANGLES,0,A),S.flush(),S.deleteBuffer(W),S.deleteBuffer(V),C},cleanup:function(){f&&f.canvas&&(f.canvas.width=0,f.canvas.height=0),p&&p.canvas&&(p.canvas.width=0,p.canvas.height=0),f=null,p=null}}}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderTextLayer=void 0;var r,a=n(1),l=(r=n(3))&&r.__esModule?r:{default:r},d=function(){var e=/\S/,t=["left: ",0,"px; top: ",0,"px; font-size: ",0,"px; font-family: ","",";"];function n(n,r,l){var d,h=document.createElement("span"),f={style:null,angle:0,canvasWidth:0,isWhitespace:!1,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1};if(n._textDivs.push(h),d=r.str,!e.test(d))return f.isWhitespace=!0,void n._textDivProperties.set(h,f);var p=a.Util.transform(n._viewport.transform,r.transform),y=Math.atan2(p[1],p[0]),w=l[r.fontName];w.vertical&&(y+=Math.PI/2);var _,C,S=Math.sqrt(p[2]*p[2]+p[3]*p[3]),k=S;if(w.ascent?k=w.ascent*k:w.descent&&(k=(1+w.descent)*k),0===y?(_=p[4],C=p[5]-k):(_=p[4]+k*Math.sin(y),C=p[5]-k*Math.cos(y)),t[1]=_,t[3]=C,t[5]=S,t[7]=w.fontFamily,f.style=t.join(""),h.setAttribute("style",f.style),h.textContent=r.str,n._fontInspectorEnabled&&(h.dataset.fontName=r.fontName),0!==y&&(f.angle=y*(180/Math.PI)),r.str.length>1&&(w.vertical?f.canvasWidth=r.height*n._viewport.scale:f.canvasWidth=r.width*n._viewport.scale),n._textDivProperties.set(h,f),n._textContentStream&&n._layoutText(h),n._enhanceTextSelection){var x=1,E=0;0!==y&&(x=Math.cos(y),E=Math.sin(y));var A,T,R=(w.vertical?r.height:r.width)*n._viewport.scale,O=S;0!==y?(A=[x,E,-E,x,_,C],T=a.Util.getAxialAlignedBoundingBox([0,0,R,O],A)):T=[_,C,_+R,C+O],n._bounds.push({left:T[0],top:T[1],right:T[2],bottom:T[3],div:h,size:[R,O],m:A})}}function r(e){if(!e._canceled){var t=e._textDivs,n=e._capability,r=t.length;if(r>1e5)return e._renderingDone=!0,void n.resolve();if(!e._textContentStream)for(var a=0;a<r;a++)e._layoutText(t[a]);e._renderingDone=!0,n.resolve()}}function d(e){for(var t=e._bounds,n=e._viewport,r=function(e,t,n){var r=n.map((function(e,t){return{x1:e.left,y1:e.top,x2:e.right,y2:e.bottom,index:t,x1New:void 0,x2New:void 0}}));h(e,r);var a=new Array(n.length);return r.forEach((function(e){var t=e.index;a[t]={left:e.x1New,top:0,right:e.x2New,bottom:0}})),n.map((function(t,n){var l=a[n],d=r[n];d.x1=t.top,d.y1=e-l.right,d.x2=t.bottom,d.y2=e-l.left,d.index=n,d.x1New=void 0,d.x2New=void 0})),h(t,r),r.forEach((function(e){var t=e.index;a[t].top=e.x1New,a[t].bottom=e.x2New})),a}(n.width,n.height,t),l=0;l<r.length;l++){var d=t[l].div,f=e._textDivProperties.get(d);if(0!==f.angle){var p=r[l],y=t[l],w=y.m,_=w[0],C=w[1],S=[[0,0],[0,y.size[1]],[y.size[0],0],y.size],k=new Float64Array(64);S.forEach((function(e,t){var n=a.Util.applyTransform(e,w);k[t+0]=_&&(p.left-n[0])/_,k[t+4]=C&&(p.top-n[1])/C,k[t+8]=_&&(p.right-n[0])/_,k[t+12]=C&&(p.bottom-n[1])/C,k[t+16]=C&&(p.left-n[0])/-C,k[t+20]=_&&(p.top-n[1])/_,k[t+24]=C&&(p.right-n[0])/-C,k[t+28]=_&&(p.bottom-n[1])/_,k[t+32]=_&&(p.left-n[0])/-_,k[t+36]=C&&(p.top-n[1])/-C,k[t+40]=_&&(p.right-n[0])/-_,k[t+44]=C&&(p.bottom-n[1])/-C,k[t+48]=C&&(p.left-n[0])/C,k[t+52]=_&&(p.top-n[1])/-_,k[t+56]=C&&(p.right-n[0])/C,k[t+60]=_&&(p.bottom-n[1])/-_}));var x=function(e,t,n){for(var r=0,a=0;a<n;a++){var l=e[t++];l>0&&(r=r?Math.min(l,r):l)}return r},E=1+Math.min(Math.abs(_),Math.abs(C));f.paddingLeft=x(k,32,16)/E,f.paddingTop=x(k,48,16)/E,f.paddingRight=x(k,0,16)/E,f.paddingBottom=x(k,16,16)/E,e._textDivProperties.set(d,f)}else f.paddingLeft=t[l].left-r[l].left,f.paddingTop=t[l].top-r[l].top,f.paddingRight=r[l].right-t[l].right,f.paddingBottom=r[l].bottom-t[l].bottom,e._textDivProperties.set(d,f)}}function h(e,t){t.sort((function(e,t){return e.x1-t.x1||e.index-t.index}));var n=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];t.forEach((function(e){for(var t=0;t<n.length&&n[t].end<=e.y1;)t++;for(var r,a,l=n.length-1;l>=0&&n[l].start>=e.y2;)l--;var d,h,f=-1/0;for(d=t;d<=l;d++){var p;(p=(a=(r=n[d]).boundary).x2>e.x1?a.index>e.index?a.x1New:e.x1:void 0===a.x2New?(a.x2+e.x1)/2:a.x2New)>f&&(f=p)}for(e.x1New=f,d=t;d<=l;d++)void 0===(a=(r=n[d]).boundary).x2New?a.x2>e.x1?a.index>e.index&&(a.x2New=a.x2):a.x2New=f:a.x2New>f&&(a.x2New=Math.max(f,a.x2));var y=[],w=null;for(d=t;d<=l;d++){var _=(a=(r=n[d]).boundary).x2>e.x2?a:e;w===_?y[y.length-1].end=r.end:(y.push({start:r.start,end:r.end,boundary:_}),w=_)}for(n[t].start<e.y1&&(y[0].start=e.y1,y.unshift({start:n[t].start,end:e.y1,boundary:n[t].boundary})),e.y2<n[l].end&&(y[y.length-1].end=e.y2,y.push({start:e.y2,end:n[l].end,boundary:n[l].boundary})),d=t;d<=l;d++)if(void 0===(a=(r=n[d]).boundary).x2New){var C=!1;for(h=t-1;!C&&h>=0&&n[h].start>=a.y1;h--)C=n[h].boundary===a;for(h=l+1;!C&&h<n.length&&n[h].end<=a.y2;h++)C=n[h].boundary===a;for(h=0;!C&&h<y.length;h++)C=y[h].boundary===a;C||(a.x2New=f)}Array.prototype.splice.apply(n,[t,l-t+1].concat(y))})),n.forEach((function(t){var n=t.boundary;void 0===n.x2New&&(n.x2New=Math.max(e,n.x2))}))}function f(e){var t=this,n=e.textContent,r=e.textContentStream,d=e.container,h=e.viewport,f=e.textDivs,p=e.textContentItemsStr,y=e.enhanceTextSelection;this._textContent=n,this._textContentStream=r,this._container=d,this._viewport=h,this._textDivs=f||[],this._textContentItemsStr=p||[],this._enhanceTextSelection=!!y,this._fontInspectorEnabled=!(!l.default.FontInspector||!l.default.FontInspector.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,a.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._capability.promise.finally((function(){t._layoutTextCtx&&(t._layoutTextCtx.canvas.width=0,t._layoutTextCtx.canvas.height=0,t._layoutTextCtx=null)}))}return f.prototype={get promise(){return this._capability.promise},cancel:function(){this._canceled=!0,this._reader&&(this._reader.cancel(new a.AbortException("TextLayer task cancelled.")),this._reader=null),null!==this._renderTimer&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))},_processItems:function(e,t){for(var r=0,a=e.length;r<a;r++)this._textContentItemsStr.push(e[r].str),n(this,e[r],t)},_layoutText:function(e){var t=this._container,n=this._textDivProperties.get(e);if(!n.isWhitespace){var r=e.style.fontSize,a=e.style.fontFamily;r===this._layoutTextLastFontSize&&a===this._layoutTextLastFontFamily||(this._layoutTextCtx.font=r+" "+a,this._layoutTextLastFontSize=r,this._layoutTextLastFontFamily=a);var l=this._layoutTextCtx.measureText(e.textContent).width,d="";0!==n.canvasWidth&&l>0&&(n.scale=n.canvasWidth/l,d="scaleX(".concat(n.scale,")")),0!==n.angle&&(d="rotate(".concat(n.angle,"deg) ").concat(d)),d.length>0&&(n.originalTransform=d,e.style.transform=d),this._textDivProperties.set(e,n),t.appendChild(e)}},_render:function(e){var t=this,n=(0,a.createPromiseCapability)(),l=Object.create(null),d=document.createElement("canvas");if(d.mozOpaque=!0,this._layoutTextCtx=d.getContext("2d",{alpha:!1}),this._textContent){var h=this._textContent.items,f=this._textContent.styles;this._processItems(h,f),n.resolve()}else{if(!this._textContentStream)throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');this._reader=this._textContentStream.getReader(),function e(){t._reader.read().then((function(r){var a=r.value;r.done?n.resolve():(Object.assign(l,a.styles),t._processItems(a.items,l),e())}),n.reject)}()}n.promise.then((function(){l=null,e?t._renderTimer=setTimeout((function(){r(t),t._renderTimer=null}),e):r(t)}),this._capability.reject)},expandTextDivs:function(e){if(this._enhanceTextSelection&&this._renderingDone){null!==this._bounds&&(d(this),this._bounds=null);for(var t=0,n=this._textDivs.length;t<n;t++){var r=this._textDivs[t],a=this._textDivProperties.get(r);if(!a.isWhitespace)if(e){var l="",h="";1!==a.scale&&(l="scaleX("+a.scale+")"),0!==a.angle&&(l="rotate("+a.angle+"deg) "+l),0!==a.paddingLeft&&(h+=" padding-left: "+a.paddingLeft/a.scale+"px;",l+=" translateX("+-a.paddingLeft/a.scale+"px)"),0!==a.paddingTop&&(h+=" padding-top: "+a.paddingTop+"px;",l+=" translateY("+-a.paddingTop+"px)"),0!==a.paddingRight&&(h+=" padding-right: "+a.paddingRight/a.scale+"px;"),0!==a.paddingBottom&&(h+=" padding-bottom: "+a.paddingBottom+"px;"),""!==h&&r.setAttribute("style",a.style+h),""!==l&&(r.style.transform=l)}else r.style.padding=0,r.style.transform=a.originalTransform||""}}}},function(e){var t=new f({textContent:e.textContent,textContentStream:e.textContentStream,container:e.container,viewport:e.viewport,textDivs:e.textDivs,textContentItemsStr:e.textContentItemsStr,enhanceTextSelection:e.enhanceTextSelection});return t._render(e.timeout),t}}();t.renderTextLayer=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationLayer=void 0;var r=n(151),a=n(1);function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t,n){return t&&C(e.prototype,t),n&&C(e,n),e}var k=function(){function e(){_(this,e)}return S(e,null,[{key:"create",value:function(e){switch(e.data.annotationType){case a.AnnotationType.LINK:return new E(e);case a.AnnotationType.TEXT:return new A(e);case a.AnnotationType.WIDGET:switch(e.data.fieldType){case"Tx":return new R(e);case"Btn":return e.data.radioButton?new M(e):e.data.checkBox?new O(e):new P(e);case"Ch":return new L(e)}return new T(e);case a.AnnotationType.POPUP:return new D(e);case a.AnnotationType.FREETEXT:return new F(e);case a.AnnotationType.LINE:return new j(e);case a.AnnotationType.SQUARE:return new N(e);case a.AnnotationType.CIRCLE:return new B(e);case a.AnnotationType.POLYLINE:return new z(e);case a.AnnotationType.CARET:return new U(e);case a.AnnotationType.INK:return new W(e);case a.AnnotationType.POLYGON:return new H(e);case a.AnnotationType.HIGHLIGHT:return new V(e);case a.AnnotationType.UNDERLINE:return new q(e);case a.AnnotationType.SQUIGGLY:return new G(e);case a.AnnotationType.STRIKEOUT:return new K(e);case a.AnnotationType.STAMP:return new Y(e);case a.AnnotationType.FILEATTACHMENT:return new X(e);default:return new x(e)}}}]),e}(),x=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];_(this,e),this.isRenderable=n,this.data=t.data,this.layer=t.layer,this.page=t.page,this.viewport=t.viewport,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderInteractiveForms=t.renderInteractiveForms,this.svgFactory=t.svgFactory,n&&(this.container=this._createContainer(r))}return S(e,[{key:"_createContainer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.data,n=this.page,r=this.viewport,l=document.createElement("section"),d=t.rect[2]-t.rect[0],h=t.rect[3]-t.rect[1];l.setAttribute("data-annotation-id",t.id);var f=a.Util.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]);if(l.style.transform="matrix("+r.transform.join(",")+")",l.style.transformOrigin=-f[0]+"px "+-f[1]+"px",!e&&t.borderStyle.width>0){l.style.borderWidth=t.borderStyle.width+"px",t.borderStyle.style!==a.AnnotationBorderStyleType.UNDERLINE&&(d-=2*t.borderStyle.width,h-=2*t.borderStyle.width);var p=t.borderStyle.horizontalCornerRadius,y=t.borderStyle.verticalCornerRadius;if(p>0||y>0){var w=p+"px / "+y+"px";l.style.borderRadius=w}switch(t.borderStyle.style){case a.AnnotationBorderStyleType.SOLID:l.style.borderStyle="solid";break;case a.AnnotationBorderStyleType.DASHED:l.style.borderStyle="dashed";break;case a.AnnotationBorderStyleType.BEVELED:(0,a.warn)("Unimplemented border style: beveled");break;case a.AnnotationBorderStyleType.INSET:(0,a.warn)("Unimplemented border style: inset");break;case a.AnnotationBorderStyleType.UNDERLINE:l.style.borderBottomStyle="solid"}t.color?l.style.borderColor=a.Util.makeCssRgb(0|t.color[0],0|t.color[1],0|t.color[2]):l.style.borderWidth=0}return l.style.left=f[0]+"px",l.style.top=f[1]+"px",l.style.width=d+"px",l.style.height=h+"px",l}},{key:"_createPopup",value:function(e,t,n){t||((t=document.createElement("div")).style.height=e.style.height,t.style.width=e.style.width,e.appendChild(t));var r=new I({container:e,trigger:t,color:n.color,title:n.title,modificationDate:n.modificationDate,contents:n.contents,hideWrapper:!0}).render();r.style.left=e.style.width,e.appendChild(r)}},{key:"render",value:function(){(0,a.unreachable)("Abstract method `AnnotationElement.render` called")}}]),e}(),E=function(e){function t(e){_(this,t);var n=!!(e.data.url||e.data.dest||e.data.action);return h(this,p(t).call(this,e,n))}return y(t,e),S(t,[{key:"render",value:function(){this.container.className="linkAnnotation";var e=this.data,t=this.linkService,n=document.createElement("a");return(0,r.addLinkAttributes)(n,{url:e.url,target:e.newWindow?r.LinkTarget.BLANK:t.externalLinkTarget,rel:t.externalLinkRel}),e.url||(e.action?this._bindNamedAction(n,e.action):this._bindLink(n,e.dest)),this.container.appendChild(n),this.container}},{key:"_bindLink",value:function(e,t){var n=this;e.href=this.linkService.getDestinationHash(t),e.onclick=function(){return t&&n.linkService.navigateTo(t),!1},t&&(e.className="internalLink")}},{key:"_bindNamedAction",value:function(e,t){var n=this;e.href=this.linkService.getAnchorUrl(""),e.onclick=function(){return n.linkService.executeNamedAction(t),!1},e.className="internalLink"}}]),t}(x),A=function(e){function t(e){_(this,t);var n=!!(e.data.hasPopup||e.data.title||e.data.contents);return h(this,p(t).call(this,e,n))}return y(t,e),S(t,[{key:"render",value:function(){this.container.className="textAnnotation";var e=document.createElement("img");return e.style.height=this.container.style.height,e.style.width=this.container.style.width,e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.alt="[{{type}} Annotation]",e.dataset.l10nId="text_annotation_type",e.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(this.container,e,this.data),this.container.appendChild(e),this.container}}]),t}(x),T=function(e){function t(){return _(this,t),h(this,p(t).apply(this,arguments))}return y(t,e),S(t,[{key:"render",value:function(){return this.container}}]),t}(x),R=function(e){function t(e){_(this,t);var n=e.renderInteractiveForms||!e.data.hasAppearance&&!!e.data.fieldValue;return h(this,p(t).call(this,e,n))}return y(t,e),S(t,[{key:"render",value:function(){this.container.className="textWidgetAnnotation";var e=null;if(this.renderInteractiveForms){if(this.data.multiLine?(e=document.createElement("textarea")).textContent=this.data.fieldValue:((e=document.createElement("input")).type="text",e.setAttribute("value",this.data.fieldValue)),e.disabled=this.data.readOnly,null!==this.data.maxLen&&(e.maxLength=this.data.maxLen),this.data.comb){var t=(this.data.rect[2]-this.data.rect[0])/this.data.maxLen;e.classList.add("comb"),e.style.letterSpacing="calc("+t+"px - 1ch)"}}else{(e=document.createElement("div")).textContent=this.data.fieldValue,e.style.verticalAlign="middle",e.style.display="table-cell";var n=null;this.data.fontRefName&&this.page.commonObjs.has(this.data.fontRefName)&&(n=this.page.commonObjs.get(this.data.fontRefName)),this._setTextStyle(e,n)}return null!==this.data.textAlignment&&(e.style.textAlign=["left","center","right"][this.data.textAlignment]),this.container.appendChild(e),this.container}},{key:"_setTextStyle",value:function(e,t){var n=e.style;if(n.fontSize=this.data.fontSize+"px",n.direction=this.data.fontDirection<0?"rtl":"ltr",t){n.fontWeight=t.black?t.bold?"900":"bold":t.bold?"bold":"normal",n.fontStyle=t.italic?"italic":"normal";var r=t.loadedName?'"'+t.loadedName+'", ':"",a=t.fallbackName||"Helvetica, sans-serif";n.fontFamily=r+a}}}]),t}(T),O=function(e){function t(e){return _(this,t),h(this,p(t).call(this,e,e.renderInteractiveForms))}return y(t,e),S(t,[{key:"render",value:function(){this.container.className="buttonWidgetAnnotation checkBox";var e=document.createElement("input");return e.disabled=this.data.readOnly,e.type="checkbox",this.data.fieldValue&&"Off"!==this.data.fieldValue&&e.setAttribute("checked",!0),this.container.appendChild(e),this.container}}]),t}(T),M=function(e){function t(e){return _(this,t),h(this,p(t).call(this,e,e.renderInteractiveForms))}return y(t,e),S(t,[{key:"render",value:function(){this.container.className="buttonWidgetAnnotation radioButton";var e=document.createElement("input");return e.disabled=this.data.readOnly,e.type="radio",e.name=this.data.fieldName,this.data.fieldValue===this.data.buttonValue&&e.setAttribute("checked",!0),this.container.appendChild(e),this.container}}]),t}(T),P=function(e){function t(){return _(this,t),h(this,p(t).apply(this,arguments))}return y(t,e),S(t,[{key:"render",value:function(){var e=l(p(t.prototype),"render",this).call(this);return e.className="buttonWidgetAnnotation pushButton",e}}]),t}(E),L=function(e){function t(e){return _(this,t),h(this,p(t).call(this,e,e.renderInteractiveForms))}return y(t,e),S(t,[{key:"render",value:function(){this.container.className="choiceWidgetAnnotation";var e=document.createElement("select");e.disabled=this.data.readOnly,this.data.combo||(e.size=this.data.options.length,this.data.multiSelect&&(e.multiple=!0));for(var t=0,n=this.data.options.length;t<n;t++){var r=this.data.options[t],a=document.createElement("option");a.textContent=r.displayValue,a.value=r.exportValue,this.data.fieldValue.includes(r.displayValue)&&a.setAttribute("selected",!0),e.appendChild(a)}return this.container.appendChild(e),this.container}}]),t}(T),D=function(e){function t(e){_(this,t);var n=!(!e.data.title&&!e.data.contents);return h(this,p(t).call(this,e,n))}return y(t,e),S(t,[{key:"render",value:function(){if(this.container.className="popupAnnotation",["Line","Square","Circle","PolyLine","Polygon","Ink"].includes(this.data.parentType))return this.container;var e='[data-annotation-id="'+this.data.parentId+'"]',t=this.layer.querySelector(e);if(!t)return this.container;var n=new I({container:this.container,trigger:t,color:this.data.color,title:this.data.title,modificationDate:this.data.modificationDate,contents:this.data.contents}),r=parseFloat(t.style.left),a=parseFloat(t.style.width);return this.container.style.transformOrigin=-(r+a)+"px -"+t.style.top,this.container.style.left=r+a+"px",this.container.appendChild(n.render()),this.container}}]),t}(x),I=function(){function e(t){_(this,e),this.container=t.container,this.trigger=t.trigger,this.color=t.color,this.title=t.title,this.modificationDate=t.modificationDate,this.contents=t.contents,this.hideWrapper=t.hideWrapper||!1,this.pinned=!1}return S(e,[{key:"render",value:function(){var e=document.createElement("div");e.className="popupWrapper",this.hideElement=this.hideWrapper?e:this.container,this.hideElement.setAttribute("hidden",!0);var t=document.createElement("div");t.className="popup";var n=this.color;if(n){var l=.7*(255-n[0])+n[0],d=.7*(255-n[1])+n[1],h=.7*(255-n[2])+n[2];t.style.backgroundColor=a.Util.makeCssRgb(0|l,0|d,0|h)}var f=document.createElement("h1");f.textContent=this.title,t.appendChild(f);var p=r.PDFDateString.toDateObject(this.modificationDate);if(p){var y=document.createElement("span");y.textContent="{{date}}, {{time}}",y.dataset.l10nId="annotation_date_string",y.dataset.l10nArgs=JSON.stringify({date:p.toLocaleDateString(),time:p.toLocaleTimeString()}),t.appendChild(y)}var w=this._formatContents(this.contents);return t.appendChild(w),this.trigger.addEventListener("click",this._toggle.bind(this)),this.trigger.addEventListener("mouseover",this._show.bind(this,!1)),this.trigger.addEventListener("mouseout",this._hide.bind(this,!1)),t.addEventListener("click",this._hide.bind(this,!0)),e.appendChild(t),e}},{key:"_formatContents",value:function(e){for(var t=document.createElement("p"),n=e.split(/(?:\r\n?|\n)/),r=0,a=n.length;r<a;++r){var l=n[r];t.appendChild(document.createTextNode(l)),r<a-1&&t.appendChild(document.createElement("br"))}return t}},{key:"_toggle",value:function(){this.pinned?this._hide(!0):this._show(!0)}},{key:"_show",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&(this.pinned=!0),this.hideElement.hasAttribute("hidden")&&(this.hideElement.removeAttribute("hidden"),this.container.style.zIndex+=1)}},{key:"_hide",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e&&(this.pinned=!1),this.hideElement.hasAttribute("hidden")||this.pinned||(this.hideElement.setAttribute("hidden",!0),this.container.style.zIndex-=1)}}]),e}(),F=function(e){function t(e){_(this,t);var n=!!(e.data.hasPopup||e.data.title||e.data.contents);return h(this,p(t).call(this,e,n,!0))}return y(t,e),S(t,[{key:"render",value:function(){return this.container.className="freeTextAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}]),t}(x),j=function(e){function t(e){_(this,t);var n=!!(e.data.hasPopup||e.data.title||e.data.contents);return h(this,p(t).call(this,e,n,!0))}return y(t,e),S(t,[{key:"render",value:function(){this.container.className="lineAnnotation";var e=this.data,t=e.rect[2]-e.rect[0],n=e.rect[3]-e.rect[1],r=this.svgFactory.create(t,n),a=this.svgFactory.createElement("svg:line");return a.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),a.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),a.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),a.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),a.setAttribute("stroke-width",e.borderStyle.width),a.setAttribute("stroke","transparent"),r.appendChild(a),this.container.append(r),this._createPopup(this.container,a,e),this.container}}]),t}(x),N=function(e){function t(e){_(this,t);var n=!!(e.data.hasPopup||e.data.title||e.data.contents);return h(this,p(t).call(this,e,n,!0))}return y(t,e),S(t,[{key:"render",value:function(){this.container.className="squareAnnotation";var e=this.data,t=e.rect[2]-e.rect[0],n=e.rect[3]-e.rect[1],r=this.svgFactory.create(t,n),a=e.borderStyle.width,l=this.svgFactory.createElement("svg:rect");return l.setAttribute("x",a/2),l.setAttribute("y",a/2),l.setAttribute("width",t-a),l.setAttribute("height",n-a),l.setAttribute("stroke-width",a),l.setAttribute("stroke","transparent"),l.setAttribute("fill","none"),r.appendChild(l),this.container.append(r),this._createPopup(this.container,l,e),this.container}}]),t}(x),B=function(e){function t(e){_(this,t);var n=!!(e.data.hasPopup||e.data.title||e.data.contents);return h(this,p(t).call(this,e,n,!0))}return y(t,e),S(t,[{key:"render",value:function(){this.container.className="circleAnnotation";var e=this.data,t=e.rect[2]-e.rect[0],n=e.rect[3]-e.rect[1],r=this.svgFactory.create(t,n),a=e.borderStyle.width,l=this.svgFactory.createElement("svg:ellipse");return l.setAttribute("cx",t/2),l.setAttribute("cy",n/2),l.setAttribute("rx",t/2-a/2),l.setAttribute("ry",n/2-a/2),l.setAttribute("stroke-width",a),l.setAttribute("stroke","transparent"),l.setAttribute("fill","none"),r.appendChild(l),this.container.append(r),this._createPopup(this.container,l,e),this.container}}]),t}(x),z=function(e){function t(e){var n;_(this,t);var r=!!(e.data.hasPopup||e.data.title||e.data.contents);return(n=h(this,p(t).call(this,e,r,!0))).containerClassName="polylineAnnotation",n.svgElementName="svg:polyline",n}return y(t,e),S(t,[{key:"render",value:function(){this.container.className=this.containerClassName;for(var e=this.data,t=e.rect[2]-e.rect[0],n=e.rect[3]-e.rect[1],r=this.svgFactory.create(t,n),a=e.vertices,l=[],d=0,h=a.length;d<h;d++){var f=a[d].x-e.rect[0],p=e.rect[3]-a[d].y;l.push(f+","+p)}l=l.join(" ");var y=e.borderStyle.width,w=this.svgFactory.createElement(this.svgElementName);return w.setAttribute("points",l),w.setAttribute("stroke-width",y),w.setAttribute("stroke","transparent"),w.setAttribute("fill","none"),r.appendChild(w),this.container.append(r),this._createPopup(this.container,w,e),this.container}}]),t}(x),H=function(e){function t(e){var n;return _(this,t),(n=h(this,p(t).call(this,e))).containerClassName="polygonAnnotation",n.svgElementName="svg:polygon",n}return y(t,e),t}(z),U=function(e){function t(e){_(this,t);var n=!!(e.data.hasPopup||e.data.title||e.data.contents);return h(this,p(t).call(this,e,n,!0))}return y(t,e),S(t,[{key:"render",value:function(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}]),t}(x),W=function(e){function t(e){var n;_(this,t);var r=!!(e.data.hasPopup||e.data.title||e.data.contents);return(n=h(this,p(t).call(this,e,r,!0))).containerClassName="inkAnnotation",n.svgElementName="svg:polyline",n}return y(t,e),S(t,[{key:"render",value:function(){this.container.className=this.containerClassName;for(var e=this.data,t=e.rect[2]-e.rect[0],n=e.rect[3]-e.rect[1],r=this.svgFactory.create(t,n),a=e.inkLists,l=0,d=a.length;l<d;l++){for(var h=a[l],f=[],p=0,y=h.length;p<y;p++){var w=h[p].x-e.rect[0],_=e.rect[3]-h[p].y;f.push(w+","+_)}f=f.join(" ");var C=e.borderStyle.width,S=this.svgFactory.createElement(this.svgElementName);S.setAttribute("points",f),S.setAttribute("stroke-width",C),S.setAttribute("stroke","transparent"),S.setAttribute("fill","none"),this._createPopup(this.container,S,e),r.appendChild(S)}return this.container.append(r),this.container}}]),t}(x),V=function(e){function t(e){_(this,t);var n=!!(e.data.hasPopup||e.data.title||e.data.contents);return h(this,p(t).call(this,e,n,!0))}return y(t,e),S(t,[{key:"render",value:function(){return this.container.className="highlightAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}]),t}(x),q=function(e){function t(e){_(this,t);var n=!!(e.data.hasPopup||e.data.title||e.data.contents);return h(this,p(t).call(this,e,n,!0))}return y(t,e),S(t,[{key:"render",value:function(){return this.container.className="underlineAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}]),t}(x),G=function(e){function t(e){_(this,t);var n=!!(e.data.hasPopup||e.data.title||e.data.contents);return h(this,p(t).call(this,e,n,!0))}return y(t,e),S(t,[{key:"render",value:function(){return this.container.className="squigglyAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}]),t}(x),K=function(e){function t(e){_(this,t);var n=!!(e.data.hasPopup||e.data.title||e.data.contents);return h(this,p(t).call(this,e,n,!0))}return y(t,e),S(t,[{key:"render",value:function(){return this.container.className="strikeoutAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}]),t}(x),Y=function(e){function t(e){_(this,t);var n=!!(e.data.hasPopup||e.data.title||e.data.contents);return h(this,p(t).call(this,e,n,!0))}return y(t,e),S(t,[{key:"render",value:function(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}]),t}(x),X=function(e){function t(e){var n;_(this,t);var l=(n=h(this,p(t).call(this,e,!0))).data.file,d=l.filename,y=l.content;return n.filename=(0,r.getFilenameFromUrl)(d),n.content=y,n.linkService.eventBus&&n.linkService.eventBus.dispatch("fileattachmentannotation",{source:f(n),id:(0,a.stringToPDFString)(d),filename:d,content:y}),n}return y(t,e),S(t,[{key:"render",value:function(){this.container.className="fileAttachmentAnnotation";var e=document.createElement("div");return e.style.height=this.container.style.height,e.style.width=this.container.style.width,e.addEventListener("dblclick",this._download.bind(this)),this.data.hasPopup||!this.data.title&&!this.data.contents||this._createPopup(this.container,e,this.data),this.container.appendChild(e),this.container}},{key:"_download",value:function(){this.downloadManager?this.downloadManager.downloadData(this.content,this.filename,""):(0,a.warn)("Download cannot be started due to unavailable download manager")}}]),t}(x),J=function(){function e(){_(this,e)}return S(e,null,[{key:"render",value:function(e){for(var t=0,n=e.annotations.length;t<n;t++){var a=e.annotations[t];if(a){var l=k.create({data:a,layer:e.div,page:e.page,viewport:e.viewport,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderInteractiveForms:e.renderInteractiveForms||!1,svgFactory:new r.DOMSVGFactory});l.isRenderable&&e.div.appendChild(l.render())}}}},{key:"update",value:function(e){for(var t=0,n=e.annotations.length;t<n;t++){var r=e.annotations[t],a=e.div.querySelector('[data-annotation-id="'+r.id+'"]');a&&(a.style.transform="matrix("+e.viewport.transform.join(",")+")")}e.div.removeAttribute("hidden")}}]),e}();t.AnnotationLayer=J},function(e,r,l){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SVGGraphics=void 0;var d,h=l(1),f=l(151),p=(d=l(4))&&d.__esModule?d:{default:d};function y(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,l=void 0;try{for(var d,h=e[Symbol.iterator]();!(r=(d=h.next()).done)&&(n.push(d.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==h.return||h.return()}finally{if(a)throw l}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t,n){return t&&C(e.prototype,t),n&&C(e,n),e}var k=function(){throw new Error("Not implemented: SVGGraphics")};r.SVGGraphics=k;var x=function(e){if(Number.isInteger(e))return e.toString();var t=e.toFixed(10),n=t.length-1;if("0"!==t[n])return t;do{n--}while("0"===t[n]);return t.substring(0,"."===t[n]?n:n+1)},E=function(e){if(0===e[4]&&0===e[5]){if(0===e[1]&&0===e[2])return 1===e[0]&&1===e[3]?"":"scale(".concat(x(e[0])," ").concat(x(e[3]),")");if(e[0]===e[3]&&e[1]===-e[2]){var t=180*Math.acos(e[0])/Math.PI;return"rotate(".concat(x(t),")")}}else if(1===e[0]&&0===e[1]&&0===e[2]&&1===e[3])return"translate(".concat(x(e[4])," ").concat(x(e[5]),")");return"matrix(".concat(x(e[0])," ").concat(x(e[1])," ").concat(x(e[2])," ").concat(x(e[3])," ").concat(x(e[4])," ")+"".concat(x(e[5]),")")},A={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},T="http://www.w3.org/1999/xlink",R=["butt","round","square"],O=["miter","round","bevel"],M=function(){for(var e=new Uint8Array([137,80,78,71,13,10,26,10]),r=new Int32Array(256),l=0;l<256;l++){for(var d=l,f=0;f<8;f++)d=1&d?3988292384^d>>1&2147483647:d>>1&2147483647;r[l]=d}function y(e,t,n,a){var l=a,d=t.length;n[l]=d>>24&255,n[l+1]=d>>16&255,n[l+2]=d>>8&255,n[l+3]=255&d,n[l+=4]=255&e.charCodeAt(0),n[l+1]=255&e.charCodeAt(1),n[l+2]=255&e.charCodeAt(2),n[l+3]=255&e.charCodeAt(3),l+=4,n.set(t,l);var h=function(e,t,n){for(var a=-1,l=t;l<n;l++){var d=255&(a^e[l]);a=a>>>8^r[d]}return-1^a}(n,a+4,l+=t.length);n[l]=h>>24&255,n[l+1]=h>>16&255,n[l+2]=h>>8&255,n[l+3]=255&h}function w(e){var t=e.length,n=Math.ceil(t/65535),r=new Uint8Array(2+t+5*n+4),a=0;r[a++]=120,r[a++]=156;for(var l=0;t>65535;)r[a++]=0,r[a++]=255,r[a++]=255,r[a++]=0,r[a++]=0,r.set(e.subarray(l,l+65535),a),a+=65535,l+=65535,t-=65535;r[a++]=1,r[a++]=255&t,r[a++]=t>>8&255,r[a++]=255&~t,r[a++]=(65535&~t)>>8&255,r.set(e.subarray(l),a),a+=e.length-l;var d=function(e,t,n){for(var r=1,a=0,l=t;l<n;++l)a=(a+(r=(r+(255&e[l]))%65521))%65521;return a<<16|r}(e,0,e.length);return r[a++]=d>>24&255,r[a++]=d>>16&255,r[a++]=d>>8&255,r[a++]=255&d,r}function _(r,l,d,f){var _,C,S,k=r.width,x=r.height,E=r.data;switch(l){case h.ImageKind.GRAYSCALE_1BPP:C=0,_=1,S=k+7>>3;break;case h.ImageKind.RGB_24BPP:C=2,_=8,S=3*k;break;case h.ImageKind.RGBA_32BPP:C=6,_=8,S=4*k;break;default:throw new Error("invalid format")}for(var A=new Uint8Array((1+S)*x),T=0,R=0,O=0;O<x;++O)A[T++]=0,A.set(E.subarray(R,R+S),T),R+=S,T+=S;if(l===h.ImageKind.GRAYSCALE_1BPP&&f){T=0;for(var M=0;M<x;M++){T++;for(var P=0;P<S;P++)A[T++]^=255}}var L=new Uint8Array([k>>24&255,k>>16&255,k>>8&255,255&k,x>>24&255,x>>16&255,x>>8&255,255&x,_,C,0,0,0]),D=function(e){if(!(0,p.default)())return w(e);try{var r;r=parseInt(a.versions.node)>=8?e:new t(e);var l=n(730).deflateSync(r,{level:9});return l instanceof Uint8Array?l:new Uint8Array(l)}catch(e){(0,h.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+e)}return w(e)}(A),I=e.length+36+L.length+D.length,F=new Uint8Array(I),j=0;return F.set(e,j),y("IHDR",L,F,j+=e.length),y("IDATA",D,F,j+=12+L.length),j+=12+D.length,y("IEND",new Uint8Array(0),F,j),(0,h.createObjectURL)(F,"image/png",d)}return function(e,t,n){return _(e,void 0===e.kind?h.ImageKind.GRAYSCALE_1BPP:e.kind,t,n)}}(),P=function(){function e(){_(this,e),this.fontSizeScale=1,this.fontWeight=A.fontWeight,this.fontSize=0,this.textMatrix=h.IDENTITY_MATRIX,this.fontMatrix=h.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=h.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=A.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}return S(e,[{key:"clone",value:function(){return Object.create(this)}},{key:"setCurrentPoint",value:function(e,t){this.x=e,this.y=t}}]),e}(),L=0,D=0,I=0;r.SVGGraphics=k=function(){function e(t,n,r){for(var a in _(this,e),this.svgFactory=new f.DOMSVGFactory,this.current=new P,this.transformMatrix=h.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=t,this.objs=n,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!r,this._operatorIdMapping=[],h.OPS)this._operatorIdMapping[h.OPS[a]]=a}return S(e,[{key:"save",value:function(){this.transformStack.push(this.transformMatrix);var e=this.current;this.extraStack.push(e),this.current=e.clone()}},{key:"restore",value:function(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}},{key:"group",value:function(e){this.save(),this.executeOpTree(e),this.restore()}},{key:"loadDependencies",value:function(e){for(var t=this,n=e.fnArray,r=e.argsArray,a=0,l=n.length;a<l;a++)if(n[a]===h.OPS.dependency){var d=!0,f=!1,p=void 0;try{for(var y,w=function(){var e=y.value,n=e.startsWith("g_")?t.commonObjs:t.objs,r=new Promise((function(t){n.get(e,t)}));t.current.dependencies.push(r)},_=r[a][Symbol.iterator]();!(d=(y=_.next()).done);d=!0)w()}catch(e){f=!0,p=e}finally{try{d||null==_.return||_.return()}finally{if(f)throw p}}}return Promise.all(this.current.dependencies)}},{key:"transform",value:function(e,t,n,r,a,l){var d=[e,t,n,r,a,l];this.transformMatrix=h.Util.transform(this.transformMatrix,d),this.tgrp=null}},{key:"getSVG",value:function(e,t){var n=this;this.viewport=t;var r=this._initialize(t);return this.loadDependencies(e).then((function(){return n.transformMatrix=h.IDENTITY_MATRIX,n.executeOpTree(n.convertOpList(e)),r}))}},{key:"convertOpList",value:function(e){for(var t=this._operatorIdMapping,n=e.argsArray,r=e.fnArray,a=[],l=0,d=r.length;l<d;l++){var h=r[l];a.push({fnId:h,fn:t[h],args:n[l]})}return function(e){var t=[],n=[],r=!0,a=!1,l=void 0;try{for(var d,h=e[Symbol.iterator]();!(r=(d=h.next()).done);r=!0){var f=d.value;"save"!==f.fn?"restore"===f.fn?t=n.pop():t.push(f):(t.push({fnId:92,fn:"group",items:[]}),n.push(t),t=t[t.length-1].items)}}catch(e){a=!0,l=e}finally{try{r||null==h.return||h.return()}finally{if(a)throw l}}return t}(a)}},{key:"executeOpTree",value:function(e){var t=!0,n=!1,r=void 0;try{for(var a,l=e[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var d=a.value,f=d.fn,p=d.fnId,y=d.args;switch(0|p){case h.OPS.beginText:this.beginText();break;case h.OPS.dependency:break;case h.OPS.setLeading:this.setLeading(y);break;case h.OPS.setLeadingMoveText:this.setLeadingMoveText(y[0],y[1]);break;case h.OPS.setFont:this.setFont(y);break;case h.OPS.showText:case h.OPS.showSpacedText:this.showText(y[0]);break;case h.OPS.endText:this.endText();break;case h.OPS.moveText:this.moveText(y[0],y[1]);break;case h.OPS.setCharSpacing:this.setCharSpacing(y[0]);break;case h.OPS.setWordSpacing:this.setWordSpacing(y[0]);break;case h.OPS.setHScale:this.setHScale(y[0]);break;case h.OPS.setTextMatrix:this.setTextMatrix(y[0],y[1],y[2],y[3],y[4],y[5]);break;case h.OPS.setTextRise:this.setTextRise(y[0]);break;case h.OPS.setTextRenderingMode:this.setTextRenderingMode(y[0]);break;case h.OPS.setLineWidth:this.setLineWidth(y[0]);break;case h.OPS.setLineJoin:this.setLineJoin(y[0]);break;case h.OPS.setLineCap:this.setLineCap(y[0]);break;case h.OPS.setMiterLimit:this.setMiterLimit(y[0]);break;case h.OPS.setFillRGBColor:this.setFillRGBColor(y[0],y[1],y[2]);break;case h.OPS.setStrokeRGBColor:this.setStrokeRGBColor(y[0],y[1],y[2]);break;case h.OPS.setStrokeColorN:this.setStrokeColorN(y);break;case h.OPS.setFillColorN:this.setFillColorN(y);break;case h.OPS.shadingFill:this.shadingFill(y[0]);break;case h.OPS.setDash:this.setDash(y[0],y[1]);break;case h.OPS.setRenderingIntent:this.setRenderingIntent(y[0]);break;case h.OPS.setFlatness:this.setFlatness(y[0]);break;case h.OPS.setGState:this.setGState(y[0]);break;case h.OPS.fill:this.fill();break;case h.OPS.eoFill:this.eoFill();break;case h.OPS.stroke:this.stroke();break;case h.OPS.fillStroke:this.fillStroke();break;case h.OPS.eoFillStroke:this.eoFillStroke();break;case h.OPS.clip:this.clip("nonzero");break;case h.OPS.eoClip:this.clip("evenodd");break;case h.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case h.OPS.paintJpegXObject:this.paintJpegXObject(y[0],y[1],y[2]);break;case h.OPS.paintImageXObject:this.paintImageXObject(y[0]);break;case h.OPS.paintInlineImageXObject:this.paintInlineImageXObject(y[0]);break;case h.OPS.paintImageMaskXObject:this.paintImageMaskXObject(y[0]);break;case h.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(y[0],y[1]);break;case h.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case h.OPS.closePath:this.closePath();break;case h.OPS.closeStroke:this.closeStroke();break;case h.OPS.closeFillStroke:this.closeFillStroke();break;case h.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case h.OPS.nextLine:this.nextLine();break;case h.OPS.transform:this.transform(y[0],y[1],y[2],y[3],y[4],y[5]);break;case h.OPS.constructPath:this.constructPath(y[0],y[1]);break;case h.OPS.endPath:this.endPath();break;case 92:this.group(d.items);break;default:(0,h.warn)("Unimplemented operator ".concat(f))}}}catch(e){n=!0,r=e}finally{try{t||null==l.return||l.return()}finally{if(n)throw r}}}},{key:"setWordSpacing",value:function(e){this.current.wordSpacing=e}},{key:"setCharSpacing",value:function(e){this.current.charSpacing=e}},{key:"nextLine",value:function(){this.moveText(0,this.current.leading)}},{key:"setTextMatrix",value:function(e,t,n,r,a,l){var d=this.current;d.textMatrix=d.lineMatrix=[e,t,n,r,a,l],d.textMatrixScale=Math.sqrt(e*e+t*t),d.x=d.lineX=0,d.y=d.lineY=0,d.xcoords=[],d.tspan=this.svgFactory.createElement("svg:tspan"),d.tspan.setAttributeNS(null,"font-family",d.fontFamily),d.tspan.setAttributeNS(null,"font-size","".concat(x(d.fontSize),"px")),d.tspan.setAttributeNS(null,"y",x(-d.y)),d.txtElement=this.svgFactory.createElement("svg:text"),d.txtElement.appendChild(d.tspan)}},{key:"beginText",value:function(){var e=this.current;e.x=e.lineX=0,e.y=e.lineY=0,e.textMatrix=h.IDENTITY_MATRIX,e.lineMatrix=h.IDENTITY_MATRIX,e.textMatrixScale=1,e.tspan=this.svgFactory.createElement("svg:tspan"),e.txtElement=this.svgFactory.createElement("svg:text"),e.txtgrp=this.svgFactory.createElement("svg:g"),e.xcoords=[]}},{key:"moveText",value:function(e,t){var n=this.current;n.x=n.lineX+=e,n.y=n.lineY+=t,n.xcoords=[],n.tspan=this.svgFactory.createElement("svg:tspan"),n.tspan.setAttributeNS(null,"font-family",n.fontFamily),n.tspan.setAttributeNS(null,"font-size","".concat(x(n.fontSize),"px")),n.tspan.setAttributeNS(null,"y",x(-n.y))}},{key:"showText",value:function(e){var t=this.current,n=t.font,r=t.fontSize;if(0!==r){var a=t.charSpacing,l=t.wordSpacing,d=t.fontDirection,f=t.textHScale*d,p=n.vertical,y=r*t.fontMatrix[0],w=0,_=!0,C=!1,S=void 0;try{for(var k,T=e[Symbol.iterator]();!(_=(k=T.next()).done);_=!0){var R=k.value;if(null!==R)if((0,h.isNum)(R))w+=-R*r*.001;else{var O=R.width,M=R.fontChar,P=O*y+((R.isSpace?l:0)+a)*d;R.isInFont||n.missingFile?(t.xcoords.push(t.x+w*f),t.tspan.textContent+=M,w+=P):w+=P}else w+=d*l}}catch(e){C=!0,S=e}finally{try{_||null==T.return||T.return()}finally{if(C)throw S}}p?t.y-=w*f:t.x+=w*f,t.tspan.setAttributeNS(null,"x",t.xcoords.map(x).join(" ")),t.tspan.setAttributeNS(null,"y",x(-t.y)),t.tspan.setAttributeNS(null,"font-family",t.fontFamily),t.tspan.setAttributeNS(null,"font-size","".concat(x(t.fontSize),"px")),t.fontStyle!==A.fontStyle&&t.tspan.setAttributeNS(null,"font-style",t.fontStyle),t.fontWeight!==A.fontWeight&&t.tspan.setAttributeNS(null,"font-weight",t.fontWeight);var L=t.textRenderingMode&h.TextRenderingMode.FILL_STROKE_MASK;if(L===h.TextRenderingMode.FILL||L===h.TextRenderingMode.FILL_STROKE?(t.fillColor!==A.fillColor&&t.tspan.setAttributeNS(null,"fill",t.fillColor),t.fillAlpha<1&&t.tspan.setAttributeNS(null,"fill-opacity",t.fillAlpha)):t.textRenderingMode===h.TextRenderingMode.ADD_TO_PATH?t.tspan.setAttributeNS(null,"fill","transparent"):t.tspan.setAttributeNS(null,"fill","none"),L===h.TextRenderingMode.STROKE||L===h.TextRenderingMode.FILL_STROKE){var D=1/(t.textMatrixScale||1);this._setStrokeAttributes(t.tspan,D)}var I=t.textMatrix;0!==t.textRise&&((I=I.slice())[5]+=t.textRise),t.txtElement.setAttributeNS(null,"transform","".concat(E(I)," scale(1, -1)")),t.txtElement.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),t.txtElement.appendChild(t.tspan),t.txtgrp.appendChild(t.txtElement),this._ensureTransformGroup().appendChild(t.txtElement)}}},{key:"setLeadingMoveText",value:function(e,t){this.setLeading(-t),this.moveText(e,t)}},{key:"addFontStyle",value:function(e){this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));var t=(0,h.createObjectURL)(e.data,e.mimetype,this.forceDataSchema);this.cssStyle.textContent+='@font-face { font-family: "'.concat(e.loadedName,'";')+" src: url(".concat(t,"); }\n")}},{key:"setFont",value:function(e){var t=this.current,n=this.commonObjs.get(e[0]),r=e[1];t.font=n,this.embedFonts&&n.data&&!this.embeddedFonts[n.loadedName]&&(this.addFontStyle(n),this.embeddedFonts[n.loadedName]=n),t.fontMatrix=n.fontMatrix?n.fontMatrix:h.FONT_IDENTITY_MATRIX;var a=n.black?n.bold?"bolder":"bold":n.bold?"bold":"normal",l=n.italic?"italic":"normal";r<0?(r=-r,t.fontDirection=-1):t.fontDirection=1,t.fontSize=r,t.fontFamily=n.loadedName,t.fontWeight=a,t.fontStyle=l,t.tspan=this.svgFactory.createElement("svg:tspan"),t.tspan.setAttributeNS(null,"y",x(-t.y)),t.xcoords=[]}},{key:"endText",value:function(){var e=this.current;e.textRenderingMode&h.TextRenderingMode.ADD_TO_PATH_FLAG&&e.txtElement&&e.txtElement.hasChildNodes()&&(e.element=e.txtElement,this.clip("nonzero"),this.endPath())}},{key:"setLineWidth",value:function(e){e>0&&(this.current.lineWidth=e)}},{key:"setLineCap",value:function(e){this.current.lineCap=R[e]}},{key:"setLineJoin",value:function(e){this.current.lineJoin=O[e]}},{key:"setMiterLimit",value:function(e){this.current.miterLimit=e}},{key:"setStrokeAlpha",value:function(e){this.current.strokeAlpha=e}},{key:"setStrokeRGBColor",value:function(e,t,n){this.current.strokeColor=h.Util.makeCssRgb(e,t,n)}},{key:"setFillAlpha",value:function(e){this.current.fillAlpha=e}},{key:"setFillRGBColor",value:function(e,t,n){this.current.fillColor=h.Util.makeCssRgb(e,t,n),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[]}},{key:"setStrokeColorN",value:function(e){this.current.strokeColor=this._makeColorN_Pattern(e)}},{key:"setFillColorN",value:function(e){this.current.fillColor=this._makeColorN_Pattern(e)}},{key:"shadingFill",value:function(e){var t=this.viewport.width,n=this.viewport.height,r=h.Util.inverseTransform(this.transformMatrix),a=h.Util.applyTransform([0,0],r),l=h.Util.applyTransform([0,n],r),d=h.Util.applyTransform([t,0],r),f=h.Util.applyTransform([t,n],r),p=Math.min(a[0],l[0],d[0],f[0]),y=Math.min(a[1],l[1],d[1],f[1]),w=Math.max(a[0],l[0],d[0],f[0]),_=Math.max(a[1],l[1],d[1],f[1]),C=this.svgFactory.createElement("svg:rect");C.setAttributeNS(null,"x",p),C.setAttributeNS(null,"y",y),C.setAttributeNS(null,"width",w-p),C.setAttributeNS(null,"height",_-y),C.setAttributeNS(null,"fill",this._makeShadingPattern(e)),this._ensureTransformGroup().appendChild(C)}},{key:"_makeColorN_Pattern",value:function(e){return"TilingPattern"===e[0]?this._makeTilingPattern(e):this._makeShadingPattern(e)}},{key:"_makeTilingPattern",value:function(e){var t=e[1],n=e[2],r=e[3]||h.IDENTITY_MATRIX,a=w(e[4],4),l=a[0],d=a[1],f=a[2],p=a[3],_=e[5],C=e[6],S=e[7],k="shading".concat(I++),x=w(h.Util.applyTransform([l,d],r),2),E=x[0],A=x[1],T=w(h.Util.applyTransform([f,p],r),2),R=T[0],O=T[1],M=w(h.Util.singularValueDecompose2dScale(r),2),P=_*M[0],L=C*M[1],D=this.svgFactory.createElement("svg:pattern");D.setAttributeNS(null,"id",k),D.setAttributeNS(null,"patternUnits","userSpaceOnUse"),D.setAttributeNS(null,"width",P),D.setAttributeNS(null,"height",L),D.setAttributeNS(null,"x","".concat(E)),D.setAttributeNS(null,"y","".concat(A));var F=this.svg,j=this.transformMatrix,N=this.current.fillColor,B=this.current.strokeColor,z=this.svgFactory.create(R-E,O-A);if(this.svg=z,this.transformMatrix=r,2===S){var H=h.Util.makeCssRgb.apply(h.Util,y(t));this.current.fillColor=H,this.current.strokeColor=H}return this.executeOpTree(this.convertOpList(n)),this.svg=F,this.transformMatrix=j,this.current.fillColor=N,this.current.strokeColor=B,D.appendChild(z.childNodes[0]),this.defs.appendChild(D),"url(#".concat(k,")")}},{key:"_makeShadingPattern",value:function(e){switch(e[0]){case"RadialAxial":var t,n="shading".concat(I++),r=e[2];switch(e[1]){case"axial":var a=e[3],l=e[4];(t=this.svgFactory.createElement("svg:linearGradient")).setAttributeNS(null,"id",n),t.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),t.setAttributeNS(null,"x1",a[0]),t.setAttributeNS(null,"y1",a[1]),t.setAttributeNS(null,"x2",l[0]),t.setAttributeNS(null,"y2",l[1]);break;case"radial":var d=e[3],f=e[4],p=e[5],y=e[6];(t=this.svgFactory.createElement("svg:radialGradient")).setAttributeNS(null,"id",n),t.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),t.setAttributeNS(null,"cx",f[0]),t.setAttributeNS(null,"cy",f[1]),t.setAttributeNS(null,"r",y),t.setAttributeNS(null,"fx",d[0]),t.setAttributeNS(null,"fy",d[1]),t.setAttributeNS(null,"fr",p);break;default:throw new Error("Unknown RadialAxial type: ".concat(e[1]))}var w=!0,_=!1,C=void 0;try{for(var S,k=r[Symbol.iterator]();!(w=(S=k.next()).done);w=!0){var x=S.value,E=this.svgFactory.createElement("svg:stop");E.setAttributeNS(null,"offset",x[0]),E.setAttributeNS(null,"stop-color",x[1]),t.appendChild(E)}}catch(e){_=!0,C=e}finally{try{w||null==k.return||k.return()}finally{if(_)throw C}}return this.defs.appendChild(t),"url(#".concat(n,")");case"Mesh":return(0,h.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error("Unknown IR type: ".concat(e[0]))}}},{key:"setDash",value:function(e,t){this.current.dashArray=e,this.current.dashPhase=t}},{key:"constructPath",value:function(e,t){var n=this.current,r=n.x,a=n.y,l=[],d=0,f=!0,p=!1,y=void 0;try{for(var w,_=e[Symbol.iterator]();!(f=(w=_.next()).done);f=!0)switch(0|w.value){case h.OPS.rectangle:r=t[d++],a=t[d++];var C=t[d++],S=t[d++],k=r+C,E=a+S;l.push("M",x(r),x(a),"L",x(k),x(a),"L",x(k),x(E),"L",x(r),x(E),"Z");break;case h.OPS.moveTo:r=t[d++],a=t[d++],l.push("M",x(r),x(a));break;case h.OPS.lineTo:r=t[d++],a=t[d++],l.push("L",x(r),x(a));break;case h.OPS.curveTo:r=t[d+4],a=t[d+5],l.push("C",x(t[d]),x(t[d+1]),x(t[d+2]),x(t[d+3]),x(r),x(a)),d+=6;break;case h.OPS.curveTo2:r=t[d+2],a=t[d+3],l.push("C",x(r),x(a),x(t[d]),x(t[d+1]),x(t[d+2]),x(t[d+3])),d+=4;break;case h.OPS.curveTo3:r=t[d+2],a=t[d+3],l.push("C",x(t[d]),x(t[d+1]),x(r),x(a),x(r),x(a)),d+=4;break;case h.OPS.closePath:l.push("Z")}}catch(e){p=!0,y=e}finally{try{f||null==_.return||_.return()}finally{if(p)throw y}}l=l.join(" "),n.path&&e.length>0&&e[0]!==h.OPS.rectangle&&e[0]!==h.OPS.moveTo?l=n.path.getAttributeNS(null,"d")+l:(n.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().appendChild(n.path)),n.path.setAttributeNS(null,"d",l),n.path.setAttributeNS(null,"fill","none"),n.element=n.path,n.setCurrentPoint(r,a)}},{key:"endPath",value:function(){var e=this.current;if(e.path=null,this.pendingClip)if(e.element){var t="clippath".concat(L++),n=this.svgFactory.createElement("svg:clipPath");n.setAttributeNS(null,"id",t),n.setAttributeNS(null,"transform",E(this.transformMatrix));var r=e.element.cloneNode(!0);"evenodd"===this.pendingClip?r.setAttributeNS(null,"clip-rule","evenodd"):r.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,n.appendChild(r),this.defs.appendChild(n),e.activeClipUrl&&(e.clipGroup=null,this.extraStack.forEach((function(e){e.clipGroup=null})),n.setAttributeNS(null,"clip-path",e.activeClipUrl)),e.activeClipUrl="url(#".concat(t,")"),this.tgrp=null}else this.pendingClip=null}},{key:"clip",value:function(e){this.pendingClip=e}},{key:"closePath",value:function(){var e=this.current;if(e.path){var t="".concat(e.path.getAttributeNS(null,"d"),"Z");e.path.setAttributeNS(null,"d",t)}}},{key:"setLeading",value:function(e){this.current.leading=-e}},{key:"setTextRise",value:function(e){this.current.textRise=e}},{key:"setTextRenderingMode",value:function(e){this.current.textRenderingMode=e}},{key:"setHScale",value:function(e){this.current.textHScale=e/100}},{key:"setRenderingIntent",value:function(e){}},{key:"setFlatness",value:function(e){}},{key:"setGState",value:function(e){var t=!0,n=!1,r=void 0;try{for(var a,l=e[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var d=w(a.value,2),f=d[0],p=d[1];switch(f){case"LW":this.setLineWidth(p);break;case"LC":this.setLineCap(p);break;case"LJ":this.setLineJoin(p);break;case"ML":this.setMiterLimit(p);break;case"D":this.setDash(p[0],p[1]);break;case"RI":this.setRenderingIntent(p);break;case"FL":this.setFlatness(p);break;case"Font":this.setFont(p);break;case"CA":this.setStrokeAlpha(p);break;case"ca":this.setFillAlpha(p);break;default:(0,h.warn)("Unimplemented graphic state operator ".concat(f))}}}catch(e){n=!0,r=e}finally{try{t||null==l.return||l.return()}finally{if(n)throw r}}}},{key:"fill",value:function(){var e=this.current;e.element&&(e.element.setAttributeNS(null,"fill",e.fillColor),e.element.setAttributeNS(null,"fill-opacity",e.fillAlpha),this.endPath())}},{key:"stroke",value:function(){var e=this.current;e.element&&(this._setStrokeAttributes(e.element),e.element.setAttributeNS(null,"fill","none"),this.endPath())}},{key:"_setStrokeAttributes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.current,r=n.dashArray;1!==t&&r.length>0&&(r=r.map((function(e){return t*e}))),e.setAttributeNS(null,"stroke",n.strokeColor),e.setAttributeNS(null,"stroke-opacity",n.strokeAlpha),e.setAttributeNS(null,"stroke-miterlimit",x(n.miterLimit)),e.setAttributeNS(null,"stroke-linecap",n.lineCap),e.setAttributeNS(null,"stroke-linejoin",n.lineJoin),e.setAttributeNS(null,"stroke-width",x(t*n.lineWidth)+"px"),e.setAttributeNS(null,"stroke-dasharray",r.map(x).join(" ")),e.setAttributeNS(null,"stroke-dashoffset",x(t*n.dashPhase)+"px")}},{key:"eoFill",value:function(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}},{key:"fillStroke",value:function(){this.stroke(),this.fill()}},{key:"eoFillStroke",value:function(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}},{key:"closeStroke",value:function(){this.closePath(),this.stroke()}},{key:"closeFillStroke",value:function(){this.closePath(),this.fillStroke()}},{key:"closeEOFillStroke",value:function(){this.closePath(),this.eoFillStroke()}},{key:"paintSolidColorImageMask",value:function(){var e=this.svgFactory.createElement("svg:rect");e.setAttributeNS(null,"x","0"),e.setAttributeNS(null,"y","0"),e.setAttributeNS(null,"width","1px"),e.setAttributeNS(null,"height","1px"),e.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().appendChild(e)}},{key:"paintJpegXObject",value:function(e,t,n){var r=this.objs.get(e),a=this.svgFactory.createElement("svg:image");a.setAttributeNS(T,"xlink:href",r.src),a.setAttributeNS(null,"width",x(t)),a.setAttributeNS(null,"height",x(n)),a.setAttributeNS(null,"x","0"),a.setAttributeNS(null,"y",x(-n)),a.setAttributeNS(null,"transform","scale(".concat(x(1/t)," ").concat(x(-1/n),")")),this._ensureTransformGroup().appendChild(a)}},{key:"paintImageXObject",value:function(e){var t=this.objs.get(e);t?this.paintInlineImageXObject(t):(0,h.warn)("Dependent image with object ID ".concat(e," is not ready yet"))}},{key:"paintInlineImageXObject",value:function(e,t){var n=e.width,r=e.height,a=M(e,this.forceDataSchema,!!t),l=this.svgFactory.createElement("svg:rect");l.setAttributeNS(null,"x","0"),l.setAttributeNS(null,"y","0"),l.setAttributeNS(null,"width",x(n)),l.setAttributeNS(null,"height",x(r)),this.current.element=l,this.clip("nonzero");var d=this.svgFactory.createElement("svg:image");d.setAttributeNS(T,"xlink:href",a),d.setAttributeNS(null,"x","0"),d.setAttributeNS(null,"y",x(-r)),d.setAttributeNS(null,"width",x(n)+"px"),d.setAttributeNS(null,"height",x(r)+"px"),d.setAttributeNS(null,"transform","scale(".concat(x(1/n)," ").concat(x(-1/r),")")),t?t.appendChild(d):this._ensureTransformGroup().appendChild(d)}},{key:"paintImageMaskXObject",value:function(e){var t=this.current,n=e.width,r=e.height,a=t.fillColor;t.maskId="mask".concat(D++);var l=this.svgFactory.createElement("svg:mask");l.setAttributeNS(null,"id",t.maskId);var d=this.svgFactory.createElement("svg:rect");d.setAttributeNS(null,"x","0"),d.setAttributeNS(null,"y","0"),d.setAttributeNS(null,"width",x(n)),d.setAttributeNS(null,"height",x(r)),d.setAttributeNS(null,"fill",a),d.setAttributeNS(null,"mask","url(#".concat(t.maskId,")")),this.defs.appendChild(l),this._ensureTransformGroup().appendChild(d),this.paintInlineImageXObject(e,l)}},{key:"paintFormXObjectBegin",value:function(e,t){if(Array.isArray(e)&&6===e.length&&this.transform(e[0],e[1],e[2],e[3],e[4],e[5]),t){var n=t[2]-t[0],r=t[3]-t[1],a=this.svgFactory.createElement("svg:rect");a.setAttributeNS(null,"x",t[0]),a.setAttributeNS(null,"y",t[1]),a.setAttributeNS(null,"width",x(n)),a.setAttributeNS(null,"height",x(r)),this.current.element=a,this.clip("nonzero"),this.endPath()}}},{key:"paintFormXObjectEnd",value:function(){}},{key:"_initialize",value:function(e){var t=this.svgFactory.create(e.width,e.height),n=this.svgFactory.createElement("svg:defs");t.appendChild(n),this.defs=n;var r=this.svgFactory.createElement("svg:g");return r.setAttributeNS(null,"transform",E(e.transform)),t.appendChild(r),this.svg=r,t}},{key:"_ensureClipGroup",value:function(){if(!this.current.clipGroup){var e=this.svgFactory.createElement("svg:g");e.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild(e),this.current.clipGroup=e}return this.current.clipGroup}},{key:"_ensureTransformGroup",value:function(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",E(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)),this.tgrp}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNodeStream=void 0;var a,l=(a=r(148))&&a.__esModule?a:{default:a},d=r(1),h=r(166);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e,t,n,r,a,l,d){try{var h=e[l](d),f=h.value}catch(e){return void n(e)}h.done?t(f):Promise.resolve(f).then(r,a)}function S(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var l=e.apply(t,n);function d(e){C(l,r,a,d,h,"next",e)}function h(e){C(l,r,a,d,h,"throw",e)}d(void 0)}))}}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t,n){return t&&x(e.prototype,t),n&&x(e,n),e}var A=n(731),T=n(732),R=n(733),O=n(734),M=/^file:\/\/\/[a-zA-Z]:\//,P=function(){function e(t){var n,r;k(this,e),this.source=t,this.url=(n=t.url,"file:"===(r=O.parse(n)).protocol||r.host?r:/^[a-z]:[/\\]/i.test(n)?O.parse("file:///".concat(n)):(r.host||(r.protocol="file:"),r)),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}return E(e,[{key:"getFullReader",value:function(){return(0,d.assert)(!this._fullRequestReader),this._fullRequestReader=this.isFsUrl?new N(this):new F(this),this._fullRequestReader}},{key:"getRangeReader",value:function(e,t){if(t<=this._progressiveDataLength)return null;var n=this.isFsUrl?new B(this,e,t):new j(this,e,t);return this._rangeRequestReaders.push(n),n}},{key:"cancelAllRequests",value:function(e){this._fullRequestReader&&this._fullRequestReader.cancel(e),this._rangeRequestReaders.slice(0).forEach((function(t){t.cancel(e)}))}},{key:"_progressiveDataLength",get:function(){return this._fullRequestReader?this._fullRequestReader._loaded:0}}]),e}();t.PDFNodeStream=P;var L=function(){function e(t){k(this,e),this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;var n=t.source;this._contentLength=n.length,this._loaded=0,this._filename=null,this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange,this._readableStream=null,this._readCapability=(0,d.createPromiseCapability)(),this._headersCapability=(0,d.createPromiseCapability)()}var t;return E(e,[{key:"read",value:(t=S(l.default.mark((function e(){var t,n;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._readCapability.promise;case 2:if(!this._done){e.next=4;break}return e.abrupt("return",{value:void 0,done:!0});case 4:if(!this._storedError){e.next=6;break}throw this._storedError;case 6:if(null!==(t=this._readableStream.read())){e.next=10;break}return this._readCapability=(0,d.createPromiseCapability)(),e.abrupt("return",this.read());case 10:return this._loaded+=t.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),n=new Uint8Array(t).buffer,e.abrupt("return",{value:n,done:!1});case 14:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"cancel",value:function(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}},{key:"_error",value:function(e){this._storedError=e,this._readCapability.resolve()}},{key:"_setReadableStream",value:function(e){var t=this;this._readableStream=e,e.on("readable",(function(){t._readCapability.resolve()})),e.on("end",(function(){e.destroy(),t._done=!0,t._readCapability.resolve()})),e.on("error",(function(e){t._error(e)})),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new d.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}},{key:"headersReady",get:function(){return this._headersCapability.promise}},{key:"filename",get:function(){return this._filename}},{key:"contentLength",get:function(){return this._contentLength}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}}]),e}(),D=function(){function e(t){k(this,e),this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,d.createPromiseCapability)();var n=t.source;this._isStreamingSupported=!n.disableStream}var t;return E(e,[{key:"read",value:(t=S(l.default.mark((function e(){var t,n;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._readCapability.promise;case 2:if(!this._done){e.next=4;break}return e.abrupt("return",{value:void 0,done:!0});case 4:if(!this._storedError){e.next=6;break}throw this._storedError;case 6:if(null!==(t=this._readableStream.read())){e.next=10;break}return this._readCapability=(0,d.createPromiseCapability)(),e.abrupt("return",this.read());case 10:return this._loaded+=t.length,this.onProgress&&this.onProgress({loaded:this._loaded}),n=new Uint8Array(t).buffer,e.abrupt("return",{value:n,done:!1});case 14:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"cancel",value:function(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}},{key:"_error",value:function(e){this._storedError=e,this._readCapability.resolve()}},{key:"_setReadableStream",value:function(e){var t=this;this._readableStream=e,e.on("readable",(function(){t._readCapability.resolve()})),e.on("end",(function(){e.destroy(),t._done=!0,t._readCapability.resolve()})),e.on("error",(function(e){t._error(e)})),this._storedError&&this._readableStream.destroy(this._storedError)}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}}]),e}();function I(e,t){return{protocol:e.protocol,auth:e.auth,host:e.hostname,port:e.port,path:e.path,method:"GET",headers:t}}var F=function(e){function t(e){var n;k(this,t);var r=function(t){if(404===t.statusCode){var r=new d.MissingPDFException('Missing PDF "'.concat(n._url,'".'));return n._storedError=r,void n._headersCapability.reject(r)}n._headersCapability.resolve(),n._setReadableStream(t);var a=function(e){return n._readableStream.headers[e.toLowerCase()]},l=(0,h.validateRangeRequestCapabilities)({getResponseHeader:a,isHttp:e.isHttp,rangeChunkSize:n._rangeChunkSize,disableRange:n._disableRange}),f=l.allowRangeRequests,p=l.suggestedLength;n._isRangeSupported=f,n._contentLength=p||n._contentLength,n._filename=(0,h.extractFilenameFromHeader)(a)};return(n=p(this,y(t).call(this,e)))._request=null,"http:"===n._url.protocol?n._request=T.request(I(n._url,e.httpHeaders),r):n._request=R.request(I(n._url,e.httpHeaders),r),n._request.on("error",(function(e){n._storedError=e,n._headersCapability.reject(e)})),n._request.end(),n}return w(t,e),t}(L),j=function(e){function t(e,n,r){var a;for(var l in k(this,t),(a=p(this,y(t).call(this,e)))._httpHeaders={},e.httpHeaders){var h=e.httpHeaders[l];void 0!==h&&(a._httpHeaders[l]=h)}a._httpHeaders.Range="bytes=".concat(n,"-").concat(r-1);var f=function(e){if(404!==e.statusCode)a._setReadableStream(e);else{var t=new d.MissingPDFException('Missing PDF "'.concat(a._url,'".'));a._storedError=t}};return a._request=null,"http:"===a._url.protocol?a._request=T.request(I(a._url,a._httpHeaders),f):a._request=R.request(I(a._url,a._httpHeaders),f),a._request.on("error",(function(e){a._storedError=e})),a._request.end(),a}return w(t,e),t}(D),N=function(e){function t(e){var n;k(this,t),n=p(this,y(t).call(this,e));var r=decodeURIComponent(n._url.path);return M.test(n._url.href)&&(r=r.replace(/^\//,"")),A.lstat(r,(function(e,t){if(e)return"ENOENT"===e.code&&(e=new d.MissingPDFException('Missing PDF "'.concat(r,'".'))),n._storedError=e,void n._headersCapability.reject(e);n._contentLength=t.size,n._setReadableStream(A.createReadStream(r)),n._headersCapability.resolve()})),n}return w(t,e),t}(L),B=function(e){function t(e,n,r){var a;k(this,t),a=p(this,y(t).call(this,e));var l=decodeURIComponent(a._url.path);return M.test(a._url.href)&&(l=l.replace(/^\//,"")),a._setReadableStream(A.createReadStream(l,{start:n,end:r-1})),a}return w(t,e),t}(D)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createResponseStatusError=function createResponseStatusError(e,t){return 404===e||0===e&&/^file:/.test(t)?new r.MissingPDFException('Missing PDF "'+t+'".'):new r.UnexpectedResponseException("Unexpected server response ("+e+') while retrieving PDF "'+t+'".',e)},t.extractFilenameFromHeader=function(e){var t=e("Content-Disposition");if(t){var n=(0,a.getFilenameFromContentDispositionHeader)(t);if(/\.pdf$/i.test(n))return n}return null},t.validateRangeRequestCapabilities=function(e){var t=e.getResponseHeader,n=e.isHttp,a=e.rangeChunkSize,l=e.disableRange;(0,r.assert)(a>0,"Range chunk size must be larger than zero");var d={allowRangeRequests:!1,suggestedLength:void 0},h=parseInt(t("Content-Length"),10);return Number.isInteger(h)?(d.suggestedLength=h,h<=2*a||l||!n||"bytes"!==t("Accept-Ranges")||"identity"!==(t("Content-Encoding")||"identity")||(d.allowRangeRequests=!0),d):d},t.validateResponseStatus=function(e){return 200===e||206===e};var r=n(1),a=n(167)},function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,l=void 0;try{for(var d,h=e[Symbol.iterator]();!(r=(d=h.next()).done)&&(n.push(d.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==h.return||h.return()}finally{if(a)throw l}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}Object.defineProperty(t,"__esModule",{value:!0}),t.getFilenameFromContentDispositionHeader=function(e){var t=!0,n=d("filename\\*","i").exec(e);if(n){var a=p(n=n[1]);return f(a=w(a=y(a=unescape(a))))}if(n=function(e){for(var t,n=[],a=d("filename\\*((?!0\\d)\\d+)(\\*?)","ig");null!==(t=a.exec(e));){var l=r(t,4),h=l[1],f=l[2],w=l[3];if((h=parseInt(h,10))in n){if(0===h)break}else n[h]=[f,w]}var _=[];for(h=0;h<n.length&&h in n;++h){var C=r(n[h],2);f=C[0],w=p(w=C[1]),f&&(w=unescape(w),0===h&&(w=y(w))),_.push(w)}return _.join("")}(e))return f(w(n));if(n=d("filename","i").exec(e)){var l=p(n=n[1]);return f(l=w(l))}function d(e,t){return new RegExp("(?:^|;)\\s*"+e+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',t)}function h(e,n){if(e){if(!/^[\x00-\xFF]+$/.test(n))return n;try{var r=new TextDecoder(e,{fatal:!0}),a=Array.from(n,(function(e){return 255&e.charCodeAt(0)}));n=r.decode(new Uint8Array(a)),t=!1}catch(r){if(/^utf-?8$/i.test(e))try{n=decodeURIComponent(escape(n)),t=!1}catch(e){}}}return n}function f(e){return t&&/[\x80-\xff]/.test(e)&&(e=h("utf-8",e),t&&(e=h("iso-8859-1",e))),e}function p(e){if(e.startsWith('"')){for(var t=e.slice(1).split('\\"'),n=0;n<t.length;++n){var r=t[n].indexOf('"');-1!==r&&(t[n]=t[n].slice(0,r),t.length=n+1),t[n]=t[n].replace(/\\(.)/g,"$1")}e=t.join('"')}return e}function y(e){var t=e.indexOf("'");return-1===t?e:h(e.slice(0,t),e.slice(t+1).replace(/^[^']*'/,""))}function w(e){return!e.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(e)?e:e.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,(function(e,t,n,r){if("q"===n||"Q"===n)return h(t,r=(r=r.replace(/_/g," ")).replace(/=([0-9a-fA-F]{2})/g,(function(e,t){return String.fromCharCode(parseInt(t,16))})));try{r=atob(r)}catch(e){}return h(t,r)}))}return""}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNetworkStream=void 0;var r,a=(r=n(148))&&r.__esModule?r:{default:r},l=n(1),d=n(166);function h(e,t,n,r,a,l,d){try{var h=e[l](d),f=h.value}catch(e){return void n(e)}h.done?t(f):Promise.resolve(f).then(r,a)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var l=e.apply(t,n);function d(e){h(l,r,a,d,f,"next",e)}function f(e){h(l,r,a,d,f,"throw",e)}d(void 0)}))}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t,n){return t&&y(e.prototype,t),n&&y(e,n),e}var _=function(){function e(t,n){p(this,e),this.url=t,n=n||{},this.isHttp=/^https?:/i.test(t),this.httpHeaders=this.isHttp&&n.httpHeaders||{},this.withCredentials=n.withCredentials||!1,this.getXhr=n.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}return w(e,[{key:"requestRange",value:function(e,t,n){var r={begin:e,end:t};for(var a in n)r[a]=n[a];return this.request(r)}},{key:"requestFull",value:function(e){return this.request(e)}},{key:"request",value:function(e){var t=this.getXhr(),n=this.currXhrId++,r=this.pendingRequests[n]={xhr:t};for(var a in t.open("GET",this.url),t.withCredentials=this.withCredentials,this.httpHeaders){var l=this.httpHeaders[a];void 0!==l&&t.setRequestHeader(a,l)}return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range","bytes=".concat(e.begin,"-").concat(e.end-1)),r.expectedStatus=206):r.expectedStatus=200,t.responseType="arraybuffer",e.onError&&(t.onerror=function(n){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),n}},{key:"onProgress",value:function(e,t){var n=this.pendingRequests[e];n&&n.onProgress&&n.onProgress(t)}},{key:"onStateChange",value:function(e,t){var n=this.pendingRequests[e];if(n){var r=n.xhr;if(r.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),4===r.readyState&&e in this.pendingRequests)if(delete this.pendingRequests[e],0===r.status&&this.isHttp)n.onError&&n.onError(r.status);else{var a=r.status||200;if(200===a&&206===n.expectedStatus||a===n.expectedStatus){var d=function(e){var t=e.response;return"string"!=typeof t?t:(0,l.stringToBytes)(t).buffer}(r);if(206===a){var h=r.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(h);n.onDone({begin:parseInt(f[1],10),chunk:d})}else d?n.onDone({begin:0,chunk:d}):n.onError&&n.onError(r.status)}else n.onError&&n.onError(r.status)}}}},{key:"hasPendingRequests",value:function(){for(var e in this.pendingRequests)return!0;return!1}},{key:"getRequestXhr",value:function(e){return this.pendingRequests[e].xhr}},{key:"isPendingRequest",value:function(e){return e in this.pendingRequests}},{key:"abortAllRequests",value:function(){for(var e in this.pendingRequests)this.abortRequest(0|e)}},{key:"abortRequest",value:function(e){var t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}]),e}(),C=function(){function e(t){p(this,e),this._source=t,this._manager=new _(t.url,{httpHeaders:t.httpHeaders,withCredentials:t.withCredentials}),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}return w(e,[{key:"_onRangeRequestReaderClosed",value:function(e){var t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}},{key:"getFullReader",value:function(){return(0,l.assert)(!this._fullRequestReader),this._fullRequestReader=new S(this._manager,this._source),this._fullRequestReader}},{key:"getRangeReader",value:function(e,t){var n=new k(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}},{key:"cancelAllRequests",value:function(e){this._fullRequestReader&&this._fullRequestReader.cancel(e),this._rangeRequestReaders.slice(0).forEach((function(t){t.cancel(e)}))}}]),e}();t.PDFNetworkStream=C;var S=function(){function e(t,n){p(this,e),this._manager=t;var r={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=n.url,this._fullRequestId=t.requestFull(r),this._headersReceivedCapability=(0,l.createPromiseCapability)(),this._disableRange=n.disableRange||!1,this._contentLength=n.length,this._rangeChunkSize=n.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}var t;return w(e,[{key:"_onHeadersReceived",value:function(){var e=this._fullRequestId,t=this._manager.getRequestXhr(e),n=function(e){return t.getResponseHeader(e)},r=(0,d.validateRangeRequestCapabilities)({getResponseHeader:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange}),a=r.allowRangeRequests,l=r.suggestedLength;a&&(this._isRangeSupported=!0),this._contentLength=l||this._contentLength,this._filename=(0,d.extractFilenameFromHeader)(n),this._isRangeSupported&&this._manager.abortRequest(e),this._headersReceivedCapability.resolve()}},{key:"_onDone",value:function(e){e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,this._cachedChunks.length>0||(this._requests.forEach((function(e){e.resolve({value:void 0,done:!0})})),this._requests=[])}},{key:"_onError",value:function _onError(e){var t=this._url,n=(0,d.createResponseStatusError)(e,t);this._storedError=n,this._headersReceivedCapability.reject(n),this._requests.forEach((function(e){e.reject(n)})),this._requests=[],this._cachedChunks=[]}},{key:"_onProgress",value:function(e){this.onProgress&&this.onProgress({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}},{key:"read",value:(t=f(a.default.mark((function e(){var t,n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._storedError){e.next=2;break}throw this._storedError;case 2:if(!(this._cachedChunks.length>0)){e.next=5;break}return t=this._cachedChunks.shift(),e.abrupt("return",{value:t,done:!1});case 5:if(!this._done){e.next=7;break}return e.abrupt("return",{value:void 0,done:!0});case 7:return n=(0,l.createPromiseCapability)(),this._requests.push(n),e.abrupt("return",n.promise);case 10:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"cancel",value:function(e){this._done=!0,this._headersReceivedCapability.reject(e),this._requests.forEach((function(e){e.resolve({value:void 0,done:!0})})),this._requests=[],this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}},{key:"filename",get:function(){return this._filename}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"contentLength",get:function(){return this._contentLength}},{key:"headersReady",get:function(){return this._headersReceivedCapability.promise}}]),e}(),k=function(){function e(t,n,r){p(this,e),this._manager=t;var a={onDone:this._onDone.bind(this),onProgress:this._onProgress.bind(this)};this._requestId=t.requestRange(n,r,a),this._requests=[],this._queuedChunk=null,this._done=!1,this.onProgress=null,this.onClosed=null}var t;return w(e,[{key:"_close",value:function(){this.onClosed&&this.onClosed(this)}},{key:"_onDone",value:function(e){var t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0,this._requests.forEach((function(e){e.resolve({value:void 0,done:!0})})),this._requests=[],this._close()}},{key:"_onProgress",value:function(e){!this.isStreamingSupported&&this.onProgress&&this.onProgress({loaded:e.loaded})}},{key:"read",value:(t=f(a.default.mark((function e(){var t,n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===this._queuedChunk){e.next=4;break}return t=this._queuedChunk,this._queuedChunk=null,e.abrupt("return",{value:t,done:!1});case 4:if(!this._done){e.next=6;break}return e.abrupt("return",{value:void 0,done:!0});case 6:return n=(0,l.createPromiseCapability)(),this._requests.push(n),e.abrupt("return",n.promise);case 9:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"cancel",value:function(e){this._done=!0,this._requests.forEach((function(e){e.resolve({value:void 0,done:!0})})),this._requests=[],this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}},{key:"isStreamingSupported",get:function(){return!1}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFetchStream=void 0;var r,a=(r=n(148))&&r.__esModule?r:{default:r},l=n(1),d=n(166);function h(e,t,n,r,a,l,d){try{var h=e[l](d),f=h.value}catch(e){return void n(e)}h.done?t(f):Promise.resolve(f).then(r,a)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var l=e.apply(t,n);function d(e){h(l,r,a,d,f,"next",e)}function f(e){h(l,r,a,d,f,"throw",e)}d(void 0)}))}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t,n){return t&&y(e.prototype,t),n&&y(e,n),e}function _(e,t,n){return{method:"GET",headers:e,signal:n&&n.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}var C=function(){function e(t){p(this,e),this.source=t,this.isHttp=/^https?:/i.test(t.url),this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}return w(e,[{key:"getFullReader",value:function(){return(0,l.assert)(!this._fullRequestReader),this._fullRequestReader=new S(this),this._fullRequestReader}},{key:"getRangeReader",value:function(e,t){if(t<=this._progressiveDataLength)return null;var n=new k(this,e,t);return this._rangeRequestReaders.push(n),n}},{key:"cancelAllRequests",value:function(e){this._fullRequestReader&&this._fullRequestReader.cancel(e),this._rangeRequestReaders.slice(0).forEach((function(t){t.cancel(e)}))}},{key:"_progressiveDataLength",get:function(){return this._fullRequestReader?this._fullRequestReader._loaded:0}}]),e}();t.PDFFetchStream=C;var S=function(){function e(t){var n=this;p(this,e),this._stream=t,this._reader=null,this._loaded=0,this._filename=null;var r=t.source;for(var a in this._withCredentials=r.withCredentials||!1,this._contentLength=r.length,this._headersCapability=(0,l.createPromiseCapability)(),this._disableRange=r.disableRange||!1,this._rangeChunkSize=r.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),"undefined"!=typeof AbortController&&(this._abortController=new AbortController),this._isStreamingSupported=!r.disableStream,this._isRangeSupported=!r.disableRange,this._headers=new Headers,this._stream.httpHeaders){var h=this._stream.httpHeaders[a];void 0!==h&&this._headers.append(a,h)}var f=r.url;fetch(f,_(this._headers,this._withCredentials,this._abortController)).then((function(e){if(!(0,d.validateResponseStatus)(e.status))throw(0,d.createResponseStatusError)(e.status,f);n._reader=e.body.getReader(),n._headersCapability.resolve();var t=function(t){return e.headers.get(t)},r=(0,d.validateRangeRequestCapabilities)({getResponseHeader:t,isHttp:n._stream.isHttp,rangeChunkSize:n._rangeChunkSize,disableRange:n._disableRange}),a=r.allowRangeRequests,h=r.suggestedLength;n._isRangeSupported=a,n._contentLength=h||n._contentLength,n._filename=(0,d.extractFilenameFromHeader)(t),!n._isStreamingSupported&&n._isRangeSupported&&n.cancel(new l.AbortException("Streaming is disabled."))})).catch(this._headersCapability.reject),this.onProgress=null}var t;return w(e,[{key:"read",value:(t=f(a.default.mark((function e(){var t,n,r,l;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._headersCapability.promise;case 2:return e.next=4,this._reader.read();case 4:if(t=e.sent,n=t.value,!(r=t.done)){e.next=9;break}return e.abrupt("return",{value:n,done:r});case 9:return this._loaded+=n.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),l=new Uint8Array(n).buffer,e.abrupt("return",{value:l,done:!1});case 13:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"cancel",value:function(e){this._reader&&this._reader.cancel(e),this._abortController&&this._abortController.abort()}},{key:"headersReady",get:function(){return this._headersCapability.promise}},{key:"filename",get:function(){return this._filename}},{key:"contentLength",get:function(){return this._contentLength}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}}]),e}(),k=function(){function e(t,n,r){var a=this;p(this,e),this._stream=t,this._reader=null,this._loaded=0;var h=t.source;for(var f in this._withCredentials=h.withCredentials||!1,this._readCapability=(0,l.createPromiseCapability)(),this._isStreamingSupported=!h.disableStream,"undefined"!=typeof AbortController&&(this._abortController=new AbortController),this._headers=new Headers,this._stream.httpHeaders){var y=this._stream.httpHeaders[f];void 0!==y&&this._headers.append(f,y)}this._headers.append("Range","bytes=".concat(n,"-").concat(r-1));var w=h.url;fetch(w,_(this._headers,this._withCredentials,this._abortController)).then((function(e){if(!(0,d.validateResponseStatus)(e.status))throw(0,d.createResponseStatusError)(e.status,w);a._readCapability.resolve(),a._reader=e.body.getReader()})),this.onProgress=null}var t;return w(e,[{key:"read",value:(t=f(a.default.mark((function e(){var t,n,r,l;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._readCapability.promise;case 2:return e.next=4,this._reader.read();case 4:if(t=e.sent,n=t.value,!(r=t.done)){e.next=9;break}return e.abrupt("return",{value:n,done:r});case 9:return this._loaded+=n.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),l=new Uint8Array(n).buffer,e.abrupt("return",{value:l,done:!1});case 13:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"cancel",value:function(e){this._reader&&this._reader.cancel(e),this._abortController&&this._abortController.abort()}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}}]),e}()}])},e.exports=l()}).call(this,n(338).Buffer,n(39),n(113))},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";var r=n(735),a=n(736);function l(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=T,t.resolve=function(e,t){return T(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?T(e,!1,!0).resolveObject(t):t},t.format=function(e){a.isString(e)&&(e=T(e));return e instanceof l?e.format():l.prototype.format.call(e)},t.Url=l;var d=/^([a-z0-9.+-]+:)/i,h=/:[0-9]*$/,f=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,p=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),y=["'"].concat(p),w=["%","/","?",";","#"].concat(y),_=["/","?","#"],C=/^[+a-z0-9A-Z_-]{0,63}$/,S=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,k={javascript:!0,"javascript:":!0},x={javascript:!0,"javascript:":!0},E={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},A=n(333);function T(e,t,n){if(e&&a.isObject(e)&&e instanceof l)return e;var r=new l;return r.parse(e,t,n),r}l.prototype.parse=function(e,t,n){if(!a.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var l=e.indexOf("?"),h=-1!==l&&l<e.indexOf("#")?"?":"#",p=e.split(h);p[0]=p[0].replace(/\\/g,"/");var T=e=p.join(h);if(T=T.trim(),!n&&1===e.split("#").length){var R=f.exec(T);if(R)return this.path=T,this.href=T,this.pathname=R[1],R[2]?(this.search=R[2],this.query=t?A.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var O=d.exec(T);if(O){var M=(O=O[0]).toLowerCase();this.protocol=M,T=T.substr(O.length)}if(n||O||T.match(/^\/\/[^@\/]+@[^@\/]+/)){var P="//"===T.substr(0,2);!P||O&&x[O]||(T=T.substr(2),this.slashes=!0)}if(!x[O]&&(P||O&&!E[O])){for(var L,D,I=-1,F=0;F<_.length;F++){-1!==(j=T.indexOf(_[F]))&&(-1===I||j<I)&&(I=j)}-1!==(D=-1===I?T.lastIndexOf("@"):T.lastIndexOf("@",I))&&(L=T.slice(0,D),T=T.slice(D+1),this.auth=decodeURIComponent(L)),I=-1;for(F=0;F<w.length;F++){var j;-1!==(j=T.indexOf(w[F]))&&(-1===I||j<I)&&(I=j)}-1===I&&(I=T.length),this.host=T.slice(0,I),T=T.slice(I),this.parseHost(),this.hostname=this.hostname||"";var N="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!N)for(var B=this.hostname.split(/\./),z=(F=0,B.length);F<z;F++){var H=B[F];if(H&&!H.match(C)){for(var U="",W=0,V=H.length;W<V;W++)H.charCodeAt(W)>127?U+="x":U+=H[W];if(!U.match(C)){var q=B.slice(0,F),G=B.slice(F+1),K=H.match(S);K&&(q.push(K[1]),G.unshift(K[2])),G.length&&(T="/"+G.join(".")+T),this.hostname=q.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),N||(this.hostname=r.toASCII(this.hostname));var Y=this.port?":"+this.port:"",X=this.hostname||"";this.host=X+Y,this.href+=this.host,N&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==T[0]&&(T="/"+T))}if(!k[M])for(F=0,z=y.length;F<z;F++){var J=y[F];if(-1!==T.indexOf(J)){var Q=encodeURIComponent(J);Q===J&&(Q=escape(J)),T=T.split(J).join(Q)}}var Z=T.indexOf("#");-1!==Z&&(this.hash=T.substr(Z),T=T.slice(0,Z));var ee=T.indexOf("?");if(-1!==ee?(this.search=T.substr(ee),this.query=T.substr(ee+1),t&&(this.query=A.parse(this.query)),T=T.slice(0,ee)):t&&(this.search="",this.query={}),T&&(this.pathname=T),E[M]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){Y=this.pathname||"";var te=this.search||"";this.path=Y+te}return this.href=this.format(),this},l.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",l=!1,d="";this.host?l=e+this.host:this.hostname&&(l=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(l+=":"+this.port)),this.query&&a.isObject(this.query)&&Object.keys(this.query).length&&(d=A.stringify(this.query));var h=this.search||d&&"?"+d||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||E[t])&&!1!==l?(l="//"+(l||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):l||(l=""),r&&"#"!==r.charAt(0)&&(r="#"+r),h&&"?"!==h.charAt(0)&&(h="?"+h),t+l+(n=n.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(h=h.replace("#","%23"))+r},l.prototype.resolve=function(e){return this.resolveObject(T(e,!1,!0)).format()},l.prototype.resolveObject=function(e){if(a.isString(e)){var t=new l;t.parse(e,!1,!0),e=t}for(var n=new l,r=Object.keys(this),d=0;d<r.length;d++){var h=r[d];n[h]=this[h]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var f=Object.keys(e),p=0;p<f.length;p++){var y=f[p];"protocol"!==y&&(n[y]=e[y])}return E[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!E[e.protocol]){for(var w=Object.keys(e),_=0;_<w.length;_++){var C=w[_];n[C]=e[C]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||x[e.protocol])n.pathname=e.pathname;else{for(var S=(e.pathname||"").split("/");S.length&&!(e.host=S.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==S[0]&&S.unshift(""),S.length<2&&S.unshift(""),n.pathname=S.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var k=n.pathname||"",A=n.search||"";n.path=k+A}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var T=n.pathname&&"/"===n.pathname.charAt(0),R=e.host||e.pathname&&"/"===e.pathname.charAt(0),O=R||T||n.host&&e.pathname,M=O,P=n.pathname&&n.pathname.split("/")||[],L=(S=e.pathname&&e.pathname.split("/")||[],n.protocol&&!E[n.protocol]);if(L&&(n.hostname="",n.port=null,n.host&&(""===P[0]?P[0]=n.host:P.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===S[0]?S[0]=e.host:S.unshift(e.host)),e.host=null),O=O&&(""===S[0]||""===P[0])),R)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,P=S;else if(S.length)P||(P=[]),P.pop(),P=P.concat(S),n.search=e.search,n.query=e.query;else if(!a.isNullOrUndefined(e.search)){if(L)n.hostname=n.host=P.shift(),(N=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=N.shift(),n.host=n.hostname=N.shift());return n.search=e.search,n.query=e.query,a.isNull(n.pathname)&&a.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!P.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var D=P.slice(-1)[0],I=(n.host||e.host||P.length>1)&&("."===D||".."===D)||""===D,F=0,j=P.length;j>=0;j--)"."===(D=P[j])?P.splice(j,1):".."===D?(P.splice(j,1),F++):F&&(P.splice(j,1),F--);if(!O&&!M)for(;F--;F)P.unshift("..");!O||""===P[0]||P[0]&&"/"===P[0].charAt(0)||P.unshift(""),I&&"/"!==P.join("/").substr(-1)&&P.push("");var N,B=""===P[0]||P[0]&&"/"===P[0].charAt(0);L&&(n.hostname=n.host=B?"":P.length?P.shift():"",(N=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=N.shift(),n.host=n.hostname=N.shift()));return(O=O||n.host&&P.length)&&!B&&P.unshift(""),P.length?n.pathname=P.join("/"):(n.pathname=null,n.path=null),a.isNull(n.pathname)&&a.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},l.prototype.parseHost=function(){var e=this.host,t=h.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,n){(function(e,r){var a;!function(l){t&&t.nodeType,e&&e.nodeType;var d="object"==typeof r&&r;d.global!==d&&d.window!==d&&d.self;var h,f=2147483647,p=/^xn--/,y=/[^\x20-\x7E]/,w=/[\x2E\u3002\uFF0E\uFF61]/g,_={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},C=Math.floor,S=String.fromCharCode;function k(e){throw new RangeError(_[e])}function x(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function E(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+x((e=e.replace(w,".")).split("."),t).join(".")}function A(e){for(var t,n,r=[],a=0,l=e.length;a<l;)(t=e.charCodeAt(a++))>=55296&&t<=56319&&a<l?56320==(64512&(n=e.charCodeAt(a++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),a--):r.push(t);return r}function T(e){return x(e,(function(e){var t="";return e>65535&&(t+=S((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=S(e)})).join("")}function R(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function O(e,t,n){var r=0;for(e=n?C(e/700):e>>1,e+=C(e/t);e>455;r+=36)e=C(e/35);return C(r+36*e/(e+38))}function M(e){var t,n,r,a,l,d,h,p,y,w,_,S=[],x=e.length,E=0,A=128,R=72;for((n=e.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&k("not-basic"),S.push(e.charCodeAt(r));for(a=n>0?n+1:0;a<x;){for(l=E,d=1,h=36;a>=x&&k("invalid-input"),((p=(_=e.charCodeAt(a++))-48<10?_-22:_-65<26?_-65:_-97<26?_-97:36)>=36||p>C((f-E)/d))&&k("overflow"),E+=p*d,!(p<(y=h<=R?1:h>=R+26?26:h-R));h+=36)d>C(f/(w=36-y))&&k("overflow"),d*=w;R=O(E-l,t=S.length+1,0==l),C(E/t)>f-A&&k("overflow"),A+=C(E/t),E%=t,S.splice(E++,0,A)}return T(S)}function P(e){var t,n,r,a,l,d,h,p,y,w,_,x,E,T,M,P=[];for(x=(e=A(e)).length,t=128,n=0,l=72,d=0;d<x;++d)(_=e[d])<128&&P.push(S(_));for(r=a=P.length,a&&P.push("-");r<x;){for(h=f,d=0;d<x;++d)(_=e[d])>=t&&_<h&&(h=_);for(h-t>C((f-n)/(E=r+1))&&k("overflow"),n+=(h-t)*E,t=h,d=0;d<x;++d)if((_=e[d])<t&&++n>f&&k("overflow"),_==t){for(p=n,y=36;!(p<(w=y<=l?1:y>=l+26?26:y-l));y+=36)M=p-w,T=36-w,P.push(S(R(w+M%T,0))),p=C(M/T);P.push(S(R(p,0))),l=O(n,E,r==a),n=0,++r}++n,++t}return P.join("")}h={version:"1.4.1",ucs2:{decode:A,encode:T},decode:M,encode:P,toASCII:function(e){return E(e,(function(e){return y.test(e)?"xn--"+P(e):e}))},toUnicode:function(e){return E(e,(function(e){return p.test(e)?M(e.slice(4).toLowerCase()):e}))}},void 0===(a=function(){return h}.call(t,n,t,e))||(e.exports=a)}()}).call(this,n(68)(e),n(39))},function(e,t,n){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,n){"use strict";var r=n(18),a=n(738),l=n(58),d=n(47),h=n(82),f=n(167);r({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=l(this),n=d(t.length),r=f(t,0);return r.length=a(r,t,t,n,0,void 0===e?1:h(e)),r}})},function(e,t,n){"use strict";var r=n(138),a=n(47),l=n(98),d=function(e,t,n,h,f,p,y,w){for(var _,C=f,S=0,k=!!y&&l(y,w,3);S<h;){if(S in n){if(_=k?k(n[S],S,t):n[S],p>0&&r(_))C=d(e,t,_,a(_.length),C,p-1)-1;else{if(C>=9007199254740991)throw TypeError("Exceed the acceptable array length");e[C]=_}C++}S++}return C};e.exports=d},function(e,t,n){n(135)("flat")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),l=p(n(741)),d=p(n(742)),h=p(n(743)),f=p(n(751));function p(e){return e&&e.__esModule?e:{default:e}}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var _=function(e){function t(){return y(this,t),w(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"parseString",value:function(e){var t=this;if(""===e)return e;var n=this.props.matchDecorator(e);if(!n)return e;var r=[],a=0;return n.forEach((function(n,l){n.index>a&&r.push(e.substring(a,n.index));var d=t.props.hrefDecorator(n.url),h=t.props.textDecorator(n.text),f=t.props.componentDecorator(d,h,l);r.push(f),a=n.lastIndex})),e.length>a&&r.push(e.substring(a)),1===r.length?r[0]:r}},{key:"parse",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"string"==typeof e?this.parseString(e):a.isValidElement(e)&&"a"!==e.type&&"button"!==e.type?a.cloneElement(e,{key:n},this.parse(e.props.children)):Array.isArray(e)?e.map((function(e,n){return t.parse(e,n)})):e}},{key:"render",value:function(){return a.createElement(a.Fragment,null,this.parse(this.props.children))}}]),t}(a.Component);_.defaultProps={componentDecorator:l.default,hrefDecorator:d.default,matchDecorator:h.default,textDecorator:f.default},t.default=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0));t.default=function(e,t,n){return r.createElement("a",{href:e,key:n},t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l(n(744)),a=l(n(750));function l(e){return e&&e.__esModule?e:{default:e}}var d=new r.default;d.tlds(a.default),t.default=function(e){return d.match(e)}},function(e,t,n){"use strict";function r(e){var t=Array.prototype.slice.call(arguments,1);return t.forEach((function(t){t&&Object.keys(t).forEach((function(n){e[n]=t[n]}))})),e}function a(e){return Object.prototype.toString.call(e)}function l(e){return"[object Function]"===a(e)}function d(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var h={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};var f={"http:":{validate:function(e,t,n){var r=e.slice(t);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){var r=e.slice(t);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?t>=3&&":"===e[t-3]||t>=3&&"/"===e[t-3]?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,n){var r=e.slice(t);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},p="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|рф".split("|");function y(e){var t=e.re=n(745)(e.__opts__),r=e.__tlds__.slice();function h(e){return e.replace("%TLDS%",t.src_tlds)}e.onCompile(),e.__tlds_replaced__||r.push("a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]"),r.push(t.src_xn),t.src_tlds=r.join("|"),t.email_fuzzy=RegExp(h(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(h(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(h(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(h(t.tpl_host_fuzzy_test),"i");var f=[];function schemaError(e,t){throw new Error('(LinkifyIt) Invalid schema "'+e+'": '+t)}e.__compiled__={},Object.keys(e.__schemas__).forEach((function(t){var n=e.__schemas__[t];if(null!==n){var r={validate:null,link:null};if(e.__compiled__[t]=r,"[object Object]"===a(n))return!function(e){return"[object RegExp]"===a(e)}(n.validate)?l(n.validate)?r.validate=n.validate:schemaError(t,n):r.validate=function(e){return function(t,n){var r=t.slice(n);return e.test(r)?r.match(e)[0].length:0}}(n.validate),void(l(n.normalize)?r.normalize=n.normalize:n.normalize?schemaError(t,n):r.normalize=function(e,t){t.normalize(e)});!function(e){return"[object String]"===a(e)}(n)?schemaError(t,n):f.push(t)}})),f.forEach((function(t){e.__compiled__[e.__schemas__[t]]&&(e.__compiled__[t].validate=e.__compiled__[e.__schemas__[t]].validate,e.__compiled__[t].normalize=e.__compiled__[e.__schemas__[t]].normalize)})),e.__compiled__[""]={validate:null,normalize:function(e,t){t.normalize(e)}};var p=Object.keys(e.__compiled__).filter((function(t){return t.length>0&&e.__compiled__[t]})).map(d).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><｜]|"+t.src_ZPCc+"))("+p+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><｜]|"+t.src_ZPCc+"))("+p+")","ig"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),function(e){e.__index__=-1,e.__text_cache__=""}(e)}function w(e,t){var n=e.__index__,r=e.__last_index__,a=e.__text_cache__.slice(n,r);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=r+t,this.raw=a,this.text=a,this.url=a}function _(e,t){var n=new w(e,t);return e.__compiled__[n.schema].normalize(n,e),n}function C(e,t){if(!(this instanceof C))return new C(e,t);var n;t||(n=e,Object.keys(n||{}).reduce((function(e,t){return e||h.hasOwnProperty(t)}),!1)&&(t=e,e={})),this.__opts__=r({},h,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=r({},f,e),this.__compiled__={},this.__tlds__=p,this.__tlds_replaced__=!1,this.re={},y(this)}C.prototype.add=function(e,t){return this.__schemas__[e]=t,y(this),this},C.prototype.set=function(e){return this.__opts__=r(this.__opts__,e),this},C.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;var t,n,r,a,l,d,h,f;if(this.re.schema_test.test(e))for((h=this.re.schema_search).lastIndex=0;null!==(t=h.exec(e));)if(a=this.testSchemaAt(e,t[2],h.lastIndex)){this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+a;break}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(f=e.search(this.re.host_fuzzy_test))>=0&&(this.__index__<0||f<this.__index__)&&null!==(n=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))&&(l=n.index+n[1].length,(this.__index__<0||l<this.__index__)&&(this.__schema__="",this.__index__=l,this.__last_index__=n.index+n[0].length)),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&e.indexOf("@")>=0&&null!==(r=e.match(this.re.email_fuzzy))&&(l=r.index+r[1].length,d=r.index+r[0].length,(this.__index__<0||l<this.__index__||l===this.__index__&&d>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=l,this.__last_index__=d)),this.__index__>=0},C.prototype.pretest=function(e){return this.re.pretest.test(e)},C.prototype.testSchemaAt=function(e,t,n){return this.__compiled__[t.toLowerCase()]?this.__compiled__[t.toLowerCase()].validate(e,n,this):0},C.prototype.match=function(e){var t=0,n=[];this.__index__>=0&&this.__text_cache__===e&&(n.push(_(this,t)),t=this.__last_index__);for(var r=t?e.slice(t):e;this.test(r);)n.push(_(this,t)),r=r.slice(this.__last_index__),t+=this.__last_index__;return n.length?n:null},C.prototype.tlds=function(e,t){return e=Array.isArray(e)?e:[e],t?(this.__tlds__=this.__tlds__.concat(e).sort().filter((function(e,t,n){return e!==n[t-1]})).reverse(),y(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,y(this),this)},C.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),"mailto:"!==e.schema||/^mailto:/i.test(e.url)||(e.url="mailto:"+e.url)},C.prototype.onCompile=function(){},e.exports=C},function(e,t,n){"use strict";e.exports=function(e){var t={};t.src_Any=n(746).source,t.src_Cc=n(747).source,t.src_Z=n(748).source,t.src_P=n(749).source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");return t.src_pseudo_letter="(?:(?![><｜]|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|[><｜]|"+t.src_ZPCc+")(?!-|_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|[><｜]|[()[\\]{}.,\"'?!\\-]).|\\[(?:(?!"+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+'|["]).)+\\"|\\\'(?:(?!'+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-]).|\\.{2,4}[a-zA-Z0-9%/]|\\.(?!"+t.src_ZCc+"|[.]).|"+(e&&e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+"\\,(?!"+t.src_ZCc+").|\\!(?!"+t.src_ZCc+"|[!]).|\\?(?!"+t.src_ZCc+"|[?]).)+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy='(^|[><｜]|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+t.src_ZPCc+"))((?![$+<=>^`|｜])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+t.src_ZPCc+"))((?![$+<=>^`|｜])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}},function(e,t){e.exports=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/},function(e,t){e.exports=/[\0-\x1F\x7F-\x9F]/},function(e,t){e.exports=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/},function(e,t){e.exports=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/},function(e){e.exports=JSON.parse('["aaa","aarp","abarth","abb","abbott","abbvie","abc","able","abogado","abudhabi","ac","academy","accenture","accountant","accountants","aco","actor","ad","adac","ads","adult","ae","aeg","aero","aetna","af","afamilycompany","afl","africa","ag","agakhan","agency","ai","aig","airbus","airforce","airtel","akdn","al","alfaromeo","alibaba","alipay","allfinanz","allstate","ally","alsace","alstom","am","amazon","americanexpress","americanfamily","amex","amfam","amica","amsterdam","analytics","android","anquan","anz","ao","aol","apartments","app","apple","aq","aquarelle","ar","arab","aramco","archi","army","arpa","art","arte","as","asda","asia","associates","at","athleta","attorney","au","auction","audi","audible","audio","auspost","author","auto","autos","avianca","aw","aws","ax","axa","az","azure","ba","baby","baidu","banamex","bananarepublic","band","bank","bar","barcelona","barclaycard","barclays","barefoot","bargains","baseball","basketball","bauhaus","bayern","bb","bbc","bbt","bbva","bcg","bcn","bd","be","beats","beauty","beer","bentley","berlin","best","bestbuy","bet","bf","bg","bh","bharti","bi","bible","bid","bike","bing","bingo","bio","biz","bj","black","blackfriday","blockbuster","blog","bloomberg","blue","bm","bms","bmw","bn","bnpparibas","bo","boats","boehringer","bofa","bom","bond","boo","book","booking","bosch","bostik","boston","bot","boutique","box","br","bradesco","bridgestone","broadway","broker","brother","brussels","bs","bt","budapest","bugatti","build","builders","business","buy","buzz","bv","bw","by","bz","bzh","ca","cab","cafe","cal","call","calvinklein","cam","camera","camp","cancerresearch","canon","capetown","capital","capitalone","car","caravan","cards","care","career","careers","cars","casa","case","caseih","cash","casino","cat","catering","catholic","cba","cbn","cbre","cbs","cc","cd","ceb","center","ceo","cern","cf","cfa","cfd","cg","ch","chanel","channel","charity","chase","chat","cheap","chintai","christmas","chrome","church","ci","cipriani","circle","cisco","citadel","citi","citic","city","cityeats","ck","cl","claims","cleaning","click","clinic","clinique","clothing","cloud","club","clubmed","cm","cn","co","coach","codes","coffee","college","cologne","com","comcast","commbank","community","company","compare","computer","comsec","condos","construction","consulting","contact","contractors","cooking","cookingchannel","cool","coop","corsica","country","coupon","coupons","courses","cpa","cr","credit","creditcard","creditunion","cricket","crown","crs","cruise","cruises","csc","cu","cuisinella","cv","cw","cx","cy","cymru","cyou","cz","dabur","dad","dance","data","date","dating","datsun","day","dclk","dds","de","deal","dealer","deals","degree","delivery","dell","deloitte","delta","democrat","dental","dentist","desi","design","dev","dhl","diamonds","diet","digital","direct","directory","discount","discover","dish","diy","dj","dk","dm","dnp","do","docs","doctor","dog","domains","dot","download","drive","dtv","dubai","duck","dunlop","dupont","durban","dvag","dvr","dz","earth","eat","ec","eco","edeka","edu","education","ee","eg","email","emerck","energy","engineer","engineering","enterprises","epson","equipment","er","ericsson","erni","es","esq","estate","et","etisalat","eu","eurovision","eus","events","exchange","expert","exposed","express","extraspace","fage","fail","fairwinds","faith","family","fan","fans","farm","farmers","fashion","fast","fedex","feedback","ferrari","ferrero","fi","fiat","fidelity","fido","film","final","finance","financial","fire","firestone","firmdale","fish","fishing","fit","fitness","fj","fk","flickr","flights","flir","florist","flowers","fly","fm","fo","foo","food","foodnetwork","football","ford","forex","forsale","forum","foundation","fox","fr","free","fresenius","frl","frogans","frontdoor","frontier","ftr","fujitsu","fujixerox","fun","fund","furniture","futbol","fyi","ga","gal","gallery","gallo","gallup","game","games","gap","garden","gay","gb","gbiz","gd","gdn","ge","gea","gent","genting","george","gf","gg","ggee","gh","gi","gift","gifts","gives","giving","gl","glade","glass","gle","global","globo","gm","gmail","gmbh","gmo","gmx","gn","godaddy","gold","goldpoint","golf","goo","goodyear","goog","google","gop","got","gov","gp","gq","gr","grainger","graphics","gratis","green","gripe","grocery","group","gs","gt","gu","guardian","gucci","guge","guide","guitars","guru","gw","gy","hair","hamburg","hangout","haus","hbo","hdfc","hdfcbank","health","healthcare","help","helsinki","here","hermes","hgtv","hiphop","hisamitsu","hitachi","hiv","hk","hkt","hm","hn","hockey","holdings","holiday","homedepot","homegoods","homes","homesense","honda","horse","hospital","host","hosting","hot","hoteles","hotels","hotmail","house","how","hr","hsbc","ht","hu","hughes","hyatt","hyundai","ibm","icbc","ice","icu","id","ie","ieee","ifm","ikano","il","im","imamat","imdb","immo","immobilien","in","inc","industries","infiniti","info","ing","ink","institute","insurance","insure","int","intel","international","intuit","investments","io","ipiranga","iq","ir","irish","is","ismaili","ist","istanbul","it","itau","itv","iveco","jaguar","java","jcb","jcp","je","jeep","jetzt","jewelry","jio","jll","jm","jmp","jnj","jo","jobs","joburg","jot","joy","jp","jpmorgan","jprs","juegos","juniper","kaufen","kddi","ke","kerryhotels","kerrylogistics","kerryproperties","kfh","kg","kh","ki","kia","kim","kinder","kindle","kitchen","kiwi","km","kn","koeln","komatsu","kosher","kp","kpmg","kpn","kr","krd","kred","kuokgroup","kw","ky","kyoto","kz","la","lacaixa","lamborghini","lamer","lancaster","lancia","land","landrover","lanxess","lasalle","lat","latino","latrobe","law","lawyer","lb","lc","lds","lease","leclerc","lefrak","legal","lego","lexus","lgbt","li","lidl","life","lifeinsurance","lifestyle","lighting","like","lilly","limited","limo","lincoln","linde","link","lipsy","live","living","lixil","lk","llc","llp","loan","loans","locker","locus","loft","lol","london","lotte","lotto","love","lpl","lplfinancial","lr","ls","lt","ltd","ltda","lu","lundbeck","lupin","luxe","luxury","lv","ly","ma","macys","madrid","maif","maison","makeup","man","management","mango","map","market","marketing","markets","marriott","marshalls","maserati","mattel","mba","mc","mckinsey","md","me","med","media","meet","melbourne","meme","memorial","men","menu","merckmsd","mg","mh","miami","microsoft","mil","mini","mint","mit","mitsubishi","mk","ml","mlb","mls","mm","mma","mn","mo","mobi","mobile","moda","moe","moi","mom","monash","money","monster","mormon","mortgage","moscow","moto","motorcycles","mov","movie","mp","mq","mr","ms","msd","mt","mtn","mtr","mu","museum","mutual","mv","mw","mx","my","mz","na","nab","nagoya","name","nationwide","natura","navy","nba","nc","ne","nec","net","netbank","netflix","network","neustar","new","newholland","news","next","nextdirect","nexus","nf","nfl","ng","ngo","nhk","ni","nico","nike","nikon","ninja","nissan","nissay","nl","no","nokia","northwesternmutual","norton","now","nowruz","nowtv","np","nr","nra","nrw","ntt","nu","nyc","nz","obi","observer","off","office","okinawa","olayan","olayangroup","oldnavy","ollo","om","omega","one","ong","onl","online","onyourside","ooo","open","oracle","orange","org","organic","origins","osaka","otsuka","ott","ovh","pa","page","panasonic","paris","pars","partners","parts","party","passagens","pay","pccw","pe","pet","pf","pfizer","pg","ph","pharmacy","phd","philips","phone","photo","photography","photos","physio","pics","pictet","pictures","pid","pin","ping","pink","pioneer","pizza","pk","pl","place","play","playstation","plumbing","plus","pm","pn","pnc","pohl","poker","politie","porn","post","pr","pramerica","praxi","press","prime","pro","prod","productions","prof","progressive","promo","properties","property","protection","pru","prudential","ps","pt","pub","pw","pwc","py","qa","qpon","quebec","quest","qvc","racing","radio","raid","re","read","realestate","realtor","realty","recipes","red","redstone","redumbrella","rehab","reise","reisen","reit","reliance","ren","rent","rentals","repair","report","republican","rest","restaurant","review","reviews","rexroth","rich","richardli","ricoh","ril","rio","rip","rmit","ro","rocher","rocks","rodeo","rogers","room","rs","rsvp","ru","rugby","ruhr","run","rw","rwe","ryukyu","sa","saarland","safe","safety","sakura","sale","salon","samsclub","samsung","sandvik","sandvikcoromant","sanofi","sap","sarl","sas","save","saxo","sb","sbi","sbs","sc","sca","scb","schaeffler","schmidt","scholarships","school","schule","schwarz","science","scjohnson","scot","sd","se","search","seat","secure","security","seek","select","sener","services","ses","seven","sew","sex","sexy","sfr","sg","sh","shangrila","sharp","shaw","shell","shia","shiksha","shoes","shop","shopping","shouji","show","showtime","shriram","si","silk","sina","singles","site","sj","sk","ski","skin","sky","skype","sl","sling","sm","smart","smile","sn","sncf","so","soccer","social","softbank","software","sohu","solar","solutions","song","sony","soy","space","sport","spot","spreadbetting","sr","srl","ss","st","stada","staples","star","statebank","statefarm","stc","stcgroup","stockholm","storage","store","stream","studio","study","style","su","sucks","supplies","supply","support","surf","surgery","suzuki","sv","swatch","swiftcover","swiss","sx","sy","sydney","systems","sz","tab","taipei","talk","taobao","target","tatamotors","tatar","tattoo","tax","taxi","tc","tci","td","tdk","team","tech","technology","tel","temasek","tennis","teva","tf","tg","th","thd","theater","theatre","tiaa","tickets","tienda","tiffany","tips","tires","tirol","tj","tjmaxx","tjx","tk","tkmaxx","tl","tm","tmall","tn","to","today","tokyo","tools","top","toray","toshiba","total","tours","town","toyota","toys","tr","trade","trading","training","travel","travelchannel","travelers","travelersinsurance","trust","trv","tt","tube","tui","tunes","tushu","tv","tvs","tw","tz","ua","ubank","ubs","ug","uk","unicom","university","uno","uol","ups","us","uy","uz","va","vacations","vana","vanguard","vc","ve","vegas","ventures","verisign","versicherung","vet","vg","vi","viajes","video","vig","viking","villas","vin","vip","virgin","visa","vision","viva","vivo","vlaanderen","vn","vodka","volkswagen","volvo","vote","voting","voto","voyage","vu","vuelos","wales","walmart","walter","wang","wanggou","watch","watches","weather","weatherchannel","webcam","weber","website","wed","wedding","weibo","weir","wf","whoswho","wien","wiki","williamhill","win","windows","wine","winners","wme","wolterskluwer","woodside","work","works","world","wow","ws","wtc","wtf","xbox","xerox","xfinity","xihuan","xin","कॉम","セール","佛山","ಭಾರತ","慈善","集团","在线","한국","ଭାରତ","大众汽车","点看","คอม","ভাৰত","ভারত","八卦","موقع","বাংলা","公益","公司","香格里拉","网站","移动","我爱你","москва","қаз","католик","онлайн","сайт","联通","срб","бг","бел","קום","时尚","微博","淡马锡","ファッション","орг","नेट","ストア","アマゾン","삼성","சிங்கப்பூர்","商标","商店","商城","дети","мкд","ею","ポイント","新闻","家電","كوم","中文网","中信","中国","中國","娱乐","谷歌","భారత్","ලංකා","電訊盈科","购物","クラウド","ભારત","通販","भारतम्","भारत","भारोत","网店","संगठन","餐厅","网络","ком","укр","香港","亚马逊","诺基亚","食品","飞利浦","台湾","台灣","手机","мон","الجزائر","عمان","ارامكو","ایران","العليان","اتصالات","امارات","بازار","موريتانيا","پاکستان","الاردن","بارت","بھارت","المغرب","ابوظبي","البحرين","السعودية","ڀارت","كاثوليك","سودان","همراه","عراق","مليسيا","澳門","닷컴","政府","شبكة","بيتك","عرب","გე","机构","组织机构","健康","ไทย","سورية","招聘","рус","рф","تونس","大拿","ລາວ","みんな","グーグル","ευ","ελ","世界","書籍","ഭാരതം","ਭਾਰਤ","网址","닷넷","コム","天主教","游戏","vermögensberater","vermögensberatung","企业","信息","嘉里大酒店","嘉里","مصر","قطر","广东","இலங்கை","இந்தியா","հայ","新加坡","فلسطين","政务","xxx","xyz","yachts","yahoo","yamaxun","yandex","ye","yodobashi","yoga","yokohama","you","youtube","yt","yun","za","zappos","zara","zero","zip","zm","zone","zuerich","zw"]')},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e}},function(module,exports){var uuid,removeData,eventType,orig;function focusable(e,t){var n,r,a,l=e.nodeName.toLowerCase();return"area"===l?(r=(n=e.parentNode).name,!(!e.href||!r||"map"!==n.nodeName.toLowerCase())&&(!!(a=$("img[usemap='#"+r+"']")[0])&&visible(a))):(/^(input|select|textarea|button|object)$/.test(l)?!e.disabled:"a"===l&&e.href||t)&&visible(e)}function visible(e){return $.expr.filters.visible(e)&&!$(e).parents().addBack().filter((function(){return"hidden"===$.css(this,"visibility")})).length}$.ui=$.ui||{},$.extend($.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),$.fn.extend({scrollParent:function(e){var t=this.css("position"),n="absolute"===t,r=e?/(auto|scroll|hidden)/:/(auto|scroll)/,a=this.parents().filter((function(){var e=$(this);return(!n||"static"!==e.css("position"))&&r.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))})).eq(0);return"fixed"!==t&&a.length?a:$(this[0].ownerDocument||document)},uniqueId:(uuid=0,function(){return this.each((function(){this.id||(this.id="ui-id-"+ ++uuid)}))}),removeUniqueId:function(){return this.each((function(){/^ui-id-\d+$/.test(this.id)&&$(this).removeAttr("id")}))}}),$.extend($.expr[":"],{data:$.expr.createPseudo?$.expr.createPseudo((function(e){return function(t){return!!$.data(t,e)}})):function(e,t,n){return!!$.data(e,n[3])},focusable:function(e){return focusable(e,!isNaN($.attr(e,"tabindex")))},tabbable:function(e){var t=$.attr(e,"tabindex"),n=isNaN(t);return(n||t>=0)&&focusable(e,!n)}}),$("<a>").outerWidth(1).jquery||$.each(["Width","Height"],(function(e,t){var n="Width"===t?["Left","Right"]:["Top","Bottom"],r=t.toLowerCase(),a={innerWidth:$.fn.innerWidth,innerHeight:$.fn.innerHeight,outerWidth:$.fn.outerWidth,outerHeight:$.fn.outerHeight};function l(e,t,r,a){return $.each(n,(function(){t-=parseFloat($.css(e,"padding"+this))||0,r&&(t-=parseFloat($.css(e,"border"+this+"Width"))||0),a&&(t-=parseFloat($.css(e,"margin"+this))||0)})),t}$.fn["inner"+t]=function(e){return void 0===e?a["inner"+t].call(this):this.each((function(){$(this).css(r,l(this,e)+"px")}))},$.fn["outer"+t]=function(e,n){return"number"!=typeof e?a["outer"+t].call(this,e):this.each((function(){$(this).css(r,l(this,e,!0,n)+"px")}))}})),$.fn.addBack||($.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),$("<a>").data("a-b","a").removeData("a-b").data("a-b")&&($.fn.removeData=(removeData=$.fn.removeData,function(e){return arguments.length?removeData.call(this,$.camelCase(e)):removeData.call(this)})),$.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),$.fn.extend({focus:(orig=$.fn.focus,function(e,t){return"number"==typeof e?this.each((function(){var n=this;setTimeout((function(){$(n).focus(),t&&t.call(n)}),e)})):orig.apply(this,arguments)}),disableSelection:(eventType="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.bind(eventType+".ui-disableSelection",(function(e){e.preventDefault()}))}),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(e){if(void 0!==e)return this.css("zIndex",e);if(this.length)for(var t,n,r=$(this[0]);r.length&&r[0]!==document;){if(("absolute"===(t=r.css("position"))||"relative"===t||"fixed"===t)&&(n=parseInt(r.css("zIndex"),10),!isNaN(n)&&0!==n))return n;r=r.parent()}return 0}}),$.ui.plugin={add:function(e,t,n){var r,a=$.ui[e].prototype;for(r in n)a.plugins[r]=a.plugins[r]||[],a.plugins[r].push([t,n[r]])},call:function(e,t,n,r){var a,l=e.plugins[t];if(l&&(r||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(a=0;a<l.length;a++)e.options[l[a][0]]&&l[a][1].apply(e.element,n)}};var widget_uuid=0,widget_slice=Array.prototype.slice;$.cleanData=function(e){return function(t){var n,r,a;for(a=0;null!=(r=t[a]);a++)try{(n=$._data(r,"events"))&&n.remove&&$(r).triggerHandler("remove")}catch(e){}e(t)}}($.cleanData),$.widget=function(e,t,n){var r,a,l,d,h={},f=e.split(".")[0];return e=e.split(".")[1],r=f+"-"+e,n||(n=t,t=$.Widget),$.expr[":"][r.toLowerCase()]=function(e){return!!$.data(e,r)},$[f]=$[f]||{},a=$[f][e],l=$[f][e]=function(e,t){if(!this._createWidget)return new l(e,t);arguments.length&&this._createWidget(e,t)},$.extend(l,a,{version:n.version,_proto:$.extend({},n),_childConstructors:[]}),(d=new t).options=$.widget.extend({},d.options),$.each(n,(function(e,n){var r,a;$.isFunction(n)?h[e]=(r=function(){return t.prototype[e].apply(this,arguments)},a=function(n){return t.prototype[e].apply(this,n)},function(){var e,t=this._super,l=this._superApply;return this._super=r,this._superApply=a,e=n.apply(this,arguments),this._super=t,this._superApply=l,e}):h[e]=n})),l.prototype=$.widget.extend(d,{widgetEventPrefix:a&&d.widgetEventPrefix||e},h,{constructor:l,namespace:f,widgetName:e,widgetFullName:r}),a?($.each(a._childConstructors,(function(e,t){var n=t.prototype;$.widget(n.namespace+"."+n.widgetName,l,t._proto)})),delete a._childConstructors):t._childConstructors.push(l),$.widget.bridge(e,l),l},$.widget.extend=function(e){for(var t,n,r=widget_slice.call(arguments,1),a=0,l=r.length;a<l;a++)for(t in r[a])n=r[a][t],r[a].hasOwnProperty(t)&&void 0!==n&&($.isPlainObject(n)?e[t]=$.isPlainObject(e[t])?$.widget.extend({},e[t],n):$.widget.extend({},n):e[t]=n);return e},$.widget.bridge=function(e,t){var n=t.prototype.widgetFullName||e;$.fn[e]=function(r){var a="string"==typeof r,l=widget_slice.call(arguments,1),d=this;return a?this.each((function(){var t,a=$.data(this,n);return"instance"===r?(d=a,!1):a?$.isFunction(a[r])&&"_"!==r.charAt(0)?(t=a[r].apply(a,l))!==a&&void 0!==t?(d=t&&t.jquery?d.pushStack(t.get()):t,!1):void 0:$.error("no such method '"+r+"' for "+e+" widget instance"):$.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+r+"'")})):(l.length&&(r=$.widget.extend.apply(null,[r].concat(l))),this.each((function(){var e=$.data(this,n);e?(e.option(r||{}),e._init&&e._init()):$.data(this,n,new t(r,this))}))),d}},$.Widget=function(){},$.Widget._childConstructors=[],$.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,t){t=$(t||this.defaultElement||this)[0],this.element=$(t),this.uuid=widget_uuid++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=$(),this.hoverable=$(),this.focusable=$(),t!==this&&($.data(t,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===t&&this.destroy()}}),this.document=$(t.style?t.ownerDocument:t.document||t),this.window=$(this.document[0].defaultView||this.document[0].parentWindow)),this.options=$.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:$.noop,_getCreateEventData:$.noop,_create:$.noop,_init:$.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData($.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:$.noop,widget:function(){return this.element},option:function(e,t){var n,r,a,l=e;if(0===arguments.length)return $.widget.extend({},this.options);if("string"==typeof e)if(l={},n=e.split("."),e=n.shift(),n.length){for(r=l[e]=$.widget.extend({},this.options[e]),a=0;a<n.length-1;a++)r[n[a]]=r[n[a]]||{},r=r[n[a]];if(e=n.pop(),1===arguments.length)return void 0===r[e]?null:r[e];r[e]=t}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];l[e]=t}return this._setOptions(l),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(e,t,n){var r,a=this;"boolean"!=typeof e&&(n=t,t=e,e=!1),n?(t=r=$(t),this.bindings=this.bindings.add(t)):(n=t,t=this.element,r=this.widget()),$.each(n,(function(n,l){function d(){if(e||!0!==a.options.disabled&&!$(this).hasClass("ui-state-disabled"))return("string"==typeof l?a[l]:l).apply(a,arguments)}"string"!=typeof l&&(d.guid=l.guid=l.guid||d.guid||$.guid++);var h=n.match(/^([\w:-]*)\s*(.*)$/),f=h[1]+a.eventNamespace,p=h[2];p?r.delegate(p,f,d):t.bind(f,d)}))},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t),this.bindings=$(this.bindings.not(e).get()),this.focusable=$(this.focusable.not(e).get()),this.hoverable=$(this.hoverable.not(e).get())},_delay:function(e,t){var n=this;return setTimeout((function(){return("string"==typeof e?n[e]:e).apply(n,arguments)}),t||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){$(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){$(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){$(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){$(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,t,n){var r,a,l=this.options[e];if(n=n||{},(t=$.Event(t)).type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),t.target=this.element[0],a=t.originalEvent)for(r in a)r in t||(t[r]=a[r]);return this.element.trigger(t,n),!($.isFunction(l)&&!1===l.apply(this.element[0],[t].concat(n))||t.isDefaultPrevented())}},$.each({show:"fadeIn",hide:"fadeOut"},(function(e,t){$.Widget.prototype["_"+e]=function(n,r,a){"string"==typeof r&&(r={effect:r});var l,d=r?!0===r||"number"==typeof r?t:r.effect||t:e;"number"==typeof(r=r||{})&&(r={duration:r}),l=!$.isEmptyObject(r),r.complete=a,r.delay&&n.delay(r.delay),l&&$.effects&&$.effects.effect[d]?n[e](r):d!==e&&n[d]?n[d](r.duration,r.easing,a):n.queue((function(t){$(this)[e](),a&&a.call(n[0]),t()}))}}));var widget=$.widget,mouseHandled=!1;$(document).mouseup((function(){mouseHandled=!1}));var mouse=$.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,(function(t){return e._mouseDown(t)})).bind("click."+this.widgetName,(function(t){if(!0===$.data(t.target,e.widgetName+".preventClickEvent"))return $.removeData(t.target,e.widgetName+".preventClickEvent"),t.stopImmediatePropagation(),!1})),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!mouseHandled){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var t=this,n=1===e.which,r=!("string"!=typeof this.options.cancel||!e.target.nodeName)&&$(e.target).closest(this.options.cancel).length;return!(n&&!r&&this._mouseCapture(e))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout((function(){t.mouseDelayMet=!0}),this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(e),!this._mouseStarted)?(e.preventDefault(),!0):(!0===$.data(e.target,this.widgetName+".preventClickEvent")&&$.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return t._mouseMove(e)},this._mouseUpDelegate=function(e){return t._mouseUp(e)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),mouseHandled=!0,!0))}},_mouseMove:function(e){if(this._mouseMoved){if($.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button)return this._mouseUp(e);if(!e.which)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&$.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),mouseHandled=!1,!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}});$.widget("ui.draggable",$.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?this.destroyOnClear=!0:(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(e){var t=this.options;return this._blurActiveElement(e),!(this.helper||t.disabled||$(e.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(e),!!this.handle&&(this._blockFrames(!0===t.iframeFix?"iframe":t.iframeFix),!0))},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map((function(){var e=$(this);return $("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]}))},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(e){var t=this.document[0];if(this.handleElement.is(e.target))try{t.activeElement&&"body"!==t.activeElement.nodeName.toLowerCase()&&$(t.activeElement).blur()}catch(e){}},_mouseStart:function(e){var t=this.options;return this.helper=this._createHelper(e),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),$.ui.ddmanager&&($.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter((function(){return"fixed"===$(this).css("position")})).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,t.cursorAt&&this._adjustOffsetFromHelper(t.cursorAt),this._setContainment(),!1===this._trigger("start",e)?(this._clear(),!1):(this._cacheHelperProportions(),$.ui.ddmanager&&!t.dropBehaviour&&$.ui.ddmanager.prepareOffsets(this,e),this._normalizeRightBottom(),this._mouseDrag(e,!0),$.ui.ddmanager&&$.ui.ddmanager.dragStart(this,e),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(e,t){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!t){var n=this._uiHash();if(!1===this._trigger("drag",e,n))return this._mouseUp({}),!1;this.position=n.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",$.ui.ddmanager&&$.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var t=this,n=!1;return $.ui.ddmanager&&!this.options.dropBehaviour&&(n=$.ui.ddmanager.drop(this,e)),this.dropped&&(n=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||!0===this.options.revert||$.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?$(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),(function(){!1!==t._trigger("stop",e)&&t._clear()})):!1!==this._trigger("stop",e)&&this._clear(),!1},_mouseUp:function(e){return this._unblockFrames(),$.ui.ddmanager&&$.ui.ddmanager.dragStop(this,e),this.handleElement.is(e.target)&&this.element.focus(),$.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){return!this.options.handle||!!$(e.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(e){var t=this.options,n=$.isFunction(t.helper),r=n?$(t.helper.apply(this.element[0],[e])):"clone"===t.helper?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo("parent"===t.appendTo?this.element[0].parentNode:t.appendTo),n&&r[0]===this.element[0]&&this._setPositionRelative(),r[0]===this.element[0]||/(fixed|absolute)/.test(r.css("position"))||r.css("position","absolute"),r},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),$.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),t=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==t&&$.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,t,n,r=this.options,a=this.document[0];this.relativeContainer=null,r.containment?"window"!==r.containment?"document"!==r.containment?r.containment.constructor!==Array?("parent"===r.containment&&(r.containment=this.helper[0].parentNode),(n=(t=$(r.containment))[0])&&(e=/(scroll|auto)/.test(t.css("overflow")),this.containment=[(parseInt(t.css("borderLeftWidth"),10)||0)+(parseInt(t.css("paddingLeft"),10)||0),(parseInt(t.css("borderTopWidth"),10)||0)+(parseInt(t.css("paddingTop"),10)||0),(e?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(t.css("borderRightWidth"),10)||0)-(parseInt(t.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(t.css("borderBottomWidth"),10)||0)-(parseInt(t.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=t)):this.containment=r.containment:this.containment=[0,0,$(a).width()-this.helperProportions.width-this.margins.left,($(a).height()||a.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=[$(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,$(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,$(window).scrollLeft()+$(window).width()-this.helperProportions.width-this.margins.left,$(window).scrollTop()+($(window).height()||a.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=null},_convertPositionTo:function(e,t){t||(t=this.position);var n="absolute"===e?1:-1,r=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.offset.scroll.top:r?0:this.offset.scroll.top)*n,left:t.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.offset.scroll.left:r?0:this.offset.scroll.left)*n}},_generatePosition:function(e,t){var n,r,a,l,d=this.options,h=this._isRootNode(this.scrollParent[0]),f=e.pageX,p=e.pageY;return h&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(r=this.relativeContainer.offset(),n=[this.containment[0]+r.left,this.containment[1]+r.top,this.containment[2]+r.left,this.containment[3]+r.top]):n=this.containment,e.pageX-this.offset.click.left<n[0]&&(f=n[0]+this.offset.click.left),e.pageY-this.offset.click.top<n[1]&&(p=n[1]+this.offset.click.top),e.pageX-this.offset.click.left>n[2]&&(f=n[2]+this.offset.click.left),e.pageY-this.offset.click.top>n[3]&&(p=n[3]+this.offset.click.top)),d.grid&&(a=d.grid[1]?this.originalPageY+Math.round((p-this.originalPageY)/d.grid[1])*d.grid[1]:this.originalPageY,p=n?a-this.offset.click.top>=n[1]||a-this.offset.click.top>n[3]?a:a-this.offset.click.top>=n[1]?a-d.grid[1]:a+d.grid[1]:a,l=d.grid[0]?this.originalPageX+Math.round((f-this.originalPageX)/d.grid[0])*d.grid[0]:this.originalPageX,f=n?l-this.offset.click.left>=n[0]||l-this.offset.click.left>n[2]?l:l-this.offset.click.left>=n[0]?l-d.grid[0]:l+d.grid[0]:l),"y"===d.axis&&(f=this.originalPageX),"x"===d.axis&&(p=this.originalPageY)),{top:p-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:h?0:this.offset.scroll.top),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:h?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(e,t,n){return n=n||this._uiHash(),$.ui.plugin.call(this,e,[t,n,this],!0),/^(drag|start|stop)/.test(e)&&(this.positionAbs=this._convertPositionTo("absolute"),n.offset=this.positionAbs),$.Widget.prototype._trigger.call(this,e,t,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),$.ui.plugin.add("draggable","connectToSortable",{start:function(e,t,n){var r=$.extend({},t,{item:n.element});n.sortables=[],$(n.options.connectToSortable).each((function(){var t=$(this).sortable("instance");t&&!t.options.disabled&&(n.sortables.push(t),t.refreshPositions(),t._trigger("activate",e,r))}))},stop:function(e,t,n){var r=$.extend({},t,{item:n.element});n.cancelHelperRemoval=!1,$.each(n.sortables,(function(){this.isOver?(this.isOver=0,n.cancelHelperRemoval=!0,this.cancelHelperRemoval=!1,this._storedCSS={position:this.placeholder.css("position"),top:this.placeholder.css("top"),left:this.placeholder.css("left")},this._mouseStop(e),this.options.helper=this.options._helper):(this.cancelHelperRemoval=!0,this._trigger("deactivate",e,r))}))},drag:function(e,t,n){$.each(n.sortables,(function(){var r=!1,a=this;a.positionAbs=n.positionAbs,a.helperProportions=n.helperProportions,a.offset.click=n.offset.click,a._intersectsWith(a.containerCache)&&(r=!0,$.each(n.sortables,(function(){return this.positionAbs=n.positionAbs,this.helperProportions=n.helperProportions,this.offset.click=n.offset.click,this!==a&&this._intersectsWith(this.containerCache)&&$.contains(a.element[0],this.element[0])&&(r=!1),r}))),r?(a.isOver||(a.isOver=1,n._parent=t.helper.parent(),a.currentItem=t.helper.appendTo(a.element).data("ui-sortable-item",!0),a.options._helper=a.options.helper,a.options.helper=function(){return t.helper[0]},e.target=a.currentItem[0],a._mouseCapture(e,!0),a._mouseStart(e,!0,!0),a.offset.click.top=n.offset.click.top,a.offset.click.left=n.offset.click.left,a.offset.parent.left-=n.offset.parent.left-a.offset.parent.left,a.offset.parent.top-=n.offset.parent.top-a.offset.parent.top,n._trigger("toSortable",e),n.dropped=a.element,$.each(n.sortables,(function(){this.refreshPositions()})),n.currentItem=n.element,a.fromOutside=n),a.currentItem&&(a._mouseDrag(e),t.position=a.position)):a.isOver&&(a.isOver=0,a.cancelHelperRemoval=!0,a.options._revert=a.options.revert,a.options.revert=!1,a._trigger("out",e,a._uiHash(a)),a._mouseStop(e,!0),a.options.revert=a.options._revert,a.options.helper=a.options._helper,a.placeholder&&a.placeholder.remove(),t.helper.appendTo(n._parent),n._refreshOffsets(e),t.position=n._generatePosition(e,!0),n._trigger("fromSortable",e),n.dropped=!1,$.each(n.sortables,(function(){this.refreshPositions()})))}))}}),$.ui.plugin.add("draggable","cursor",{start:function(e,t,n){var r=$("body"),a=n.options;r.css("cursor")&&(a._cursor=r.css("cursor")),r.css("cursor",a.cursor)},stop:function(e,t,n){var r=n.options;r._cursor&&$("body").css("cursor",r._cursor)}}),$.ui.plugin.add("draggable","opacity",{start:function(e,t,n){var r=$(t.helper),a=n.options;r.css("opacity")&&(a._opacity=r.css("opacity")),r.css("opacity",a.opacity)},stop:function(e,t,n){var r=n.options;r._opacity&&$(t.helper).css("opacity",r._opacity)}}),$.ui.plugin.add("draggable","scroll",{start:function(e,t,n){n.scrollParentNotHidden||(n.scrollParentNotHidden=n.helper.scrollParent(!1)),n.scrollParentNotHidden[0]!==n.document[0]&&"HTML"!==n.scrollParentNotHidden[0].tagName&&(n.overflowOffset=n.scrollParentNotHidden.offset())},drag:function(e,t,n){var r=n.options,a=!1,l=n.scrollParentNotHidden[0],d=n.document[0];l!==d&&"HTML"!==l.tagName?(r.axis&&"x"===r.axis||(n.overflowOffset.top+l.offsetHeight-e.pageY<r.scrollSensitivity?l.scrollTop=a=l.scrollTop+r.scrollSpeed:e.pageY-n.overflowOffset.top<r.scrollSensitivity&&(l.scrollTop=a=l.scrollTop-r.scrollSpeed)),r.axis&&"y"===r.axis||(n.overflowOffset.left+l.offsetWidth-e.pageX<r.scrollSensitivity?l.scrollLeft=a=l.scrollLeft+r.scrollSpeed:e.pageX-n.overflowOffset.left<r.scrollSensitivity&&(l.scrollLeft=a=l.scrollLeft-r.scrollSpeed))):(r.axis&&"x"===r.axis||(e.pageY-$(d).scrollTop()<r.scrollSensitivity?a=$(d).scrollTop($(d).scrollTop()-r.scrollSpeed):$(window).height()-(e.pageY-$(d).scrollTop())<r.scrollSensitivity&&(a=$(d).scrollTop($(d).scrollTop()+r.scrollSpeed))),r.axis&&"y"===r.axis||(e.pageX-$(d).scrollLeft()<r.scrollSensitivity?a=$(d).scrollLeft($(d).scrollLeft()-r.scrollSpeed):$(window).width()-(e.pageX-$(d).scrollLeft())<r.scrollSensitivity&&(a=$(d).scrollLeft($(d).scrollLeft()+r.scrollSpeed)))),!1!==a&&$.ui.ddmanager&&!r.dropBehaviour&&$.ui.ddmanager.prepareOffsets(n,e)}}),$.ui.plugin.add("draggable","snap",{start:function(e,t,n){var r=n.options;n.snapElements=[],$(r.snap.constructor!==String?r.snap.items||":data(ui-draggable)":r.snap).each((function(){var e=$(this),t=e.offset();this!==n.element[0]&&n.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:t.top,left:t.left})}))},drag:function(e,t,n){var r,a,l,d,h,f,p,y,w,_,C=n.options,S=C.snapTolerance,k=t.offset.left,x=k+n.helperProportions.width,E=t.offset.top,A=E+n.helperProportions.height;for(w=n.snapElements.length-1;w>=0;w--)f=(h=n.snapElements[w].left-n.margins.left)+n.snapElements[w].width,y=(p=n.snapElements[w].top-n.margins.top)+n.snapElements[w].height,x<h-S||k>f+S||A<p-S||E>y+S||!$.contains(n.snapElements[w].item.ownerDocument,n.snapElements[w].item)?(n.snapElements[w].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,e,$.extend(n._uiHash(),{snapItem:n.snapElements[w].item})),n.snapElements[w].snapping=!1):("inner"!==C.snapMode&&(r=Math.abs(p-A)<=S,a=Math.abs(y-E)<=S,l=Math.abs(h-x)<=S,d=Math.abs(f-k)<=S,r&&(t.position.top=n._convertPositionTo("relative",{top:p-n.helperProportions.height,left:0}).top),a&&(t.position.top=n._convertPositionTo("relative",{top:y,left:0}).top),l&&(t.position.left=n._convertPositionTo("relative",{top:0,left:h-n.helperProportions.width}).left),d&&(t.position.left=n._convertPositionTo("relative",{top:0,left:f}).left)),_=r||a||l||d,"outer"!==C.snapMode&&(r=Math.abs(p-E)<=S,a=Math.abs(y-A)<=S,l=Math.abs(h-k)<=S,d=Math.abs(f-x)<=S,r&&(t.position.top=n._convertPositionTo("relative",{top:p,left:0}).top),a&&(t.position.top=n._convertPositionTo("relative",{top:y-n.helperProportions.height,left:0}).top),l&&(t.position.left=n._convertPositionTo("relative",{top:0,left:h}).left),d&&(t.position.left=n._convertPositionTo("relative",{top:0,left:f-n.helperProportions.width}).left)),!n.snapElements[w].snapping&&(r||a||l||d||_)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,e,$.extend(n._uiHash(),{snapItem:n.snapElements[w].item})),n.snapElements[w].snapping=r||a||l||d||_)}}),$.ui.plugin.add("draggable","stack",{start:function(e,t,n){var r,a=n.options,l=$.makeArray($(a.stack)).sort((function(e,t){return(parseInt($(e).css("zIndex"),10)||0)-(parseInt($(t).css("zIndex"),10)||0)}));l.length&&(r=parseInt($(l[0]).css("zIndex"),10)||0,$(l).each((function(e){$(this).css("zIndex",r+e)})),this.css("zIndex",r+l.length))}}),$.ui.plugin.add("draggable","zIndex",{start:function(e,t,n){var r=$(t.helper),a=n.options;r.css("zIndex")&&(a._zIndex=r.css("zIndex")),r.css("zIndex",a.zIndex)},stop:function(e,t,n){var r=n.options;r._zIndex&&$(t.helper).css("zIndex",r._zIndex)}});var draggable=$.ui.draggable;$.widget("ui.droppable",{version:"1.11.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e,t=this.options,n=t.accept;this.isover=!1,this.isout=!0,this.accept=$.isFunction(n)?n:function(e){return e.is(n)},this.proportions=function(){if(!arguments.length)return e||(e={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight});e=arguments[0]},this._addToManager(t.scope),t.addClasses&&this.element.addClass("ui-droppable")},_addToManager:function(e){$.ui.ddmanager.droppables[e]=$.ui.ddmanager.droppables[e]||[],$.ui.ddmanager.droppables[e].push(this)},_splice:function(e){for(var t=0;t<e.length;t++)e[t]===this&&e.splice(t,1)},_destroy:function(){var e=$.ui.ddmanager.droppables[this.options.scope];this._splice(e),this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(e,t){if("accept"===e)this.accept=$.isFunction(t)?t:function(e){return e.is(t)};else if("scope"===e){var n=$.ui.ddmanager.droppables[this.options.scope];this._splice(n),this._addToManager(t)}this._super(e,t)},_activate:function(e){var t=$.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),t&&this._trigger("activate",e,this.ui(t))},_deactivate:function(e){var t=$.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),t&&this._trigger("deactivate",e,this.ui(t))},_over:function(e){var t=$.ui.ddmanager.current;t&&(t.currentItem||t.element)[0]!==this.element[0]&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",e,this.ui(t)))},_out:function(e){var t=$.ui.ddmanager.current;t&&(t.currentItem||t.element)[0]!==this.element[0]&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",e,this.ui(t)))},_drop:function(e,t){var n=t||$.ui.ddmanager.current,r=!1;return!(!n||(n.currentItem||n.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each((function(){var t=$(this).droppable("instance");if(t.options.greedy&&!t.options.disabled&&t.options.scope===n.options.scope&&t.accept.call(t.element[0],n.currentItem||n.element)&&$.ui.intersect(n,$.extend(t,{offset:t.element.offset()}),t.options.tolerance,e))return r=!0,!1})),!r&&(!!this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",e,this.ui(n)),this.element)))},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),$.ui.intersect=function(){function e(e,t,n){return e>=t&&e<t+n}return function(t,n,r,a){if(!n.offset)return!1;var l=(t.positionAbs||t.position.absolute).left+t.margins.left,d=(t.positionAbs||t.position.absolute).top+t.margins.top,h=l+t.helperProportions.width,f=d+t.helperProportions.height,p=n.offset.left,y=n.offset.top,w=p+n.proportions().width,_=y+n.proportions().height;switch(r){case"fit":return p<=l&&h<=w&&y<=d&&f<=_;case"intersect":return p<l+t.helperProportions.width/2&&h-t.helperProportions.width/2<w&&y<d+t.helperProportions.height/2&&f-t.helperProportions.height/2<_;case"pointer":return e(a.pageY,y,n.proportions().height)&&e(a.pageX,p,n.proportions().width);case"touch":return(d>=y&&d<=_||f>=y&&f<=_||d<y&&f>_)&&(l>=p&&l<=w||h>=p&&h<=w||l<p&&h>w);default:return!1}}}(),$.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(e,t){var n,r,a=$.ui.ddmanager.droppables[e.options.scope]||[],l=t?t.type:null,d=(e.currentItem||e.element).find(":data(ui-droppable)").addBack();e:for(n=0;n<a.length;n++)if(!(a[n].options.disabled||e&&!a[n].accept.call(a[n].element[0],e.currentItem||e.element))){for(r=0;r<d.length;r++)if(d[r]===a[n].element[0]){a[n].proportions().height=0;continue e}a[n].visible="none"!==a[n].element.css("display"),a[n].visible&&("mousedown"===l&&a[n]._activate.call(a[n],t),a[n].offset=a[n].element.offset(),a[n].proportions({width:a[n].element[0].offsetWidth,height:a[n].element[0].offsetHeight}))}},drop:function(e,t){var n=!1;return $.each(($.ui.ddmanager.droppables[e.options.scope]||[]).slice(),(function(){this.options&&(!this.options.disabled&&this.visible&&$.ui.intersect(e,this,this.options.tolerance,t)&&(n=this._drop.call(this,t)||n),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,t)))})),n},dragStart:function(e,t){e.element.parentsUntil("body").bind("scroll.droppable",(function(){e.options.refreshPositions||$.ui.ddmanager.prepareOffsets(e,t)}))},drag:function(e,t){e.options.refreshPositions&&$.ui.ddmanager.prepareOffsets(e,t);var n=$.ui.ddmanager.droppables[e.options.scope]||[];$.each(n,(function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var n,r,a,l=$.ui.intersect(e,this,this.options.tolerance,t),d=!l&&this.isover?"isout":l&&!this.isover?"isover":null;d&&(this.options.greedy&&(r=this.options.scope,(a=this.element.parents(":data(ui-droppable)").filter((function(){return $(this).droppable("instance").options.scope===r}))).length&&((n=$(a[0]).droppable("instance")).enteredGreedyChild=n.enteredGreedyChild||"isover"===d,n.leftGreedyChild=n.leftGreedyChild||"isout"===d)),this[d]=!0,this["isout"===d?"isover":"isout"]=!1,this.c=d)}})),$.each(n,(function(){this.enteredGreedyChild&&(this.greedyChild=!0,this.isover=!1,this.isout=!0,this.c="isout"),this.leftGreedyChild&&!this.enteredGreedyChild&&(this.greedyChild=!1,this.isover=!0,this.isout=!1,this.c="isover"),this.c&&(this["isover"===this.c?"_over":"_out"].call(this,t),this.leftGreedyChild=!1,this.enteredGreedyChild=!1,this.c=null)}))},dragStop:function(e,t){e.element.parentsUntil("body").unbind("scroll.droppable"),e.options.refreshPositions||$.ui.ddmanager.prepareOffsets(e,t)}};var droppable=$.ui.droppable;!function($){var min=Math.min,max=Math.max,round=Math.floor,isStr=function(e){return"string"===$.type(e)},runPluginCallbacks=function(Instance,a_fn){if($.isArray(a_fn))for(var i=0,c=a_fn.length;i<c;i++){var fn=a_fn[i];try{isStr(fn)&&(fn=eval(fn)),$.isFunction(fn)&&g(fn)(Instance)}catch(e){}}function g(e){return e}};$.layout={version:"1.3.rc30.79",revision:.033007,browser:{},effects:{slide:{all:{duration:"fast"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},drop:{all:{duration:"slow"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},scale:{all:{duration:"fast"}},blind:{},clip:{},explode:{},fade:{},fold:{},puff:{},size:{all:{easing:"swing"}}},config:{optionRootKeys:"effects,panes,north,south,west,east,center".split(","),allPanes:"north,south,west,east,center".split(","),borderPanes:"north,south,west,east".split(","),oppositeEdge:{north:"south",south:"north",east:"west",west:"east"},offscreenCSS:{left:"-99999px",right:"auto"},offscreenReset:"offscreenReset",hidden:{visibility:"hidden"},visible:{visibility:"visible"},resizers:{cssReq:{position:"absolute",padding:0,margin:0,fontSize:"1px",textAlign:"left",overflow:"hidden"},cssDemo:{background:"#DDD",border:"none"}},togglers:{cssReq:{position:"absolute",display:"block",padding:0,margin:0,overflow:"hidden",textAlign:"center",fontSize:"1px",cursor:"pointer",zIndex:1},cssDemo:{background:"#AAA"}},content:{cssReq:{position:"relative"},cssDemo:{overflow:"auto",padding:"10px"},cssDemoPane:{overflow:"hidden",padding:0}},panes:{cssReq:{position:"absolute",margin:0},cssDemo:{padding:"10px",background:"#FFF",border:"1px solid #BBB",overflow:"auto"}},north:{side:"top",sizeType:"Height",dir:"horz",cssReq:{top:0,bottom:"auto",left:0,right:0,width:"auto"}},south:{side:"bottom",sizeType:"Height",dir:"horz",cssReq:{top:"auto",bottom:0,left:0,right:0,width:"auto"}},east:{side:"right",sizeType:"Width",dir:"vert",cssReq:{left:"auto",right:0,top:"auto",bottom:"auto",height:"auto"}},west:{side:"left",sizeType:"Width",dir:"vert",cssReq:{left:0,right:"auto",top:"auto",bottom:"auto",height:"auto"}},center:{dir:"center",cssReq:{left:"auto",right:"auto",top:"auto",bottom:"auto",height:"auto",width:"auto"}}},callbacks:{},getParentPaneElem:function(e){var t=$(e),n=t.data("layout")||t.data("parentLayout");if(n){var r=n.container;if(r.data("layoutPane"))return r;var a=r.closest("."+$.layout.defaults.panes.paneClass);if(a.data("layoutPane"))return a}return null},getParentPaneInstance:function(e){var t=$.layout.getParentPaneElem(e);return t?t.data("layoutPane"):null},getParentLayoutInstance:function(e){var t=$.layout.getParentPaneElem(e);return t?t.data("parentLayout"):null},getEventObject:function(e){return"object"==typeof e&&e.stopPropagation?e:null},parsePaneName:function(e){var t=$.layout.getEventObject(e),n=e;return t&&(t.stopPropagation(),n=$(this).data("layoutEdge")),n&&!/^(west|east|north|south|center)$/.test(n)&&($.layout.msg('LAYOUT ERROR - Invalid pane-name: "'+n+'"'),n="error"),n},plugins:{draggable:!!$.fn.draggable,effects:{core:!!$.effects,slide:$.effects&&($.effects.slide||$.effects.effect&&$.effects.effect.slide)}},onCreate:[],onLoad:[],onReady:[],onDestroy:[],onUnload:[],afterOpen:[],afterClose:[],scrollbarWidth:function(){return window.scrollbarWidth||$.layout.getScrollbarSize("width")},scrollbarHeight:function(){return window.scrollbarHeight||$.layout.getScrollbarSize("height")},getScrollbarSize:function(e){var t=$('<div style="position: absolute; top: -10000px; left: -10000px; width: 100px; height: 100px; overflow: scroll;"></div>').appendTo("body"),n={width:t.css("width")-t[0].clientWidth,height:t.height()-t[0].clientHeight};return t.remove(),window.scrollbarWidth=n.width,window.scrollbarHeight=n.height,e.match(/^(width|height)$/)?n[e]:n},showInvisibly:function(e,t){if(e&&e.length&&(t||"none"===e.css("display"))){var n=e[0].style,r={display:n.display||"",visibility:n.visibility||""};return e.css({display:"block",visibility:"hidden"}),r}return{}},getElementDimensions:function(e,t){var n,r,a,l={css:{},inset:{}},d=l.css,h={bottom:0},f=$.layout.cssNum,p=e.offset();return l.offsetLeft=p.left,l.offsetTop=p.top,t||(t={}),$.each("Left,Right,Top,Bottom".split(","),(function(f,p){n=d["border"+p]=$.layout.borderWidth(e,p),r=d["padding"+p]=$.layout.cssNum(e,"padding"+p),a=p.toLowerCase(),l.inset[a]=t[a]>=0?t[a]:r,h[a]=l.inset[a]+n})),d.width=e.width(),d.height=e.height(),d.top=f(e,"top",!0),d.bottom=f(e,"bottom",!0),d.left=f(e,"left",!0),d.right=f(e,"right",!0),l.outerWidth=e.outerWidth(),l.outerHeight=e.outerHeight(),l.innerWidth=max(0,l.outerWidth-h.left-h.right),l.innerHeight=max(0,l.outerHeight-h.top-h.bottom),l.layoutWidth=e.innerWidth(),l.layoutHeight=e.innerHeight(),l},getElementStyles:function(e,t){var n,r,a,l,d,h,f={},p=e[0].style,y=t.split(","),w="Top,Bottom,Left,Right".split(","),_="Color,Style,Width".split(",");for(l=0;l<y.length;l++)if((n=y[l]).match(/(border|padding|margin)$/))for(d=0;d<4;d++)if(r=w[d],"border"===n)for(h=0;h<3;h++)f[n+r+(a=_[h])]=p[n+r+a];else f[n+r]=p[n+r];else f[n]=p[n];return f},cssWidth:function(e,t){if(t<=0)return 0;var n=$.layout.browser.boxModel?$.support.boxSizing?e.css("boxSizing"):"content-box":"border-box",r=$.layout.borderWidth,a=$.layout.cssNum,l=t;return"border-box"!==n&&(l-=r(e,"Left")+r(e,"Right")),"content-box"===n&&(l-=a(e,"paddingLeft")+a(e,"paddingRight")),max(0,l)},cssHeight:function(e,t){if(t<=0)return 0;var n=$.layout.browser.boxModel?$.support.boxSizing?e.css("boxSizing"):"content-box":"border-box",r=$.layout.borderWidth,a=$.layout.cssNum,l=t;return"border-box"!==n&&(l-=r(e,"Top")+r(e,"Bottom")),"content-box"===n&&(l-=a(e,"paddingTop")+a(e,"paddingBottom")),max(0,l)},cssNum:function(e,t,n){e.jquery||(e=$(e));var r=$.layout.showInvisibly(e),a=$.css(e[0],t,!0),l=n&&"auto"==a?a:Math.round(parseFloat(a)||0);return e.css(r),l},borderWidth:function(e,t){e.jquery&&(e=e[0]);var n="border"+t.substr(0,1).toUpperCase()+t.substr(1);return"none"===$.css(e,n+"Style",!0)?0:Math.round(parseFloat($.css(e,n+"Width",!0))||0)},isMouseOverElem:function(e,t){var n=$(t||this),r=n.offset(),a=r.top,l=r.left,d=l+n.outerWidth(),h=a+n.outerHeight(),f=e.pageX,p=e.pageY;return $.layout.browser.msie&&f<0&&p<0||f>=l&&f<=d&&p>=a&&p<=h},msg:function(e,t,n,r){if($.isPlainObject(e)&&window.debugData){"string"==typeof t?(r=n,n=t):"object"==typeof n&&(r=n,n=null);var a=n||"log( <object> )",l=$.extend({sort:!1,returnHTML:!1,display:!1},r);!0===t||l.display?debugData(e,a,l):window.console&&console.log(debugData(e,a,l))}else if(t)alert(e);else if(window.console)console.log(e);else{var d=$("#layoutLogger");d.length||(d=function(){var e=$.support.fixedPosition?"fixed":"absolute",t=$('<div id="layoutLogger" style="position: '+e+'; top: 5px; z-index: 999999; max-width: 25%; overflow: hidden; border: 1px solid #000; border-radius: 5px; background: #FBFBFB; box-shadow: 0 2px 10px rgba(0,0,0,0.3);"><div style="font-size: 13px; font-weight: bold; padding: 5px 10px; background: #F6F6F6; border-radius: 5px 5px 0 0; cursor: move;"><span style="float: right; padding-left: 7px; cursor: pointer;" title="Remove Console" onclick="$(this).closest(\'#layoutLogger\').remove()">X</span>Layout console.log</div><ul style="font-size: 13px; font-weight: none; list-style: none; margin: 0; padding: 0 0 2px;"></ul></div>').appendTo("body");t.css("left",$(window).width()-t.outerWidth()-5),$.ui.draggable&&t.draggable({handle:":first-child"});return t}()),d.children("ul").append('<li style="padding: 4px 10px; margin: 0; border-top: 1px solid #CCC;">'+e.replace(/\</g,"&lt;").replace(/\>/g,"&gt;")+"</li>")}}};var u=navigator.userAgent.toLowerCase(),m=/(chrome)[ \/]([\w.]+)/.exec(u)||/(webkit)[ \/]([\w.]+)/.exec(u)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(u)||/(msie) ([\w.]+)/.exec(u)||u.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(u)||[],b=m[1]||"",v=m[2]||0,ie="msie"===b;$.layout.browser={version:v,safari:"webkit"===b,webkit:"chrome"===b,msie:ie,isIE6:ie&&6==v,boxModel:!ie||!1!==$.support.boxModel},b&&($.layout.browser[b]=!0),ie&&$((function(){$.layout.browser.boxModel=$.support.boxModel})),$.layout.defaults={name:"",containerClass:"ui-layout-container",inset:null,scrollToBookmarkOnLoad:!0,resizeWithWindow:!0,resizeWithWindowDelay:200,resizeWithWindowMaxDelay:0,maskPanesEarly:!1,onresizeall_start:null,onresizeall_end:null,onload_start:null,onload_end:null,onunload_start:null,onunload_end:null,initPanes:!0,showErrorMessages:!0,showDebugMessages:!1,zIndex:null,zIndexes:{pane_normal:0,content_mask:1,resizer_normal:2,pane_sliding:100,pane_animate:1e3,resizer_drag:1e4},errors:{pane:"pane",selector:"selector",addButtonError:"Error Adding Button\nInvalid ",containerMissing:"UI Layout Initialization Error\nThe specified layout-container does not exist.",centerPaneMissing:"UI Layout Initialization Error\nThe center-pane element does not exist.\nThe center-pane is a required element.",noContainerHeight:"UI Layout Initialization Warning\nThe layout-container \"CONTAINER\" has no height.\nTherefore the layout is 0-height and hence 'invisible'!",callbackError:"UI Layout Callback Error\nThe EVENT callback is not a valid function."},panes:{applyDemoStyles:!1,closable:!0,resizable:!0,slidable:!0,initClosed:!1,initHidden:!1,contentSelector:".ui-layout-content",contentIgnoreSelector:".ui-layout-ignore",findNestedContent:!1,paneClass:"ui-layout-pane",resizerClass:"ui-layout-resizer",togglerClass:"ui-layout-toggler",buttonClass:"ui-layout-button",minSize:0,maxSize:0,spacing_open:6,spacing_closed:6,togglerLength_open:50,togglerLength_closed:50,togglerAlign_open:"center",togglerAlign_closed:"center",togglerContent_open:"",togglerContent_closed:"",resizerDblClickToggle:!0,autoResize:!0,autoReopen:!0,resizerDragOpacity:1,maskContents:!1,maskObjects:!1,maskZindex:null,resizingGrid:!1,livePaneResizing:!1,liveContentResizing:!1,liveResizingTolerance:1,sliderCursor:"pointer",slideTrigger_open:"click",slideTrigger_close:"mouseleave",slideDelay_open:300,slideDelay_close:300,hideTogglerOnSlide:!1,preventQuickSlideClose:$.layout.browser.webkit,preventPrematureSlideClose:!1,tips:{Open:"Open",Close:"Close",Resize:"Resize",Slide:"Slide Open",Pin:"Pin",Unpin:"Un-Pin",noRoomToOpen:"Not enough room to show this panel.",minSizeWarning:"Panel has reached its minimum size",maxSizeWarning:"Panel has reached its maximum size"},showOverflowOnHover:!1,enableCursorHotkey:!0,customHotkeyModifier:"SHIFT",fxName:"slide",fxSpeed:null,fxSettings:{},fxOpacityFix:!0,animatePaneSizing:!1,children:null,containerSelector:"",initChildren:!0,destroyChildren:!0,resizeChildren:!0,triggerEventsOnLoad:!1,triggerEventsDuringLiveResize:!0,onshow_start:null,onshow_end:null,onhide_start:null,onhide_end:null,onopen_start:null,onopen_end:null,onclose_start:null,onclose_end:null,onresize_start:null,onresize_end:null,onsizecontent_start:null,onsizecontent_end:null,onswap_start:null,onswap_end:null,ondrag_start:null,ondrag_end:null},north:{paneSelector:".ui-layout-north",size:"auto",resizerCursor:"n-resize",customHotkey:""},south:{paneSelector:".ui-layout-south",size:"auto",resizerCursor:"s-resize",customHotkey:""},east:{paneSelector:".ui-layout-east",size:200,resizerCursor:"e-resize",customHotkey:""},west:{paneSelector:".ui-layout-west",size:200,resizerCursor:"w-resize",customHotkey:""},center:{paneSelector:".ui-layout-center",minWidth:0,minHeight:0}},$.layout.optionsMap={layout:"name,instanceKey,stateManagement,effects,inset,zIndexes,errors,zIndex,scrollToBookmarkOnLoad,showErrorMessages,maskPanesEarly,outset,resizeWithWindow,resizeWithWindowDelay,resizeWithWindowMaxDelay,onresizeall,onresizeall_start,onresizeall_end,onload,onload_start,onload_end,onunload,onunload_start,onunload_end".split(","),center:"paneClass,contentSelector,contentIgnoreSelector,findNestedContent,applyDemoStyles,triggerEventsOnLoad,showOverflowOnHover,maskContents,maskObjects,liveContentResizing,containerSelector,children,initChildren,resizeChildren,destroyChildren,onresize,onresize_start,onresize_end,onsizecontent,onsizecontent_start,onsizecontent_end".split(","),noDefault:"paneSelector,resizerCursor,customHotkey".split(",")},$.layout.transformData=function(e,t){var n,r,a,l,d,h,f,p=t?{panes:{},center:{}}:{};if("object"!=typeof e)return p;for(r in e)for(n=p,d=e[r],f=(a=r.split("__")).length-1,h=0;h<=f;h++)l=a[h],h===f?$.isPlainObject(d)?n[l]=$.layout.transformData(d):n[l]=d:(n[l]||(n[l]={}),n=n[l]);return p},$.layout.backwardCompatibility={map:{applyDefaultStyles:"applyDemoStyles",childOptions:"children",initChildLayout:"initChildren",destroyChildLayout:"destroyChildren",resizeChildLayout:"resizeChildren",resizeNestedLayout:"resizeChildren",resizeWhileDragging:"livePaneResizing",resizeContentWhileDragging:"liveContentResizing",triggerEventsWhileDragging:"triggerEventsDuringLiveResize",maskIframesOnResize:"maskContents",useStateCookie:"stateManagement.enabled","cookie.autoLoad":"stateManagement.autoLoad","cookie.autoSave":"stateManagement.autoSave","cookie.keys":"stateManagement.stateKeys","cookie.name":"stateManagement.cookie.name","cookie.domain":"stateManagement.cookie.domain","cookie.path":"stateManagement.cookie.path","cookie.expires":"stateManagement.cookie.expires","cookie.secure":"stateManagement.cookie.secure",noRoomToOpenTip:"tips.noRoomToOpen",togglerTip_open:"tips.Close",togglerTip_closed:"tips.Open",resizerTip:"tips.Resize",sliderTip:"tips.Slide"},renameOptions:function(e){var t,n,r,a=$.layout.backwardCompatibility.map;for(var l in a)void 0!==(r=(t=d(l)).branch[t.key])&&((n=d(a[l],!0)).branch[n.key]=r,delete t.branch[t.key]);function d(t,n){for(var r,a=t.split("."),l=a.length-1,d={branch:e,key:a[l]},h=0;h<l;h++)r=a[h],null==d.branch[r]?d.branch=n?d.branch[r]={}:{}:d.branch=d.branch[r];return d}},renameAllOptions:function(e){var t=$.layout.backwardCompatibility.renameOptions;return t(e),e.defaults&&("object"!=typeof e.panes&&(e.panes={}),$.extend(!0,e.panes,e.defaults),delete e.defaults),e.panes&&t(e.panes),$.each($.layout.config.allPanes,(function(n,r){e[r]&&t(e[r])})),e}},$.fn.layout=function(opts){var browser=$.layout.browser,_c=$.layout.config,cssW=$.layout.cssWidth,cssH=$.layout.cssHeight,elDims=$.layout.getElementDimensions,styles=$.layout.getElementStyles,evtObj=$.layout.getEventObject,evtPane=$.layout.parsePaneName,options=$.extend(!0,{},$.layout.defaults),effects=options.effects=$.extend(!0,{},$.layout.effects),state={id:"layout"+$.now(),initialized:!1,paneResizing:!1,panesSliding:{},container:{innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0,layoutWidth:0,layoutHeight:0},north:{childIdx:0},south:{childIdx:0},east:{childIdx:0},west:{childIdx:0},center:{childIdx:0}},children={north:null,south:null,east:null,west:null,center:null},timer={data:{},set:function(e,t,n){timer.clear(e),timer.data[e]=setTimeout(t,n)},clear:function(e){var t=timer.data;t[e]&&(clearTimeout(t[e]),delete t[e])}},_log=function(e,t,n){var r=options;return(r.showErrorMessages&&!n||n&&r.showDebugMessages)&&$.layout.msg(r.name+" / "+e,!1!==t),!1},_runCallbacks=function(evtName,pane,skipBoundEvents){var hasPane=pane&&isStr(pane),s=hasPane?state[pane]:state,o=hasPane?options[pane]:options,lName=options.name,lng=evtName+(evtName.match(/_/)?"":"_end"),shrt=lng.match(/_end$/)?lng.substr(0,lng.length-4):"",fn=o[lng]||o[shrt],retVal="NC",args=[],$P;return hasPane||"boolean"!==$.type(pane)||(skipBoundEvents=pane,pane=""),fn&&(isStr(fn)&&(fn.match(/,/)?(args=fn.split(","),fn=eval(args[0])):fn=eval(fn)),$.isFunction(fn)&&(retVal=args.length?g(fn)(args[1]):hasPane?g(fn)(pane,$Ps[pane],s,o,lName):g(fn)(Instance,s,o,lName))),skipBoundEvents||!1===retVal||(hasPane?($P=$Ps[pane],o=options[pane],s=state[pane],$P.triggerHandler("layoutpane"+lng,[pane,$P,s,o,lName]),shrt&&$P.triggerHandler("layoutpane"+shrt,[pane,$P,s,o,lName])):($N.triggerHandler("layout"+lng,[Instance,s,o,lName]),shrt&&$N.triggerHandler("layout"+shrt,[Instance,s,o,lName]))),hasPane&&"onresize_end"===evtName&&resizeChildren(pane+"",!0),retVal;function g(e){return e}},_fixIframe=function(e){if(!browser.mozilla){var t=$Ps[e];"IFRAME"===state[e].tagName?t.css(_c.hidden).css(_c.visible):t.find("IFRAME").css(_c.hidden).css(_c.visible)}},cssSize=function(e,t){return("horz"==_c[e].dir?cssH:cssW)($Ps[e],t)},cssMinDims=function(e){var t=$Ps[e],n=_c[e].dir,r={minWidth:1001-cssW(t,1e3),minHeight:1001-cssH(t,1e3)};return"horz"===n&&(r.minSize=r.minHeight),"vert"===n&&(r.minSize=r.minWidth),r},setOuterWidth=function(e,t,n){var r,a=e;isStr(e)?a=$Ps[e]:e.jquery||(a=$(e)),r=cssW(a,t),a.css({width:r}),r>0?n&&a.data("autoHidden")&&a.innerHeight()>0&&(a.show().data("autoHidden",!1),browser.mozilla||a.css(_c.hidden).css(_c.visible)):n&&!a.data("autoHidden")&&a.hide().data("autoHidden",!0)},setOuterHeight=function(e,t,n){var r,a=e;isStr(e)?a=$Ps[e]:e.jquery||(a=$(e)),r=cssH(a,t),a.css({height:r,visibility:"visible"}),r>0&&a.innerWidth()>0?n&&a.data("autoHidden")&&(a.show().data("autoHidden",!1),browser.mozilla||a.css(_c.hidden).css(_c.visible)):n&&!a.data("autoHidden")&&a.hide().data("autoHidden",!0)},_parseSize=function(e,t,n){if(n||(n=_c[e].dir),isStr(t)&&t.match(/%/)&&(t="100%"===t?-1:parseInt(t,10)/100),0===t)return 0;if(t>=1)return parseInt(t,10);var r=options,a=0;if("horz"==n?a=sC.innerHeight-($Ps.north?r.north.spacing_open:0)-($Ps.south?r.south.spacing_open:0):"vert"==n&&(a=sC.innerWidth-($Ps.west?r.west.spacing_open:0)-($Ps.east?r.east.spacing_open:0)),-1===t)return a;if(t>0)return round(a*t);if("center"==e)return 0;var l="horz"===n?"height":"width",d=$Ps[e],h="height"===l&&$Cs[e],f=$.layout.showInvisibly(d),p=d.css(l),y=h?h.css(l):0;return d.css(l,"auto"),h&&h.css(l,"auto"),t="height"===l?d.outerHeight():d.outerWidth(),d.css(l,p).css(f),h&&h.css(l,y),t},getPaneSize=function(e,t){var n=$Ps[e],r=options[e],a=state[e],l=t?r.spacing_open:0,d=t?r.spacing_closed:0;return!n||a.isHidden?0:a.isClosed||a.isSliding&&t?d:"horz"===_c[e].dir?n.outerHeight()+l:n.outerWidth()+l},setSizeLimits=function(e,t){if(isInitialized()){var n=options[e],r=state[e],a=_c[e],l=a.dir,d=(a.sizeType.toLowerCase(),null!=t?t:r.isSliding),h=($Ps[e],n.spacing_open),f=_c.oppositeEdge[e],p=state[f],y=$Ps[f],w=!y||!1===p.isVisible||p.isSliding?0:"horz"==l?y.outerHeight():y.outerWidth(),_=(!y||p.isHidden?0:options[f][!1!==p.isClosed?"spacing_closed":"spacing_open"])||0,C="horz"==l?sC.innerHeight:sC.innerWidth,S=cssMinDims("center"),k="horz"==l?max(options.center.minHeight,S.minHeight):max(options.center.minWidth,S.minWidth),x=C-h-(d?0:_parseSize("center",k,l)+w+_),E=r.minSize=max(_parseSize(e,n.minSize),cssMinDims(e).minSize),A=r.maxSize=min(n.maxSize?_parseSize(e,n.maxSize):1e5,x),T=r.resizerPosition={},R=sC.inset.top,O=sC.inset.left,M=sC.innerWidth,P=sC.innerHeight,L=n.spacing_open;switch(e){case"north":T.min=R+E,T.max=R+A;break;case"west":T.min=O+E,T.max=O+A;break;case"south":T.min=R+P-A-L,T.max=R+P-E-L;break;case"east":T.min=O+M-A-L,T.max=O+M-E-L}}},calcNewCenterPaneDims=function(){var e={top:getPaneSize("north",!0),bottom:getPaneSize("south",!0),left:getPaneSize("west",!0),right:getPaneSize("east",!0),width:0,height:0};return e.width=sC.innerWidth-e.left-e.right,e.height=sC.innerHeight-e.bottom-e.top,e.top+=sC.inset.top,e.bottom+=sC.inset.bottom,e.left+=sC.inset.left,e.right+=sC.inset.right,e},getHoverClasses=function(e,t){var n=$(e),r=n.data("layoutRole"),a=n.data("layoutEdge"),l=options[a][r+"Class"],d="-"+a,h="-hover ",f=n.hasClass(l+"-closed")?"-closed":"-open",p="-closed"===f?"-open":"-closed",y=l+h+(l+d+h)+(l+f+h)+(l+d+f+h);return t&&(y+=l+p+h+(l+d+p+h)),"resizer"==r&&n.hasClass(l+"-sliding")&&(y+=l+"-sliding"+h+(l+d)+"-sliding"+h),$.trim(y)},addHover=function(e,t){var n=$(t||this);e&&"toggler"===n.data("layoutRole")&&e.stopPropagation(),n.addClass(getHoverClasses(n))},removeHover=function(e,t){var n=$(t||this);n.removeClass(getHoverClasses(n,!0))},onResizerEnter=function(e){var t=$(this).data("layoutEdge"),n=state[t];n.isClosed||n.isResizing||state.paneResizing||($.fn.disableSelection&&$("body").disableSelection(),options.maskPanesEarly&&showMasks(t,{resizing:!0}))},onResizerLeave=function(e,t){var n=t||this,r=$(n).data("layoutEdge"),a=r+"ResizerLeave";timer.clear(r+"_openSlider"),timer.clear(a),t?state.paneResizing||($.fn.enableSelection&&$("body").enableSelection(),options.maskPanesEarly&&hideMasks()):timer.set(a,(function(){onResizerLeave(e,n)}),200)},_create=function(){initOptions();var e=options,t=state;return t.creatingLayout=!0,runPluginCallbacks(Instance,$.layout.onCreate),!1===_runCallbacks("onload_start")?"cancel":(_initContainer(),initHotkeys(),$(window).bind("unload."+sID,unload),runPluginCallbacks(Instance,$.layout.onLoad),e.initPanes&&_initLayoutElements(),delete t.creatingLayout,state.initialized)},isInitialized=function(){return!(!state.initialized&&!state.creatingLayout)||_initLayoutElements()},_initLayoutElements=function(e){var t=options;if(!$N.is(":visible"))return!e&&browser.webkit&&"BODY"===$N[0].tagName&&setTimeout((function(){_initLayoutElements(!0)}),50),!1;if(!getPane("center").length)return _log(t.errors.centerPaneMissing);if(state.creatingLayout=!0,$.extend(sC,elDims($N,t.inset)),initPanes(),t.scrollToBookmarkOnLoad){var n=self.location;n.hash&&n.replace(n.hash)}return Instance.hasParentLayout?t.resizeWithWindow=!1:t.resizeWithWindow&&$(window).bind("resize."+sID,windowResize),delete state.creatingLayout,state.initialized=!0,runPluginCallbacks(Instance,$.layout.onReady),_runCallbacks("onload_end"),!0},createChildren=function(e,t){var n=evtPane.call(this,e),r=$Ps[n];if(r){var a=$Cs[n],l=state[n],d=options[n],h=options.stateManagement||{},f=t?d.children=t:d.children;if($.isPlainObject(f))f=[f];else if(!f||!$.isArray(f))return;$.each(f,(function(e,t){$.isPlainObject(t)&&(t.containerSelector?r.find(t.containerSelector):a||r).each((function(){var e=$(this),r=e.data("layout");if(!r){if(setInstanceKey({container:e,options:t},l),h.includeChildren&&state.stateData[n]){var a=(state.stateData[n].children||{})[t.instanceKey],d=t.stateManagement||(t.stateManagement={autoLoad:!0});!0===d.autoLoad&&a&&(d.autoSave=!1,d.includeChildren=!0,d.autoLoad=$.extend(!0,{},a))}(r=e.layout(t))&&refreshChildren(n,r)}}))}))}},setInstanceKey=function(e,t){var n=e.container,r=e.options,a=r.stateManagement,l=r.instanceKey||n.data("layoutInstanceKey");return l||(l=(a&&a.cookie?a.cookie.name:"")||r.name),l=l?l.replace(/[^\w-]/gi,"_").replace(/_{2,}/g,"_"):"layout"+ ++t.childIdx,r.instanceKey=l,n.data("layoutInstanceKey",l),l},refreshChildren=function(e,t){var n,r=$Ps[e],a=children[e],l=state[e];$.isPlainObject(a)&&($.each(a,(function(e,t){t.destroyed&&delete a[e]})),$.isEmptyObject(a)&&(a=children[e]=null)),t||a||(t=r.data("layout")),t&&(t.hasParentLayout=!0,n=t.options,setInstanceKey(t,l),a||(a=children[e]={}),a[n.instanceKey]=t.container.data("layout")),Instance[e].children=children[e],t||createChildren(e)},windowResize=function(){var e=options,t=Number(e.resizeWithWindowDelay);t<10&&(t=100),timer.clear("winResize"),timer.set("winResize",(function(){timer.clear("winResize"),timer.clear("winResizeRepeater");var t=elDims($N,e.inset);t.innerWidth===sC.innerWidth&&t.innerHeight===sC.innerHeight||resizeAll()}),t),timer.data.winResizeRepeater||setWindowResizeRepeater()},setWindowResizeRepeater=function(){var e=Number(options.resizeWithWindowMaxDelay);e>0&&timer.set("winResizeRepeater",(function(){setWindowResizeRepeater(),resizeAll()}),e)},unload=function(){_runCallbacks("onunload_start"),runPluginCallbacks(Instance,$.layout.onUnload),_runCallbacks("onunload_end")},_initContainer=function(){var e,t,n=$N[0],r=$("html"),a=sC.tagName=n.tagName,l=sC.id=n.id,d=sC.className=n.className,h=options,f=h.name,p="position,margin,padding,border",y="layoutCSS",w={},_="hidden",C=$N.data("parentLayout"),S=$N.data("layoutEdge"),k=C&&S,x=$.layout.cssNum;sC.selector=$N.selector.split(".slice")[0],sC.ref=(h.name?h.name+" layout / ":"")+a+(l?"#"+l:d?".["+d+"]":""),sC.isBody="BODY"===a,k||sC.isBody||(C=(e=$N.closest("."+$.layout.defaults.panes.paneClass)).data("parentLayout"),S=e.data("layoutEdge"),k=C&&S),$N.data({layout:Instance,layoutContainer:sID}).addClass(h.containerClass);var E={destroy:"",initPanes:"",resizeAll:"resizeAll",resize:"resizeAll"};for(f in E)$N.bind("layout"+f.toLowerCase()+"."+sID,Instance[E[f]||f]);k&&(Instance.hasParentLayout=!0,C.refreshChildren(S,Instance)),$N.data(y)||(sC.isBody?($N.data(y,$.extend(styles($N,p),{height:$N.css("height"),overflow:$N.css("overflow"),overflowX:$N.css("overflowX"),overflowY:$N.css("overflowY")})),r.data(y,$.extend(styles(r,"padding"),{height:"auto",overflow:r.css("overflow"),overflowX:r.css("overflowX"),overflowY:r.css("overflowY")}))):$N.data(y,styles($N,p+",top,bottom,left,right,width,height,overflow,overflowX,overflowY")));try{if(w={overflow:_,overflowX:_,overflowY:_},$N.css(w),h.inset&&!$.isPlainObject(h.inset)&&(t=parseInt(h.inset,10)||0,h.inset={top:t,bottom:t,left:t,right:t}),sC.isBody)h.outset?$.isPlainObject(h.outset)||(t=parseInt(h.outset,10)||0,h.outset={top:t,bottom:t,left:t,right:t}):h.outset={top:x(r,"paddingTop"),bottom:x(r,"paddingBottom"),left:x(r,"paddingLeft"),right:x(r,"paddingRight")},r.css(w).css({height:"100%",border:"none",padding:0,margin:0}),browser.isIE6?($N.css({width:"100%",height:"100%",border:"none",padding:0,margin:0,position:"relative"}),h.inset||(h.inset=elDims($N).inset)):($N.css({width:"auto",height:"auto",margin:0,position:"absolute"}),$N.css(h.outset)),$.extend(sC,elDims($N,h.inset));else{var A=$N.css("position");A&&A.match(/(fixed|absolute|relative)/)||$N.css("position","relative"),$N.is(":visible")&&($.extend(sC,elDims($N,h.inset)),sC.innerHeight<1&&_log(h.errors.noContainerHeight.replace(/CONTAINER/,sC.ref)))}x($N,"minWidth")&&$N.parent().css("overflowX","auto"),x($N,"minHeight")&&$N.parent().css("overflowY","auto")}catch(e){}},initHotkeys=function(e){e=e?e.split(","):_c.borderPanes,$.each(e,(function(e,t){var n=options[t];if(n.enableCursorHotkey||n.customHotkey)return $(document).bind("keydown."+sID,keyDown),!1}))},initOptions=function(){var e,t,n,r,a,l,d;if(opts=$.layout.transformData(opts,!0),opts=$.layout.backwardCompatibility.renameAllOptions(opts),!$.isEmptyObject(opts.panes)){for(e=$.layout.optionsMap.noDefault,a=0,l=e.length;a<l;a++)n=e[a],delete opts.panes[n];for(e=$.layout.optionsMap.layout,a=0,l=e.length;a<l;a++)n=e[a],delete opts.panes[n]}e=$.layout.optionsMap.layout;var h=$.layout.config.optionRootKeys;for(n in opts)r=opts[n],$.inArray(n,h)<0&&$.inArray(n,e)<0&&(opts.panes[n]||(opts.panes[n]=$.isPlainObject(r)?$.extend(!0,{},r):r),delete opts[n]);$.extend(!0,options,opts),$.each(_c.allPanes,(function(r,a){if(_c[a]=$.extend(!0,{},_c.panes,_c[a]),t=options.panes,d=options[a],"center"===a)for(e=$.layout.optionsMap.center,r=0,l=e.length;r<l;r++)n=e[r],opts.center[n]||!opts.panes[n]&&d[n]||(d[n]=t[n]);else d=options[a]=$.extend(!0,{},t,d),function(e){var t=options[e],n=options.panes;t.fxSettings||(t.fxSettings={});n.fxSettings||(n.fxSettings={});$.each(["_open","_close","_size"],(function(r,a){var l="fxName"+a,d="fxSpeed"+a,h="fxSettings"+a,f=t[l]=t[l]||n[l]||t.fxName||n.fxName||"none",p=$.effects&&($.effects[f]||$.effects.effect&&$.effects.effect[f]);"none"!==f&&options.effects[f]&&p||(f=t[l]="none");var y=options.effects[f]||{},w=y.all||null,_=y[e]||null;t[d]=t[d]||n[d]||t.fxSpeed||n.fxSpeed||null,t[h]=$.extend(!0,{},w,_,n.fxSettings,t.fxSettings,n[h],t[h])})),delete t.fxName,delete t.fxSpeed,delete t.fxSettings}(a),d.resizerClass||(d.resizerClass="ui-layout-resizer"),d.togglerClass||(d.togglerClass="ui-layout-toggler");d.paneClass||(d.paneClass="ui-layout-pane")}));var f=opts.zIndex,p=options.zIndexes;f>0&&(p.pane_normal=f,p.content_mask=max(f+1,p.content_mask),p.resizer_normal=max(f+2,p.resizer_normal)),delete options.panes},getPane=function(e){var t=options[e].paneSelector;if("#"===t.substr(0,1))return $N.find(t).eq(0);var n=$N.children(t).eq(0);return n.length?n:$N.children("form:first").children(t).eq(0)},initPanes=function(e){evtPane(e),$.each(_c.allPanes,(function(e,t){addPane(t,!0)})),initHandles(),$.each(_c.borderPanes,(function(e,t){$Ps[t]&&state[t].isVisible&&(setSizeLimits(t),makePaneFit(t))})),sizeMidPanes("center"),$.each(_c.allPanes,(function(e,t){afterInitPane(t)}))},addPane=function(e,t){if(t||isInitialized()){var n,r,a,l=options[e],d=state[e],h=_c[e],f=h.dir,p=(d.fx,l.spacing_open,"center"===e),y={},w=$Ps[e];if(w?removePane(e,!1,!0,!1):$Cs[e]=!1,(w=$Ps[e]=getPane(e)).length){if(!w.data("layoutCSS")){w.data("layoutCSS",styles(w,"position,top,left,bottom,right,width,height,overflow,zIndex,display,backgroundColor,padding,margin,border"))}Instance[e]={name:e,pane:$Ps[e],content:$Cs[e],options:options[e],state:state[e],children:children[e]},w.data({parentLayout:Instance,layoutPane:Instance[e],layoutEdge:e,layoutRole:"pane"}).css(h.cssReq).css("zIndex",options.zIndexes.pane_normal).css(l.applyDemoStyles?h.cssDemo:{}).addClass(l.paneClass+" "+l.paneClass+"-"+e).bind("mouseenter."+sID,addHover).bind("mouseleave."+sID,removeHover);var _,C={hide:"",show:"",toggle:"",close:"",open:"",slideOpen:"",slideClose:"",slideToggle:"",size:"sizePane",sizePane:"sizePane",sizeContent:"",sizeHandles:"",enableClosable:"",disableClosable:"",enableSlideable:"",disableSlideable:"",enableResizable:"",disableResizable:"",swapPanes:"swapPanes",swap:"swapPanes",move:"swapPanes",removePane:"removePane",remove:"removePane",createChildren:"",resizeChildren:"",resizeAll:"resizeAll",resizeLayout:"resizeAll"};for(_ in C)w.bind("layoutpane"+_.toLowerCase()+"."+sID,Instance[C[_]||_]);initContent(e,!1),p||(n=d.size=_parseSize(e,l.size),r=_parseSize(e,l.minSize)||1,a=_parseSize(e,l.maxSize)||1e5,n>0&&(n=max(min(n,a),r)),d.autoResize=l.autoResize,d.isClosed=!1,d.isSliding=!1,d.isResizing=!1,d.isHidden=!1,d.pins||(d.pins=[])),d.tagName=w[0].tagName,d.edge=e,d.noRoom=!1,d.isVisible=!0,setPanePosition(e),"horz"===f?y.height=cssH(w,n):"vert"===f&&(y.width=cssW(w,n)),w.css(y),"horz"!=f&&sizeMidPanes(e,!0),state.initialized&&(initHandles(e),initHotkeys(e)),l.initClosed&&l.closable&&!l.initHidden?close(e,!0,!0):l.initHidden||l.initClosed?hide(e):d.noRoom||w.css("display","block"),w.css("visibility","visible"),l.showOverflowOnHover&&w.hover(allowOverflow,resetOverflow),state.initialized&&afterInitPane(e)}else $Ps[e]=!1}},afterInitPane=function(e){var t=$Ps[e],n=state[e],r=options[e];t&&(t.data("layout")&&refreshChildren(e,t.data("layout")),n.isVisible&&(state.initialized?resizeAll():sizeContent(e),r.triggerEventsOnLoad?_runCallbacks("onresize_end",e):resizeChildren(e,!0)),r.initChildren&&r.children&&createChildren(e))},setPanePosition=function(e){e=e?e.split(","):_c.borderPanes,$.each(e,(function(e,t){var n=$Ps[t],r=$Rs[t],a=(options[t],state[t]),l=_c[t].side,d={};if(n){switch(t){case"north":d.top=sC.inset.top,d.left=sC.inset.left,d.right=sC.inset.right;break;case"south":d.bottom=sC.inset.bottom,d.left=sC.inset.left,d.right=sC.inset.right;break;case"west":d.left=sC.inset.left;break;case"east":d.right=sC.inset.right}n.css(d),r&&a.isClosed?r.css(l,sC.inset[l]):r&&!a.isHidden&&r.css(l,sC.inset[l]+getPaneSize(t))}}))},initHandles=function(e){e=e?e.split(","):_c.borderPanes,$.each(e,(function(e,t){var n=$Ps[t];if($Rs[t]=!1,$Ts[t]=!1,n){var r=options[t],a=state[t],l=(_c[t],"#"===r.paneSelector.substr(0,1)?r.paneSelector.substr(1):""),d=r.resizerClass,h=r.togglerClass,f=(a.isVisible?r.spacing_open:r.spacing_closed,"-"+t),p=(a.isVisible,Instance[t]),y=p.resizer=$Rs[t]=$("<div></div>"),w=p.toggler=!!r.closable&&($Ts[t]=$("<div></div>"));!a.isVisible&&r.slidable&&y.attr("title",r.tips.Slide).css("cursor",r.sliderCursor),y.attr("id",l?l+"-resizer":"").data({parentLayout:Instance,layoutPane:Instance[t],layoutEdge:t,layoutRole:"resizer"}).css(_c.resizers.cssReq).css("zIndex",options.zIndexes.resizer_normal).css(r.applyDemoStyles?_c.resizers.cssDemo:{}).addClass(d+" "+d+f).hover(addHover,removeHover).hover(onResizerEnter,onResizerLeave).appendTo($N),r.resizerDblClickToggle&&y.bind("dblclick."+sID,toggle),w&&(w.attr("id",l?l+"-toggler":"").data({parentLayout:Instance,layoutPane:Instance[t],layoutEdge:t,layoutRole:"toggler"}).css(_c.togglers.cssReq).css(r.applyDemoStyles?_c.togglers.cssDemo:{}).addClass(h+" "+h+f).hover(addHover,removeHover).bind("mouseenter",onResizerEnter).appendTo(y),r.togglerContent_open&&$("<span>"+r.togglerContent_open+"</span>").data({layoutEdge:t,layoutRole:"togglerContent"}).data("layoutRole","togglerContent").data("layoutEdge",t).addClass("content content-open").css("display","none").appendTo(w),r.togglerContent_closed&&$("<span>"+r.togglerContent_closed+"</span>").data({layoutEdge:t,layoutRole:"togglerContent"}).addClass("content content-closed").css("display","none").appendTo(w),enableClosable(t)),initResizable(t),a.isVisible?setAsOpen(t):(setAsClosed(t),bindStartSlidingEvents(t,!0))}})),sizeHandles()},initContent=function(e,t){if(isInitialized()){var n,r=options[e],a=r.contentSelector,l=Instance[e],d=$Ps[e];a&&(n=l.content=$Cs[e]=r.findNestedContent?d.find(a).eq(0):d.children(a).eq(0)),n&&n.length?(n.data("layoutRole","content"),n.data("layoutCSS")||n.data("layoutCSS",styles(n,"height")),n.css(_c.content.cssReq),r.applyDemoStyles&&(n.css(_c.content.cssDemo),d.css(_c.content.cssDemoPane)),d.css("overflowX").match(/(scroll|auto)/)&&d.css("overflow","hidden"),state[e].content={},!1!==t&&sizeContent(e)):l.content=$Cs[e]=!1}},initResizable=function(e){var t=$.layout.plugins.draggable;e=e?e.split(","):_c.borderPanes,$.each(e,(function(e,r){var a=options[r];if(!t||!$Ps[r]||!a.resizable)return a.resizable=!1,!0;var l,d,h=state[r],f=options.zIndexes,p=_c[r],y="horz"==p.dir?"top":"left",w=($Ps[r],$Rs[r]),_=a.resizerClass,C=0,S=_+"-drag",k=_+"-"+r+"-drag",x=_+"-dragging",E=_+"-"+r+"-dragging",A=_+"-dragging-limit",T=_+"-"+r+"-dragging-limit",R=!1;h.isClosed||w.attr("title",a.tips.Resize).css("cursor",a.resizerCursor),w.draggable({containment:$N[0],axis:"horz"==p.dir?"y":"x",delay:0,distance:1,grid:a.resizingGrid,helper:"clone",opacity:a.resizerDragOpacity,addClasses:!1,zIndex:f.resizer_drag,start:function(e,t){if(a=options[r],h=state[r],d=a.livePaneResizing,!1===_runCallbacks("ondrag_start",r))return!1;h.isResizing=!0,state.paneResizing=r,timer.clear(r+"_closeSlider"),setSizeLimits(r),l=h.resizerPosition,C=t.position[y],w.addClass(S+" "+k),R=!1,$("body").disableSelection(),showMasks(r,{resizing:!0})},drag:function(e,t){R||(t.helper.addClass(x+" "+E).css({right:"auto",bottom:"auto"}).children().css("visibility","hidden"),R=!0,h.isSliding&&$Ps[r].css("zIndex",f.pane_sliding));var p=0;t.position[y]<l.min?(t.position[y]=l.min,p=-1):t.position[y]>l.max&&(t.position[y]=l.max,p=1),p?(t.helper.addClass(A+" "+T),window.defaultStatus=p>0&&r.match(/(north|west)/)||p<0&&r.match(/(south|east)/)?a.tips.maxSizeWarning:a.tips.minSizeWarning):(t.helper.removeClass(A+" "+T),window.defaultStatus=""),d&&Math.abs(t.position[y]-C)>=a.liveResizingTolerance&&(C=t.position[y],n(e,t,r))},stop:function(e,t){$("body").enableSelection(),window.defaultStatus="",w.removeClass(S+" "+k),h.isResizing=!1,state.paneResizing=!1,n(e,t,r,!0)}})}));var n=function(e,t,n,r){var a,l=t.position,d=_c[n],h=options[n],f=state[n];switch(n){case"north":a=l.top;break;case"west":a=l.left;break;case"south":a=sC.layoutHeight-l.top-h.spacing_open;break;case"east":a=sC.layoutWidth-l.left-h.spacing_open}var p=a-sC.inset[d.side];if(r)!1!==_runCallbacks("ondrag_end",n)&&manualSizePane(n,p,!1,!0),hideMasks(!0),f.isSliding&&showMasks(n,{resizing:!0});else{if(Math.abs(p-f.size)<h.liveResizingTolerance)return;manualSizePane(n,p,!1,!0),sizeMasks()}}},sizeMask=function(){var e=$(this),t=e.data("layoutMask"),n=state[t];"IFRAME"==n.tagName&&n.isVisible&&e.css({top:n.offsetTop,left:n.offsetLeft,width:n.outerWidth,height:n.outerHeight})},sizeMasks=function(){$Ms.each(sizeMask)},showMasks=function(e,t){var n,r,a=_c[e],l=["center"],d=options.zIndexes,h=$.extend({objectsOnly:!1,animation:!1,resizing:!0,sliding:state[e].isSliding},t);h.resizing&&l.push(e),h.sliding&&l.push(_c.oppositeEdge[e]),"horz"===a.dir&&(l.push("west"),l.push("east")),$.each(l,(function(e,t){r=state[t],n=options[t],r.isVisible&&(n.maskObjects||!h.objectsOnly&&n.maskContents)&&getMasks(t).each((function(){sizeMask.call(this),this.style.zIndex=r.isSliding?d.pane_sliding+1:d.pane_normal+1,this.style.display="block"}))}))},hideMasks=function(e){if(e||!state.paneResizing)$Ms.hide();else if(!e&&!$.isEmptyObject(state.panesSliding))for(var t,n,r=$Ms.length-1;r>=0;r--)t=(n=$Ms.eq(r)).data("layoutMask"),options[t].maskObjects||n.hide()},getMasks=function(e){for(var t,n=$([]),r=0,a=$Ms.length;r<a;r++)(t=$Ms.eq(r)).data("layoutMask")===e&&(n=n.add(t));return n.length?n:createMasks(e)},createMasks=function(e){var t,n,r,a,l,d=$Ps[e],h=state[e],f=options[e],p=options.zIndexes,y=$([]);if(!f.maskContents&&!f.maskObjects)return y;for(l=0;l<(f.maskObjects?2:1);l++)t=f.maskObjects&&0==l,n=document.createElement(t?"iframe":"div"),r=$(n).data("layoutMask",e),n.className="ui-layout-mask ui-layout-mask-"+e,(a=n.style).display="block",a.position="absolute",a.background="#FFF",t&&(n.frameborder=0,n.src="about:blank",a.opacity=0,a.filter="Alpha(Opacity='0')",a.border=0),"IFRAME"==h.tagName?(a.zIndex=p.pane_normal+1,$N.append(n)):(r.addClass("ui-layout-mask-inside-pane"),a.zIndex=f.maskZindex||p.content_mask,a.top=0,a.left=0,a.width="100%",a.height="100%",d.append(n)),y=y.add(n),$Ms=$Ms.add(n);return y},destroy=function(e,t){$(window).unbind("."+sID),$(document).unbind("."+sID),"object"==typeof e?evtPane(e):t=e,$N.clearQueue().removeData("layout").removeData("layoutContainer").removeClass(options.containerClass).unbind("."+sID),$Ms.remove(),$.each(_c.allPanes,(function(e,n){removePane(n,!1,!0,t)}));var n="layoutCSS";for(var r in $N.data(n)&&!$N.data("layoutRole")&&$N.css($N.data(n)).removeData(n),"BODY"===sC.tagName&&($N=$("html")).data(n)&&$N.css($N.data(n)).removeData(n),runPluginCallbacks(Instance,$.layout.onDestroy),unload(),Instance)r.match(/^(container|options)$/)||delete Instance[r];return Instance.destroyed=!0,Instance},removePane=function(e,t,n,r){if(isInitialized()){var a=evtPane.call(this,e),l=$Ps[a],d=$Cs[a],h=$Rs[a],f=$Ts[a];l&&$.isEmptyObject(l.data())&&(l=!1),d&&$.isEmptyObject(d.data())&&(d=!1),h&&$.isEmptyObject(h.data())&&(h=!1),f&&$.isEmptyObject(f.data())&&(f=!1),l&&l.stop(!0,!0);var p=options[a],y=(state[a],"layoutCSS"),w=children[a],_=$.isPlainObject(w)&&!$.isEmptyObject(w),C=void 0!==r?r:p.destroyChildren;if(_&&C&&($.each(w,(function(e,t){t.destroyed||t.destroy(!0),t.destroyed&&delete w[e]})),$.isEmptyObject(w)&&(w=children[a]=null,_=!1)),l&&t&&!_)l.remove();else if(l&&l[0]){var S=p.paneClass,k=S+"-"+a,x=[S,S+"-open",S+"-closed",S+"-sliding",k,k+"-open",k+"-closed",k+"-sliding"];$.merge(x,getHoverClasses(l,!0)),l.removeClass(x.join(" ")).removeData("parentLayout").removeData("layoutPane").removeData("layoutRole").removeData("layoutEdge").removeData("autoHidden").unbind("."+sID),_&&d?(d.width(d.width()),$.each(w,(function(e,t){t.resizeAll()}))):d&&d.css(d.data(y)).removeData(y).removeData("layoutRole"),l.data("layout")||l.css(l.data(y)).removeData(y)}f&&f.remove(),h&&h.remove(),Instance[a]=$Ps[a]=$Cs[a]=$Rs[a]=$Ts[a]=!1,{removed:!0},n||resizeAll()}},_hidePane=function(e){var t=$Ps[e],n=options[e],r=t[0].style;n.useOffscreenClose?(t.data(_c.offscreenReset)||t.data(_c.offscreenReset,{left:r.left,right:r.right}),t.css(_c.offscreenCSS)):t.hide().removeData(_c.offscreenReset)},_showPane=function(e){var t=$Ps[e],n=options[e],r=_c.offscreenCSS,a=t.data(_c.offscreenReset),l=t[0].style;t.show().removeData(_c.offscreenReset),n.useOffscreenClose&&a&&(l.left==r.left&&(l.left=a.left),l.right==r.right&&(l.right=a.right))},hide=function(e,t){if(isInitialized()){var n=evtPane.call(this,e),r=options[n],a=state[n],l=$Ps[n],d=$Rs[n];l&&!a.isHidden&&(state.initialized&&!1===_runCallbacks("onhide_start",n)||(a.isSliding=!1,delete state.panesSliding[n],d&&d.hide(),!state.initialized||a.isClosed?(a.isClosed=!0,a.isHidden=!0,a.isVisible=!1,state.initialized||_hidePane(n),sizeMidPanes("horz"===_c[n].dir?"":"center"),(state.initialized||r.triggerEventsOnLoad)&&_runCallbacks("onhide_end",n)):(a.isHiding=!0,close(n,!1,t))))}},show=function(e,t,n,r){if(isInitialized()){var a=evtPane.call(this,e),l=(options[a],state[a]),d=$Ps[a];$Rs[a];d&&l.isHidden&&!1!==_runCallbacks("onshow_start",a)&&(l.isShowing=!0,l.isSliding=!1,delete state.panesSliding[a],!1===t?close(a,!0):open(a,!1,n,r))}},toggle=function(e,t){if(isInitialized()){var n=evtObj(e),r=evtPane.call(this,e),a=state[r];n&&n.stopImmediatePropagation(),a.isHidden?show(r):a.isClosed?open(r,!!t):close(r)}},_closePane=function(e,t){$Ps[e];var n=state[e];_hidePane(e),n.isClosed=!0,n.isVisible=!1,t&&setAsClosed(e)},close=function(e,t,n,r){var a=evtPane.call(this,e);if(state.initialized||!$Ps[a]){if(isInitialized()){var l,d,h,f=$Ps[a],p=($Rs[a],$Ts[a],options[a]),y=state[a];_c[a];$N.queue((function(e){if(!f||!p.closable&&!y.isShowing&&!y.isHiding||!t&&y.isClosed&&!y.isShowing)return e();var r=!y.isShowing&&!1===_runCallbacks("onclose_start",a);if(d=y.isShowing,h=y.isHiding,y.isSliding,delete y.isShowing,delete y.isHiding,r)return e();l=!n&&!y.isClosed&&"none"!=p.fxName_close,y.isMoving=!0,y.isClosed=!0,y.isVisible=!1,h?y.isHidden=!0:d&&(y.isHidden=!1),y.isSliding?bindStopSlidingEvents(a,!1):sizeMidPanes("horz"===_c[a].dir?"":"center",!1),setAsClosed(a),l?(lockPaneForFX(a,!0),f.hide(p.fxName_close,p.fxSettings_close,p.fxSpeed_close,(function(){lockPaneForFX(a,!1),y.isClosed&&w(),e()}))):(_hidePane(a),w(),e())}))}}else _closePane(a,!0);function w(){y.isMoving=!1,bindStartSlidingEvents(a,!0);var e=_c.oppositeEdge[a];state[e].noRoom&&(setSizeLimits(e),makePaneFit(e)),r||!state.initialized&&!p.triggerEventsOnLoad||(d||_runCallbacks("onclose_end",a),d&&_runCallbacks("onshow_end",a),h&&_runCallbacks("onhide_end",a))}},setAsClosed=function(e){if($Rs[e]){$Ps[e];var t=$Rs[e],n=$Ts[e],r=options[e],a=(state[e],_c[e].side),l=r.resizerClass,d=r.togglerClass,h="-"+e;t.css(a,sC.inset[a]).removeClass(l+"-open "+l+h+"-open").removeClass(l+"-sliding "+l+h+"-sliding").addClass(l+"-closed "+l+h+"-closed"),r.resizable&&$.layout.plugins.draggable&&t.draggable("disable").removeClass("ui-state-disabled").css("cursor","default").attr("title",""),n&&(n.removeClass(d+"-open "+d+h+"-open").addClass(d+"-closed "+d+h+"-closed").attr("title",r.tips.Open),n.children(".content-open").hide(),n.children(".content-closed").css("display","block")),syncPinBtns(e,!1),state.initialized&&sizeHandles()}},open=function(e,t,n,r){if(isInitialized()){var a,l,d=evtPane.call(this,e),h=$Ps[d],f=($Rs[d],$Ts[d],options[d]),p=state[d];_c[d];$N.queue((function(e){if(!h||!f.resizable&&!f.closable&&!p.isShowing||p.isVisible&&!p.isSliding)return e();if(p.isHidden&&!p.isShowing)return e(),void show(d,!0);p.autoResize&&p.size!=f.size?sizePane(d,f.size,!0,!0,!0):setSizeLimits(d,t);var w=_runCallbacks("onopen_start",d);return"abort"===w?e():("NC"!==w&&setSizeLimits(d,t),p.minSize>p.maxSize?(syncPinBtns(d,!1),!r&&f.tips.noRoomToOpen&&alert(f.tips.noRoomToOpen),e()):(t?bindStopSlidingEvents(d,!0):p.isSliding?bindStopSlidingEvents(d,!1):f.slidable&&bindStartSlidingEvents(d,!1),p.noRoom=!1,makePaneFit(d),l=p.isShowing,delete p.isShowing,a=!n&&p.isClosed&&"none"!=f.fxName_open,p.isMoving=!0,p.isVisible=!0,p.isClosed=!1,l&&(p.isHidden=!1),void(a?(lockPaneForFX(d,!0),h.show(f.fxName_open,f.fxSettings_open,f.fxSpeed_open,(function(){lockPaneForFX(d,!1),p.isVisible&&y(),e()}))):(_showPane(d),y(),e()))))}))}function y(){p.isMoving=!1,_fixIframe(d),p.isSliding||sizeMidPanes("vert"==_c[d].dir?"center":"",!1),setAsOpen(d)}},setAsOpen=function(e,t){var n=$Ps[e],r=$Rs[e],a=$Ts[e],l=options[e],d=state[e],h=_c[e].side,f=l.resizerClass,p=l.togglerClass,y="-"+e;r.css(h,sC.inset[h]+getPaneSize(e)).removeClass(f+"-closed "+f+y+"-closed").addClass(f+"-open "+f+y+"-open"),d.isSliding?r.addClass(f+"-sliding "+f+y+"-sliding"):r.removeClass(f+"-sliding "+f+y+"-sliding"),removeHover(0,r),l.resizable&&$.layout.plugins.draggable?r.draggable("enable").css("cursor",l.resizerCursor).attr("title",l.tips.Resize):d.isSliding||r.css("cursor","default"),a&&(a.removeClass(p+"-closed "+p+y+"-closed").addClass(p+"-open "+p+y+"-open").attr("title",l.tips.Close),removeHover(0,a),a.children(".content-closed").hide(),a.children(".content-open").css("display","block")),syncPinBtns(e,!d.isSliding),$.extend(d,elDims(n)),state.initialized&&(sizeHandles(),sizeContent(e,!0)),!t&&(state.initialized||l.triggerEventsOnLoad)&&n.is(":visible")&&(_runCallbacks("onopen_end",e),d.isShowing&&_runCallbacks("onshow_end",e),state.initialized&&_runCallbacks("onresize_end",e))},slideOpen=function(e){if(isInitialized()){var t=evtObj(e),n=evtPane.call(this,e),r=state[n],a=options[n].slideDelay_open;t&&t.stopImmediatePropagation(),r.isClosed&&t&&"mouseenter"===t.type&&a>0?timer.set(n+"_openSlider",l,a):l()}function l(){r.isClosed?r.isMoving||open(n,!0):bindStopSlidingEvents(n,!0)}},slideClose=function(e){if(isInitialized()){var t=evtObj(e),n=evtPane.call(this,e),r=options[n],a=state[n],l=a.isMoving?1e3:300;if(!a.isClosed&&!a.isResizing)if("click"===r.slideTrigger_close)d();else{if(r.preventQuickSlideClose&&a.isMoving)return;if(r.preventPrematureSlideClose&&t&&$.layout.isMouseOverElem(t,$Ps[n]))return;t?timer.set(n+"_closeSlider",d,max(r.slideDelay_close,l)):d()}}function d(){a.isClosed?bindStopSlidingEvents(n,!1):a.isMoving||close(n)}},slideToggle=function(e){var t=evtPane.call(this,e);toggle(t,!0)},lockPaneForFX=function(e,t){var n=$Ps[e],r=state[e],a=options[e],l=options.zIndexes;t?(showMasks(e,{animation:!0,objectsOnly:!0}),n.css({zIndex:l.pane_animate}),"south"==e?n.css({top:sC.inset.top+sC.innerHeight-n.outerHeight()}):"east"==e&&n.css({left:sC.inset.left+sC.innerWidth-n.outerWidth()})):(hideMasks(),n.css({zIndex:r.isSliding?l.pane_sliding:l.pane_normal}),"south"==e?n.css({top:"auto"}):"east"!=e||n.css("left").match(/\-99999/)||n.css({left:"auto"}),browser.msie&&a.fxOpacityFix&&"slide"!=a.fxName_open&&n.css("filter")&&1==n.css("opacity")&&n[0].style.removeAttribute("filter"))},bindStartSlidingEvents=function(e,t){var n=options[e],r=($Ps[e],$Rs[e]),a=n.slideTrigger_open.toLowerCase();!r||t&&!n.slidable||(a.match(/mouseover/)?a=n.slideTrigger_open="mouseenter":a.match(/(click|dblclick|mouseenter)/)||(a=n.slideTrigger_open="click"),n.resizerDblClickToggle&&a.match(/click/)&&r[t?"unbind":"bind"]("dblclick."+sID,toggle),r[t?"bind":"unbind"](a+"."+sID,slideOpen).css("cursor",t?n.sliderCursor:"default").attr("title",t?n.tips.Slide:""))},bindStopSlidingEvents=function(e,t){var n=options[e],r=state[e],a=(_c[e],options.zIndexes),l=n.slideTrigger_close.toLowerCase(),d=t?"bind":"unbind",h=$Ps[e],f=$Rs[e];function p(t){timer.clear(e+"_closeSlider"),t.stopPropagation()}timer.clear(e+"_closeSlider"),t?(r.isSliding=!0,state.panesSliding[e]=!0,bindStartSlidingEvents(e,!1)):(r.isSliding=!1,delete state.panesSliding[e]),h.css("zIndex",t?a.pane_sliding:a.pane_normal),f.css("zIndex",t?a.pane_sliding+2:a.resizer_normal),l.match(/(click|mouseleave)/)||(l=n.slideTrigger_close="mouseleave"),f[d](l,slideClose),"mouseleave"===l&&(h[d]("mouseleave."+sID,slideClose),f[d]("mouseenter."+sID,p),h[d]("mouseenter."+sID,p)),t?"click"!==l||n.resizable||(f.css("cursor",t?n.sliderCursor:"default"),f.attr("title",t?n.tips.Close:"")):timer.clear(e+"_closeSlider")},makePaneFit=function(e,t,n,r){var a=options[e],l=state[e],d=_c[e],h=$Ps[e],f=$Rs[e],p="vert"===d.dir,y=!1;if(("center"===e||p&&l.noVerticalRoom)&&((y=l.maxHeight>=0)&&l.noRoom?(_showPane(e),f&&f.show(),l.isVisible=!0,l.noRoom=!1,p&&(l.noVerticalRoom=!1),_fixIframe(e)):y||l.noRoom||(_hidePane(e),f&&f.hide(),l.isVisible=!1,l.noRoom=!0)),"center"===e);else if(l.minSize<=l.maxSize){if(y=!0,l.size>l.maxSize)sizePane(e,l.maxSize,n,!0,r);else if(l.size<l.minSize)sizePane(e,l.minSize,n,!0,r);else if(f&&l.isVisible&&h.is(":visible")){var w=l.size+sC.inset[d.side];$.layout.cssNum(f,d.side)!=w&&f.css(d.side,w)}l.noRoom&&(l.wasOpen&&a.closable?a.autoReopen?open(e,!1,!0,!0):l.noRoom=!1:show(e,l.wasOpen,!0,!0))}else l.noRoom||(l.noRoom=!0,l.wasOpen=!l.isClosed&&!l.isSliding,l.isClosed||(a.closable?close(e,!0,!0):hide(e,!0)))},manualSizePane=function(e,t,n,r,a){if(isInitialized()){var l=evtPane.call(this,e),d=options[l],h=state[l],f=a||d.livePaneResizing&&!h.isResizing;h.autoResize=!1,sizePane(l,t,n,r,f)}},sizePane=function(e,t,n,r,a){if(isInitialized()){var l,d,h=evtPane.call(this,e),f=options[h],p=state[h],y=$Ps[h],w=$Rs[h],_=_c[h].side,C=_c[h].sizeType.toLowerCase(),S=p.isResizing&&!f.triggerEventsDuringLiveResize,k=!0!==r&&f.animatePaneSizing;$N.queue((function(e){if(setSizeLimits(h),l=p.size,t=_parseSize(h,t),t=max(t,_parseSize(h,f.minSize)),(t=min(t,p.maxSize))<p.minSize)return e(),void makePaneFit(h,!1,n);if(!a&&t===l)return e();if(p.newSize=t,!n&&state.initialized&&p.isVisible&&_runCallbacks("onresize_start",h),d=cssSize(h,t),k&&y.is(":visible")){var r=$.layout.effects.size[h]||$.layout.effects.size.all,w=f.fxSettings_size.easing||r.easing,_=options.zIndexes,S={};S[C]=d+"px",p.isMoving=!0,y.css({zIndex:_.pane_animate}).show().animate(S,f.fxSpeed_size,w,(function(){y.css({zIndex:p.isSliding?_.pane_sliding:_.pane_normal}),p.isMoving=!1,delete p.newSize,x(),e()}))}else y.css(C,d),delete p.newSize,y.is(":visible")?x():(p.size=t,$.extend(p,elDims(y))),e()}))}function x(){for(var e="width"===C?y.outerWidth():y.outerHeight(),r=[{pane:h,count:1,target:t,actual:e,correct:t===e,attempt:t,cssSize:d}],f=r[0],k={},x="Inaccurate size after resizing the "+h+"-pane.";!(f.correct||(k={pane:h,count:f.count+1,target:t},f.actual>t?k.attempt=max(0,f.attempt-(f.actual-t)):k.attempt=max(0,f.attempt+(t-f.actual)),k.cssSize=cssSize(h,k.attempt),y.css(C,k.cssSize),k.actual="width"==C?y.outerWidth():y.outerHeight(),k.correct=t===k.actual,1===r.length&&(_log(x,!1,!0),_log(f,!1,!0)),_log(k,!1,!0),r.length>3));)r.push(k),f=r[r.length-1];p.size=t,$.extend(p,elDims(y)),p.isVisible&&y.is(":visible")&&(w&&w.css(_,t+sC.inset[_]),sizeContent(h)),!n&&!S&&state.initialized&&p.isVisible&&_runCallbacks("onresize_end",h),n||(p.isSliding||sizeMidPanes("horz"==_c[h].dir?"":"center",S,a),sizeHandles());var E=_c.oppositeEdge[h];t<l&&state[E].noRoom&&(setSizeLimits(E),makePaneFit(E,!1,n)),r.length>1&&_log(x+"\nSee the Error Console for details.",!0,!0)}},sizeMidPanes=function(e,t,n){e=(e||"east,west,center").split(","),$.each(e,(function(e,r){if($Ps[r]){var a=options[r],l=state[r],d=$Ps[r],h=($Rs[r],!0),f={},p=$.layout.showInvisibly(d),y=calcNewCenterPaneDims();if($.extend(l,elDims(d)),"center"===r){if(!n&&l.isVisible&&y.width===l.outerWidth&&y.height===l.outerHeight)return d.css(p),!0;if($.extend(l,cssMinDims(r),{maxWidth:y.width,maxHeight:y.height}),f=y,l.newWidth=f.width,l.newHeight=f.height,f.width=cssW(d,f.width),f.height=cssH(d,f.height),h=f.width>=0&&f.height>=0,!state.initialized&&a.minWidth>y.width){var w=a.minWidth-l.outerWidth,_=options.east.minSize||0,C=options.west.minSize||0,S=state.east.size,k=state.west.size,x=S,E=k;if(w>0&&state.east.isVisible&&S>_&&(w-=S-(x=max(S-_,S-w))),w>0&&state.west.isVisible&&k>C&&(w-=k-(E=max(k-C,k-w))),0===w)return S&&S!=_&&sizePane("east",x,!0,!0,n),k&&k!=C&&sizePane("west",E,!0,!0,n),sizeMidPanes("center",t,n),void d.css(p)}}else{if(l.isVisible&&!l.noVerticalRoom&&$.extend(l,elDims(d),cssMinDims(r)),!n&&!l.noVerticalRoom&&y.height===l.outerHeight)return d.css(p),!0;f.top=y.top,f.bottom=y.bottom,l.newSize=y.height,f.height=cssH(d,y.height),l.maxHeight=f.height,(h=l.maxHeight>=0)||(l.noVerticalRoom=!0)}if(h?(!t&&state.initialized&&_runCallbacks("onresize_start",r),d.css(f),"center"!==r&&sizeHandles(r),!l.noRoom||l.isClosed||l.isHidden||makePaneFit(r),l.isVisible&&($.extend(l,elDims(d)),state.initialized&&sizeContent(r))):!l.noRoom&&l.isVisible&&makePaneFit(r),d.css(p),delete l.newSize,delete l.newWidth,delete l.newHeight,!l.isVisible)return!0;if("center"===r){var A=browser.isIE6||!browser.boxModel;$Ps.north&&(A||"IFRAME"==state.north.tagName)&&$Ps.north.css("width",cssW($Ps.north,sC.innerWidth)),$Ps.south&&(A||"IFRAME"==state.south.tagName)&&$Ps.south.css("width",cssW($Ps.south,sC.innerWidth))}!t&&state.initialized&&_runCallbacks("onresize_end",r)}}))},resizeAll=function(e){var t=sC.innerWidth,n=sC.innerHeight;if(evtPane(e),$N.is(":visible"))if(state.initialized){if(!0===e&&$.isPlainObject(options.outset)&&$N.css(options.outset),$.extend(sC,elDims($N,options.inset)),sC.outerHeight){if(!0===e&&setPanePosition(),!1===_runCallbacks("onresizeall_start"))return!1;var r,a;sC.innerHeight,sC.innerWidth;$.each(["south","north","east","west"],(function(e,t){$Ps[t]&&(r=options[t],(a=state[t]).autoResize&&a.size!=r.size?sizePane(t,r.size,!0,!0,!0):(setSizeLimits(t),makePaneFit(t,!1,!0,!0)))})),sizeMidPanes("",!0,!0),sizeHandles(),$.each(_c.allPanes,(function(e,t){$Ps[t]&&state[t].isVisible&&_runCallbacks("onresize_end",t)})),_runCallbacks("onresizeall_end")}}else _initLayoutElements()},resizeChildren=function(e,t){var n=evtPane.call(this,e);if(options[n].resizeChildren){t||refreshChildren(n);var r=children[n];$.isPlainObject(r)&&$.each(r,(function(e,t){t.destroyed||t.resizeAll()}))}},sizeContent=function(e,t){if(isInitialized()){var n=evtPane.call(this,e);n=n?n.split(","):_c.allPanes,$.each(n,(function(e,n){var r=$Ps[n],a=$Cs[n],l=options[n],d=state[n],h=d.content;if(!r||!a||!r.is(":visible"))return!0;if((a.length||(initContent(n,!1),a))&&!1!==_runCallbacks("onsizecontent_start",n)){(!d.isMoving&&!d.isResizing||l.liveContentResizing||t||null==h.top)&&(y(),h.hiddenFooters>0&&"hidden"===r.css("overflow")&&(r.css("overflow","visible"),y(),r.css("overflow","hidden")));var f=d.innerHeight-(h.spaceAbove-d.css.paddingTop)-(h.spaceBelow-d.css.paddingBottom);a.is(":visible")&&h.height==f||(setOuterHeight(a,f,!0),h.height=f),state.initialized&&_runCallbacks("onsizecontent_end",n)}function p(e){return max(d.css.paddingBottom,parseInt(e.css("marginBottom"),10)||0)}function y(){var e=options[n].contentIgnoreSelector,t=a.nextAll().not(".ui-layout-mask").not(e||":lt(0)"),r=t.filter(":visible"),l=r.filter(":last");(h={top:a[0].offsetTop,height:a.outerHeight(),numFooters:t.length,hiddenFooters:t.length-r.length,spaceBelow:0}).spaceAbove=h.top,h.bottom=h.top+h.height,l.length?h.spaceBelow=l[0].offsetTop+l.outerHeight()-h.bottom+p(l):h.spaceBelow=p(a)}}))}},sizeHandles=function(e){var t=evtPane.call(this,e);t=t?t.split(","):_c.borderPanes,$.each(t,(function(e,t){var n,r=options[t],a=state[t],l=$Ps[t],d=$Rs[t],h=$Ts[t];if(l&&d){var f,p,y,w=_c[t].dir,_=a.isClosed?"_closed":"_open",C=r["spacing"+_],S=r["togglerAlign"+_],k=r["togglerLength"+_];if(0!==C){if(a.noRoom||a.isHidden||d.show(),"horz"===w?(f=sC.innerWidth,a.resizerLength=f,p=$.layout.cssNum(l,"left"),d.css({width:cssW(d,f),height:cssH(d,C),left:p>-9999?p:sC.inset.left})):(f=l.outerHeight(),a.resizerLength=f,d.css({height:cssH(d,f),width:cssW(d,C),top:sC.inset.top+getPaneSize("north",!0)})),removeHover(r,d),h){if(0===k||a.isSliding&&r.hideTogglerOnSlide)return void h.hide();if(h.show(),!(k>0)||"100%"===k||k>f)k=f,y=0;else if(isStr(S))switch(S){case"top":case"left":y=0;break;case"bottom":case"right":y=f-k;break;case"middle":case"center":default:y=round((f-k)/2)}else{var x=parseInt(S,10);y=S>=0?x:f-k+x}if("horz"===w){var E=cssW(h,k);h.css({width:E,height:cssH(h,C),left:y,top:0}),h.children(".content").each((function(){(n=$(this)).css("marginLeft",round((E-n.outerWidth())/2))}))}else{var A=cssH(h,k);h.css({height:A,width:cssW(h,C),top:y,left:0}),h.children(".content").each((function(){(n=$(this)).css("marginTop",round((A-n.outerHeight())/2))}))}removeHover(0,h)}state.initialized||!r.initHidden&&!a.isHidden||(d.hide(),h&&h.hide())}else d.hide()}}))},enableClosable=function(e){if(isInitialized()){var t=evtPane.call(this,e),n=$Ts[t],r=options[t];n&&(r.closable=!0,n.bind("click."+sID,(function(e){e.stopPropagation(),toggle(t)})).css("visibility","visible").css("cursor","pointer").attr("title",state[t].isClosed?r.tips.Open:r.tips.Close).show())}},disableClosable=function(e,t){if(isInitialized()){var n=evtPane.call(this,e),r=$Ts[n];r&&(options[n].closable=!1,state[n].isClosed&&open(n,!1,!0),r.unbind("."+sID).css("visibility",t?"hidden":"visible").css("cursor","default").attr("title",""))}},enableSlidable=function(e){if(isInitialized()){var t=evtPane.call(this,e),n=$Rs[t];n&&n.data("draggable")&&(options[t].slidable=!0,state[t].isClosed&&bindStartSlidingEvents(t,!0))}},disableSlidable=function(e){if(isInitialized()){var t=evtPane.call(this,e),n=$Rs[t];n&&(options[t].slidable=!1,state[t].isSliding?close(t,!1,!0):(bindStartSlidingEvents(t,!1),n.css("cursor","default").attr("title",""),removeHover(null,n[0])))}},enableResizable=function(e){if(isInitialized()){var t=evtPane.call(this,e),n=$Rs[t],r=options[t];n&&n.data("draggable")&&(r.resizable=!0,n.draggable("enable"),state[t].isClosed||n.css("cursor",r.resizerCursor).attr("title",r.tips.Resize))}},disableResizable=function(e){if(isInitialized()){var t=evtPane.call(this,e),n=$Rs[t];n&&n.data("draggable")&&(options[t].resizable=!1,n.draggable("disable").css("cursor","default").attr("title",""),removeHover(null,n[0]))}},swapPanes=function(e,t){if(isInitialized()){var n=evtPane.call(this,e);if(state[n].edge=t,state[t].edge=n,!1===_runCallbacks("onswap_start",n)||!1===_runCallbacks("onswap_start",t))return state[n].edge=n,void(state[t].edge=t);var r=d(n),a=d(t),l={};return l[n]=r?r.state.size:0,l[t]=a?a.state.size:0,$Ps[n]=!1,$Ps[t]=!1,state[n]={},state[t]={},$Ts[n]&&$Ts[n].remove(),$Ts[t]&&$Ts[t].remove(),$Rs[n]&&$Rs[n].remove(),$Rs[t]&&$Rs[t].remove(),$Rs[n]=$Rs[t]=$Ts[n]=$Ts[t]=!1,h(r,t),h(a,n),r=a=l=null,$Ps[n]&&$Ps[n].css(_c.visible),$Ps[t]&&$Ps[t].css(_c.visible),resizeAll(),_runCallbacks("onswap_end",n),void _runCallbacks("onswap_end",t)}function d(e){var t=$Ps[e],n=$Cs[e];return!!t&&{pane:e,P:!!t&&t[0],C:!!n&&n[0],state:$.extend(!0,{},state[e]),options:$.extend(!0,{},options[e])}}function h(e,t){if(e){var n,r,a=e.P,d=e.C,h=e.pane,f=_c[t],p=$.extend(!0,{},state[t]),y=options[t],w={resizerCursor:y.resizerCursor};$.each("fxName,fxSpeed,fxSettings".split(","),(function(e,t){w[t+"_open"]=y[t+"_open"],w[t+"_close"]=y[t+"_close"],w[t+"_size"]=y[t+"_size"]})),$Ps[t]=$(a).data({layoutPane:Instance[t],layoutEdge:t}).css(_c.hidden).css(f.cssReq),$Cs[t]=!!d&&$(d),options[t]=$.extend(!0,{},e.options,w),state[t]=$.extend(!0,{},e.state),n=new RegExp(y.paneClass+"-"+h,"g"),a.className=a.className.replace(n,y.paneClass+"-"+t),initHandles(t),f.dir!=_c[h].dir?(r=l[t]||0,setSizeLimits(t),r=max(r,state[t].minSize),manualSizePane(t,r,!0,!0)):$Rs[t].css(f.side,sC.inset[f.side]+(state[t].isVisible?getPaneSize(t):0)),e.state.isVisible&&!p.isVisible?setAsOpen(t,!0):(setAsClosed(t),bindStartSlidingEvents(t,!0)),e=null}}},syncPinBtns=function(e,t){$.layout.plugins.buttons&&$.each(state[e].pins,(function(n,r){$.layout.buttons.setPinState(Instance,$(r),e,t)}))};function keyDown(e){if(!e)return!0;var t=e.keyCode;if(t<33)return!0;var n,r,a,l,d={38:"north",40:"south",37:"west",39:"east"},h=(e.altKey,e.shiftKey),f=e.ctrlKey;return f&&t>=37&&t<=40&&options[d[t]].enableCursorHotkey?l=d[t]:(f||h)&&$.each(_c.borderPanes,(function(e,d){if(n=options[d],r=n.customHotkey,a=n.customHotkeyModifier,(h&&"SHIFT"==a||f&&"CTRL"==a||f&&h)&&r&&t===(isNaN(r)||r<=9?r.toUpperCase().charCodeAt(0):r))return l=d,!1})),!(l&&$Ps[l]&&options[l].closable&&!state[l].isHidden)||(toggle(l),e.stopPropagation(),e.returnValue=!1,!1)}function allowOverflow(e){var t;if(isInitialized()&&(this&&this.tagName&&(e=this),isStr(e)?t=$Ps[e]:$(e).data("layoutRole")?t=$(e):$(e).parents().each((function(){if($(this).data("layoutRole"))return t=$(this),!1})),t&&t.length)){var n=t.data("layoutEdge"),r=state[n];if(r.cssSaved&&resetOverflow(n),r.isSliding||r.isResizing||r.isClosed)r.cssSaved=!1;else{var a={zIndex:options.zIndexes.resizer_normal+1},l={},d=t.css("overflow"),h=t.css("overflowX"),f=t.css("overflowY");"visible"!=d&&(l.overflow=d,a.overflow="visible"),h&&!h.match(/(visible|auto)/)&&(l.overflowX=h,a.overflowX="visible"),f&&!f.match(/(visible|auto)/)&&(l.overflowY=h,a.overflowY="visible"),r.cssSaved=l,t.css(a),$.each(_c.allPanes,(function(e,t){t!=n&&resetOverflow(t)}))}}}function resetOverflow(e){var t;if(isInitialized()&&(this&&this.tagName&&(e=this),isStr(e)?t=$Ps[e]:$(e).data("layoutRole")?t=$(e):$(e).parents().each((function(){if($(this).data("layoutRole"))return t=$(this),!1})),t&&t.length)){var n=t.data("layoutEdge"),r=state[n],a=r.cssSaved||{};r.isSliding||r.isResizing||t.css("zIndex",options.zIndexes.pane_normal),t.css(a),r.cssSaved=!1}}try{var $N=$(this).eq(0);if(!$N.length)return _log(options.errors.containerMissing);if($N.data("layoutContainer")&&$N.data("layout"))return $N.data("layout")}catch(e){console.log("eeeee",e)}var $Ps={},$Cs={},$Rs={},$Ts={},$Ms=$([]),sC=state.container,sID=state.id,Instance={options:options,state:state,container:$N,panes:$Ps,contents:$Cs,resizers:$Rs,togglers:$Ts,hide:hide,show:show,toggle:toggle,open:open,close:close,slideOpen:slideOpen,slideClose:slideClose,slideToggle:slideToggle,setSizeLimits:setSizeLimits,_sizePane:sizePane,sizePane:manualSizePane,sizeContent:sizeContent,swapPanes:swapPanes,showMasks:showMasks,hideMasks:hideMasks,initContent:initContent,addPane:addPane,removePane:removePane,createChildren:createChildren,refreshChildren:refreshChildren,enableClosable:enableClosable,disableClosable:disableClosable,enableSlidable:enableSlidable,disableSlidable:disableSlidable,enableResizable:enableResizable,disableResizable:disableResizable,allowOverflow:allowOverflow,resetOverflow:resetOverflow,destroy:destroy,initPanes:isInitialized,resizeAll:resizeAll,runCallbacks:_runCallbacks,hasParentLayout:!1,children:children,north:!1,south:!1,west:!1,east:!1,center:!1};return"cancel"===_create()?null:Instance}}(jQuery),function(e){e.ui||(e.ui={}),e.ui.cookie={acceptsCookies:!!navigator.cookieEnabled,read:function(t){for(var n,r=document.cookie,a=r?r.split(";"):[],l=0,d=a.length;l<d;l++)if((n=e.trim(a[l]).split("="))[0]==t)return decodeURIComponent(n[1]);return null},write:function(t,n,r){var a="",l="",d=!1,h=r||{},f=h.expires||null,p=e.type(f);"date"===p?l=f:"string"===p&&f>0&&(f=parseInt(f,10),p="number"),"number"===p&&(l=new Date,f>0?l.setDate(l.getDate()+f):(l.setFullYear(1970),d=!0)),l&&(a+=";expires="+l.toUTCString()),h.path&&(a+=";path="+h.path),h.domain&&(a+=";domain="+h.domain),h.secure&&(a+=";secure"),document.cookie=t+"="+(d?"":encodeURIComponent(n))+a},clear:function(t){e.ui.cookie.write(t,"",{expires:-1})}},e.cookie||(e.cookie=function(t,n,r){var a=e.ui.cookie;if(null===n)a.clear(t);else{if(void 0===n)return a.read(t);a.write(t,n,r)}}),e.layout.plugins.stateManagement=!0,e.layout.config.optionRootKeys.push("stateManagement"),e.layout.defaults.stateManagement={enabled:!1,autoSave:!0,autoLoad:!0,animateLoad:!0,includeChildren:!0,stateKeys:"north.size,south.size,east.size,west.size,north.isClosed,south.isClosed,east.isClosed,west.isClosed,north.isHidden,south.isHidden,east.isHidden,west.isHidden",cookie:{name:"",domain:"",path:"",expires:"",secure:!1}},e.layout.optionsMap.layout.push("stateManagement"),e.layout.state={saveCookie:function(t,n,r){var a=t.options,l=a.stateManagement,d=e.extend(!0,{},l.cookie,r||null),h=t.state.stateData=t.readState(n||l.stateKeys);return e.ui.cookie.write(d.name||a.name||"Layout",e.layout.state.encodeJSON(h),d),e.extend(!0,{},h)},deleteCookie:function(t){var n=t.options;e.ui.cookie.clear(n.stateManagement.cookie.name||n.name||"Layout")},readCookie:function(t){var n=t.options,r=e.ui.cookie.read(n.stateManagement.cookie.name||n.name||"Layout");return r?e.layout.state.decodeJSON(r):{}},loadCookie:function(t){var n=e.layout.state.readCookie(t);return n&&(t.state.stateData=e.extend(!0,{},n),t.loadState(n)),n},loadState:function(t,n,r){if(e.isPlainObject(n)&&!e.isEmptyObject(n)){n=t.state.stateData=e.layout.transformData(n);var a=t.options.stateManagement;if(r=e.extend({animateLoad:!1,includeChildren:a.includeChildren},r),t.state.initialized){var l,d,h,f,p,y,w=!r.animateLoad;if(e.each(e.layout.config.borderPanes,(function(r,a){_=n[a],e.isPlainObject(_)&&(s=_.size,l=_.initClosed,d=_.initHidden,ar=_.autoResize,h=t.state[a],f=h.isVisible,ar&&(h.autoResize=ar),f||t._sizePane(a,s,!1,!1,!1),!0===d?t.hide(a,w):!0===l?t.close(a,!1,w):!1===l?t.open(a,!1,w):!1===d&&t.show(a,!1,w),f&&t._sizePane(a,s,!1,!1,w))})),r.includeChildren)e.each(t.children,(function(t,r){(p=n[t]?n[t].children:0)&&r&&e.each(r,(function(e,t){y=p[e],t&&y&&t.loadState(y)}))}))}else{var _=e.extend(!0,{},n);e.each(e.layout.config.allPanes,(function(e,t){_[t]&&delete _[t].children})),e.extend(!0,t.options,_)}}},readState:function(t,n){"string"===e.type(n)&&(n={keys:n}),n||(n={});var r,a,l,d,h,f,p,y=t.options.stateManagement,w=n.includeChildren,_=void 0!==w?w:y.includeChildren,C=n.stateKeys||y.stateKeys,S={isClosed:"initClosed",isHidden:"initHidden"},k=t.state,x=e.layout.config.allPanes,E={};e.isArray(C)&&(C=C.join(","));for(var A=0,T=(C=C.replace(/__/g,".").split(",")).length;A<T;A++)a=(r=C[A].split("."))[0],l=r[1],e.inArray(a,x)<0||null!=(d=k[a][l])&&("isClosed"==l&&k[a].isSliding&&(d=!0),(E[a]||(E[a]={}))[S[l]?S[l]:l]=d);return _&&e.each(x,(function(n,r){f=t.children[r],h=k.stateData[r],e.isPlainObject(f)&&!e.isEmptyObject(f)&&((p=E[r]||(E[r]={})).children||(p.children={}),e.each(f,(function(t,n){n.state.initialized?p.children[t]=e.layout.state.readState(n):h&&h.children&&h.children[t]&&(p.children[t]=e.extend(!0,{},h.children[t]))})))})),E},encodeJSON:function(t){return function t(n){var r,a,l,d=[],h=0,f=e.isArray(n);for(r in n)a=n[r],"string"==(l=typeof a)?a='"'+a+'"':"object"==l&&(a=t(a)),d[h++]=(f?"":'"'+r+'":')+a;return(f?"[":"{")+d.join(",")+(f?"]":"}")}(t)},decodeJSON:function(t){try{return e.parseJSON?e.parseJSON(t):window.eval("("+t+")")||{}}catch(e){return{}}},_create:function(t){var n=e.layout.state,r=t.options.stateManagement;if(e.extend(t,{readCookie:function(){return n.readCookie(t)},deleteCookie:function(){n.deleteCookie(t)},saveCookie:function(e,r){return n.saveCookie(t,e,r)},loadCookie:function(){return n.loadCookie(t)},loadState:function(e,r){n.loadState(t,e,r)},readState:function(e){return n.readState(t,e)},encodeJSON:n.encodeJSON,decodeJSON:n.decodeJSON}),t.state.stateData={},r.autoLoad)if(e.isPlainObject(r.autoLoad))e.isEmptyObject(r.autoLoad)||t.loadState(r.autoLoad);else if(r.enabled)if(e.isFunction(r.autoLoad)){var a={};try{a=r.autoLoad(t,t.state,t.options,t.options.name||"")}catch(e){}a&&e.isPlainObject(a)&&!e.isEmptyObject(a)&&t.loadState(a)}else t.loadCookie()},_unload:function(t){var n=t.options.stateManagement;if(n.enabled&&n.autoSave)if(e.isFunction(n.autoSave))try{n.autoSave(t,t.state,t.options,t.options.name||"")}catch(e){}else t.saveCookie()}},e.layout.onCreate.push(e.layout.state._create),e.layout.onUnload.push(e.layout.state._unload),e.layout.plugins.buttons=!0,e.layout.defaults.autoBindCustomButtons=!1,e.layout.optionsMap.layout.push("autoBindCustomButtons"),e.layout.buttons={init:function(t){var n,r=t.options.name||"";e.each("toggle,open,close,pin,toggle-slide,open-slide".split(","),(function(a,l){e.each(e.layout.config.borderPanes,(function(a,d){e(".ui-layout-button-"+l+"-"+d).each((function(){null!=(n=e(this).data("layoutName")||e(this).attr("layoutName"))&&n!==r||t.bindButton(this,l,d)}))}))}))},get:function(t,n,r,a){var l=e(n),d=t.options,h=d.errors.addButtonError;if(l.length)if(e.inArray(r,e.layout.config.borderPanes)<0)e.layout.msg(h+" "+d.errors.pane+": "+r,!0),l=e("");else{var f=d[r].buttonClass+"-"+a;l.addClass(f+" "+f+"-"+r).data("layoutName",d.name)}else e.layout.msg(h+" "+d.errors.selector+": "+n,!0);return l},bind:function(t,n,r,a){var l=e.layout.buttons;switch(r.toLowerCase()){case"toggle":l.addToggle(t,n,a);break;case"open":l.addOpen(t,n,a);break;case"close":l.addClose(t,n,a);break;case"pin":l.addPin(t,n,a);break;case"toggle-slide":l.addToggle(t,n,a,!0);break;case"open-slide":l.addOpen(t,n,a,!0)}return t},addToggle:function(t,n,r,a){return e.layout.buttons.get(t,n,r,"toggle").click((function(e){t.toggle(r,!!a),e.stopPropagation()})),t},addOpen:function(t,n,r,a){return e.layout.buttons.get(t,n,r,"open").attr("title",t.options[r].tips.Open).click((function(e){t.open(r,!!a),e.stopPropagation()})),t},addClose:function(t,n,r){return e.layout.buttons.get(t,n,r,"close").attr("title",t.options[r].tips.Close).click((function(e){t.close(r),e.stopPropagation()})),t},addPin:function(t,n,r){var a=e.layout.buttons,l=a.get(t,n,r,"pin");if(l.length){var d=t.state[r];l.click((function(n){a.setPinState(t,e(this),r,d.isSliding||d.isClosed),d.isSliding||d.isClosed?t.open(r):t.close(r),n.stopPropagation()})),a.setPinState(t,l,r,!d.isClosed&&!d.isSliding),d.pins.push(n)}return t},setPinState:function(e,t,n,r){var a=t.attr("pin");if(!a||r!==("down"==a)){var l=e.options[n],d=l.buttonClass+"-pin",h=d+"-"+n,f=d+"-up "+h+"-up",p=d+"-down "+h+"-down";t.attr("pin",r?"down":"up").attr("title",r?l.tips.Unpin:l.tips.Pin).removeClass(r?f:p).addClass(r?p:f)}},syncPinBtns:function(t,n,r){e.each(t.state[n].pins,(function(a,l){e.layout.buttons.setPinState(t,e(l),n,r)}))},_load:function(t){var n=e.layout.buttons;e.extend(t,{bindButton:function(e,r,a){return n.bind(t,e,r,a)},addToggleBtn:function(e,r,a){return n.addToggle(t,e,r,a)},addOpenBtn:function(e,r,a){return n.addOpen(t,e,r,a)},addCloseBtn:function(e,r){return n.addClose(t,e,r)},addPinBtn:function(e,r){return n.addPin(t,e,r)}});for(var r=0;r<4;r++){var a=e.layout.config.borderPanes[r];t.state[a].pins=[]}t.options.autoBindCustomButtons&&n.init(t)},_unload:function(e){}},e.layout.onLoad.push(e.layout.buttons._load),e.layout.plugins.browserZoom=!0,e.layout.defaults.browserZoomCheckInterval=1e3,e.layout.optionsMap.layout.push("browserZoomCheckInterval"),e.layout.browserZoom={_init:function(t){!1!==e.layout.browserZoom.ratio()&&e.layout.browserZoom._setTimer(t)},_setTimer:function(t){if(!t.destroyed){var n=t.options,r=t.state,a=t.hasParentLayout?5e3:Math.max(n.browserZoomCheckInterval,100);setTimeout((function(){if(!t.destroyed&&n.resizeWithWindow){var a=e.layout.browserZoom.ratio();a!==r.browserZoom&&(r.browserZoom=a,t.resizeAll()),e.layout.browserZoom._setTimer(t)}}),a)}},ratio:function(){var t,n,r,a=window,l=screen,d=document,h=d.documentElement||d.body,f=e.layout.browser,p=f.version;return!(f.msie&&p>8||!f.msie)&&(l.deviceXDPI&&l.systemXDPI?y(l.deviceXDPI,l.systemXDPI):f.webkit&&(t=d.body.getBoundingClientRect)?y(t.left-t.right,d.body.offsetWidth):f.webkit&&(n=a.outerWidth)?y(n,a.innerWidth):!(!(n=l.width)||!(r=h.clientWidth))&&y(n,r));function y(e,t){return(parseInt(e,10)/parseInt(t,10)*100).toFixed()}}},e.layout.onReady.push(e.layout.browserZoom._init)}(jQuery)},function(e,t){!function(e){if(e.support.touch="ontouchend"in document,e.support.touch){var t,n=e.ui.mouse.prototype,r=n._mouseInit,a=n._mouseDestroy;n._touchStart=function(e){!t&&this._mouseCapture(e.originalEvent.changedTouches[0])&&(t=!0,this._touchMoved=!1,l(e,"mouseover"),l(e,"mousemove"),l(e,"mousedown"))},n._touchMove=function(e){t&&(this._touchMoved=!0,l(e,"mousemove"))},n._touchEnd=function(e){t&&(l(e,"mouseup"),l(e,"mouseout"),this._touchMoved||l(e,"click"),t=!1)},n._mouseInit=function(){this.element.bind({touchstart:e.proxy(this,"_touchStart"),touchmove:e.proxy(this,"_touchMove"),touchend:e.proxy(this,"_touchEnd")}),r.call(this)},n._mouseDestroy=function(){this.element.unbind({touchstart:e.proxy(this,"_touchStart"),touchmove:e.proxy(this,"_touchMove"),touchend:e.proxy(this,"_touchEnd")}),a.call(this)}}function l(e,t){if(!(e.originalEvent.touches.length>1)){e.preventDefault();var n=e.originalEvent.changedTouches[0],r=document.createEvent("MouseEvents");r.initMouseEvent(t,!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(r)}}}(jQuery)},function(e,t,n){var r=n(18),a=n(28),l=n(386).f;r({target:"Object",stat:!0,forced:a((function(){return!Object.getOwnPropertyNames(1)}))},{getOwnPropertyNames:l})},function(e,t,n){n(246)},,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"FILE",(function(){return sr})),n.d(r,"URL",(function(){return lr})),n.d(r,"TEXT",(function(){return cr}));n(11),n(23),n(6),n(52),n(9),n(22),n(67),n(17);var a=n(2),l=(n(7),n(24),n(35),n(14),n(16),n(59),n(8),n(10),n(31),n(60),a.a.directive("fileEntity",["RecursionHelper",function(e){return{restrict:"E",scope:{entity:"=",permissions:"=",depth:"=?"},templateUrl:"entityListItemTemplate",compile:function(t){return e.compile(t,(function(e,t,n,r){return e.$originalApply=e.$apply,e.$apply=function(e){null==e&&(e=function(){});var t=this.$root.$$phase;return"$apply"===t||"$digest"===t?e():this.$originalApply(e)}}))}}}]),a.a.directive("draggable",(function(){return{link:function(e,t,n){return e.$watch(n.draggable,(function(r){if(r)return t.draggable({delay:250,opacity:.95,scroll:!0,helper:e.$eval(n.draggableHelper)})}))}}})),a.a.directive("droppable",(function(){return{link:function(e,t,n){return e.$watch(n.droppable,(function(r){if(r)return t.droppable({greedy:!0,hoverClass:"droppable-hover",tolerance:"pointer",accept:n.accept,drop:e.$eval(n.onDropCallback)})}))}}})),n(19),n(15),n(34),n(4)),d=n.n(l);a.a.controller("FileTreeController",["$scope","$modal","ide","$rootScope",function(e,t,n,r){return e.openNewDocModal=function(e){return t.open({templateUrl:"newFileModalTemplate",controller:"NewFileModalController",size:"lg",resolve:{parent_folder:function(){return e?{id:e}:n.fileTreeManager.getCurrentFolder()},projectFeatures:function(){return n.$scope.project.features},type:function(){return"doc"},userFeatures:function(){return n.$scope.user.features}}})},e.openNewFolderModal=function(){return t.open({templateUrl:"newFolderModalTemplate",controller:"NewFolderModalController",resolve:{parent_folder:function(){return n.fileTreeManager.getCurrentFolder()}}})},e.openUploadFileModal=function(e){return t.open({templateUrl:"newFileModalTemplate",controller:"NewFileModalController",size:"lg",resolve:{projectFeatures:function(){return n.$scope.project.features},parent_folder:function(){return e?{id:e}:n.fileTreeManager.getCurrentFolder()},type:function(){return"upload"},userFeatures:function(){return n.$scope.user.features}}})},window.showReactFileTree&&window.addEventListener("FileTreeReactBridge.openNewDocModal",(function(t){var n=t.detail;"upload"===n.mode?e.openUploadFileModal(n.parentFolderId):e.openNewDocModal(n.parentFolderId)})),e.orderByFoldersFirst=function(e){return"folder"===(null!=e?e.type:void 0)?"0":"1"},e.startRenamingSelected=function(){return e.$broadcast("rename:selected")},e.openDeleteModalForSelected=function(){return e.$broadcast("delete:selected")}}]),a.a.controller("NewFolderModalController",["$scope","ide","$modalInstance","$timeout","parent_folder",function(e,t,n,r,a){return e.inputs={name:"name"},e.state={inflight:!1},n.opened.then((function(){return r((function(){return e.$broadcast("open")}),200)})),e.create=function(){var r=e.inputs.name;if(null!=r&&0!==r.length)return e.state.inflight=!0,t.fileTreeManager.createFolder(r,e.parent_folder).then((function(){return e.state.inflight=!1,n.dismiss("done")})).catch((function(t){var n=t.data;return e.error=n,e.state.inflight=!1}))},e.cancel=function(){return n.dismiss("cancel")}}]),a.a.controller("DuplicateFileModalController",["$scope","$modalInstance","fileName",function(e,t,n){e.fileName=n,e.cancel=function(){return t.dismiss("cancel")}}]),a.a.controller("NewFileModalController",["$scope","ide","type","parent_folder","$modalInstance","eventTracking","projectFeatures","userFeatures",function(e,t,n,r,a,l,d,h){e.file_count=t.fileTreeManager.getFullCount(),e.type=n,e.parent_folder=r,e.state={inflight:!1,valid:!0},e.cancel=function(){return a.dismiss("cancel")},e.create=function(){return e.$broadcast("create")};var f=d&&d.references||d&&d.mendeley||h&&h.references||h&&h.mendeley,p=d&&d.references||d&&d.zotero||h&&h.references||h&&h.zotero;e.$watch("type",(function(){"mendeley"!==e.type||f||l.send("subscription-funnel","editor-click-feature",e.type),"zotero"!==e.type||p||l.send("subscription-funnel","editor-click-feature",e.type)})),e.$on("done",(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.name&&/^.*\.bib$/.test(n.name);(n.shouldReindexReferences||r)&&t.$scope.$emit("references:should-reindex",{}),a.dismiss("done")})),window.showReactFileTree&&window.addEventListener("FileTreeReactBridge.openNewFileModal",(function(e){var n=e.detail;n.done&&t.$scope.FileTreeReactBridgePromise.resolve(),n.error&&t.$scope.FileTreeReactBridgePromise.reject(n)}))}]),a.a.controller("NewDocModalController",["$scope","ide","$timeout",function(e,t,n){return e.inputs={name:"name.tex"},n((function(){return e.$broadcast("open")}),200),e.$on("create",(function(){var n=e.inputs.name;if(null!=n&&0!==n.length)return e.state.inflight=!0,t.fileTreeManager.createDoc(n,e.parent_folder).then((function(){return e.state.inflight=!1,e.$emit("done")})).catch((function(t){var n=t.data;e.error=n,e.state.inflight=!1})).finally((function(){e.$$phase||e.$apply()}))}))}]),a.a.controller("UploadFileModalController",["$scope","$rootScope","ide","$timeout","$window",function(e,t,n,r,a){e.parent_folder_id=null!=e.parent_folder?e.parent_folder.id:void 0,e.project_id=n.project_id,e.tooManyFiles=!1,e.rateLimitHit=!1,e.secondsToRedirect=10,e.notLoggedIn=!1,e.conflicts=[],e.control={};e.max_files=40,e.onComplete=function(n,a,l){return r((function(){if(f--,l.success&&t.$broadcast("file:upload:complete",l),0===f&&null!=l&&l.success)return e.$emit("done",{name:a})}),250)},e.onValidateBatch=function(t){return!(t.length>e.max_files)||(r((function(){return e.tooManyFiles=!0}),1),!1)},e.onError=function(t,l,d){return console.log(t,l,d),-1!==d.indexOf("429")?e.rateLimitHit=!0:-1!==d.indexOf("403")?function(){e.notLoggedIn=!0;return function t(){return r((function(){return 0===e.secondsToRedirect?a.location.href="/login?redir=/project/".concat(n.project_id):(t(),e.secondsToRedirect=e.secondsToRedirect-1)}),1e3)}()}():void 0};var l=null,d=function(){if(0===e.conflicts.length)return e.doUpload()},f=0;return e.onSubmit=function(t,r){return f++,n.fileTreeManager.existsInFolder(e.parent_folder_id,r)&&(e.conflicts.push(r),e.$apply()),null==l&&(l=setTimeout((function(){return l=null,d()}),0)),!0},e.onCancel=function(t,n){f--;var r=e.conflicts.indexOf(n);return r>-1&&e.conflicts.splice(r,1),e.$apply(),d()},e.doUpload=function(){return h(null!=e.control?e.control.q:void 0,(function(e){return e.uploadStoredFiles()}))}}]),a.a.controller("ProjectLinkedFileModalController",["$scope","ide","$timeout",function(e,t,n){e.data={projects:null,selectedProjectId:null,projectEntities:null,projectOutputFiles:null,selectedProjectEntity:null,selectedProjectOutputFile:null,buildId:null,name:null},e.state.inFlight={projects:!1,entities:!1,compile:!1},e.state.isOutputFilesMode=!1,e.state.error=!1,e.$watch("data.selectedProjectId",(function(t,n){if(t)return e.data.selectedProjectEntity=null,e.data.selectedProjectOutputFile=null,e.state.isOutputFilesMode?e.compileProjectAndGetOutputFiles(e.data.selectedProjectId):e.getProjectEntities(e.data.selectedProjectId)})),e.$watch("state.isOutputFilesMode",(function(t,n){if(t||n)return e.data.selectedProjectOutputFile=null,!0===t?e.compileProjectAndGetOutputFiles(e.data.selectedProjectId):e.getProjectEntities(e.data.selectedProjectId)})),e.$watch("data.selectedProjectEntity",(function(t,n){if(t){var r=t.split("/").reverse()[0];r&&(e.data.name=r)}})),e.$watch("data.selectedProjectOutputFile",(function(t,n){if(t)if("output.pdf"===t){var r=d.a.find(e.data.projects,(function(t){return t._id===e.data.selectedProjectId}));e.data.name=null!=(null!=r?r.name:void 0)?"".concat(r.name,".pdf"):"output.pdf"}else{var a=t.split("/").reverse()[0];a&&(e.data.name=a)}}));var r=function(t){return e.state.inFlight[t]=!0},a=function(t){var n=!0===t.err,r=e.state.inFlight;return r.projects=r.entities=r.compile=!1,e.state.inflight=!1,e.state.error=n};e.toggleOutputFilesMode=function(){if(e.data.selectedProjectId)return e.state.isOutputFilesMode=!e.state.isOutputFilesMode},e.shouldEnableProjectSelect=function(){var t=e.state,n=e.data;return!t.inFlight.projects&&n.projects},e.hasNoProjects=function(){var t=e.state,n=e.data;return!t.inFlight.projects&&(null==n.projects||0===n.projects.length)},e.shouldEnableProjectEntitySelect=function(){var t=e.state,n=e.data;return!t.inFlight.projects&&!t.inFlight.entities&&n.projects&&n.selectedProjectId},e.shouldEnableProjectOutputFileSelect=function(){var t=e.state,n=e.data;return!t.inFlight.projects&&!t.inFlight.compile&&n.projects&&n.selectedProjectId};var l=function(){var t=e.state,n=e.data;e.state.valid=!t.inFlight.projects&&!t.inFlight.entities&&n.projects&&n.selectedProjectId&&(!e.state.isOutputFilesMode&&n.projectEntities&&n.selectedProjectEntity||e.state.isOutputFilesMode&&n.projectOutputFiles&&n.selectedProjectOutputFile)&&n.name};return e.$watch("state",l,!0),e.$watch("data",l,!0),e.getUserProjects=function(){return r("projects"),t.$http.get("/user/projects",{_csrf:window.csrfToken}).then((function(n){return e.data.projectEntities=null,e.data.projects=n.data.projects.filter((function(e){return e._id!==t.project_id})),a({err:!1})})).catch((function(e){return a({err:!0})}))},e.getProjectEntities=function(n){return r("entities"),t.$http.get("/project/".concat(n,"/entities"),{_csrf:window.csrfToken}).then((function(t){if(e.data.selectedProjectId===t.data.project_id)return e.data.projectEntities=t.data.entities,a({err:!1})})).catch((function(e){return a({err:!0})}))},e.compileProjectAndGetOutputFiles=function(n){return r("compile"),t.$http.post("/project/".concat(n,"/compile"),{check:"silent",draft:!1,incrementalCompilesEnabled:!1,_csrf:window.csrfToken}).then((function(t){if("success"===t.data.status){var n=t.data.outputFiles.filter((function(e){return e.path.match(/.*\.(pdf|png|jpeg|jpg|gif)/)}));return e.data.projectOutputFiles=n,e.data.buildId=h(null!=n?n[0]:void 0,(function(e){return e.build})),console.log(">> build_id",e.data.buildId),a({err:!1})}return e.data.projectOutputFiles=null,a({err:!0})})).catch((function(e){return console.error(e),a({err:!0})}))},e.init=function(){return e.getUserProjects()},n(e.init,0),e.$on("create",(function(){var n,l,d=e.data.selectedProjectId,h=e.data.name;e.state.isOutputFilesMode?(l="project_output_file",n={source_project_id:d,source_output_file_path:e.data.selectedProjectOutputFile,build_id:e.data.buildId}):(l="project_file",n={source_project_id:d,source_entity_path:e.data.selectedProjectEntity}),r("create"),t.fileTreeManager.createLinkedFile(h,e.parent_folder,l,n).then((function(){return a({err:!1}),e.$emit("done",{name:h})})).catch((function(t){var n=t.data;e.error=n})).finally((function(){e.$$phase||e.$apply()}))}))}]);a.a.controller("UrlLinkedFileModalController",["$scope","ide","$timeout",function(e,t,n){e.inputs={name:"",url:""},e.nameChangedByUser=!1,n((function(){return e.$broadcast("open")}),200);var r=function(){var t=e.inputs,n=t.name,r=t.url;return null==n||0===n.length||null==r||0===r.length?e.state.valid=!1:e.state.valid=!0};return e.$watch("inputs.name",r),e.$watch("inputs.url",r),e.$watch("inputs.url",(function(t){if(null!=t&&""!==t&&!e.nameChangedByUser){var n=(t=t.replace("://","")).split("/").reverse();if(n.length>1)return e.inputs.name=n[0]}})),e.$on("create",(function(){var n=e.inputs,r=n.name,a=n.url;if(null!=r&&0!==r.length&&null!=a&&0!==a.length)return e.state.inflight=!0,t.fileTreeManager.createLinkedFile(r,e.parent_folder,"url",{url:a}).then((function(){return e.state.inflight=!1,e.$emit("done",{name:r})})).catch((function(t){var n=t.data;return e.error=n,e.state.inflight=!1})).finally((function(){e.$$phase||e.$apply()}))}))}]);function h(e,t){return null!=e?t(e):void 0}var f=function(e){var t,n,r=(t=e.split(".").pop(),n=function(e){return e.toLowerCase()},null!=t?n(t):void 0);return["png","pdf","jpg","jpeg","gif"].includes(r)?"image":["csv","xls","xlsx"].includes(r)?"table":["py","r"].includes(r)?"file-text":["bib"].includes(r)?"book":"file"};a.a.controller("FileTreeEntityController",["$scope","ide","$modal","$element",function(e,t,n,r){e.MAX_DEPTH=8,e.select=function(n){if(!n.ctrlKey&&!n.metaKey)return t.fileTreeManager.selectEntity(e.entity),e.$emit("entity:selected",e.entity);n.stopPropagation();var r=t.fileTreeManager.multiSelectedCount();return t.fileTreeManager.toggleMultiSelectEntity(e.entity),0===r?t.fileTreeManager.multiSelectSelectedEntity():void 0},"doc"===e.entity.type&&e.$watch("entity.selected",(function(t){var n,a,l,d,h,f;t&&(e.$emit("entity-file:selected",e.entity),n=r,a=$(".file-tree-list"),l=n.offset().top,d=l+n.outerHeight(),h=a.offset().top,f=h+a.height(),l>=h&&d<=f||e.$applyAsync((function(){r[0].scrollIntoView()})))})),e.draggableHelper=function(){return t.fileTreeManager.multiSelectedCount()>0?$("<strong style='z-index:100'>".concat(t.fileTreeManager.multiSelectedCount()," Files</strong>")):$("<strong style='z-index:100'>".concat(e.entity.name,"</strong>"))},e.inputs={name:e.entity.name},e.startRenaming=function(){return e.entity.renaming=!0};var a=!1;return e.finishRenaming=function(){if(e.entity.renaming){var r=e.inputs.name;if(null==r){if(a)return;return a=!0,void n.open({templateUrl:"invalidFileNameModalTemplate"}).result.then((function(){return a=!1}))}if(delete e.entity.renaming,null!=r&&0!==r.length)return t.fileTreeManager.renameEntity(e.entity,r);e.inputs.name=e.entity.name}},e.$on("rename:selected",(function(){if(e.entity.selected)return e.startRenaming()})),e.openDeleteModal=function(){var r;return r=t.fileTreeManager.multiSelectedCount()>0?t.fileTreeManager.getMultiSelectedEntityChildNodes():[e.entity],n.open({templateUrl:"deleteEntityModalTemplate",controller:"DeleteEntityModalController",resolve:{entities:function(){return r}}})},e.$on("delete:selected",(function(){if(e.entity.selected)return e.openDeleteModal()})),e.iconTypeFromName=f}]);a.a.controller("DeleteEntityModalController",["$scope","ide","$modalInstance","entities",function(e,t,n,r){return e.state={inflight:!1},e.entities=r,e.delete=function(){e.state.inflight=!0;for(var r=0,a=Array.from(e.entities);r<a.length;r++){var l=a[r];t.fileTreeManager.deleteEntity(l)}return n.close()},e.cancel=function(){return n.dismiss("cancel")}}]),a.a.controller("FileTreeFolderController",["$scope","ide","$modal","localStorage",function(e,t,n,r){return e.expanded=r("folder.".concat(e.entity.id,".expanded"))||!1,e.toggleExpanded=function(){e.expanded=!e.expanded,e._storeCurrentStateInLocalStorage()},e.$on("entity-file:selected",(function(){e.expanded=!0,e._storeCurrentStateInLocalStorage()})),e._storeCurrentStateInLocalStorage=function(){r("folder.".concat(e.entity.id,".expanded"),e.expanded)},e.onDrop=function(r,a){var l;l=t.fileTreeManager.multiSelectedCount()?t.fileTreeManager.getMultiSelectedEntityChildNodes():[$(a.draggable).scope().entity];for(var d=e.entity.children.map((function(e){return e.id})),h=function(){var r=p[f];if(!d.includes(r.id))try{t.fileTreeManager.moveEntity(r,e.entity)}catch(e){n.open({templateUrl:"duplicateFileModalTemplate",controller:"DuplicateFileModalController",resolve:{fileName:function(){return r.name}}})}},f=0,p=Array.from(l);f<p.length;f++)h();return e.$digest(),$(".file-tree-inner .droppable-hover").removeClass("droppable-hover")},e.orderByFoldersFirst=function(e){return"folder"===(null!=e?e.type:void 0)?"0":"1"},e.openNewDocModal=function(){return n.open({templateUrl:"newFileModalTemplate",controller:"NewFileModalController",size:"lg",resolve:{parent_folder:function(){return e.entity},projectFeatures:function(){return t.$scope.project.features},type:function(){return"doc"},userFeatures:function(){return t.$scope.user.features}}})},e.openNewFolderModal=function(){return n.open({templateUrl:"newFolderModalTemplate",controller:"NewFolderModalController",resolve:{parent_folder:function(){return e.entity}}})},e.openUploadFileModal=function(){return n.open({templateUrl:"newFileModalTemplate",controller:"NewFileModalController",size:"lg",resolve:{parent_folder:function(){return e.entity},projectFeatures:function(){return t.$scope.project.features},type:function(){return"upload"},userFeatures:function(){return t.$scope.user.features}}})}}]),a.a.controller("FileTreeRootFolderController",["$scope","$modal","ide",function(e,t,n){var r=e.rootFolder;return e.onDrop=function(a,l){var d;d=n.fileTreeManager.multiSelectedCount()?n.fileTreeManager.getMultiSelectedEntityChildNodes():[$(l.draggable).scope().entity];for(var h=r.children.map((function(e){return e.id})),f=function(){var e=y[p];if(!h.includes(e.id))try{n.fileTreeManager.moveEntity(e,r)}catch(n){t.open({templateUrl:"duplicateFileModalTemplate",controller:"DuplicateFileModalController",resolve:{fileName:function(){return e.name}}})}},p=0,y=Array.from(d);p<y.length;p++)f();return e.$digest(),$(".file-tree-inner .droppable-hover").removeClass("droppable-hover")}}]);var p=n(45),y=n(0),w=n.n(y),_=n(1),C=n.n(_),S=n(64),k=n(421);function x(e,t){Object(S.a)(e,(function(e){return e.setExtra("componentStack",t),e.setTag("handler","react-error-boundary"),e}))}function E(){return w.a.createElement(w.a.Fragment,null)}var A=function(e,t){function n(n){return w.a.createElement(k.ErrorBoundary,{FallbackComponent:t||E,onError:x},w.a.createElement(e,n))}return n.propTypes=e.propTypes,n.displayName="WithErrorBoundaryWrapper".concat(e.displayName||e.name||"Component"),n};function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,l=void 0;try{for(var d,h=e[Symbol.iterator]();!(r=(d=h.next()).done)&&(n.push(d.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==h.return||h.return()}finally{if(a)throw l}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var O=Object(y.createContext)({}),M=function(e){var t=e.projectId,n=e.hasWritePermissions,r=e.children,a=T(Object(y.useState)(),2),l=a[0],d=a[1];return w.a.createElement(O.Provider,{value:{projectId:t,hasWritePermissions:n,contextMenuCoords:l,setContextMenuCoords:d}},r)};M.propTypes={projectId:C.a.string.isRequired,hasWritePermissions:C.a.bool.isRequired,children:C.a.oneOfType([C.a.arrayOf(C.a.node),C.a.node]).isRequired};n(41),n(43),n(96);function P(e){return function(e){if(Array.isArray(e))return L(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function D(e,t){return e.reduce((function(e,n){return e.then((function(e){return t(n).then((function(t){return[].concat(P(e),[t])}))}))}),Promise.resolve([]))}n(48);var I=n(199),F=n.n(I);function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=U(e);if(t){var a=U(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return H(this,n)}}function H(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G(e,t){return Y(e,V(V({},t),{},{method:"POST"}))}var K=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}(FetchError,e);var t=z(FetchError);function FetchError(e,n,r,a,l){var d;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,FetchError),(d=t.call(this,e,{statusCode:a?a.status:void 0})).url=n,d.options=r,d.response=a,d.data=l,d}return FetchError}(F.a);function Y(e,t){var n=t.body,r=void 0===n?{}:n,a=t.headers,l=void 0===a?{}:a,d=t.method,h=void 0===d?"GET":d,f=t.credentials,p=void 0===f?"same-origin":f,y=V(V({},N(t,["body","headers","method","credentials"])),{},{headers:V(V({},l),{},{"Content-Type":"application/json","X-Csrf-Token":window.csrfToken,Accept:"application/json"}),credentials:p,method:h});return"GET"!==h&&"HEAD"!==h&&(y.body=JSON.stringify(r)),fetch(e,y).catch((function(t){throw new K("There was an error fetching the JSON",e,y).withCause(t)})).then((function(t){return function(e){var t=e.headers.get("Content-Type");return/application\/json/.test(t)?e.json():/text\/plain/.test(t)||/text\/html/.test(t)?e.text().then((function(e){return{message:e}})):Promise.resolve({})}(t).catch((function(n){throw new K("There was an error parsing the response body",e,y,t).withCause(n)})).then((function(n){if(!t.ok)throw new K(t.statusText,e,y,t,n);return n}))}))}function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){Q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function ee(e,t,n){return Y("/project/".concat(e,"/").concat(te(t),"/").concat(n),V(V({},r),{},{method:"DELETE"}));var r}function te(e){return"fileRef"===e?"file":e}n(21),n(264),n(29);function ne(e,t){var n=oe(e,t);if(n)return n;throw new F.a("Entity not found in tree",{entityId:t})}function re(e){var t=new Set;return e.forEach((function(e){(function e(t){var n=new Set([t._id]);for(var r in t.folders){e(t.folders[r]).forEach((function(e){n.add(e)}))}return n})(e).forEach((function(e){t.add(e)}))})),t}function oe(e,t,n){for(var r in n||(n=[e._id]),e.docs){var a=e.docs[r];if(a._id===t)return{entity:a,type:"doc",parent:e.docs,parentFolderId:e._id,path:n,index:r}}for(var l in e.fileRefs){var d=e.fileRefs[l];if(d._id===t)return{entity:d,type:"fileRef",parent:e.fileRefs,parentFolderId:e._id,path:n,index:l}}for(var h in e.folders){var f=e.folders[h];if(f._id===t)return{entity:f,type:"folder",parent:e.folders,parentFolderId:e._id,path:n,index:h};var p=oe(f,t,n.concat(f._id));if(p)return p}return null}n(99);function ae(e,t,n){return e._id!==t&&(e=oe(e,t).entity),!e.docs.some((function(e){return e.name===n}))&&(!e.fileRefs.some((function(e){return e.name===n}))&&!e.folders.some((function(e){return e.name===n})))}n(77),n(27);var se=new RegExp("[\\/\\\\\\*\\u0000-\\u001F\\u007F\\u0080-\\u009F\\uD800-\\uDFFF]","g"),le=new RegExp("(^\\.$)|(^\\.\\.$)|(^\\s+)|(\\s+$)","g"),ce=new RegExp("^(prototype|constructor|toString|toLocaleString|valueOf|hasOwnProperty|isPrototypeOf|propertyIsEnumerable|__defineGetter__|__lookupGetter__|__defineSetter__|__lookupSetter__|__proto__)$");function ue(e){return(t=e).length>0&&t.length<=1024&&!e.match(se)&&!e.match(le);var t}function de(e){return ce.test(e)}n(110);function he(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,l=void 0;try{for(var d,h=e[Symbol.iterator]();!(r=(d=h.next()).done)&&(n.push(d.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==h.return||h.return()}finally{if(a)throw l}}return n}(e,t)||ge(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fe(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function pe(e){return function(e){if(Array.isArray(e))return me(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||ge(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ge(e,t){if(e){if("string"==typeof e)return me(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?me(e,t):void 0}}function me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(n),!0).forEach((function(t){be(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function be(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function we(e,t,n){var r=n.newName;return Se(e,t,(function(e,t,n){var a=Object.assign([],e),l=ye(ye({},t),{},{name:r});return a[n]=l,a}))}function _e(e,t){return Se(e,t,(function(e,t,n){return[].concat(pe(e.slice(0,n)),pe(e.slice(n+1)))}))}function Ce(e,t,n){var r=n.type,a=fe(n,["type"]);if(!r)throw new Error("Entity has no type");var l="".concat(r,"s");return Se(e,t,(function(e,t,n){return e[n]=ye(ye({},t),{},be({},l,[].concat(pe(t[l]),[a]))),e}))}function Se(e,t,n){if(e._id===t)return he(n([],e,0),1)[0];for(var r=0,a=["docs","fileRefs","folders"];r<a.length;r++)for(var l=a[r],d=0;d<e[l].length;d++){var h=e[l][d];if(h._id===t)return ye(ye({},e),{},be({},l,n(e[l],h,d)))}var f=e.folders.map((function(e){return Se(e,t,n)}));return ye(ye({},e),{},{folders:f})}function ke(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,l=void 0;try{for(var d,h=e[Symbol.iterator]();!(r=(d=h.next()).done)&&(n.push(d.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==h.return||h.return()}finally{if(a)throw l}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return xe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ee=Object(y.createContext)(),Ae="RENAME",Te="DELETE",$e="MOVE",Re="CREATE_ENTITY";function Oe(e,t){var n,r,a,l,d=e.fileTreeData;switch(t.type){case Ae:return{fileTreeData:we(d,t.id,{newName:t.newName})};case Te:return{fileTreeData:_e(d,t.id)};case $e:return{fileTreeData:(n=d,r=t.entityId,a=t.toFolderId,l=ne(n,r),l.parentFolderId===a?n:Ce(_e(n,r),a,ye(ye({},l.entity),{},{type:l.type})))};case Re:return{fileTreeData:Ce(d,t.parentFolderId,t.entity)};default:throw new Error("Unknown mutable file tree action type: ".concat(t.type))}}var Me=function(e){var t=e.rootFolder,n=e.children,r=ke(Object(y.useReducer)(Oe,{fileTreeData:t[0]}),2),a=r[0].fileTreeData,l=r[1];return w.a.createElement(Ee.Provider,{value:{fileTreeData:a,dispatch:l}},n)};function Pe(){var e=Object(y.useContext)(Ee),t=e.fileTreeData,n=e.dispatch;return{fileTreeData:t,dispatchRename:function(e,t){n({type:Ae,newName:t,id:e})},dispatchDelete:function(e){n({type:Te,id:e})},dispatchMove:function(e,t){n({type:$e,entityId:e,toFolderId:t})},dispatchCreateFolder:function(e,t){t.type="folder",n({type:Re,parentFolderId:e,entity:t})},dispatchCreateDoc:function(e,t){t.type="doc",n({type:Re,parentFolderId:e,entity:t})},dispatchCreateFile:function(e,t){t.type="fileRef",n({type:Re,parentFolderId:e,entity:t})}}}Me.propTypes={rootFolder:C.a.array.isRequired,children:C.a.oneOfType([C.a.arrayOf(C.a.node),C.a.node]).isRequired};var Le=n(5),De=n.n(Le),Ie=function(e,t,n){try{return e(t,n)}catch(e){return console.error("localStorage exception",e),null}},Fe=function(e){return JSON.parse(localStorage.getItem(e))},je=function(e,t){localStorage.setItem(e,JSON.stringify(t))},Ne=function(){localStorage.clear()},Be=function(e){return localStorage.removeItem(e)},ze={getItem:function(e){return Ie(Fe,e)},setItem:function(e,t){return Ie(je,e,t)},clear:function(){return Ie(Ne)},removeItem:function(e){return Ie(Be,e)}};function He(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,l=void 0;try{for(var d,h=e[Symbol.iterator]();!(r=(d=h.next()).done)&&(n.push(d.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==h.return||h.return()}finally{if(a)throw l}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ue(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ue(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var We=function(e,t){var n=He(Object(y.useState)((function(){return null!=ze.getItem(e)?ze.getItem(e):t})),2),r=n[0],a=n[1];return[r,Object(y.useCallback)((function(n){n===t?ze.removeItem(e):ze.setItem(e,n),a(n)}),[e,t])]};function Ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,l=void 0;try{for(var d,h=e[Symbol.iterator]();!(r=(d=h.next()).done)&&(n.push(d.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==h.return||h.return()}finally{if(a)throw l}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return qe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ge=Object(y.createContext)(),Ke="SELECT",Ye="MULTI_SELECT",Xe="UNSELECT";function Je(e,t){switch(t.type){case Ke:return new Set([t.id]);case Ye:var n=new Set(e);return n.has(t.id)?n.size>1&&n.delete(t.id):n.add(t.id),n;case Xe:var r=new Set(e);return r.delete(t.id),r;default:throw new Error("Unknown selectable action type: ".concat(t.type))}}function Qe(e,t){switch(t.type){case Ke:return new Set([t.id]);case Ye:case Xe:return e;default:throw new Error("Unknown selectable action type: ".concat(t.type))}}function Ze(e){var t=e.hasWritePermissions,n=e.rootDocId,r=e.onSelect,a=e.children,l=Object(y.useContext)(O).projectId,d=Ve(We("doc.open_id.".concat(l),n),1)[0],h=Pe().fileTreeData,f=Ve(Object(y.useReducer)(t?Je:Qe,null,(function(){return d&&oe(h,d)?new Set([d]):new Set})),2),p=f[0],_=f[1],C=Ve(Object(y.useState)(new Set),2),S=C[0],k=C[1];return Object(y.useEffect)((function(){var e=new Set;p.forEach((function(t){var n=oe(h,t);n&&n.path.forEach((function(t){return e.add(t)}))})),k(e)}),[h,p]),Object(y.useEffect)((function(){var e=Array.from(p).map((function(e){return oe(h,e)}));r(e)}),[h,p,r]),Object(y.useEffect)((function(){function e(e){var t=oe(h,e.detail);t&&_({type:Ke,id:t.entity._id})}return window.addEventListener("editor.openDoc",e),function(){return window.removeEventListener("editor.openDoc",e)}}),[h]),w.a.createElement(Ge.Provider,{value:{selectedEntityIds:p,selectedEntityParentIds:S,dispatch:_}},a)}function et(e){var t=Object(y.useContext)(Ge),n=t.selectedEntityIds,r=t.dispatch,a=n.has(e);function l(t){var n=t.ctrlKey||t.metaKey;r({type:n?Ye:Ke,id:e})}return{isSelected:a,props:{className:De()({selected:a}),"aria-selected":a,onClick:function(e){l(e)},onContextMenu:function(t){n.has(e)||l(t)},onKeyPress:function(e){"Enter"!==e.key&&" "!==e.key||l(e)}}}}function tt(){var e=Object(y.useContext)(Ge),t=e.selectedEntityIds,n=e.selectedEntityParentIds,r=e.dispatch;return{selectedEntityIds:t,selectedEntityParentIds:n,select:function(e){r({type:Ke,id:e})},unselect:function(e){r({type:Xe,id:e})}}}Ze.propTypes={hasWritePermissions:C.a.bool.isRequired,rootDocId:C.a.string,onSelect:C.a.func.isRequired,children:C.a.oneOfType([C.a.arrayOf(C.a.node),C.a.node]).isRequired};n(204);function nt(e){return(nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function it(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ut(e,t)}function ot(e){var t=ct();return function(){var n,r=dt(e);if(t){var a=dt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return at(this,n)}}function at(e,t){return!t||"object"!==nt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function st(e){var t="function"==typeof Map?new Map:void 0;return(st=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return lt(e,arguments,dt(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),ut(r,e)})(e)}function lt(e,t,n){return(lt=ct()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&ut(a,n.prototype),a}).apply(null,arguments)}function ct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ut(e,t){return(ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function dt(e){return(dt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ht=function(e){it(InvalidFilenameError,e);var t=ot(InvalidFilenameError);function InvalidFilenameError(){return rt(this,InvalidFilenameError),t.call(this,"invalid filename")}return InvalidFilenameError}(st(Error)),ft=function(e){it(BlockedFilenameError,e);var t=ot(BlockedFilenameError);function BlockedFilenameError(){return rt(this,BlockedFilenameError),t.call(this,"blocked filename")}return BlockedFilenameError}(st(Error)),pt=function(e){it(DuplicateFilenameError,e);var t=ot(DuplicateFilenameError);function DuplicateFilenameError(){return rt(this,DuplicateFilenameError),t.call(this,"duplicate filename")}return DuplicateFilenameError}(st(Error)),gt=function(e){it(DuplicateFilenameMoveError,e);var t=ot(DuplicateFilenameMoveError);function DuplicateFilenameMoveError(){return rt(this,DuplicateFilenameMoveError),t.call(this,"duplicate filename on move")}return DuplicateFilenameMoveError}(st(Error));function mt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,l=void 0;try{for(var d,h=e[Symbol.iterator]();!(r=(d=h.next()).done)&&(n.push(d.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==h.return||h.return()}finally{if(a)throw l}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return vt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function yt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yt(Object(n),!0).forEach((function(t){wt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _t=Object(y.createContext)(),Ct="START_RENAME",St="START_DELETE",kt="DELETING",xt="START_CREATE_FOLDER",Et="CREATING_FOLDER",At="MOVING",Tt="CANCEL",$t="CLEAR",Rt="ERROR",Ot={isDeleting:!1,isRenaming:!1,isCreatingFolder:!1,isMoving:!1,inFlight:!1,actionedEntities:null,error:null};function Mt(e){return e}function Pt(e,t){switch(t.type){case Ct:return bt(bt({},Ot),{},{isRenaming:!0});case St:return bt(bt({},Ot),{},{isDeleting:!0,actionedEntities:t.actionedEntities});case xt:return bt(bt({},Ot),{},{isCreatingFolder:!0});case Et:return bt(bt({},Ot),{},{isCreatingFolder:!0,inFlight:!0});case kt:return bt(bt({},Ot),{},{isDeleting:!0,inFlight:!0,actionedEntities:e.actionedEntities});case At:return bt(bt({},Ot),{},{isMoving:!0,inFlight:!0});case $t:return bt({},Ot);case Tt:return e.inFlight?e:bt({},Ot);case Rt:return bt(bt({},e),{},{inFlight:!1,error:t.error});default:throw new Error("Unknown user action type: ".concat(t.type))}}function Lt(e){var t=e.hasWritePermissions,n=e.children,r=mt(Object(y.useReducer)(t?Pt:Mt,Ot),2),a=r[0],l=r[1];return w.a.createElement(_t.Provider,{value:bt(bt({},a),{},{dispatch:l})},n)}function Dt(){var e=Object(y.useContext)(_t),t=e.isDeleting,n=e.isRenaming,r=e.isMoving,a=e.isCreatingFolder,l=e.inFlight,d=e.error,h=e.actionedEntities,f=e.dispatch,p=Object(y.useContext)(O).projectId,w=Pe(),_=w.fileTreeData,C=w.dispatchRename,S=w.dispatchMove,k=tt().selectedEntityIds;function x(e){var t=It(_,k);return ae(_,t,e.name)?function(e,t,n){var r=n.endpoint,a=Z(n,["endpoint"]);return G("/project/".concat(e,"/").concat(r),{body:J({parent_folder_id:t},a)})}(p,t,e):Promise.reject(new pt)}function E(e){return x(e).then((function(){window.dispatchEvent(new CustomEvent("FileTreeReactBridge.openNewFileModal",{detail:{done:!0}}))})).catch((function(e){window.dispatchEvent(new CustomEvent("FileTreeReactBridge.openNewFileModal",{detail:{error:!0,data:e.message}}))}))}return{canDelete:k.size>0,canRename:1===k.size,canCreate:k.size<2,isDeleting:t,isMoving:r,isRenaming:n,isCreatingFolder:a,inFlight:l,actionedEntities:h,error:d,startRenaming:function(){f({type:Ct})},finishRenaming:function(e){var t=Array.from(k)[0],n=ne(_,t),r=n.entity.name;if(e===r)return f({type:$t});var a=function(e,t,n){if(!ue(n))return new ht;if(!ae(e,t.parentFolderId,n))return new pt;var r=1===t.path.length,a="folder"===t.type;if(r&&!a&&de(n))return new ft}(_,n,e);return a?f({type:Rt,error:a}):(f({type:$t}),C(t,e),function(e,t,n,r){return G("/project/".concat(e,"/").concat(te(t),"/").concat(n,"/rename"),{body:{name:r}})}(p,n.type,n.entity._id,e).catch((function(e){C(t,r),f({type:Rt,error:e})})))},startDeleting:function(){var e=Array.from(k).map((function(e){return ne(_,e).entity}));f({type:St,actionedEntities:e})},finishDeleting:function(){return f({type:kt}),D(Array.from(k),(function(e){var t=ne(_,e);return ee(p,t.type,t.entity._id).catch((function(e){if(404!==e.info.statusCode)throw e}))})).then((function(){f({type:$t})})).catch((function(e){f({type:Rt,error:e})}))},finishMoving:function(e,t){f({type:At});var n=Array.from(t).map((function(e){return ne(_,e)})).filter((function(t){return t.parentFolderId!==e})),r=e===_._id,a=n.map((function(t){return function(e,t,n,r){if(!ae(e,t,n.entity.name)){var a=new gt;return a.entityName=n.entity.name,a}var l="folder"===n.type;if(r&&!l&&de(n.entity.name))return new ft}(_,e,t,r)})).find((function(e){return e}));return a?f({type:Rt,error:a}):(n.forEach((function(t){return S(t.entity._id,e)})),D(n,(function(t){return function(e,t,n,r){return G("/project/".concat(e,"/").concat(te(t),"/").concat(n,"/move"),{body:{folder_id:r}})}(p,t.type,t.entity._id,e)})).then((function(){f({type:$t})})).catch((function(e){f({type:Rt,error:e})})))},startCreatingFolder:function(){f({type:xt})},finishCreatingFolder:function(e){return f({type:Et}),x({endpoint:"folder",name:e}).then((function(){f({type:$t})})).catch((function(e){f({type:Rt,error:e})}))},startCreatingDocOrFile:function(){var e=It(_,k);window.dispatchEvent(new CustomEvent("FileTreeReactBridge.openNewDocModal",{detail:{mode:"doc",parentFolderId:e}}))},startUploadingDocOrFile:function(){var e=It(_,k);window.dispatchEvent(new CustomEvent("FileTreeReactBridge.openNewDocModal",{detail:{mode:"upload",parentFolderId:e}}))},finishCreatingDoc:function(e){return e.endpoint="doc",E(e)},finishCreatingLinkedFile:function(e){return e.endpoint="linked_file",E(e)},cancel:function(){f({type:Tt})}}}function It(e,t){var n=Array.from(t)[0];if(!n)return e._id;var r=ne(e,n);return"folder"===r.type?r.entity._id:r.parentFolderId}Lt.propTypes={hasWritePermissions:C.a.bool.isRequired,children:C.a.oneOfType([C.a.arrayOf(C.a.node),C.a.node]).isRequired};var Ft=n(423),jt=n.n(Ft),Nt=n(125),Bt=n.n(Nt),zt=n(424),Ht=n.n(zt),Ut=n(425),Wt=n.n(Ut);function Vt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vt(Object(n),!0).forEach((function(t){Bt()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Gt,Kt={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0},Yt=w.a.createContext();function Xt(){return Kt}var Jt=function(){function e(){Ht()(this,e),this.usedNamespaces={}}return Wt()(e,[{key:"addUsedNamespaces",value:function(e){var t=this;e.forEach((function(e){t.usedNamespaces[e]||(t.usedNamespaces[e]=!0)}))}},{key:"getUsedNamespaces",value:function(){return Object.keys(this.usedNamespaces)}}]),e}();function Qt(){return Gt}var Zt={type:"3rdParty",init:function(e){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Kt=qt(qt({},Kt),e)}(e.options.react),function(e){Gt=e}(e)}};function en(){if(console&&console.warn){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];"string"==typeof n[0]&&(n[0]="react-i18next:: ".concat(n[0])),(e=console).warn.apply(e,n)}}var tn={};function nn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];"string"==typeof t[0]&&tn[t[0]]||("string"==typeof t[0]&&(tn[t[0]]=new Date),en.apply(void 0,t))}function rn(e,t,n){e.loadNamespaces(t,(function(){if(e.isInitialized)n();else{e.on("initialized",(function t(){setTimeout((function(){e.off("initialized",t)}),0),n()}))}}))}function on(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t.languages||!t.languages.length)return nn("i18n.languages were undefined or empty",t.languages),!0;var r=t.languages[0],a=!!t.options&&t.options.fallbackLng,l=t.languages[t.languages.length-1];if("cimode"===r.toLowerCase())return!0;var d=function(e,n){var r=t.services.backendConnector.state["".concat(e,"|").concat(n)];return-1===r||2===r};return!(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!d(t.isLanguageChangingTo,e))&&(!!t.hasResourceBundle(r,e)||(!t.services.backendConnector.backend||!(!d(r,e)||a&&!d(l,e))))}function an(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?an(Object(n),!0).forEach((function(t){Bt()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):an(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ln(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.i18n,r=Object(y.useContext)(Yt)||{},a=r.i18n,l=r.defaultNS,d=n||a||Qt();if(d&&!d.reportNamespaces&&(d.reportNamespaces=new Jt),!d){nn("You will need to pass in an i18next instance by using initReactI18next");var h=function(e){return Array.isArray(e)?e[e.length-1]:e},f=[h,{},!1];return f.t=h,f.i18n={},f.ready=!1,f}var p=sn(sn(sn({},Xt()),d.options.react),t),w=p.useSuspense,_=e||l||d.options&&d.options.defaultNS;_="string"==typeof _?[_]:_||["translation"],d.reportNamespaces.addUsedNamespaces&&d.reportNamespaces.addUsedNamespaces(_);var C=(d.isInitialized||d.initializedStoreOnce)&&_.every((function(e){return on(e,d,p)}));function S(){return{t:d.getFixedT(null,"fallback"===p.nsMode?_:_[0])}}var k=Object(y.useState)(S()),x=jt()(k,2),E=x[0],A=x[1],T=Object(y.useRef)(!0);Object(y.useEffect)((function(){var e=p.bindI18n,t=p.bindI18nStore;function n(){T.current&&A(S())}return T.current=!0,C||w||rn(d,_,(function(){T.current&&A(S())})),e&&d&&d.on(e,n),t&&d&&d.store.on(t,n),function(){T.current=!1,e&&d&&e.split(" ").forEach((function(e){return d.off(e,n)})),t&&d&&t.split(" ").forEach((function(e){return d.store.off(e,n)}))}}),[_.join()]);var R=[E.t,d,C];if(R.t=E.t,R.i18n=d,R.ready=C,C)return R;if(!C&&!w)return R;throw new Promise((function(e){rn(d,_,(function(){T.current&&A(S()),e()}))}))}var cn=n(152),un=n(801),dn=(n(50),n(51),n(71),n(12)),hn="undefined"!=typeof window?y.useLayoutEffect:y.useEffect;function pn(e,t,n,r){var a=n?n.call(r,e,t):void 0;if(void 0!==a)return!!a;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var l=Object.keys(e),d=Object.keys(t);if(l.length!==d.length)return!1;for(var h=Object.prototype.hasOwnProperty.bind(t),f=0;f<l.length;f++){var p=l[f];if(!h(p))return!1;var y=e[p],w=t[p];if(!1===(a=n?n.call(r,y,w,p):void 0)||void 0===a&&y!==w)return!1}return!0}function gn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,l=void 0;try{for(var d,h=e[Symbol.iterator]();!(r=(d=h.next()).done)&&(n.push(d.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==h.return||h.return()}finally{if(a)throw l}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return mn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function vn(e,t,n){var r=gn(Object(y.useState)((function(){return t(e)})),2),a=r[0],l=r[1],d=Object(y.useCallback)((function(){var r=t(e);pn(a,r)||(l(r),n&&n())}),[a,e,n]);return hn(d,[]),[a,d]}function yn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,l=void 0;try{for(var d,h=e[Symbol.iterator]();!(r=(d=h.next()).done)&&(n.push(d.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==h.return||h.return()}finally{if(a)throw l}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return bn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function wn(e,t,n){var r=yn(vn(e,t,n),2),a=r[0],l=r[1];return hn((function(){var t=e.getHandlerId();if(null!=t)return e.subscribeToStateChange(l,{handlerIds:[t]})}),[e,l]),a}function _n(){var e=Object(y.useContext)(cn.a).dragDropManager;return Object(dn.a)(null!=e,"Expected drag drop context"),e}function Cn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Sn=!1,kn=!1,xn=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sourceId=null,this.internalMonitor=t.getMonitor()}var t,n,r;return t=e,(n=[{key:"receiveHandlerId",value:function(e){this.sourceId=e}},{key:"getHandlerId",value:function(){return this.sourceId}},{key:"canDrag",value:function(){Object(dn.a)(!Sn,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Sn=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{Sn=!1}}},{key:"isDragging",value:function(){if(!this.sourceId)return!1;Object(dn.a)(!kn,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return kn=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{kn=!1}}},{key:"subscribeToStateChange",value:function(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}},{key:"isDraggingSource",value:function(e){return this.internalMonitor.isDraggingSource(e)}},{key:"isOverTarget",value:function(e,t){return this.internalMonitor.isOverTarget(e,t)}},{key:"getTargetIds",value:function(){return this.internalMonitor.getTargetIds()}},{key:"isSourcePublic",value:function(){return this.internalMonitor.isSourcePublic()}},{key:"getSourceId",value:function(){return this.internalMonitor.getSourceId()}},{key:"subscribeToOffsetChange",value:function(e){return this.internalMonitor.subscribeToOffsetChange(e)}},{key:"canDragSource",value:function(e){return this.internalMonitor.canDragSource(e)}},{key:"canDropOnTarget",value:function(e){return this.internalMonitor.canDropOnTarget(e)}},{key:"getItemType",value:function(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}])&&Cn(t.prototype,n),r&&Cn(t,r),e}();n(647);function En(e,t){"function"==typeof e?e(t):e.current=t}function An(e,t){var n=e.ref;return Object(dn.a)("string"!=typeof n,"Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://facebook.github.io/react/docs/more-about-refs.html#the-ref-callback-attribute"),n?Object(y.cloneElement)(e,{ref:function(e){En(n,e),En(t,e)}}):Object(y.cloneElement)(e,{ref:t})}function Tn(e){if("string"!=typeof e.type){var t=e.type.displayName||e.type.name||"the component";throw new Error("Only native element nodes can now be passed to React DnD connectors."+"You can either wrap ".concat(t," into a <div>, or turn it into a ")+"drag source or a drop target itself.")}}function $n(e){var t={};return Object.keys(e).forEach((function(n){var r=e[n];if(n.endsWith("Ref"))t[n]=e[n];else{var a=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!Object(y.isValidElement)(t)){var r=t;return e(r,n),r}var a=t;Tn(a);var l=n?function(t){return e(t,n)}:e;return An(a,l)}}(r);t[n]=function(){return a}}})),t}function Rn(e){return(Rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function On(e){return null!==e&&"object"===Rn(e)&&Object.prototype.hasOwnProperty.call(e,"current")}function Mn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Pn=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hooks=$n({dragSource:function(e,t){n.clearDragSource(),n.dragSourceOptions=t||null,On(e)?n.dragSourceRef=e:n.dragSourceNode=e,n.reconnectDragSource()},dragPreview:function(e,t){n.clearDragPreview(),n.dragPreviewOptions=t||null,On(e)?n.dragPreviewRef=e:n.dragPreviewNode=e,n.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=t}var t,n,r;return t=e,(n=[{key:"receiveHandlerId",value:function(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}},{key:"reconnect",value:function(){this.reconnectDragSource(),this.reconnectDragPreview()}},{key:"reconnectDragSource",value:function(){var e=this.dragSource,t=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();t&&this.disconnectDragSource(),this.handlerId&&(e?t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)):this.lastConnectedDragSource=e)}},{key:"reconnectDragPreview",value:function(){var e=this.dragPreview,t=this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();t&&this.disconnectDragPreview(),this.handlerId&&(e?t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=e,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,e,this.dragPreviewOptions)):this.lastConnectedDragPreview=e)}},{key:"didHandlerIdChange",value:function(){return this.lastConnectedHandlerId!==this.handlerId}},{key:"didConnectedDragSourceChange",value:function(){return this.lastConnectedDragSource!==this.dragSource}},{key:"didConnectedDragPreviewChange",value:function(){return this.lastConnectedDragPreview!==this.dragPreview}},{key:"didDragSourceOptionsChange",value:function(){return!pn(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}},{key:"didDragPreviewOptionsChange",value:function(){return!pn(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}},{key:"disconnectDragSource",value:function(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}},{key:"disconnectDragPreview",value:function(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}},{key:"clearDragSource",value:function(){this.dragSourceNode=null,this.dragSourceRef=null}},{key:"clearDragPreview",value:function(){this.dragPreviewNode=null,this.dragPreviewRef=null}},{key:"connectTarget",get:function(){return this.dragSource}},{key:"dragSourceOptions",get:function(){return this.dragSourceOptionsInternal},set:function(e){this.dragSourceOptionsInternal=e}},{key:"dragPreviewOptions",get:function(){return this.dragPreviewOptionsInternal},set:function(e){this.dragPreviewOptionsInternal=e}},{key:"dragSource",get:function(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}},{key:"dragPreview",get:function(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}}])&&Mn(t.prototype,n),r&&Mn(t,r),e}();function Ln(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,l=void 0;try{for(var d,h=e[Symbol.iterator]();!(r=(d=h.next()).done)&&(n.push(d.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==h.return||h.return()}finally{if(a)throw l}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Dn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function In(e){return(In="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,l=void 0;try{for(var d,h=e[Symbol.iterator]();!(r=(d=h.next()).done)&&(n.push(d.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==h.return||h.return()}finally{if(a)throw l}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return jn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Nn(e){var t=Object(y.useRef)(e);t.current=e,Object(dn.a)(null!=e.item,"item must be defined"),Object(dn.a)(null!=e.item.type,"item type must be defined");var n,r=Fn((n=_n(),[Object(y.useMemo)((function(){return new xn(n)}),[n]),Object(y.useMemo)((function(){return new Pn(n.getBackend())}),[n])]),2),a=r[0],l=r[1];!function(e,t,n){var r=_n(),a=Object(y.useMemo)((function(){return{beginDrag:function(){var n=e.current,r=n.begin,a=n.item;if(r){var l=r(t);return Object(dn.a)(null==l||"object"===In(l),"dragSpec.begin() must either return an object, undefined, or null"),l||a||{}}return a||{}},canDrag:function(){return"boolean"==typeof e.current.canDrag?e.current.canDrag:"function"!=typeof e.current.canDrag||e.current.canDrag(t)},isDragging:function(n,r){var a=e.current.isDragging;return a?a(t):r===n.getSourceId()},endDrag:function(){var r=e.current.end;r&&r(t.getItem(),t),n.reconnect()}}}),[]);hn((function(){var l=Ln(function(e,t,n){var r=n.getRegistry(),a=r.addSource(e,t);return[a,function(){return r.removeSource(a)}]}(e.current.item.type,a,r),2),d=l[0],h=l[1];return t.receiveHandlerId(d),n.receiveHandlerId(d),h}),[])}(t,a,l);var d=wn(a,t.current.collect||function(){return{}},(function(){return l.reconnect()})),h=Object(y.useMemo)((function(){return l.hooks.dragSource()}),[l]),f=Object(y.useMemo)((function(){return l.hooks.dragPreview()}),[l]);return hn((function(){l.dragSourceOptions=t.current.options||null,l.reconnect()}),[l]),hn((function(){l.dragPreviewOptions=t.current.previewOptions||null,l.reconnect()}),[l]),[d,h,f]}function Bn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var zn=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hooks=$n({dropTarget:function(e,t){n.clearDropTarget(),n.dropTargetOptions=t,On(e)?n.dropTargetRef=e:n.dropTargetNode=e,n.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=t}var t,n,r;return t=e,(n=[{key:"reconnect",value:function(){var e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();var t=this.dropTarget;this.handlerId&&(t?e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=t,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,t,this.dropTargetOptions)):this.lastConnectedDropTarget=t)}},{key:"receiveHandlerId",value:function(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}},{key:"didHandlerIdChange",value:function(){return this.lastConnectedHandlerId!==this.handlerId}},{key:"didDropTargetChange",value:function(){return this.lastConnectedDropTarget!==this.dropTarget}},{key:"didOptionsChange",value:function(){return!pn(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}},{key:"disconnectDropTarget",value:function(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}},{key:"clearDropTarget",value:function(){this.dropTargetRef=null,this.dropTargetNode=null}},{key:"connectTarget",get:function(){return this.dropTarget}},{key:"dropTargetOptions",get:function(){return this.dropTargetOptionsInternal},set:function(e){this.dropTargetOptionsInternal=e}},{key:"dropTarget",get:function(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}}])&&Bn(t.prototype,n),r&&Bn(t,r),e}();function Hn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Un=!1,Wn=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.targetId=null,this.internalMonitor=t.getMonitor()}var t,n,r;return t=e,(n=[{key:"receiveHandlerId",value:function(e){this.targetId=e}},{key:"getHandlerId",value:function(){return this.targetId}},{key:"subscribeToStateChange",value:function(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}},{key:"canDrop",value:function(){if(!this.targetId)return!1;Object(dn.a)(!Un,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return Un=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{Un=!1}}},{key:"isOver",value:function(e){return!!this.targetId&&this.internalMonitor.isOverTarget(this.targetId,e)}},{key:"getItemType",value:function(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}])&&Hn(t.prototype,n),r&&Hn(t,r),e}();function Vn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,l=void 0;try{for(var d,h=e[Symbol.iterator]();!(r=(d=h.next()).done)&&(n.push(d.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==h.return||h.return()}finally{if(a)throw l}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return qn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Gn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,l=void 0;try{for(var d,h=e[Symbol.iterator]();!(r=(d=h.next()).done)&&(n.push(d.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==h.return||h.return()}finally{if(a)throw l}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Kn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Yn(e){var t=Object(y.useRef)(e);t.current=e,Object(dn.a)(null!=e.accept,"accept must be defined");var n,r=Gn((n=_n(),[Object(y.useMemo)((function(){return new Wn(n)}),[n]),Object(y.useMemo)((function(){return new zn(n.getBackend())}),[n])]),2),a=r[0],l=r[1];!function(e,t,n){var r=_n(),a=Object(y.useMemo)((function(){return{canDrop:function(){var n=e.current.canDrop;return!n||n(t.getItem(),t)},hover:function(){var n=e.current.hover;n&&n(t.getItem(),t)},drop:function(){var n=e.current.drop;if(n)return n(t.getItem(),t)}}}),[t]);hn((function(){var l=Vn(function(e,t,n){var r=n.getRegistry(),a=r.addTarget(e,t);return[a,function(){return r.removeTarget(a)}]}(e.current.accept,a,r),2),d=l[0],h=l[1];return t.receiveHandlerId(d),n.receiveHandlerId(d),h}),[t,n])}(t,a,l);var d=wn(a,t.current.collect||function(){return{}},(function(){return l.reconnect()})),h=Object(y.useMemo)((function(){return l.hooks.dropTarget()}),[l]);return hn((function(){l.dropTargetOptions=e.options||null,l.reconnect()}),[e.options]),[d,h]}function Xn(e){var t=null;return function(){return null==t&&(t=e()),t}}function Jn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Qn=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.entered=[],this.isNodeInDocument=t}var t,n,r;return t=e,(n=[{key:"enter",value:function(e){var t=this,n=this.entered.length;return this.entered=function(e,t){var n=new Set,r=function(e){return n.add(e)};e.forEach(r),t.forEach(r);var a=[];return n.forEach((function(e){return a.push(e)})),a}(this.entered.filter((function(n){return t.isNodeInDocument(n)&&(!n.contains||n.contains(e))})),[e]),0===n&&this.entered.length>0}},{key:"leave",value:function(e){var t,n,r=this.entered.length;return this.entered=(t=this.entered.filter(this.isNodeInDocument),n=e,t.filter((function(e){return e!==n}))),r>0&&0===this.entered.length}},{key:"reset",value:function(){this.entered=[]}}])&&Jn(t.prototype,n),r&&Jn(t,r),e}(),Zn=Xn((function(){return/firefox/i.test(navigator.userAgent)})),er=Xn((function(){return Boolean(window.safari)}));function tr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var nr=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=t.length,a=[],l=0;l<r;l++)a.push(l);a.sort((function(e,n){return t[e]<t[n]?-1:1}));for(var d,h,f=[],p=[],y=[],w=0;w<r-1;w++)d=t[w+1]-t[w],h=n[w+1]-n[w],p.push(d),f.push(h),y.push(h/d);for(var _=[y[0]],C=0;C<p.length-1;C++){var S=y[C],k=y[C+1];if(S*k<=0)_.push(0);else{d=p[C];var x=p[C+1],E=d+x;_.push(3*E/((E+x)/S+(E+d)/k))}}_.push(y[y.length-1]);for(var A,T=[],R=[],O=0;O<_.length-1;O++){A=y[O];var M=_[O],P=1/p[O],L=M+_[O+1]-A-A;T.push((A-M-L)*P),R.push(L*P*P)}this.xs=t,this.ys=n,this.c1s=_,this.c2s=T,this.c3s=R}var t,n,r;return t=e,(n=[{key:"interpolate",value:function(e){var t=this.xs,n=this.ys,r=this.c1s,a=this.c2s,l=this.c3s,d=t.length-1;if(e===t[d])return n[d];for(var h,f=0,p=l.length-1;f<=p;){var y=t[h=Math.floor(.5*(f+p))];if(y<e)f=h+1;else{if(!(y>e))return n[h];p=h-1}}var w=e-t[d=Math.max(0,p)],_=w*w;return n[d]+r[d]*w+a[d]*_+l[d]*w*_}}])&&tr(t.prototype,n),r&&tr(t,r),e}();function rr(e){var t=1===e.nodeType?e:e.parentElement;if(!t)return null;var n=t.getBoundingClientRect(),r=n.top;return{x:n.left,y:r}}function ir(e){return{x:e.clientX,y:e.clientY}}function or(e,t,n,r,a){var l,d,h,f="IMG"===(l=t).nodeName&&(Zn()||!(null===(d=document.documentElement)||void 0===d?void 0:d.contains(l))),p=rr(f?e:t),y={x:n.x-p.x,y:n.y-p.y},w=e.offsetWidth,_=e.offsetHeight,C=r.anchorX,S=r.anchorY,k=function(e,t,n,r){var a=e?t.width:n,l=e?t.height:r;return er()&&e&&(l/=window.devicePixelRatio,a/=window.devicePixelRatio),{dragPreviewWidth:a,dragPreviewHeight:l}}(f,t,w,_),x=k.dragPreviewWidth,E=k.dragPreviewHeight,A=a.offsetX,T=a.offsetY,R=0===T||T;return{x:0===A||A?A:new nr([0,.5,1],[y.x,y.x/w*x,y.x+x-w]).interpolate(C),y:R?T:(h=new nr([0,.5,1],[y.y,y.y/_*E,y.y+E-_]).interpolate(S),er()&&f&&(h+=(window.devicePixelRatio-1)*E),h)}}var ar,sr="__NATIVE_FILE__",lr="__NATIVE_URL__",cr="__NATIVE_TEXT__";function ur(e,t,n){var r=t.reduce((function(t,n){return t||e.getData(n)}),"");return null!=r?r:n}function dr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var hr=(dr(ar={},sr,{exposeProperties:{files:function(e){return Array.prototype.slice.call(e.files)},items:function(e){return e.items}},matchesTypes:["Files"]}),dr(ar,lr,{exposeProperties:{urls:function(e,t){return ur(e,t,"").split("\n")}},matchesTypes:["Url","text/uri-list"]}),dr(ar,cr,{exposeProperties:{text:function(e,t){return ur(e,t,"")}},matchesTypes:["Text","text/plain"]}),ar);function fr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var pr=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=t,this.item={},this.initializeExposedProperties()}var t,n,r;return t=e,(n=[{key:"initializeExposedProperties",value:function(){var e=this;Object.keys(this.config.exposeProperties).forEach((function(t){Object.defineProperty(e.item,t,{configurable:!0,enumerable:!0,get:function(){return console.warn("Browser doesn't allow reading \"".concat(t,'" until the drop event.')),null}})}))}},{key:"loadDataTransfer",value:function(e){var t=this;if(e){var n={};Object.keys(this.config.exposeProperties).forEach((function(r){n[r]={value:t.config.exposeProperties[r](e,t.config.matchesTypes),configurable:!0,enumerable:!0}})),Object.defineProperties(this.item,n)}}},{key:"canDrag",value:function(){return!0}},{key:"beginDrag",value:function(){return this.item}},{key:"isDragging",value:function(e,t){return t===e.getSourceId()}},{key:"endDrag",value:function(){}}])&&fr(t.prototype,n),r&&fr(t,r),e}();function gr(e){if(!e)return null;var t=Array.prototype.slice.call(e.types||[]);return Object.keys(hr).filter((function(e){return hr[e].matchesTypes.some((function(e){return t.indexOf(e)>-1}))}))[0]||null}function mr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var vr=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.globalContext=t}var t,n,r;return t=e,(n=[{key:"window",get:function(){return this.globalContext?this.globalContext:"undefined"!=typeof window?window:void 0}},{key:"document",get:function(){if(this.window)return this.window.document}}])&&mr(t.prototype,n),r&&mr(t,r),e}();function yr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function br(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yr(Object(n),!0).forEach((function(t){wr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Cr,Sr=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.getSourceClientOffset=function(e){var t=r.sourceNodes.get(e);return t&&rr(t)||null},this.endDragNativeItem=function(){r.isDraggingNativeItem()&&(r.actions.endDrag(),r.currentNativeHandle&&r.registry.removeSource(r.currentNativeHandle),r.currentNativeHandle=null,r.currentNativeSource=null)},this.isNodeInDocument=function(e){return Boolean(e&&r.document&&r.document.body&&document.body.contains(e))},this.endDragIfSourceWasRemovedFromDOM=function(){var e=r.currentDragSourceNode;r.isNodeInDocument(e)||r.clearCurrentDragSourceNode()&&r.actions.endDrag()},this.handleTopDragStartCapture=function(){r.clearCurrentDragSourceNode(),r.dragStartSourceIds=[]},this.handleTopDragStart=function(e){if(!e.defaultPrevented){var t=r.dragStartSourceIds;r.dragStartSourceIds=null;var n=ir(e);r.monitor.isDragging()&&r.actions.endDrag(),r.actions.beginDrag(t||[],{publishSource:!1,getSourceClientOffset:r.getSourceClientOffset,clientOffset:n});var a=e.dataTransfer,l=gr(a);if(r.monitor.isDragging()){if(a&&"function"==typeof a.setDragImage){var d=r.monitor.getSourceId(),h=r.sourceNodes.get(d),f=r.sourcePreviewNodes.get(d)||h;if(f){var p=r.getCurrentSourcePreviewNodeOptions(),y=or(h,f,n,{anchorX:p.anchorX,anchorY:p.anchorY},{offsetX:p.offsetX,offsetY:p.offsetY});a.setDragImage(f,y.x,y.y)}}try{null==a||a.setData("application/json",{})}catch(e){}r.setCurrentDragSourceNode(e.target),r.getCurrentSourcePreviewNodeOptions().captureDraggingState?r.actions.publishDragSource():setTimeout((function(){return r.actions.publishDragSource()}),0)}else if(l)r.beginDragNativeItem(l);else{if(a&&!a.types&&(e.target&&!e.target.hasAttribute||!e.target.hasAttribute("draggable")))return;e.preventDefault()}}},this.handleTopDragEndCapture=function(){r.clearCurrentDragSourceNode()&&r.actions.endDrag()},this.handleTopDragEnterCapture=function(e){if(r.dragEnterTargetIds=[],r.enterLeaveCounter.enter(e.target)&&!r.monitor.isDragging()){var t=e.dataTransfer,n=gr(t);n&&r.beginDragNativeItem(n,t)}},this.handleTopDragEnter=function(e){var t=r.dragEnterTargetIds;(r.dragEnterTargetIds=[],r.monitor.isDragging())&&(r.altKeyPressed=e.altKey,Zn()||r.actions.hover(t,{clientOffset:ir(e)}),t.some((function(e){return r.monitor.canDropOnTarget(e)}))&&(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=r.getCurrentDropEffect())))},this.handleTopDragOverCapture=function(){r.dragOverTargetIds=[]},this.handleTopDragOver=function(e){var t=r.dragOverTargetIds;if(r.dragOverTargetIds=[],!r.monitor.isDragging())return e.preventDefault(),void(e.dataTransfer&&(e.dataTransfer.dropEffect="none"));r.altKeyPressed=e.altKey,r.actions.hover(t||[],{clientOffset:ir(e)}),(t||[]).some((function(e){return r.monitor.canDropOnTarget(e)}))?(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=r.getCurrentDropEffect())):r.isDraggingNativeItem()?e.preventDefault():(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=function(e){r.isDraggingNativeItem()&&e.preventDefault(),r.enterLeaveCounter.leave(e.target)&&r.isDraggingNativeItem()&&r.endDragNativeItem()},this.handleTopDropCapture=function(e){var t;(r.dropTargetIds=[],e.preventDefault(),r.isDraggingNativeItem())&&(null===(t=r.currentNativeSource)||void 0===t||t.loadDataTransfer(e.dataTransfer));r.enterLeaveCounter.reset()},this.handleTopDrop=function(e){var t=r.dropTargetIds;r.dropTargetIds=[],r.actions.hover(t,{clientOffset:ir(e)}),r.actions.drop({dropEffect:r.getCurrentDropEffect()}),r.isDraggingNativeItem()?r.endDragNativeItem():r.endDragIfSourceWasRemovedFromDOM()},this.handleSelectStart=function(e){var t=e.target;"function"==typeof t.dragDrop&&("INPUT"===t.tagName||"SELECT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable||(e.preventDefault(),t.dragDrop()))},this.options=new vr(n),this.actions=t.getActions(),this.monitor=t.getMonitor(),this.registry=t.getRegistry(),this.enterLeaveCounter=new Qn(this.isNodeInDocument)}var t,n,a;return t=e,(n=[{key:"profile",value:function(){var e,t;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:(null===(e=this.dragStartSourceIds)||void 0===e?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:(null===(t=this.dragOverTargetIds)||void 0===t?void 0:t.length)||0}}},{key:"setup",value:function(){if(void 0!==this.window){if(this.window.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");this.window.__isReactDndBackendSetUp=!0,this.addEventListeners(this.window)}}},{key:"teardown",value:function(){void 0!==this.window&&(this.window.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.window),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId&&this.window.cancelAnimationFrame(this.asyncEndDragFrameId))}},{key:"connectDragPreview",value:function(e,t,n){var r=this;return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,t),function(){r.sourcePreviewNodes.delete(e),r.sourcePreviewNodeOptions.delete(e)}}},{key:"connectDragSource",value:function(e,t,n){var r=this;this.sourceNodes.set(e,t),this.sourceNodeOptions.set(e,n);var a=function(t){return r.handleDragStart(t,e)},l=function(e){return r.handleSelectStart(e)};return t.setAttribute("draggable","true"),t.addEventListener("dragstart",a),t.addEventListener("selectstart",l),function(){r.sourceNodes.delete(e),r.sourceNodeOptions.delete(e),t.removeEventListener("dragstart",a),t.removeEventListener("selectstart",l),t.setAttribute("draggable","false")}}},{key:"connectDropTarget",value:function(e,t){var n=this,r=function(t){return n.handleDragEnter(t,e)},a=function(t){return n.handleDragOver(t,e)},l=function(t){return n.handleDrop(t,e)};return t.addEventListener("dragenter",r),t.addEventListener("dragover",a),t.addEventListener("drop",l),function(){t.removeEventListener("dragenter",r),t.removeEventListener("dragover",a),t.removeEventListener("drop",l)}}},{key:"addEventListeners",value:function(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}},{key:"removeEventListeners",value:function(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}},{key:"getCurrentSourceNodeOptions",value:function(){var e=this.monitor.getSourceId(),t=this.sourceNodeOptions.get(e);return br({dropEffect:this.altKeyPressed?"copy":"move"},t||{})}},{key:"getCurrentDropEffect",value:function(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}},{key:"getCurrentSourcePreviewNodeOptions",value:function(){var e=this.monitor.getSourceId();return br({anchorX:.5,anchorY:.5,captureDraggingState:!1},this.sourcePreviewNodeOptions.get(e)||{})}},{key:"isDraggingNativeItem",value:function(){var e=this.monitor.getItemType();return Object.keys(r).some((function(t){return r[t]===e}))}},{key:"beginDragNativeItem",value:function(e,t){this.clearCurrentDragSourceNode(),this.currentNativeSource=function(e,t){var n=new pr(hr[e]);return n.loadDataTransfer(t),n}(e,t),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}},{key:"setCurrentDragSourceNode",value:function(e){var t=this;this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e,this.mouseMoveTimeoutTimer=setTimeout((function(){return t.window&&t.window.addEventListener("mousemove",t.endDragIfSourceWasRemovedFromDOM,!0)}),1e3)}},{key:"clearCurrentDragSourceNode",value:function(){return!!this.currentDragSourceNode&&(this.currentDragSourceNode=null,this.window&&(this.window.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.window.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)),this.mouseMoveTimeoutTimer=null,!0)}},{key:"handleDragStart",value:function(e,t){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(t))}},{key:"handleDragEnter",value:function(e,t){this.dragEnterTargetIds.unshift(t)}},{key:"handleDragOver",value:function(e,t){null===this.dragOverTargetIds&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(t)}},{key:"handleDrop",value:function(e,t){this.dropTargetIds.unshift(t)}},{key:"window",get:function(){return this.options.window}},{key:"document",get:function(){return this.options.document}}])&&_r(t.prototype,n),a&&_r(t,a),e}(),kr=function(e,t){return new Sr(e,t)};function xr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Er(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xr(Object(n),!0).forEach((function(t){Ar(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ar(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,l=void 0;try{for(var d,h=e[Symbol.iterator]();!(r=(d=h.next()).done)&&(n.push(d.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==h.return||h.return()}finally{if(a)throw l}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return $r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $r(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Rr(e,t,n){return(Rr=Or()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&Mr(a,n.prototype),a}).apply(null,arguments)}function Or(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Mr(e,t){return(Mr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Pr=Object(cn.b)((function(){function e(t){return!(!t.getAttribute||!t.getAttribute("dnd-container"))||!!t.parentNode&&e(t.parentNode)}for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=Rr(kr,n),l=["handleTopDragStart","handleTopDragStartCapture","handleTopDragEndCapture","handleTopDragEnter","handleTopDragEnterCapture","handleTopDragLeaveCapture","handleTopDragOver","handleTopDragOverCapture","handleTopDrop","handleTopDropCapture"];return l.forEach((function(t){var n=a[t];a[t]=function(t){for(var r=arguments.length,a=new Array(r>1?r-1:0),l=1;l<r;l++)a[l-1]=arguments[l];e(t.target)&&n.apply(void 0,[t].concat(a))}})),a}));function Lr(e){var t=e.children,n=Object(y.useRef)(Pr);return w.a.createElement(un.a,{manager:n.current.dragDropManager},t)}function Dr(e){var t=ln().t,n=Pe().fileTreeData,r=tt().selectedEntityIds,a=Tr(Object(y.useState)(!0),2),l=a[0],d=a[1],h={type:"ENTITY"},f=Tr(Nn({item:h,begin:function(){var a,l,d,f=function(e,t){return e.size>1&&e.has(t)?new Set(e):new Set([t])}(r,e),p=(a=n,l=f,d=new Set,l.forEach((function(e){d.add(ne(a,e))})),d),y=function(e,t){if(1===e.size){return Array.from(e)[0].entity.name}return t("n_items",{count:e.size})}(p,t),w=function(e){var t=Array.from(e).filter((function(e){return"folder"===e.type})).map((function(e){return e.entity}));return re(new Set(t))}(p);return Er(Er({},h),{},{title:y,forbiddenFolderIds:w,draggedEntityIds:f})},collect:function(e){return{isDragging:!!e.isDragging()}}}),3),p=f[0].isDragging,w=f[1],_=f[2];return Object(y.useEffect)((function(){_((Cr||((Cr=new Image).src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),Cr))}),[_]),{dragRef:w,isDragging:p,isDraggable:l,setIsDraggable:d}}function Ir(e){var t=Dt().finishMoving,n=Tr(Yn({accept:"ENTITY",canDrop:function(t,n){return!!n.isOver({shallow:!0})&&!t.forbiddenFolderIds.has(e)},drop:function(n,r){r.didDrop()||t(e,n.draggedEntityIds)},collect:function(e){return{isOver:e.canDrop()}}}),2),r=n[0].isOver;return{dropRef:n[1],isOver:r}}function Fr(e){var t=e.projectId,n=e.rootFolder,r=e.hasWritePermissions,a=e.rootDocId,l=e.onSelect,d=e.children;return w.a.createElement(M,{projectId:t,hasWritePermissions:r},w.a.createElement(Lt,{hasWritePermissions:r},w.a.createElement(Me,{rootFolder:n},w.a.createElement(Ze,{hasWritePermissions:r,rootDocId:a,onSelect:l},w.a.createElement(Lr,null,d)))))}Lr.propTypes={children:C.a.oneOfType([C.a.arrayOf(C.a.node),C.a.node]).isRequired},Fr.propTypes={projectId:C.a.string.isRequired,rootFolder:C.a.array.isRequired,hasWritePermissions:C.a.bool.isRequired,rootDocId:C.a.string,onSelect:C.a.func.isRequired,children:C.a.oneOfType([C.a.arrayOf(C.a.node),C.a.node]).isRequired};var jr=Fr;function Nr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,l=void 0;try{for(var d,h=e[Symbol.iterator]();!(r=(d=h.next()).done)&&(n.push(d.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==h.return||h.return()}finally{if(a)throw l}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Br(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Br(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Br(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function zr(e){var t=e.isOver,n=function(e){var t=_n().getMonitor(),n=Nr(vn(t,e),2),r=n[0],a=n[1];return Object(y.useEffect)((function(){return t.subscribeToOffsetChange(a)})),Object(y.useEffect)((function(){return t.subscribeToStateChange(a)})),r}((function(e){return{isDragging:e.isDragging(),item:e.getItem(),clientOffset:e.getClientOffset()}})),r=n.isDragging,a=n.item,l=n.clientOffset,d=Object(y.useRef)(),h=d.current?d.current.getBoundingClientRect():null;return r?w.a.createElement("div",{ref:d,className:De()("dnd-draggable-preview-layer",{"dnd-droppable-hover":t})},w.a.createElement("div",{style:Ur(l,h)},w.a.createElement(Hr,{title:a.title}))):null}function Hr(e){var t=e.title;return w.a.createElement("div",{className:"dnd-draggable-preview-item"},t)}function Ur(e,t){if(!t||!e)return{display:"none"};var n=t.x,r=t.y,a=e.x,l=e.y-r-15,d="translate(".concat(a-n-15,"px, ").concat(l,"px)");return{transform:d,WebkitTransform:d}}zr.propTypes={isOver:C.a.bool.isRequired},Hr.propTypes={title:C.a.string.isRequired};var Wr=zr;function Vr(e){var t,n,r,a=e.type,l=e.spin,d=e.modifier,h=e.classes,f=void 0===h?{}:h,p=e.accessibilityLabel,y=e.children,_=De()("fa","fa-".concat(a),(t={"fa-spin":l},n="fa-".concat(d),r=d,n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t),f.icon);return w.a.createElement(w.a.Fragment,null,w.a.createElement("i",{className:_,"aria-hidden":"true"},y),p?w.a.createElement("span",{className:"sr-only"},p):null)}Vr.propTypes={type:C.a.string.isRequired,spin:C.a.bool,modifier:C.a.string,classes:C.a.exact({icon:C.a.string}),accessibilityLabel:C.a.string,children:C.a.oneOfType([C.a.arrayOf(C.a.node),C.a.node])};var qr=Vr;function Gr(e){var t=e.split(".").pop();return t=t?t.toLowerCase():t,["png","pdf","jpg","jpeg","gif"].includes(t)?"image":["csv","xls","xlsx"].includes(t)?"table":["py","r"].includes(t)?"file-text":["bib"].includes(t)?"book":"file"}function Kr(e){return null!=e&&"object"==typeof e&&1===e.nodeType}function Yr(e,t){return(!t||"hidden"!==e)&&("visible"!==e&&"clip"!==e)}function Xr(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var n=getComputedStyle(e,null);return Yr(n.overflowY,t)||Yr(n.overflowX,t)||function(e){var t=function(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}}(e);return!!t&&(t.clientHeight<e.scrollHeight||t.clientWidth<e.scrollWidth)}(e)}return!1}function Jr(e,t,n,r,a,l,d,h){return l<e&&d>t||l>e&&d<t?0:l<=e&&h<=n||d>=t&&h>=n?l-e-r:d>t&&h<n||l<e&&h>n?d-t+a:0}var Qr=function(e,t){var n=t.scrollMode,r=t.block,a=t.inline,l=t.boundary,d=t.skipOverflowHiddenElements,h="function"==typeof l?l:function(e){return e!==l};if(!Kr(e))throw new TypeError("Invalid target");for(var f=document.scrollingElement||document.documentElement,p=[],y=e;Kr(y)&&h(y);){if((y=y.parentNode)===f){p.push(y);break}y===document.body&&Xr(y)&&!Xr(document.documentElement)||Xr(y,d)&&p.push(y)}for(var w=window.visualViewport?visualViewport.width:innerWidth,_=window.visualViewport?visualViewport.height:innerHeight,C=window.scrollX||pageXOffset,S=window.scrollY||pageYOffset,k=e.getBoundingClientRect(),x=k.height,E=k.width,A=k.top,T=k.right,R=k.bottom,O=k.left,M="start"===r||"nearest"===r?A:"end"===r?R:A+x/2,P="center"===a?O+E/2:"end"===a?T:O,L=[],D=0;D<p.length;D++){var I=p[D],F=I.getBoundingClientRect(),j=F.height,N=F.width,B=F.top,z=F.right,H=F.bottom,U=F.left;if("if-needed"===n&&A>=0&&O>=0&&R<=_&&T<=w&&A>=B&&R<=H&&O>=U&&T<=z)return L;var W=getComputedStyle(I),V=parseInt(W.borderLeftWidth,10),q=parseInt(W.borderTopWidth,10),G=parseInt(W.borderRightWidth,10),K=parseInt(W.borderBottomWidth,10),Y=0,X=0,J="offsetWidth"in I?I.offsetWidth-I.clientWidth-V-G:0,Q="offsetHeight"in I?I.offsetHeight-I.clientHeight-q-K:0;if(f===I)Y="start"===r?M:"end"===r?M-_:"nearest"===r?Jr(S,S+_,_,q,K,S+M,S+M+x,x):M-_/2,X="start"===a?P:"center"===a?P-w/2:"end"===a?P-w:Jr(C,C+w,w,V,G,C+P,C+P+E,E),Y=Math.max(0,Y+S),X=Math.max(0,X+C);else{Y="start"===r?M-B-q:"end"===r?M-H+K+Q:"nearest"===r?Jr(B,H,j,q,K+Q,M,M+x,x):M-(B+j/2)+Q/2,X="start"===a?P-U-V:"center"===a?P-(U+N/2)+J/2:"end"===a?P-z+G+J:Jr(U,z,N,V,G+J,P,P+E,E);var Z=I.scrollLeft,ee=I.scrollTop;M+=ee-(Y=Math.max(0,Math.min(ee+Y,I.scrollHeight-j+Q))),P+=Z-(X=Math.max(0,Math.min(Z+X,I.scrollWidth-N+J)))}L.push({el:I,top:Y,left:X})}return L};function Zr(e){return e===Object(e)&&0!==Object.keys(e).length}var ei=function(e,t){var n=!e.ownerDocument.documentElement.contains(e);if(Zr(t)&&"function"==typeof t.behavior)return t.behavior(n?[]:Qr(e,t));if(!n){var r=function(e){return!1===e?{block:"end",inline:"nearest"}:Zr(e)?e:{block:"start",inline:"nearest"}}(t);return function(e,t){void 0===t&&(t="auto");var n="scrollBehavior"in document.body.style;e.forEach((function(e){var r=e.el,a=e.top,l=e.left;r.scroll&&n?r.scroll({top:a,left:l,behavior:t}):(r.scrollTop=a,r.scrollLeft=l)}))}(Qr(e,r),r.behavior)}};n(153);function ti(){var e=Object(y.createRef)();return Object(y.useEffect)((function(){e.current&&requestAnimationFrame((function(){e.current&&e.current.focus()}))}),[e]),{autoFocusedRef:e}}function ni(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,l=void 0;try{for(var d,h=e[Symbol.iterator]();!(r=(d=h.next()).done)&&(n.push(d.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==h.return||h.return()}finally{if(a)throw l}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ri(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ri(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ri(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ii(e){var t=e.name,n=e.isSelected,r=e.setIsDraggable,a=Dt(),l=a.isRenaming,d=a.startRenaming,h=a.finishRenaming,f=a.error,p=a.cancel,_=l&&n&&!f;return Object(y.useEffect)((function(){r(!_)}),[r,_]),_?w.a.createElement(ai,{initialValue:t,finishRenaming:h,cancel:p}):w.a.createElement(oi,{name:t,isSelected:n,startRenaming:d})}function oi(e){var t=e.name,n=e.isSelected,r=e.startRenaming,a=ni(Object(y.useState)(0),2),l=a[0],d=a[1];return w.a.createElement("button",{className:"item-name-button",onClick:function(){d(l+1),n||d(0)},onDoubleClick:function(){l<2||r()}},w.a.createElement("span",null,t))}function ai(e){var t=e.initialValue,n=e.finishRenaming,r=e.cancel,a=ni(Object(y.useState)(t),2),l=a[0],d=a[1],h=ti().autoFocusedRef;return w.a.createElement("span",{className:"rename-input"},w.a.createElement("input",{type:"text",value:l,onKeyDown:function(e){"Enter"===e.key&&n(l),"Escape"===e.key&&r()},onChange:function(e){d(e.target.value)},onBlur:function(){n(l)},onFocus:function(e){var t=e.target.value.lastIndexOf(".");e.target.setSelectionRange(0,t)},ref:h}))}ii.propTypes={name:C.a.string.isRequired,isSelected:C.a.bool.isRequired,setIsDraggable:C.a.func.isRequired},oi.propTypes={name:C.a.string.isRequired,startRenaming:C.a.func.isRequired,isSelected:C.a.bool.isRequired},ai.propTypes={initialValue:C.a.string.isRequired,finishRenaming:C.a.func.isRequired,cancel:C.a.func.isRequired};var si=ii;function li(e){return function(t){t.stopPropagation(),e&&e(t)}}var ci=n(426),ui=n.n(ci);function di(){return(di=ui.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var hi=n(427),fi=n.n(hi);function pi(e,t){if(null==e)return{};var n,r,a={},l=fi()(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}var gi=n(428),mi=n.n(gi);function vi(e,t){e.prototype=mi()(t.prototype),e.prototype.constructor=e,e.__proto__=t}function yi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var bi=n(277),wi=n.n(bi),_i=n(94),Ci=n.n(_i),Si=n(87),ki=n.n(Si),xi=n(38),Ei=n.n(xi),Ai=n(126),Ti=n.n(Ai),$i=n(25),Ri=n.n($i),Oi=n(200),Mi=n.n(Oi);function Pi(){return(Pi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Li(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}var Di=n(149),Ii=n.n(Di),Fi=function(){};function ji(e,t){return void 0!==e[t]}function Ni(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}var Bi=n(278);n(147);var zi=n(201),Hi=n.n(zi),Ui=n(151),Wi=n.n(Ui),Vi="large",qi="small",Gi="xsmall",Ki={large:"lg",medium:"md",small:"sm",xsmall:"xs",lg:"lg",md:"md",sm:"sm",xs:"xs"},Yi=["lg","md","sm","xs"],Xi={SUCCESS:"success",WARNING:"warning",DANGER:"danger",INFO:"info"},Ji="default",Qi="primary",Zi="link";function eo(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=n[n.length-1];return"function"==typeof a?e.apply(void 0,n):function(t){return e.apply(void 0,n.concat([t]))}}}function to(e,t){var n=(e.bsClass||"").trim();return null==n&&Ii()(!1),n+(t?"-"+t:"")}var no=eo((function(e,t){var n=t.propTypes||(t.propTypes={}),r=t.defaultProps||(t.defaultProps={});return n.bsClass=C.a.string,r.bsClass=e,t})),ro=eo((function(e,t,n){"string"!=typeof t&&(n=t,t=void 0);var r=n.STYLES||[],a=n.propTypes||{};e.forEach((function(e){-1===r.indexOf(e)&&r.push(e)}));var l=C.a.oneOf(r);(n.STYLES=r,l._values=r,n.propTypes=di({},a,{bsStyle:l}),void 0!==t)&&((n.defaultProps||(n.defaultProps={})).bsStyle=t);return n})),oo=eo((function(e,t,n){"string"!=typeof t&&(n=t,t=void 0);var r=n.SIZES||[],a=n.propTypes||{};e.forEach((function(e){-1===r.indexOf(e)&&r.push(e)}));var l=[];r.forEach((function(e){var t=Ki[e];t&&t!==e&&l.push(t),l.push(e)}));var d=C.a.oneOf(l);return d._values=l,n.SIZES=r,n.propTypes=di({},a,{bsSize:d}),void 0!==t&&(n.defaultProps||(n.defaultProps={}),n.defaultProps.bsSize=t),n}));function ao(e){var t,n=((t={})[to(e)]=!0,t);e.bsSize&&(n[to(e,Ki[e.bsSize]||e.bsSize)]=!0);return e.bsStyle&&(n[to(e,e.bsStyle)]=!0),n}function so(e){return{bsClass:e.bsClass,bsSize:e.bsSize,bsStyle:e.bsStyle,bsRole:e.bsRole}}function lo(e){return"bsClass"===e||"bsSize"===e||"bsStyle"===e||"bsRole"===e}function co(e){var t={};return Wi()(e).forEach((function(e){var n=e[0],r=e[1];lo(n)||(t[n]=r)})),[so(e),t]}function uo(e,t){var n={};t.forEach((function(e){n[e]=!0}));var r={};return Wi()(e).forEach((function(e){var t=e[0],a=e[1];lo(t)||n[t]||(r[t]=a)})),[so(e),r]}var ho=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return null!=e})).reduce((function(e,t){if("function"!=typeof t)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?t:function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];e.apply(this,r),t.apply(this,r)}}),null)},fo={href:C.a.string,onClick:C.a.func,onKeyDown:C.a.func,disabled:C.a.bool,role:C.a.string,tabIndex:C.a.oneOfType([C.a.number,C.a.string]),componentClass:Ri.a};function po(e){return!e||"#"===e.trim()}var go=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).handleClick=r.handleClick.bind(yi(yi(r))),r.handleKeyDown=r.handleKeyDown.bind(yi(yi(r))),r}vi(t,e);var n=t.prototype;return n.handleClick=function(e){var t=this.props,n=t.disabled,r=t.href,a=t.onClick;(n||po(r))&&e.preventDefault(),n?e.stopPropagation():a&&a(e)},n.handleKeyDown=function(e){" "===e.key&&(e.preventDefault(),this.handleClick(e))},n.render=function(){var e=this.props,t=e.componentClass,n=e.disabled,r=e.onKeyDown,a=pi(e,["componentClass","disabled","onKeyDown"]);return po(a.href)&&(a.role=a.role||"button",a.href=a.href||"#"),n&&(a.tabIndex=-1,a.style=di({pointerEvents:"none"},a.style)),w.a.createElement(t,di({},a,{onClick:this.handleClick,onKeyDown:ho(this.handleKeyDown,r)}))},t}(w.a.Component);go.propTypes=fo,go.defaultProps={componentClass:"a"};var mo=go,vo={active:C.a.bool,disabled:C.a.bool,block:C.a.bool,onClick:C.a.func,componentClass:Ri.a,href:C.a.string,type:C.a.oneOf(["button","reset","submit"])},yo=function(e){function t(){return e.apply(this,arguments)||this}vi(t,e);var n=t.prototype;return n.renderAnchor=function(e,t){return w.a.createElement(mo,di({},e,{className:De()(t,e.disabled&&"disabled")}))},n.renderButton=function(e,t){var n=e.componentClass,r=pi(e,["componentClass"]),a=n||"button";return w.a.createElement(a,di({},r,{type:r.type||"button",className:t}))},n.render=function(){var e,t=this.props,n=t.active,r=t.block,a=t.className,l=co(pi(t,["active","block","className"])),d=l[0],h=l[1],f=di({},ao(d),((e={active:n})[to(d,"block")]=r,e)),p=De()(a,f);return h.href?this.renderAnchor(h,p):this.renderButton(h,p)},t}(w.a.Component);yo.propTypes=vo,yo.defaultProps={active:!1,block:!1,disabled:!1};var bo=no("btn",oo([Vi,qi,Gi],ro(Hi()(Xi).concat([Ji,Qi,Zi]),Ji,yo))),wo={vertical:C.a.bool,justified:C.a.bool,block:Ti()(C.a.bool,(function(e){var t=e.block,n=e.vertical;return t&&!n?new Error("`block` requires `vertical` to be set to have any effect"):null}))},_o=function(e){function t(){return e.apply(this,arguments)||this}return vi(t,e),t.prototype.render=function(){var e,t=this.props,n=t.block,r=t.justified,a=t.vertical,l=t.className,d=co(pi(t,["block","justified","vertical","className"])),h=d[0],f=d[1],p=di({},ao(h),((e={})[to(h)]=!a,e[to(h,"vertical")]=a,e[to(h,"justified")]=r,e[to(bo.defaultProps,"block")]=n,e));return w.a.createElement("div",di({},f,{className:De()(l,p)}))},t}(w.a.Component);_o.propTypes=wo,_o.defaultProps={block:!1,justified:!1,vertical:!1};var Co=no("btn-group",_o),So=n(429),ko=n.n(So),xo=n(279),Eo=n.n(xo);var Ao={map:function(e,t,n){var r=0;return w.a.Children.map(e,(function(e){return w.a.isValidElement(e)?t.call(n,e,r++):e}))},forEach:function(e,t,n){var r=0;w.a.Children.forEach(e,(function(e){w.a.isValidElement(e)&&t.call(n,e,r++)}))},count:function(e){var t=0;return w.a.Children.forEach(e,(function(e){w.a.isValidElement(e)&&++t})),t},find:function(e,t,n){var r,a=0;return w.a.Children.forEach(e,(function(e){r||w.a.isValidElement(e)&&t.call(n,e,a++)&&(r=e)})),r},filter:function(e,t,n){var r=0,a=[];return w.a.Children.forEach(e,(function(e){w.a.isValidElement(e)&&t.call(n,e,r++)&&a.push(e)})),a},every:function(e,t,n){var r=0,a=!0;return w.a.Children.forEach(e,(function(e){a&&w.a.isValidElement(e)&&(t.call(n,e,r++)||(a=!1))})),a},some:function(e,t,n){var r=0,a=!1;return w.a.Children.forEach(e,(function(e){a||w.a.isValidElement(e)&&t.call(n,e,r++)&&(a=!0)})),a},toArray:function(e){var t=[];return w.a.Children.forEach(e,(function(e){w.a.isValidElement(e)&&t.push(e)})),t}},To={open:C.a.bool,pullRight:C.a.bool,onClose:C.a.func,labelledBy:C.a.oneOfType([C.a.string,C.a.number]),onSelect:C.a.func,rootCloseEvent:C.a.oneOf(["click","mousedown"])},$o=function(e){function t(t){var n;return(n=e.call(this,t)||this).handleRootClose=n.handleRootClose.bind(yi(yi(n))),n.handleKeyDown=n.handleKeyDown.bind(yi(yi(n))),n}vi(t,e);var n=t.prototype;return n.getFocusableMenuItems=function(){var e=Ei.a.findDOMNode(this);return e?ko()(e.querySelectorAll('[tabIndex="-1"]')):[]},n.getItemsAndActiveIndex=function(){var e=this.getFocusableMenuItems(),t=e.indexOf(document.activeElement);return{items:e,activeIndex:t}},n.focusNext=function(){var e=this.getItemsAndActiveIndex(),t=e.items,n=e.activeIndex;0!==t.length&&t[n===t.length-1?0:n+1].focus()},n.focusPrevious=function(){var e=this.getItemsAndActiveIndex(),t=e.items,n=e.activeIndex;0!==t.length&&t[0===n?t.length-1:n-1].focus()},n.handleKeyDown=function(e){switch(e.keyCode){case ki.a.codes.down:this.focusNext(),e.preventDefault();break;case ki.a.codes.up:this.focusPrevious(),e.preventDefault();break;case ki.a.codes.esc:case ki.a.codes.tab:this.props.onClose(e,{source:"keydown"})}},n.handleRootClose=function(e){this.props.onClose(e,{source:"rootClose"})},n.render=function(){var e,t=this,n=this.props,r=n.open,a=n.pullRight,l=n.labelledBy,d=n.onSelect,h=n.className,f=n.rootCloseEvent,p=n.children,y=uo(pi(n,["open","pullRight","labelledBy","onSelect","className","rootCloseEvent","children"]),["onClose"]),_=y[0],C=y[1],S=di({},ao(_),((e={})[to(_,"right")]=a,e));return w.a.createElement(Eo.a,{disabled:!r,onRootClose:this.handleRootClose,event:f},w.a.createElement("ul",di({},C,{role:"menu",className:De()(h,S),"aria-labelledby":l}),Ao.map(p,(function(e){return w.a.cloneElement(e,{onKeyDown:ho(e.props.onKeyDown,t.handleKeyDown),onSelect:ho(e.props.onSelect,d)})}))))},t}(w.a.Component);$o.propTypes=To,$o.defaultProps={bsRole:"menu",pullRight:!1};var Ro=no("dropdown-menu",$o),Oo={noCaret:C.a.bool,open:C.a.bool,title:C.a.string,useAnchor:C.a.bool},Mo=function(e){function t(){return e.apply(this,arguments)||this}return vi(t,e),t.prototype.render=function(){var e=this.props,t=e.noCaret,n=e.open,r=e.useAnchor,a=e.bsClass,l=e.className,d=e.children,h=pi(e,["noCaret","open","useAnchor","bsClass","className","children"]);delete h.bsRole;var f=r?mo:bo,p=!t;return w.a.createElement(f,di({},h,{role:"button",className:De()(l,a),"aria-haspopup":!0,"aria-expanded":n}),d||h.title,p&&" ",p&&w.a.createElement("span",{className:"caret"}))},t}(w.a.Component);Mo.propTypes=Oo,Mo.defaultProps={open:!1,useAnchor:!1,bsRole:"toggle"};var Po=no("dropdown-toggle",Mo),Lo=n(124),Do=n.n(Lo);C.a.oneOfType([C.a.string,C.a.number]);var Io=Po.defaultProps.bsRole,Fo=Ro.defaultProps.bsRole,jo={dropup:C.a.bool,id:Mi()(C.a.oneOfType([C.a.string,C.a.number])),componentClass:Ri.a,children:Ti()(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Do()((function(e,n,r){var a;return t.every((function(t){return!!Ao.some(e.children,(function(e){return e.props.bsRole===t}))||(a=t,!1)})),a?new Error("(children) "+r+" - Missing a required child with bsRole: "+a+". "+r+" must have at least one child of each of the following bsRoles: "+t.join(", ")):null}))}(Io,Fo),function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Do()((function(e,n,r){var a;return t.every((function(t){return!(Ao.filter(e.children,(function(e){return e.props.bsRole===t})).length>1)||(a=t,!1)})),a?new Error("(children) "+r+" - Duplicate children detected of bsRole: "+a+". Only one child each allowed with the following bsRoles: "+t.join(", ")):null}))}(Fo)),disabled:C.a.bool,pullRight:C.a.bool,open:C.a.bool,defaultOpen:C.a.bool,onToggle:C.a.func,onSelect:C.a.func,role:C.a.string,rootCloseEvent:C.a.oneOf(["click","mousedown"]),onMouseEnter:C.a.func,onMouseLeave:C.a.func},No={componentClass:Co},Bo=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).handleClick=r.handleClick.bind(yi(yi(r))),r.handleKeyDown=r.handleKeyDown.bind(yi(yi(r))),r.handleClose=r.handleClose.bind(yi(yi(r))),r._focusInDropdown=!1,r.lastOpenEventType=null,r}vi(t,e);var n=t.prototype;return n.componentDidMount=function(){this.focusNextOnOpen()},n.UNSAFE_componentWillUpdate=function(e){!e.open&&this.props.open&&(this._focusInDropdown=Ci()(Ei.a.findDOMNode(this.menu),wi()(document)))},n.componentDidUpdate=function(e){var t=this.props.open,n=e.open;t&&!n&&this.focusNextOnOpen(),!t&&n&&this._focusInDropdown&&(this._focusInDropdown=!1,this.focus())},n.focus=function(){var e=Ei.a.findDOMNode(this.toggle);e&&e.focus&&e.focus()},n.focusNextOnOpen=function(){var e=this.menu;e&&e.focusNext&&("keydown"!==this.lastOpenEventType&&"menuitem"!==this.props.role||e.focusNext())},n.handleClick=function(e){this.props.disabled||this.toggleOpen(e,{source:"click"})},n.handleClose=function(e,t){this.props.open&&this.toggleOpen(e,t)},n.handleKeyDown=function(e){if(!this.props.disabled)switch(e.keyCode){case ki.a.codes.down:this.props.open?this.menu.focusNext&&this.menu.focusNext():this.toggleOpen(e,{source:"keydown"}),e.preventDefault();break;case ki.a.codes.esc:case ki.a.codes.tab:this.handleClose(e,{source:"keydown"})}},n.toggleOpen=function(e,t){var n=!this.props.open;n&&(this.lastOpenEventType=t.source),this.props.onToggle&&this.props.onToggle(n,e,t)},n.renderMenu=function(e,t){var n=this,r=t.id,a=t.onSelect,l=t.rootCloseEvent,d=pi(t,["id","onSelect","rootCloseEvent"]),h=function(e){n.menu=e};return"string"==typeof e.ref||(h=ho(e.ref,h)),Object(y.cloneElement)(e,di({},d,{ref:h,labelledBy:r,bsClass:to(d,"menu"),onClose:ho(e.props.onClose,this.handleClose),onSelect:ho(e.props.onSelect,a,(function(e,t){return n.handleClose(t,{source:"select"})})),rootCloseEvent:l}))},n.renderToggle=function(e,t){var n=this,r=function(e){n.toggle=e};return"string"==typeof e.ref||(r=ho(e.ref,r)),Object(y.cloneElement)(e,di({},t,{ref:r,bsClass:to(t,"toggle"),onClick:ho(e.props.onClick,this.handleClick),onKeyDown:ho(e.props.onKeyDown,this.handleKeyDown)}))},n.render=function(){var e,t=this,n=this.props,r=n.componentClass,a=n.id,l=n.dropup,d=n.disabled,h=n.pullRight,f=n.open,p=n.onSelect,y=n.role,_=n.bsClass,C=n.className,S=n.rootCloseEvent,k=n.children,x=pi(n,["componentClass","id","dropup","disabled","pullRight","open","onSelect","role","bsClass","className","rootCloseEvent","children"]);delete x.onToggle;var E=((e={})[_]=!0,e.open=f,e.disabled=d,e);return l&&(E[_]=!1,E.dropup=!0),w.a.createElement(r,di({},x,{className:De()(C,E)}),Ao.map(k,(function(e){switch(e.props.bsRole){case Io:return t.renderToggle(e,{id:a,disabled:d,open:f,role:y,bsClass:_});case Fo:return t.renderMenu(e,{id:a,open:f,pullRight:h,bsClass:_,onSelect:p,rootCloseEvent:S});default:return e}})))},t}(w.a.Component);Bo.propTypes=jo,Bo.defaultProps=No,no("dropdown",Bo);var zo=function e(t,n,r){void 0===r&&(r=[]);var a,l=t.displayName||t.name||"Component",d=!!(a=t)&&("function"!=typeof a||a.prototype&&a.prototype.isReactComponent),h=Object.keys(n),f=h.map(Ni);!d&&r.length&&Ii()(!1);var p=function(e){var a,l;function d(){for(var t,a=arguments.length,l=new Array(a),d=0;d<a;d++)l[d]=arguments[d];(t=e.call.apply(e,[this].concat(l))||this).handlers=Object.create(null),h.forEach((function(e){var r=n[e];t.handlers[r]=function(n){if(t.props[r]){var a;t._notifying=!0;for(var l=arguments.length,d=new Array(l>1?l-1:0),h=1;h<l;h++)d[h-1]=arguments[h];(a=t.props)[r].apply(a,[n].concat(d)),t._notifying=!1}t.unmounted||t.setState((function(t){var r,a=t.values;return{values:Pi(Object.create(null),a,(r={},r[e]=n,r))}}))}})),r.length&&(t.attachRef=function(e){t.inner=e});var f=Object.create(null);return h.forEach((function(e){f[e]=t.props[Ni(e)]})),t.state={values:f,prevProps:{}},t}l=e,(a=d).prototype=Object.create(l.prototype),a.prototype.constructor=a,a.__proto__=l;var p=d.prototype;return p.shouldComponentUpdate=function(){return!this._notifying},d.getDerivedStateFromProps=function(e,t){var n=t.values,r=t.prevProps,a={values:Pi(Object.create(null),n),prevProps:{}};return h.forEach((function(t){a.prevProps[t]=e[t],!ji(e,t)&&ji(r,t)&&(a.values[t]=e[Ni(t)])})),a},p.componentWillUnmount=function(){this.unmounted=!0},p.render=function(){var e=this,n=this.props,r=n.innerRef,a=Li(n,["innerRef"]);f.forEach((function(e){delete a[e]}));var l={};return h.forEach((function(t){var n=e.props[t];l[t]=void 0!==n?n:e.state.values[t]})),w.a.createElement(t,Pi({},a,l,this.handlers,{ref:r||this.attachRef}))},d}(w.a.Component);Object(Bi.polyfill)(p),p.displayName="Uncontrolled("+l+")",p.propTypes=Pi({innerRef:function(){}},function(e,t){var n={};return Object.keys(e).forEach((function(e){n[Ni(e)]=Fi})),n}(n)),r.forEach((function(e){p.prototype[e]=function(){var t;return(t=this.inner)[e].apply(t,arguments)}}));var y=p;return w.a.forwardRef&&((y=w.a.forwardRef((function(e,t){return w.a.createElement(p,Pi({},e,{innerRef:t}))}))).propTypes=p.propTypes),y.ControlledComponent=t,y.deferControlTo=function(t,r,a){return void 0===r&&(r={}),e(t,Pi({},n,r),a)},y}(Bo,{open:"onToggle"});zo.Toggle=Po,zo.Menu=Ro;var Ho=zo,Uo={active:C.a.bool,disabled:C.a.bool,divider:Ti()(C.a.bool,(function(e){var t=e.divider,n=e.children;return t&&n?new Error("Children will not be rendered for dividers"):null})),eventKey:C.a.any,header:C.a.bool,href:C.a.string,onClick:C.a.func,onSelect:C.a.func},Wo=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).handleClick=r.handleClick.bind(yi(yi(r))),r}vi(t,e);var n=t.prototype;return n.handleClick=function(e){var t=this.props,n=t.href,r=t.disabled,a=t.onSelect,l=t.eventKey;n&&!r||e.preventDefault(),r||a&&a(l,e)},n.render=function(){var e=this.props,t=e.active,n=e.disabled,r=e.divider,a=e.header,l=e.onClick,d=e.className,h=e.style,f=uo(pi(e,["active","disabled","divider","header","onClick","className","style"]),["eventKey","onSelect"]),p=f[0],y=f[1];return r?(y.children=void 0,w.a.createElement("li",di({},y,{role:"separator",className:De()(d,"divider"),style:h}))):a?w.a.createElement("li",di({},y,{role:"heading",className:De()(d,to(p,"header")),style:h})):w.a.createElement("li",{role:"presentation",className:De()(d,{active:t,disabled:n}),style:h},w.a.createElement(mo,di({},y,{role:"menuitem",tabIndex:"-1",onClick:ho(l,this.handleClick)})))},t}(w.a.Component);Wo.propTypes=Uo,Wo.defaultProps={divider:!1,disabled:!1,header:!1};var Vo=no("dropdown",Wo);var qo=function(){var e=ln().t,t=Dt(),n=t.canRename,r=t.canDelete,a=t.canCreate,l=t.startRenaming,d=t.startDeleting,h=t.startCreatingFolder,f=t.startCreatingDocOrFile,p=t.startUploadingDocOrFile;return w.a.createElement(w.a.Fragment,null,n?w.a.createElement(Vo,{onClick:l},e("rename")):null,r?w.a.createElement(Vo,{onClick:d},e("delete")):null,a?w.a.createElement(w.a.Fragment,null,w.a.createElement(Vo,{divider:!0}),w.a.createElement(Vo,{onClick:f},e("new_file")),w.a.createElement(Vo,{onClick:h},e("new_folder")),w.a.createElement(Vo,{onClick:p},e("upload"))):null)};function Go(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,l=void 0;try{for(var d,h=e[Symbol.iterator]();!(r=(d=h.next()).done)&&(n.push(d.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==h.return||h.return()}finally{if(a)throw l}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ko(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ko(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ko(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Yo(e){var t=e.id,n=ln().t,r=Go(Object(y.useState)(!1),2),a=r[0],l=r[1];function d(e){l(e)}return w.a.createElement(Ho,{onClick:li((function(){d(!1)})),pullRight:!0,open:a,id:"dropdown-".concat(t),onToggle:d},w.a.createElement(Ho.Toggle,{noCaret:!0,className:"dropdown-toggle-no-background entity-menu-toggle",onClick:li()},w.a.createElement(qr,{type:"ellipsis-v",accessibilityLabel:n("menu")})),w.a.createElement(Ho.Menu,null,w.a.createElement(qo,null)))}Yo.propTypes={id:C.a.string.isRequired};var Xo=Yo;function Jo(e){var t=e.id,n=e.name,r=e.isSelected,a=e.icons,l=Object(y.useContext)(O),d=l.hasWritePermissions,h=l.setContextMenuCoords,f=d&&r,p=Dr(t),_=p.isDragging,C=p.dragRef,S=p.isDraggable,k=p.setIsDraggable,x=Object(y.createRef)();return Object(y.useEffect)((function(){var e=x.current;r&&e&&setTimeout((function(){e&&ei(e,{scrollMode:"if-needed"})}),100)}),[r,x]),w.a.createElement("div",{className:De()("entity",{"dnd-draggable-dragging":_}),role:"presentation",ref:C,onContextMenu:function(e){e.preventDefault(),h({top:e.pageY,left:e.pageX})},draggable:S},w.a.createElement("div",{className:"entity-name entity-name-react",role:"presentation",ref:x},a,w.a.createElement(si,{name:n,isSelected:r,setIsDraggable:k}),f?w.a.createElement(Xo,{id:t}):null))}Jo.propTypes={id:C.a.string.isRequired,name:C.a.string.isRequired,isSelected:C.a.bool.isRequired,icons:C.a.node};var Qo=Jo;function Zo(){return(Zo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ea(e){var t=e.name,n=e.id,r=e.isLinkedFile,a=ln().t,l=et(n),d=l.isSelected,h=l.props,f=w.a.createElement(w.a.Fragment,null,w.a.createElement(qr,{type:Gr(t),modifier:"fw",classes:{icon:"spaced"}},r?w.a.createElement(qr,{type:"external-link-square",modifier:"rotate-180",classes:{icon:"linked-file-highlight"},accessibilityLabel:a("linked_file")}):null));return w.a.createElement("li",Zo({role:"treeitem"},h,{"aria-label":t,tabIndex:"0"}),w.a.createElement(Qo,{id:n,name:t,isSelected:d,icons:f}))}ea.propTypes={name:C.a.string.isRequired,id:C.a.string.isRequired,isLinkedFile:C.a.bool};var ta=ea;function na(){return(na=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ra(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,l=void 0;try{for(var d,h=e[Symbol.iterator]();!(r=(d=h.next()).done)&&(n.push(d.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==h.return||h.return()}finally{if(a)throw l}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ia(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ia(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ia(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function oa(e){var t=e.name,n=e.id,r=e.folders,a=e.docs,l=e.files,d=ln().t,h=et(n),f=h.isSelected,p=h.props,_=tt().selectedEntityParentIds,C=ra(We("folder.".concat(n,".expanded"),!1),2),S=C[0],k=C[1];Object(y.useEffect)((function(){_.has(n)&&k(!0)}),[n,_,k]);var x=Ir(n),E=x.isOver,A=x.dropRef,T=Ir(n),R=T.isOver,O=T.dropRef,M=w.a.createElement(w.a.Fragment,null,w.a.createElement("button",{onClick:function(){k(!S)},"aria-label":d(S?"collapse":"expand")},w.a.createElement(qr,{type:S?"angle-down":"angle-right",modifier:"fw"})),w.a.createElement(qr,{type:S?"folder-open":"folder",modifier:"fw"}));return w.a.createElement(w.a.Fragment,null,w.a.createElement("li",na({role:"treeitem"},p,{"aria-expanded":S,"aria-label":t,tabIndex:"0",ref:A,className:De()(p.className,{"dnd-droppable-hover":E||R})}),w.a.createElement(Qo,{id:n,name:t,isSelected:f,icons:M})),S?w.a.createElement(ha,{folders:r,docs:a,files:l,dropRef:O}):null)}oa.propTypes={name:C.a.string.isRequired,id:C.a.string.isRequired,folders:C.a.array.isRequired,docs:C.a.array.isRequired,files:C.a.array.isRequired};var aa=oa;function sa(e){return function(e){if(Array.isArray(e))return la(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return la(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return la(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function la(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ca(e){var t=e.folders,n=e.docs,r=e.files,a=e.classes,l=void 0===a?{}:a,d=e.dropRef,h=void 0===d?null:d,f=e.children,p=[].concat(sa(n),sa(r));return w.a.createElement("ul",{className:De()("list-unstyled",l.root),role:"tree",ref:h,"dnd-container":"true"},t.sort(da).map((function(e){return w.a.createElement(aa,{key:e._id,name:e.name,id:e._id,folders:e.folders,docs:e.docs,files:e.fileRefs})})),p.sort(da).map((function(e){return w.a.createElement(ta,{key:e._id,name:e.name,id:e._id,isLinkedFile:e.linkedFileData&&!!e.linkedFileData.provider})})),f)}ca.propTypes={folders:C.a.array.isRequired,docs:C.a.array.isRequired,files:C.a.array.isRequired,classes:C.a.exact({root:C.a.string}),dropRef:C.a.func,children:C.a.node};var ua=new Intl.Collator("en",{numeric:!0,sensitivity:"variant",caseFirst:"upper"});function da(e,t){return ua.compare(e.name,t.name)}var ha=ca,fa={id:Mi()(C.a.oneOfType([C.a.string,C.a.number])),placement:C.a.oneOf(["top","right","bottom","left"]),positionTop:C.a.oneOfType([C.a.number,C.a.string]),positionLeft:C.a.oneOfType([C.a.number,C.a.string]),arrowOffsetTop:C.a.oneOfType([C.a.number,C.a.string]),arrowOffsetLeft:C.a.oneOfType([C.a.number,C.a.string])},pa=function(e){function t(){return e.apply(this,arguments)||this}return vi(t,e),t.prototype.render=function(){var e,t=this.props,n=t.placement,r=t.positionTop,a=t.positionLeft,l=t.arrowOffsetTop,d=t.arrowOffsetLeft,h=t.className,f=t.style,p=t.children,y=co(pi(t,["placement","positionTop","positionLeft","arrowOffsetTop","arrowOffsetLeft","className","style","children"])),_=y[0],C=y[1],S=di({},ao(_),((e={})[n]=!0,e)),k=di({top:r,left:a},f),x={top:l,left:d};return w.a.createElement("div",di({},C,{role:"tooltip",className:De()(h,S),style:k}),w.a.createElement("div",{className:to(_,"arrow"),style:x}),w.a.createElement("div",{className:to(_,"inner")},p))},t}(w.a.Component);pa.propTypes=fa,pa.defaultProps={placement:"right"};var ma,va=no("tooltip",pa),ya=n(430),ba=n.n(ya),wa=n(285),_a=n.n(wa),Ca=n(203),Sa=n.n(Ca),ka={in:C.a.bool,mountOnEnter:C.a.bool,unmountOnExit:C.a.bool,appear:C.a.bool,timeout:C.a.number,onEnter:C.a.func,onEntering:C.a.func,onEntered:C.a.func,onExit:C.a.func,onExiting:C.a.func,onExited:C.a.func},xa=((ma={})[Ca.ENTERING]="in",ma[Ca.ENTERED]="in",ma),Ea=function(e){function t(){return e.apply(this,arguments)||this}return vi(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.children,r=pi(e,["className","children"]);return w.a.createElement(Sa.a,r,(function(e,r){return w.a.cloneElement(n,di({},r,{className:De()("fade",t,n.props.className,xa[e])}))}))},t}(w.a.Component);Ea.propTypes=ka,Ea.defaultProps={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1};var Aa=Ea,Ta=di({},_a.a.propTypes,{show:C.a.bool,rootClose:C.a.bool,onHide:C.a.func,animation:C.a.oneOfType([C.a.bool,Ri.a]),onEnter:C.a.func,onEntering:C.a.func,onEntered:C.a.func,onExit:C.a.func,onExiting:C.a.func,onExited:C.a.func,placement:C.a.oneOf(["top","right","bottom","left"])}),$a={animation:Aa,rootClose:!1,show:!1,placement:"right"},Ra=function(e){function t(){return e.apply(this,arguments)||this}return vi(t,e),t.prototype.render=function(){var e,t=this.props,n=t.animation,r=t.children,a=pi(t,["animation","children"]),l=!0===n?Aa:n||null;return e=l?r:Object(y.cloneElement)(r,{className:De()(r.props.className,"in")}),w.a.createElement(_a.a,di({},a,{transition:l}),e)},t}(w.a.Component);Ra.propTypes=Ta,Ra.defaultProps=$a;var Oa=Ra;function Ma(e,t){return ba()(t)?t.indexOf(e)>=0:e===t}var Pa=C.a.oneOf(["click","hover","focus"]),La=di({},Oa.propTypes,{trigger:C.a.oneOfType([Pa,C.a.arrayOf(Pa)]),delay:C.a.number,delayShow:C.a.number,delayHide:C.a.number,defaultOverlayShown:C.a.bool,overlay:C.a.node.isRequired,onBlur:C.a.func,onClick:C.a.func,onFocus:C.a.func,onMouseOut:C.a.func,onMouseOver:C.a.func,target:C.a.oneOf([null]),onHide:C.a.oneOf([null]),show:C.a.oneOf([null])}),Da=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).handleToggle=r.handleToggle.bind(yi(yi(r))),r.handleDelayedShow=r.handleDelayedShow.bind(yi(yi(r))),r.handleDelayedHide=r.handleDelayedHide.bind(yi(yi(r))),r.handleHide=r.handleHide.bind(yi(yi(r))),r.handleMouseOver=function(e){return r.handleMouseOverOut(r.handleDelayedShow,e,"fromElement")},r.handleMouseOut=function(e){return r.handleMouseOverOut(r.handleDelayedHide,e,"toElement")},r._mountNode=null,r.state={show:t.defaultOverlayShown},r}vi(t,e);var n=t.prototype;return n.componentDidMount=function(){this._mountNode=document.createElement("div"),this.renderOverlay()},n.componentDidUpdate=function(){this.renderOverlay()},n.componentWillUnmount=function(){Ei.a.unmountComponentAtNode(this._mountNode),this._mountNode=null,clearTimeout(this._hoverShowDelay),clearTimeout(this._hoverHideDelay)},n.handleDelayedHide=function(){var e=this;if(null!=this._hoverShowDelay)return clearTimeout(this._hoverShowDelay),void(this._hoverShowDelay=null);if(this.state.show&&null==this._hoverHideDelay){var t=null!=this.props.delayHide?this.props.delayHide:this.props.delay;t?this._hoverHideDelay=setTimeout((function(){e._hoverHideDelay=null,e.hide()}),t):this.hide()}},n.handleDelayedShow=function(){var e=this;if(null!=this._hoverHideDelay)return clearTimeout(this._hoverHideDelay),void(this._hoverHideDelay=null);if(!this.state.show&&null==this._hoverShowDelay){var t=null!=this.props.delayShow?this.props.delayShow:this.props.delay;t?this._hoverShowDelay=setTimeout((function(){e._hoverShowDelay=null,e.show()}),t):this.show()}},n.handleHide=function(){this.hide()},n.handleMouseOverOut=function(e,t,n){var r=t.currentTarget,a=t.relatedTarget||t.nativeEvent[n];a&&a===r||Ci()(r,a)||e(t)},n.handleToggle=function(){this.state.show?this.hide():this.show()},n.hide=function(){this.setState({show:!1})},n.makeOverlay=function(e,t){return w.a.createElement(Oa,di({},t,{show:this.state.show,onHide:this.handleHide,target:this}),e)},n.show=function(){this.setState({show:!0})},n.renderOverlay=function(){Ei.a.unstable_renderSubtreeIntoContainer(this,this._overlay,this._mountNode)},n.render=function(){var e=this.props,t=e.trigger,n=e.overlay,r=e.children,a=e.onBlur,l=e.onClick,d=e.onFocus,h=e.onMouseOut,f=e.onMouseOver,p=pi(e,["trigger","overlay","children","onBlur","onClick","onFocus","onMouseOut","onMouseOver"]);delete p.delay,delete p.delayShow,delete p.delayHide,delete p.defaultOverlayShown;var _=w.a.Children.only(r),C=_.props,S={};return this.state.show&&(S["aria-describedby"]=n.props.id),S.onClick=ho(C.onClick,l),Ma("click",t)&&(S.onClick=ho(S.onClick,this.handleToggle)),Ma("hover",t)&&(S.onMouseOver=ho(C.onMouseOver,f,this.handleMouseOver),S.onMouseOut=ho(C.onMouseOut,h,this.handleMouseOut)),Ma("focus",t)&&(S.onFocus=ho(C.onFocus,d,this.handleDelayedShow),S.onBlur=ho(C.onBlur,a,this.handleDelayedHide)),this._overlay=this.makeOverlay(n,p),Object(y.cloneElement)(_,S)},t}(w.a.Component);Da.propTypes=La,Da.defaultProps={defaultOverlayShown:!1,trigger:["hover","focus"]};var Ia=Da;function Fa(e){var t=e.id,n=e.description,r=e.onClick,a=e.children,l=w.a.createElement(va,{id:"".concat(t,"_tooltip")},n);return w.a.createElement(Ia,{placement:"bottom",overlay:l},w.a.createElement(bo,{onClick:r},a))}Fa.propTypes={id:C.a.string.isRequired,description:C.a.string.isRequired,onClick:C.a.func,children:C.a.oneOfType([C.a.arrayOf(C.a.node),C.a.node])};var ja=Fa;function Na(){var e=ln().t,t=Dt(),n=t.canCreate,r=t.startCreatingFolder,a=t.startCreatingDocOrFile,l=t.startUploadingDocOrFile;return n?w.a.createElement(w.a.Fragment,null,w.a.createElement(ja,{id:"new_file",description:e("new_file"),onClick:a},w.a.createElement(qr,{type:"file",modifier:"fw",accessibilityLabel:e("new_file")})),w.a.createElement(ja,{id:"new_folder",description:e("new_folder"),onClick:r},w.a.createElement(qr,{type:"folder",modifier:"fw",accessibilityLabel:e("new_folder")})),w.a.createElement(ja,{id:"upload",description:e("upload"),onClick:l},w.a.createElement(qr,{type:"upload",modifier:"fw",accessibilityLabel:e("upload")}))):null}function Ba(){var e=ln().t,t=Dt(),n=t.canRename,r=t.canDelete,a=t.startRenaming,l=t.startDeleting;return n||r?w.a.createElement("div",{className:"toolbar-right"},n?w.a.createElement(ja,{id:"rename",description:e("rename"),onClick:a},w.a.createElement(qr,{type:"pencil",modifier:"fw",accessibilityLabel:e("rename")})):null,r?w.a.createElement(ja,{id:"delete",description:e("delete"),onClick:l},w.a.createElement(qr,{type:"trash-o",modifier:"fw",accessibilityLabel:e("delete")})):null):null}var za=function(){return Object(y.useContext)(O).hasWritePermissions?w.a.createElement("div",{className:"toolbar toolbar-filetree"},w.a.createElement(Na,null),w.a.createElement(Ba,null)):null},Ha=n(286),Ua=n.n(Ha),Wa=n(106),Va=n.n(Wa),qa=n(75),Ga=n.n(qa),Ka=n(202),Ya=n.n(Ka),Xa=n(127),Ja=n.n(Xa),Qa=n(280),Za=n.n(Qa),es={componentClass:Ri.a},ts=function(e){function t(){return e.apply(this,arguments)||this}return vi(t,e),t.prototype.render=function(){var e=this.props,t=e.componentClass,n=e.className,r=co(pi(e,["componentClass","className"])),a=r[0],l=r[1],d=ao(a);return w.a.createElement(t,di({},l,{className:De()(n,d)}))},t}(w.a.Component);ts.propTypes=es,ts.defaultProps={componentClass:"div"};var ns=no("modal-body",ts),rs={dialogClassName:C.a.string},is=function(e){function t(){return e.apply(this,arguments)||this}return vi(t,e),t.prototype.render=function(){var e,t=this.props,n=t.dialogClassName,r=t.className,a=t.style,l=t.children,d=t.onMouseDownDialog,h=co(pi(t,["dialogClassName","className","style","children","onMouseDownDialog"])),f=h[0],p=h[1],y=to(f),_=di({display:"block"},a),C=di({},ao(f),((e={})[y]=!1,e[to(f,"dialog")]=!0,e));return w.a.createElement("div",di({},p,{tabIndex:"-1",role:"dialog",style:_,className:De()(r,y)}),w.a.createElement("div",{className:De()(n,C),onMouseDown:d},w.a.createElement("div",{className:to(f,"content"),role:"document"},l)))},t}(w.a.Component);is.propTypes=rs;var os=no("modal",oo([Vi,qi],is)),as={componentClass:Ri.a},ss=function(e){function t(){return e.apply(this,arguments)||this}return vi(t,e),t.prototype.render=function(){var e=this.props,t=e.componentClass,n=e.className,r=co(pi(e,["componentClass","className"])),a=r[0],l=r[1],d=ao(a);return w.a.createElement(t,di({},l,{className:De()(n,d)}))},t}(w.a.Component);ss.propTypes=as,ss.defaultProps={componentClass:"div"};var ls=no("modal-footer",ss),cs={label:C.a.string.isRequired,onClick:C.a.func},us=function(e){function t(){return e.apply(this,arguments)||this}return vi(t,e),t.prototype.render=function(){var e=this.props,t=e.label,n=e.onClick;return w.a.createElement("button",{type:"button",className:"close",onClick:n},w.a.createElement("span",{"aria-hidden":"true"},"×"),w.a.createElement("span",{className:"sr-only"},t))},t}(w.a.Component);us.propTypes=cs,us.defaultProps={label:"Close"};var ds=us,hs={closeLabel:C.a.string,closeButton:C.a.bool,onHide:C.a.func},fs={$bs_modal:C.a.shape({onHide:C.a.func})},ps=function(e){function t(){return e.apply(this,arguments)||this}return vi(t,e),t.prototype.render=function(){var e=this.props,t=e.closeLabel,n=e.closeButton,r=e.onHide,a=e.className,l=e.children,d=pi(e,["closeLabel","closeButton","onHide","className","children"]),h=this.context.$bs_modal,f=co(d),p=f[0],y=f[1],_=ao(p);return w.a.createElement("div",di({},y,{className:De()(a,_)}),n&&w.a.createElement(ds,{label:t,onClick:ho(h&&h.onHide,r)}),l)},t}(w.a.Component);ps.propTypes=hs,ps.defaultProps={closeLabel:"Close",closeButton:!1},ps.contextTypes=fs;var gs=no("modal-header",ps),ms={componentClass:Ri.a},vs=function(e){function t(){return e.apply(this,arguments)||this}return vi(t,e),t.prototype.render=function(){var e=this.props,t=e.componentClass,n=e.className,r=co(pi(e,["componentClass","className"])),a=r[0],l=r[1],d=ao(a);return w.a.createElement(t,di({},l,{className:De()(n,d)}))},t}(w.a.Component);vs.propTypes=ms,vs.defaultProps={componentClass:"h4"};var ys=no("modal-title",vs);var bs=di({},Ja.a.propTypes,os.propTypes,{backdrop:C.a.oneOf(["static",!0,!1]),backdropClassName:C.a.string,keyboard:C.a.bool,animation:C.a.bool,dialogComponentClass:Ri.a,autoFocus:C.a.bool,enforceFocus:C.a.bool,restoreFocus:C.a.bool,show:C.a.bool,onHide:C.a.func,onEnter:C.a.func,onEntering:C.a.func,onEntered:C.a.func,onExit:C.a.func,onExiting:C.a.func,onExited:C.a.func,container:Ja.a.propTypes.container}),ws=di({},Ja.a.defaultProps,{animation:!0,dialogComponentClass:os}),_s={$bs_modal:C.a.shape({onHide:C.a.func})};function Cs(e){return w.a.createElement(Aa,di({},e,{timeout:ks.TRANSITION_DURATION}))}function Ss(e){return w.a.createElement(Aa,di({},e,{timeout:ks.BACKDROP_TRANSITION_DURATION}))}var ks=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).handleDialogBackdropMouseDown=function(){r._waitingForMouseUp=!0},r.handleMouseUp=function(e){var t=r._modal.getDialogElement();r._waitingForMouseUp&&e.target===t&&(r._ignoreBackdropClick=!0),r._waitingForMouseUp=!1},r.handleEntering=r.handleEntering.bind(yi(yi(r))),r.handleExited=r.handleExited.bind(yi(yi(r))),r.handleWindowResize=r.handleWindowResize.bind(yi(yi(r))),r.handleDialogClick=r.handleDialogClick.bind(yi(yi(r))),r.setModalRef=r.setModalRef.bind(yi(yi(r))),r.state={style:{}},r}vi(t,e);var n=t.prototype;return n.getChildContext=function(){return{$bs_modal:{onHide:this.props.onHide}}},n.componentWillUnmount=function(){this.handleExited()},n.setModalRef=function(e){this._modal=e},n.handleDialogClick=function(e){this._ignoreBackdropClick||e.target!==e.currentTarget?this._ignoreBackdropClick=!1:this.props.onHide()},n.handleEntering=function(){Ua.a.on(window,"resize",this.handleWindowResize),this.updateStyle()},n.handleExited=function(){Ua.a.off(window,"resize",this.handleWindowResize)},n.handleWindowResize=function(){this.updateStyle()},n.updateStyle=function(){if(Ga.a){var e=this._modal.getDialogElement(),t=e.scrollHeight,n=Va()(e),r=Za()(Ei.a.findDOMNode(this.props.container||n.body)),a=t>n.documentElement.clientHeight;this.setState({style:{paddingRight:r&&!a?Ya()():void 0,paddingLeft:!r&&a?Ya()():void 0}})}},n.render=function(){var e=this.props,t=e.backdrop,n=e.backdropClassName,r=e.animation,a=e.show,l=e.dialogComponentClass,d=e.className,h=e.style,f=e.children,p=e.onEntering,y=e.onExited,_=pi(e,["backdrop","backdropClassName","animation","show","dialogComponentClass","className","style","children","onEntering","onExited"]),C=function(e,t){var n=t.propTypes,r={},a={};return Wi()(e).forEach((function(e){var t=e[0],l=e[1];n[t]?r[t]=l:a[t]=l})),[r,a]}(_,Ja.a),S=C[0],k=C[1],x=a&&!r&&"in";return w.a.createElement(Ja.a,di({},S,{ref:this.setModalRef,show:a,containerClassName:to(_,"open"),transition:r?Cs:void 0,backdrop:t,backdropTransition:r?Ss:void 0,backdropClassName:De()(to(_,"backdrop"),n,x),onEntering:ho(p,this.handleEntering),onExited:ho(y,this.handleExited),onMouseUp:this.handleMouseUp}),w.a.createElement(l,di({},k,{style:di({},this.state.style,h),className:De()(d,x),onClick:!0===t?this.handleDialogClick:null,onMouseDownDialog:this.handleDialogBackdropMouseDown}),f))},t}(w.a.Component);ks.propTypes=bs,ks.defaultProps=ws,ks.childContextTypes=_s,ks.Body=ns,ks.Header=gs,ks.Title=ys,ks.Footer=ls,ks.Dialog=os,ks.TRANSITION_DURATION=300,ks.BACKDROP_TRANSITION_DURATION=150;var xs=no("modal",oo([Vi,qi],ks));function Es(){return(Es=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function As(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Ts(e){var t=e.show,n=As(e,["show"]),r=Object(y.useCallback)((function(e){if(e){var n=e._modal&&e._modal.modalNode;n&&(t?n.removeAttribute("aria-hidden"):n.setAttribute("aria-hidden","true"))}}),[t]);return w.a.createElement(xs,Es({show:t},n,{ref:r}))}Ts.propTypes={show:C.a.bool};var $s=Ts;var Rs=function(){var e=ln().t,t=Dt(),n=t.isDeleting,r=t.inFlight,a=t.finishDeleting,l=t.actionedEntities,d=t.cancel,h=t.error;if(!n)return null;function f(){d()}return w.a.createElement($s,{show:n,onHide:f},w.a.createElement(xs.Header,null,w.a.createElement(xs.Title,null,e("delete"))),w.a.createElement(xs.Body,null,w.a.createElement("p",null,e("sure_you_want_to_delete")),w.a.createElement("ul",null,l.map((function(e){return w.a.createElement("li",{key:e._id},e.name)}))),h&&w.a.createElement("div",{className:"alert alert-danger file-tree-modal-alert"},e("generic_something_went_wrong"))),w.a.createElement(xs.Footer,null,r?w.a.createElement(bo,{bsStyle:"danger",disabled:!0},e("deleting"),"…"):w.a.createElement(w.a.Fragment,null,w.a.createElement(bo,{onClick:f},e("cancel")),w.a.createElement(bo,{bsStyle:"danger",onClick:function(){a()}},e("delete")))))};n(76);function Os(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,l=void 0;try{for(var d,h=e[Symbol.iterator]();!(r=(d=h.next()).done)&&(n.push(d.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==h.return||h.return()}finally{if(a)throw l}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ms(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ms(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ms(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ps(e){var t=e.name,n=e.setName,r=e.validName,a=e.setValidName,l=e.handleCreateFolder,d=ti().autoFocusedRef;return w.a.createElement("input",{ref:d,className:"form-control",type:"text",value:t,onKeyDown:function(e){"Enter"===e.key&&r&&l()},onChange:function(e){a(ue(e.target.value.trim())),n(e.target.value)},onFocus:function(e){e.target.setSelectionRange(0,-1)}})}Ps.propTypes={name:C.a.string.isRequired,setName:C.a.func.isRequired,validName:C.a.bool.isRequired,setValidName:C.a.func.isRequired,handleCreateFolder:C.a.func.isRequired};var Ls=function(){var e=ln().t,t=Os(Object(y.useState)(""),2),n=t[0],r=t[1],a=Os(Object(y.useState)(!0),2),l=a[0],d=a[1],h=Dt(),f=h.isCreatingFolder,p=h.inFlight,_=h.finishCreatingFolder,C=h.cancel,S=h.error;if(!f)return null;function k(){C()}function x(){_(n)}function E(){switch(S.constructor){case pt:return e("file_already_exists");default:return e("generic_something_went_wrong")}}return w.a.createElement($s,{show:f,onHide:k},w.a.createElement(xs.Header,null,w.a.createElement(xs.Title,null,e("new_folder"))),w.a.createElement(xs.Body,null,w.a.createElement(Ps,{name:n,setName:r,validName:l,setValidName:d,handleCreateFolder:x}),l?null:w.a.createElement("div",{role:"alert","aria-label":e("files_cannot_include_invalid_characters"),className:"alert alert-danger file-tree-modal-alert"},e("files_cannot_include_invalid_characters")),S?w.a.createElement("div",{role:"alert","aria-label":E(),className:"alert alert-danger file-tree-modal-alert"},E()):null),w.a.createElement(xs.Footer,null,p?w.a.createElement(bo,{bsStyle:"primary",disabled:!0},e("creating"),"…"):w.a.createElement(w.a.Fragment,null,w.a.createElement(bo,{onClick:k},e("cancel")),w.a.createElement(bo,{bsStyle:"primary",onClick:x,disabled:!l},e("create")))))},Ds=n(287),Is=n.n(Ds),Fs=n(128),js=n.n(Fs),Ns=n(431),Bs=n.n(Ns);function zs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zs(Object(n),!0).forEach((function(t){Bt()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Us(e,t){if(!e)return!1;var n=e.props?e.props.children:e.children;return t?n.length>0:!!n}function Ws(e){return e?e&&e.children?e.children:e.props&&e.props.children:[]}function Vs(e){return Array.isArray(e)?e:[e]}function qs(e,t,n,r,a){if(""===t)return[];var l=r.transKeepBasicHtmlNodesFor||[],d=t&&new RegExp(l.join("|")).test(t);if(!e&&!d)return[t];var h={};!function e(t){Vs(t).forEach((function(t){"string"!=typeof t&&(Us(t)?e(Ws(t)):"object"!==js()(t)||w.a.isValidElement(t)||Object.assign(h,t))}))}(e);var f=n.services.interpolator.interpolate(t,Hs(Hs({},h),a),n.language),p=Bs.a.parse("<0>".concat(f,"</0>"));function y(e,t,n){var r=Ws(e),a=C(r,t.children,n);return function(e){return"[object Array]"===Object.prototype.toString.call(e)&&e.every((function(e){return w.a.isValidElement(e)}))}(r)&&0===a.length?r:a}function _(e,t,n,r){e.dummy&&(e.children=t),n.push(w.a.cloneElement(e,Hs(Hs({},e.props),{},{key:r}),t))}function C(t,n,a){var h=Vs(t);return Vs(n).reduce((function(t,n,f){var p,S,k,x=n.children&&n.children[0]&&n.children[0].content;if("tag"===n.type){var E=h[parseInt(n.name,10)];!E&&1===a.length&&a[0][n.name]&&(E=a[0][n.name]),E||(E={});var A=0!==Object.keys(n.attrs).length?(p={props:n.attrs},(k=Hs({},S=E)).props=Object.assign(p.props,S.props),k):E,T=w.a.isValidElement(A),R=T&&Us(n,!0)&&!n.voidElement,O=d&&"object"===js()(A)&&A.dummy&&!T,M="object"===js()(e)&&null!==e&&Object.hasOwnProperty.call(e,n.name);if("string"==typeof A)t.push(A);else if(Us(A)||R){_(A,y(A,n,a),t,f)}else if(O){var P=C(h,n.children,a);t.push(w.a.cloneElement(A,Hs(Hs({},A.props),{},{key:f}),P))}else if(Number.isNaN(parseFloat(n.name))){if(M)_(A,y(A,n,a),t,f);else if(r.transSupportBasicHtmlNodes&&l.indexOf(n.name)>-1)if(n.voidElement)t.push(w.a.createElement(n.name,{key:"".concat(n.name,"-").concat(f)}));else{var L=C(h,n.children,a);t.push(w.a.createElement(n.name,{key:"".concat(n.name,"-").concat(f)},L))}else if(n.voidElement)t.push("<".concat(n.name," />"));else{var D=C(h,n.children,a);t.push("<".concat(n.name,">").concat(D,"</").concat(n.name,">"))}}else if("object"!==js()(A)||T)1===n.children.length&&x?t.push(w.a.cloneElement(A,Hs(Hs({},A.props),{},{key:f}),x)):t.push(w.a.cloneElement(A,Hs(Hs({},A.props),{},{key:f})));else{var I=n.children[0]?x:null;I&&t.push(I)}}else"text"===n.type&&t.push(n.content);return t}),[])}return Ws(C([{dummy:!0,children:e}],p,Vs(e||[]))[0])}function Gs(e){var t=e.children,n=e.count,r=e.parent,a=e.i18nKey,l=e.tOptions,d=e.values,h=e.defaults,f=e.components,p=e.ns,_=e.i18n,C=e.t,S=Is()(e,["children","count","parent","i18nKey","tOptions","values","defaults","components","ns","i18n","t"]),k=Object(y.useContext)(Yt)||{},x=k.i18n,E=k.defaultNS,A=_||x||Qt();if(!A)return nn("You will need to pass in an i18next instance by using i18nextReactModule"),t;var T=C||A.t.bind(A)||function(e){return e},R=Hs(Hs({},Xt()),A.options&&A.options.react),O=p||T.ns||E||A.options&&A.options.defaultNS;O="string"==typeof O?[O]:O||["translation"];var M=h||function e(t,n){if(!t)return"";var r="",a=Vs(t),l=n.transKeepBasicHtmlNodesFor||[];return a.forEach((function(t,a){if("string"==typeof t)r+="".concat(t);else if(w.a.isValidElement(t)){var d=Object.keys(t.props).length,h=l.indexOf(t.type)>-1,f=t.props.children;if(!f&&h&&0===d)r+="<".concat(t.type,"/>");else if(f||h&&0===d)if(t.props.i18nIsDynamicList)r+="<".concat(a,"></").concat(a,">");else if(h&&1===d&&"string"==typeof f)r+="<".concat(t.type,">").concat(f,"</").concat(t.type,">");else{var p=e(f,n);r+="<".concat(a,">").concat(p,"</").concat(a,">")}else r+="<".concat(a,"></").concat(a,">")}else if("object"===js()(t)){var y=t.format,_=Is()(t,["format"]),C=Object.keys(_);if(1===C.length){var S=y?"".concat(C[0],", ").concat(y):C[0];r+="{{".concat(S,"}}")}else en("react-i18next: the passed in object contained more than one variable - the object should look like {{ value, format }} where format is optional.",t)}else en("Trans: the passed in value is invalid - seems you passed in a variable like {number} - please pass in variables for interpolation as full objects like {{number}}.",t)})),r}(t,R)||R.transEmptyNodeValue||a,P=R.hashTransKey,L=a||(P?P(M):M),D=d?{}:{interpolation:{prefix:"#$?",suffix:"?$#"}},I=Hs(Hs(Hs(Hs({},l),{},{count:n},d),D),{},{defaultValue:M,ns:O}),F=qs(f||t,L?T(L,I):M,A,R,I),j=void 0!==r?r:R.defaultTransParent;return j?w.a.createElement(j,S,F):F}var Ks=function FileTreeModalError(){var e=ln().t,t=Dt(),n=t.isRenaming,r=t.isMoving,a=t.cancel,l=t.error;if(!l)return null;if(!n&&!r)return null;function d(){a()}function h(){switch(l.constructor){case pt:return e("file_already_exists");case gt:return w.a.createElement(Gs,{i18nKey:"file_already_exists_in_this_location",components:[w.a.createElement("strong",null)],values:{fileName:l.entityName}});case ht:return e("files_cannot_include_invalid_characters");case ft:return e("blocked_filename");default:return e("generic_something_went_wrong")}}return w.a.createElement(xs,{show:!0,onHide:d},w.a.createElement(xs.Header,null,w.a.createElement(xs.Title,null,function(){switch(l.constructor){case pt:case gt:return e("duplicate_file");case ht:case ft:return e("invalid_file_name");default:return e("error")}}())),w.a.createElement(xs.Body,null,w.a.createElement("div",{role:"alert","aria-label":h()},h())),w.a.createElement(xs.Footer,null,w.a.createElement(bo,{onClick:d},e("ok"))))};var Ys=w.a.forwardRef((function(e,t){return null})),Xs=function(){var e=Object(y.useContext)(O),t=e.hasWritePermissions,n=e.contextMenuCoords,r=e.setContextMenuCoords;if(!t||!n)return null;function a(e){e||r(null)}return Ei.a.createPortal(w.a.createElement(Ho,{onClick:function(){a(!1)},open:!0,id:"dropdown-file-tree-context-menu",onToggle:a},w.a.createElement(Ys,{bsRole:"toggle"}),w.a.createElement(Ho.Menu,{className:"context-menu",style:n},w.a.createElement(qo,null))),document.querySelector("body"))};var Js=function FileTreeError(){var e=ln().t;return w.a.createElement("div",{className:"file-tree-error"},w.a.createElement("p",null,e("generic_something_went_wrong")),w.a.createElement("p",null,e("please_refresh")),w.a.createElement(bo,{bsStyle:"primary",onClick:function(){location.reload()}},e("refresh")))};function Qs(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Zs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zs(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,d=!0,h=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return d=e.done,e},e:function(e){h=!0,l=e},f:function(){try{d||null==n.return||n.return()}finally{if(h)throw l}}}}function Zs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function el(e){var t=e.projectId,n=e.rootFolder,r=e.rootDocId,a=e.hasWritePermissions,l=e.onSelect,d=e.onInit,h=e.isConnected,f=t&&n;return Object(y.useEffect)((function(){f&&d()}),[f,d]),f?w.a.createElement(jr,{projectId:t,hasWritePermissions:a,rootFolder:n,rootDocId:r,onSelect:l},h?null:w.a.createElement("div",{className:"disconnected-overlay"}),w.a.createElement(za,null),w.a.createElement(Xs,null),w.a.createElement("div",{className:"file-tree-inner"},w.a.createElement(tl,null)),w.a.createElement(Rs,null),w.a.createElement(Ls,null),w.a.createElement(Ks,null)):null}function tl(){var e,t,n;!function(){var e=Pe(),t=e.dispatchRename,n=e.dispatchDelete,r=e.dispatchMove,a=e.dispatchCreateFolder,l=e.dispatchCreateDoc,d=e.dispatchCreateFile,h=e.fileTreeData,f=tt(),p=f.selectedEntityIds,w=f.selectedEntityParentIds,_=f.select,C=f.unselect,S=window._ide&&window._ide.socket,k=Object(y.useCallback)((function(e,t,n){window.user&&window.user.id&&window.user.id===n&&window.expectingLinkedFileRefreshedSocketFor===t&&(_(e),window.expectingLinkedFileRefreshedSocketFor=null)}),[_]);Object(y.useEffect)((function(){function e(e,n){t(e,n)}return S&&S.on("reciveEntityRename",e),function(){S&&S.removeListener("reciveEntityRename",e)}}),[S,t]),Object(y.useEffect)((function(){function e(e){if(C(e),w.has(e)){var t,r=Qs(p);try{for(r.s();!(t=r.n()).done;){var a=t.value;ne(h,a).path.includes(e)&&C(a)}}catch(e){r.e(e)}finally{r.f()}}n(e)}return S&&S.on("removeEntity",e),function(){S&&S.removeListener("removeEntity",e)}}),[S,C,n,h,p,w]),Object(y.useEffect)((function(){function e(e,t){r(e,t)}return S&&S.on("reciveEntityMove",e),function(){S&&S.removeListener("reciveEntityMove",e)}}),[S,r]),Object(y.useEffect)((function(){function e(e,t,n){a(e,t)}return S&&S.on("reciveNewFolder",e),function(){S&&S.removeListener("reciveNewFolder",e)}}),[S,a]),Object(y.useEffect)((function(){function e(e,t,n,r){l(e,t)}return S&&S.on("reciveNewDoc",e),function(){S&&S.removeListener("reciveNewDoc",e)}}),[S,l]),Object(y.useEffect)((function(){function e(e,t,n,r,a){d(e,t),r&&k(t._id,t.name,a)}return S&&S.on("reciveNewFile",e),function(){S&&S.removeListener("reciveNewFile",e)}}),[S,d,k])}(),e=Dt(),t=e.finishCreatingDoc,n=e.finishCreatingLinkedFile,Object(y.useEffect)((function(){function e(e){var n=Object.assign({},e.detail);t(n)}return window.addEventListener("FileTreeReactBridge.createDoc",e),function(){return window.removeEventListener("FileTreeReactBridge.createDoc",e)}}),[t]),Object(y.useEffect)((function(){function e(e){var t=Object.assign({},e.detail);n(t)}return window.addEventListener("FileTreeReactBridge.createLinkedFile",e),function(){return window.removeEventListener("FileTreeReactBridge.createLinkedFile",e)}}),[n]);var r=Pe().fileTreeData,a=Ir(r._id),l=a.isOver,d=a.dropRef;return w.a.createElement(w.a.Fragment,null,w.a.createElement(Wr,{isOver:l}),w.a.createElement(ha,{folders:r.folders,docs:r.docs,files:r.fileRefs,classes:{root:"file-tree-list"},dropRef:d,isOver:l},w.a.createElement("li",{className:"bottom-buffer"})))}el.propTypes={projectId:C.a.string,rootFolder:C.a.array,rootDocId:C.a.string,hasWritePermissions:C.a.bool.isRequired,onSelect:C.a.func.isRequired,onInit:C.a.func.isRequired,isConnected:C.a.bool.isRequired};var nl=A(el,Js);function rl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function il(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rl(Object(n),!0).forEach((function(t){ol(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ol(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function al(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}a.a.controller("ReactFileTreeController",["$scope","$timeout","ide","eventTracking",function(e,t,n,r){function a(){var t="ready"===e.connection.state,n="waitingCountdown"===e.connection.state&&null===e.connection.reconnection_countdown;e.isConnected=t||n}e.projectId=n.project_id,e.rootFolder=null,e.rootDocId=null,e.hasWritePermissions=!1,e.isConnected=!0,e.$on("project:joined",(function(){e.rootFolder=e.project.rootFolder,e.rootDocId=e.project.rootDoc_id,e.$emit("file-tree:initialized")})),e.$watch("permissions.write",(function(t){e.hasWritePermissions=t})),e.$watch("editor.open_doc_id",(function(e){window.dispatchEvent(new CustomEvent("editor.openDoc",{detail:e}))})),e.$watch("connection.state",a),e.$watch("connection.reconnection_countdown",a),e.onInit=function(){t((function(){e.$emit("left-pane-resize-all")}))},e.onSelect=function(t){if(1===t.length){var n=t[0],r="fileRef"===n.type?"file":n.type;e.$emit("entity:selected",il(il({},n.entity),{},{id:n.entity._id,type:r})),e.$emit("entities:multiSelected",{count:0})}else t.length>1?e.$emit("entities:multiSelected",{count:t.length}):e.$emit("entity:no-selection")}}]),a.a.component("fileTreeRoot",Object(p.react2angular)(nl));var sl=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ide=t,this.$scope=n,this.$scope.$on("project:joined",(function(){return r.loadRootFolder(),r.loadDeletedDocs(),r.$scope.$emit("file-tree:initialized")})),this.$scope.$on("entities:multiSelected",(function(e,t){r.$scope.$apply((function(){r.$scope.multiSelectedCount=t.count}))})),this.$scope.$watch("rootFolder",(function(e){if(null!=e)return r.recalculateDocList()})),this._bindToSocketEvents(),this.$scope.multiSelectedCount=0,$(document).on("click",(function(){return r.clearMultiSelectedEntities(),r.$scope.$digest()}))}var t,n,r;return t=e,(n=[{key:"_bindToSocketEvents",value:function(){var e=this;return this.ide.socket.on("reciveNewDoc",(function(t,n){var r=e.findEntityById(t)||e.$scope.rootFolder;return e.$scope.$apply((function(){return r.children.push({name:n.name,id:n._id,type:"doc"}),e.recalculateDocList()}))})),this.ide.socket.on("reciveNewFile",(function(t,n,r,a){var l=e.findEntityById(t)||e.$scope.rootFolder;return e.$scope.$apply((function(){return l.children.push({name:n.name,id:n._id,type:"file",linkedFileData:a,created:n.created}),e.recalculateDocList()}))})),this.ide.socket.on("reciveNewFolder",(function(t,n){var r=e.findEntityById(t)||e.$scope.rootFolder;return e.$scope.$apply((function(){return r.children.push({name:n.name,id:n._id,type:"folder",children:[]}),e.recalculateDocList()}))})),this.ide.socket.on("reciveEntityRename",(function(t,n){var r=e.findEntityById(t);if(null!=r)return e.$scope.$apply((function(){return r.name=n,e.recalculateDocList()}))})),this.ide.socket.on("removeEntity",(function(t){var n=e.findEntityById(t);if(null!=n)return e.$scope.$apply((function(){return e._deleteEntityFromScope(n),e.recalculateDocList()})),e.$scope.$broadcast("entity:deleted",n)})),this.ide.socket.on("reciveEntityMove",(function(t,n){var r=e.findEntityById(t),a=e.findEntityById(n);return e.$scope.$apply((function(){return e._moveEntityInScope(r,a),e.recalculateDocList()}))}))}},{key:"selectEntity",value:function(e){return this.selected_entity_id=e.id,this.ide.fileTreeManager.forEachEntity((function(e){return e.selected=!1})),e.selected=!0}},{key:"toggleMultiSelectEntity",value:function(e){return e.multiSelected=!e.multiSelected,this.$scope.multiSelectedCount=this.multiSelectedCount()}},{key:"multiSelectedCount",value:function(){var e=0;return this.forEachEntity((function(t){if(t.multiSelected)return e++})),e}},{key:"getMultiSelectedEntities",value:function(){var e=[];return this.forEachEntity((function(t){if(t.multiSelected)return e.push(t)})),e}},{key:"getFullCount",value:function(){var e=[];return this.forEachEntity((function(t){t.deleted||e.push(t)})),e.length}},{key:"getMultiSelectedEntityChildNodes",value:function(){for(var e=this.getMultiSelectedEntities(),t={},n=0,r=Array.from(e);n<r.length;n++){var a=r[n];t["/"+this.getEntityPath(a)]=a}var l={};for(var d in t){a=t[d];var h=d.split("/");if(!(h.length<=2))for(var f=1,p=h.length-1,y=p>=1;y?f<=p:f>=p;y?f++:f--)l["/"+h.slice(0,f).join("/")]=!0}var w=[];for(d in t)a=t[d],null==l[d]&&w.push(a);return w}},{key:"clearMultiSelectedEntities",value:function(){if(0!==this.$scope.multiSelectedCount)return this.forEachEntity((function(e){return e.multiSelected=!1})),this.$scope.multiSelectedCount=0}},{key:"multiSelectSelectedEntity",value:function(){var e=this.findSelectedEntity();e&&(e.multiSelected=!0),this.$scope.multiSelectedCount=this.multiSelectedCount()}},{key:"existsInFolder",value:function(e,t){var n=this.findEntityById(e);return null!=n&&null!=this._findEntityByPathInFolder(n,t)}},{key:"findSelectedEntity",value:function(){var e=null;return this.forEachEntity((function(t){if(t.selected)return e=t})),e}},{key:"findEntityById",value:function(e,t){if(null==t&&(t={}),this.$scope.rootFolder.id===e)return this.$scope.rootFolder;var n=this._findEntityByIdInFolder(this.$scope.rootFolder,e);if(null!=n)return n;if(t.includeDeleted)for(var r=0,a=Array.from(this.$scope.deletedDocs);r<a.length;r++)if((n=a[r]).id===e)return n;return null}},{key:"_findEntityByIdInFolder",value:function(e,t){for(var n=0,r=Array.from(e.children||[]);n<r.length;n++){var a=r[n];if(a.id===t)return a;if(null!=a.children){var l=this._findEntityByIdInFolder(a,t);if(null!=l)return l}}return null}},{key:"findEntityByPath",value:function(e){return this._findEntityByPathInFolder(this.$scope.rootFolder,e)}},{key:"_findEntityByPathInFolder",value:function(e,t){if(null==t||null==e)return null;if(""===t)return e;var n=t.split("/"),r=n.shift(),a=n.join("/");if("."===r)return this._findEntityByPathInFolder(e,a);for(var l=0,d=Array.from(e.children);l<d.length;l++){var h=d[l];if(h.name===r){if(""===a)return h;if("folder"===h.type)return this._findEntityByPathInFolder(h,a)}}return null}},{key:"forEachEntity",value:function(e){var t=this;return null==e&&(e=function(e,t,n){}),this._forEachEntityInFolder(this.$scope.rootFolder,null,e),function(){for(var n=[],r=0,a=Array.from(t.$scope.deletedDocs||[]);r<a.length;r++){var l=a[r];n.push(e(l))}return n}()}},{key:"_forEachEntityInFolder",value:function(e,t,n){var r=this;return function(){for(var a=[],l=0,d=Array.from(e.children||[]);l<d.length;l++){var h,f=d[l];h=null!=t?t+"/"+f.name:f.name,n(f,e,h),null!=f.children?a.push(r._forEachEntityInFolder(f,h,n)):a.push(void 0)}return a}()}},{key:"getEntityPath",value:function(e){return this._getEntityPathInFolder(this.$scope.rootFolder,e)}},{key:"_getEntityPathInFolder",value:function(e,t){for(var n=0,r=Array.from(e.children||[]);n<r.length;n++){var a=r[n];if(a===t)return t.name;if("folder"===a.type){var l=this._getEntityPathInFolder(a,t);if(null!=l)return a.name+"/"+l}}return null}},{key:"getRootDocDirname",value:function(){var e=this.findEntityById(this.$scope.project.rootDoc_id);if(null!=e)return this._getEntityDirname(e)}},{key:"_getEntityDirname",value:function(e){var t=this.getEntityPath(e);if(null!=t)return t.split("/").slice(0,-1).join("/")}},{key:"_findParentFolder",value:function(e){var t=this._getEntityDirname(e);if(null!=t)return this.findEntityByPath(t)}},{key:"loadRootFolder",value:function(){return this.$scope.rootFolder=this._parseFolder((e=null!=this.$scope?this.$scope.project:void 0,t=function(e){return e.rootFolder[0]},null!=e?t(e):void 0));var e,t}},{key:"_parseFolder",value:function(e){for(var t={name:e.name,id:e._id,type:"folder",children:[],selected:e._id===this.selected_entity_id},n=0,r=Array.from(e.docs||[]);n<r.length;n++){var a=r[n];t.children.push({name:a.name,id:a._id,type:"doc",selected:a._id===this.selected_entity_id})}for(var l=0,d=Array.from(e.fileRefs||[]);l<d.length;l++){var h=d[l];t.children.push({name:h.name,id:h._id,type:"file",selected:h._id===this.selected_entity_id,linkedFileData:h.linkedFileData,created:h.created})}for(var f=0,p=Array.from(e.folders||[]);f<p.length;f++){var y=p[f];t.children.push(this._parseFolder(y))}return t}},{key:"loadDeletedDocs",value:function(){var e=this;return this.$scope.deletedDocs=[],Array.from(this.$scope.project.deletedDocs||[]).map((function(t){return e.$scope.deletedDocs.push({name:t.name,id:t._id,type:"doc",deleted:!0})}))}},{key:"recalculateDocList",value:function(){var e=this;return this.$scope.docs=[],this.forEachEntity((function(t,n,r){if("doc"===t.type&&!t.deleted)return e.$scope.docs.push({doc:t,path:r})})),this.$scope.docs.sort((function(e,t){var n=(e.path.match(/\//g)||[]).length,r=(t.path.match(/\//g)||[]).length;return n-r!=0?-(n-r):e.path<t.path?-1:1}))}},{key:"getEntityPath",value:function(e){return this._getEntityPathInFolder(this.$scope.rootFolder,e)}},{key:"_getEntityPathInFolder",value:function(e,t){for(var n=0,r=Array.from(e.children||[]);n<r.length;n++){var a=r[n];if(a===t)return t.name;if("folder"===a.type){var l=this._getEntityPathInFolder(a,t);if(null!=l)return a.name+"/"+l}}return null}},{key:"getCurrentFolder",value:function(){return this._getCurrentFolder(this.$scope.rootFolder)||this.$scope.rootFolder}},{key:"_getCurrentFolder",value:function(e){null==e&&(e=this.$scope.rootFolder);for(var t=0,n=Array.from(e.children||[]);t<n.length;t++){var r=n[t];if(r.selected)return"folder"===r.type?r:e;if("folder"===r.type){var a=this._getCurrentFolder(r);if(null!=a)return a}}return null}},{key:"projectContainsFolder",value:function(){for(var e=0,t=Array.from(this.$scope.rootFolder.children);e<t.length;e++)if("folder"===t[e].type)return!0;return!1}},{key:"existsInThisFolder",value:function(e,t){for(var n=0,r=Array.from((null!=e?e.children:void 0)||[]);n<r.length;n++)if(r[n].name===t)return!0;return!1}},{key:"nameExistsError",value:function nameExistsError(e){null==e&&(e="already exists");var t=this.ide.$q.defer();return t.reject({data:e}),t.promise}},{key:"createDoc",value:function(e,t){var n=this;if(window.showReactFileTree){var r=new Promise((function(e,t){n.$scope.FileTreeReactBridgePromise={resolve:e,reject:t}}));return window.dispatchEvent(new CustomEvent("FileTreeReactBridge.createDoc",{detail:{name:e}})),r}return null==t&&(t=this.getCurrentFolder()),this.existsInThisFolder(t,e)?this.nameExistsError():this.ide.$http.post("/project/".concat(this.ide.project_id,"/doc"),{name:e,parent_folder_id:null!=t?t.id:void 0,_csrf:window.csrfToken})}},{key:"createFolder",value:function(e,t){return null==t&&(t=this.getCurrentFolder()),this.existsInThisFolder(t,e)?this.nameExistsError():this.ide.$http.post("/project/".concat(this.ide.project_id,"/folder"),{name:e,parent_folder_id:null!=t?t.id:void 0,_csrf:window.csrfToken})}},{key:"createLinkedFile",value:function(e,t,n,r){var a=this;if(window.showReactFileTree){var l=new Promise((function(e,t){a.$scope.FileTreeReactBridgePromise={resolve:e,reject:t}}));return window.dispatchEvent(new CustomEvent("FileTreeReactBridge.createLinkedFile",{detail:{name:e,provider:n,data:r}})),l}return null==t&&(t=this.getCurrentFolder()),this.existsInThisFolder(t,e)?this.nameExistsError():this.ide.$http.post("/project/".concat(this.ide.project_id,"/linked_file"),{name:e,parent_folder_id:null!=t?t.id:void 0,provider:n,data:r,_csrf:window.csrfToken},{disableAutoLoginRedirect:!0})}},{key:"refreshLinkedFile",value:function(e){if(this._findParentFolder(e),null!=(null!=e.linkedFileData?e.linkedFileData.provider:void 0))return this.ide.$http.post("/project/".concat(this.ide.project_id,"/linked_file/").concat(e.id,"/refresh"),{_csrf:window.csrfToken},{disableAutoLoginRedirect:!0});console.warn(">> no provider for ".concat(e.name),e)}},{key:"renameEntity",value:function(e,t,n){if(null==n&&(n=function(e){}),e.name!==t&&!(t.length>=150)){var r=this.getCurrentFolder();return this.existsInThisFolder(r,t)?this.nameExistsError():(e.renamingToName=t,this.ide.$http.post("/project/".concat(this.ide.project_id,"/").concat(e.type,"/").concat(e.id,"/rename"),{name:t,_csrf:window.csrfToken}).then((function(){return e.name=t})).finally((function(){return e.renamingToName=null})))}}},{key:"deleteEntity",value:function(e,t){return null==t&&(t=function(e){}),this.ide.queuedHttp({method:"DELETE",url:"/project/".concat(this.ide.project_id,"/").concat(e.type,"/").concat(e.id),headers:{"X-Csrf-Token":window.csrfToken}})}},{key:"moveEntity",value:function(e,t){var n=this;if(!this._isChildFolder(e,t)){if(this.existsInThisFolder(t,e.name))throw new Error("file exists in this location");this.ide.queuedHttp.post("/project/".concat(this.ide.project_id,"/").concat(e.type,"/").concat(e.id,"/move"),{folder_id:t.id,_csrf:window.csrfToken}).then((function(){n._moveEntityInScope(e,t)}))}}},{key:"_isChildFolder",value:function(e,t){var n=this.getEntityPath(e)||"";return(this.getEntityPath(t)||"").slice(0,n.length)===n}},{key:"_deleteEntityFromScope",value:function(e,t){if(null==t&&(t={moveToDeleted:!0}),null!=e){var n=null;if(this.forEachEntity((function(t,r){if(t===e)return n=r})),null!=n){var r=n.children.indexOf(e);r>-1&&n.children.splice(r,1)}return"folder"!==e.type&&e.selected&&(this.$scope.ui.view=null),"doc"===e.type&&t.moveToDeleted?(e.deleted=!0,this.$scope.deletedDocs.push(e)):void 0}}},{key:"_moveEntityInScope",value:function(e,t){if(!Array.from(t.children).includes(e))return this._deleteEntityFromScope(e,{moveToDeleted:!1}),t.children.push(e)}}])&&al(t.prototype,n),r&&al(t,r),e}();function ll(e){return(ll="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ul(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){cl(e,t,n[t])}))}return e}function dl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fl(e,t,n){return t&&hl(e.prototype,t),n&&hl(e,n),e}function pl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gl(e,t){return!t||"object"!==ll(t)&&"function"!=typeof t?pl(e):t}function ml(e){return(ml=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vl(e,t){return(vl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function yl(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vl(e,t)}var bl={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,t){console&&console[e]&&console[e].apply(console,t)}},wl=new(function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};dl(this,e),this.init(t,n)}return fl(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||bl,this.options=t,this.debug=t.debug}},{key:"setDebug",value:function(e){this.debug=e}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}},{key:"deprecate",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(e,t,n,r){return r&&!this.debug?null:("string"==typeof e[0]&&(e[0]="".concat(n).concat(this.prefix," ").concat(e[0])),this.logger[t](e))}},{key:"create",value:function(t){return new e(this.logger,ul({},{prefix:"".concat(this.prefix,":").concat(t,":")},this.options))}}]),e}()),_l=function(){function e(){dl(this,e),this.observers={}}return fl(e,[{key:"on",value:function(e,t){var n=this;return e.split(" ").forEach((function(e){n.observers[e]=n.observers[e]||[],n.observers[e].push(t)})),this}},{key:"off",value:function(e,t){this.observers[e]&&(t?this.observers[e]=this.observers[e].filter((function(e){return e!==t})):delete this.observers[e])}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(this.observers[e]){var a=[].concat(this.observers[e]);a.forEach((function(e){e.apply(void 0,n)}))}if(this.observers["*"]){var l=[].concat(this.observers["*"]);l.forEach((function(t){t.apply(t,[e].concat(n))}))}}}]),e}();function Cl(){var e,t,n=new Promise((function(n,r){e=n,t=r}));return n.resolve=e,n.reject=t,n}function Sl(e){return null==e?"":""+e}function kl(e,t,n){e.forEach((function(e){t[e]&&(n[e]=t[e])}))}function xl(e,t,n){function r(e){return e&&e.indexOf("###")>-1?e.replace(/###/g,"."):e}function a(){return!e||"string"==typeof e}for(var l="string"!=typeof t?[].concat(t):t.split(".");l.length>1;){if(a())return{};var d=r(l.shift());!e[d]&&n&&(e[d]=new n),e=e[d]}return a()?{}:{obj:e,k:r(l.shift())}}function El(e,t,n){var r=xl(e,t,Object);r.obj[r.k]=n}function Al(e,t){var n=xl(e,t),r=n.obj,a=n.k;if(r)return r[a]}function Tl(e,t,n){var r=Al(e,n);return void 0!==r?r:Al(t,n)}function $l(e,t,n){for(var r in t)"__proto__"!==r&&(r in e?"string"==typeof e[r]||e[r]instanceof String||"string"==typeof t[r]||t[r]instanceof String?n&&(e[r]=t[r]):$l(e[r],t[r],n):e[r]=t[r]);return e}function Rl(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var Ol={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function Ml(e){return"string"==typeof e?e.replace(/[&<>"'\/]/g,(function(e){return Ol[e]})):e}var Pl="undefined"!=typeof window&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,Ll=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};return dl(this,t),n=gl(this,ml(t).call(this)),Pl&&_l.call(pl(n)),n.data=e||{},n.options=r,void 0===n.options.keySeparator&&(n.options.keySeparator="."),n}return yl(t,e),fl(t,[{key:"addNamespaces",value:function(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}},{key:"removeNamespaces",value:function(e){var t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}},{key:"getResource",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,l=[e,t];return n&&"string"!=typeof n&&(l=l.concat(n)),n&&"string"==typeof n&&(l=l.concat(a?n.split(a):n)),e.indexOf(".")>-1&&(l=e.split(".")),Al(this.data,l)}},{key:"addResource",value:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1},l=this.options.keySeparator;void 0===l&&(l=".");var d=[e,t];n&&(d=d.concat(l?n.split(l):n)),e.indexOf(".")>-1&&(r=t,t=(d=e.split("."))[1]),this.addNamespaces(t),El(this.data,d,r),a.silent||this.emit("added",e,t,n,r)}},{key:"addResources",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(var a in n)"string"!=typeof n[a]&&"[object Array]"!==Object.prototype.toString.apply(n[a])||this.addResource(e,t,a,n[a],{silent:!0});r.silent||this.emit("added",e,t,n)}},{key:"addResourceBundle",value:function(e,t,n,r,a){var l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},d=[e,t];e.indexOf(".")>-1&&(r=n,n=t,t=(d=e.split("."))[1]),this.addNamespaces(t);var h=Al(this.data,d)||{};r?$l(h,n,a):h=ul({},h,n),El(this.data,d,h),l.silent||this.emit("added",e,t,n)}},{key:"removeResourceBundle",value:function(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}},{key:"hasResourceBundle",value:function(e,t){return void 0!==this.getResource(e,t)}},{key:"getResourceBundle",value:function(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?ul({},{},this.getResource(e,t)):this.getResource(e,t)}},{key:"getDataByLanguage",value:function(e){return this.data[e]}},{key:"toJSON",value:function(){return this.data}}]),t}(_l),Dl={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,n,r,a){var l=this;return e.forEach((function(e){l.processors[e]&&(t=l.processors[e].process(t,n,r,a))})),t}},Il={},Fl=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return dl(this,t),n=gl(this,ml(t).call(this)),Pl&&_l.call(pl(n)),kl(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,pl(n)),n.options=r,void 0===n.options.keySeparator&&(n.options.keySeparator="."),n.logger=wl.create("translator"),n}return yl(t,e),fl(t,[{key:"changeLanguage",value:function(e){e&&(this.language=e)}},{key:"exists",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}},n=this.resolve(e,t);return n&&void 0!==n.res}},{key:"extractFromKey",value:function(e,t){var n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");var r=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,a=t.ns||this.options.defaultNS;if(n&&e.indexOf(n)>-1){var l=e.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:e,namespaces:a};var d=e.split(n);(n!==r||n===r&&this.options.ns.indexOf(d[0])>-1)&&(a=d.shift()),e=d.join(r)}return"string"==typeof a&&(a=[a]),{key:e,namespaces:a}}},{key:"translate",value:function(e,t,n){var r=this;if("object"!==ll(t)&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),t||(t={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);var a=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,l=this.extractFromKey(e[e.length-1],t),d=l.key,h=l.namespaces,f=h[h.length-1],p=t.lng||this.language,y=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(p&&"cimode"===p.toLowerCase()){if(y){var w=t.nsSeparator||this.options.nsSeparator;return f+w+d}return d}var _=this.resolve(e,t),C=_&&_.res,S=_&&_.usedKey||d,k=_&&_.exactUsedKey||d,x=Object.prototype.toString.apply(C),E=["[object Number]","[object Function]","[object RegExp]"],A=void 0!==t.joinArrays?t.joinArrays:this.options.joinArrays,T=!this.i18nFormat||this.i18nFormat.handleAsObject,R="string"!=typeof C&&"boolean"!=typeof C&&"number"!=typeof C;if(T&&C&&R&&E.indexOf(x)<0&&("string"!=typeof A||"[object Array]"!==x)){if(!t.returnObjects&&!this.options.returnObjects)return this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(S,C,t):"key '".concat(d," (").concat(this.language,")' returned an object instead of string.");if(a){var O="[object Array]"===x,M=O?[]:{},P=O?k:S;for(var L in C)if(Object.prototype.hasOwnProperty.call(C,L)){var D="".concat(P).concat(a).concat(L);M[L]=this.translate(D,ul({},t,{joinArrays:!1,ns:h})),M[L]===D&&(M[L]=C[L])}C=M}}else if(T&&"string"==typeof A&&"[object Array]"===x)(C=C.join(A))&&(C=this.extendTranslation(C,e,t,n));else{var I=!1,F=!1;if(!this.isValidLookup(C)&&void 0!==t.defaultValue){if(I=!0,void 0!==t.count){var j=this.pluralResolver.getSuffix(p,t.count);C=t["defaultValue".concat(j)]}C||(C=t.defaultValue)}this.isValidLookup(C)||(F=!0,C=d);var N=t.defaultValue&&t.defaultValue!==C&&this.options.updateMissing;if(F||I||N){if(this.logger.log(N?"updateKey":"missingKey",p,f,d,N?t.defaultValue:C),a){var B=this.resolve(d,ul({},t,{keySeparator:!1}));B&&B.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var z=[],H=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if("fallback"===this.options.saveMissingTo&&H&&H[0])for(var U=0;U<H.length;U++)z.push(H[U]);else"all"===this.options.saveMissingTo?z=this.languageUtils.toResolveHierarchy(t.lng||this.language):z.push(t.lng||this.language);var W=function(e,n){r.options.missingKeyHandler?r.options.missingKeyHandler(e,f,n,N?t.defaultValue:C,N,t):r.backendConnector&&r.backendConnector.saveMissing&&r.backendConnector.saveMissing(e,f,n,N?t.defaultValue:C,N,t),r.emit("missingKey",e,f,n,C)};if(this.options.saveMissing){var V=void 0!==t.count&&"string"!=typeof t.count;this.options.saveMissingPlurals&&V?z.forEach((function(e){r.pluralResolver.getPluralFormsOfKey(e,d).forEach((function(t){return W([e],t)}))})):W(z,d)}}C=this.extendTranslation(C,e,t,_,n),F&&C===d&&this.options.appendNamespaceToMissingKey&&(C="".concat(f,":").concat(d)),F&&this.options.parseMissingKeyHandler&&(C=this.options.parseMissingKeyHandler(C))}return C}},{key:"extendTranslation",value:function(e,t,n,r,a){var l=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,n,r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init(ul({},n,{interpolation:ul({},this.options.interpolation,n.interpolation)}));var d,h=n.interpolation&&n.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables;if(h){var f=e.match(this.interpolator.nestingRegexp);d=f&&f.length}var p=n.replace&&"string"!=typeof n.replace?n.replace:n;if(this.options.interpolation.defaultVariables&&(p=ul({},this.options.interpolation.defaultVariables,p)),e=this.interpolator.interpolate(e,p,n.lng||this.language,n),h){var y=e.match(this.interpolator.nestingRegexp);d<(y&&y.length)&&(n.nest=!1)}!1!==n.nest&&(e=this.interpolator.nest(e,(function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return a&&a[0]===n[0]?(l.logger.warn("It seems you are nesting recursively key: ".concat(n[0]," in key: ").concat(t[0])),null):l.translate.apply(l,n.concat([t]))}),n)),n.interpolation&&this.interpolator.reset()}var w=n.postProcess||this.options.postProcess,_="string"==typeof w?[w]:w;return null!=e&&_&&_.length&&!1!==n.applyPostProcessor&&(e=Dl.handle(_,e,t,this.options&&this.options.postProcessPassResolved?ul({i18nResolved:r},n):n,this)),e}},{key:"resolve",value:function(e){var t,n,r,a,l,d=this,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof e&&(e=[e]),e.forEach((function(e){if(!d.isValidLookup(t)){var f=d.extractFromKey(e,h),p=f.key;n=p;var y=f.namespaces;d.options.fallbackNS&&(y=y.concat(d.options.fallbackNS));var w=void 0!==h.count&&"string"!=typeof h.count,_=void 0!==h.context&&"string"==typeof h.context&&""!==h.context,C=h.lngs?h.lngs:d.languageUtils.toResolveHierarchy(h.lng||d.language,h.fallbackLng);y.forEach((function(e){d.isValidLookup(t)||(l=e,!Il["".concat(C[0],"-").concat(e)]&&d.utils&&d.utils.hasLoadedNamespace&&!d.utils.hasLoadedNamespace(l)&&(Il["".concat(C[0],"-").concat(e)]=!0,d.logger.warn('key "'.concat(n,'" for languages "').concat(C.join(", "),'" won\'t get resolved as namespace "').concat(l,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),C.forEach((function(n){if(!d.isValidLookup(t)){a=n;var l,f,y=p,C=[y];if(d.i18nFormat&&d.i18nFormat.addLookupKeys)d.i18nFormat.addLookupKeys(C,p,n,e,h);else w&&(l=d.pluralResolver.getSuffix(n,h.count)),w&&_&&C.push(y+l),_&&C.push(y+="".concat(d.options.contextSeparator).concat(h.context)),w&&C.push(y+=l);for(;f=C.pop();)d.isValidLookup(t)||(r=f,t=d.getResource(n,e,f,h))}})))}))}})),{res:t,usedKey:n,exactUsedKey:r,usedLng:a,usedNS:l}}},{key:"isValidLookup",value:function(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}},{key:"getResource",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,n,r):this.resourceStore.getResource(e,t,n,r)}}]),t}(_l);function jl(e){return e.charAt(0).toUpperCase()+e.slice(1)}var Nl=function(){function e(t){dl(this,e),this.options=t,this.whitelist=this.options.supportedLngs||!1,this.supportedLngs=this.options.supportedLngs||!1,this.logger=wl.create("languageUtils")}return fl(e,[{key:"getScriptPartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return null;var t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}},{key:"getLanguagePartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return e;var t=e.split("-");return this.formatLanguageCode(t[0])}},{key:"formatLanguageCode",value:function(e){if("string"==typeof e&&e.indexOf("-")>-1){var t=["hans","hant","latn","cyrl","cans","mong","arab"],n=e.split("-");return this.options.lowerCaseLng?n=n.map((function(e){return e.toLowerCase()})):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=jl(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=jl(n[1].toLowerCase())),t.indexOf(n[2].toLowerCase())>-1&&(n[2]=jl(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}},{key:"isWhitelisted",value:function(e){return this.logger.deprecate("languageUtils.isWhitelisted",'function "isWhitelisted" will be renamed to "isSupportedCode" in the next major - please make sure to rename it\'s usage asap.'),this.isSupportedCode(e)}},{key:"isSupportedCode",value:function(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}},{key:"getBestMatchFromCodes",value:function(e){var t,n=this;return e?(e.forEach((function(e){if(!t){var r=n.formatLanguageCode(e);n.options.supportedLngs&&!n.isSupportedCode(r)||(t=r)}})),!t&&this.options.supportedLngs&&e.forEach((function(e){if(!t){var r=n.getLanguagePartFromCode(e);if(n.isSupportedCode(r))return t=r;t=n.options.supportedLngs.find((function(e){if(0===e.indexOf(r))return e}))}})),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t):null}},{key:"getFallbackCodes",value:function(e,t){if(!e)return[];if("string"==typeof e&&(e=[e]),"[object Array]"===Object.prototype.toString.apply(e))return e;if(!t)return e.default||[];var n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}},{key:"toResolveHierarchy",value:function(e,t){var n=this,r=this.getFallbackCodes(t||this.options.fallbackLng||[],e),a=[],l=function(e){e&&(n.isSupportedCode(e)?a.push(e):n.logger.warn("rejecting language code not found in supportedLngs: ".concat(e)))};return"string"==typeof e&&e.indexOf("-")>-1?("languageOnly"!==this.options.load&&l(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&l(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&l(this.getLanguagePartFromCode(e))):"string"==typeof e&&l(this.formatLanguageCode(e)),r.forEach((function(e){a.indexOf(e)<0&&l(n.formatLanguageCode(e))})),a}}]),e}(),Bl=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","kk","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],zl={1:function(e){return Number(e>1)},2:function(e){return Number(1!=e)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function(e){return Number(0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function(e){return Number(1==e?0:e>=2&&e<=4?1:2)},7:function(e){return Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(1==e?0:2==e?1:e<7?2:e<11?3:4)},11:function(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(0!==e)},14:function(e){return Number(1==e?0:2==e?1:3==e?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)},17:function(e){return Number(1==e||e%10==1&&e%100!=11?0:1)},18:function(e){return Number(0==e?0:1==e?1:2)},19:function(e){return Number(1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function(e){return Number(1==e?0:0==e||e%100>0&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(1==e?0:2==e?1:(e<0||e>10)&&e%10==0?2:3)}};function Hl(){var e={};return Bl.forEach((function(t){t.lngs.forEach((function(n){e[n]={numbers:t.nr,plurals:zl[t.fc]}}))})),e}var Ul=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};dl(this,e),this.languageUtils=t,this.options=n,this.logger=wl.create("pluralResolver"),this.rules=Hl()}return fl(e,[{key:"addRule",value:function(e,t){this.rules[e]=t}},{key:"getRule",value:function(e){return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}},{key:"needsPlural",value:function(e){var t=this.getRule(e);return t&&t.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(e,t){var n=this,r=[],a=this.getRule(e);return a?(a.numbers.forEach((function(a){var l=n.getSuffix(e,a);r.push("".concat(t).concat(l))})),r):r}},{key:"getSuffix",value:function(e,t){var n=this,r=this.getRule(e);if(r){var a=r.noAbs?r.plurals(t):r.plurals(Math.abs(t)),l=r.numbers[a];this.options.simplifyPluralSuffix&&2===r.numbers.length&&1===r.numbers[0]&&(2===l?l="plural":1===l&&(l=""));var d=function(){return n.options.prepend&&l.toString()?n.options.prepend+l.toString():l.toString()};return"v1"===this.options.compatibilityJSON?1===l?"":"number"==typeof l?"_plural_".concat(l.toString()):d():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===r.numbers.length&&1===r.numbers[0]?d():this.options.prepend&&a.toString()?this.options.prepend+a.toString():a.toString()}return this.logger.warn("no plural rule found for: ".concat(e)),""}}]),e}(),Wl=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};dl(this,e),this.logger=wl.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||function(e){return e},this.init(t)}return fl(e,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});var t=e.interpolation;this.escape=void 0!==t.escape?t.escape:Ml,this.escapeValue=void 0===t.escapeValue||t.escapeValue,this.useRawValueToEscape=void 0!==t.useRawValueToEscape&&t.useRawValueToEscape,this.prefix=t.prefix?Rl(t.prefix):t.prefixEscaped||"{{",this.suffix=t.suffix?Rl(t.suffix):t.suffixEscaped||"}}",this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||",",this.unescapePrefix=t.unescapeSuffix?"":t.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":t.unescapeSuffix||"",this.nestingPrefix=t.nestingPrefix?Rl(t.nestingPrefix):t.nestingPrefixEscaped||Rl("$t("),this.nestingSuffix=t.nestingSuffix?Rl(t.nestingSuffix):t.nestingSuffixEscaped||Rl(")"),this.nestingOptionsSeparator=t.nestingOptionsSeparator?t.nestingOptionsSeparator:t.nestingOptionsSeparator||",",this.maxReplaces=t.maxReplaces?t.maxReplaces:1e3,this.alwaysFormat=void 0!==t.alwaysFormat&&t.alwaysFormat,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var e="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(e,"g");var t="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(t,"g");var n="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(n,"g")}},{key:"interpolate",value:function(e,t,n,r){var a,l,d,h=this,f=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function p(e){return e.replace(/\$/g,"$$$$")}var y=function(e){if(e.indexOf(h.formatSeparator)<0){var a=Tl(t,f,e);return h.alwaysFormat?h.format(a,void 0,n):a}var l=e.split(h.formatSeparator),d=l.shift().trim(),p=l.join(h.formatSeparator).trim();return h.format(Tl(t,f,d),p,n,r)};this.resetRegExp();var w=r&&r.missingInterpolationHandler||this.options.missingInterpolationHandler,_=r&&r.interpolation&&r.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:function(e){return p(e)}},{regex:this.regexp,safeValue:function(e){return h.escapeValue?p(h.escape(e)):p(e)}}].forEach((function(t){for(d=0;a=t.regex.exec(e);){if(void 0===(l=y(a[1].trim())))if("function"==typeof w){var n=w(e,a,r);l="string"==typeof n?n:""}else{if(_){l=a[0];continue}h.logger.warn("missed to pass in variable ".concat(a[1]," for interpolating ").concat(e)),l=""}else"string"==typeof l||h.useRawValueToEscape||(l=Sl(l));if(e=e.replace(a[0],t.safeValue(l)),t.regex.lastIndex=0,++d>=h.maxReplaces)break}})),e}},{key:"nest",value:function(e,t){var n,r,a=this,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},d=ul({},l);function h(e,t){var n=this.nestingOptionsSeparator;if(e.indexOf(n)<0)return e;var r=e.split(new RegExp("".concat(n,"[ ]*{"))),a="{".concat(r[1]);e=r[0],a=(a=this.interpolate(a,d)).replace(/'/g,'"');try{d=JSON.parse(a),t&&(d=ul({},t,d))}catch(t){return this.logger.warn("failed parsing options string in nesting for key ".concat(e),t),"".concat(e).concat(n).concat(a)}return delete d.defaultValue,e}for(d.applyPostProcessor=!1,delete d.defaultValue;n=this.nestingRegexp.exec(e);){var f=[],p=!1;if(n[0].includes(this.formatSeparator)&&!/{.*}/.test(n[1])){var y=n[1].split(this.formatSeparator).map((function(e){return e.trim()}));n[1]=y.shift(),f=y,p=!0}if((r=t(h.call(this,n[1].trim(),d),d))&&n[0]===e&&"string"!=typeof r)return r;"string"!=typeof r&&(r=Sl(r)),r||(this.logger.warn("missed to resolve ".concat(n[1]," for nesting ").concat(e)),r=""),p&&(r=f.reduce((function(e,t){return a.format(e,t,l.lng,l)}),r.trim())),e=e.replace(n[0],r),this.regexp.lastIndex=0}return e}}]),e}();var Vl=function(e){function t(e,n,r){var a,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return dl(this,t),a=gl(this,ml(t).call(this)),Pl&&_l.call(pl(a)),a.backend=e,a.store=n,a.services=r,a.languageUtils=r.languageUtils,a.options=l,a.logger=wl.create("backendConnector"),a.state={},a.queue=[],a.backend&&a.backend.init&&a.backend.init(r,l.backend,l),a}return yl(t,e),fl(t,[{key:"queueLoad",value:function(e,t,n,r){var a=this,l=[],d=[],h=[],f=[];return e.forEach((function(e){var r=!0;t.forEach((function(t){var h="".concat(e,"|").concat(t);!n.reload&&a.store.hasResourceBundle(e,t)?a.state[h]=2:a.state[h]<0||(1===a.state[h]?d.indexOf(h)<0&&d.push(h):(a.state[h]=1,r=!1,d.indexOf(h)<0&&d.push(h),l.indexOf(h)<0&&l.push(h),f.indexOf(t)<0&&f.push(t)))})),r||h.push(e)})),(l.length||d.length)&&this.queue.push({pending:d,loaded:{},errors:[],callback:r}),{toLoad:l,pending:d,toLoadLanguages:h,toLoadNamespaces:f}}},{key:"loaded",value:function(e,t,n){var r=e.split("|"),a=r[0],l=r[1];t&&this.emit("failedLoading",a,l,t),n&&this.store.addResourceBundle(a,l,n),this.state[e]=t?-1:2;var d={};this.queue.forEach((function(n){var r,h,f,p,y,w;r=n.loaded,h=l,p=xl(r,[a],Object),y=p.obj,w=p.k,y[w]=y[w]||[],f&&(y[w]=y[w].concat(h)),f||y[w].push(h),function(e,t){for(var n=e.indexOf(t);-1!==n;)e.splice(n,1),n=e.indexOf(t)}(n.pending,e),t&&n.errors.push(t),0!==n.pending.length||n.done||(Object.keys(n.loaded).forEach((function(e){d[e]||(d[e]=[]),n.loaded[e].length&&n.loaded[e].forEach((function(t){d[e].indexOf(t)<0&&d[e].push(t)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",d),this.queue=this.queue.filter((function(e){return!e.done}))}},{key:"read",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:350,d=arguments.length>5?arguments[5]:void 0;return e.length?this.backend[n](e,t,(function(h,f){h&&f&&a<5?setTimeout((function(){r.read.call(r,e,t,n,a+1,2*l,d)}),l):d(h,f)})):d(null,{})}},{key:"prepareLoading",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),a&&a();"string"==typeof e&&(e=this.languageUtils.toResolveHierarchy(e)),"string"==typeof t&&(t=[t]);var l=this.queueLoad(e,t,r,a);if(!l.toLoad.length)return l.pending.length||a(),null;l.toLoad.forEach((function(e){n.loadOne(e)}))}},{key:"load",value:function(e,t,n){this.prepareLoading(e,t,{},n)}},{key:"reload",value:function(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}},{key:"loadOne",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=e.split("|"),a=r[0],l=r[1];this.read(a,l,"read",void 0,void 0,(function(r,d){r&&t.logger.warn("".concat(n,"loading namespace ").concat(l," for language ").concat(a," failed"),r),!r&&d&&t.logger.log("".concat(n,"loaded namespace ").concat(l," for language ").concat(a),d),t.loaded(e,r,d)}))}},{key:"saveMissing",value:function(e,t,n,r,a){var l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t)?this.logger.warn('did not save key "'.concat(n,'" as the namespace "').concat(t,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!"):null!=n&&""!==n&&(this.backend&&this.backend.create&&this.backend.create(e,t,n,r,null,ul({},l,{isUpdate:a})),e&&e[0]&&this.store.addResource(e[0],t,n,r))}}]),t}(_l);function ql(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,whitelist:!1,nonExplicitWhitelist:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var t={};if("object"===ll(e[1])&&(t=e[1]),"string"==typeof e[1]&&(t.defaultValue=e[1]),"string"==typeof e[2]&&(t.tDescription=e[2]),"object"===ll(e[2])||"object"===ll(e[3])){var n=e[3]||e[2];Object.keys(n).forEach((function(e){t[e]=n[e]}))}return t},interpolation:{escapeValue:!0,format:function(e,t,n,r){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!1}}}function Gl(e){return"string"==typeof e.ns&&(e.ns=[e.ns]),"string"==typeof e.fallbackLng&&(e.fallbackLng=[e.fallbackLng]),"string"==typeof e.fallbackNS&&(e.fallbackNS=[e.fallbackNS]),e.whitelist&&(e.whitelist&&e.whitelist.indexOf("cimode")<0&&(e.whitelist=e.whitelist.concat(["cimode"])),e.supportedLngs=e.whitelist),e.nonExplicitWhitelist&&(e.nonExplicitSupportedLngs=e.nonExplicitWhitelist),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function Kl(){}var Yl=new(function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if(dl(this,t),e=gl(this,ml(t).call(this)),Pl&&_l.call(pl(e)),e.options=Gl(n),e.services={},e.logger=wl,e.modules={external:[]},r&&!e.isInitialized&&!n.isClone){if(!e.options.initImmediate)return e.init(n,r),gl(e,pl(e));setTimeout((function(){e.init(n,r)}),0)}return e}return yl(t,e),fl(t,[{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;function r(e){return e?"function"==typeof e?new e:e:null}if("function"==typeof t&&(n=t,t={}),t.whitelist&&!t.supportedLngs&&this.logger.deprecate("whitelist",'option "whitelist" will be renamed to "supportedLngs" in the next major - please make sure to rename this option asap.'),t.nonExplicitWhitelist&&!t.nonExplicitSupportedLngs&&this.logger.deprecate("whitelist",'options "nonExplicitWhitelist" will be renamed to "nonExplicitSupportedLngs" in the next major - please make sure to rename this option asap.'),this.options=ul({},ql(),this.options,Gl(t)),this.format=this.options.interpolation.format,n||(n=Kl),!this.options.isClone){this.modules.logger?wl.init(r(this.modules.logger),this.options):wl.init(null,this.options);var a=new Nl(this.options);this.store=new Ll(this.options.resources,this.options);var l=this.services;l.logger=wl,l.resourceStore=this.store,l.languageUtils=a,l.pluralResolver=new Ul(a,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),l.interpolator=new Wl(this.options),l.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},l.backendConnector=new Vl(r(this.modules.backend),l.resourceStore,l,this.options),l.backendConnector.on("*",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];e.emit.apply(e,[t].concat(r))})),this.modules.languageDetector&&(l.languageDetector=r(this.modules.languageDetector),l.languageDetector.init(l,this.options.detection,this.options)),this.modules.i18nFormat&&(l.i18nFormat=r(this.modules.i18nFormat),l.i18nFormat.init&&l.i18nFormat.init(this)),this.translator=new Fl(this.services,this.options),this.translator.on("*",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];e.emit.apply(e,[t].concat(r))})),this.modules.external.forEach((function(t){t.init&&t.init(e)}))}this.modules.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");var d=["getResource","addResource","addResources","addResourceBundle","removeResourceBundle","hasResourceBundle","getResourceBundle","getDataByLanguage"];d.forEach((function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments)}}));var h=Cl(),f=function(){e.changeLanguage(e.options.lng,(function(t,r){e.isInitialized=!0,e.logger.log("initialized",e.options),e.emit("initialized",e.options),h.resolve(r),n(t,r)}))};return this.options.resources||!this.options.initImmediate?f():setTimeout(f,0),h}},{key:"loadResources",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Kl,r=n,a="string"==typeof e?e:this.language;if("function"==typeof e&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(a&&"cimode"===a.toLowerCase())return r();var l=[],d=function(e){e&&t.services.languageUtils.toResolveHierarchy(e).forEach((function(e){l.indexOf(e)<0&&l.push(e)}))};if(a)d(a);else{var h=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);h.forEach((function(e){return d(e)}))}this.options.preload&&this.options.preload.forEach((function(e){return d(e)})),this.services.backendConnector.load(l,this.options.ns,r)}else r(null)}},{key:"reloadResources",value:function(e,t,n){var r=Cl();return e||(e=this.languages),t||(t=this.options.ns),n||(n=Kl),this.services.backendConnector.reload(e,t,(function(e){r.resolve(),n(e)})),r}},{key:"use",value:function(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&Dl.addPostProcessor(e),"3rdParty"===e.type&&this.modules.external.push(e),this}},{key:"changeLanguage",value:function(e,t){var n=this;this.isLanguageChangingTo=e;var r=Cl();this.emit("languageChanging",e);var a=function(e){var a="string"==typeof e?e:n.services.languageUtils.getBestMatchFromCodes(e);a&&(n.language||(n.language=a,n.languages=n.services.languageUtils.toResolveHierarchy(a)),n.translator.language||n.translator.changeLanguage(a),n.services.languageDetector&&n.services.languageDetector.cacheUserLanguage(a)),n.loadResources(a,(function(e){!function(e,a){a?(n.language=a,n.languages=n.services.languageUtils.toResolveHierarchy(a),n.translator.changeLanguage(a),n.isLanguageChangingTo=void 0,n.emit("languageChanged",a),n.logger.log("languageChanged",a)):n.isLanguageChangingTo=void 0,r.resolve((function(){return n.t.apply(n,arguments)})),t&&t(e,(function(){return n.t.apply(n,arguments)}))}(e,a)}))};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(a):a(e):a(this.services.languageDetector.detect()),r}},{key:"getFixedT",value:function(e,t){var n=this,r=function e(t,r){var a;if("object"!==ll(r)){for(var l=arguments.length,d=new Array(l>2?l-2:0),h=2;h<l;h++)d[h-2]=arguments[h];a=n.options.overloadTranslationOptionHandler([t,r].concat(d))}else a=ul({},r);return a.lng=a.lng||e.lng,a.lngs=a.lngs||e.lngs,a.ns=a.ns||e.ns,n.t(t,a)};return"string"==typeof e?r.lng=e:r.lngs=e,r.ns=t,r}},{key:"t",value:function(){var e;return this.translator&&(e=this.translator).translate.apply(e,arguments)}},{key:"exists",value:function(){var e;return this.translator&&(e=this.translator).exists.apply(e,arguments)}},{key:"setDefaultNamespace",value:function(e){this.options.defaultNS=e}},{key:"hasLoadedNamespace",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var r=this.languages[0],a=!!this.options&&this.options.fallbackLng,l=this.languages[this.languages.length-1];if("cimode"===r.toLowerCase())return!0;var d=function(e,n){var r=t.services.backendConnector.state["".concat(e,"|").concat(n)];return-1===r||2===r};if(n.precheck){var h=n.precheck(this,d);if(void 0!==h)return h}return!!this.hasResourceBundle(r,e)||(!this.services.backendConnector.backend||!(!d(r,e)||a&&!d(l,e)))}},{key:"loadNamespaces",value:function(e,t){var n=this,r=Cl();return this.options.ns?("string"==typeof e&&(e=[e]),e.forEach((function(e){n.options.ns.indexOf(e)<0&&n.options.ns.push(e)})),this.loadResources((function(e){r.resolve(),t&&t(e)})),r):(t&&t(),Promise.resolve())}},{key:"loadLanguages",value:function(e,t){var n=Cl();"string"==typeof e&&(e=[e]);var r=this.options.preload||[],a=e.filter((function(e){return r.indexOf(e)<0}));return a.length?(this.options.preload=r.concat(a),this.loadResources((function(e){n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}},{key:"dir",value:function(e){if(e||(e=this.languages&&this.languages.length>0?this.languages[0]:this.language),!e)return"rtl";return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"].indexOf(this.services.languageUtils.getLanguagePartFromCode(e))>=0?"rtl":"ltr"}},{key:"createInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new t(e,n)}},{key:"cloneInstance",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Kl,a=ul({},this.options,n,{isClone:!0}),l=new t(a),d=["store","services","language"];return d.forEach((function(t){l[t]=e[t]})),l.services=ul({},this.services),l.services.utils={hasLoadedNamespace:l.hasLoadedNamespace.bind(l)},l.translator=new Fl(l.services,l.options),l.translator.on("*",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];l.emit.apply(l,[e].concat(n))})),l.init(a,r),l.translator.options=l.options,l.translator.backendConnector.services.utils={hasLoadedNamespace:l.hasLoadedNamespace.bind(l)},l}}]),t}(_l)),Xl=window.i18n.currentLangCode;Yl.use(Zt).init({lng:Xl,react:{useSuspense:!1,bindI18nStore:"added"},interpolation:{prefix:"__",suffix:"__",unescapeSuffix:"HTML",skipOnVariables:!0}});var Jl=n(720)("./".concat(Xl,".json")).then((function(e){Yl.addResourceBundle(Xl,"translation",e)}));function Ql(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Zl=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$scope=t;var r=new Promise((function(e){n.resolveSocketPromise=e}));Promise.all([r,Jl]).then((function(){n.$scope.$apply((function(){n.$scope.state.load_progress=100,n.$scope.state.loading=!1}))})).catch((function(){n.$scope.$apply((function(){n.$scope.state.error="Could not load translations."}))}))}var t,n,r;return t=e,(n=[{key:"socketLoaded",value:function(){this.resolveSocketPromise()}}])&&Ql(t.prototype,n),r&&Ql(t,r),e}();n(334),n(721);function ec(e){return(ec="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tc(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return nc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nc(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,d=!0,h=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return d=e.done,e},e:function(e){h=!0,l=e},f:function(){try{d||null==n.return||n.return()}finally{if(h)throw l}}}}function nc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function rc(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ic(e,t)}function ic(e,t){return(ic=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=lc(e);if(t){var a=lc(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ac(this,n)}}function ac(e,t){return!t||"object"!==ec(t)&&"function"!=typeof t?sc(e):t}function sc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lc(e){return(lc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dc(e,t,n){return t&&uc(e.prototype,t),n&&uc(e,n),e}for(var hc=function(){function e(t){cc(this,e),this._socket=t}return dc(e,null,[{key:"connect",value:function(t,n){return new e}}]),e}(),fc=function(){var e=gc[pc];hc.prototype[e]=function(){this._socket[e].apply(this._socket,arguments)}},pc=0,gc=["connect","disconnect","emit","on","removeListener"];pc<gc.length;pc++)fc();var mc,vc=function(e){rc(n,e);var t=oc(n);function n(e){var r;return cc(this,n),(r=t.call(this,e)).socket={get connected(){return!1},get sessionid(){},get transport(){return{}},connect:function(){},disconnect:function(e){}},r}return dc(n,null,[{key:"connect",value:function(){return new n}}]),dc(n,[{key:"connect",value:function(){}},{key:"disconnect",value:function(e){}},{key:"emit",value:function(){}},{key:"on",value:function(){}},{key:"removeListener",value:function(){}}]),n}(hc),yc=function(e){rc(n,e);var t=oc(n);function n(e){var r;return cc(this,n),(r=t.call(this,e)).socket=r._socket.socket,r}return dc(n,null,[{key:"connect",value:function(e,t){return new n(io.connect(e,t))}}]),n}(hc),bc=function(e){rc(n,e);var t=oc(n);function n(e,r){var a;cc(this,n),(a=t.call(this,n.createNewSocket(e,r)))._url=e,a._options=r,a._events=new Map;var l=sc(a);function d(){return l._socket.io&&l._socket.io.engine||{}}return a.socket={get connected(){return l._socket.connected},get sessionid(){return l._socket.id?l._socket.id:d().id},get transport(){return d().transport},connect:function(){l._replaceSocketWithNewInstance()},disconnect:function(e){return l._socket.disconnect(e)}},a}return dc(n,[{key:"_on",value:function(e,t){this._events.has(e)?this._events.get(e).push(t):this._events.set(e,[t]),this._socket.on(e,t)}},{key:"on",value:function(e,t){if(n.EVENT_MAP.has(e)){var r,a=tc(n.EVENT_MAP.get(e));try{for(a.s();!(r=a.n()).done;){var l=r.value;this._on(l,t)}}catch(e){a.e(e)}finally{a.f()}}else this._on(e,t)}},{key:"_removeListener",value:function(e,t){if(this._events.has(e)){var n=this._events.get(e),r=n.indexOf(t);-1!==r&&n.splice(r,1)}this._socket.removeListener(e,t)}},{key:"removeListener",value:function(e,t){if(n.EVENT_MAP.has(e)){var r,a=tc(n.EVENT_MAP.get(e));try{for(a.s();!(r=a.n()).done;){var l=r.value;this._removeListener(l,t)}}catch(e){a.e(e)}finally{a.f()}}else this._removeListener(e,t)}},{key:"_replaceSocketWithNewInstance",value:function(){var e=this._socket,t=n.createNewSocket(this._url,this._options);this._events.forEach((function(n,r){var a,l=tc(n);try{for(l.s();!(a=l.n()).done;){var d=a.value;e.removeListener(r,d),t.on(r,d)}}catch(e){l.e(e)}finally{l.f()}})),e.connected&&e.disconnect(),this._socket=t}},{key:"connect",value:function(){this._replaceSocketWithNewInstance()}}],[{key:"connect",value:function(e,t){return t.forceNew=t["force new connection"],t.path="/"+t.resource,t.reconnection=t.reconnect,t.timeout=t["connect timeout"],new n(e,t)}},{key:"createNewSocket",value:function(e,t){return io.Manager(e,t).socket("/",t)}},{key:"EVENT_MAP",get:function(){var e=["connect_error","connect_timeout","error"];return new Map([["connect_failed",e],["error",e]])}}]),n}(hc);"undefined"!=typeof io&&io?"string"==typeof io.version&&"0"===io.version.slice(0,1)?(sl_console.log("[socket.io] Shim: detected v0"),mc=yc):(sl_console.log("[socket.io] Shim: detected v2"),mc=bc):(sl_console.log("[socket.io] Shim: socket.io is not loaded, returning noop"),mc=vc);var wc,Cc={SocketShimNoop:vc,SocketShimV0:yc,SocketShimV2:bc,current:mc,connect:mc.connect,stub:function(){return new vc}};function Sc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sc(Object(n),!0).forEach((function(t){xc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ec(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ac(e,t,n){return t&&Ec(e.prototype,t),n&&Ec(e,n),e}var Tc=((wc=function(){function e(t,n){var r,a=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ide=t,this.$scope=n,this.wsUrl=t.wsUrl||null,"undefined"==typeof io||null===io)return this.wsUrl&&!window.location.href.match(/ws=fallback/)&&(window.location=window.location.href+"?ws=fallback"),console.error("Socket.io javascript not loaded. Please check that the real-time service is running and accessible."),this.ide.socket=Cc.stub(),void this.$scope.$apply((function(){return a.$scope.state.error="Could not connect to websocket server :("}));setInterval((function(){return a.disconnectIfInactive()}),36e5),window.addEventListener("online",(function(){if(sl_console.log("[online] browser notified online"),!a.connected)return a.tryReconnectWithRateLimit({force:!0})})),this.userIsLeavingPage=!1,window.addEventListener("beforeunload",(function(){a.userIsLeavingPage=!0})),this.connected=!1,this.userIsInactive=!1,this.gracefullyReconnecting=!1,this.shuttingDown=!1,this.joinProjectRetryInterval=this.JOIN_PROJECT_RETRY_INTERVAL,this.$scope.connection={debug:sl_debugging,reconnecting:!1,stillReconnecting:!1,forced_disconnect:!1,inactive_disconnect:!1,jobId:0},this.$scope.tryReconnectNow=function(){return a.tryReconnectWithRateLimit({force:!0})},this.$scope.$on("cursor:editor:update",(function(){if(a.lastUserAction=new Date,!a.connected)return a.tryReconnectWithRateLimit()})),document.querySelector("body").addEventListener("click",(function(e){if(!a.shuttingDown&&!a.connected&&"try-reconnect-now-button"!==e.target.id)return a.tryReconnectWithRateLimit()})),this.updateConnectionManagerState("connecting");try{r=new URL(this.wsUrl||"/socket.io",window.location)}catch(e){this.wsUrl&&0!==this.wsUrl.indexOf("/")&&!window.location.href.match(/ws=fallback/)&&(window.location=window.location.href+"?ws=fallback"),r={origin:null,pathname:this.wsUrl||"/socket.io"}}this.ide.socket=Cc.connect(r.origin,{resource:r.pathname.slice(1),reconnect:!1,"connect timeout":3e4,"force new connection":!0});var l=1,d=function(e){return window.wsRetryHandshake&&l++<window.wsRetryHandshake?setTimeout((function(){return a.ide.socket.socket.connect()}),100):(a.updateConnectionManagerState("error"),sl_console.log("socket.io error",e),!a.wsUrl||window.location.href.match(/ws=fallback/)?(a.connected=!1,a.$scope.$apply((function(){return a.$scope.state.error="Unable to connect, please view the <u><a href='/learn/Kb/Connection_problems'>connection problems guide</a></u> to fix the issue."}))):void(window.location=window.location.href+"?ws=fallback"))};this.ide.socket.on("error",d),this.ide.socket.on("connect",(function(){a.ide.socket.removeListener("error",d),sl_console.log("[socket.io connect] Connected"),a.updateConnectionManagerState("authenticating")})),this.ide.socket.on("connectionAccepted",(function(e,t){a.ide.socket.publicId=t||a.ide.socket.socket.sessionid,sl_console.log("[socket.io connectionAccepted] allowed to connect"),a.connected=!0,a.gracefullyReconnecting=!1,a.ide.pushEvent("connected"),a.updateConnectionManagerState("joining"),a.$scope.$apply((function(){a.$scope.state.loading&&(a.$scope.state.load_progress=70)}));var n=a.$scope.connection.jobId;setTimeout((function(){a.joinProject(n)}),100)})),this.ide.socket.on("connectionRejected",(function(e){return sl_console.log("[socket.io connectionRejected] session not valid or other connection error"),e&&"retry"===e.message?a.tryReconnectWithRateLimit():a.reportConnectionError(e)})),this.ide.socket.on("connect_failed",(function(){return a.updateConnectionManagerState("error"),a.connected=!1,a.$scope.$apply((function(){return a.$scope.state.error="Unable to connect, please view the <u><a href='/learn/Kb/Connection_problems'>connection problems guide</a></u> to fix the issue."}))})),this.ide.socket.on("disconnect",(function(){sl_console.log("[socket.io disconnect] Disconnected"),a.connected=!1,a.ide.pushEvent("disconnected"),a.$scope.connection.state.match(/^waiting/)||(a.$scope.connection.forced_disconnect||a.userIsInactive||a.shuttingDown?a.updateConnectionManagerState("inactive"):a.startAutoReconnectCountdown())})),this.ide.socket.on("forceDisconnect",(function(e){return a.updateConnectionManagerState("inactive"),a.$scope.$apply((function(){return a.$scope.permissions.write=!1,a.$scope.connection.forced_disconnect=!0})),a.ide.socket.disconnect(),a.ide.showGenericMessageModal("Please Refresh","We're performing maintenance on Overleaf and you need to refresh the editor.\nSorry for any inconvenience.\nThe editor will refresh in automatically in 10 seconds."),setTimeout((function(){return location.reload()}),1e4)})),this.ide.socket.on("reconnectGracefully",(function(){sl_console.log("Reconnect gracefully"),a.reconnectGracefully()}))}return Ac(e,null,[{key:"initClass",value:function(){this.prototype.disconnectAfterMs=864e5,this.prototype.lastUserAction=new Date,this.prototype.MIN_RETRY_INTERVAL=1e3,this.prototype.BACKGROUND_RETRY_INTERVAL=5e3,this.prototype.JOIN_PROJECT_RETRY_INTERVAL=5e3,this.prototype.JOIN_PROJECT_MAX_RETRY_INTERVAL=6e4,this.prototype.RECONNECT_GRACEFULLY_RETRY_INTERVAL=5e3,this.prototype.MAX_RECONNECT_GRACEFULLY_INTERVAL=45e3}}]),Ac(e,[{key:"updateConnectionManagerState",value:function(e){var t=this;this.$scope.$apply((function(){t.$scope.connection.jobId+=1;var n=t.$scope.connection.jobId;sl_console.log("[updateConnectionManagerState ".concat(n,"] from ").concat(t.$scope.connection.state," to ").concat(e)),t.$scope.connection.state=e,t.$scope.connection.reconnecting=!1,t.$scope.connection.stillReconnecting=!1,t.$scope.connection.inactive_disconnect=!1,t.$scope.connection.joining=!1,t.$scope.connection.reconnection_countdown=null,"connecting"===e||("reconnecting"===e?(t.stopReconnectCountdownTimer(),t.$scope.connection.reconnecting=!0,setTimeout((function(){t.$scope.connection.reconnecting&&t.$scope.connection.jobId===n&&(t.$scope.connection.stillReconnecting=!0)}),1e3)):"reconnectFailed"===e||"authenticating"===e||("joining"===e?t.$scope.connection.joining=!0:"ready"===e||("waitingCountdown"===e||"waitingGracefully"===e?t.stopReconnectCountdownTimer():"inactive"===e||"error"===e||sl_console.log("[WARN] [updateConnectionManagerState ".concat(n,"] got unrecognised state ").concat(e)))))}))}},{key:"expectConnectionManagerState",value:function(e,t){return!(this.$scope.connection.state!==e||t&&t!==this.$scope.connection.jobId)||(sl_console.log("[WARN] [state mismatch] expected state ".concat(e).concat(t?"/"+t:""," when in ").concat(this.$scope.connection.state,"/").concat(this.$scope.connection.jobId)),!1)}},{key:"reportConnectionError",value:function reportConnectionError(e){return sl_console.log("[socket.io] reporting connection error"),this.updateConnectionManagerState("error"),"not authorized"===(null!=e?e.message:void 0)||"invalid session"===(null!=e?e.message:void 0)?window.location="/login?redir=".concat(encodeURI(window.location.pathname)):(this.ide.socket.disconnect(),this.ide.showGenericMessageModal("Something went wrong connecting","Something went wrong connecting to your project. Please refresh if this continues to happen."))}},{key:"joinProject",value:function(e){var t=this;if(sl_console.log("[joinProject ".concat(e,"] joining...")),this.expectConnectionManagerState("joining",e)){var n={project_id:this.ide.project_id};window.anonymousAccessToken&&(n.anonymousAccessToken=window.anonymousAccessToken),this.ide.socket.emit("joinProject",n,(function(n,r,a,l){if(null!=n||null==r)return"ProjectNotFound"===(n=n||{}).code?void t.ide.showGenericMessageModal("Project has been deleted","This project has been deleted by the owner.").result.then((function(){return location.reload(!0)})):"TooManyRequests"===n.code?(sl_console.log("[joinProject ".concat(e,"] retrying: ").concat(n.message)),setTimeout((function(){return t.joinProject(e)}),t.joinProjectRetryInterval),void(t.joinProjectRetryInterval<t.JOIN_PROJECT_MAX_RETRY_INTERVAL&&(t.joinProjectRetryInterval+=t.JOIN_PROJECT_RETRY_INTERVAL))):t.reportConnectionError(n);t.joinProjectRetryInterval=t.JOIN_PROJECT_RETRY_INTERVAL,null!=t.$scope.protocolVersion&&t.$scope.protocolVersion!==l&&location.reload(!0),t.$scope.$apply((function(){t.updateConnectionManagerState("ready"),t.$scope.protocolVersion=l,t.$scope.project=kc(kc({},{rootDoc_id:null}),r),t.$scope.permissionsLevel=a,t.ide.loadingManager.socketLoaded(),t.$scope.$broadcast("project:joined")}))}))}else sl_console.log("[joinProject ".concat(e,"] aborting with stale connection"))}},{key:"reconnectImmediately",value:function(){return this.disconnect(),this.tryReconnect()}},{key:"disconnect",value:function(e){if(e&&e.permanent)sl_console.log("[disconnect] shutting down ConnectionManager"),this.updateConnectionManagerState("inactive"),this.shuttingDown=!0;else if(this.ide.socket.socket&&!this.ide.socket.socket.connected)return void sl_console.log("[socket.io] skipping disconnect because socket.io has not connected");return sl_console.log("[socket.io] disconnecting client"),this.ide.socket.disconnect()}},{key:"startAutoReconnectCountdown",value:function(){var e=this;this.updateConnectionManagerState("waitingCountdown");var t,n=this.$scope.connection.jobId;sl_console.log("[ConnectionManager] starting autoreconnect countdown"),t=null!=this.lastUserAction&&new Date-this.lastUserAction>12e4?60+Math.floor(120*Math.random()):3+Math.floor(7*Math.random()),this.userIsLeavingPage||(this.$scope.$apply((function(){e.$scope.connection.reconnecting=!1,e.$scope.connection.stillReconnecting=!1,e.$scope.connection.joining=!1,e.$scope.connection.reconnection_countdown=t})),setTimeout((function(){e.connected||e.countdownTimeoutId||(e.countdownTimeoutId=setTimeout((function(){return e.decreaseCountdown(n)}),1e3))}),200))}},{key:"stopReconnectCountdownTimer",value:function(){null!=this.countdownTimeoutId&&(sl_console.log("[ConnectionManager] cancelling existing reconnect timer"),clearTimeout(this.countdownTimeoutId),this.countdownTimeoutId=null)}},{key:"decreaseCountdown",value:function(e){var t=this;this.countdownTimeoutId=null,null!=this.$scope.connection.reconnection_countdown&&(this.expectConnectionManagerState("waitingCountdown",e)?(sl_console.log("[ConnectionManager] decreasing countdown",this.$scope.connection.reconnection_countdown),this.$scope.$apply((function(){t.$scope.connection.reconnection_countdown--})),this.$scope.connection.reconnection_countdown<=0?(this.$scope.connection.reconnecting=!1,this.$scope.$apply((function(){t.tryReconnect()}))):this.countdownTimeoutId=setTimeout((function(){return t.decreaseCountdown(e)}),1e3)):sl_console.log("[ConnectionManager] Aborting stale countdown ".concat(e)))}},{key:"tryReconnect",value:function(){var e=this;if(sl_console.log("[ConnectionManager] tryReconnect"),!(this.connected||this.shuttingDown||this.$scope.connection.reconnecting)){this.updateConnectionManagerState("reconnecting"),sl_console.log("[ConnectionManager] Starting new connection");var t=function(){e.ide.socket.removeListener("error",n),e.ide.socket.removeListener("connect",r)},n=function(){sl_console.log("[ConnectionManager] tryReconnect: failed"),t(),e.updateConnectionManagerState("reconnectFailed"),e.tryReconnectWithRateLimit({force:!0})},r=function(){sl_console.log("[ConnectionManager] tryReconnect: success"),t()};this.ide.socket.on("error",n),this.ide.socket.on("connect",r),this.ide.socket.socket.connect(),this.lastConnectionAttempt=new Date}}},{key:"tryReconnectWithRateLimit",value:function(e){if(!this.$scope.connection.reconnecting&&!this.connected){var t=null!=this.$scope.connection.reconnection_countdown&&this.$scope.connection.reconnection_countdown<=5,n=null!=e?e.force:void 0;if(!t||n){var r=n?this.MIN_RETRY_INTERVAL:this.BACKGROUND_RETRY_INTERVAL;null!=this.lastConnectionAttempt&&new Date-this.lastConnectionAttempt<r?"waitingCountdown"!==this.$scope.connection.state&&this.startAutoReconnectCountdown():this.tryReconnect()}}}},{key:"disconnectIfInactive",value:function(){var e=this;if(this.userIsInactive=new Date-this.lastUserAction>this.disconnectAfterMs,this.userIsInactive&&this.connected)return this.disconnect(),this.$scope.$apply((function(){return e.$scope.connection.inactive_disconnect=!0}))}},{key:"reconnectGracefully",value:function(e){var t=this;if(null==this.reconnectGracefullyStarted)this.reconnectGracefullyStarted=new Date;else if(!e)return void sl_console.log("[reconnectGracefully] reconnection is already in process, so skipping");var n=new Date-this.lastUserAction>this.RECONNECT_GRACEFULLY_RETRY_INTERVAL,r=new Date-this.reconnectGracefullyStarted>this.MAX_RECONNECT_GRACEFULLY_INTERVAL;n||r?(sl_console.log("[reconnectGracefully] User didn't do anything for last 5 seconds, reconnecting"),this._reconnectGracefullyNow()):(sl_console.log("[reconnectGracefully] User is working, will try again in 5 seconds"),this.updateConnectionManagerState("waitingGracefully"),setTimeout((function(){t.reconnectGracefully(!0)}),this.RECONNECT_GRACEFULLY_RETRY_INTERVAL))}},{key:"_reconnectGracefullyNow",value:function(){return this.gracefullyReconnecting=!0,this.reconnectGracefullyStarted=null,$.cookie("SERVERID","",{expires:-1,path:"/"}),this.reconnectImmediately()}}]),e}()).initClass(),wc=wc);function $c(e){return function(e){if(Array.isArray(e))return Mc(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Oc(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,l=void 0;try{for(var d,h=e[Symbol.iterator]();!(r=(d=h.next()).done)&&(n.push(d.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==h.return||h.return()}finally{if(a)throw l}}return n}(e,t)||Oc(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oc(e,t){if(e){if("string"==typeof e)return Mc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Mc(e,t):void 0}}function Mc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Pc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Lc=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"on",value:function(e,t){var n;this.events||(this.events={});var r=Rc(Array.from(e.split(".")),2);return e=r[0],n=r[1],this.events[e]||(this.events[e]=[]),this.events[e].push({callback:t,namespace:n})}},{key:"off",value:function(e){if(this.events||(this.events={}),null!=e){var t,n=Rc(Array.from(e.split(".")),2);if(e=n[0],null==(t=n[1]))return delete this.events[e];for(var r=[],a=0,l=Array.from(this.events[e]||[]);a<l.length;a++){var d=l[a];d.namespace!==t&&r.push(d)}return this.events[e]=r}return this.events={}}},{key:"trigger",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.events||(this.events={}),Array.from(this.events[e]||[]).map((function(e){return e.callback.apply(e,$c(Array.from(n||[])))}))}},{key:"emit",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.trigger.apply(this,$c(Array.from(t||[])))}}])&&Pc(t.prototype,n),r&&Pc(t,r),e}(),Dc=n(432),Ic=n.n(Dc);function Fc(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return jc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jc(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,d=!0,h=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return d=e.done,e},e:function(e){h=!0,l=e},f:function(){try{d||null==n.return||n.return()}finally{if(h)throw l}}}}function jc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Nc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zc(e,t,n){return t&&Bc(e.prototype,t),n&&Bc(e,n),e}var Hc,Uc=function(){function e(t){Nc(this,e),this._onTimeoutHandler=t,this._lastReport=void 0,this._queue=[]}return zc(e,[{key:"_getMetaPreferLocal",value:function(){var e,t=Fc(this._queue);try{for(t.s();!(e=t.n()).done;){var n=e.value;if("ShareJsDoc"===n.scope)return n}}catch(e){t.e(e)}finally{t.f()}return this._queue.pop()}},{key:"onTimeout",value:function(e){var t=this;this._queue.push(e),setTimeout((function(){if(t._queue.length){var e=t._getMetaPreferLocal();t._queue.length=0;var n=Date.now();n-t._lastReport<6e4||(t._lastReport=n,t._onTimeoutHandler(e))}}))}}]),e}(),Wc=function(){function e(t){var n=t.parent,r=t.onTimeoutHandler;Nc(this,e),this.scope=n?"ShareJsDoc":"global",this.timeout=6e4,this.parent=n,this.reporter=n?n.reporter:new Uc(r),this.lastAck=null,this.lastUnackedEdit=null}return zc(e,[{key:"onAck",value:function(){this.lastAck=performance.now(),this.parent&&this.parent.onAck()}},{key:"onEdit",value:function(){var e=performance.now();this.lastAck>this.lastUnackedEdit&&(this.lastUnackedEdit=null),this.lastUnackedEdit||(this.lastUnackedEdit=e);var t=e-this.lastUnackedEdit;if(t>this.timeout){var n=Date.now()-e,r={scope:this.scope,delay:t,lastAck:new Date(this.lastAck?n+this.lastAck:0),lastUnackedEdit:new Date(n+this.lastUnackedEdit)};this._log("timedOut",r),this.reporter.onTimeout(r)}}},{key:"attachToEditor",value:function(e,t){var n,r=this;n="CM"===e?function(e,t){"remote"!==t.origin&&(t.removed||t.text)&&r.onEdit()}:function(e){"remote"!==e.origin&&("remove"!==e.action&&"insert"!==e.action||r.onEdit())},this._log("attach to editor",e),t.on("change",n);return function(){r._log("detach from editor",e),t.off("change",n)}}},{key:"_log",value:function(){var e;(e=sl_console).log.apply(e,["[EditorWatchdogManager] ".concat(this.scope,":")].concat(Array.prototype.slice.call(arguments)))}}]),e}();function Vc(e){return(Vc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qc(e){return function(e){if(Array.isArray(e))return Gc(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Gc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gc(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Kc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yc(e,t,n){return t&&Kc(e.prototype,t),n&&Kc(e,n),e}function Xc(e,t){return(Xc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Jc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zc(e);if(t){var a=Zc(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Qc(this,n)}}function Qc(e,t){return!t||"object"!==Vc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Zc(e){return(Zc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var eu=((Hc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xc(e,t)}(n,e);var t=Jc(n);function n(e,r,a,l,d){var h;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(h=t.call(this)).doc_id=e,h.socket=l,h.type="text";var f=(r=Array.from(r).map((function(e){return decodeURIComponent(escape(e))}))).join("\n");return h.track_changes=!1,h.connection={send:function(e){if(h._startInflightOpTimeout(e),null!=window.disconnectOnUpdate&&Math.random()<window.disconnectOnUpdate&&(sl_console.log("Disconnecting on update",e),window._ide.socket.socket.disconnect()),!(null!=window.dropUpdates&&Math.random()<window.dropUpdates))return h.track_changes&&(null==e.meta&&(e.meta={}),e.meta.tc=h.track_changes_id_seeds.inflight),h.socket.emit("applyOtUpdate",h.doc_id,e,(function(e){if(null!=e)return h._handleError(e)}));sl_console.log("Simulating a lost update",e)},state:"ok",id:h.socket.publicId},h._doc=new Ic.a.Doc(h.connection,h.doc_id,{type:h.type}),h._doc.setFlushDelay(1e3),h._doc.on("change",(function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=h).trigger.apply(e,["change"].concat(qc(Array.from(n))))})),h.EditorWatchdogManager=new Wc({parent:d}),h._doc.on("acknowledge",(function(){return h.lastAcked=new Date,h.EditorWatchdogManager.onAck(),h.trigger("acknowledge")})),h._doc.on("remoteop",(function(){var e;h._doc.setFlushDelay(0);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=h).trigger.apply(e,["remoteop"].concat(qc(Array.from(n))))})),h._doc.on("flipped_pending_to_inflight",(function(){return h.trigger("flipped_pending_to_inflight")})),h._doc.on("saved",(function(){return h.trigger("saved")})),h._doc.on("error",(function(e){return h._handleError(e)})),h._bindToDocChanges(h._doc),h.processUpdateFromServer({open:!0,v:a,snapshot:f}),h._removeCarriageReturnCharFromShareJsDoc(),h}return Yc(n,null,[{key:"initClass",value:function(){this.prototype.INFLIGHT_OP_TIMEOUT=5e3,this.prototype.WAIT_FOR_CONNECTION_TIMEOUT=500,this.prototype.FATAL_OP_TIMEOUT=3e4}}]),Yc(n,[{key:"_removeCarriageReturnCharFromShareJsDoc",value:function(){var e,t=this._doc;if(-1!==t.snapshot.indexOf("\r"))for(window._ide.pushEvent("remove-carriage-return-char",{doc_id:this.doc_id});-1!==(e=t.snapshot.indexOf("\r"));)sl_console.log("[ShareJsDoc] remove-carriage-return-char",e),t.del(e,1)}},{key:"submitOp",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this._doc).submitOp.apply(e,qc(Array.from(n||[])))}},{key:"_isAheadOfExpectedVersion",value:function(e){return this._doc.version>0&&e.v>this._doc.version}},{key:"_pushOntoQueue",value:function(e){var t=this;sl_console.log("[processUpdate] push onto queue ".concat(e.v)),this.queuedMessageTimer||(this.queuedMessageTimer=setTimeout((function(){sl_console.log("[processUpdate] queue timeout fired for ".concat(e.v)),t.processUpdateFromServer(e)}),this.INFLIGHT_OP_TIMEOUT)),this.queuedMessages.push(e),this.queuedMessages.sort((function(e,t){return e.v-t.v}))}},{key:"_clearQueue",value:function(){this.queuedMessages=[]}},{key:"_processQueue",value:function(){if(this.queuedMessages.length>0){var e=this.queuedMessages[0].v;e>this._doc.version||(sl_console.log("[processUpdate] taken from queue ".concat(e)),this.processUpdateFromServerInOrder(this.queuedMessages.shift()),0===this.queuedMessages.length&&this.queuedMessageTimer&&(sl_console.log("[processUpdate] queue is empty, cleared timeout"),clearTimeout(this.queuedMessageTimer),this.queuedMessageTimer=null))}}},{key:"processUpdateFromServerInOrder",value:function(e){if(this.queuedMessages||(this.queuedMessages=[]),this._isAheadOfExpectedVersion(e))this._pushOntoQueue(e);else{var t=this.processUpdateFromServer(e);t instanceof Error&&"Invalid version from server"===t.message?this._clearQueue():this._processQueue()}}},{key:"processUpdateFromServer",value:function(e){try{this._doc._onMessage(e)}catch(e){return console.log(e),this._handleError(e),e}if("external"===(t=null!=e?e.meta:void 0,n=function(e){return e.type},null!=t?n(t):void 0))return this.trigger("externalUpdate",e);var t,n}},{key:"catchUp",value:function(e){var t=this;return function(){for(var n=[],r=0;r<e.length;r++){var a=e[r];a.v=t._doc.version,a.doc=t.doc_id,n.push(t.processUpdateFromServer(a))}return n}()}},{key:"getSnapshot",value:function(){return this._doc.snapshot}},{key:"getVersion",value:function(){return this._doc.version}},{key:"getType",value:function(){return this.type}},{key:"clearInflightAndPendingOps",value:function(){return this._clearFatalTimeoutTimer(),this._doc.inflightOp=null,this._doc.inflightCallbacks=[],this._doc.pendingOp=null,this._doc.pendingCallbacks=[]}},{key:"flushPendingOps",value:function(){return this._doc.flush()}},{key:"updateConnectionState",value:function(e){return sl_console.log("[updateConnectionState] Setting state to ".concat(e)),this.connection.state=e,this.connection.id=this.socket.publicId,this._doc.autoOpen=!1,this._doc._connectionStateChanged(e),this.lastAcked=null}},{key:"hasBufferedOps",value:function(){return null!=this._doc.inflightOp||null!=this._doc.pendingOp}},{key:"getInflightOp",value:function(){return this._doc.inflightOp}},{key:"getPendingOp",value:function(){return this._doc.pendingOp}},{key:"getRecentAck",value:function(){return null!=this.lastAcked&&new Date-this.lastAcked<2e3}},{key:"getOpSize",value:function(e){for(var t=0,n=0,r=Array.from(e||[]);n<r.length;n++){var a=r[n];null!=(null!=a?a.i:void 0)&&(t+=a.i.length),null!=(null!=a?a.d:void 0)&&(t+=a.d.length)}return t}},{key:"_attachEditorWatchdogManager",value:function(e,t){this._detachEditorWatchdogManager=this.EditorWatchdogManager.attachToEditor(e,t)}},{key:"_attachToEditor",value:function(e,t,n){this._attachEditorWatchdogManager(e,t),n()}},{key:"_maybeDetachEditorWatchdogManager",value:function(){this._detachEditorWatchdogManager&&(this._detachEditorWatchdogManager(),delete this._detachEditorWatchdogManager)}},{key:"attachToAce",value:function(e){var t=this;this._attachToEditor("Ace",e,(function(){t._doc.attach_ace(e,!1,window.maxDocLength)}))}},{key:"detachFromAce",value:function(){return this._maybeDetachEditorWatchdogManager(),"function"==typeof this._doc.detach_ace?this._doc.detach_ace():void 0}},{key:"attachToCM",value:function(e){var t=this;this._attachToEditor("CM",e,(function(){t._doc.attach_cm(e,!1)}))}},{key:"detachFromCM",value:function(){return this._maybeDetachEditorWatchdogManager(),"function"==typeof this._doc.detach_cm?this._doc.detach_cm():void 0}},{key:"_startInflightOpTimeout",value:function(e){var t=this;this._startFatalTimeoutTimer(e);var n=setTimeout((function n(){if(sl_console.log("[inflightOpTimeout] Trying op again"),null!=t._doc.inflightOp)return e.dupIfSource=[t.connection.id].concat(qc(Array.from(t._doc.inflightSubmittedIds))),"ok"!==t.connection.state?(sl_console.log("[inflightOpTimeout] Not connected, retrying in 0.5s"),setTimeout(n,t.WAIT_FOR_CONNECTION_TIMEOUT)):(sl_console.log("[inflightOpTimeout] Sending"),t.connection.send(e))}),this.INFLIGHT_OP_TIMEOUT);return this._doc.inflightCallbacks.push((function(){return t._clearFatalTimeoutTimer(),clearTimeout(n)}))}},{key:"_startFatalTimeoutTimer",value:function(e){var t=this;if(null==this._timeoutTimer)return this._timeoutTimer=setTimeout((function(){return t._clearFatalTimeoutTimer(),t.trigger("op:timeout",e)}),this.FATAL_OP_TIMEOUT)}},{key:"_clearFatalTimeoutTimer",value:function(){if(null!=this._timeoutTimer)return clearTimeout(this._timeoutTimer),this._timeoutTimer=null}},{key:"_handleError",value:function _handleError(e,t){return null==t&&(t={}),this.trigger("error",e,t)}},{key:"_bindToDocChanges",value:function(e){var t=this,n=e.submitOp;e.submitOp=function(){for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return t.trigger.apply(t,["op:sent"].concat(qc(Array.from(a)))),e.pendingCallbacks.push((function(){return t.trigger.apply(t,["op:acknowledged"].concat(qc(Array.from(a))))})),n.apply(e,a)};var r=e.flush;return e.flush=function(){t.trigger("flush",e.inflightOp,e.pendingOp,e.version);for(var n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return r.apply(e,a)}}}]),n}(Lc)).initClass(),Hc=Hc);function tu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var nu,ru=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),null==t&&(t=[]),this.changes=t,null==n&&(n=[]),this.comments=n,this.setIdSeed(e.generateIdSeed()),this.resetDirtyState()}var t,n,r;return t=e,r=[{key:"generateIdSeed",value:function(){var e=Math.floor(32767*Math.random()).toString(16),t=Math.floor(16777216*Math.random()).toString(16),n=Math.floor((new Date).valueOf()/1e3).toString(16);return"00000000".substr(0,8-n.length)+n+"000000".substr(0,6-t.length)+t+"0000".substr(0,4-e.length)+e}},{key:"generateId",value:function(){return this.generateIdSeed()+"000001"}}],(n=[{key:"getIdSeed",value:function(){return this.id_seed}},{key:"setIdSeed",value:function(e){return this.id_seed=e,this.id_increment=0}},{key:"newId",value:function(){this.id_increment++;var e=this.id_increment.toString(16);return this.id_seed+"000000".substr(0,6-e.length)+e}},{key:"getComment",value:function(e){for(var t=null,n=0,r=Array.from(this.comments);n<r.length;n++){var a=r[n];if(a.id===e){t=a;break}}return t}},{key:"removeCommentId",value:function(e){var t=this.getComment(e);if(null!=t)return this.comments=this.comments.filter((function(t){return t.id!==e})),this._markAsDirty(t,"comment","removed")}},{key:"moveCommentId",value:function(e,t,n){var r=this;return function(){for(var a=[],l=0,d=Array.from(r.comments);l<d.length;l++){var h=d[l];h.id===e?(h.op.p=t,h.op.c=n,a.push(r._markAsDirty(h,"comment","moved"))):a.push(void 0)}return a}()}},{key:"getChange",value:function(e){for(var t=null,n=0,r=Array.from(this.changes);n<r.length;n++){var a=r[n];if(a.id===e){t=a;break}}return t}},{key:"getChanges",value:function(e){for(var t=[],n={},r=0,a=Array.from(e);r<a.length;r++)n[a[r]]=!0;for(var l=0,d=Array.from(this.changes);l<d.length;l++){var h=d[l];n[h.id]&&(delete n[h.id],t.push(h))}return t}},{key:"removeChangeId",value:function(e){var t=this.getChange(e);if(null!=t)return this._removeChange(t)}},{key:"removeChangeIds",value:function(e){if(!(!(null!=e?e.length:void 0)>0)){this.changes.length;for(var t={},n=0,r=Array.from(e);n<r.length;n++)t[r[n]]=!0;for(var a=[],l=0,d=Array.from(this.changes);l<d.length;l++){var h=d[l];t[h.id]?(delete t[h.id],this._markAsDirty(h,"change","removed")):a.push(h)}return this.changes=a}}},{key:"validate",value:function(e){for(var t,n=0,r=Array.from(this.changes);n<r.length;n++){var a=r[n];if(null!=a.op.i&&(t=e.slice(a.op.p,a.op.p+a.op.i.length))!==a.op.i)throw new Error("Change (".concat(JSON.stringify(a),") doesn't match text (").concat(JSON.stringify(t),")"))}for(var l=0,d=Array.from(this.comments);l<d.length;l++){var h=d[l];if((t=e.slice(h.op.p,h.op.p+h.op.c.length))!==h.op.c)throw new Error("Comment (".concat(JSON.stringify(h),") doesn't match text (").concat(JSON.stringify(t),")"))}return!0}},{key:"applyOp",value:function(e,t){if(null==t&&(t={}),null==t.ts&&(t.ts=new Date),null!=e.i)return this.applyInsertToChanges(e,t),this.applyInsertToComments(e);if(null!=e.d)return this.applyDeleteToChanges(e,t),this.applyDeleteToComments(e);if(null!=e.c)return this.addComment(e,t);throw new Error("unknown op type")}},{key:"applyOps",value:function(e,t){var n=this;return null==t&&(t={}),Array.from(e).map((function(e){return n.applyOp(e,t)}))}},{key:"addComment",value:function(e,t){var n,r=this.getComment(e.t);return null!=r?(this.moveCommentId(e.t,e.p,e.c),r):(this.comments.push(n={id:e.t||this.newId(),op:{c:e.c,p:e.p,t:e.t},metadata:t}),this._markAsDirty(n,"comment","added"),n)}},{key:"applyInsertToComments",value:function(e){var t=this;return function(){for(var n=[],r=0,a=Array.from(t.comments);r<a.length;r++){var l=a[r];if(e.p<=l.op.p)l.op.p+=e.i.length,n.push(t._markAsDirty(l,"comment","moved"));else if(e.p<l.op.p+l.op.c.length){var d=e.p-l.op.p;l.op.c=l.op.c.slice(0,+(d-1)+1||void 0)+e.i+l.op.c.slice(d),n.push(t._markAsDirty(l,"comment","moved"))}else n.push(void 0)}return n}()}},{key:"applyDeleteToComments",value:function(e){var t=this,n=e.p,r=e.d.length,a=e.p+r;return function(){for(var l=[],d=0,h=Array.from(t.comments);d<h.length;d++){var f=h[d],p=f.op.p,y=f.op.p+f.op.c.length,w=y-p;if(a<=p)f.op.p-=r,l.push(t._markAsDirty(f,"comment","moved"));else if(n>=y);else{var _,C;C=n<=p?"":f.op.c.slice(0,n-p),_=a>=y?"":f.op.c.slice(a-p);var S=f.op.c.slice(C.length,w-_.length),k=Math.max(0,p-n);if(S!==e.d.slice(k).slice(0,S.length))throw new Error("deleted content does not match comment content");f.op.p=Math.min(p,n),f.op.c=C+_,l.push(t._markAsDirty(f,"comment","moved"))}}return l}()}},{key:"applyInsertToChanges",value:function(e,t){for(var n,r=this,a=e.p,l=e.i.length,d=e.p+l,h=!!e.u,f=!1,p=null,y=[],w=[],_=[],C=0;C<this.changes.length;C++){var S=(n=this.changes[C]).op.p;if(null!=n.op.d)a<S?(n.op.p+=l,y.push(n)):a===S&&(h&&n.op.d.length>=e.i.length&&n.op.d.slice(0,e.i.length)===e.i?(n.op.d=n.op.d.slice(e.i.length),n.op.p+=e.i.length,""===n.op.d?w.push(n):y.push(n),f=!0):(n.op.p+=l,y.push(n)));else if(null!=n.op.i){var k,x=S+n.op.i.length,E=a>=S&&a<=x,A=t.user_id===n.metadata.user_id,T=this.changes[C+1],R=null!=T&&null!=T.op.d&&e.p===x&&T.op.p===e.p,O=h&&R&&T.op.d.slice(0,e.i.length)===e.i,M=null!=p&&null!=p.op.d&&p.op.p===d;if(this.track_changes&&E&&!M&&!f&&!O&&A)k=a-S,n.op.i=n.op.i.slice(0,k)+e.i+n.op.i.slice(k),n.metadata.ts=t.ts,f=!0,y.push(n);else if(a<=S)n.op.p+=l,y.push(n);else if((!A||!this.track_changes)&&S<a&&a<x){k=a-S;var P=n.op.i.slice(0,k),L=n.op.i.slice(k);n.op.i=P,y.push(n);var D={op:{i:L,p:S+k+l},metadata:{}};for(var I in n.metadata){var F=n.metadata[I];D.metadata[I]=F}_.push(D)}}p=n}this.track_changes&&!f&&this._addOp(e,t);for(var j=0,N=Array.from(_);j<N.length;j++){var B=N[j];e=B.op,t=B.metadata,this._addOp(e,t)}for(var z=0,H=Array.from(w);z<H.length;z++)n=H[z],this._removeChange(n);return function(){for(var e=[],t=0,a=Array.from(y);t<a.length;t++)n=a[t],e.push(r._markAsDirty(n,"change","moved"));return e}()}},{key:"applyDeleteToChanges",value:function(e,t){for(var n=this,r=e.p,a=e.d.length,l=e.p+a,d=[],h=[],f=[],p=0,y=Array.from(this.changes);p<y.length;p++){var w,_=y[p];if(null!=_.op.i){var C=(w=_.op.p)+_.op.i.length;if(l<=w)_.op.p-=a,h.push(_);else if(r>=C);else{var S,k,x,E;r>=w?(k="",E=_.op.i.slice(0,r-w)):(k=e.d.slice(0,w-r),E=""),l<=C?(S="",x=_.op.i.slice(l-w)):(S=e.d.slice(C-r),x="");var A=E+x;A.length>0?(_.op.i=A,_.op.p=Math.min(w,r),_.metadata.ts=t.ts,h.push(_)):d.push(_);var T=e.d.length-k.length-S.length,R=k.length,O={d:e.d.slice(R,R+T),p:R};O.d.length>0&&f.push(O)}}else if(null!=_.op.d)if(l<(w=_.op.p)||!this.track_changes&&l===w)_.op.p-=a,h.push(_);else if(r<=w&&w<=l)if(this.track_changes){var M=w-r;f.push({i:_.op.d,p:M}),d.push(_)}else _.op.p=r,h.push(_)}e={p:e.p,d:this._applyOpModifications(e.d,f)};for(var P=0,L=Array.from(d);P<L.length;P++)_=L[P],e.d.length>0&&null!=_.op.d&&e.p<=_.op.p&&_.op.p<=e.p+e.d.length?(_.op.p=e.p,_.op.d=e.d,_.metadata=t,h.push(_),e.d=""):this._removeChange(_);if(this.track_changes&&e.d.length>0)this._addOp(e,t);else{var D=this._scanAndMergeAdjacentUpdates();h=h.concat(D.moved_changes);for(var I=0,F=Array.from(D.remove_changes);I<F.length;I++)_=F[I],this._removeChange(_),h=h.filter((function(e){return e!==_}))}return function(){for(var e=[],t=0,r=Array.from(h);t<r.length;t++)_=r[t],e.push(n._markAsDirty(_,"change","moved"));return e}()}},{key:"_addOp",value:function(e,t){var n={id:this.newId(),op:this._clone(e),metadata:this._clone(t)};return this.changes.push(n),this.changes.sort((function(e,t){var n=e.op.p-t.op.p;return 0!==n?n:null!=e.op.i&&null!=t.op.d?1:-1})),this._markAsDirty(n,"change","added")}},{key:"_removeChange",value:function(e){return this.changes=this.changes.filter((function(t){return t.id!==e.id})),this._markAsDirty(e,"change","removed")}},{key:"_applyOpModifications",value:function(e,t){t.sort((function(e,t){var n=t.p-e.p;return 0!==n?n:null!=e.i&&null!=t.d?1:-1}));for(var n=0,r=Array.from(t);n<r.length;n++){var a=r[n];if(null!=a.i)e=e.slice(0,a.p)+a.i+e.slice(a.p);else if(null!=a.d){if(e.slice(a.p,a.p+a.d.length)!==a.d)throw new Error("deleted content does not match. content: ".concat(JSON.stringify(e),"; modification: ").concat(JSON.stringify(a)));e=e.slice(0,a.p)+e.slice(a.p+a.d.length)}}return e}},{key:"_scanAndMergeAdjacentUpdates",value:function(){for(var e=null,t=[],n=[],r=0,a=Array.from(this.changes);r<a.length;r++){var l=a[r];if(null!=(null!=e?e.op.i:void 0)&&null!=l.op.i){var d=e.op.p+e.op.i.length,h=e.metadata.user_id,f=l.op.p,p=l.metadata.user_id;d===f&&h===p&&(t.push(l),e.op.i+=l.op.i,n.push(e))}else null!=(null!=e?e.op.d:void 0)&&null!=l.op.d&&e.op.p===l.op.p?(e.op.d+=l.op.d,t.push(l),n.push(e)):e=l}return{moved_changes:n,remove_changes:t}}},{key:"resetDirtyState",value:function(){return this._dirtyState={comment:{moved:{},removed:{},added:{}},change:{moved:{},removed:{},added:{}}}}},{key:"getDirtyState",value:function(){return this._dirtyState}},{key:"_markAsDirty",value:function(e,t,n){return this._dirtyState[t][n][e.id]=e}},{key:"_clone",value:function(e){var t={};for(var n in e){var r=e[n];t[n]=r}return t}}])&&tu(t.prototype,n),r&&tu(t,r),e}();function iu(e){return(iu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ou(e){return function(e){if(Array.isArray(e))return au(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return au(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return au(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function au(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function su(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lu(e,t,n){return t&&su(e.prototype,t),n&&su(e,n),e}function cu(e,t){return(cu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function uu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=hu(e);if(t){var a=hu(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return du(this,n)}}function du(e,t){return!t||"object"!==iu(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function hu(e){return(hu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var fu=((nu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cu(e,t)}(n,e);var t=uu(n);function n(e,r){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(a=t.call(this)).ide=e,a.doc_id=r,a.connected=a.ide.socket.socket.connected,a.joined=!1,a.wantToBeJoined=!1,a._checkAceConsistency=function(){return a._checkConsistency(a.ace)},a._checkCMConsistency=function(){return a._checkConsistency(a.cm)},a._bindToEditorEvents(),a._bindToSocketEvents(),a}return lu(n,null,[{key:"initClass",value:function(){this.prototype.MAX_PENDING_OP_SIZE=64}},{key:"getDocument",value:function(e,t){return this.openDocs||(this.openDocs={}),this.openDocs[t]&&(sl_console.log("[getDocument] Cleaning up existing document instance for ".concat(t)),this.openDocs[t]._cleanUp()),null==this.openDocs[t]?(sl_console.log("[getDocument] Creating new document instance for ".concat(t)),this.openDocs[t]=new n(e,t)):sl_console.log("[getDocument] Returning existing document instance for ".concat(t)),this.openDocs[t]}},{key:"hasUnsavedChanges",value:function(){var e=this.openDocs||{};for(var t in e)if(e[t].hasBufferedOps())return!0;return!1}},{key:"flushAll",value:function(){var e=this;return function(){var t=[];for(var n in e.openDocs){var r=e.openDocs[n];t.push(r.flush())}return t}()}}]),lu(n,[{key:"attachToAce",value:function(e){return this.ace=e,null!=this.doc&&this.doc.attachToAce(this.ace),this.ace.getSession().getDocument().on("change",this._checkAceConsistency),this.ide.$scope.$emit("document:opened",this.doc)}},{key:"detachFromAce",value:function(){null!=this.doc&&this.doc.detachFromAce();var e=null!=this.ace?this.ace.getSession().getDocument():void 0;return null!=e&&e.off("change",this._checkAceConsistency),this.ide.$scope.$emit("document:closed",this.doc)}},{key:"attachToCM",value:function(e){return this.cm=e,null!=this.doc&&this.doc.attachToCM(this.cm),null!=this.cm&&this.cm.on("change",this._checkCMConsistency),this.ide.$scope.$emit("document:opened",this.doc)}},{key:"detachFromCM",value:function(){return null!=this.doc&&this.doc.detachFromCM(),null!=this.cm&&this.cm.off("change",this._checkCMConsistency),this.ide.$scope.$emit("document:closed",this.doc)}},{key:"submitOp",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return null!=this.doc?(e=this.doc).submitOp.apply(e,ou(Array.from(n||[]))):void 0}},{key:"_checkConsistency",value:function(e){var t=this;return setTimeout((function(){var n=null!=e?e.getValue():void 0;if(n!==(null!=t.doc?t.doc.getSnapshot():void 0))return t._onError(new Error("Editor text does not match server text"),{},n)}),0)}},{key:"getSnapshot",value:function(){return null!=this.doc?this.doc.getSnapshot():void 0}},{key:"getType",value:function(){return null!=this.doc?this.doc.getType():void 0}},{key:"getInflightOp",value:function(){return null!=this.doc?this.doc.getInflightOp():void 0}},{key:"getPendingOp",value:function(){return null!=this.doc?this.doc.getPendingOp():void 0}},{key:"getRecentAck",value:function(){return null!=this.doc?this.doc.getRecentAck():void 0}},{key:"getOpSize",value:function(e){return null!=this.doc?this.doc.getOpSize(e):void 0}},{key:"hasBufferedOps",value:function(){return null!=this.doc?this.doc.hasBufferedOps():void 0}},{key:"setTrackingChanges",value:function(e){return this.doc.track_changes=e}},{key:"getTrackingChanges",value:function(){return!!this.doc.track_changes}},{key:"setTrackChangesIdSeeds",value:function(e){return this.doc.track_changes_id_seeds=e}},{key:"_bindToSocketEvents",value:function(){var e=this;return this._onUpdateAppliedHandler=function(t){return e._onUpdateApplied(t)},this.ide.socket.on("otUpdateApplied",this._onUpdateAppliedHandler),this._onErrorHandler=function(t,n){n.doc_id===e.doc_id&&e._onError(t,n)},this.ide.socket.on("otUpdateError",this._onErrorHandler),this._onDisconnectHandler=function(t){return e._onDisconnect(t)},this.ide.socket.on("disconnect",this._onDisconnectHandler)}},{key:"_bindToEditorEvents",value:function(){var e=this;return this._unsubscribeReconnectHandler=this.ide.$scope.$on("project:joined",(function(t){return e._onReconnect(t)}))}},{key:"_unBindFromEditorEvents",value:function(){return this._unsubscribeReconnectHandler()}},{key:"_unBindFromSocketEvents",value:function(){return this.ide.socket.removeListener("otUpdateApplied",this._onUpdateAppliedHandler),this.ide.socket.removeListener("otUpdateError",this._onErrorHandler),this.ide.socket.removeListener("disconnect",this._onDisconnectHandler)}},{key:"leaveAndCleanUp",value:function(e){var t=this;return this.leave((function(n){t._cleanUp(),e&&e(n)}))}},{key:"join",value:function(e){return null==e&&(e=function(e){}),this.wantToBeJoined=!0,this._cancelLeave(),this.connected?this._joinDoc(e):(this._joinCallbacks||(this._joinCallbacks=[]),this._joinCallbacks.push(e))}},{key:"leave",value:function(e){return null==e&&(e=function(e){}),this.flush(),this.wantToBeJoined=!1,this._cancelJoin(),null!=this.doc&&this.doc.hasBufferedOps()?(sl_console.log("[leave] Doc has buffered ops, pushing callback for later"),this._leaveCallbacks||(this._leaveCallbacks=[]),this._leaveCallbacks.push(e)):this.connected?(sl_console.log("[leave] Leaving now"),this._leaveDoc(e)):(sl_console.log("[leave] Not connected, returning now"),e())}},{key:"flush",value:function(){return null!=this.doc?this.doc.flushPendingOps():void 0}},{key:"chaosMonkey",value:function(e,t){var n=this;null==e&&(e=0),null==t&&(t="a");var r=t,a=null,l=0;return this._cm=function d(){return null!=a&&a.length||(a=r.slice()+" "+new Date+"\n",(e+=Math.random()>.1?1:-2)<0&&(e=0),l=0),t=a[0],a=a.slice(1),n.ace.session.insert({row:e,column:l},t),l+=1,n._cm=setTimeout(d,100+(Math.random()<.1?1e3:0))}()}},{key:"clearChaosMonkey",value:function(){return clearTimeout(this._cm)}},{key:"pollSavedStatus",value:function(){var e,t=this.getInflightOp(),n=this.getPendingOp(),r=this.getRecentAck(),a=null!=n&&this.getOpSize(n);return null==t&&null==n?(e=!0,sl_console.log("[pollSavedStatus] no inflight or pending ops")):null!=t&&t===this.oldInflightOp?(e=!1,sl_console.log("[pollSavedStatus] inflight op is same as before")):null!=n&&r&&a<this.MAX_PENDING_OP_SIZE?(e=!0,sl_console.log("[pollSavedStatus] pending op (small with recent ack) assume ok",n,a)):(e=!1,sl_console.log("[pollSavedStatus] assuming not saved (inflightOp?: ".concat(null!=t,", pendingOp?: ").concat(null!=n,")"))),this.oldInflightOp=t,e}},{key:"_cancelLeave",value:function(){if(null!=this._leaveCallbacks)return delete this._leaveCallbacks}},{key:"_cancelJoin",value:function(){if(null!=this._joinCallbacks)return delete this._joinCallbacks}},{key:"_onUpdateApplied",value:function(e){return this.ide.pushEvent("received-update",{doc_id:this.doc_id,remote_doc_id:null!=e?e.doc:void 0,wantToBeJoined:this.wantToBeJoined,update:e,hasDoc:null!=this.doc}),null!=window.disconnectOnAck&&Math.random()<window.disconnectOnAck?(sl_console.log("Disconnecting on ack",e),void window._ide.socket.socket.disconnect()):null!=window.dropAcks&&Math.random()<window.dropAcks&&null==e.op?void sl_console.log("Simulating a lost ack",e):(null!=e?e.doc:void 0)!==this.doc_id||null==this.doc||(this.ide.pushEvent("received-update:processing",{update:e}),this.doc.processUpdateFromServerInOrder(e),this.wantToBeJoined)?void 0:this.leave()}},{key:"_onDisconnect",value:function(){return sl_console.log("[onDisconnect] disconnecting"),this.connected=!1,this.joined=!1,null!=this.doc?this.doc.updateConnectionState("disconnected"):void 0}},{key:"_onReconnect",value:function(){var e=this;if(sl_console.log("[onReconnect] reconnected (joined project)"),this.ide.pushEvent("reconnected:afterJoinProject"),this.connected=!0,this.wantToBeJoined||(null!=this.doc?this.doc.hasBufferedOps():void 0))return sl_console.log("[onReconnect] Rejoining (wantToBeJoined: ".concat(this.wantToBeJoined," OR hasBufferedOps: ").concat(null!=this.doc?this.doc.hasBufferedOps():void 0,")")),this._joinDoc((function(t){return null!=t?e._onError(t):(e.doc.updateConnectionState("ok"),e.doc.flushPendingOps(),e._callJoinCallbacks())}))}},{key:"_callJoinCallbacks",value:function(){for(var e=0,t=Array.from(this._joinCallbacks||[]);e<t.length;e++)(0,t[e])();return delete this._joinCallbacks}},{key:"_joinDoc",value:function(e){var t=this;return null==e&&(e=function(e){}),null!=this.doc?(this.ide.pushEvent("joinDoc:existing",{doc_id:this.doc_id,version:this.doc.getVersion()}),this.ide.socket.emit("joinDoc",this.doc_id,this.doc.getVersion(),{encodeRanges:!0},(function(n,r,a,l,d){return null!=n?e(n):(t.joined=!0,t.doc.catchUp(l),t._decodeRanges(d),t._catchUpRanges(null!=d?d.changes:void 0,null!=d?d.comments:void 0),e())}))):(this.ide.pushEvent("joinDoc:new",{doc_id:this.doc_id}),this.ide.socket.emit("joinDoc",this.doc_id,{encodeRanges:!0},(function(n,r,a,l,d){return null!=n?e(n):(t.joined=!0,t.ide.pushEvent("joinDoc:inited",{doc_id:t.doc_id,version:a}),t.doc=new eu(t.doc_id,r,a,t.ide.socket,t.ide.globalEditorWatchdogManager),t._decodeRanges(d),t.ranges=new ru(null!=d?d.changes:void 0,null!=d?d.comments:void 0),t._bindToShareJsDocEvents(),e())})))}},{key:"_decodeRanges",value:function(e){var t=function(e){return decodeURIComponent(escape(e))};try{for(var n=0,r=Array.from(e.changes||[]);n<r.length;n++){var a=r[n];null!=a.op.i&&(a.op.i=t(a.op.i)),null!=a.op.d&&(a.op.d=t(a.op.d))}return function(){for(var n=[],r=0,a=Array.from(e.comments||[]);r<a.length;r++){var l=a[r];null!=l.op.c?n.push(l.op.c=t(l.op.c)):n.push(void 0)}return n}()}catch(e){return console.log(e)}}},{key:"_leaveDoc",value:function(e){var t=this;return null==e&&(e=function(e){}),this.ide.pushEvent("leaveDoc",{doc_id:this.doc_id}),sl_console.log("[_leaveDoc] Sending leaveDoc request"),this.ide.socket.emit("leaveDoc",this.doc_id,(function(n){if(null!=n)return e(n);t.joined=!1;for(var r=0,a=Array.from(t._leaveCallbacks||[]);r<a.length;r++)e=a[r],sl_console.log("[_leaveDoc] Calling buffered callback",e),e(n);return delete t._leaveCallbacks,e(n)}))}},{key:"_cleanUp",value:function(){if(!this.hasBufferedOps())return n.openDocs[this.doc_id]===this?(sl_console.log("[_cleanUp] Removing self (".concat(this.doc_id,") from in openDocs")),delete n.openDocs[this.doc_id]):sl_console.log("[_cleanUp] New instance of (".concat(this.doc_id,") created. Not removing")),this._unBindFromEditorEvents(),this._unBindFromSocketEvents();sl_console.log("[_cleanUp] Document (".concat(this.doc_id,") has buffered ops, refusing to remove from openDocs"))}},{key:"_bindToShareJsDocEvents",value:function(){var e=this;return this.doc.on("error",(function(t,n){return e._onError(t,n)})),this.doc.on("externalUpdate",(function(t){return e.ide.pushEvent("externalUpdate",{doc_id:e.doc_id}),e.trigger("externalUpdate",t)})),this.doc.on("remoteop",(function(){e.ide.pushEvent("remoteop",{doc_id:e.doc_id});for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.trigger.apply(e,["remoteop"].concat(ou(Array.from(n))))})),this.doc.on("op:sent",(function(t){return e.ide.pushEvent("op:sent",{doc_id:e.doc_id,op:t}),e.trigger("op:sent")})),this.doc.on("op:acknowledged",(function(t){return e.ide.pushEvent("op:acknowledged",{doc_id:e.doc_id,op:t}),e.ide.$scope.$emit("ide:opAcknowledged",{doc_id:e.doc_id,op:t}),e.trigger("op:acknowledged")})),this.doc.on("op:timeout",(function(t){return e.ide.pushEvent("op:timeout",{doc_id:e.doc_id,op:t}),e.trigger("op:timeout"),e._onError(new Error("op timed out"),{op:t})})),this.doc.on("flush",(function(t,n,r){return e.ide.pushEvent("flush",{doc_id:e.doc_id,inflightOp:t,pendingOp:n,v:r})})),this.doc.on("change",(function(t,n,r){return e._applyOpsToRanges(t,n,r),e.ide.$scope.$emit("doc:changed",{doc_id:e.doc_id})})),this.doc.on("flipped_pending_to_inflight",(function(){return e.trigger("flipped_pending_to_inflight")})),this.doc.on("saved",(function(){return e.ide.$scope.$emit("doc:saved",{doc_id:e.doc_id})}))}},{key:"_onError",value:function _onError(e,t,n){if(null==t&&(t={}),t.doc_id=this.doc_id,sl_console.log("ShareJS error",e,t),"no project_id found on client"!==e.message){if("function"==typeof ga){var r=e.message;/^Delete component/.test(r)&&(r="Delete component does not match deleted text"),ga("send","event","error","shareJsError","".concat(r," - ").concat(this.ide.socket.socket.transport.name))}return null!=this.doc&&this.doc.clearInflightAndPendingOps(),this.trigger("error",e,t,n),this._cleanUp()}sl_console.log("ignoring error, will wait to join project")}},{key:"_applyOpsToRanges",value:function(e,t,n){var r,a=this;null==e&&(e=[]);var l,d,h=null,f=null!=n;null!=(l=null!=n?n.meta:void 0,d=function(e){return e.tc},null!=l?d(l):void 0)&&(r=this.ranges.getIdSeed(),this.ranges.setIdSeed(n.meta.tc)),f&&(null!=n.meta?n.meta.tc:void 0)?h=n.meta.user_id:f||null==this.track_changes_as||(h=this.track_changes_as),this.ranges.track_changes=null!=h;for(var p=0,y=Array.from(e);p<y.length;p++){var w=y[p];this.ranges.applyOp(w,{user_id:h})}return null!=r&&this.ranges.setIdSeed(r),f?setTimeout((function(){return a.emit("ranges:dirty")})):this.emit("ranges:dirty")}},{key:"_catchUpRanges",value:function(e,t){null==e&&(e=[]),null==t&&(t=[]),this.emit("ranges:clear"),this.ranges.changes=e,this.ranges.comments=t,this.ranges.track_changes=this.doc.track_changes;for(var n=0,r=Array.from(this.doc.getInflightOp()||[]);n<r.length;n++){var a=r[n];this.ranges.setIdSeed(this.doc.track_changes_id_seeds.inflight),this.ranges.applyOp(a,{user_id:this.track_changes_as})}for(var l=0,d=Array.from(this.doc.getPendingOp()||[]);l<d.length;l++)a=d[l],this.ranges.setIdSeed(this.doc.track_changes_id_seeds.pending),this.ranges.applyOp(a,{user_id:this.track_changes_as});return this.emit("ranges:redraw")}}]),n}(Lc)).initClass(),nu=nu);a.a.component("spellMenu",{bindings:{open:"<",top:"<",left:"<",layoutFromBottom:"<",highlight:"<",replaceWord:"&",learnWord:"&"},template:'<div\nclass="dropdown context-menu spell-check-menu"\nng-show="$ctrl.open"\nng-style="{top: $ctrl.top, left: $ctrl.left}"\nng-class="{open: $ctrl.open, \'spell-check-menu-from-bottom\': $ctrl.layoutFromBottom}"\n>\n<ul class="dropdown-menu">\n  <li ng-repeat="suggestion in $ctrl.highlight.suggestions | limitTo:8">\n    <a\n      href\n      ng-click="$ctrl.replaceWord({ highlight: $ctrl.highlight, suggestion: suggestion })"\n    >\n      {{ suggestion }}\n    </a>\n  </li>\n  <li class="divider"></li>\n  <li>\n    <a href ng-click="$ctrl.learnWord({ highlight: $ctrl.highlight })">Add to Dictionary</a>\n  </li>\n</ul>\n</div>'}),n(63);function pu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var gu=ace.require("ace/undomanager").UndoManager,mu=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.editor=t,this.onChangeSession=this.onChangeSession.bind(this),this.onChange=this.onChange.bind(this)}var t,n,r;return t=e,(n=[{key:"onChangeSession",value:function(e){e.setUndoManager(new gu)}},{key:"onChange",value:function(e){var t=this;"remote"===e.origin&&setTimeout((function(){t.editor.getSession().getUndoManager().reset()}))}}])&&pu(t.prototype,n),r&&pu(t,r),e}(),vu=[{caption:"\\begin{}",snippet:"\\begin{$1}",meta:"env",score:7.849662248028187},{caption:"\\end{}",snippet:"\\end{$1}",meta:"env",score:7.847906405228455},{caption:"\\usepackage[]{}",snippet:"\\usepackage[$1]{$2}",meta:"pkg",score:5.427890758130527},{caption:"\\item",snippet:"\\item",meta:"cmd",score:3.800886892251021},{caption:"\\item[]",snippet:"\\item[$1]",meta:"cmd",score:3.800886892251021},{caption:"\\section{}",snippet:"\\section{$1}",meta:"cmd",score:3.0952612541683835},{caption:"\\textbf{}",snippet:"\\textbf{$1}",meta:"cmd",score:2.627755982816738},{caption:"\\cite{}",snippet:"\\cite{$1}",meta:"cmd",score:2.341195220791228},{caption:"\\label{}",snippet:"\\label{$1}",meta:"cmd",score:1.897791904799601},{caption:"\\textit{}",snippet:"\\textit{$1}",meta:"cmd",score:1.6842996195493385},{caption:"\\includegraphics[]{}",snippet:"\\includegraphics[$1]{$2}",meta:"cmd",score:1.4595731795525781},{caption:"\\documentclass[]{}",snippet:"\\documentclass[$1]{$2}",meta:"cmd",score:1.4425339817971206},{caption:"\\documentclass{}",snippet:"\\documentclass{$1}",meta:"cmd",score:1.4425339817971206},{caption:"\\ref{}",snippet:"\\ref{$1}",meta:"cross-reference",score:.014379554883991673},{caption:"\\frac{}{}",snippet:"\\frac{$1}{$2}",meta:"cmd",score:1.4341091141105058},{caption:"\\subsection{}",snippet:"\\subsection{$1}",meta:"cmd",score:1.3890912739512353},{caption:"\\hline",snippet:"\\hline",meta:"cmd",score:1.3209538327406387},{caption:"\\caption{}",snippet:"\\caption{$1}",meta:"cmd",score:1.2569477427490174},{caption:"\\centering",snippet:"\\centering",meta:"cmd",score:1.1642881814937829},{caption:"\\vspace{}",snippet:"\\vspace{$1}",meta:"cmd",score:.9533807826673939},{caption:"\\title{}",snippet:"\\title{$1}",meta:"cmd",score:.9202908262245683},{caption:"\\author{}",snippet:"\\author{$1}",meta:"cmd",score:.8973590434087177},{caption:"\\author[]{}",snippet:"\\author[$1]{$2}",meta:"cmd",score:.8973590434087177},{caption:"\\maketitle",snippet:"\\maketitle",meta:"cmd",score:.7504160124360846},{caption:"\\textwidth",snippet:"\\textwidth",meta:"cmd",score:.7355328080889112},{caption:"\\newcommand{}{}",snippet:"\\newcommand{$1}{$2}",meta:"cmd",score:.7264891987129375},{caption:"\\newcommand{}[]{}",snippet:"\\newcommand{$1}[$2]{$3}",meta:"cmd",score:.7264891987129375},{caption:"\\date{}",snippet:"\\date{$1}",meta:"cmd",score:.7225518453076786},{caption:"\\emph{}",snippet:"\\emph{$1}",meta:"cmd",score:.7060308784832261},{caption:"\\textsc{}",snippet:"\\textsc{$1}",meta:"cmd",score:.6926466355384758},{caption:"\\multicolumn{}{}{}",snippet:"\\multicolumn{$1}{$2}{$3}",meta:"cmd",score:.5473606021405326},{caption:"\\input{}",snippet:"\\input{$1}",meta:"cmd",score:.4966021927742672},{caption:"\\alpha",snippet:"\\alpha",meta:"cmd",score:.49520006391384913},{caption:"\\in",snippet:"\\in",meta:"cmd",score:.4716039670146658},{caption:"\\mathbf{}",snippet:"\\mathbf{$1}",meta:"cmd",score:.4682018419466319},{caption:"\\right",snippet:"\\right",meta:"cmd",score:.4299239459457309},{caption:"\\left",snippet:"\\left",meta:"cmd",score:.42937815279867964},{caption:"\\sum",snippet:"\\sum",meta:"cmd",score:.42607994509619934},{caption:"\\chapter{}",snippet:"\\chapter{$1}",meta:"cmd",score:.422097569591803},{caption:"\\par",snippet:"\\par",meta:"cmd",score:.413853376001159},{caption:"\\lambda",snippet:"\\lambda",meta:"cmd",score:.39389600578684125},{caption:"\\subsubsection{}",snippet:"\\subsubsection{$1}",meta:"cmd",score:.3727781330132016},{caption:"\\bibitem{}",snippet:"\\bibitem{$1}",meta:"cmd",score:.3689547570562042},{caption:"\\bibitem[]{}",snippet:"\\bibitem[$1]{$2}",meta:"cmd",score:.3689547570562042},{caption:"\\text{}",snippet:"\\text{$1}",meta:"cmd",score:.3608680734736821},{caption:"\\setlength{}{}",snippet:"\\setlength{$1}{$2}",meta:"cmd",score:.354445763583904},{caption:"\\mathcal{}",snippet:"\\mathcal{$1}",meta:"cmd",score:.35084018920966636},{caption:"\\newpage",snippet:"\\newpage",meta:"cmd",score:.3277033727934986},{caption:"\\renewcommand{}{}",snippet:"\\renewcommand{$1}{$2}",meta:"cmd",score:.3267437011085663},{caption:"\\theta",snippet:"\\theta",meta:"cmd",score:.3210417159232142},{caption:"\\hspace{}",snippet:"\\hspace{$1}",meta:"cmd",score:.3147206476372336},{caption:"\\beta",snippet:"\\beta",meta:"cmd",score:.3061799530337638},{caption:"\\texttt{}",snippet:"\\texttt{$1}",meta:"cmd",score:.3019066753744355},{caption:"\\times",snippet:"\\times",meta:"cmd",score:.2957960629411553},{caption:"\\color{}",snippet:"\\color{$1}",meta:"cmd",score:.2864294797053033},{caption:"\\mu",snippet:"\\mu",meta:"cmd",score:.27635652476799255},{caption:"\\bibliography{}",snippet:"\\bibliography{$1}",meta:"cmd",score:.2659628337907604},{caption:"\\linewidth",snippet:"\\linewidth",meta:"cmd",score:.2639498312518439},{caption:"\\delta",snippet:"\\delta",meta:"cmd",score:.2620578600722735},{caption:"\\sigma",snippet:"\\sigma",meta:"cmd",score:.25940147926344487},{caption:"\\pi",snippet:"\\pi",meta:"cmd",score:.25920934567729714},{caption:"\\hat{}",snippet:"\\hat{$1}",meta:"cmd",score:.25264309033778715},{caption:"\\bibliographystyle{}",snippet:"\\bibliographystyle{$1}",meta:"cmd",score:.25122317941387773},{caption:"\\small",snippet:"\\small",meta:"cmd",score:.2447632045426295},{caption:"\\LaTeX",snippet:"\\LaTeX",meta:"cmd",score:.2334089308452787},{caption:"\\cdot",snippet:"\\cdot",meta:"cmd",score:.23029085545522762},{caption:"\\footnote{}",snippet:"\\footnote{$1}",meta:"cmd",score:.2253056071787701},{caption:"\\newtheorem{}{}",snippet:"\\newtheorem{$1}{$2}",meta:"cmd",score:.215689795055434},{caption:"\\Delta",snippet:"\\Delta",meta:"cmd",score:.21386475063892618},{caption:"\\tau",snippet:"\\tau",meta:"cmd",score:.21236188205859796},{caption:"\\hfill",snippet:"\\hfill",meta:"cmd",score:.2058248088519886},{caption:"\\leq",snippet:"\\leq",meta:"cmd",score:.20498894440637172},{caption:"\\footnotesize",snippet:"\\footnotesize",meta:"cmd",score:.2038592081252624},{caption:"\\large",snippet:"\\large",meta:"cmd",score:.20377416734108866},{caption:"\\sqrt{}",snippet:"\\sqrt{$1}",meta:"cmd",score:.20240160977404634},{caption:"\\epsilon",snippet:"\\epsilon",meta:"cmd",score:.2005136761359043},{caption:"\\Large",snippet:"\\Large",meta:"cmd",score:.1987771081149759},{caption:"\\rho",snippet:"\\rho",meta:"cmd",score:.1959287380541684},{caption:"\\omega",snippet:"\\omega",meta:"cmd",score:.19326783415115262},{caption:"\\mathrm{}",snippet:"\\mathrm{$1}",meta:"cmd",score:.19117752976172653},{caption:"\\boldsymbol{}",snippet:"\\boldsymbol{$1}",meta:"cmd",score:.18137737738638837},{caption:"\\gamma",snippet:"\\gamma",meta:"cmd",score:.17940276535431304},{caption:"\\clearpage",snippet:"\\clearpage",meta:"cmd",score:.1789117552185788},{caption:"\\infty",snippet:"\\infty",meta:"cmd",score:.17837290019711305},{caption:"\\phi",snippet:"\\phi",meta:"cmd",score:.17405809173097808},{caption:"\\partial",snippet:"\\partial",meta:"cmd",score:.17168102367966637},{caption:"\\include{}",snippet:"\\include{$1}",meta:"cmd",score:.1547080054979312},{caption:"\\address{}",snippet:"\\address{$1}",meta:"cmd",score:.1525055392611109},{caption:"\\quad",snippet:"\\quad",meta:"cmd",score:.15242755832392743},{caption:"\\paragraph{}",snippet:"\\paragraph{$1}",meta:"cmd",score:.152074250347974},{caption:"\\varepsilon",snippet:"\\varepsilon",meta:"cmd",score:.05411564201390573},{caption:"\\zeta",snippet:"\\zeta",meta:"cmd",score:.023330249803752954},{caption:"\\eta",snippet:"\\eta",meta:"cmd",score:.11088718379889091},{caption:"\\vartheta",snippet:"\\vartheta",meta:"cmd",score:.0025822992078068712},{caption:"\\iota",snippet:"\\iota",meta:"cmd",score:.0024774003791525486},{caption:"\\kappa",snippet:"\\kappa",meta:"cmd",score:.04887876299369008},{caption:"\\nu",snippet:"\\nu",meta:"cmd",score:.09206962821059342},{caption:"\\xi",snippet:"\\xi",meta:"cmd",score:.06496042899265699},{caption:"\\varpi",snippet:"\\varpi",meta:"cmd",score:.0007039358167790341},{caption:"\\varrho",snippet:"\\varrho",meta:"cmd",score:.0011279491613898612},{caption:"\\varsigma",snippet:"\\varsigma",meta:"cmd",score:.0010424880711234978},{caption:"\\upsilon",snippet:"\\upsilon",meta:"cmd",score:.00420715572598688},{caption:"\\varphi",snippet:"\\varphi",meta:"cmd",score:.03351251516668212},{caption:"\\chi",snippet:"\\chi",meta:"cmd",score:.043373492287805675},{caption:"\\psi",snippet:"\\psi",meta:"cmd",score:.09994508706163642},{caption:"\\Gamma",snippet:"\\Gamma",meta:"cmd",score:.04801549269801977},{caption:"\\Theta",snippet:"\\Theta",meta:"cmd",score:.038090902146599444},{caption:"\\Lambda",snippet:"\\Lambda",meta:"cmd",score:.032206594305977686},{caption:"\\Xi",snippet:"\\Xi",meta:"cmd",score:.01060997225400494},{caption:"\\Pi",snippet:"\\Pi",meta:"cmd",score:.021264671817473237},{caption:"\\Sigma",snippet:"\\Sigma",meta:"cmd",score:.05769642802079917},{caption:"\\Upsilon",snippet:"\\Upsilon",meta:"cmd",score:.00032875192955749566},{caption:"\\Phi",snippet:"\\Phi",meta:"cmd",score:.0538724950042562},{caption:"\\Psi",snippet:"\\Psi",meta:"cmd",score:.03056589143021648},{caption:"\\Omega",snippet:"\\Omega",meta:"cmd",score:.09490387997853639}];function yu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wu(e,t,n){return t&&bu(e.prototype,t),n&&bu(e,n),e}var _u=function(){function e(t,n){yu(this,e),this.doc=t,this.prefix=n}return wu(e,null,[{key:"initClass",value:function(){this.prototype.commandRegex=/\\([a-zA-Z]{2,})/}}]),wu(e,[{key:"parse",value:function(){var e,t,n,r=null;t="undefined"!=typeof window&&null!==window?window._ide:void 0,n=function(e){return e.browserIsSafari},(null!=t?n(t):void 0)&&(r=5e3);for(var a=[],l=[],d={},h=0;e=this.nextCommand();){if(h+=1,r&&h>r)return a;for(var f=this.doc,p=0;this.consumeArgument("[","]");)p++;for(var y=0;this.consumeArgument("{","}");)y++;var w="".concat(e,"\\").concat(p,"\\").concat(y);null!=this.prefix&&"\\".concat(e)===this.prefix?l.push([e,p,y]):null==d[w]&&(d[w]=!0,a.push([e,p,y])),this.doc=f}if(l.length>1){var _=l.sort((function(e,t){return e[1]+e[2]<t[1]+t[2]}))[0];a.push(_)}return a}},{key:"nextCommand",value:function(){var e=this.doc.search(this.commandRegex);if(-1===e)return!1;var t=this.doc.match(this.commandRegex)[1];return this.doc=this.doc.substr(e+t.length+1),t}},{key:"consumeWhitespace",value:function(){var e=this.doc.match(/^[ \t\n]*/m)[0];return this.doc=this.doc.substr(e.length)}},{key:"consumeArgument",value:function(e,t){if(this.consumeWhitespace(),this.doc[0]===e){for(var n=1,r=1;r>0&&n<this.doc.length;)this.doc[n]===e?r++:this.doc[n]===t&&r--,n++;return 0===r&&(this.doc=this.doc.substr(n),!0)}return!1}}]),e}();_u.initClass();var Cu=function(){function e(t){yu(this,e),this.metadataManager=t}return wu(e,[{key:"getCompletions",value:function(e,t,n,r,a){for(var l={},h=0,f=Array.from(vu);h<f.length;h++){var p=f[h];l[p.caption.match(/\w+/)[0]]=!0}var y=this.metadataManager.getAllPackages(),w=[];for(var _ in y)for(var C=y[_],S=0,k=Array.from(C);S<k.length;S++)p=k[S],w.push(p),l[p.caption.match(/\w+/)[0]]=!0;for(var x=t.getValue(),E=new _u(x,r).parse(),A=[],T=0,R=Array.from(E);T<R.length;T++){var O=R[T];if(!l[O[0]]){var M="\\".concat(O[0]),P=M===r?99:50;p=M;var L=1;d.a.times(O[1],(function(){return p+="[${".concat(L,"}]"),M+="[]",L++})),d.a.times(O[2],(function(){return p+="{${".concat(L,"}}"),M+="{}",L++})),A.push({caption:M,snippet:p,meta:"cmd",score:P})}}return a(null,A=A.concat(vu,w))}},{key:"loadCommandsFromDoc",value:function(e){var t=new _u(e);return this.commands=t.parse()}},{key:"getSuggestions",value:function(e){var t=d.a.filter(this.commands,(function(t){return t[0].slice(0,e.length)===e}));return d.a.map(t,(function(t){var n,r,a="\\".concat(e),l="";d.a.times(t[1],(function(){return l+="[]"})),d.a.times(t[2],(function(){return l+="{}"}));var h=t[0].slice(e.length);return 0===t[1]+t[2]?(r=h,n=""):(r=h+l[0],n=l.slice(1)),{base:a,completion:h+l,completionBeforeCursor:r,completionAfterCursor:n}}))}}]),e}();var Su=["abstract","align","align*","equation","equation*","gather","gather*","multline","multline*","split","verbatim","quote","center"],ku={all:Su.concat(["array","figure","tabular","table","list","enumerate","itemize","frame","thebibliography"]),withoutSnippets:Su};function xu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Eu=Array.from(ku.withoutSnippets).map((function(e){return{caption:"\\begin{".concat(e,"}..."),snippet:"\\begin{".concat(e,"}\n\t$1\n\\end{").concat(e,"}"),meta:"env"}}));Eu=Eu.concat([{caption:"\\begin{array}...",snippet:"\\begin{array}{${1:cc}}\n\t$2 & $3 \\\\\\\\\n\t$4 & $5\n\\end{array}",meta:"env"},{caption:"\\begin{figure}...",snippet:"\\begin{figure}\n\t\\centering\n\t\\includegraphics{$1}\n\t\\caption{${2:Caption}}\n\t\\label{${3:fig:my_label}}\n\\end{figure}",meta:"env"},{caption:"\\begin{tabular}...",snippet:"\\begin{tabular}{${1:c|c}}\n\t$2 & $3 \\\\\\\\\n\t$4 & $5\n\\end{tabular}",meta:"env"},{caption:"\\begin{table}...",snippet:"\\begin{table}[$1]\n\t\\centering\n\t\\begin{tabular}{${2:c|c}}\n\t\t$3 & $4 \\\\\\\\\n\t\t$5 & $6\n\t\\end{tabular}\n\t\\caption{${7:Caption}}\n\t\\label{${8:tab:my_label}}\n\\end{table}",meta:"env"},{caption:"\\begin{list}...",snippet:"\\begin{list}\n\t\\item $1\n\\end{list}",meta:"env"},{caption:"\\begin{enumerate}...",snippet:"\\begin{enumerate}\n\t\\item $1\n\\end{enumerate}",meta:"env"},{caption:"\\begin{itemize}...",snippet:"\\begin{itemize}\n\t\\item $1\n\\end{itemize}",meta:"env"},{caption:"\\begin{frame}...",snippet:"\\begin{frame}{${1:Frame Title}}\n\t$2\n\\end{frame}",meta:"env"}]);var Au={caption:"\\begin{document}...",snippet:"\\begin{document}\n$1\n\\end{document}",meta:"env"},Tu={caption:"\\begin{thebibliography}...",snippet:"\\begin{thebibliography}{$1}\n\\bibitem{$2}\n$3\n\\end{thebibliography}",meta:"env"};Eu.push(Au);var $u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"getCompletions",value:function(e,t,n,r,a){var l,h=t.getValue(),f=function(e){for(var t,n=/^\\newenvironment{(\w+)}.*$/gm,r=[],a=0;t=n.exec(e);)if(r.push({name:t[1],whitespace:null}),(a+=1)>=1e3)return r;return r}(h),p=function(e){for(var t,n=/^([\t ]*)\\begin{(\w+)}.*\n([\t ]*)/gm,r=[],a=0;t=n.exec(e);){var l=t[3].replace(t[1]||"","");if(!Array.from(ku.all).includes(t[2])&&"document"!==t[2]&&(r.push({name:t[2],whitespace:l}),(a+=1)>=1e3))return r;n.lastIndex=t.index+1}return r}(h);null!==/^\\begin{document}/m.exec(h)?-1!==(l=Eu.indexOf(Au))&&Eu.splice(l,1):Eu.push(Au),function(e){return null!==/^\\begin{thebibliography}/m.exec(e)}(h)?-1!==(l=Eu.indexOf(Tu))&&Eu.splice(l,1):Eu.push(Tu);for(var y={},w=0,_=Array.from(f);w<_.length;w++){var C=_[w];y[C.name]=C}for(var S=0,k=Array.from(p);S<k.length;S++){var x=k[S];y[x.name]=x}var E=d.a.values(y);return a(null,Eu.concat(E.map((function(e){return{caption:"\\begin{".concat(e.name,"}..."),snippet:"\\begin{".concat(e.name,"}\n").concat(e.whitespace||"","$0\n\\end{").concat(e.name,"}"),meta:"env"}}))).concat(E.map((function(e){return{caption:"\\end{".concat(e.name,"}"),value:"\\end{".concat(e.name,"}"),meta:"env"}}))))}}])&&xu(t.prototype,n),r&&xu(t,r),e}();function Ru(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ou=["inputenc","graphicx","amsmath","geometry","amssymb","hyperref","babel","color","xcolor","url","natbib","fontenc","fancyhdr","amsfonts","booktabs","amsthm","float","tikz","caption","setspace","multirow","array","multicol","titlesec","enumitem","ifthen","listings","blindtext","subcaption","times","bm","subfigure","algorithm","fontspec","biblatex","tabularx","microtype","etoolbox","parskip","calc","verbatim","mathtools","epsfig","wrapfig","lipsum","cite","textcomp","longtable","textpos","algpseudocode","enumerate","subfig","pdfpages","epstopdf","latexsym","lmodern","pifont","ragged2e","rotating","dcolumn","xltxtra","marvosym","indentfirst","xspace","csquotes","xparse","changepage","soul","xunicode","comment","mathrsfs","tocbibind","lastpage","algorithm2e","pgfplots","lineno","graphics","algorithmic","fullpage","mathptmx","todonotes","ulem","tweaklist","moderncvstyleclassic","collection","moderncvcompatibility","gensymb","helvet","siunitx","adjustbox","placeins","colortbl","appendix","makeidx","supertabular","ifpdf","framed","aliascnt","layaureo","authblk"],Mu=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.metadataManager=t}var t,n,r;return t=e,(n=[{key:"getCompletions",value:function(e,t,n,r,a){for(var l=Object.keys(this.metadataManager.getAllPackages()),d=[],h=0,f=Array.from(Ou);h<f.length;h++){var p=f[h];Array.from(l).includes(p)||d.push({caption:"\\usepackage{".concat(p,"}"),snippet:"\\usepackage{".concat(p,"}"),meta:"pkg"})}return d.push({caption:"\\usepackage{}",snippet:"\\usepackage{$1}",meta:"pkg",score:70}),a(null,d)}}])&&Ru(t.prototype,n),r&&Ru(t,r),e}(),Pu=(n(408),ace.require("ace/range").Range),Lu={getLastCommandFragment:function(e){var t;return(t=Lu.getLastCommandFragmentIndex(e))>-1?e.slice(t):null},getLastCommandFragmentIndex:function(e){var t;return(t=e.replace(/\[([^\]]*)\]/g,(function(e){return Array(e.length+1).join(".")})).match(/(\\[^\\]*)$/))?t.index:-1},getCommandNameFromFragment:function(e){return t=null!=e?e.match(/\\(\w+)\{/):void 0,n=function(e){return e[1]},null!=t?n(t):void 0;var t,n},getContext:function(e,t){var n=new Pu(t.row,0,t.row,t.column),r=e.getSession().getTextRange(n),a=Lu.getLastCommandFragment(r),l=Lu.getCommandNameFromFragment(a),d=new Pu(t.row,t.column,t.row,99999);return{lineUpToCursor:r,commandFragment:a,commandName:l,lineBeyondCursor:e.getSession().getTextRange(d)}}},Du=Lu;function Iu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,l=void 0;try{for(var d,h=e[Symbol.iterator]();!(r=(d=h.next()).done)&&(n.push(d.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==h.return||h.return()}finally{if(a)throw l}}return n}(e,t)||ju(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fu(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=ju(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,d=!0,h=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return d=e.done,e},e:function(e){h=!0,l=e},f:function(){try{d||null==n.return||n.return()}finally{if(h)throw l}}}}function ju(e,t){if(e){if("string"==typeof e)return Nu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Nu(e,t):void 0}}function Nu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Bu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var zu=ace.require("ace/range").Range,Hu=ace.require("ace/snippets").snippetManager,Uu=function(){function e(t,n,r,a,l,d,h){var f=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$scope=t,this.editor=n,this.element=r,this.metadataManager=a,this.graphics=l,this.preamble=d,this.files=h,this.monkeyPatchAutocomplete(),this.$scope.$watch("autoComplete",(function(e){e?f.enable():f.disable()}));var p=function(e){f.onChange(e)};this.editor.on("changeSession",(function(e){e.oldSession.off("change",p),e.session.on("change",p)}))}var t,n,r;return t=e,(n=[{key:"enable",value:function(){var e=this;this.editor.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!1});var t=new Cu(this.metadataManager),n=new $u,r=new Mu(this.metadataManager,Du),a=this.graphics,l=this.preamble,d=this.files,h={getCompletions:function(e,t,n,r,d){var h=Du.getContext(e,n).commandFragment;if(h){var f=h.match(/^~?\\(includegraphics(?:\[.*])?){([^}]*, *)?(\w*)/);if(f){var p,y=f[1],w=l.getGraphicsPaths(),_=[],C=Fu(a.getGraphicsFiles());try{for(C.s();!(p=C.n()).done;){var S,k=p.value.path,x=Fu(w);try{for(x.s();!(S=x.n()).done;){var E=S.value;if(0===k.indexOf(E)){k=k.slice(E.length);break}}}catch(e){x.e(e)}finally{x.f()}_.push({caption:"\\".concat(y,"{").concat(k,"}"),value:"\\".concat(y,"{").concat(k,"}"),meta:"graphic",score:50})}}catch(e){C.e(e)}finally{C.f()}d(null,_)}}}},f=this.metadataManager,p={getCompletions:function(t,n,r,a,l){var h=Du.getContext(t,r).commandFragment;if(h){var f=h.match(/^\\(input|include){(\w*)/);if(f){var p,y=f[1],w=[],_=Fu(d.getTeXFiles());try{for(_.s();!(p=_.n()).done;){var C=p.value;if(C.id!==e.$scope.docId&&!C.deleted&&C.path){var S=C.path,k=S.replace(/(.+)\.tex$/i,"$1");w.push({caption:"\\".concat(y,"{").concat(S,"}"),value:"\\".concat(y,"{").concat(k,"}"),meta:"file",score:50})}}}catch(e){_.e(e)}finally{_.f()}l(null,w)}}}},y={getCompletions:function(e,t,n,r,a){var l=Du.getContext(e,n).commandFragment;if(l){var d=l.match(/^~?\\([a-zA-Z]*ref){([^}]*, *)?(\w*)/);if(d){var h=d[1],p=[];"ref"!==h&&p.push({caption:"\\".concat(h,"{}"),snippet:"\\".concat(h,"{}"),meta:"cross-reference",score:60});var y,w=Fu(f.getAllLabels());try{for(w.s();!(y=w.n()).done;){var _=y.value;p.push({caption:"\\".concat(h,"{").concat(_,"}"),value:"\\".concat(h,"{").concat(_,"}"),meta:"cross-reference",score:50})}}catch(e){w.e(e)}finally{w.f()}a(null,p)}}}},w=this.$scope.$root._references,_={getCompletions:function(e,t,n,r,a){var l=Du.getContext(e,n).commandFragment;if(l){var d=l.match(/^~?\\([a-z]*cite[a-z]*(?:\[.*])?){([^}]*, *)?(\w*)/);if(d){var h=Iu(d,3),f=(h[0],h[1]),p=h[2];null==p&&(p="");var y=p.length>8?"…,":p,_=[];_.push({caption:"\\".concat(f,"{}"),snippet:"\\".concat(f,"{}"),meta:"reference",score:60}),w.keys&&w.keys.length>0?(w.keys.forEach((function(e){null!=e&&_.push({caption:"\\".concat(f,"{").concat(y).concat(e,"}"),value:"\\".concat(f,"{").concat(p).concat(e,"}"),meta:"reference",score:50})})),a(null,_)):a(null,_)}}}};this.editor.completers=[t,n,r,_,y,h,p]}},{key:"disable",value:function(){return this.editor.setOptions({enableBasicAutocompletion:!1,enableSnippets:!1})}},{key:"onChange",value:function(e){var t,n=this,r=this.editor.getCursorPosition(),a=e.end,l=Du.getContext(this.editor,a),d=l.lineUpToCursor,h=l.commandFragment;if(!((t=d.indexOf("%"))>-1&&"\\"!==d[t-1])){var f="\\"===d.slice(-1),p=d.slice(-2);if(!/^\\[^a-zA-Z]$/.test(p)){"remote"!==e.origin&&"insert"===e.action&&a.row===r.row&&a.column===r.column+1&&((null!=h?h.length:void 0)>2||f)&&setTimeout((function(){n.editor.execCommand("startAutocomplete")}),0);var y=e.lines[0].match(/\\(\w+){}/);return"insert"===e.action&&y&&y[1]&&/(begin|end|[a-zA-Z]*ref|usepackage|[a-z]*cite[a-z]*|input|include)/.test(y[1])?setTimeout((function(){n.editor.execCommand("startAutocomplete")}),0):void 0}this.editor.completer&&this.editor.completer.detach()}}},{key:"monkeyPatchAutocomplete",value:function(){var e=this,t=ace.require("ace/autocomplete").Autocomplete,n=ace.require("ace/autocomplete/util");null==t.prototype._insertMatch&&(t.prototype._insertMatch=t.prototype.insertMatch,t.prototype.insertMatch=function(e){var n=this.editor,r=n.getCursorPosition(),a=new zu(r.row,r.column,r.row,r.column+1),l=n.session.getTextRange(a);if(/^\\\w+(\[[\w\\,=. ]*\])?{/.test(this.completions.filterText)&&"}"===l&&n.session.remove(a),null==e){var h=this.completions,f=this.popup;(e=f.getData(f.getRow())).completer={insertMatch:function(e,t){var n,r=Fu(e.selection.getAllRanges());try{for(r.s();!(n=r.n()).done;){a=n.value;var l=d.a.clone(a),f=d.a.clone(a),p=e.getSession().getTextRange(new zu(a.start.row,0,a.start.row,a.start.column)),y=Du.getLastCommandFragmentIndex(p);-1!==y?l.start.column=y:l.start.column-=h.filterText.length,e.session.remove(l);var w=e.getSession().getTextRange(new zu(f.start.row,f.start.column,f.end.row,99999));if(w){var _=w.match(/^([a-zA-Z0-9]+)\{/);if(_){var C=_[1];f.end.column+=C.length-h.filterText.length,e.session.remove(f),null!=t.snippet&&(t.snippet=t.snippet.replace(/[{[].*[}\]]/,"")),null!=t.caption&&(t.caption=t.caption.replace(/[{[].*[}\]]/,"")),null!=t.value&&(t.value=t.value.replace(/[{[].*[}\]]/,""))}var S=w.match(/^([\w._-]+)\}(.*)/);if(S){var k=S[1];S[2]&&(f.end.column=f.start.column+k.length+1),e.session.remove(f)}}}}catch(e){r.e(e)}finally{r.f()}t.snippet?Hu.insertSnippet(e,t.snippet):e.execCommand("insertstring",t.value||t)}}}t.prototype._insertMatch.call(this,e)},t.startCommand={name:"startAutocomplete",exec:function(n){var r;n.completer||(n.completer=new t),n.completer.autoInsert=!1,n.completer.autoSelect=!0,n.completer.showPopup(n),n.completer.cancelContextMenu();var a=$(null!=n.completer.popup?n.completer.popup.container:void 0);if(a.css({"font-size":e.$scope.fontSize+"px"}),r=n.completer.completions&&n.completer.completions.filtered){var l=d.a.max(r.map((function(e){return e.caption.length}))),h=d.a.max(r.map((function(e){return e.meta.length}))),f=n.renderer.characterWidth,p=Math.max(Math.min(Math.round(l*f+h*f+5*f),700),280);a.css({width:"".concat(p,"px")})}0===r.length&&n.completer.detach()},bindKey:"Ctrl-Space|Ctrl-Shift-Space|Alt-Space"}),n.retrievePrecedingIdentifier=function(e,t,n){for(var r=0,a=t-1;a<=0;a++)if("\n"===e[a]){r=a+1;break}var l=e.slice(r,t);return Du.getLastCommandFragment(l)||""}}}])&&Bu(t.prototype,n),r&&Bu(t,r),e}();n(722);function Wu(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Vu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vu(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,d=!0,h=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return d=e.done,e},e:function(e){h=!0,l=e},f:function(){try{d||null==n.return||n.return()}finally{if(h)throw l}}}}function Vu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function qu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Gu=new RegExp("\\\\(label|[a-z]{0,16}ref|usepackage|begin|end|[a-z]{0,16}cite|input|include|includegraphics)(\\[[^\\]]*\\])?\\{[^}]*\\}","g"),Ku=/\\?(?:['A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D])+/g,Yu=function(){function e(t,n,r,a,l){var d=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.onChange=this.onChange.bind(this),this.onSessionChange=this.onSessionChange.bind(this),this.onContextMenu=this.onContextMenu.bind(this),this.onScroll=this.onScroll.bind(this),this.learnWord=this.learnWord.bind(this),this.$scope=t,this.$http=r,this.$q=a,this.adapter=l,this.$scope.spellMenu={open:!1,top:"0px",left:"0px",suggestions:[]},this.inProgressRequest=null,this.changedLines=[],this.firstCheck=!0,this.$scope.$watch("spellCheckLanguage",(function(e,t){if(e!==t&&null!=t)return d.reInitForLangChange()})),this.$scope.replaceWord=this.adapter.replaceWord,this.$scope.learnWord=this.learnWord,this.cache=n.get("spellCheck-cache")||n("spellCheck-cache",{capacity:15e3}),this.selectedHighlightContents=null,$(document).on("click",(function(e){if(!window._ide.browserIsSafari||!e.ctrlKey)return 3!==e.which&&d.closeContextMenu(),!0}))}var t,n,r;return t=e,(n=[{key:"init",value:function(){this.changedLines=Array(this.adapter.getLineCount()).fill(!0),this.firstCheck=!0,this.isSpellCheckEnabled()&&this.runSpellCheckSoon(500)}},{key:"reInitForLangChange",value:function(){this.adapter.highlightedWordManager.reset(),this.init()}},{key:"isSpellCheckEnabled",value:function(){return!(!this.$scope.spellCheck||!this.$scope.spellCheckLanguage||""===this.$scope.spellCheckLanguage)}},{key:"onChange",value:function(e){var t=this;this.isSpellCheckEnabled()&&(this.$scope.$applyAsync((function(){t.selectedHighlightContents&&t.selectedHighlightContents!==t.adapter.getSelectionContents()&&t.closeContextMenu()})),this.markLinesAsUpdated(this.adapter.normalizeChangeEvent(e)),this.adapter.highlightedWordManager.clearHighlightTouchingRange(e),this.runSpellCheckSoon(500))}},{key:"onSessionChange",value:function(){this.adapter.highlightedWordManager.reset(),null!=this.inProgressRequest&&this.inProgressRequest.abort(),this.isSpellCheckEnabled()&&this.runSpellCheckSoon(500)}},{key:"onContextMenu",value:function(e){this.closeContextMenu(),this.openContextMenu(e)}},{key:"onScroll",value:function(){this.isSpellCheckEnabled()&&this.runSpellCheckSoon(500),this.closeContextMenu()}},{key:"openContextMenu",value:function(e){var t=this,n=this.adapter.getCoordsFromContextMenuEvent(e),r=this.adapter.getHighlightFromCoords(n),a=this.adapter.isContextMenuEventOnBottomHalf(e);r&&(this.adapter.preventContextMenuEventDefault(e),this.adapter.selectHighlightedWord(r),this.$scope.$applyAsync((function(){t.selectedHighlightContents=t.adapter.getSelectionContents(),t.$scope.spellMenu={open:!0,top:n.y+"px",left:n.x+"px",layoutFromBottom:a,highlight:r}})))}},{key:"closeContextMenu",value:function(){var e=this;(null!=this.$scope?this.$scope.spellMenu:void 0)&&!1!==this.$scope.spellMenu.open&&(this.selectedHighlightContents=null,this.$scope.$applyAsync((function(){e.$scope.spellMenu.open=!1})))}},{key:"learnWord",value:function(e){this.apiRequest("/learn",{word:e.word}),this.adapter.highlightedWordManager.removeWord(e.word);var t=this.$scope.spellCheckLanguage;this.cache.put("".concat(t,":").concat(e.word),!0)}},{key:"markLinesAsUpdated",value:function(e){var t=this,n=e.start,r=e.end;"insert"===e.action?(this.changedLines[n.row]=!0,function(){for(var e=r.row-n.row;e--;)t.changedLines.splice(n.row,0,!0)}()):"remove"===e.action&&(this.changedLines[n.row]=!0,function(){for(var e=r.row-n.row;e--;)t.changedLines.splice(n.row+1,1)}())}},{key:"runSpellCheckSoon",value:function(e){var t=this;null==e&&(e=1e3),null!=this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout((function(){delete t.timeoutId,t.runSpellCheck()}),e)}},{key:"runSpellCheck",value:function(){var e,t,n,r,a=this,l=this.getRowNumsToCheck(),d=this.$scope.spellCheckLanguage,h=this.getWords(l),f=h.words,p=h.positions,y=[],w={},_=[],C=[];for(t=e=0;e<f.length;e++,t=e){r=f[t],n="".concat(d,":").concat(r),null==w[n]&&(w[n]=this.cache.get(n));var S=w[n];null==S?(_.push(f[t]),C.push(p[t])):!0===S||y.push({column:p[t].column,row:p[t].row,word:r,suggestions:S})}p=C;var k=function(e){null==a.timeoutId&&(a.firstCheck=!1,l.forEach((function(e){a.changedLines[e]=!1,a.adapter.highlightedWordManager.clearRow(e)})),e.map((function(e){return a.adapter.highlightedWordManager.addHighlight(e)})))};(f=_).length?this.inProgressRequest=this.apiRequest("/check",{language:d,words:f},(function(e,l){if(delete a.inProgressRequest,null!=e||null==l||null==l.misspellings)return null;var h,_=[],C=Wu(l.misspellings);try{for(C.s();!(h=C.n()).done;){var S=h.value;r=f[S.index];var x=p[S.index];_[S.index]=!0,y.push({column:x.column,row:x.row,word:r,suggestions:S.suggestions}),n="".concat(d,":").concat(r),w[n]||(a.cache.put(n,S.suggestions),w[n]=!0)}}catch(e){C.e(e)}finally{C.f()}for(t=0;t<f.length;t++)r=f[t],_[t]||(n="".concat(d,":").concat(r),w[n]||(a.cache.put(n,!0),w[n]=!0));k(y)})):k(y)}},{key:"apiRequest",value:function(e,t,n){null==n&&(n=function(e,t){console.error(e)}),t.token=window.user.id,t._csrf=window.csrfToken;var r=this.$q.defer(),a={timeout:r.promise};return this.$http.post("/spelling".concat(e),t,a).then((function(e){return n(null,e.data)})).catch((function(e){return n(new Error("api failure"))})),{abort:function(){return r.resolve()}}}},{key:"getWords",value:function(e){for(var t=this.adapter.getLinesByRows(e),n=[],r=[],a=0;a<t.length;a++){var l,d=t[a],h=e[a];for(d=this.blankOutBlacklistedCommands(d),Ku.lastIndex=0;l=Ku.exec(d);){var f=l[0];"'"===f[0]&&(f=f.slice(1)),"'"===f[f.length-1]&&(f=f.slice(0,-1)),r.push({row:h,column:l.index}),n.push(f)}}return{words:n,positions:r}}},{key:"getRowNumsToCheck",value:function(){var e=this.adapter.getFirstVisibleRowNum(),t=this.adapter.getLastVisibleRowNum(),n=e,r=t;if(this.firstCheck){var a=this.adapter.getLineCount()-1,l=t-e+1;n=Math.max(0,e-2*l),r=Math.min(t+2*l,a)}return this.changedLines.reduce((function(e,t,a){return t&&a>=n&&a<=r&&e.push(a),e}),[])}},{key:"blankOutBlacklistedCommands",value:function(e){return e.replace(Gu,(function(e){return Array(e.length+1).join(".")}))}}])&&qu(t.prototype,n),r&&qu(t,r),e}();function Xu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ju(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Qu=ace.require("ace/range").Range,Zu=function e(t,n,r){Ju(this,e),this.markerId=t,this.range=n,this.word=r.word,this.suggestions=r.suggestions},ed=function(){function e(t){Ju(this,e),this.editor=t,this.reset()}var t,n,r;return t=e,(n=[{key:"reset",value:function(){var e=this;return null!=this.highlights&&this.highlights.forEach((function(t){return e.editor.getSession().removeMarker(t.markerId)})),this.highlights=[]}},{key:"addHighlight",value:function(e){var t=this.editor.getSession(),n=t.getDocument(),r=new Qu;r.start=n.createAnchor({row:e.row,column:e.column}),r.end=n.createAnchor({row:e.row,column:e.column+e.word.length}),r.end.$insertRight=!0;var a=t.addMarker(r,"spelling-highlight","text",!1);return this.highlights.push(new Zu(a,r,e))}},{key:"removeHighlight",value:function(e){return this.editor.getSession().removeMarker(e.markerId),this.highlights=this.highlights.filter((function(t){return t!==e}))}},{key:"removeWord",value:function(e){var t=this;return this.highlights.filter((function(t){return t.word===e})).forEach((function(e){return t.removeHighlight(e)}))}},{key:"clearRow",value:function(e){var t=this;return this.highlights.filter((function(t){return t.range.start.row===e})).forEach((function(e){return t.removeHighlight(e)}))}},{key:"findHighlightWithinRange",value:function(e){var t=this;return d.a.find(this.highlights,(function(n){return t._doesHighlightOverlapRange(n,e.start,e.end)}))}},{key:"_doesHighlightOverlapRange",value:function(e,t,n){var r=e.range.start.row,a=e.range.start.column,l=e.range.end.column,d=r<t.row||r===t.row&&l<=t.column,h=r>n.row||r===n.row&&a>=n.column;return!(d||h)}},{key:"clearHighlightTouchingRange",value:function(e){var t=this,n=d.a.find(this.highlights,(function(n){return t._doesHighlightTouchRange(n,e.start,e.end)}));if(n)return this.removeHighlight(n)}},{key:"_doesHighlightTouchRange",value:function(e,t,n){var r=e.range.start.row,a=e.range.start.column,l=e.range.end.column,d=a<=t.column&&l>=t.column,h=a<=n.column&&l>=n.column;return r===t.row&&(d||h)}}])&&Xu(t.prototype,n),r&&Xu(t,r),e}();function td(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var nd=ace.require("ace/range").Range,rd=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.replaceWord=this.replaceWord.bind(this),this.editor=t,this.highlightedWordManager=new ed(this.editor)}var t,n,r;return t=e,(n=[{key:"getLines",value:function(){return this.editor.getValue().split("\n")}},{key:"getLineCount",value:function(){return this.editor.session.getLength()}},{key:"getFirstVisibleRowNum",value:function(){return this.editor.renderer.layerConfig.firstRow}},{key:"getLastVisibleRowNum",value:function(){return this.editor.renderer.layerConfig.lastRow}},{key:"getLinesByRows",value:function(e){var t=this;return e.map((function(e){return t.editor.session.doc.getLine(e)}))}},{key:"getSelectionContents",value:function(){return this.editor.getSelectedText()}},{key:"normalizeChangeEvent",value:function(e){return e}},{key:"getCoordsFromContextMenuEvent",value:function(e){return e.domEvent.stopPropagation(),{x:e.domEvent.clientX,y:e.domEvent.clientY}}},{key:"preventContextMenuEventDefault",value:function(e){e.domEvent.preventDefault()}},{key:"getHighlightFromCoords",value:function(e){var t=this.editor.renderer.screenToTextCoordinates(e.x,e.y);return this.highlightedWordManager.findHighlightWithinRange({start:t,end:t})}},{key:"isContextMenuEventOnBottomHalf",value:function(e){var t=e.domEvent.clientY,n=e.target.container.getBoundingClientRect();return(t-n.top)/n.height>.5}},{key:"selectHighlightedWord",value:function(e){var t=e.range.start.row,n=e.range.start.column,r=e.range.end.column;this.editor.getSession().getSelection().setSelectionRange(new nd(t,n,t,r))}},{key:"replaceWord",value:function(e,t){var n=e.range.start.row,r=e.range.start.column,a=e.range.end.column;this.editor.getSession().replace(new nd(n,r,n,a),t),this.editor.focus()}}])&&td(t.prototype,n),r&&td(t,r),e}(),id=n(26);function od(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ad=ace.require("ace/range").Range,sd=function(){function e(t,n,r){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$scope=t,this.editor=n,this.element=r,this.markerIds=[],this.labels=[],this.$scope.annotationLabel={show:!1,right:"auto",left:"auto",top:"auto",bottom:"auto",backgroundColor:"black",text:""},this.$scope.updateLabels={updatesAbove:0,updatesBelow:0},this.$scope.$watch("highlights",(function(e){return a.redrawAnnotations()})),this.$scope.$watch("theme",(function(e){return a.redrawAnnotations()})),this.editor.on("mousemove",(function(e){var t=a.editor.renderer.screenToTextCoordinates(e.clientX,e.clientY);return e.position=t,a.showAnnotationLabels(t)}));var l=function(){return a.updateShowMoreLabels()};this.editor.getSession().on("changeScrollTop",l),this.$scope.$watch("text",(function(){if(a.$scope.navigateHighlights)return setTimeout((function(){return a.scrollToFirstHighlight()}),0)})),this.editor.on("changeSession",(function(e){return null!=e.oldSession&&e.oldSession.off("changeScrollTop",l),e.session.on("changeScrollTop",l),a.redrawAnnotations()})),this.$scope.gotoHighlightBelow=function(){if(null!=a.firstHiddenHighlightAfter)return a.editor.scrollToLine(a.firstHiddenHighlightAfter.end.row,!0,!1)},this.$scope.gotoHighlightAbove=function(){if(null!=a.lastHiddenHighlightBefore)return a.editor.scrollToLine(a.lastHiddenHighlightBefore.start.row,!0,!1)}}var t,n,r;return t=e,(n=[{key:"redrawAnnotations",value:function(){var e=this;this._clearMarkers(),this._clearLabels();for(var t=0,n=Array.from(this.$scope.highlights||[]);t<n.length;t++)!function(t){var n=id.a.getColorScheme(t.hue,e.element);null!=t.cursor?(e.labels.push({text:t.label,range:new ad(t.cursor.row,t.cursor.column,t.cursor.row,t.cursor.column+1),colorScheme:n,snapToStartOfRange:!0}),e._drawCursor(t,n)):null!=t.highlight?(e.labels.push({text:t.label,range:new ad(t.highlight.start.row,t.highlight.start.column,t.highlight.end.row,t.highlight.end.column),colorScheme:n}),e._drawHighlight(t,n)):null!=t.strikeThrough&&(e.labels.push({text:t.label,range:new ad(t.strikeThrough.start.row,t.strikeThrough.start.column,t.strikeThrough.end.row,t.strikeThrough.end.column),colorScheme:n}),e._drawStrikeThrough(t,n))}(n[t]);return this.updateShowMoreLabels()}},{key:"showAnnotationLabels",value:function(e){for(var t,n,r=this,a=null,l=0,d=Array.from(this.labels||[]);l<d.length;l++){var h=d[l];h.range.contains(e.row,e.column)&&(a=h)}if(null!=a){var f,p,y,w,_,C=$(this.editor.renderer.container).find(".ace_scroller");C.append(this.element.find(".annotation-label")),p=a.snapToStartOfRange?this.editor.renderer.textToScreenCoordinates(a.range.start.row,a.range.start.column):this.editor.renderer.textToScreenCoordinates(e.row,e.column);var S=C.offset(),k=C.height();p.pageX=p.pageX-S.left,p.pageY=p.pageY-S.top,p.pageY>2*this.editor.renderer.lineHeight?(_="auto",f=k-p.pageY):(_=p.pageY+this.editor.renderer.lineHeight,f="auto"),this.$scope.$apply((function(){return r.$scope.annotationLabel.text=a.text,r.$scope.annotationLabel.show=!0}));var x=this.element.find(".annotation-label");return p.pageX+x.outerWidth()<C.width()?(y=p.pageX,w="auto"):(w=0,y="auto"),this.$scope.$apply((function(){return r.$scope.annotationLabel={show:!0,left:y,right:w,bottom:f,top:_,backgroundColor:a.colorScheme.labelBackgroundColor,text:a.text}}))}if(!1!==(t=null!=this.$scope?this.$scope.annotationLabel:void 0,n=function(e){return e.show},null!=t?n(t):void 0))return this.$scope.$apply((function(){return r.$scope.annotationLabel.show=!1}))}},{key:"updateShowMoreLabels",value:function(){var e=this;if(this.$scope.navigateHighlights)return setTimeout((function(){var t=e.editor.getFirstVisibleRow(),n=e.editor.getLastVisibleRow(),r=0,a=0;e.lastHiddenHighlightBefore=null,e.firstHiddenHighlightAfter=null;for(var l=0,d=Array.from(e.$scope.highlights||[]);l<d.length;l++){var h=d[l],f=h.highlight||h.strikeThrough;null!=f&&(f.start.row<t&&(r+=1,e.lastHiddenHighlightBefore=f),f.end.row>n&&(a+=1,e.firstHiddenHighlightAfter||(e.firstHiddenHighlightAfter=f)))}return e.$scope.$apply((function(){return e.$scope.updateLabels={highlightsBefore:r,highlightsAfter:a}}))}),100)}},{key:"scrollToFirstHighlight",value:function(){var e=this;return function(){for(var t=0,n=Array.from(e.$scope.highlights||[]);t<n.length;t++){var r=n[t],a=r.highlight||r.strikeThrough;if(null!=a){e.editor.scrollToLine(a.start.row,!0,!1);break}}return[]}()}},{key:"_clearMarkers",value:function(){for(var e=0,t=Array.from(this.markerIds);e<t.length;e++){var n=t[e];this.editor.getSession().removeMarker(n)}return this.markerIds=[]}},{key:"_clearLabels",value:function(){return this.labels=[]}},{key:"_drawCursor",value:function(e,t){return this._addMarkerWithCustomStyle(new ad(e.cursor.row,e.cursor.column,e.cursor.row,e.cursor.column+1),"annotation remote-cursor",!1,"border-color: ".concat(t.cursor,";"))}},{key:"_drawHighlight",value:function(e,t){return this._addMarkerWithCustomStyle(new ad(e.highlight.start.row,e.highlight.start.column,e.highlight.end.row,e.highlight.end.column),"annotation highlight",!1,"background-color: ".concat(t.highlightBackgroundColor))}},{key:"_drawStrikeThrough",value:function(e,t){return this._addMarkerWithCustomStyle(new ad(e.strikeThrough.start.row,e.strikeThrough.start.column,e.strikeThrough.end.row,e.strikeThrough.end.column),"annotation strike-through-background",!1,"background-color: ".concat(t.strikeThroughBackgroundColor)),this._addMarkerWithCustomStyle(new ad(e.strikeThrough.start.row,e.strikeThrough.start.column,e.strikeThrough.end.row,e.strikeThrough.end.column),"annotation strike-through-foreground",!0,"color: ".concat(t.strikeThroughForegroundColor,";"))}},{key:"_addMarkerWithCustomStyle",value:function(e,t,n,r){var a;return a=n?this.editor.renderer.$markerFront:this.editor.renderer.$markerBack,this.markerIds.push(this.editor.getSession().addMarker(e,t,(function(e,n,l,d,h){return n.isMultiLine()?a.drawTextMarker(e,n,t,h,r):a.drawSingleLineMarker(e,n,"".concat(t," ace_start"),h,0,r)}),n))}}])&&od(t.prototype,n),r&&od(t,r),e}();function ld(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var cd,ud=function(){function e(t,n,r){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.storePositionAndLine=this.storePositionAndLine.bind(this),this.jumpToPositionInNewDoc=this.jumpToPositionInNewDoc.bind(this),this.onUnload=this.onUnload.bind(this),this.onCursorChange=this.onCursorChange.bind(this),this.onSyncToPdf=this.onSyncToPdf.bind(this),this.$scope=t,this.adapter=n,this.localStorage=r,this.$scope.$on("editorInit",this.jumpToPositionInNewDoc),this.$scope.$on("beforeChangeDocument",this.storePositionAndLine),this.$scope.$on("afterChangeDocument",this.jumpToPositionInNewDoc),this.$scope.$on("changeEditor",this.storePositionAndLine),this.$scope.$on("".concat(this.$scope.name,":gotoLine"),(function(e,t,n,r){if(null!=t)return setTimeout((function(){a.adapter.gotoLine(t,n),r&&a.onSyncToPdf()}),10)})),this.$scope.$on("".concat(this.$scope.name,":gotoOffset"),(function(e,t){if(null!=t)return setTimeout((function(){return a.adapter.gotoOffset(t)}),10)})),this.$scope.$on("".concat(this.$scope.name,":clearSelection"),(function(e){return a.adapter.clearSelection()}))}var t,n,r;return t=e,(n=[{key:"storePositionAndLine",value:function(){return this.storeCursorPosition(),this.storeFirstVisibleLine()}},{key:"jumpToPositionInNewDoc",value:function(){var e=this;return this.doc_id=null!=this.$scope.sharejsDoc?this.$scope.sharejsDoc.doc_id:void 0,setTimeout((function(){return e.gotoStoredPosition()}),0)}},{key:"onUnload",value:function(){return this.storeCursorPosition(),this.storeFirstVisibleLine()}},{key:"onCursorChange",value:function(){return this.emitCursorUpdateEvent()}},{key:"onSyncToPdf",value:function(){return this.$scope.$emit("cursor:".concat(this.$scope.name,":syncToPdf"))}},{key:"storeFirstVisibleLine",value:function(){if(null!=this.doc_id){var e=this.localStorage("doc.position.".concat(this.doc_id))||{};return e.firstVisibleLine=this.adapter.getEditorScrollPosition(),this.localStorage("doc.position.".concat(this.doc_id),e)}}},{key:"storeCursorPosition",value:function(){if(null!=this.doc_id){var e=this.localStorage("doc.position.".concat(this.doc_id))||{};return e.cursorPosition=this.adapter.getCursor(),this.localStorage("doc.position.".concat(this.doc_id),e)}}},{key:"emitCursorUpdateEvent",value:function(){var e=this.adapter.getCursor();return this.$scope.$emit("cursor:".concat(this.$scope.name,":update"),e)}},{key:"gotoStoredPosition",value:function(){if(null!=this.doc_id){var e=this.localStorage("doc.position.".concat(this.doc_id))||{};return this.adapter.setCursor(e),this.adapter.setEditorScrollPosition(e)}}}])&&ld(t.prototype,n),r&&ld(t,r),e}(),dd=cd={rangeToShareJs:function(e,t){for(var n=0,r=0;r<t.length;r++){var a=t[r];n+=r<e.row?a.length:e.column}return n+=e.row},changeToShareJs:function(e,t){var n=cd.rangeToShareJs(e.start,t),r=e.lines.join("\n");switch(e.action){case"insert":return{i:r,p:n};case"remove":return{d:r,p:n};default:throw new Error("unknown action: ".concat(e.action))}},shareJsOffsetToRowColumn:function(e,t){var n=0;for(n=0;n<t.length;n++){if(e<=t[n].length)break;e-=t[n].length+1}return{row:n,column:e}}};function hd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var fd=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.editor=t}var t,n,r;return t=e,(n=[{key:"getCursor",value:function(){return this.editor.getCursorPosition()}},{key:"getEditorScrollPosition",value:function(){return this.editor.getFirstVisibleRow()}},{key:"setCursor",value:function(e){return e=e.cursorPosition||{row:0,column:0},this.editor.moveCursorToPosition(e)}},{key:"setEditorScrollPosition",value:function(e){return e=e.firstVisibleLine||0,this.editor.scrollToLine(e)}},{key:"clearSelection",value:function(){return this.editor.selection.clearSelection()}},{key:"gotoLine",value:function(e,t){return this.editor.gotoLine(e,t),this.editor.scrollToLine(e,!0,!0),this.editor.focus()}},{key:"gotoOffset",value:function(e){var t=this.editor.getSession().getDocument().getAllLines(),n=dd.shareJsOffsetToRowColumn(e,t);return this.gotoLine(n.row+1,n.column)}}])&&hd(t.prototype,n),r&&hd(t,r),e}();function pd(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return gd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gd(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,d=!0,h=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return d=e.done,e},e:function(e){h=!0,l=e},f:function(){try{d||null==n.return||n.return()}finally{if(h)throw l}}}}function gd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function md(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var vd=ace.require("ace/range").Range,yd=function(){function e(t,n,r,a){var l=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._doneUpdateThisLoop=!1,this._pendingUpdates=!1,this.onChangeSession=this.onChangeSession.bind(this),this.onChangeSelection=this.onChangeSelection.bind(this),this.onCut=this.onCut.bind(this),this.onPaste=this.onPaste.bind(this),this.onResize=this.onResize.bind(this),this.tearDown=this.tearDown.bind(this),this.$scope=t,this.editor=n,this.element=r,this.adapter=a,this._scrollTimeout=null,this.changingSelection=!1,null==window.trackChangesManager&&(window.trackChangesManager=this),this.$scope.$watch("trackChanges",(function(e){null!=e&&l.setTrackChanges(e)})),this.$scope.$watch("sharejsDoc",(function(e,t){null!=e&&(null!=t&&l.disconnectFromDoc(t),l.setTrackChanges(l.$scope.trackChanges),l.connectToDoc(e))})),this.$scope.$on("comment:add",(function(e,t,n,r){l.addCommentToSelection(t,n,r)})),this.$scope.$on("comment:select_line",(function(e){l.selectLineIfNoSelection()})),this.$scope.$on("changes:accept",(function(e,t){l.acceptChangeIds(t)})),this.$scope.$on("changes:reject",(function(e,t){l.rejectChangeIds(t)})),this.$scope.$on("comment:remove",(function(e,t){l.removeCommentId(t)})),this.$scope.$on("comment:resolve_threads",(function(e,t){l.hideCommentsByThreadIds(t)})),this.$scope.$on("comment:unresolve_thread",(function(e,t){l.showCommentByThreadId(t)})),this.$scope.$on("review-panel:recalculate-screen-positions",(function(){l.recalculateReviewEntriesScreenPositions()})),this._resetCutState()}var t,n,r;return t=e,(n=[{key:"onChangeSession",value:function(e){this.clearAnnotations(),this.redrawAnnotations(),this.editor&&this.editor.session.on("changeScrollTop",this.onChangeScroll.bind(this))}},{key:"onChangeScroll",value:function(){var e=this;if(null==this._scrollTimeout)return this._scrollTimeout=setTimeout((function(){return e.recalculateVisibleEntries(),e.$scope.$apply(),e._scrollTimeout=null}),200)}},{key:"onChangeSelection",value:function(){var e=this;if(!this.changingSelection)return this.changingSelection=!0,this.$scope.$evalAsync((function(){return e.changingSelection=!1,e.updateFocus()}))}},{key:"onResize",value:function(){this.recalculateReviewEntriesScreenPositions()}},{key:"connectToDoc",value:function(e){var t=this;this.rangesTracker=e.ranges,this.setTrackChanges(this.$scope.trackChanges),e.on("ranges:dirty",(function(){t.updateAnnotations()})),e.on("ranges:clear",(function(){t.clearAnnotations()})),e.on("ranges:redraw",(function(){t.redrawAnnotations()}))}},{key:"disconnectFromDoc",value:function(e){e.off("ranges:clear"),e.off("ranges:redraw"),e.off("ranges:dirty")}},{key:"tearDown",value:function(){this.adapter.tearDown()}},{key:"setTrackChanges",value:function(e){e?null!=this.$scope.sharejsDoc&&(this.$scope.sharejsDoc.track_changes_as=window.user.id||"anonymous"):null!=this.$scope.sharejsDoc&&(this.$scope.sharejsDoc.track_changes_as=null)}},{key:"clearAnnotations",value:function(){this.adapter.clearAnnotations()}},{key:"redrawAnnotations",value:function(){for(var e=this,t=0,n=Array.from(this.rangesTracker.changes);t<n.length;t++){var r=n[t];null!=r.op.i?this.adapter.onInsertAdded(r):null!=r.op.d&&this.adapter.onDeleteAdded(r)}Array.from(this.rangesTracker.comments).map((function(t){e.isCommentResolved(t)||e.adapter.onCommentAdded(t)})),this.broadcastChange()}},{key:"updateAnnotations",value:function(){var e=this;if(!this._doneUpdateThisLoop)return this._doUpdateAnnotations(),this._doneUpdateThisLoop=!0,setTimeout((function(){e._pendingUpdates&&e._doUpdateAnnotations(),e._doneUpdateThisLoop=!1,e._pendingUpdates=!1}));this._pendingUpdates=!0}},{key:"_doUpdateAnnotations",value:function(){var e,t,n=this.rangesTracker.getDirtyState(),r=!1;for(var a in n.change.added)null!=(e=n.change.added[a]).op.i?this.adapter.onInsertAdded(e):null!=e.op.d&&this.adapter.onDeleteAdded(e);for(a in n.change.removed)null!=(e=n.change.removed[a]).op.i?this.adapter.onInsertRemoved(e):null!=e.op.d&&this.adapter.onDeleteRemoved(e);for(a in n.change.moved)e=n.change.moved[a],r=!0,this.adapter.onChangeMoved(e);for(a in n.comment.added)t=n.comment.added[a],this.isCommentResolved(t)||this.adapter.onCommentAdded(t);for(a in n.comment.removed)t=n.comment.removed[a],this.isCommentResolved(t)||this.adapter.onCommentRemoved(t);for(a in n.comment.moved)t=n.comment.moved[a],this.adapter.onCommentMoved&&!this.isCommentResolved(t)&&(r=!0,this.adapter.onCommentMoved(t));this.editor||(r=!1),this.rangesTracker.resetDirtyState(),r&&this.editor.renderer.updateBackMarkers(),this.broadcastChange()}},{key:"addComment",value:function(e,t,n){var r={c:t,p:e,t:n};this.$scope.sharejsDoc.submitOp(r)}},{key:"addCommentToSelection",value:function(e,t,n){var r=this.adapter.shareJsOffsetToRowColumn(t),a=this.adapter.shareJsOffsetToRowColumn(t+n),l=new vd(r.row,r.column,a.row,a.column),d=this.editor.session.getTextRange(l);this.addComment(t,d,e)}},{key:"isCommentResolved",value:function(e){return this.rangesTracker.resolvedThreadIds[e.op.t]}},{key:"selectLineIfNoSelection",value:function(){this.editor.selection.isEmpty()&&this.editor.selection.selectLine()}},{key:"acceptChangeIds",value:function(e){this.rangesTracker.removeChangeIds(e),this.updateAnnotations(),this.updateFocus()}},{key:"rejectChangeIds",value:function(e){var t=this,n=this.rangesTracker.getChanges(e);if(0!==n.length){n.sort((function(e,t){return t.op.p-e.op.p}));for(var r=this.editor.getSession(),a=0,l=Array.from(n);a<l.length;a++){var d=l[a];if(null!=d.op.d){var h=d.op.d,f=this.adapter.shareJsOffsetToRowColumn(d.op.p);r.$fromReject=!0,r.insert(f,h),r.$fromReject=!1}else{if(null==d.op.i)throw new Error("unknown change: ".concat(JSON.stringify(d)));var p=this.adapter.shareJsOffsetToRowColumn(d.op.p),y=this.adapter.shareJsOffsetToRowColumn(d.op.p+d.op.i.length),w=r.getDocument().getTextRange({start:p,end:y});if(w!==d.op.i)throw new Error("Op to be removed (".concat(JSON.stringify(d.op),"), does not match editor text, '").concat(w,"'"));r.$fromReject=!0,r.remove({start:p,end:y}),r.$fromReject=!1}}setTimeout((function(){return t.updateFocus()}))}}},{key:"removeCommentId",value:function(e){return this.rangesTracker.removeCommentId(e),this.updateAnnotations()}},{key:"hideCommentsByThreadIds",value:function(e){for(var t={},n=this.rangesTracker.comments||[],r=0,a=Array.from(e);r<a.length;r++)t[a[r]]=!0;var l,d=pd(n);try{for(d.s();!(l=d.n()).done;){var h=l.value;t[h.op.t]&&this.adapter.onCommentRemoved(h)}}catch(e){d.e(e)}finally{d.f()}return this.broadcastChange()}},{key:"showCommentByThreadId",value:function(e){var t,n=pd(this.rangesTracker.comments||[]);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.op.t!==e||this.isCommentResolved(r)||this.adapter.onCommentAdded(r)}}catch(e){n.e(e)}finally{n.f()}return this.broadcastChange()}},{key:"_resetCutState",value:function(){return this._cutState={text:null,comments:[],docId:null}}},{key:"onCut",value:function(){var e=this;this._resetCutState();var t=this.editor.getSelectionRange(),n=this._rangeToShareJs(t.start),r=this._rangeToShareJs(t.end);return this._cutState.text=this.editor.getSelectedText(),this._cutState.docId=this.$scope.docId,function(){for(var t=[],a=0,l=Array.from(e.rangesTracker.comments);a<l.length;a++){var d=l[a],h=d.op.p,f=h+d.op.c.length;n<=h&&f<=r?t.push(e._cutState.comments.push({offset:d.op.p-n,text:d.op.c,comment:d})):t.push(void 0)}return t}()}},{key:"onPaste",value:function(){var e=this;this.editor.once("change",(function(t){if("insert"===t.action){var n=t.lines.join("\n"),r=e._rangeToShareJs(t.start);e.$scope.sharejsDoc.on("ranges:dirty.paste",(function(){if(e.$scope.sharejsDoc.off("ranges:dirty.paste"),n===e._cutState.text&&e.$scope.docId===e._cutState.docId)for(var t=0,a=Array.from(e._cutState.comments);t<a.length;t++){var l=a[t],d=l.comment,h=l.offset,f={c:l.text,p:r+h,t:d.id};e.$scope.sharejsDoc.submitOp(f)}e._resetCutState(),e.rangesTracker.validate(e.editor.getValue())}))}}))}},{key:"checkMapping",value:function(){var e,t,n,r,a,l,d=this.editor.getSession(),h={},f=d.getMarkers();for(var p in f)r=f[p],h[p]=r;for(var y=[],w=0,_=Array.from(this.rangesTracker.changes);w<_.length;w++){var C=_[w];if(null!=this.adapter.changeIdToMarkerIdMap[C.id]){a=C.op;var S=this.adapter.changeIdToMarkerIdMap[C.id];e=S.background_marker_id,t=S.callout_marker_id,l=this.adapter.shareJsOffsetToRowColumn(a.p),null!=a.i?n=this.adapter.shareJsOffsetToRowColumn(a.p+a.i.length):null!=a.d&&(n=l),y.push({marker_id:e,start:l,end:n}),y.push({marker_id:t,start:l,end:l})}}for(var k=0,x=Array.from(this.rangesTracker.comments);k<x.length;k++){var E=x[k];if(null!=this.adapter.changeIdToMarkerIdMap[E.id]){var A=this.adapter.changeIdToMarkerIdMap[E.id];e=A.background_marker_id,t=A.callout_marker_id,l=this.adapter.shareJsOffsetToRowColumn(E.op.p),n=this.adapter.shareJsOffsetToRowColumn(E.op.p+E.op.c.length),y.push({marker_id:e,start:l,end:n}),y.push({marker_id:t,start:l,end:l})}}for(var T=0,R=Array.from(y);T<R.length;T++){var O=R[T];p=O.marker_id,l=O.start,n=O.end,r=h[p],delete h[p],r.range.start.row===l.row&&r.range.start.column===l.column&&r.range.end.row===n.row&&r.range.end.column===n.column||console.error("Change doesn't match marker anymore",{change:C,marker:r,start:l,end:n})}return function(){var e=[];for(p in h)r=h[p],/track-changes/.test(r.clazz)?e.push(console.error("Orphaned ace marker",r)):e.push(void 0);return e}()}},{key:"broadcastChange",value:function(){this.$scope.$emit("editor:track-changes:changed",this.$scope.docId)}},{key:"recalculateReviewEntriesScreenPositions",value:function(){var e=this.editor.getSession(),t=this.editor.renderer,n=this._getCurrentDocEntries()||{};for(var r in n){var a=n[r],l=this.adapter.shareJsOffsetToRowColumn(a.offset),d=e.documentToScreenPosition(l.row,l.column).row*t.lineHeight;null==a.screenPos&&(a.screenPos={}),a.screenPos.y=d,a.docPos=l}this.recalculateVisibleEntries(),this.$scope.$apply()}},{key:"recalculateVisibleEntries",value:function(){var e=this.editor.renderer.layerConfig,t=e.firstRow,n=e.lastRow,r=this._getCurrentDocEntries()||{},a=Object.keys(r).length,l=!1;for(var d in r){var h=r[d],f=h.visible;h.visible=a<100||t-20<=h.docPos.row&&h.docPos.row<=n+20,h.visible!==f&&(l=!0)}l&&this.$scope.$emit("editor:track-changes:visibility_changed")}},{key:"_getCurrentDocEntries",value:function(){var e=this.$scope.docId;return this.$scope.reviewPanel.entries[e]||{}}},{key:"updateFocus",value:function(){if(this.editor){var e=this.editor.getSelectionRange(),t=this._rangeToShareJs(e.start),n=this._rangeToShareJs(e.end),r=t!==n;this.$scope.$emit("editor:focus:changed",t,n,r)}}},{key:"_rangeToShareJs",value:function(e){var t=this.editor.getSession().getDocument().getLines(0,e.row);return dd.rangeToShareJs(e,t)}},{key:"_changeToShareJs",value:function(e){var t=this.editor.getSession().getDocument().getLines(0,e.start.row);return dd.changeToShareJs(e,t)}}])&&md(t.prototype,n),r&&md(t,r),e}();function bd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var wd=ace.require("ace/range").Range,_d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.editor=t,this.changeIdToMarkerIdMap={}}var t,n,r;return t=e,(n=[{key:"tearDown",value:function(){this.changeIdToMarkerIdMap={}}},{key:"clearAnnotations",value:function(){var e=this.editor.getSession();for(var t in this.changeIdToMarkerIdMap){var n=this.changeIdToMarkerIdMap[t];for(var r in n){var a=n[r];e.removeMarker(a)}}this.changeIdToMarkerIdMap={}}},{key:"onInsertAdded",value:function(e){var t=this.shareJsOffsetToRowColumn(e.op.p),n=this.shareJsOffsetToRowColumn(e.op.p+e.op.i.length),r=this.editor.getSession(),a=new wd(t.row,t.column,n.row,n.column),l=r.addMarker(a,"track-changes-marker track-changes-added-marker","text"),d=this.createCalloutMarker(t,"track-changes-added-marker-callout");this.changeIdToMarkerIdMap[e.id]={background_marker_id:l,callout_marker_id:d}}},{key:"onDeleteAdded",value:function(e){var t=this.shareJsOffsetToRowColumn(e.op.p),n=this.editor.getSession(),r=this.editor.renderer.$markerBack,a="track-changes-marker track-changes-deleted-marker",l=this.makeZeroWidthRange(t),d=n.addMarker(l,a,(function(e,t,n,l,d){return r.drawSingleLineMarker(e,t,"".concat(a," ace_start"),d,0,"")})),h=this.createCalloutMarker(t,"track-changes-deleted-marker-callout");this.changeIdToMarkerIdMap[e.id]={background_marker_id:d,callout_marker_id:h}}},{key:"onInsertRemoved",value:function(e){if(null!=this.changeIdToMarkerIdMap[e.id]){var t=this.changeIdToMarkerIdMap[e.id],n=t.background_marker_id,r=t.callout_marker_id;delete this.changeIdToMarkerIdMap[e.id];var a=this.editor.getSession();a.removeMarker(n),a.removeMarker(r)}}},{key:"onDeleteRemoved",value:function(e){if(null!=this.changeIdToMarkerIdMap[e.id]){var t=this.changeIdToMarkerIdMap[e.id],n=t.background_marker_id,r=t.callout_marker_id;delete this.changeIdToMarkerIdMap[e.id];var a=this.editor.getSession();a.removeMarker(n),a.removeMarker(r)}}},{key:"onChangeMoved",value:function(e){var t,n=this.shareJsOffsetToRowColumn(e.op.p);t=null!=e.op.i?this.shareJsOffsetToRowColumn(e.op.p+e.op.i.length):n,this.updateMarker(e.id,n,t)}},{key:"onCommentAdded",value:function(e){if(null==this.changeIdToMarkerIdMap[e.id]){var t=this.shareJsOffsetToRowColumn(e.op.p),n=this.shareJsOffsetToRowColumn(e.op.p+e.op.c.length),r=this.editor.getSession(),a=new wd(t.row,t.column,n.row,n.column),l=r.addMarker(a,"track-changes-marker track-changes-comment-marker","text"),d=this.createCalloutMarker(t,"track-changes-comment-marker-callout");this.changeIdToMarkerIdMap[e.id]={background_marker_id:l,callout_marker_id:d}}}},{key:"onCommentMoved",value:function(e){var t=this.shareJsOffsetToRowColumn(e.op.p),n=this.shareJsOffsetToRowColumn(e.op.p+e.op.c.length);this.updateMarker(e.id,t,n)}},{key:"onCommentRemoved",value:function(e){if(null!=this.changeIdToMarkerIdMap[e.id]){var t=this.changeIdToMarkerIdMap[e.id],n=t.background_marker_id,r=t.callout_marker_id;delete this.changeIdToMarkerIdMap[e.id];var a=this.editor.getSession();a.removeMarker(n),a.removeMarker(r)}}},{key:"updateMarker",value:function(e,t,n){if(null!=this.changeIdToMarkerIdMap[e]){var r=this.editor.getSession().getMarkers(),a=this.changeIdToMarkerIdMap[e],l=a.background_marker_id,d=a.callout_marker_id;if(null!=l&&null!=r[l]){var h=r[l];h.range.start=t,h.range.end=n}if(null!=d&&null!=r[d]){var f=r[d];f.range.start=t,f.range.end=t}}}},{key:"shareJsOffsetToRowColumn",value:function(e){var t=this.editor.getSession().getDocument().getAllLines();return dd.shareJsOffsetToRowColumn(e,t)}},{key:"createCalloutMarker",value:function(e,t){var n=this.editor.getSession(),r=this.makeZeroWidthRange(e),a=this.editor.renderer.$markerBack;return n.addMarker(r,t,(function(e,n,r,l,d){return a.drawSingleLineMarker(e,n,"track-changes-marker-callout ".concat(t," ace_start"),d,0,"width: auto; right: 0;")}))}},{key:"makeZeroWidthRange",value:function(e){var t=new wd(e.row,e.column,e.row,e.column);return t.clipRows=function(e,t){return this.isEmpty=function(){return e>this.end.row||t<this.start.row},this},t}}])&&bd(t.prototype,n),r&&bd(t,r),e}();function Cd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Sd=ace.require("ace/range").Range,kd=function(){function e(t,n,r,a){var l=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$scope=t,this.editor=n,this.element=r,this.Metadata=a,this.debouncer={};var h=function(e){if("remote"!==e.origin&&["remove","insert"].includes(e.action)){l.editor.getCursorPosition();var t=e.end,n=new Sd(t.row,0,t.row,t.column),r=l.editor.getSession().getTextRange(n);"%"!==r.trim()&&"\\"!==r.slice(0,1)||(n=new Sd(t.row,0,t.row,t.column+80),r=l.editor.getSession().getTextRange(n));var a=function(e){var t;return(t=e.match(/(\\[^\\]+)$/))?t[1]:null}(r),h=d.a.some(e.lines,(function(e){return e.match(/^\\usepackage(?:\[.{0,80}?])?{(.{0,80}?)}/)})),f=d.a.some(e.lines,(function(e){return e.match(/^\\RequirePackage(?:\[.{0,80}?])?{(.{0,80}?)}/)})),p=d.a.some(e.lines,(function(e){return e.match(/\\label{(.{0,80}?)}/)})),y=h||p||f,w="\\label{"===(null!=a?a.slice(0,7):void 0),_="\\usepackage"===(null!=a?a.slice(0,11):void 0),C="\\RequirePackage"===(null!=a?a.slice(0,15):void 0);return y||(_||w||C)?l.Metadata.scheduleLoadDocMetaFromServer(l.$scope.docId):void 0}};this.editor.on("changeSession",(function(e){return e.oldSession.off("change",h),e.session.on("change",h)}))}var t,n,r;return t=e,(n=[{key:"getAllLabels",value:function(){return this.Metadata.getAllLabels()}},{key:"getAllPackages",value:function(){return this.Metadata.getAllPackages()}}])&&Cd(t.prototype,n),r&&Cd(t,r),e}();n(724),n(725),n(726),a.a.factory("metadata",["$http","ide",function(e,t){var n={},r={documents:{}},a={state:r,onBroadcastDocMeta:function(e){if(null!=e.docId&&null!=e.meta)return r.documents[e.docId]=e.meta},onEntityDeleted:function(e,t){if("doc"===t.type)return delete r.documents[t.id]},onFileUploadComplete:function(e,t){if("doc"===t.entity_type)return a.loadDocMetaFromServer(t.entity_id)},getAllLabels:function(){return d.a.flattenDeep(function(){var e=[];for(var t in r.documents){var n=r.documents[t];e.push(n.labels)}return e}())},getAllPackages:function(){var e={};for(var t in r.documents){var n=r.documents[t];for(var a in n.packages){var l=n.packages[a];e[a]=l}}return e},loadProjectMetaFromServer:function(){return e.get("/project/".concat(window.project_id,"/metadata")).then((function(e){var t=e.data;if(t.projectMeta)return function(){var e=[];for(var n in t.projectMeta){var a=t.projectMeta[n];e.push(r.documents[n]=a)}return e}()}))},loadDocMetaFromServer:function(t){return e.post("/project/".concat(window.project_id,"/doc/").concat(t,"/metadata"),{_csrf:window.csrfToken})},scheduleLoadDocMetaFromServer:function(e){if("readOnly"!==t.$scope.permissionsLevel){var r=n[e];return null!=r&&(clearTimeout(r),delete n[e]),n[e]=setTimeout((function(){return a.loadDocMetaFromServer(e),delete n[e]}),1e3)}}};return a}]),a.a.factory("graphics",["ide",function(e){return{getGraphicsFiles:function(){var t=[];return e.fileTreeManager.forEachEntity((function(e,n,r){if("file"===e.type&&(l=null!=e?e.name:void 0,h="match",f=function(e){return e.match(/.*\.(png|jpg|jpeg|pdf|eps)/i)},null!=l&&"function"==typeof l[h]?f(l,h):void 0)){var a=d.a.clone(e);return a.path=r,t.push(a)}var l,h,f})),t}}}]);a.a.factory("preamble",["ide",function(e){var t={getPreambleText:function(){return xd(e.editorManager.getCurrentDocValue().slice(0,5e3).match(/([^]*)^\\begin\{document\}/m),(function(e){return e[1]}))||""},getGraphicsPaths:function(){for(var e,n=xd(t.getPreambleText().match(/\\graphicspath\{(.*)\}/),(function(e){return e[1]}))||"",r=[],a=/\{([^}]*)\}/g;e=a.exec(n);)r.push(e[1]);return r}};return t}]);function xd(e,t){return null!=e?t(e):void 0}var Ed;a.a.factory("files",["ide",function(e){return{getTeXFiles:function(){var t=[];return e.fileTreeManager.forEachEntity((function(e,n,r){if("doc"===e.type&&/.*\.(tex|md|txt|tikz)/.test(e.name)){var a=d.a.clone(e);a.path=r,t.push(a)}})),t}}}]);function Ad(e){return function(e){if(Array.isArray(e))return Td(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Td(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Td(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Td(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var $d=ace.require("ace/edit_session").EditSession,Rd=ace.require("ace/ext/modelist"),Od=ace.require("ace/keyboard/vim").Vim,Md=ace.require("ace/ext/searchbox");""!==window.aceBasePath?(Ed=!0,ace.config.set("basePath","".concat(window.aceBasePath))):Ed=!1,ace.config.setDefaultValue("session","useWorker",!1),null==ace.config._moduleUrl&&(ace.config._moduleUrl=ace.config.moduleUrl,ace.config.moduleUrl=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=(e=ace.config)._moduleUrl.apply(e,Ad(Array.from(n||[])));return a}),a.a.directive("aceEditor",["ide","$timeout","$compile","$rootScope","eventTracking","localStorage","$cacheFactory","metadata","graphics","preamble","files","$http","$q","$window",function(e,t,n,r,a,l,h,f,p,y,w,_,C,S){return function(e,t){$("#ace_searchbox").remove();var n=Md.SearchBox,r=n.prototype.$init;n.prototype.$init=function(){return this.element=t('<div class="ace_search right">\n<a href type="button" action="hide" class="ace_searchbtn_close">\n  <i class="fa fa-fw fa-times"></i>\n</a>\n<div class="ace_search_form">\n  <input class="ace_search_field form-control input-sm" placeholder="Search for" spellcheck="false"></input>\n  <div class="btn-group">\n    <button type="button" action="findNext" class="ace_searchbtn next btn btn-default btn-sm">\n      <i class="fa fa-chevron-down fa-fw"></i>\n    </button>\n    <button type="button" action="findPrev" class="ace_searchbtn prev btn btn-default btn-sm">\n      <i class="fa fa-chevron-up fa-fw"></i>\n    </button>\n  </div>\n</div>\n<div class="ace_replace_form">\n  <input class="ace_search_field form-control input-sm" placeholder="Replace with" spellcheck="false"></input>\n  <div class="btn-group">\n    <button type="button" action="replaceAndFindNext" class="ace_replacebtn btn btn-default btn-sm">Replace</button>\n    <button type="button" action="replaceAll" class="ace_replacebtn btn btn-default btn-sm">All</button>\n  </div>\n</div>\n<div class="ace_search_options">\n  <div class="btn-group">\n    <button action="toggleRegexpMode" class="btn btn-default btn-sm" tooltip-placement="bottom" tooltip-append-to-body="true" tooltip="RegExp Search">.*</button>\n    <button action="toggleCaseSensitive" class="btn btn-default btn-sm" tooltip-placement="bottom" tooltip-append-to-body="true" tooltip="CaseSensitive Search">Aa</button>\n    <button action="toggleWholeWords" class="btn btn-default btn-sm" tooltip-placement="bottom" tooltip-append-to-body="true" tooltip="Whole Word Search">"..."</button>\n    <button action="searchInSelection" class="btn btn-default btn-sm" tooltip-placement="bottom" tooltip-append-to-body="true" tooltip="Search Within Selection"><i class="fa fa-align-left"></i></button>\n  </div>\n  <span class="ace_search_counter"></span>\n</div>\n<div action="toggleReplace" class="hidden"></div>\n</div>')(e.$new())[0],r.apply(this)}}(r,n),{scope:{theme:"=",showPrintMargin:"=",keybindings:"=",fontSize:"=",autoComplete:"=",autoPairDelimiters:"=",sharejsDoc:"=",spellCheck:"=",spellCheckLanguage:"=",highlights:"=",text:"=",readOnly:"=",annotations:"=",navigateHighlights:"=",fileName:"=",onCtrlEnter:"=",onCtrlJ:"=",onCtrlShiftC:"=",onCtrlShiftA:"=",onSave:"=",syntaxValidation:"=",reviewPanel:"=",eventsBridge:"=",trackChanges:"=",docId:"=",rendererData:"=",lineHeight:"=",fontFamily:"="},link:function(t,n,k){var x;t.$originalApply=t.$apply,t.$apply=function(e){null==e&&(e=function(){});var t=this.$root.$$phase;return"$apply"===t||"$digest"===t?e():this.$originalApply(e)};var E=ace.edit(n.find(".ace-editor-body")[0]);E.$blockScrolling=1/0,"editor"===k.aceEditor&&e.globalEditorWatchdogManager.attachToEditor("Ace",E),E.setOption("behavioursEnabled",t.autoPairDelimiters||!1),E.setOption("wrapBehavioursEnabled",!1),t.$watch("autoPairDelimiters",(function(e){return e?E.setOption("behavioursEnabled",!0):E.setOption("behavioursEnabled",!1)})),window._debug_editors||(window._debug_editors=[]),window._debug_editors.push(E),t.name=k.aceEditor,t.spellCheck&&(x=new Yu(t,h,_,C,new rd(E)));var A=new mu(E),T=(new sd(t,E,n),new ud(t,new fd(E),l)),R=new yd(t,E,n,new _d(E)),O=new kd(t,E,n,f),M=(new Uu(t,E,n,O,p,y,w),/[\0\uD800-\uDFFF]/g);E.commands.on("exec",(function(e){e.command&&"paste"===e.command.name&&(M.lastIndex=0,e.args&&M.test(e.args.text)&&(e.args.text=e.args.text.replace(M,"�"))),e.command&&"insertstring"===e.command.name&&(M.lastIndex=0,e.args&&M.test(e.args)&&(e.args=e.args.replace(M,"�")))})),t.$watch("onSave",(function(e){if(null!=e)return Od.defineEx("write","w",e),E.commands.addCommand({name:"save",bindKey:{win:"Ctrl-S",mac:"Command-S"},exec:e,readOnly:!0}),E.commands.addCommand({name:"recompile_v1",bindKey:{win:"Ctrl-.",mac:"Ctrl-."},exec:e,readOnly:!0})})),E.commands.removeCommand("transposeletters"),E.commands.removeCommand("showSettingsMenu"),E.commands.removeCommand("foldall"),E.commands.removeCommand("toggleBlockComment"),E.commands.removeCommand("togglecomment"),E.commands.addCommand({name:"togglecomment",bindKey:{win:"Ctrl-/|Ctrl-Shift-7",mac:"Command-/|Command-Shift-/"},exec:function(e){return e.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"}),E.commands.addCommand({name:"find",bindKey:{win:"Ctrl-F",mac:"Command-F"},exec:function(e){return Md.Search(e,!0)},readOnly:!0}),E.commands.addCommand({name:"bold",bindKey:{win:"Ctrl-B",mac:"Command-B"},exec:function(e){if(e.getSelection().isEmpty())return e.insert("\\textbf{}"),e.navigateLeft(1);var t=e.getCopyText();return e.insert("\\textbf{".concat(t,"}"))},readOnly:!1}),E.commands.addCommand({name:"italics",bindKey:{win:"Ctrl-I",mac:"Command-I"},exec:function(e){if(e.getSelection().isEmpty())return e.insert("\\textit{}"),e.navigateLeft(1);var t=e.getCopyText();return e.insert("\\textit{".concat(t,"}"))},readOnly:!1}),t.$watch("onCtrlEnter",(function(e){if(null!=e)return E.commands.addCommand({name:"compile",bindKey:{win:"Ctrl-Enter",mac:"Command-Enter"},exec:function(t){return e()},readOnly:!0})})),t.$watch("onCtrlJ",(function(e){if(null!=e)return E.commands.addCommand({name:"toggle-review-panel",bindKey:{win:"Ctrl-J",mac:"Command-J"},exec:function(t){return e()},readOnly:!0})})),t.$watch("onCtrlShiftC",(function(e){if(null!=e)return E.commands.addCommand({name:"add-new-comment",bindKey:{win:"Ctrl-Shift-C",mac:"Command-Shift-C"},exec:function(t){return e()},readOnly:!0})})),t.$watch("onCtrlShiftA",(function(e){if(null!=e)return E.commands.addCommand({name:"toggle-track-changes",bindKey:{win:"Ctrl-Shift-A",mac:"Command-Shift-A"},exec:function(t){return e()},readOnly:!0})})),E.showCommandLine=function(e){if("/"===e)return Md.Search(E,!0)};var P=function(){var e=E.getSession(),t=e.selection.getCursor();return e.documentToScreenPosition(t.row,t.column).row*E.renderer.lineHeight-e.getScrollTop()};if(null!=k.resizeOn)for(var L=0,D=Array.from(k.resizeOn.split(","));L<D.length;L++){var I=D[L];t.$on(I,(function(){t.$applyAsync((function(){var e=P();E.resize();var t=P(),n=E.getSession();return n.setScrollTop(n.getScrollTop()+t-e)}))}))}t.$on("".concat(t.name,":set-scroll-size"),(function(e,t){var n=t.overflowTop,r=E.renderer.layerConfig.maxHeight,a=Math.max(t.height-r,0);return F(n,a)}));var F=function(e,t){var n=!1;if(E.renderer.scrollMargin.top!==e&&(E.renderer.scrollMargin.top=e,n=!0),E.renderer.scrollMargin.bottom!==t&&(E.renderer.scrollMargin.bottom=t,n=!0),n)return E.renderer.updateFull()};t.$watch("theme",(function(e){return E.setTheme("ace/theme/".concat(e))})),t.$watch("showPrintMargin",(function(e){return E.setShowPrintMargin(e)})),t.$watch("keybindings",(function(e){return["vim","emacs"].includes(e)?E.setKeyboardHandler("ace/keyboard/".concat(e)):E.setKeyboardHandler(null)})),t.$watch("fontSize",(function(e){return n.find(".ace_editor, .ace_content").css({"font-size":e+"px"})})),t.$watch("fontFamily",(function(e){if(null!=e)switch(e){case"monaco":return E.setOption("fontFamily",["Monaco","Menlo","Ubuntu Mono","Consolas","monospace"].join(", "));case"lucida":return E.setOption("fontFamily",'"Lucida Console", "Source Code Pro", monospace');default:return E.setOption("fontFamily",null)}})),t.$watch("lineHeight",(function(e){if(null!=e){switch(e){case"compact":E.container.style.lineHeight=1.33;break;case"normal":E.container.style.lineHeight=1.6;break;case"wide":E.container.style.lineHeight=2;break;default:E.container.style.lineHeight=1.6}return E.renderer.updateFontSize()}})),t.$watch("sharejsDoc",(function(e,n){if(null!=n&&(t.$broadcast("beforeChangeDocument"),Y(n)),null!=e&&K(e),null!=e&&null!=n)return t.$broadcast("afterChangeDocument")})),t.$watch("text",(function(e){if(null!=e)return E.setValue(e,-1),E.getSession().setUseWrapMode(!0)})),t.$watch("annotations",(function(e){return E.getSession().setAnnotations(e)})),t.$watch("readOnly",(function(e){return E.setReadOnly(!!e)})),t.$watch("syntaxValidation",(function(e){if(null!=e&&Ed)return E.getSession().setOption("useWorker",e)})),E.setOption("scrollPastEnd",!0);var j=0,N=function(){return 100===++j&&a.send("editor-interaction","multi-doc-update"),t.$emit("".concat(t.name,":change"))},B=null,z=function(e){if(null!=t.eventsBridge){var n=E.renderer.layerConfig.maxHeight;return function(){var e=E.getFirstVisibleRow();if(e!==B){B=e;var n=E.getLastVisibleRow();t.$emit("scroll:editor:update",Math.floor((e+n)/2))}}(),t.eventsBridge.emit("aceScroll",e,n)}};null!=t.eventsBridge&&(E.renderer.on("scrollbarVisibilityChanged",(function(e,n){if(null!=t.eventsBridge)return t.eventsBridge.emit("aceScrollbarVisibilityChanged",n.scrollBarV.isVisible,n.scrollBarV.width)})),t.eventsBridge.on("externalScroll",(function(e){return E.getSession().setScrollTop(e)})),t.eventsBridge.on("refreshScrollPosition",(function(){var e=E.getSession();return e.setScrollTop(e.getScrollTop()+1),e.setScrollTop(e.getScrollTop()-1)})));var H=function(e){return x.onSessionChange(),null!=e.oldSession&&e.oldSession.getDocument().off("change",x.onChange),e.session.getDocument().on("change",x.onChange),null!=e.oldSession&&e.oldSession.off("changeScrollTop",x.onScroll),e.session.on("changeScrollTop",x.onScroll)},U=function(){if(x)return E.off("changeSession",H),E.off("nativecontextmenu",x.onContextMenu)},W=function(){E.off("change",A.onChange)},V=function(e){return null!=e.oldSession&&e.oldSession.selection.off("changeCursor",T.onCursorChange),e.session.selection.on("changeCursor",T.onCursorChange)},q=function(){return T.onUnload(E.getSession())};E.on("changeSession",V),V({session:E.getSession()}),$(window).on("unload",q);var G=d.a.once((function(){return t.$broadcast("editorInit")})),K=function(e){var n,l=e.getSnapshot().split("\n"),d=E.getSession();null!=d&&d.destroy();try{if(/\.(Rtex|bbl|tikz)$/i.test(t.fileName))n="ace/mode/latex";else if(/\.(sty|cls|clo)$/.test(t.fileName))n="ace/mode/tex";else{"ace/mode/text"===(n=Rd.getModeForPath(t.fileName).mode)&&(n="ace/mode/plain_text")}}catch(e){n="ace/mode/plain_text"}return(d=new $d(l,n)).setUseWrapMode(!0),null!=t.syntaxValidation&&Ed&&!/\.bib$/.test(t.fileName)&&d.setOption("useWorker",t.syntaxValidation),E.setReadOnly(!0),E.setSession(d),d.getDocument().on("change",N),E.initing=!0,e.attachToAce(E),E.initing=!1,E.setReadOnly(t.readOnly),G(),t.readOnly||function(){if(x)x.init(),E.on("changeSession",H),H({session:E.getSession()}),E.on("nativecontextmenu",x.onContextMenu)}(),R.rangesTracker=t.sharejsDoc.ranges,R.onChangeSession(),R&&(E.on("changeSelection",R.onChangeSelection),E.on("change",R.onChangeSelection),E.on("changeSession",R.onChangeSession),E.on("cut",R.onCut),E.on("paste",R.onPaste),E.renderer.on("resize",R.onResize)),A.onChangeSession(E.getSession()),E.on("change",A.onChange),F(0,0),d.setAnnotations(t.annotations),d.on("changeScrollTop",a.editingSessionHeartbeat),angular.element(S).on("click",a.editingSessionHeartbeat),t.$on("$destroy",(function(){return angular.element(S).off("click",a.editingSessionHeartbeat)})),null!=t.eventsBridge&&d.on("changeScrollTop",z),r.hasLintingError=!1,d.on("changeAnnotation",(function(){var e=d.getAnnotations().filter((function(e){return"info"!==e.type})).length>0;if(r.hasLintingError!==e)return r.hasLintingError=e})),setTimeout((function(){return z(E.renderer.getScrollTop())})),E.focus()},Y=function(e){U(),R&&(R.tearDown(),E.off("changeSelection",R.onChangeSelection),E.off("change",R.onChangeSelection),E.off("changeSession",R.onChangeSession),E.off("cut",R.onCut),E.off("paste",R.onPaste),E.renderer.off("resize",R.onResize)),W(),e.detachFromAce(),e.off("remoteop.recordRemote");var t=E.getSession();return t.off("changeScrollTop"),t.getDocument().off("change",N)};return null!=t.rendererData&&E.renderer.on("changeCharacterSize",(function(){t.$apply((function(){return t.rendererData.lineHeight=E.renderer.lineHeight}))})),t.$watch("rendererData",(function(e){if(null!=e)return e.lineHeight=E.renderer.lineHeight})),t.$on("$destroy",(function(){if(null!=t.sharejsDoc){t.$broadcast("changeEditor"),U(),E.off("changeSession",V),$(window).off("unload",q),W(),Y(t.sharejsDoc);var e=E.getSession();return null!=e&&e.destroy(),t.eventsBridge.emit("aceScrollbarVisibilityChanged",!1,0)}})),t.$emit("".concat(t.name,":inited"),E)},template:'<div class="ace-editor-wrapper">\n<div\n  class="undo-conflict-warning alert alert-danger small"\n  ng-show="undo.show_remote_warning"\n>\n  <strong>Watch out!</strong>\n  We had to undo some of your collaborators changes before we could undo yours.\n  <a\n    href="#"\n    class="pull-right"\n    ng-click="undo.show_remote_warning = false"\n  >Dismiss</a>\n</div>\n<div class="ace-editor-body"></div>\n<spell-menu\n  open="spellMenu.open"\n  top="spellMenu.top"\n  left="spellMenu.left"\n  layout-from-bottom="spellMenu.layoutFromBottom"\n  highlight="spellMenu.highlight"\n  replace-word="replaceWord(highlight, suggestion)"\n  learn-word="learnWord(highlight)"\n></spell-menu>\n<div\n  class="annotation-label"\n  ng-show="annotationLabel.show"\n  ng-style="{\n    position: \'absolute\',\n    left:     annotationLabel.left,\n    right:    annotationLabel.right,\n    bottom:   annotationLabel.bottom,\n    top:      annotationLabel.top,\n    \'background-color\': annotationLabel.backgroundColor\n  }"\n>\n  {{ annotationLabel.text }}\n</div>\n\n<a\n  href\n  class="highlights-before-label btn btn-info btn-xs"\n  ng-show="updateLabels.highlightsBefore > 0"\n  ng-click="gotoHighlightAbove()"\n>\n  <i class="fa fa-fw fa-arrow-up"></i>\n  {{ updateLabels.highlightsBefore }} more update{{ updateLabels.highlightsBefore > 1 && "" || "s" }} above\n</a>\n\n<a\n  href\n  class="highlights-after-label btn btn-info btn-xs"\n  ng-show="updateLabels.highlightsAfter > 0"\n  ng-click="gotoHighlightBelow()"\n>\n  <i class="fa fa-fw fa-arrow-down"></i>\n  {{ updateLabels.highlightsAfter }} more update{{ updateLabels.highlightsAfter > 1 && "" || "s" }} below\n\n</a>\n</div>'}}]);var Pd;a.a.directive("toggleSwitch",(function(){return{restrict:"E",scope:{description:"@",labelFalse:"@",labelTrue:"@",ngModel:"="},template:'<fieldset class="toggle-switch">\n  <legend class="sr-only">{{description}}</legend>\n\n  <input\n    type="radio"\n    name="toggle-switch-{{$id}}"\n    class="toggle-switch-input"\n    id="toggle-switch-false-{{$id}}"\n    ng-value="false"\n    ng-model="ngModel"\n  >\n  <label for="toggle-switch-false-{{$id}}" class="toggle-switch-label">{{labelFalse}}</label>\n\n  <input\n    type="radio"\n    class="toggle-switch-input"\n    name="toggle-switch-{{$id}}"\n    id="toggle-switch-true-{{$id}}"\n    ng-value="true"\n    ng-model="ngModel"\n  >\n  <label for="toggle-switch-true-{{$id}}" class="toggle-switch-label">{{labelTrue}}</label>\n\n  <span class="toggle-switch-selection" aria-hidden="true"></span>\n</fieldset>'}})),a.a.controller("SavingNotificationController",["$scope","$interval","ide",function(e,t,n){var r;setInterval((function(){return d()}),1e3),$(window).bind("beforeunload",(function(){return r()}));var a,l=null;e.docSavingStatus={};var d=function(){var t,r=e.docSavingStatus,d=e.docSavingStatusCount,h={},f=0,p=0;for(var y in fu.openDocs){fu.openDocs[y].pollSavedStatus()||(f++,null!=r[y]?(h[y]=r[y],(t=h[y].unsavedSeconds+=1)>p&&(p=t)):h[y]={unsavedSeconds:0,doc:n.fileTreeManager.findEntityById(y)})}if(f>0&&t>15&&!l&&(l=n.showLockEditorMessageModal("Connection lost","Sorry, the connection to the server is down."),a=n.$scope.permissionsLevel,n.$scope.permissionsLevel="readOnly",l.result.finally((function(){l=null,n.$scope.permissionsLevel=a}))),l&&0===f&&(l.dismiss("connection back up"),a&&(n.$scope.permissionsLevel=a)),f||d)return e.docSavingStatus=h,e.docSavingStatusCount=f,e.$apply()};return r=function(){if(fu.hasUnsavedChanges())return"You have unsaved changes. If you leave now they will not be saved."}}]);function Ld(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Dd(e,t,n){return t&&Ld(e.prototype,t),n&&Ld(e,n),e}var Id,Fd=((Pd=function(){function e(t,n,r){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ide=t,this.editorOpenDocEpoch=0,this.$scope=n,this.localStorage=r,this.$scope.editor={sharejs_doc:null,open_doc_id:null,open_doc_name:null,opening:!0,trackChanges:!1,wantTrackChanges:!1,showRichText:this.showRichText()},this.$scope.$on("entity:selected",(function(e,t){if("history"!==a.$scope.ui.view&&"doc"===t.type)return a.openDoc(t)})),this.$scope.$on("entity:no-selection",(function(){a.$scope.$apply((function(){a.$scope.ui.view=null}))})),this.$scope.$on("entity:deleted",(function(e,t){if(a.$scope.editor.open_doc_id===t.id){if(!a.$scope.project.rootDoc_id)return void(a.$scope.ui.view=null);var n=a.ide.fileTreeManager.findEntityById(a.$scope.project.rootDoc_id);return null==n?void(a.$scope.ui.view=null):a.openDoc(n)}}));var l=!1;this.$scope.$on("file-tree:initialized",(function(){if(!l)return l=!0,a.autoOpenDoc()})),this.$scope.$on("flush-changes",(function(){return fu.flushAll()})),window.addEventListener("blur",(function(){sl_console.log("[EditorManager] forcing flush onblur"),fu.flushAll()})),this.$scope.$watch("editor.wantTrackChanges",(function(e){if(null!=e)return a._syncTrackChangesState(a.$scope.editor.sharejs_doc)}))}return Dd(e,null,[{key:"initClass",value:function(){this.prototype._syncTimeout=null}}]),Dd(e,[{key:"showRichText",value:function(){return"rich-text"===this.localStorage("editor.mode.".concat(this.$scope.project_id))}},{key:"autoOpenDoc",value:function(){var e=this.ide.localStorage("doc.open_id.".concat(this.$scope.project_id))||this.$scope.project.rootDoc_id;if(null!=e){var t=this.ide.fileTreeManager.findEntityById(e);if(null!=t)return this.openDoc(t)}}},{key:"openDocId",value:function(e,t){null==t&&(t={});var n=this.ide.fileTreeManager.findEntityById(e);if(null!=n)return this.openDoc(n,t)}},{key:"jumpToLine",value:function(e){return this.$scope.$broadcast("editor:gotoLine",e.gotoLine,e.gotoColumn,e.syncToPdf)}},{key:"openDoc",value:function(e,t){var n=this;null==t&&(t={}),sl_console.log("[openDoc] Opening ".concat(e.id)),this.$scope.ui.view="editor";var r=function(e){return n.$scope.$broadcast("doc:after-opened",{isNewDoc:e}),null!=t.gotoLine?setTimeout((function(){return n.jumpToLine(t)}),0):null!=t.gotoOffset?setTimeout((function(){return n.$scope.$broadcast("editor:gotoOffset",t.gotoOffset)}),0):void 0};return e.id!==this.$scope.editor.open_doc_id||t.forceReopen?(this.$scope.editor.open_doc_id=e.id,this.$scope.editor.open_doc_name=e.name,this.ide.localStorage("doc.open_id.".concat(this.$scope.project_id),e.id),this.ide.fileTreeManager.selectEntity(e),this.$scope.editor.opening=!0,this._openNewDocument(e,(function(t,a){if(t&&"another document was loaded"===t.message)sl_console.log("[openDoc] another document was loaded while ".concat(e.id," was loading"));else{if(null==t)return n._syncTrackChangesState(a),n.$scope.$broadcast("doc:opened"),n.$scope.$apply((function(){return n.$scope.editor.opening=!1,n.$scope.editor.sharejs_doc=a,r(!0)}));n.ide.showGenericMessageModal("Error opening document","Sorry, something went wrong opening this document. Please try again.")}}))):(this.ide.fileTreeManager.selectEntity(e),void this.$scope.$apply((function(){return r(!1)})))}},{key:"_openNewDocument",value:function(e,t){var n=this,r=this.$scope.editor.sharejs_doc,a=r&&r.doc_id,l=r&&r.hasBufferedOps();if(r&&a!==e.id||l){sl_console.log("[_openNewDocument] Leaving existing open doc..."),this._unbindFromDocumentEvents(r),this._attachErrorHandlerToDocument(e,r);var d=++this.editorOpenDocEpoch;r.leaveAndCleanUp((function(r){return r?(sl_console.log("[_openNewDocument] error leaving doc ".concat(a),r),t(r)):n.editorOpenDocEpoch!==d?(sl_console.log("[openNewDocument] editorOpenDocEpoch mismatch ".concat(n.editorOpenDocEpoch," vs ").concat(d)),t(new Error("another document was loaded"))):void n._doOpenNewDocument(e,t)}))}else this._doOpenNewDocument(e,t)}},{key:"_doOpenNewDocument",value:function(e,t){var n=this;null==t&&(t=function(e,t){}),sl_console.log("[_doOpenNewDocument] Opening...");var r=fu.getDocument(this.ide,e.id),a=++this.editorOpenDocEpoch;return r.join((function(l){return null!=l?(sl_console.log("[_doOpenNewDocument] error joining doc ".concat(e.id),l),t(l)):n.editorOpenDocEpoch!==a?(sl_console.log("[openNewDocument] editorOpenDocEpoch mismatch ".concat(n.editorOpenDocEpoch," vs ").concat(a)),r.leaveAndCleanUp(),t(new Error("another document was loaded"))):(n._bindToDocumentEvents(e,r),t(null,r))}))}},{key:"_attachErrorHandlerToDocument",value:function(e,t){var n=this;t.on("error",(function(r,a,l){var d;if(d=null!=(null!=r?r.message:void 0)?r.message:"string"==typeof r?r:"",/maxDocLength/.test(d))n.ide.showGenericMessageModal("Document Too Long","Sorry, this file is too long to be edited manually. Please upload it directly.");else{if(!/too many comments or tracked changes/.test(d))return t.off("error"),l="string"==typeof l?l:t.doc._doc.snapshot,t.doc&&t.doc.clearInflightAndPendingOps(),t.leaveAndCleanUp(),n.ide.connectionManager.disconnect({permanent:!0}),n.ide.reportError(r,a),n.$scope.editor.error_state=!0,void n.ide.showOutOfSyncModal("Out of sync","Sorry, this file has gone out of sync and we need to do a full refresh. <br> <a target='_blank' rel='noopener noreferrer' href='/learn/Kb/Editor_out_of_sync_problems'>Please see this help guide for more information</a>",l);n.ide.showGenericMessageModal("Too many comments or tracked changes","Sorry, this file has too many comments or tracked changes. Please try accepting or rejecting some existing changes, or resolving and deleting some comments.")}var h=n.$scope.$on("project:joined",(function(){n.openDoc(e,{forceReopen:!0}),h()}))}))}},{key:"_bindToDocumentEvents",value:function(e,t){var n=this;return this._attachErrorHandlerToDocument(e,t),t.on("externalUpdate",(function(e){if(!n._ignoreExternalUpdates&&("external"!==d.a.property(["meta","type"])(e)||"git-bridge"!==d.a.property(["meta","source"])(e)))return n.ide.showGenericMessageModal("Document Updated Externally","This document was just updated externally. Any recent changes you have made may have been overwritten. To see previous versions please look in the history.")}))}},{key:"_unbindFromDocumentEvents",value:function(e){return e.off()}},{key:"getCurrentDocValue",value:function(){return null!=this.$scope.editor.sharejs_doc?this.$scope.editor.sharejs_doc.getSnapshot():void 0}},{key:"getCurrentDocId",value:function(){return this.$scope.editor.open_doc_id}},{key:"startIgnoringExternalUpdates",value:function(){return this._ignoreExternalUpdates=!0}},{key:"stopIgnoringExternalUpdates",value:function(){return this._ignoreExternalUpdates=!1}},{key:"_syncTrackChangesState",value:function(e){var t,n=this;if(null!=e){null!=this._syncTimeout&&(clearTimeout(this._syncTimeout),this._syncTimeout=null);var r=this.$scope.editor.wantTrackChanges,a=e.getTrackingChanges();if(r!==a)return(t=function(){return null==e.getInflightOp()&&null==e.getPendingOp()?(e.setTrackingChanges(r),n.$scope.$apply((function(){return n.$scope.editor.trackChanges=r}))):n._syncTimeout=setTimeout(t,100)})();this.$scope.editor.trackChanges=r}}}]),e}()).initClass(),Pd=Pd);n(93),a.a.controller("OnlineUsersController",["$scope","ide",function(e,t){return e.gotoUser=function(e){if(null!=e.doc&&null!=e.row)return t.editorManager.openDoc(e.doc,{gotoLine:e.row+1})},e.userInitial=function(e){return"anonymous-user"===e.user_id?"?":e.name.slice(0,1)}}]);function jd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nd(e,t,n){return t&&jd(e.prototype,t),n&&jd(e,n),e}var Bd=((Id=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ide=t,this.$scope=n,this.$scope.onlineUsers={},this.$scope.onlineUserCursorHighlights={},this.$scope.onlineUsersArray=[],this.$scope.$on("cursor:editor:update",(function(e,t){return r.sendCursorPositionUpdate(t)})),this.$scope.$on("project:joined",(function(){return r.ide.socket.emit("clientTracking.getConnectedUsers",(function(e,t){r.$scope.onlineUsers={};for(var n=0,a=Array.from(t||[]);n<a.length;n++){var l=a[n];l.client_id!==r.ide.socket.publicId&&(r.$scope.onlineUsers[l.client_id]={id:l.client_id,user_id:l.user_id,email:l.email,name:"".concat(l.first_name," ").concat(l.last_name),doc_id:null!=l.cursorData?l.cursorData.doc_id:void 0,row:null!=l.cursorData?l.cursorData.row:void 0,column:null!=l.cursorData?l.cursorData.column:void 0})}return r.refreshOnlineUsers()}))})),this.ide.socket.on("clientTracking.clientUpdated",(function(e){if(e.id!==r.ide.socket.publicId)return r.$scope.$apply((function(){return r.$scope.onlineUsers[e.id]=e,r.refreshOnlineUsers()}))})),this.ide.socket.on("clientTracking.clientDisconnected",(function(e){return r.$scope.$apply((function(){return delete r.$scope.onlineUsers[e],r.refreshOnlineUsers()}))})),this.$scope.getHueForUserId=function(e){return id.a.getHueForUserId(e)}}return Nd(e,null,[{key:"initClass",value:function(){this.prototype.cursorUpdateInterval=500}}]),Nd(e,[{key:"refreshOnlineUsers",value:function(){for(var e in this.$scope.onlineUsersArray=[],this.$scope.onlineUsers){var t=this.$scope.onlineUsers[e];null!=t.doc_id&&(t.doc=this.ide.fileTreeManager.findEntityById(t.doc_id)),null!==t.name&&0!==t.name.trim().length||(t.email?t.name=t.email.trim():"anonymous-user"===t.user_id&&(t.name="Anonymous")),t.initial=null!=t.name?t.name[0]:void 0,t.initial&&" "!==t.initial||(t.initial="?"),this.$scope.onlineUsersArray.push(t)}for(e in this.$scope.onlineUserCursorHighlights={},this.$scope.onlineUsers){var n=this.$scope.onlineUsers[e],r=n.doc_id;null!=r&&null!=n.row&&null!=n.column&&(this.$scope.onlineUserCursorHighlights[r]||(this.$scope.onlineUserCursorHighlights[r]=[]),this.$scope.onlineUserCursorHighlights[r].push({label:n.name,cursor:{row:n.row,column:n.column},hue:id.a.getHueForUserId(n.user_id)}))}return this.$scope.onlineUsersArray.length>0?(delete this.cursorUpdateTimeout,this.cursorUpdateInterval=500):(delete this.cursorUpdateTimeout,this.cursorUpdateInterval=3e5)}},{key:"sendCursorPositionUpdate",value:function(e){var t=this;if(null!=e&&(this.$scope.currentPosition=e),null==this.cursorUpdateTimeout)return this.cursorUpdateTimeout=setTimeout((function(){var e=t.$scope.editor.open_doc_id;return t.ide.socket.emit("clientTracking.updatePosition",{row:null!=t.$scope.currentPosition?t.$scope.currentPosition.row:void 0,column:null!=t.$scope.currentPosition?t.$scope.currentPosition.column:void 0,doc_id:e}),delete t.cursorUpdateTimeout}),this.cursorUpdateInterval)}}]),e}()).initClass(),Id=Id),zd=n(13),Hd=n.n(zd),Ud=function(e){if(null==e)return"Anonymous";if(e.id===window.user.id)return"you";if(null!=e.name)return e.name;var t=[e.first_name,e.last_name].filter((function(e){return null!=e})).join(" ").trim();return""===t&&(t=e.email.split("@")[0]),null==t||""===t?"?":t};a.a.controller("HistoryListController",["$scope","$modal","ide",function(e,t,n){e.hoveringOverListSelectors=!1,e.projectUsers=[],e.$watch("project.members",(function(t){if(null!=t)return e.projectUsers=t.concat(e.project.owner)}));return e.getDisplayNameById=function(t){return Ud(function(t){return d.a.find(e.projectUsers,(function(e){return((null!=e?e._id:void 0)||(null!=e?e.id:void 0))===t}))}(t))},e.deleteLabel=function(e){return t.open({templateUrl:"historyV2DeleteLabelModalTemplate",controller:"HistoryV2DeleteLabelModalController",resolve:{labelDetails:function(){return e}}})},e.loadMore=function(){return n.historyManager.fetchNextBatchOfUpdates()},e.recalculateSelectedUpdates=function(){var t=!0,n=!1;return e.history.selection.updates=[],function(){for(var r=[],a=0,l=Array.from(e.history.updates);a<l.length;a++){var d,h=l[a];h.selectedTo&&(d=!0,t=!1),h.beforeSelection=t,h.inSelection=d,h.afterSelection=n,d&&e.history.selection.updates.push(h),h.selectedFrom?(d=!1,r.push(n=!0)):r.push(void 0)}return r}()},e.recalculateHoveredUpdates=function(){for(var t,n=!1,r=!1,a=0,l=Array.from(e.history.updates);a<l.length;a++){var d=l[a];d.hoverSelectedFrom&&(n=!0),d.hoverSelectedTo&&(r=!0)}if(n){t=!1;for(var h=0,f=Array.from(e.history.updates);h<f.length;h++)(d=f[h]).selectedTo&&(d.hoverSelectedTo=!0,t=!0),d.inHoverSelection=t,d.hoverSelectedFrom&&(t=!1)}if(r)return t=!1,function(){for(var n=[],r=0,a=Array.from(e.history.updates);r<a.length;r++)(d=a[r]).hoverSelectedTo&&(t=!0),d.inHoverSelection=t,d.selectedFrom?(d.hoverSelectedFrom=!0,n.push(t=!1)):n.push(void 0);return n}()},e.resetHoverState=function(){return function(){for(var t=[],n=0,r=Array.from(e.history.updates);n<r.length;n++){var a=r[n];delete a.hoverSelectedFrom,delete a.hoverSelectedTo,t.push(delete a.inHoverSelection)}return t}()},e.$watch("history.updates.length",(function(){return e.recalculateSelectedUpdates()}))}]);a.a.controller("HistoryListItemController",["$scope","eventTracking",function(e,t){return e.$watch("update.selectedFrom",(function(t,n){if(t){for(var r=0,a=Array.from(e.history.updates);r<a.length;r++){var l=a[r];l!==e.update&&(l.selectedFrom=!1)}return e.recalculateSelectedUpdates()}})),e.$watch("update.selectedTo",(function(t,n){if(t){for(var r=0,a=Array.from(e.history.updates);r<a.length;r++){var l=a[r];l!==e.update&&(l.selectedTo=!1)}return e.recalculateSelectedUpdates()}})),e.select=function(){return t.sendMB("history-view-change"),e.update.selectedTo=!0,e.update.selectedFrom=!0},e.mouseOverSelectedFrom=function(){return e.history.hoveringOverListSelectors=!0,e.update.hoverSelectedFrom=!0,e.recalculateHoveredUpdates()},e.mouseOutSelectedFrom=function(){return e.history.hoveringOverListSelectors=!1,e.resetHoverState()},e.mouseOverSelectedTo=function(){return e.history.hoveringOverListSelectors=!0,e.update.hoverSelectedTo=!0,e.recalculateHoveredUpdates()},e.mouseOutSelectedTo=function(){return e.history.hoveringOverListSelectors=!1,e.resetHoverState()},e.displayName=Ud}]);a.a.controller("HistoryDiffController",["$scope","$modal","ide","eventTracking",function(e,t,n,r){return e.restoreDeletedDoc=function(){return r.sendMB("history-restore-deleted"),e.history.diff.restoreInProgress=!0,n.historyManager.restoreDeletedDoc(e.history.diff.doc).then((function(t){var n=t.data;return e.history.diff.restoredDocNewId=n.doc_id,e.history.diff.restoreInProgress=!1,e.history.diff.restoreDeletedSuccess=!0}))},e.openRestoreDiffModal=function(){return r.sendMB("history-restore-modal"),t.open({templateUrl:"historyRestoreDiffModalTemplate",controller:"HistoryRestoreDiffModalController",resolve:{diff:function(){return e.history.diff}}})},e.backToEditorAfterRestore=function(){return n.editorManager.openDoc({id:e.history.diff.restoredDocNewId})}}]);var Wd;a.a.controller("HistoryRestoreDiffModalController",["$scope","$modalInstance","diff","ide","eventTracking",function(e,t,n,r,a){return e.state={inflight:!1},e.diff=n,e.restore=function(){return a.sendMB("history-restored"),e.state.inflight=!0,r.historyManager.restoreDiff(n).then((function(){return e.state.inflight=!1,t.close(),r.editorManager.openDoc(n.doc)}))},e.cancel=function(){return t.dismiss()}}]),a.a.directive("infiniteScroll",(function(){return{link:function(e,t,n,r){var a=t.find(".infinite-scroll-inner");t.css({"overflow-y":"auto"});var l=function(){return t.scrollTop()<30},d=function(){return t.scrollTop()+t.height()>=a.height()-30},h=function r(){if((t.height()>a.height()||(null!=n.infiniteScrollUpwards?l():d()))&&!e.$eval(n.infiniteScrollDisabled))return e.$eval(n.infiniteScroll).then((function(){return setTimeout((function(){return r()}),0)}))};return t.on("scroll",(function(e){return h()})),e.$watch(n.infiniteScrollInitialize,(function(e){if(e)return h()}))}}}));function Vd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qd(e,t,n){return t&&Vd(e.prototype,t),n&&Vd(e,n),e}var Gd=((Wd=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ide=t,this.$scope=n,this.reset(),this.$scope.toggleHistory=function(){return"history"===r.$scope.ui.view?r.hide():r.show()},this.$scope.$watch("history.selection.updates",(function(e){if(null!=e&&e.length>0)return r._selectDocFromUpdates(),r.reloadDiff()})),this.$scope.$on("entity:selected",(function(e,t){if("history"===r.$scope.ui.view&&"doc"===t.type)return r.$scope.history.selection.doc=t,r.reloadDiff()}))}return qd(e,null,[{key:"initClass",value:function(){this.prototype.BATCH_SIZE=10}}]),qd(e,[{key:"show",value:function(){return this.$scope.ui.view="history",this.reset()}},{key:"hide",value:function(){return this.$scope.ui.view="editor",this.$scope.$emit("entity:selected",this.ide.fileTreeManager.findSelectedEntity())}},{key:"reset",value:function(){return this.$scope.history={updates:[],nextBeforeTimestamp:null,atEnd:!1,selection:{updates:[],doc:null,range:{fromV:null,toV:null,start_ts:null,end_ts:null}},diff:null}}},{key:"autoSelectRecentUpdates",value:function(){if(0!==this.$scope.history.updates.length){this.$scope.history.updates[0].selectedTo=!0;for(var e=0,t=0;t<this.$scope.history.updates.length;t++){var n=this.$scope.history.updates[t];if(this._updateContainsUserId(n,this.$scope.user.id))break;e=t}return this.$scope.history.updates[e].selectedFrom=!0}}},{key:"fetchNextBatchOfUpdates",value:function(){var e=this,t="/project/".concat(this.ide.project_id,"/updates?min_count=").concat(this.BATCH_SIZE);return null!=this.$scope.history.nextBeforeTimestamp&&(t+="&before=".concat(this.$scope.history.nextBeforeTimestamp)),this.$scope.history.loading=!0,this.ide.$http.get(t).then((function(t){var n=t.data;return e._loadUpdates(n.updates),e.$scope.history.nextBeforeTimestamp=n.nextBeforeTimestamp,null==n.nextBeforeTimestamp&&(e.$scope.history.atEnd=!0),e.$scope.history.loading=!1}))}},{key:"reloadDiff",value:function(){var e=this,t=this.$scope.history.diff,n=this.$scope.history.selection,r=(n.updates,n.doc),a=this._calculateRangeFromSelection(),l=a.fromV,d=a.toV,h=a.start_ts,f=a.end_ts;if(null!=r&&(null==t||t.doc!==r||t.fromV!==l||t.toV!==d)){if(this.$scope.history.diff=t={fromV:l,toV:d,start_ts:h,end_ts:f,doc:r,error:!1,pathname:r.name},r.deleted)return t.deleted=!0,t.restoreInProgress=!1,t.restoreDeletedSuccess=!1,t.restoredDocNewId=null;t.loading=!0;var p="/project/".concat(this.$scope.project_id,"/doc/").concat(t.doc.id,"/diff");return null!=t.fromV&&null!=t.toV&&(p+="?from=".concat(t.fromV,"&to=").concat(t.toV)),this.ide.$http.get(p).then((function(n){var r=n.data;t.loading=!1;var a=e._parseDiff(r),l=a.text,d=a.highlights;return t.text=l,t.highlights=d})).catch((function(){return t.loading=!1,t.error=!0}))}}},{key:"restoreDeletedDoc",value:function(e){var t="/project/".concat(this.$scope.project_id,"/doc/").concat(e.id,"/restore");return this.ide.$http.post(t,{name:e.name,_csrf:window.csrfToken})}},{key:"restoreDiff",value:function(e){var t="/project/".concat(this.$scope.project_id,"/doc/").concat(e.doc.id,"/version/").concat(e.fromV,"/restore");return this.ide.$http.post(t,{_csrf:window.csrfToken})}},{key:"_parseDiff",value:function(e){for(var t=0,n=0,r=[],a="",l=e.diff||[],d=0;d<l.length;d++){var h,f,p=l[d],y=p.u||p.i||p.d;y||(y=""),a+=y;var w=y.split("\n"),_=t,C=n;w.length>1?(f=_+w.length-1,h=w[w.length-1].length):(f=_,h=C+w[0].length),t=f,n=h;var S={start:{row:_,column:C},end:{row:f,column:h}};if(null!=p.i||null!=p.d){var k=Ud(p.meta.user),x=Hd()(p.meta.end_ts).format("Do MMM YYYY, h:mm a");null!=p.i?r.push({label:"Added by ".concat(k," on ").concat(x),highlight:S,hue:id.a.getHueForUserId(null!=p.meta.user?p.meta.user.id:void 0)}):null!=p.d&&r.push({label:"Deleted by ".concat(k," on ").concat(x),strikeThrough:S,hue:id.a.getHueForUserId(null!=p.meta.user?p.meta.user.id:void 0)})}}return{text:a,highlights:r}}},{key:"_loadUpdates",value:function(e){null==e&&(e=[]);for(var t=this.$scope.history.updates[this.$scope.history.updates.length-1],n=0,r=Array.from(e);n<r.length;n++){var a=r[n];a.pathnames=[];var l=a.docs||{};for(var d in l){var h=l[d];h.entity=this.ide.fileTreeManager.findEntityById(d,{includeDeleted:!0}),a.pathnames.push(h.entity.name)}for(var f=0,p=Array.from(a.meta.users||[]);f<p.length;f++){var y=p[f];null!=y&&(y.hue=id.a.getHueForUserId(y.id))}null!=t&&Hd()(t.meta.end_ts).isSame(a.meta.end_ts,"day")||(a.meta.first_in_day=!0),a.selectedFrom=!1,a.selectedTo=!1,a.inSelection=!1,t=a}var w=0===this.$scope.history.updates.length;if(this.$scope.history.updates=this.$scope.history.updates.concat(e),w)return this.autoSelectRecentUpdates()}},{key:"_calculateRangeFromSelection",value:function(){for(var e,t,n,r=n=t=e=null,a=null!=this.$scope.history.selection.doc?this.$scope.history.selection.doc.id:void 0,l=0,d=Array.from(this.$scope.history.selection.updates||[]);l<d.length;l++){var h=d[l];for(var f in h.docs){var p=h.docs[f];if(f===a){null!=r&&null!=n?(r=Math.min(r,p.fromV),n=Math.max(n,p.toV),t=Math.min(t,h.meta.start_ts),e=Math.max(e,h.meta.end_ts)):(r=p.fromV,n=p.toV,t=h.meta.start_ts,e=h.meta.end_ts);break}}}return{fromV:r,toV:n,start_ts:t,end_ts:e}}},{key:"_selectDocFromUpdates",value:function(){for(var e,t,n={},r=0,a=Array.from(this.$scope.history.selection.updates);r<a.length;r++){var l=a[r];for(t in l.docs)e=l.docs[t],n[t]=e.entity}var d=this.$scope.history.selection.doc;if(null!=d&&null!=n[d.id]);else for(t in n){d=e=n[t];break}return this.$scope.history.selection.doc=d,this.ide.fileTreeManager.selectEntity(d)}},{key:"_updateContainsUserId",value:function(e,t){for(var n=0,r=Array.from(e.meta.users);n<r.length;n++){var a=r[n];if((null!=a?a.id:void 0)===t)return!0}return!1}}]),e}()).initClass(),Wd=Wd),Kd={POINT_IN_TIME:"point_in_time",COMPARE:"compare"},Yd=(a.a.controller("HistoryV2ListController",["$scope","$modal","ide",function(e,t,n){return e.hoveringOverListSelectors=!1,e.listConfig={showOnlyLabelled:!1},e.projectUsers=[],e.$watch("project.members",(function(t){if(null!=t)return e.projectUsers=t.concat(e.project.owner)})),e.loadMore=function(){return n.historyManager.fetchNextBatchOfUpdates()},e.handleVersionSelect=function(t){return e.$applyAsync((function(){return n.historyManager.selectVersionForPointInTime(t)}))},e.handleRangeSelect=function(t,r){return e.$applyAsync((function(){return n.historyManager.selectVersionsForCompare(t,r)}))},e.handleLabelDelete=function(e){return t.open({templateUrl:"historyV2DeleteLabelModalTemplate",controller:"HistoryV2DeleteLabelModalController",resolve:{labelDetails:function(){return e}}})}}]),a.a.controller("HistoryV2FileTreeController",["$scope","ide",function(e,t){e.handleFileSelection=function(e){t.historyManager.selectFile(e)}}]),a.a.controller("HistoryV2ToolbarController",["$scope","$modal","ide","eventTracking","waitFor",function(e,t,n,r,a){var l;e.currentUpdate=null,e.currentLabel=null,e.restoreState={inflight:!1,error:!1},e.toolbarUIConfig={showOnlyLabels:!1};var d=e.$watch("history.showOnlyLabels",(function(t){null!=t&&(e.toolbarUIConfig.showOnlyLabels=t,d())}));e.$watch("toolbarUIConfig.showOnlyLabels",(function(e,t){null!=e&&e!==t&&(e?n.historyManager.showOnlyLabels():n.historyManager.showAllUpdates())})),e.$watch("history.viewMode",(function(t,r){null!=t&&t!==r&&(e.currentUpdate=n.historyManager.getUpdateForVersion(t))})),e.$watch("history.selection.range.toV",(function(t,r){null!=t&&t!==r&&e.history.viewMode===e.HistoryViewModes.POINT_IN_TIME&&(e.currentUpdate=n.historyManager.getUpdateForVersion(t))})),e.toggleHistoryViewMode=function(){n.historyManager.toggleHistoryViewMode()},e.restoreDeletedFile=function(){var t=e.history.selection.file,a=t.pathname,d=t.deletedAtV;if(null!=a&&null!=d)return r.sendMB("history-v2-restore-deleted"),e.restoreState.inflight=!0,n.historyManager.restoreFile(d,a).then((function(e){var t=e.data;return l(t)})).catch((function(){return n.showGenericMessageModal("Sorry, something went wrong with the restore")})).finally((function(){return e.restoreState.inflight=!1}))},e.showAddLabelDialog=function(){t.open({templateUrl:"historyV2AddLabelModalTemplate",controller:"HistoryV2AddLabelModalController",resolve:{update:function(){return e.history.selection.update}}})},l=function(e){var t=e.id,r=e.type;return a((function(){return n.fileTreeManager.findEntityById(t)}),3e3).then((function(e){var t=this;"doc"===r?(n.editorManager.openDoc(e),this.ide.$timeout((function(){t.$scope.$broadcast("history:toggle")}),0)):"file"===r&&(n.binaryFilesManager.openFile(e),this.ide.$timeout((function(){t.$scope.$broadcast("history:toggle")}),0))})).catch((function(e){return console.warn(e)}))}}]),a.a.controller("HistoryV2AddLabelModalController",["$scope","$modalInstance","ide","update",function(e,t,n,r){return e.update=r,e.inputs={labelName:null},e.state={inflight:!1,error:!1},t.opened.then((function(){return e.$applyAsync((function(){return e.$broadcast("open")}))})),e.addLabelModalFormSubmit=function(){return e.state.inflight=!0,n.historyManager.labelCurrentVersion(e.inputs.labelName).then((function(n){return e.state.inflight=!1,t.close()})).catch((function(t){var n=t.data,r=t.status;return e.state.inflight=!1,e.state.error=400!==r||{message:n}}))}}]),a.a.controller("HistoryV2DeleteLabelModalController",["$scope","$modalInstance","ide","labelDetails",function(e,t,n,r){return e.labelDetails=r,e.state={inflight:!1,error:!1},e.deleteLabel=function(){return e.state.inflight=!0,n.historyManager.deleteLabel(r).then((function(n){return e.state.inflight=!1,t.close()})).catch((function(t){var n=t.data,r=t.status;return e.state.inflight=!1,e.state.error=400!==r||{message:n}}))}}]),a.a.directive("historyDraggableBoundary",(function(){return{scope:{historyDraggableBoundary:"@",historyDraggableBoundaryOnDragStart:"&",historyDraggableBoundaryOnDragStop:"&"},restrict:"A",link:function(e,t,n){t.data("selectionBoundary",{boundary:e.historyDraggableBoundary}),t.draggable({axis:"y",opacity:!1,helper:"clone",revert:!0,scroll:!0,cursor:"row-resize",start:function(t,n){n.helper.data("wasProperlyDropped",!1),e.historyDraggableBoundaryOnDragStart()},stop:function(t,n){e.historyDraggableBoundaryOnDragStop({isValidDrop:n.helper.data("wasProperlyDropped"),boundary:e.historyDraggableBoundary})}})}}})),a.a.directive("historyDroppableArea",(function(){return{scope:{historyDroppableAreaOnDrop:"&",historyDroppableAreaOnOver:"&",historyDroppableAreaOnOut:"&"},restrict:"A",link:function(e,t,n){t.droppable({accept:function(e){return".history-entry-toV-handle, .history-entry-fromV-handle"},drop:function(t,n){var r=n.draggable.data("selectionBoundary").boundary;n.helper.data("wasProperlyDropped",!0),e.historyDroppableAreaOnDrop({boundary:r})},over:function(t,n){var r=n.draggable.data("selectionBoundary").boundary;e.historyDroppableAreaOnOver({boundary:r})}})}}})),function(e,t,n){var r=this;r.$entryListViewportEl=null,r.isDragging=!1;r.onEntryLinked=function(t,n){r.rangeSelectionEnabled||t.toV!==r.selectedHistoryVersion||e.$applyAsync((function(){(function(e){var t=e.offset().top,n=t+e.outerHeight(),a=r.$entryListViewportEl.offset().top,l=a+r.$entryListViewportEl.height();return t>=a&&n<=l})(n)||r.$entryListViewportEl.scrollTop(function(e){var t=r.$entryListViewportEl.height()/2;return e.offset().top-t}(n))}))},r.handleEntrySelect=function(e){r.rangeSelectionEnabled?r.onRangeSelect({selectedToV:e.toV,selectedFromV:e.fromV}):r.onVersionSelect({version:e.toV})},r.setRangeToV=function(e){e>r.selectedHistoryRange.fromV&&r.onRangeSelect({selectedToV:e,selectedFromV:r.selectedHistoryRange.fromV})},r.setRangeFromV=function(e){e<r.selectedHistoryRange.toV&&r.onRangeSelect({selectedToV:r.selectedHistoryRange.toV,selectedFromV:e})},r.initHoveredRange=function(){r.hoveredHistoryRange={toV:r.selectedHistoryRange.toV,fromV:r.selectedHistoryRange.fromV}},r.resetHoveredRange=function(){r.hoveredHistoryRange={toV:null,fromV:null}},r.setHoveredRangeToV=function(t){t>r.hoveredHistoryRange.fromV&&e.$applyAsync((function(){return r.hoveredHistoryRange.toV=t}))},r.setHoveredRangeFromV=function(t){t<r.hoveredHistoryRange.toV&&e.$applyAsync((function(){return r.hoveredHistoryRange.fromV=t}))},r.onDraggingStart=function(){e.$applyAsync((function(){r.isDragging=!0,r.initHoveredRange()}))},r.onDraggingStop=function(t,n){e.$applyAsync((function(){r.isDragging=!1,t||("toV"===n?r.setRangeToV(r.hoveredHistoryRange.toV):"fromV"===n&&r.setRangeFromV(r.hoveredHistoryRange.fromV)),r.resetHoveredRange()}))},r.$onInit=function(){r.$entryListViewportEl=t.find("> .history-entries"),r.resetHoveredRange()}});Yd.$inject=["$scope","$element","$attrs"];a.a.component("historyEntriesList",{bindings:{entries:"<",users:"<",loadEntries:"&",loadDisabled:"<",loadInitialize:"<",isLoading:"<",currentUser:"<",freeHistoryLimitHit:"<",currentUserIsOwner:"<",rangeSelectionEnabled:"<",selectedHistoryVersion:"<?",selectedHistoryRange:"<?",onVersionSelect:"&",onRangeSelect:"&",onLabelDelete:"&"},controller:Yd,templateUrl:"historyEntriesListTpl"});var Xd=function(e,t,n){var r=this;r.displayName=Ud,r.displayNameById=function(e){return Ud(function(e){return d.a.find(r.users,(function(t){return((null!=t?t._id:void 0)||(null!=t?t.id:void 0))===e}))}(e))},r.getProjectOpDoc=function(e){return null!=e.rename?"".concat(e.rename.pathname," → ").concat(e.rename.newPathname):null!=e.add?"".concat(e.add.pathname):null!=e.remove?"".concat(e.remove.pathname):void 0},r.getUserCSSStyle=function(e){var t=(null!=e?e._id:void 0)||(null!=e?e.id:void 0),n=id.a.getHueForUserId(t)||100;return r.isEntrySelected()||r.isEntryHoverSelected()?{color:"#FFF"}:{color:"hsl(".concat(n,", 70%, 50%)")}},r.isEntrySelected=function(){return r.rangeSelectionEnabled?r.entry.toV<=r.selectedHistoryRange.toV&&r.entry.fromV>=r.selectedHistoryRange.fromV:r.entry.toV===r.selectedHistoryVersion},r.isEntryHoverSelected=function(){return r.rangeSelectionEnabled&&r.entry.toV<=r.hoveredHistoryRange.toV&&r.entry.fromV>=r.hoveredHistoryRange.fromV},r.onDraggingStart=function(){r.historyEntriesList.onDraggingStart()},r.onDraggingStop=function(e,t){return r.historyEntriesList.onDraggingStop(e,t)},r.onDrop=function(t){"toV"===t?e.$applyAsync((function(){return r.historyEntriesList.setRangeToV(r.entry.toV)})):"fromV"===t&&e.$applyAsync((function(){return r.historyEntriesList.setRangeFromV(r.entry.fromV)}))},r.onOver=function(t){"toV"===t?e.$applyAsync((function(){return r.historyEntriesList.setHoveredRangeToV(r.entry.toV)})):"fromV"===t&&e.$applyAsync((function(){return r.historyEntriesList.setHoveredRangeFromV(r.entry.fromV)}))},r.$onInit=function(){r.$entryEl=t.find("> .history-entry"),r.$entryDetailsEl=t.find(".history-entry-details"),r.$toVHandleEl=t.find(".history-entry-toV-handle"),r.$fromVHandleEl=t.find(".history-entry-fromV-handle"),r.historyEntriesList.onEntryLinked(r.entry,r.$entryEl)}};Xd.$inject=["$scope","$element","$attrs"];a.a.component("historyEntry",{bindings:{entry:"<",currentUser:"<",users:"<",rangeSelectionEnabled:"<",isDragging:"<",selectedHistoryVersion:"<?",selectedHistoryRange:"<?",hoveredHistoryRange:"<?",onSelect:"&",onLabelDelete:"&"},require:{historyEntriesList:"^historyEntriesList"},controller:Xd,templateUrl:"historyEntryTpl"});var Jd=function(e,t,n){var r=this;r.isDragging=!1,r.versionsWithLabels=[],e.$watchCollection("$ctrl.labels",(function(e){if(e){var t=d.a.groupBy(e,"version");r.versionsWithLabels=d.a.map(t,(function(e,t){return{version:parseInt(t,10),labels:e}}))}})),r.initHoveredRange=function(){r.hoveredHistoryRange={toV:r.selectedHistoryRange.toV,fromV:r.selectedHistoryRange.fromV}},r.resetHoveredRange=function(){r.hoveredHistoryRange={toV:null,fromV:null}},r.setHoveredRangeToV=function(e){e>=r.hoveredHistoryRange.fromV&&(r.hoveredHistoryRange.toV=e)},r.setHoveredRangeFromV=function(e){e<=r.hoveredHistoryRange.toV&&(r.hoveredHistoryRange.fromV=e)},r.isVersionSelected=function(e){return r.rangeSelectionEnabled?e<=r.selectedHistoryRange.toV&&e>=r.selectedHistoryRange.fromV:e===r.selectedHistoryVersion},r.isVersionHoverSelected=function(e){return r.rangeSelectionEnabled&&e<=r.hoveredHistoryRange.toV&&e>=r.hoveredHistoryRange.fromV},r.onDraggingStart=function(){e.$applyAsync((function(){r.isDragging=!0,r.initHoveredRange()}))},r.onDraggingStop=function(t,n){e.$applyAsync((function(){t||("toV"===n?r.setRangeToV(r.hoveredHistoryRange.toV):"fromV"===n&&r.setRangeFromV(r.hoveredHistoryRange.fromV)),r.isDragging=!1,r.resetHoveredRange()}))},r.onDrop=function(t,n){"toV"===t?e.$applyAsync((function(){return r.setRangeToV(n.version)})):"fromV"===t&&e.$applyAsync((function(){return r.setRangeFromV(n.version)}))},r.onOver=function(t,n){"toV"===t?e.$applyAsync((function(){return r.setHoveredRangeToV(n.version)})):"fromV"===t&&e.$applyAsync((function(){return r.setHoveredRangeFromV(n.version)}))},r.handleVersionSelect=function(e){r.rangeSelectionEnabled?r.onRangeSelect({selectedToV:e.version,selectedFromV:e.version}):r.onVersionSelect({version:e.version})},r.setRangeToV=function(e){e>=r.selectedHistoryRange.fromV&&r.onRangeSelect({selectedToV:e,selectedFromV:r.selectedHistoryRange.fromV})},r.setRangeFromV=function(e){e<=r.selectedHistoryRange.toV&&r.onRangeSelect({selectedToV:r.selectedHistoryRange.toV,selectedFromV:e})},r.buildUserView=function(e){return{_id:e.user_id,displayName:e.user_display_name}},r.displayName=Ud,r.getUserCSSStyle=function(e,t){var n=(null!=e?e._id:void 0)||(null!=e?e.id:void 0),a=id.a.getHueForUserId(n)||100;return r.isVersionSelected(t.version)||r.isVersionHoverSelected(t.version)?{color:"#FFF"}:{color:"hsl(".concat(a,", 70%, 50%)")}},r.$onInit=function(){r.resetHoveredRange()}};Jd.$inject=["$scope","$element","$attrs"];a.a.component("historyLabelsList",{bindings:{labels:"<",rangeSelectionEnabled:"<",users:"<",currentUser:"<",isLoading:"<",selectedHistoryVersion:"<?",selectedHistoryRange:"<?",onVersionSelect:"&",onRangeSelect:"&",onLabelDelete:"&"},controller:Jd,templateUrl:"historyLabelsListTpl"});var Qd=function(e,t,n,r){var a=this;a.$onInit=function(){null==a.showTooltip&&(a.showTooltip=!0),null==a.isPseudoCurrentStateLabel&&(a.isPseudoCurrentStateLabel=!1)}};Qd.$inject=["$scope","$element","$attrs","$filter"];a.a.component("historyLabel",{bindings:{labelText:"<",labelOwnerName:"<?",labelCreationDateTime:"<?",isOwnedByCurrentUser:"<",isPseudoCurrentStateLabel:"<",onLabelDelete:"&",showTooltip:"<?"},controller:Qd,templateUrl:"historyLabelTpl"});var Zd=function(e,t,n){var r=this;function a(e,t){for(var n=t.pathname.split("/"),r=e,a=0;a<n.length;a++){var l,h=n[a];a===n.length-1?((l=d.a.clone(t)).name=h,l.type="file",r.push(l)):(null==(l=d.a.find(r,(function(e){return e.name===h})))&&(l={name:h,type:"folder",children:[]},r.push(l)),r=l.children)}return e}r.handleEntityClick=function(e){return r.onSelectedFileChange({file:e})},r._fileTree=[],e.$watch("$ctrl.files",(function(e){null!=e&&e.length>0&&(r._fileTree=d.a.reduce(e,a,[]))}))};Zd.$inject=["$scope","$element","$attrs"];a.a.component("historyFileTree",{bindings:{files:"<",selectedPathname:"<",onSelectedFileChange:"&",isLoading:"<"},controller:Zd,templateUrl:"historyFileTreeTpl"});void 0!==window.fileActionI18n&&window.fileActionI18n;var eh={edited:"edited",renamed:"renamed",created:"created",deleted:"deleted"};function th(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,l=void 0;try{for(var d,h=e[Symbol.iterator]();!(r=(d=h.next()).done)&&(n.push(d.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==h.return||h.return()}finally{if(a)throw l}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return nh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nh(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var rh=function(e,t,n){var r=this;r.hasOperation=!1,r.getRenameTooltip=function(e){var t=th(a(r.fileEntity.oldPathname,r.fileEntity.pathname),2),n=t[0],l=t[1];return"".concat(eh.renamed," <strong>").concat(n,"</strong> &rarr; <strong>").concat(l,"</strong>")},r.getFileOperationName=function(){return"edited"===r.fileEntity.operation?eh.edited:"renamed"===r.fileEntity.operation?eh.renamed:"added"===r.fileEntity.operation?eh.created:"removed"===r.fileEntity.operation?eh.deleted:""};var a=function(e,t){for(var n=e.split("/"),r=t.split("/"),a=Math.min(n.length,r.length)-1,l=0;l<a&&n[l]===r[l];l++);return n.splice(0,l),r.splice(0,l),[n.join("/"),r.join("/")]},l=function(){r.isOpen=!r.isOpen,r.entityTypeIconClass=h()},d=function(){return r.historyFileTreeController.handleEntityClick(r.fileEntity)},h=function(){return r.isOpen?"fa-folder-open":"fa-folder"};r.$onInit=function(){"folder"===r.fileEntity.type?(r.isOpen=!0,r.entityTypeIconClass=h(),r.handleClick=l):(r.fileEntity.operation&&(r.hasOperation=!0),r.entityTypeIconClass="fa-".concat(f(r.fileEntity.name)),r.entityOpTextClass=r.fileEntity.operation?"history-file-entity-name-".concat(r.fileEntity.operation):null,r.handleClick=d,e.$watch((function(){return r.historyFileTreeController.selectedPathname}),(function(e){return r.isSelected=r.fileEntity.pathname===e})))}};rh.$inject=["$scope","$element","$attrs"];var ih;a.a.component("historyFileEntity",{require:{historyFileTreeController:"^historyFileTree"},bindings:{fileEntity:"<"},controller:rh,templateUrl:"historyFileEntityTpl"});function oh(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return ah(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ah(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,d=!0,h=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return d=e.done,e},e:function(e){h=!0,l=e},f:function(){try{d||null==n.return||n.return()}finally{if(h)throw l}}}}function ah(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function sh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lh(e,t,n){return t&&sh(e.prototype,t),n&&sh(e,n),e}var ch=((ih=function(){function e(t,n,r){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.labelCurrentVersion=this.labelCurrentVersion.bind(this),this.deleteLabel=this.deleteLabel.bind(this),this._addLabelLocally=this._addLabelLocally.bind(this),this.ide=t,this.$scope=n,this.localStorage=r,this.$scope.HistoryViewModes=Kd,this._localStorageViewModeProjKey="history.userPrefs.viewMode.".concat(n.project_id),this._localStorageShowOnlyLabelsProjKey="history.userPrefs.showOnlyLabels.".concat(n.project_id),this._previouslySelectedPathname=null,this._loadFileTreeRequestCanceller=null,this.hardReset(),this.$scope.toggleHistory=function(){"history"===a.$scope.ui.view?a.hide():(a.show(),a._handleHistoryUIStateChange()),a.ide.$timeout((function(){a.$scope.$broadcast("history:toggle")}),0)},this.$scope.isHistoryLoading=function(){var e=a.$scope.history.selection;return a.$scope.history.loadingFileTree||a.$scope.history.viewMode===Kd.POINT_IN_TIME&&e.file&&e.file.loading||a.$scope.history.viewMode===Kd.COMPARE&&e.diff&&e.diff.loading}}return lh(e,null,[{key:"initClass",value:function(){this.prototype.MAX_RECENT_UPDATES_TO_SELECT=5,this.prototype.BATCH_SIZE=10}}]),lh(e,[{key:"show",value:function(){this.$scope.ui.view="history",this.hardReset(),this.$scope.history.showOnlyLabels&&this.fetchNextBatchOfUpdates()}},{key:"hide",value:function(){this.$scope.ui.view="editor"}},{key:"_getViewModeUserPref",value:function(){return this.localStorage(this._localStorageViewModeProjKey)||Kd.POINT_IN_TIME}},{key:"_getShowOnlyLabelsUserPref",value:function(){return this.localStorage(this._localStorageShowOnlyLabelsProjKey)||!1}},{key:"_setViewModeUserPref",value:function(e){e!==Kd.POINT_IN_TIME&&e!==Kd.COMPARE||this.localStorage(this._localStorageViewModeProjKey,e)}},{key:"_setShowOnlyLabelsUserPref",value:function(e){this.localStorage(this._localStorageShowOnlyLabelsProjKey,!!e)}},{key:"hardReset",value:function(){var e=this;this.$scope.history={isV2:!0,updates:[],viewMode:this._getViewModeUserPref(),nextBeforeTimestamp:null,loading:!1,atEnd:!1,userHasFullFeature:void 0,freeHistoryLimitHit:!1,selection:{docs:{},pathname:null,range:{fromV:null,toV:null},hoveredRange:{fromV:null,toV:null},diff:null,files:[],file:null},error:null,showOnlyLabels:this._getShowOnlyLabelsUserPref(),labels:null,loadingFileTree:!0};var t=this.$scope.$watch("project.features.versioning",(function(n){null!=n&&(e.$scope.history.userHasFullFeature=n,e.$scope.user.isAdmin&&(e.$scope.history.userHasFullFeature=!0),t())}))}},{key:"softReset",value:function(){this.$scope.history.viewMode=this._getViewModeUserPref(),this.$scope.history.selection={docs:{},pathname:null,range:{fromV:null,toV:null},hoveredRange:{fromV:null,toV:null},diff:null,files:[],file:null},this.$scope.history.error=null,this.$scope.history.showOnlyLabels=this._getShowOnlyLabelsUserPref()}},{key:"toggleHistoryViewMode",value:function(){var e=this;this.$scope.history.viewMode===Kd.COMPARE?(this.softReset(),this.$scope.history.viewMode=Kd.POINT_IN_TIME,this._setViewModeUserPref(Kd.POINT_IN_TIME)):(this.softReset(),this.$scope.history.viewMode=Kd.COMPARE,this._setViewModeUserPref(Kd.COMPARE)),this._handleHistoryUIStateChange(),this.ide.$timeout((function(){e.$scope.$broadcast("history:toggle")}),0)}},{key:"_handleHistoryUIStateChange",value:function(){this.$scope.history.viewMode===Kd.COMPARE?this.$scope.history.showOnlyLabels?this.autoSelectLabelsForComparison():this.autoSelectRecentUpdates():this.$scope.history.showOnlyLabels?this.autoSelectLabelForPointInTime():this.autoSelectVersionForPointInTime()}},{key:"setHoverFrom",value:function(e){var t=this.$scope.history.selection;t.hoveredRange.fromV=e,t.hoveredRange.toV=t.range.toV,this.$scope.history.hoveringOverListSelectors=!0}},{key:"setHoverTo",value:function(e){var t=this.$scope.history.selection;t.hoveredRange.toV=e,t.hoveredRange.fromV=t.range.fromV,this.$scope.history.hoveringOverListSelectors=!0}},{key:"resetHover",value:function(){var e=this.$scope.history.selection;e.hoveredRange.toV=null,e.hoveredRange.fromV=null,this.$scope.history.hoveringOverListSelectors=!1}},{key:"showAllUpdates",value:function(){this.$scope.history.showOnlyLabels&&(this.$scope.history.showOnlyLabels=!1,this._setShowOnlyLabelsUserPref(!1),this._handleHistoryUIStateChange())}},{key:"showOnlyLabels",value:function(){this.$scope.history.showOnlyLabels||(this.$scope.history.showOnlyLabels=!0,this._setShowOnlyLabelsUserPref(!0),this._handleHistoryUIStateChange())}},{key:"restoreFile",value:function(e,t){var n="/project/".concat(this.$scope.project_id,"/restore_file");return this.ide.$http.post(n,{version:e,pathname:t,_csrf:window.csrfToken})}},{key:"loadFileTreeForVersion",value:function(e){return this._loadFileTree(e,e)}},{key:"loadFileTreeDiff",value:function(e,t){return this._loadFileTree(e,t)}},{key:"_loadFileTree",value:function(e,t){var n=this,r="/project/".concat(this.$scope.project_id,"/filetree/diff"),a=this.$scope.history.selection,l=["from=".concat(t),"to=".concat(e)];return r+="?".concat(l.join("&")),this.$scope.$applyAsync((function(){return n.$scope.history.loadingFileTree=!0})),a.file=null,a.pathname=null,null!=this._loadFileTreeRequestCanceller&&this._loadFileTreeRequestCanceller.resolve(),this._loadFileTreeRequestCanceller=this.ide.$q.defer(),this.ide.$http.get(r,{timeout:this._loadFileTreeRequestCanceller.promise}).then((function(e){n.$scope.history.selection.files=e.data.diff;var t,r=oh(n.$scope.history.selection.files);try{for(r.s();!(t=r.n()).done;){var a=t.value;null!=a.newPathname&&(a.oldPathname=a.pathname,a.pathname=a.newPathname,delete a.newPathname)}}catch(e){r.e(e)}finally{r.f()}n._loadFileTreeRequestCanceller=null,n.$scope.history.loadingFileTree=!1,n.autoSelectFile()})).catch((function(e){-1!==e.status?n._loadFileTreeRequestCanceller=null:n.$scope.history.loadingFileTree=!1}))}},{key:"selectFile",value:function(e){null!=e&&null!=e.pathname&&(this.$scope.history.selection.pathname=this._previouslySelectedPathname=e.pathname,this.$scope.history.selection.file=e,this.$scope.history.viewMode===Kd.POINT_IN_TIME?this.loadFileAtPointInTime():this.reloadDiff())}},{key:"autoSelectFile",value:function(){var e=this.$scope.history.selection.files,t=null,n=null,r=!1,a=this._getFilesWithOps();if(null!=this._previouslySelectedPathname&&(n=d.a.find(e,{pathname:this._previouslySelectedPathname}),r=d.a.some(a,{pathname:this._previouslySelectedPathname})),null!=n&&r)t=n;else{var l,h=oh(["edited","added","renamed","removed"]);try{for(h.s();!(l=h.n()).done;){var f=l.value,p=d.a.find(a,{operation:f});if(null!=p){t=d.a.find(e,{pathname:p.pathname});break}}}catch(e){h.e(e)}finally{h.f()}if(null==t)if(null!=n)t=n;else{var y=d.a.find(e,(function(e){return/main\.tex$/.test(e.pathname)}));if(null!=y)t=y;else{var w=d.a.find(e,(function(e){return/\.tex$/.test(e.pathname)}));t=null!=w?w:e[0]}}}this.selectFile(t)}},{key:"_getFilesWithOps",value:function(){var e;if(this.$scope.history.viewMode===Kd.POINT_IN_TIME){var t=this.getUpdateForVersion(this.$scope.history.selection.range.toV);if(e=[],null!=t){var n,r=oh(t.pathnames);try{for(r.s();!(n=r.n()).done;){var a=n.value;e.push({pathname:a,operation:"edited"})}}catch(e){r.e(e)}finally{r.f()}var l,h=oh(t.project_ops);try{for(h.s();!(l=h.n()).done;){var f=l.value,p=void 0;null!=f.add?p={pathname:f.add.pathname,operation:"added"}:null!=f.remove?p={pathname:f.remove.pathname,operation:"removed"}:null!=f.rename&&(p={pathname:f.rename.newPathname,operation:"renamed"}),null!=p&&e.push(p)}}catch(e){h.e(e)}finally{h.f()}}}else e=d.a.reduce(this.$scope.history.selection.files,(function(e,t){return t.operation&&e.push({pathname:t.pathname,operation:t.operation}),e}),[]);return e}},{key:"autoSelectRecentUpdates",value:function(){if(0!==this.$scope.history.updates.length){for(var e,t=this.$scope.history.updates[0].toV,n=0,r=0;r<this.$scope.history.updates.length;r++){var a=this.$scope.history.updates[r];if(this._updateContainsUserId(a,this.$scope.user.id)||r>this.MAX_RECENT_UPDATES_TO_SELECT)break;n=r}e=this.$scope.history.updates[n].fromV,this.selectVersionsForCompare(t,e)}}},{key:"autoSelectVersionForPointInTime",value:function(){if(0!==this.$scope.history.updates.length){var e=this.$scope.history.updates[0].toV,t=this.$scope.history.selection.range;null!=t.toV&&null!=t.fromV&&t.toV===t.fromV&&(e=t.toV),this.selectVersionForPointInTime(e)}}},{key:"autoSelectLastLabel",value:function(){if(null!=this.$scope.history.labels&&0!==this.$scope.history.labels.length)return this.selectLabelForPointInTime(this.$scope.history.labels[0])}},{key:"expandSelectionToVersion",value:function(e){e>this.$scope.history.selection.range.toV?this.$scope.history.selection.range.toV=e:e<this.$scope.history.selection.range.fromV&&(this.$scope.history.selection.range.fromV=e)}},{key:"selectVersionForPointInTime",value:function(e){var t=this.$scope.history.selection;t.range.toV!==e&&t.range.fromV!==e&&(t.range.toV=e,t.range.fromV=e,this.loadFileTreeForVersion(e))}},{key:"selectVersionsForCompare",value:function(e,t){var n=this.$scope.history.selection.range;n.toV===e&&n.fromV===t||(n.toV=e,n.fromV=t,this.loadFileTreeDiff(e,t))}},{key:"autoSelectLabelForPointInTime",value:function(){var e=this.getUpdateForVersion(this.$scope.history.selection.range.toV),t=0;if(null!=e&&null!=e.labels&&(t=e.labels.length),0===t)this.autoSelectLastLabel();else if(1===t)this.selectLabelForPointInTime(e.labels[0]);else if(t>1){var n=this.ide.$filter("orderBy")(e.labels,"-created_at")[0];this.selectLabelForPointInTime(n)}}},{key:"selectLabelForPointInTime",value:function(e){var t=null;if(!this._isLabelSelected(e)){for(var n=0,r=Array.from(this.$scope.history.updates);n<r.length;n++){var a=r[n];if(a.toV===e.version){t=a;break}}if(null!=t)this.selectVersionForPointInTime(t.toV);else{var l=this.$scope.history.selection;l.range.toV=e.version,l.range.fromV=e.version,this.loadFileTreeForVersion(e.version)}}}},{key:"getUpdateForVersion",value:function(e){var t,n=oh(this.$scope.history.updates);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.toV===e)return r}}catch(e){n.e(e)}finally{n.f()}}},{key:"autoSelectLabelsForComparison",value:function(){var e=this.$scope.history.labels,t=0;Array.isArray(e)&&(t=e.length),0===t||(1===t?this.selectVersionsForCompare(e[0].version,e[0].version):t>1&&this.selectVersionsForCompare(e[0].version,e[1].version))}},{key:"fetchNextBatchOfUpdates",value:function(){var e=this;if(!this.$scope.history.atEnd){var t="/project/".concat(this.ide.project_id,"/updates?min_count=").concat(this.BATCH_SIZE);null!=this.$scope.history.nextBeforeTimestamp&&(t+="&before=".concat(this.$scope.history.nextBeforeTimestamp));var n="/project/".concat(this.ide.project_id,"/labels"),r={updates:this.ide.$http.get(t)};return null==this.$scope.history.labels&&(r.labels=this.ide.$http.get(n)),this.$scope.history.loading=!0,this.ide.$q.all(r).then((function(t){e.$scope.history.loading=!1;var n=t.updates.data,r=null;n.updates.length>0&&(r=n.updates[0].toV),null!=t.labels&&(e.$scope.history.labels=e._loadLabels(t.labels.data,r)),e._loadUpdates(n.updates),e.$scope.history.nextBeforeTimestamp=n.nextBeforeTimestamp,(null==n.nextBeforeTimestamp||e.$scope.history.freeHistoryLimitHit||0===e.$scope.history.updates.length)&&(e.$scope.history.atEnd=!0),0===e.$scope.history.updates.length&&(e.$scope.history.loadingFileTree=!1)})).catch((function(t){e.$scope.history.loading=!1;var n=t.status,r=t.statusText;e.$scope.history.error={status:n,statusText:r},e.$scope.history.atEnd=!0,e.$scope.history.loadingFileTree=!1}))}}},{key:"_loadLabels",value:function(e,t){var n=this._sortLabelsByVersionAndDate(e),r=this._deletePseudoCurrentStateLabelIfExistent(n);return this._addPseudoCurrentStateLabelIfNeeded(r,t)}},{key:"_deletePseudoCurrentStateLabelIfExistent",value:function(e){return e.length&&e[0].isPseudoCurrentStateLabel&&e.shift(),e}},{key:"_addPseudoCurrentStateLabelIfNeeded",value:function(e,t){if(e.length&&e[0].version!==t||0===e.length){var n={id:"1",isPseudoCurrentStateLabel:!0,version:t,created_at:(new Date).toISOString()};e.unshift(n)}return e}},{key:"_sortLabelsByVersionAndDate",value:function(e){return this.ide.$filter("orderBy")(e,["isPseudoCurrentStateLabel","-version","-created_at"])}},{key:"loadFileAtPointInTime",value:function(){var e=this,t=this.$scope.history.selection.range.toV,n=this.$scope.history.selection.pathname;if(null!=t){var r="/project/".concat(this.$scope.project_id,"/diff"),a=["pathname=".concat(encodeURIComponent(n)),"from=".concat(t),"to=".concat(t)];return r+="?".concat(a.join("&")),this.$scope.history.selection.file.loading=!0,this.ide.$http.get(r).then((function(t){var n=e._parseDiff(t.data.diff),r=n.text,a=n.binary;e.$scope.history.selection.file.binary=a,e.$scope.history.selection.file.text=r,e.$scope.history.selection.file.loading=!1})).catch((function(){}))}}},{key:"reloadDiff",value:function(){var e=this,t=this.$scope.history.selection.diff,n=this.$scope.history.selection,r=n.range,a=n.pathname,l=r.fromV,d=r.toV;if(null!=a){if(null==t||t.pathname!==a||t.fromV!==l||t.toV!==d){this.$scope.history.selection.diff=t={fromV:l,toV:d,pathname:a,error:!1},t.loading=!0;var h="/project/".concat(this.$scope.project_id,"/diff"),f=["pathname=".concat(encodeURIComponent(a))];return null!=t.fromV&&null!=t.toV&&f.push("from=".concat(t.fromV),"to=".concat(t.toV)),h+="?".concat(f.join("&")),this.ide.$http.get(h).then((function(n){var r=n.data;t.loading=!1;var a=e._parseDiff(r.diff),l=a.text,d=a.highlights,h=a.binary;t.binary=h,t.text=l,t.highlights=d})).catch((function(){t.loading=!1,t.error=!0}))}}else this.$scope.history.selection.diff=null}},{key:"labelCurrentVersion",value:function(e){return this._labelVersion(e,this.$scope.history.selection.range.toV)}},{key:"deleteLabel",value:function(e){var t=this,n="/project/".concat(this.$scope.project_id,"/labels/").concat(e.id);return this.ide.$http({url:n,method:"DELETE",headers:{"X-CSRF-Token":window.csrfToken}}).then((function(n){return t._deleteLabelLocally(e)}))}},{key:"_deleteLabelLocally",value:function(e){for(var t=0;t<this.$scope.history.updates.length;t++){var n=this.$scope.history.updates[t];if(n.toV===e.version){n.labels=d.a.filter(n.labels,(function(t){return t.id!==e.id}));break}}this.$scope.history.labels=this._loadLabels(d.a.filter(this.$scope.history.labels,(function(t){return t.id!==e.id})),this.$scope.history.updates[0].toV),this._handleHistoryUIStateChange()}},{key:"_isLabelSelected",value:function(e){return!!e&&e.version<=this.$scope.history.selection.range.toV&&e.version>=this.$scope.history.selection.range.fromV}},{key:"_parseDiff",value:function(e){if(e.binary)return{binary:!0};for(var t=0,n=0,r=[],a="",l=e||[],d=0;d<l.length;d++){var h,f,p=l[d],y=p.u||p.i||p.d;y||(y=""),a+=y;var w=y.split("\n"),_=t,C=n;w.length>1?(f=_+w.length-1,h=w[w.length-1].length):(f=_,h=C+w[0].length),t=f,n=h;var S={start:{row:_,column:C},end:{row:f,column:h}};if(null!=p.i||null!=p.d){var k=null!=p.meta.users?p.meta.users[0]:void 0,x=Ud(k),E=Hd()(p.meta.end_ts).format("Do MMM YYYY, h:mm a");null!=p.i?r.push({label:"Added by ".concat(x," on ").concat(E),highlight:S,hue:id.a.getHueForUserId(null!=k?k.id:void 0)}):null!=p.d&&r.push({label:"Deleted by ".concat(x," on ").concat(E),strikeThrough:S,hue:id.a.getHueForUserId(null!=k?k.id:void 0)})}}return{text:a,highlights:r}}},{key:"_loadUpdates",value:function(e){null==e&&(e=[]);for(var t=this.$scope.history.updates[this.$scope.history.updates.length-1],n=new Date,r=n.setDate(n.getDate()-1),a=null,l=e||[],d=0;d<l.length;d++){for(var h=l[d],f=0,p=Array.from(h.meta.users||[]);f<p.length;f++){var y=p[f];null!=y&&(y.hue=id.a.getHueForUserId(y.id))}if(null!=t&&Hd()(t.meta.end_ts).isSame(h.meta.end_ts,"day")||(h.meta.first_in_day=!0),t=h,!this.$scope.history.userHasFullFeature&&h.meta.end_ts<r){a=d||1,this.$scope.history.freeHistoryLimitHit=!0,this.$scope.project.owner._id===this.$scope.user.id&&ga("send","event","subscription-funnel","editor-click-feature","history");break}}var w=0===this.$scope.history.updates.length;this.$scope.history.userHasFullFeature||null==a||(e=e.slice(0,a)),this.$scope.history.updates=this.$scope.history.updates.concat(e),w&&this._handleHistoryUIStateChange()}},{key:"_labelVersion",value:function(e,t){var n=this,r="/project/".concat(this.$scope.project_id,"/labels");return this.ide.$http.post(r,{comment:e,version:t,_csrf:window.csrfToken}).then((function(e){return n._addLabelLocally(e.data)}))}},{key:"_addLabelLocally",value:function(e){var t=d.a.find(this.$scope.history.updates,(function(t){return t.toV===e.version}));null!=t&&(t.labels=t.labels.concat(e)),this.$scope.history.labels=this._loadLabels(this.$scope.history.labels.concat(e),this.$scope.history.updates[0].toV),this._handleHistoryUIStateChange()}},{key:"_updateContainsUserId",value:function(e,t){for(var n=0,r=Array.from(e.meta.users);n<r.length;n++){var a=r[n];if((null!=a?a.id:void 0)===t)return!0}return!1}}]),e}()).initClass(),ih=ih);var uh=function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ide=t,this.$scope=n,this.$scope.permissions={read:!1,write:!1,admin:!1,comment:!1},this.$scope.$watch("permissionsLevel",(function(e){if(null!=e&&("readOnly"===e?(r.$scope.permissions.read=!0,r.$scope.permissions.write=!1,r.$scope.permissions.admin=!1,r.$scope.permissions.comment=!0):"readAndWrite"===e?(r.$scope.permissions.read=!0,r.$scope.permissions.write=!0,r.$scope.permissions.comment=!0):"owner"===e&&(r.$scope.permissions.read=!0,r.$scope.permissions.write=!0,r.$scope.permissions.admin=!0,r.$scope.permissions.comment=!0)),r.$scope.anonymous)return r.$scope.permissions.comment=!1}))},dh=(n(326),n(433)),hh=n.n(dh);function fh(e){var t=e.url,n=e.children;return window.wikiEnabled?w.a.createElement("a",{href:t,target:"_blank"},n):w.a.createElement(w.a.Fragment,null,n)}fh.propTypes={url:C.a.string,children:C.a.node.isRequired};var ph=[{regexToMatch:/Misplaced alignment tab character \&/,extraInfoURL:"https://www.overleaf.com/learn/Errors/Misplaced_alignment_tab_character_%26",humanReadableHintComponent:w.a.createElement(w.a.Fragment,null,"You have placed an alignment tab character '&' in the wrong place. If you want to align something, you must write it inside an align environment such as \\begin","{align}"," … \\end","{align}",", \\begin","{tabular}"," … \\end","{tabular}",", etc. If you want to write an ampersand '&' in text, you must write \\& instead."),humanReadableHint:"You have placed an alignment tab character &#x27;&amp;&#x27; in the wrong place. If you want to align something, you must write it inside an align environment such as \\begin{align} … \\end{align}, \\begin{tabular} … \\end{tabular}, etc. If you want to write an ampersand &#x27;&amp;&#x27; in text, you must write \\&amp; instead."},{regexToMatch:/Extra alignment tab has been changed to \\cr/,extraInfoURL:"https://www.overleaf.com/learn/Errors/Extra_alignment_tab_has_been_changed_to_%5Ccr",humanReadableHintComponent:w.a.createElement(w.a.Fragment,null,"You have written too many alignment tabs in a table, causing one of them to be turned into a line break. Make sure you have specified the correct number of columns in your"," ",w.a.createElement(fh,{url:"https://www.overleaf.com/learn/Tables"},"table"),"."),humanReadableHint:'You have written too many alignment tabs in a table, causing one of them to be turned into a line break. Make sure you have specified the correct number of columns in your <a href="https://www.overleaf.com/learn/Tables" target="_blank">table</a>.'},{regexToMatch:/Display math should end with \$\$/,extraInfoURL:"https://www.overleaf.com/learn/Errors/Display_math_should_end_with_$$",humanReadableHintComponent:w.a.createElement(w.a.Fragment,null,"You have forgotten a $ sign at the end of 'display math' mode. When writing in display math mode, you must always math write inside $$ … $$. Check that the number of $s match around each math expression."),humanReadableHint:"You have forgotten a $ sign at the end of &#x27;display math&#x27; mode. When writing in display math mode, you must always math write inside $$ … $$. Check that the number of $s match around each math expression."},{regexToMatch:/Missing [{$] inserted./,extraInfoURL:"https://www.overleaf.com/learn/Errors/Missing_$_inserted",humanReadableHintComponent:w.a.createElement(w.a.Fragment,null,"Check that your $'s match around math expressions. If they do, then you've probably used a symbol in normal text that needs to be in math mode. Symbols such as subscripts ( _ ), integrals ( \\int ), Greek letters ( \\alpha, \\beta, \\delta ), and modifiers (\\vec","{x}",", \\tilde","{x}"," ) must be written in math mode. See the full list"," ",w.a.createElement(fh,{url:"https://www.overleaf.com/learn/Errors/Missing_$_inserted"},"here"),". If you intended to use mathematics mode, then use $ … $ for 'inline math mode', $$ … $$ for 'display math mode' or alternatively \\begin","{math}"," … \\end","{math}","."),humanReadableHint:'Check that your $&#x27;s match around math expressions. If they do, then you&#x27;ve probably used a symbol in normal text that needs to be in math mode. Symbols such as subscripts ( _ ), integrals ( \\int ), Greek letters ( \\alpha, \\beta, \\delta ), and modifiers (\\vec{x}, \\tilde{x} ) must be written in math mode. See the full list <a href="https://www.overleaf.com/learn/Errors/Missing_$_inserted" target="_blank">here</a>. If you intended to use mathematics mode, then use $ … $ for &#x27;inline math mode&#x27;, $$ … $$ for &#x27;display math mode&#x27; or alternatively \\begin{math} … \\end{math}.'},{regexToMatch:/(undefined )?[rR]eference(s)?.+(undefined)?/,extraInfoURL:"https://www.overleaf.com/learn/Errors/There_were_undefined_references",humanReadableHintComponent:w.a.createElement(w.a.Fragment,null,"You have referenced something which has not yet been labelled. If you have labelled it already, make sure that what is written inside \\ref","{...}"," is the same as what is written inside \\label","{...}","."),humanReadableHint:"You have referenced something which has not yet been labelled. If you have labelled it already, make sure that what is written inside \\ref{...} is the same as what is written inside \\label{...}."},{regexToMatch:/Citation .+ on page .+ undefined on input line .+/,extraInfoURL:"https://www.overleaf.com/learn/Errors/Citation_XXX_on_page_XXX_undefined_on_input_line_XXX",humanReadableHintComponent:w.a.createElement(w.a.Fragment,null,"You have cited something which is not included in your bibliography. Make sure that the citation (\\cite","{...}",") has a corresponding key in your bibliography, and that both are spelled the same way."),humanReadableHint:"You have cited something which is not included in your bibliography. Make sure that the citation (\\cite{...}) has a corresponding key in your bibliography, and that both are spelled the same way."},{regexToMatch:/(Label .+)? multiply[ -]defined( labels)?/,extraInfoURL:"https://www.overleaf.com/learn/Errors/There_were_multiply-defined_labels",humanReadableHintComponent:w.a.createElement(w.a.Fragment,null,"You have used the same label more than once. Check that each \\label","{...}"," labels only one item."),humanReadableHint:"You have used the same label more than once. Check that each \\label{...} labels only one item."},{regexToMatch:/`!?h' float specifier changed to `!?ht'/,extraInfoURL:"https://www.overleaf.com/learn/Errors/%60!h%27_float_specifier_changed_to_%60!ht%27",humanReadableHintComponent:w.a.createElement(w.a.Fragment,null,"The float specifier 'h' is too strict of a demand for LaTeX to place your float in a nice way here. Try relaxing it by using 'ht', or even 'htbp' if necessary. If you want to try keep the float here anyway, check out the"," ",w.a.createElement(fh,{url:"https://www.overleaf.com/learn/Positioning_of_Figures"},"float package"),"."),humanReadableHint:'The float specifier &#x27;h&#x27; is too strict of a demand for LaTeX to place your float in a nice way here. Try relaxing it by using &#x27;ht&#x27;, or even &#x27;htbp&#x27; if necessary. If you want to try keep the float here anyway, check out the <a href="https://www.overleaf.com/learn/Positioning_of_Figures" target="_blank">float package</a>.'},{regexToMatch:/No positions in optional float specifier/,extraInfoURL:"https://www.overleaf.com/learn/Errors/No_positions_in_optional_float_specifier",humanReadableHintComponent:w.a.createElement(w.a.Fragment,null,"You have forgotten to include a float specifier, which tells LaTeX where to position your figure. To fix this, either insert a float specifier inside the square brackets (e.g. \\begin","{figure}","[h]), or remove the square brackets (e.g. \\begin","{figure}","). Find out more about float specifiers"," ",w.a.createElement(fh,{url:"https://www.overleaf.com/learn/Positioning_of_Figures"},"here"),"."),humanReadableHint:'You have forgotten to include a float specifier, which tells LaTeX where to position your figure. To fix this, either insert a float specifier inside the square brackets (e.g. \\begin{figure}[h]), or remove the square brackets (e.g. \\begin{figure}). Find out more about float specifiers <a href="https://www.overleaf.com/learn/Positioning_of_Figures" target="_blank">here</a>.'},{regexToMatch:/Undefined control sequence/,extraInfoURL:"https://www.overleaf.com/learn/Errors/Undefined_control_sequence",humanReadableHintComponent:w.a.createElement(w.a.Fragment,null,"The compiler is having trouble understanding a command you have used. Check that the command is spelled correctly. If the command is part of a package, make sure you have included the package in your preamble using \\usepackage","{...}","."),humanReadableHint:"The compiler is having trouble understanding a command you have used. Check that the command is spelled correctly. If the command is part of a package, make sure you have included the package in your preamble using \\usepackage{...}."},{regexToMatch:/File .+ not found/,extraInfoURL:"https://www.overleaf.com/learn/Errors/File_XXX_not_found_on_input_line_XXX",humanReadableHintComponent:w.a.createElement(w.a.Fragment,null,"The compiler cannot find the file you want to include. Make sure that you have"," ",w.a.createElement(fh,{url:"https://www.overleaf.com/learn/Including_images_in_ShareLaTeX"},"uploaded the file")," ","and"," ",w.a.createElement(fh,{url:"https://www.overleaf.com/learn/Errors/File_XXX_not_found_on_input_line_XXX."},"specified the file location correctly"),"."),humanReadableHint:'The compiler cannot find the file you want to include. Make sure that you have <a href="https://www.overleaf.com/learn/Including_images_in_ShareLaTeX" target="_blank">uploaded the file</a> and <a href="https://www.overleaf.com/learn/Errors/File_XXX_not_found_on_input_line_XXX." target="_blank">specified the file location correctly</a>.'},{regexToMatch:/LaTeX Error: Unknown graphics extension: \..+/,extraInfoURL:"https://www.overleaf.com/learn/Errors/LaTeX_Error:_Unknown_graphics_extension:_.XXX",humanReadableHintComponent:w.a.createElement(w.a.Fragment,null,"The compiler does not recognise the file type of one of your images. Make sure you are using a"," ",w.a.createElement(fh,{url:"https://www.overleaf.com/learn/Errors/LaTeX_Error:_Unknown_graphics_extension:_.gif."},"supported image format")," ","for your choice of compiler, and check that there are no periods (.) in the name of your image."),humanReadableHint:'The compiler does not recognise the file type of one of your images. Make sure you are using a <a href="https://www.overleaf.com/learn/Errors/LaTeX_Error:_Unknown_graphics_extension:_.gif." target="_blank">supported image format</a> for your choice of compiler, and check that there are no periods (.) in the name of your image.'},{regexToMatch:/LaTeX Error: Unknown float option `H'/,extraInfoURL:"https://www.overleaf.com/learn/Errors/LaTeX_Error:_Unknown_float_option_%60H%27",humanReadableHintComponent:w.a.createElement(w.a.Fragment,null,"The compiler isn't recognizing the float option 'H'. Include \\usepackage","{float}"," in your preamble to fix this."),humanReadableHint:"The compiler isn&#x27;t recognizing the float option &#x27;H&#x27;. Include \\usepackage{float} in your preamble to fix this."},{regexToMatch:/LaTeX Error: Unknown float option `q'/,extraInfoURL:"https://www.overleaf.com/learn/Errors/LaTeX_Error:_Unknown_float_option_%60q%27",humanReadableHintComponent:w.a.createElement(w.a.Fragment,null,"You have used a float specifier which the compiler does not understand. You can learn more about the different float options available for placing figures"," ",w.a.createElement(fh,{url:"https://www.overleaf.com/learn/Positioning_of_Figures"},"here")," ","."),humanReadableHint:'You have used a float specifier which the compiler does not understand. You can learn more about the different float options available for placing figures <a href="https://www.overleaf.com/learn/Positioning_of_Figures" target="_blank">here</a> .'},{regexToMatch:/LaTeX Error: \\math.+ allowed only in math mode/,extraInfoURL:"https://www.overleaf.com/learn/Errors/LaTeX_Error:_%5Cmathrm_allowed_only_in_math_mode",humanReadableHintComponent:w.a.createElement(w.a.Fragment,null,"You have used a font command which is only available in math mode. To use this command, you must be in maths mode (E.g. $ … $ or \\begin","{math}"," … \\end","{math}","). If you want to use it outside of math mode, use the text version instead: \\textrm, \\textit, etc."),humanReadableHint:"You have used a font command which is only available in math mode. To use this command, you must be in maths mode (E.g. $ … $ or \\begin{math} … \\end{math}). If you want to use it outside of math mode, use the text version instead: \\textrm, \\textit, etc."},{ruleId:"hint_mismatched_environment",types:["environment"],regexToMatch:/Error: `([^']{2,})' expected, found `([^']{2,})'.*/,newMessage:"Error: environment does not match \\begin{$1} ... \\end{$2}",humanReadableHintComponent:w.a.createElement(w.a.Fragment,null,"You have used \\begin","{...}"," without a corresponding \\end","{...}","."),humanReadableHint:"You have used \\begin{...} without a corresponding \\end{...}."},{ruleId:"hint_mismatched_brackets",types:["environment"],regexToMatch:/Error: `([^a-zA-Z0-9])' expected, found `([^a-zA-Z0-9])'.*/,newMessage:"Error: brackets do not match, found '$2' instead of '$1'",humanReadableHintComponent:w.a.createElement(w.a.Fragment,null,"You have used an open bracket without a corresponding close bracket."),humanReadableHint:"You have used an open bracket without a corresponding close bracket."},{regexToMatch:/LaTeX Error: Can be used only in preamble/,extraInfoURL:"https://www.overleaf.com/learn/Errors/LaTeX_Error:_Can_be_used_only_in_preamble",humanReadableHintComponent:w.a.createElement(w.a.Fragment,null,"You have used a command in the main body of your document which should be used in the preamble. Make sure that \\documentclass[…]","{…}"," and all \\usepackage","{…}"," commands are written before \\begin","{document}","."),humanReadableHint:"You have used a command in the main body of your document which should be used in the preamble. Make sure that \\documentclass[…]{…} and all \\usepackage{…} commands are written before \\begin{document}."},{regexToMatch:/Missing \\right inserted/,extraInfoURL:"https://www.overleaf.com/learn/Errors/Missing_%5Cright_insertede",humanReadableHintComponent:w.a.createElement(w.a.Fragment,null,"You have started an expression with a \\left command, but have not included a corresponding \\right command. Make sure that your \\left and \\right commands balance everywhere, or else try using \\Biggl and \\Biggr commands instead as shown"," ",w.a.createElement(fh,{url:"https://www.overleaf.com/learn/Errors/Missing_%5Cright_inserted"},"here"),"."),humanReadableHint:'You have started an expression with a \\left command, but have not included a corresponding \\right command. Make sure that your \\left and \\right commands balance everywhere, or else try using \\Biggl and \\Biggr commands instead as shown <a href="https://www.overleaf.com/learn/Errors/Missing_%5Cright_inserted" target="_blank">here</a>.'},{regexToMatch:/Double superscript/,extraInfoURL:"https://www.overleaf.com/learn/Errors/Double_superscript",humanReadableHintComponent:w.a.createElement(w.a.Fragment,null,"You have written a double superscript incorrectly as a^b^c, or else you have written a prime with a superscript. Remember to include ","{and}"," ","when using multiple superscripts. Try a^","{b ^ c}"," instead."),humanReadableHint:"You have written a double superscript incorrectly as a^b^c, or else you have written a prime with a superscript. Remember to include {and} when using multiple superscripts. Try a^{b ^ c} instead."},{regexToMatch:/Double subscript/,extraInfoURL:"https://www.overleaf.com/learn/Errors/Double_subscript",humanReadableHintComponent:w.a.createElement(w.a.Fragment,null,"You have written a double subscript incorrectly as a_b_c. Remember to include ","{and}"," when using multiple subscripts. Try a_","{b_c}"," instead."),humanReadableHint:"You have written a double subscript incorrectly as a_b_c. Remember to include {and} when using multiple subscripts. Try a_{b_c} instead."},{regexToMatch:/No \\author given/,extraInfoURL:"https://www.overleaf.com/learn/Errors/No_%5Cauthor_given",humanReadableHintComponent:w.a.createElement(w.a.Fragment,null,"You have used the \\maketitle command, but have not specified any \\author. To fix this, include an author in your preamble using the \\author","{…}"," command."),humanReadableHint:"You have used the \\maketitle command, but have not specified any \\author. To fix this, include an author in your preamble using the \\author{…} command."},{regexToMatch:/LaTeX Error: Environment .+ undefined/,extraInfoURL:"https://www.overleaf.com/learn/Errors%2FLaTeX%20Error%3A%20Environment%20XXX%20undefined",humanReadableHintComponent:w.a.createElement(w.a.Fragment,null,"You have created an environment (using \\begin","{…}"," and \\end","{…}"," commands) which is not recognized. Make sure you have included the required package for that environment in your preamble, and that the environment is spelled correctly."),humanReadableHint:"You have created an environment (using \\begin{…} and \\end{…} commands) which is not recognized. Make sure you have included the required package for that environment in your preamble, and that the environment is spelled correctly."},{regexToMatch:/LaTeX Error: Something's wrong--perhaps a missing \\item/,extraInfoURL:"https://www.overleaf.com/learn/Errors/LaTeX_Error:_Something%27s_wrong--perhaps_a_missing_%5Citem",humanReadableHintComponent:w.a.createElement(w.a.Fragment,null,"There are no entries found in a list you have created. Make sure you label list entries using the \\item command, and that you have not used a list inside a table."),humanReadableHint:"There are no entries found in a list you have created. Make sure you label list entries using the \\item command, and that you have not used a list inside a table."},{regexToMatch:/Misplaced \\noalign/,extraInfoURL:"https://www.overleaf.com/learn/Errors/Misplaced_%5Cnoalign",humanReadableHintComponent:w.a.createElement(w.a.Fragment,null,"You have used a \\hline command in the wrong place, probably outside a table. If the \\hline command is written inside a table, try including \\\\ before it."),humanReadableHint:"You have used a \\hline command in the wrong place, probably outside a table. If the \\hline command is written inside a table, try including \\\\ before it."},{regexToMatch:/LaTeX Error: There's no line here to end/,extraInfoURL:"https://www.overleaf.com/learn/Errors/LaTeX_Error:_There%27s_no_line_here_to_end",humanReadableHintComponent:w.a.createElement(w.a.Fragment,null,"You have used a \\\\ or \\newline command where LaTeX was not expecting one. Make sure that you only use line breaks after blocks of text, and be careful using linebreaks inside lists and other environments.\\"),humanReadableHint:"You have used a \\\\ or \\newline command where LaTeX was not expecting one. Make sure that you only use line breaks after blocks of text, and be careful using linebreaks inside lists and other environments.\\"},{regexToMatch:/LaTeX Error: \\verb ended by end of line/,extraInfoURL:"https://www.overleaf.com/learn/Errors/LaTeX_Error:_%5Cverb_ended_by_end_of_line",humanReadableHintComponent:w.a.createElement(w.a.Fragment,null,"You have used a \\verb command incorrectly. Try replacling the \\verb command with \\begin","{verbatim}","…\\end","{verbatim}",".\\"),humanReadableHint:"You have used a \\verb command incorrectly. Try replacling the \\verb command with \\begin{verbatim}…\\end{verbatim}.\\"},{regexToMatch:/Illegal unit of measure (pt inserted)/,extraInfoURL:"https://www.overleaf.com/learn/Errors%2FIllegal%20unit%20of%20measure%20(pt%20inserted)",humanReadableHintComponent:w.a.createElement(w.a.Fragment,null,"You have written a length, but have not specified the appropriate units (pt, mm, cm etc.). If you have not written a length, check that you have not witten a linebreak \\\\ followed by square brackets […] anywhere."),humanReadableHint:"You have written a length, but have not specified the appropriate units (pt, mm, cm etc.). If you have not written a length, check that you have not witten a linebreak \\\\ followed by square brackets […] anywhere."},{regexToMatch:/Extra \\right/,extraInfoURL:"https://www.overleaf.com/learn/Errors/Extra_%5Cright",humanReadableHintComponent:w.a.createElement(w.a.Fragment,null,"You have written a \\right command without a corresponding \\left command. Check that all \\left and \\right commands balance everywhere."),humanReadableHint:"You have written a \\right command without a corresponding \\left command. Check that all \\left and \\right commands balance everywhere."},{regexToMatch:/Missing \\begin{document}/,extraInfoURL:"https://www.overleaf.com/learn/Errors%2FLaTeX%20Error%3A%20Missing%20%5Cbegin%20document",humanReadableHintComponent:w.a.createElement(w.a.Fragment,null,"No \\begin","{document}"," command was found. Make sure you have included \\begin","{document}"," in your preamble, and that your main document is set correctly."),humanReadableHint:"No \\begin{document} command was found. Make sure you have included \\begin{document} in your preamble, and that your main document is set correctly."},{ruleId:"hint_mismatched_environment2",types:["environment"],cascadesFrom:["environment"],regexToMatch:/Error: `\\end\{([^\}]+)\}' expected but found `\\end\{([^\}]+)\}'.*/,newMessage:"Error: environments do not match: \\begin{$1} ... \\end{$2}",humanReadableHintComponent:w.a.createElement(w.a.Fragment,null,"You have used \\begin","{}"," without a corresponding \\end","{}","."),humanReadableHint:"You have used \\begin{} without a corresponding \\end{}."},{ruleId:"hint_mismatched_environment3",types:["environment"],cascadesFrom:["environment"],regexToMatch:/Warning: No matching \\end found for `\\begin\{([^\}]+)\}'.*/,newMessage:"Warning: No matching \\end found for \\begin{$1}",humanReadableHintComponent:w.a.createElement(w.a.Fragment,null,"You have used \\begin","{}"," without a corresponding \\end","{}","."),humanReadableHint:"You have used \\begin{} without a corresponding \\end{}."},{ruleId:"hint_mismatched_environment4",types:["environment"],cascadesFrom:["environment"],regexToMatch:/Error: Found `\\end\{([^\}]+)\}' without corresponding \\begin.*/,newMessage:"Error: found \\end{$1} without a corresponding \\begin{$1}",humanReadableHintComponent:w.a.createElement(w.a.Fragment,null,"You have used \\begin","{}"," without a corresponding \\end","{}","."),humanReadableHint:"You have used \\begin{} without a corresponding \\end{}."}];window.wikiEnabled||ph.forEach((function(e){var t,n;e.extraInfoURL=null,e.humanReadableHint=(t=e.humanReadableHint,(n=document.createElement("DIV")).innerHTML=t,n.textContent||n.innerText||"")}));var gh=ph;function mh(e){return(mh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vh(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return yh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yh(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,d=!0,h=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return d=e.done,e},e:function(e){h=!0,l=e},f:function(){try{d||null==n.return||n.return()}finally{if(h)throw l}}}}function yh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var bh=function(e,t){var n,r,a=function(e){var t,n=vh(gh);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.regexToMatch.test(e))return r}}catch(e){n.e(e)}finally{n.f()}},l={},d=vh((n="string"==typeof e?hh.a.parse(e,t):e).all);try{for(d.s();!(r=d.n()).done;){var h=r.value,f=a(h.message);if(null!=f){if(null!=f.ruleId?h.ruleId=f.ruleId:null!=f.regexToMatch&&(h.ruleId="hint_".concat(f.regexToMatch.toString().replace(/\s/g,"_").slice(1,-1))),null!=f.newMessage&&(h.message=h.message.replace(f.regexToMatch,f.newMessage)),null!=f.cascadesFrom){var p,y=vh(f.cascadesFrom);try{for(y.s();!(p=y.n()).done;)l[p.value]&&(h.suppressed=!0)}catch(e){y.e(e)}finally{y.f()}}if(null!=f.types){var w,_=vh(f.types);try{for(_.s();!(w=_.n()).done;)l[w.value]=!0}catch(e){_.e(e)}finally{_.f()}}null!=f.humanReadableHint&&(h.humanReadableHint=f.humanReadableHint),null!=f.humanReadableHintComponent&&(h.humanReadableHintComponent=f.humanReadableHintComponent),null!=f.extraInfoURL&&(h.extraInfoURL=f.extraInfoURL)}}}catch(e){d.e(e)}finally{d.f()}for(var C in n){var S=n[C];"object"===mh(S)&&S.length>0&&(n[C]=Array.from(S).filter((function(e){return!e.suppressed})))}return n},wh=n(434),_h=n.n(wh),Ch=["bbl","gls","ind"];function Sh(e){var t=e.fileList,n=void 0===t?[]:t,r=ln().t,a=[],l=[];return n&&(a=n.filter((function(e){if(Ch.includes(e.type))return e})),l=n.filter((function(e){if(!Ch.includes(e.type)){if("pdf"===e.type&&!0===e.main)return;return e}}))),w.a.createElement(w.a.Fragment,null,w.a.createElement(Vo,{header:!0},r("other_output_files")),w.a.createElement(kh,{subFileList:a,listType:"main"}),l.length>0&&a.length>0?w.a.createElement(w.a.Fragment,null,w.a.createElement(Vo,{divider:!0})):w.a.createElement(w.a.Fragment,null),l.length>0?w.a.createElement(w.a.Fragment,null,w.a.createElement(kh,{subFileList:l,listType:"other"})):w.a.createElement(w.a.Fragment,null))}function kh(e){var t=e.subFileList,n=e.listType;return t.map((function(e,t){return w.a.createElement(Vo,{download:!0,href:e.url,key:"".concat(n).concat(t)},w.a.createElement("b",null,e.fileName))}))}kh.propTypes={subFileList:C.a.array.isRequired,listType:C.a.string.isRequired},Sh.propTypes={fileList:C.a.array};var xh=Sh;function Eh(e){var t=e.isCompiling,n=e.outputFiles,r=e.pdfDownloadUrl,a=e.showText,l=ln().t,d={};a||(d={position:"absolute",right:"-100vw"});var h=t||!r,f=w.a.createElement("a",{className:"btn btn-xs btn-info",disabled:h,download:!0,href:r||"#",style:{pointerEvents:"auto"}},w.a.createElement(qr,{type:"download",modifier:"fw"}),w.a.createElement("span",{className:"toolbar-text",style:d},l("download_pdf"))),p=a&&r;return w.a.createElement(Ho,{id:"download-dropdown",className:"toolbar-item",disabled:t},p?f:w.a.createElement(Ia,{placement:"bottom",overlay:w.a.createElement(va,{id:"tooltip-download-pdf"},l(h?"please_compile_pdf_before_download":"download_pdf"))},f),w.a.createElement(Ho.Toggle,{className:"btn btn-xs btn-info dropdown-toggle","aria-label":l("toggle_output_files_list"),bsStyle:"info"}),w.a.createElement(Ho.Menu,{id:"download-dropdown-list"},w.a.createElement(xh,{fileList:n})))}Eh.propTypes={isCompiling:C.a.bool.isRequired,outputFiles:C.a.array,pdfDownloadUrl:C.a.string,showText:C.a.bool.isRequired};var Ah=Eh;function Th(){return(Th=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function $h(e){var t=e.compilerState,n=t.isAutoCompileOn,r=t.isCompiling,a=t.isDraftModeOn,l=t.isSyntaxCheckOn,d=e.onRecompile,h=e.onRecompileFromScratch,f=e.onRunSyntaxCheckNow,p=e.onStopCompilation,y=e.onSetAutoCompile,_=e.onSetDraftMode,C=e.onSetSyntaxCheck,S=e.showText,k=ln().t;var x={},E={};function A(e){return{"aria-hidden":!e,style:{position:"absolute",right:"-100vw"}}}S?r?E=A():x=A():(x=A(r),E=A(!r));var T=w.a.createElement(Ho,{id:"pdf-recompile-dropdown",className:"btn-recompile-group toolbar-item"},w.a.createElement("button",{className:"btn btn-recompile",onClick:d},w.a.createElement(qr,{type:"refresh",spin:r}),w.a.createElement("span",Th({id:"text-compiling",className:"toolbar-text"},x),k("compiling"),"…"),w.a.createElement("span",Th({id:"text-recompile",className:"toolbar-text"},E),k("recompile"))),w.a.createElement(Ho.Toggle,{"aria-label":k("toggle_compile_options_menu"),className:"btn btn-recompile",bsStyle:"success"}),w.a.createElement(Ho.Menu,null,w.a.createElement(Vo,{header:!0},k("auto_compile")),w.a.createElement(Vo,{onSelect:function(){y(!0)}},w.a.createElement(qr,{type:n?"check":"",modifier:"fw"}),k("on")),w.a.createElement(Vo,{onSelect:function(){y(!1)}},w.a.createElement(qr,{type:n?"":"check",modifier:"fw"}),k("off")),w.a.createElement(Vo,{header:!0},k("compile_mode")),w.a.createElement(Vo,{onSelect:function(){_(!1)}},w.a.createElement(qr,{type:a?"":"check",modifier:"fw"}),k("normal")),w.a.createElement(Vo,{onSelect:function(){_(!0)}},w.a.createElement(qr,{type:a?"check":"",modifier:"fw"}),k("fast")," ",w.a.createElement("span",{className:"subdued"},"[draft]")),w.a.createElement(Vo,{header:!0},"Syntax Checks"),w.a.createElement(Vo,{onSelect:function(){C(!0)}},w.a.createElement(qr,{type:l?"check":"",modifier:"fw"}),k("stop_on_validation_error")),w.a.createElement(Vo,{onSelect:function(){C(!1)}},w.a.createElement(qr,{type:l?"":"check",modifier:"fw"}),k("ignore_validation_errors")),w.a.createElement(Vo,{onSelect:f},w.a.createElement(qr,{type:"",modifier:"fw"}),k("run_syntax_check_now")),w.a.createElement(Vo,{className:r?"":"hidden",divider:!0}),w.a.createElement(Vo,{onSelect:p,className:r?"":"hidden",disabled:!r,"aria-disabled":!r},k("stop_compile")),w.a.createElement(Vo,{divider:!0}),w.a.createElement(Vo,{onSelect:h,disabled:r,"aria-disabled":!!r},k("recompile_from_scratch"))));return S?T:w.a.createElement(Ia,{placement:"bottom",overlay:w.a.createElement(va,{id:"tooltip-download-pdf"},k(r?"compiling":"recompile"))},T)}$h.propTypes={compilerState:C.a.shape({isAutoCompileOn:C.a.bool.isRequired,isCompiling:C.a.bool.isRequired,isDraftModeOn:C.a.bool.isRequired,isSyntaxCheckOn:C.a.bool.isRequired,logEntries:C.a.object.isRequired}),onRecompile:C.a.func.isRequired,onRecompileFromScratch:C.a.func.isRequired,onRunSyntaxCheckNow:C.a.func.isRequired,onSetAutoCompile:C.a.func.isRequired,onSetDraftMode:C.a.func.isRequired,onSetSyntaxCheck:C.a.func.isRequired,onStopCompilation:C.a.func.isRequired,showText:C.a.bool.isRequired};var Rh=$h;function Oh(e){var t=e.onToggle,n=e.showLogs,r=e.compileFailed,a=void 0!==r&&r,l=e.logsState,d=l.nErrors,h=l.nWarnings,f=e.showText,p=ln().t,y=De()("btn","btn-xs","btn-toggle-logs","toolbar-item",{"btn-danger":!n&&d,"btn-warning":!n&&!d&&h,"btn-default":n||!d&&!h}),_={};f||(_={position:"absolute",right:"-100vw"});var C=w.a.createElement("button",{id:"logs-toggle",type:"button",disabled:a,className:y,onClick:function(e){e.currentTarget.blur(),t()}},n?w.a.createElement(Dh,{textStyle:_}):w.a.createElement(Mh,{textStyle:_,nErrors:d,nWarnings:h}));return f?C:w.a.createElement(Ia,{placement:"bottom",overlay:w.a.createElement(va,{id:"tooltip-logs-toggle"},p(n?"view_pdf":"view_logs"))},C)}function Mh(e){var t=e.textStyle,n=e.nErrors,r=e.nWarnings;return n||r?w.a.createElement(Ph,{logType:n?"errors":"warnings",nLogs:n||r,textStyle:t}):w.a.createElement(Lh,{textStyle:t})}function Ph(e){var t=e.textStyle,n=e.logType,r=e.nLogs,a=ln().t,l=a("errors"===n?"your_project_has_errors":"view_warnings");return w.a.createElement(w.a.Fragment,null,w.a.createElement(qr,{type:"file-text-o"}),w.a.createElement("span",{className:"btn-toggle-logs-label toolbar-text","aria-label":l,style:t},"".concat(l," (").concat(r>9?"9+":r,")")))}function Lh(e){var t=e.textStyle,n=ln().t;return w.a.createElement(w.a.Fragment,null,w.a.createElement(qr,{type:"file-text-o"}),w.a.createElement("span",{className:"toolbar-text",style:t},n("view_logs")))}function Dh(e){var t=e.textStyle,n=ln().t;return w.a.createElement(w.a.Fragment,null,w.a.createElement(qr,{type:"file-pdf-o"}),w.a.createElement("span",{className:"toolbar-text",style:t},n("view_pdf")))}Oh.propTypes={onToggle:C.a.func.isRequired,logsState:C.a.shape({nErrors:C.a.number.isRequired,nWarnings:C.a.number.isRequired,nLogEntries:C.a.number.isRequired}),showLogs:C.a.bool.isRequired,showText:C.a.bool.isRequired,compileFailed:C.a.bool},Ph.propTypes={logType:C.a.string.isRequired,nLogs:C.a.number.isRequired,textStyle:C.a.object.isRequired},Lh.propTypes={textStyle:C.a.object.isRequired},Dh.propTypes={textStyle:C.a.object.isRequired};var Ih=Oh;var Fh=function(e,t,n){var r=Object(y.useRef)(),a=Object(y.useCallback)((function(){r.current=new ResizeObserver((function(e){n(e[0])}))}),[n]);Object(y.useLayoutEffect)((function(){if("ResizeObserver"in window){var t=e&&e.current;return t&&a(e.current),r.current&&t&&r.current.observe(t),function(){t&&function(e){r.current.unobserve(e)}(t)}}}),[e,t,a])};function jh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,l=void 0;try{for(var d,h=e[Symbol.iterator]();!(r=(d=h.next()).done)&&(n.push(d.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==h.return||h.return()}finally{if(a)throw l}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Nh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nh(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Bh(e){return e?Math.ceil(e.getBoundingClientRect().width):0}function zh(e){var t=e.compilerState,n=e.logsState,r=e.onRecompileFromScratch,a=e.onRecompile,l=e.onRunSyntaxCheckNow,d=e.onSetAutoCompile,h=e.onSetDraftMode,f=e.onSetSyntaxCheck,p=e.onToggleLogs,_=e.onSetSplitLayout,C=e.onSetFullLayout,S=e.onStopCompilation,k=e.outputFiles,x=e.pdfDownloadUrl,E=e.showLogs,A=e.splitLayout,T=Object(y.useRef)(!0),R=Object(y.useRef)(!0),O=Object(y.useRef)(),M=Object(y.useRef)(),P=Object(y.useRef)(),L=jh(Object(y.useState)(T.current),2),D=L[0],I=L[1],F=jh(Object(y.useState)(R.current),2),j=F[0],N=F[1],B=ln().t;var z=B(A?"full_screen":"split_screen"),H=A?"expand":"compress",U=w.a.createElement(va,{id:"expand-pdf-btn"},z);return Fh(O,n,(function(e){var n=e&&e.contentRect&&e.contentRect.width;if(n){!function(){if(M.current||0===M.current)return;var e=O.current.querySelector("#text-compiling"),t=O.current.querySelector("#text-recompile"),n=Bh(e),r=Bh(t),a=Math.abs(parseInt(n-r,10));M.current=a,r>n?P.current="recompile":r<n&&(P.current="compiling")}();var r,a,l=0,d=(r=O.current.querySelectorAll(".toolbar-item"),a=0,r.forEach((function(e){a+=Bh(e)})),a);O.current.querySelectorAll(".toolbar-text").forEach((function(e){"true"!==e.getAttribute("aria-hidden")&&(l+=Bh(e))}));var h=Bh(O.current.querySelector("#logs-toggle .toolbar-text"));T.current||R.current?!T.current&&R.current&&(d+=parseInt(l-h,10)):d+=l,M.current&&P.current&&(!t.isCompiling&&"compiling"===P.current||t.isCompiling&&"recompile"===P.current)&&(d+=M.current);var f=(d+=10)<n;f?!0!==R.current&&(N(!0),R.current=!0):function(e,t,n,r){var a=0,l=0,d=parseInt(n-r,10),h=Bh(O.current.querySelector("#logs-toggle"));R.current?(a=h,l=parseInt(h-t,10)):(a=parseInt(h+t,10),l=h);var f=parseInt(d-l,10),p=parseInt(f+a,10)<e;p!==R.current&&(N(p),R.current=p)}(n,h,d,l),I(f),T.current=f}})),w.a.createElement("div",{className:"toolbar toolbar-pdf",id:"toolbar-preview","data-testid":"toolbar-preview",ref:O},w.a.createElement("div",{className:"toolbar-pdf-left"},w.a.createElement(Rh,{compilerState:t,onRecompile:a,onRecompileFromScratch:r,onRunSyntaxCheckNow:l,onSetAutoCompile:d,onSetDraftMode:h,onSetSyntaxCheck:f,onStopCompilation:S,showText:D}),w.a.createElement(Ah,{isCompiling:t.isCompiling,outputFiles:k,pdfDownloadUrl:x,showText:D})),w.a.createElement("div",{className:"toolbar-pdf-right"},w.a.createElement(Ih,{logsState:n,showLogs:E,compileFailed:t.compileFailed,onToggle:p,showText:j}),w.a.createElement(Ia,{placement:"left",overlay:U},w.a.createElement("button",{onClick:function(){A?C():_()},className:"toolbar-pdf-expand-btn toolbar-item","aria-label":z},w.a.createElement(qr,{type:H})))))}zh.propTypes={compilerState:C.a.shape({isAutoCompileOn:C.a.bool.isRequired,isCompiling:C.a.bool.isRequired,isDraftModeOn:C.a.bool.isRequired,isSyntaxCheckOn:C.a.bool.isRequired,compileFailed:C.a.bool,logEntries:C.a.object.isRequired}),logsState:C.a.shape({nErrors:C.a.number.isRequired,nWarnings:C.a.number.isRequired,nLogEntries:C.a.number.isRequired}),showLogs:C.a.bool.isRequired,splitLayout:C.a.bool.isRequired,onRecompile:C.a.func.isRequired,onRecompileFromScratch:C.a.func.isRequired,onRunSyntaxCheckNow:C.a.func.isRequired,onSetAutoCompile:C.a.func.isRequired,onSetDraftMode:C.a.func.isRequired,onSetSyntaxCheck:C.a.func.isRequired,onToggleLogs:C.a.func.isRequired,onSetSplitLayout:C.a.func.isRequired,onSetFullLayout:C.a.func.isRequired,onStopCompilation:C.a.func.isRequired,pdfDownloadUrl:C.a.string,outputFiles:C.a.array};var Hh=zh;function Uh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,l=void 0;try{for(var d,h=e[Symbol.iterator]();!(r=(d=h.next()).done)&&(n.push(d.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==h.return||h.return()}finally{if(a)throw l}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Vh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vh(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var qh=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.initiallyExpanded,n=void 0!==t&&t,r=e.collapsedSize,a=void 0===r?"0":r,l=e.dimension,d=void 0===l?"height":l,h=e.classes,f=void 0===h?{}:h,p=Object(y.useRef)(),w=Object(y.useState)(n),_=Wh(w,2),C=_[0],S=_[1],k=Object(y.useState)({size:null,needsExpandCollapse:null}),x=Wh(k,2),E=x[0],A=x[1];Object(y.useLayoutEffect)((function(){var e=p.current;if(e){var t="height"===d?e.scrollHeight:e.scrollWidth,n=t>a;A(C?{size:t,needsExpandCollapse:n}:{size:n?a:t,needsExpandCollapse:n})}}),[C,a,d]);var T=De()("expand-collapse-container",f.container,C?null:f.containerCollapsed);function R(){S(!C)}return{isExpanded:C,needsExpandCollapse:E.needsExpandCollapse,expandableProps:{ref:p,style:Uh({},"height"===d?"height":"width","".concat(E.size,"px")),className:T},toggleProps:{onClick:R}}};function Gh(){return(Gh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Kh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,l=void 0;try{for(var d,h=e[Symbol.iterator]();!(r=(d=h.next()).done)&&(n.push(d.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==h.return||h.return()}finally{if(a)throw l}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Yh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yh(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xh(e){var t=e.headerTitle,n=e.headerIcon,r=e.rawContent,a=e.logType,l=e.formattedContent,d=e.extraInfoURL,h=e.level,f=e.sourceLocation,p=e.showSourceLocationLink,y=void 0===p||p,_=e.showCloseButton,C=void 0!==_&&_,S=e.entryAriaLabel,k=void 0===S?null:S,x=e.customClass,E=e.onSourceLocationClick,A=e.onClose,T=De()("log-entry",x);return w.a.createElement("div",{className:T,"aria-label":k},w.a.createElement(Jh,{level:h,sourceLocation:f,headerTitle:t,headerIcon:n,logType:a,showSourceLocationLink:y,onSourceLocationClick:function(e){e.preventDefault(),E(f)},showCloseButton:C,onClose:A}),r||l?w.a.createElement(Qh,{rawContent:r,formattedContent:l,extraInfoURL:d}):null)}function Jh(e){var t=e.sourceLocation,n=e.level,r=e.headerTitle,a=e.headerIcon,l=e.logType,d=e.showSourceLocationLink,h=void 0===d||d,f=e.showCloseButton,p=void 0!==f&&f,_=e.onSourceLocationClick,C=e.onClose,S=ln().t,k=Object(y.useRef)(),x=Kh(Object(y.useState)(!1),2),E=x[0],A=x[1];Fh(k,E,(function(e){var t=e.target,n=t.scrollWidth>t.clientWidth;A(n)}));var T=t?t.file:null,R=t?t.line:null,O=De()("log-entry-header",{"log-entry-header-error":"error"===n,"log-entry-header-warning":"warning"===n,"log-entry-header-typesetting":"typesetting"===n,"log-entry-header-raw":"raw"===n,"log-entry-header-success":"success"===n}),M=De()("log-entry-header-link",{"log-entry-header-link-error":"error"===n,"log-entry-header-link-warning":"warning"===n,"log-entry-header-link-typesetting":"typesetting"===n,"log-entry-header-link-raw":"raw"===n,"log-entry-header-link-success":"success"===n}),P=S("navigate_log_source",{location:T+(R?", ".concat(R):"")});var L=h&&T?"".concat(T).concat(R?", ".concat(R):""):null,D=L?w.a.createElement("button",{className:M,type:"button","aria-label":P,onClick:_},w.a.createElement(qr,{type:"chain"})," ",w.a.createElement("span",{ref:k,className:"log-entry-header-link-location"},"‪".concat(L,"‬"))):null,I=E?w.a.createElement(va,{id:L,className:"log-location-tooltip"},L):null,F=l?"".concat(l," ").concat(r):r;return w.a.createElement("header",{className:O},a?w.a.createElement("div",{className:"log-entry-header-icon-container"},a):null,w.a.createElement("h3",{className:"log-entry-header-title"},F),E?w.a.createElement(Ia,{placement:"left",overlay:I},D):D,p?w.a.createElement("button",{className:"btn-inline-link log-entry-header-link",type:"button","aria-label":S("dismiss_error_popup"),onClick:C},w.a.createElement("span",{"aria-hidden":"true"},"×")):null)}function Qh(e){var t=e.rawContent,n=e.formattedContent,r=e.extraInfoURL,a=qh({collapsedSize:150}),l=a.isExpanded,d=a.needsExpandCollapse,h=a.expandableProps,f=a.toggleProps,p=De()("log-entry-content-button-container",{"log-entry-content-button-container-collapsed":!l}),y=ln().t;return w.a.createElement("div",{className:"log-entry-content"},t?w.a.createElement("div",{className:"log-entry-content-raw-container"},w.a.createElement("div",h,w.a.createElement("pre",{className:"log-entry-content-raw"},t.trim())),d?w.a.createElement("div",{className:p},w.a.createElement("button",Gh({type:"button",className:"btn btn-xs btn-default log-entry-btn-expand-collapse"},f),l?w.a.createElement(w.a.Fragment,null,w.a.createElement(qr,{type:"angle-up"})," ",y("collapse")):w.a.createElement(w.a.Fragment,null,w.a.createElement(qr,{type:"angle-down"})," ",y("expand")))):null):null,n?w.a.createElement("div",{className:"log-entry-formatted-content"},n):null,r?w.a.createElement("div",{className:"log-entry-content-link"},w.a.createElement("a",{href:r,target:"_blank"},y("log_hint_extra_info"))):null)}Jh.propTypes={sourceLocation:C.a.shape({file:C.a.string,line:C.a.any,column:C.a.any}),level:C.a.string.isRequired,headerTitle:C.a.string,headerIcon:C.a.element,logType:C.a.string,showSourceLocationLink:C.a.bool,showCloseButton:C.a.bool,onSourceLocationClick:C.a.func,onClose:C.a.func},Qh.propTypes={rawContent:C.a.string,formattedContent:C.a.node,extraInfoURL:C.a.string},Xh.propTypes={sourceLocation:Jh.propTypes.sourceLocation,headerTitle:C.a.string,headerIcon:C.a.element,rawContent:C.a.string,logType:C.a.string,formattedContent:C.a.node,extraInfoURL:C.a.string,level:C.a.oneOf(["error","warning","typesetting","raw","success"]).isRequired,customClass:C.a.string,showSourceLocationLink:C.a.bool,showCloseButton:C.a.bool,entryAriaLabel:C.a.string,onSourceLocationClick:C.a.func,onClose:C.a.func};var Zh=Xh;function ef(e){var t,n,r=e.name,a=e.details,l=ln().t;return"sizeCheck"===r?(t=l("project_too_large"),n=w.a.createElement(w.a.Fragment,null,w.a.createElement("div",null,l("project_too_large_please_reduce")),w.a.createElement("ul",{className:"list-no-margin-bottom"},a.resources.map((function(e,t){return w.a.createElement("li",{key:t},e.path," — ",e.kbSize,"kb")}))))):"conflictedPaths"===r?(t=l("conflicting_paths_found"),n=w.a.createElement(w.a.Fragment,null,w.a.createElement("div",null,l("following_paths_conflict")),w.a.createElement("ul",{className:"list-no-margin-bottom"},a.map((function(e,t){return w.a.createElement("li",{key:t},"/",e.path)}))))):"mainFile"===r&&(t=l("main_file_not_found"),n=w.a.createElement(w.a.Fragment,null,l("please_set_main_file"))),t?w.a.createElement(Zh,{headerTitle:t,formattedContent:n,entryAriaLabel:l("validation_issue_entry_description"),level:"error"}):null}ef.propTypes={name:C.a.string.isRequired,details:C.a.oneOfType([C.a.object,C.a.array,C.a.bool])};var tf=ef,nf=n(85),rf=Object(y.createContext)();function of(e){var t=e.children,n={user:window.user,exposedSettings:nf.a};return w.a.createElement(rf.Provider,{value:n},t)}function af(e){var t=Object(y.useContext)(rf);return C.a.checkPropTypes(e,t,"data","ApplicationContext.Provider"),t}function sf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,l=void 0;try{for(var d,h=e[Symbol.iterator]();!(r=(d=h.next()).done)&&(n.push(d.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==h.return||h.return()}finally{if(a)throw l}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return lf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lf(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}rf.Provider.propTypes={value:C.a.shape({user:C.a.shape({id:C.a.string.isRequired}),exposedSettings:C.a.shape({enableSubscriptions:C.a.bool})})},of.propTypes={children:C.a.any};var cf=Object(y.createContext)();function uf(e){var t=e.children,n=e.loading,r=e.chatIsOpenAngular,a=e.setChatIsOpenAngular,l=e.openDoc,d=e.onlineUsersArray,h=window.brandVariation?{logoImgUrl:window.brandVariation.logo_url,brandVariationName:window.brandVariation.name,brandVariationHomeUrl:window.brandVariation.home_url}:void 0,f=window._ide.$scope.project&&window._ide.$scope.project.owner?window._ide.$scope.project.owner._id:null,p=sf(We("editor.ui.chat.open",!1),2),_=p[0],C=p[1],S=Object(y.useCallback)((function(){C(!_),a(!_)}),[_,a,C]);Object(y.useEffect)((function(){r?C(!0):_&&C(!1)}),[r,_,C]);var k={cobranding:h,loading:n,projectId:window.project_id,isProjectOwner:f===window.user.id,openDoc:l,onlineUsersArray:d,ui:{chatIsOpen:_,toggleChatOpen:S}};return w.a.createElement(cf.Provider,{value:k},t)}function df(e){var t=Object(y.useContext)(cf);return C.a.checkPropTypes(e,t,"data","EditorContext.Provider"),t}cf.Provider.propTypes={value:C.a.shape({cobranding:C.a.shape({logoImgUrl:C.a.string.isRequired,brandVariationName:C.a.string.isRequired,brandVariationHomeUrl:C.a.string.isRequired}),loading:C.a.bool,projectId:C.a.string.isRequired,isProjectOwner:C.a.bool})},uf.propTypes={children:C.a.any,loading:C.a.bool,chatIsOpenAngular:C.a.bool,setChatIsOpenAngular:C.a.func.isRequired,openDoc:C.a.func.isRequired,onlineUsersArray:C.a.array.isRequired};var hf=n(86);function PreviewError(e){var t,n,r=e.name,a=df({isProjectOwner:C.a.bool}).isProjectOwner,l=af({exposedSettings:C.a.shape({enableSubscriptions:C.a.bool}).isRequired}).exposedSettings.enableSubscriptions,d=ln().t;return"error"===r?(t=d("server_error"),n=w.a.createElement(w.a.Fragment,null,d("somthing_went_wrong_compiling"))):"renderingError"===r?(t=d("pdf_rendering_error"),n=w.a.createElement(w.a.Fragment,null,d("something_went_wrong_rendering_pdf"))):"clsiMaintenance"===r?(t=d("server_error"),n=w.a.createElement(w.a.Fragment,null,d("clsi_maintenance"))):"clsiUnavailable"===r?(t=d("server_error"),n=w.a.createElement(w.a.Fragment,null,d("clsi_unavailable"))):"tooRecentlyCompiled"===r?(t=d("server_error"),n=w.a.createElement(w.a.Fragment,null,d("too_recently_compiled"))):"compileTerminated"===r?(t=d("terminated"),n=w.a.createElement(w.a.Fragment,null,d("compile_terminated_by_user"))):"rateLimited"===r?(t=d("pdf_compile_rate_limit_hit"),n=w.a.createElement(w.a.Fragment,null,d("project_flagged_too_many_compiles"))):"compileInProgress"===r?(t=d("pdf_compile_in_progress_error"),n=w.a.createElement(w.a.Fragment,null,d("pdf_compile_try_again"))):"timedout"===r?(t=d("timedout"),n=w.a.createElement(w.a.Fragment,null,d("proj_timed_out_reason"),w.a.createElement("div",null,w.a.createElement("a",{href:"https://www.overleaf.com/learn/how-to/Why_do_I_keep_getting_the_compile_timeout_error_message%3F",target:"_blank"},d("learn_how_to_make_documents_compile_quickly"))))):"autoCompileDisabled"===r&&(t=d("autocompile_disabled"),n=w.a.createElement(w.a.Fragment,null,d("autocompile_disabled_reason"))),t?w.a.createElement(w.a.Fragment,null,w.a.createElement(Zh,{headerTitle:t,formattedContent:n,entryAriaLabel:d("compile_error_entry_description"),level:"error"}),"timedout"===r&&l?w.a.createElement(ff,{isProjectOwner:a}):null):null}function ff(e){var t=e.isProjectOwner,n=ln().t;var r=w.a.createElement(w.a.Fragment,null,w.a.createElement("p",null,n("free_accounts_have_timeout_upgrade_to_increase")),w.a.createElement("p",null,n("plus_upgraded_accounts_receive"),":"),w.a.createElement("div",null,w.a.createElement("ul",{className:"list-unstyled"},w.a.createElement("li",null,w.a.createElement(qr,{type:"check"})," ",n("unlimited_projects")),w.a.createElement("li",null,w.a.createElement(qr,{type:"check"})," ",n("collabs_per_proj",{collabcount:"Multiple"})),w.a.createElement("li",null,w.a.createElement(qr,{type:"check"})," ",n("full_doc_history")),w.a.createElement("li",null,w.a.createElement(qr,{type:"check"})," ",n("sync_to_dropbox")),w.a.createElement("li",null,w.a.createElement(qr,{type:"check"})," ",n("sync_to_github")),w.a.createElement("li",null,w.a.createElement(qr,{type:"check"})," ",n("compile_larger_projects")))),t?w.a.createElement("p",{className:"text-center"},w.a.createElement("button",{className:"btn btn-success row-spaced-small",onClick:function(){Object(hf.a)("compile-timeout")}},n("start_free_trial"))):null);return w.a.createElement(Zh,{headerTitle:n(t?"upgrade_for_longer_compiles":"ask_proj_owner_to_upgrade_for_longer_compiles"),formattedContent:r,entryAriaLabel:n(t?"upgrade_for_longer_compiles":"ask_proj_owner_to_upgrade_for_longer_compiles"),level:"success"})}PreviewError.propTypes={name:C.a.string.isRequired},ff.propTypes={isProjectOwner:C.a.bool.isRequired};var pf=PreviewError;function gf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,l=void 0;try{for(var d,h=e[Symbol.iterator]();!(r=(d=h.next()).done)&&(n.push(d.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==h.return||h.return()}finally{if(a)throw l}}return n}(e,t)||vf(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mf(e){return function(e){if(Array.isArray(e))return yf(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||vf(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vf(e,t){if(e){if("string"==typeof e)return yf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yf(e,t):void 0}}function yf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function bf(e){var t=e.logEntries,n=void 0===t?{all:[],errors:[],warnings:[],typesetting:[]}:t,r=e.rawLog,a=void 0===r?"":r,l=e.validationIssues,d=void 0===l?{}:l,h=e.errors,f=void 0===h?{}:h,p=e.outputFiles,y=void 0===p?[]:p,_=e.isClearingCache,C=e.isCompiling,S=void 0!==C&&C,k=e.onLogEntryLocationClick,x=e.onClearCache,E=ln().t,A=n.all,T=void 0===A?[]:A,R=n.errors,O=void 0===R?[]:R,M=n.warnings,P=void 0===M?[]:M,L=n.typesetting,D=void 0===L?[]:L,I=Object.keys(f).map((function(e,t){return w.a.createElement(pf,{key:t,name:e})})),F=Object.keys(d).map((function(e,t){return w.a.createElement(tf,{key:t,name:e,details:d[e]})})),j=[].concat(mf(O),mf(P),mf(D)).map((function(e,t){return w.a.createElement(Zh,{key:t,headerTitle:e.message,rawContent:e.content,logType:e.type,formattedContent:e.humanReadableHintComponent,extraInfoURL:e.extraInfoURL,level:e.level,entryAriaLabel:E("log_entry_description",{level:e.level}),sourceLocation:{file:e.file,line:e.line,column:e.column},onSourceLocationClick:k})})),N=w.a.createElement("div",{className:"logs-pane-actions"},w.a.createElement("button",{className:"btn btn-sm btn-danger logs-pane-actions-clear-cache",onClick:x,disabled:_||S},_?w.a.createElement(qr,{type:"refresh",spin:!0}):w.a.createElement(qr,{type:"trash-o"})," ",w.a.createElement("span",null,E("clear_cached_files"))),w.a.createElement(Ho,{id:"dropdown-files-logs-pane",dropup:!0,pullRight:!0,disabled:S},w.a.createElement(Ho.Toggle,{className:"btn btn-sm btn-info dropdown-toggle",title:E("other_logs_and_files"),bsStyle:"info"}),w.a.createElement(Ho.Menu,{id:"dropdown-files-logs-pane-list"},w.a.createElement(xh,{fileList:y})))),B=w.a.createElement(Zh,{headerTitle:E("raw_logs"),rawContent:a,entryAriaLabel:E("raw_logs_description"),level:"raw"});return w.a.createElement("div",{className:"logs-pane"},w.a.createElement("div",{className:"logs-pane-content"},w.a.createElement(wf,null),f?I:null,d?F:null,T.length>0?j:null,a&&""!==a?B:null,N))}function wf(){var e=ln().t,t=gf(We("logs_pane.dismissed_beta_notice",!1),2),n=t[0],r=t[1];return n?null:w.a.createElement("div",{className:"log-entry"},w.a.createElement("div",{className:"log-entry-header log-entry-header-raw"},w.a.createElement("div",{className:"log-entry-header-icon-container"},w.a.createElement("span",{className:"beta-badge"})),w.a.createElement("h3",{className:"log-entry-header-title"},e("logs_pane_beta_message")),w.a.createElement("a",{href:"/beta/participate",target:"_blank",rel:"noopener noreferrer",className:"log-entry-header-link log-entry-header-link-raw"},w.a.createElement("span",{className:"log-entry-header-link-location"},e("give_feedback"))),w.a.createElement("button",{className:"btn-inline-link log-entry-header-link",type:"button","aria-label":e("dismiss"),onClick:function(){r(!0)}},w.a.createElement("span",{"aria-hidden":"true"},"×"))))}bf.propTypes={logEntries:C.a.shape({all:C.a.array,errors:C.a.array,warning:C.a.array,typesetting:C.a.array}),rawLog:C.a.string,outputFiles:C.a.array,isClearingCache:C.a.bool,isCompiling:C.a.bool,onLogEntryLocationClick:C.a.func.isRequired,onClearCache:C.a.func.isRequired,validationIssues:C.a.object,errors:C.a.object};var _f=bf;function Cf(e){var t=e.logEntry,n=e.onGoToErrorLocation,r=e.onViewLogs,a=e.onClose,l=ln().t;return w.a.createElement("div",{className:"first-error-popup",role:"alertdialog","aria-label":l("first_error_popup_label")},w.a.createElement(Zh,{headerTitle:t.message,headerIcon:w.a.createElement(Sf,null),rawContent:t.content,formattedContent:t.humanReadableHintComponent,extraInfoURL:t.extraInfoURL,level:t.level,showLineAndNoLink:!1,showCloseButton:!0,customClass:"log-entry-first-error-popup",onClose:a}),w.a.createElement("div",{className:"first-error-popup-actions"},w.a.createElement("button",{className:"btn btn-info btn-xs first-error-btn",type:"button",onClick:function(){var e=t.file,r=t.line,a=t.column;n({file:e,line:r,column:a})}},w.a.createElement(qr,{type:"chain"})," ",l("go_to_error_location")),w.a.createElement("button",{className:"btn btn-info btn-xs first-error-btn",type:"button",onClick:r},w.a.createElement(qr,{type:"file-text-o"})," ",l("view_all_errors"))))}function Sf(){var e=(0,ln().t)("logs_pane_beta_message_popup"),t=w.a.createElement(va,{id:"file-tree-badge-tooltip"},e);return w.a.createElement(Ia,{placement:"bottom",overlay:t,delayHide:100},w.a.createElement("a",{href:"/beta/participate",target:"_blank",rel:"noopener noreferrer",className:"beta-badge"},w.a.createElement("span",{className:"sr-only"},e)))}Cf.propTypes={logEntry:C.a.object.isRequired,onGoToErrorLocation:C.a.func.isRequired,onViewLogs:C.a.func.isRequired,onClose:C.a.func.isRequired};var kf=Cf;function xf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,l=void 0;try{for(var d,h=e[Symbol.iterator]();!(r=(d=h.next()).done)&&(n.push(d.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==h.return||h.return()}finally{if(a)throw l}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ef(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ef(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ef(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Af(e){var t=e.compilerState,n=e.onClearCache,r=e.onRecompile,a=e.onRecompileFromScratch,l=e.onRunSyntaxCheckNow,d=e.onSetAutoCompile,h=e.onSetDraftMode,f=e.onSetSyntaxCheck,p=e.onToggleLogs,_=e.onSetFullLayout,C=e.onSetSplitLayout,S=e.onStopCompilation,k=e.outputFiles,x=e.pdfDownloadUrl,E=e.onLogEntryLocationClick,A=e.showLogs,T=e.splitLayout,R=ln().t,O=xf(Object(y.useState)(t.lastCompileTimestamp),2),M=O[0],P=O[1],L=xf(Object(y.useState)(!1),2),D=L[0],I=L[1],F=xf(Object(y.useState)(!1),2),j=F[0],N=F[1];M<t.lastCompileTimestamp&&(P(t.lastCompileTimestamp),I(!1)),A&&!D&&I(!0);var B=t.logEntries&&t.logEntries.errors?t.logEntries.errors.length:0,z=t.logEntries&&t.logEntries.warnings?t.logEntries.warnings.length:0,H=t.logEntries&&t.logEntries.all?t.logEntries.all.length:0,U=t.errors&&Object.keys(t.errors).length>0&&t.compileFailed&&!t.isCompiling,W=t.validationIssues&&Object.keys(t.validationIssues).length>0&&t.compileFailed&&!t.isCompiling,V=B>0&&!D&&!j&&!t.isCompiling;return w.a.createElement(w.a.Fragment,null,w.a.createElement(Hh,{compilerState:t,logsState:{nErrors:B,nWarnings:z,nLogEntries:H},showLogs:A,onRecompile:r,onRecompileFromScratch:a,onRunSyntaxCheckNow:l,onSetAutoCompile:d,onSetDraftMode:h,onSetSyntaxCheck:f,onToggleLogs:p,onSetSplitLayout:C,onSetFullLayout:_,onStopCompilation:S,outputFiles:k,pdfDownloadUrl:x,splitLayout:T}),w.a.createElement("span",{"aria-live":"polite",className:"sr-only"},U?R("compile_error_description"):""),w.a.createElement("span",{"aria-live":"polite",className:"sr-only"},W?R("validation_issue_description"):""),w.a.createElement("span",{"aria-live":"polite",className:"sr-only"},B&&!t.isCompiling?R("n_errors",{count:B}):""),w.a.createElement("span",{"aria-live":"polite",className:"sr-only"},z&&!t.isCompiling?R("n_warnings",{count:z}):""),V?w.a.createElement(kf,{logEntry:t.logEntries.errors[0],onGoToErrorLocation:E,onViewLogs:p,onClose:function(){N(!0)}}):null,A?w.a.createElement(_f,{logEntries:t.logEntries,rawLog:t.rawLog,validationIssues:t.validationIssues,errors:t.errors,outputFiles:k,onLogEntryLocationClick:E,isClearingCache:t.isClearingCache,isCompiling:t.isCompiling,onClearCache:n}):null)}Af.propTypes={compilerState:C.a.shape({isAutoCompileOn:C.a.bool.isRequired,isCompiling:C.a.bool.isRequired,isDraftModeOn:C.a.bool.isRequired,isSyntaxCheckOn:C.a.bool.isRequired,isClearingCache:C.a.bool.isRequired,lastCompileTimestamp:C.a.number,logEntries:C.a.object,validationIssues:C.a.object,errors:C.a.object,rawLog:C.a.string,compileFailed:C.a.bool}),onClearCache:C.a.func.isRequired,onLogEntryLocationClick:C.a.func.isRequired,onRecompile:C.a.func.isRequired,onRecompileFromScratch:C.a.func.isRequired,onRunSyntaxCheckNow:C.a.func.isRequired,onSetAutoCompile:C.a.func.isRequired,onSetDraftMode:C.a.func.isRequired,onSetSyntaxCheck:C.a.func.isRequired,onSetSplitLayout:C.a.func.isRequired,onSetFullLayout:C.a.func.isRequired,onStopCompilation:C.a.func.isRequired,onToggleLogs:C.a.func.isRequired,outputFiles:C.a.array,pdfDownloadUrl:C.a.string,showLogs:C.a.bool.isRequired,splitLayout:C.a.bool.isRequired};var Tf=Af,$f="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),Rf=new Uint8Array(16);function Of(){if(!$f)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return $f(Rf)}for(var Mf=[],Pf=0;Pf<256;++Pf)Mf[Pf]=(Pf+256).toString(16).substr(1);var Lf=function(e,t){var n=t||0,r=Mf;return[r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]]].join("")};var Df=function(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||Of)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var l=0;l<16;++l)t[r+l]=a[l];return t||Lf(a)},If=function(e){var t;void 0===e&&(e=y.Fragment);return{component:function(n){var r=Object(y.useState)([]),a=r[0],l=r[1];return Object(y.useEffect)((function(){t=function(e){return l((function(t){return t.push(e),[].concat(t)})),{update:function(t){l((function(n){var r=n.find((function(t){return(null==t?void 0:t.key)===e.key}));return r?(r.props=t,[].concat(n)):n}))},remove:function(){l((function(t){var n=t.findIndex((function(t){return(null==t?void 0:t.key)===e.key}));return-1===n?t:(t[n]=void 0,[].concat(t))}))}}}}),[]),w.a.createElement(e,Object.assign({},n),a.map((function(e){if(!e)return null;var t=e.key,n=e.node,r=e.component,a=e.props;return Object(xi.createPortal)(w.a.createElement(r,Object.assign({key:t},a)),n)})))},use:function(e){return function(n){var r=Object(y.useRef)(Df()),a=Object(y.useRef)(null),l=Object(y.useRef)();return Object(y.useEffect)((function(){l.current&&l.current.update(n)}),[n]),Object(y.useEffect)((function(){if(a.current&&a.current.parentElement)return l.current=t({key:r.current,node:a.current.parentElement,component:e,props:n}),l.current.remove}),[]),w.a.createElement("div",{ref:a,style:{display:"none"}})}}}};function Ff(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ff(Object(n),!0).forEach((function(t){Nf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ff(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Nf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bf(e,t){var n=e[e.length-1];return n&&t&&t.user&&t.user.id&&t.user.id===n.user.id&&t.timestamp-n.timestamp<3e5?e.slice(0,e.length-1).concat(jf(jf({},n),{},{id:t.id,timestamp:t.timestamp,contents:n.contents.concat(t.content)})):e.slice(0).concat({id:t.id,user:t.user,timestamp:t.timestamp,contents:[t.content]})}var zf=n(435);function Hf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Uf=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.messages=[],this.loading=!1,this.atEnd=!1,this._user=t,this._projectId=n,this._nextBeforeTimestamp=null,this._justSent=!1,this._emitter=new Lc,this._onNewChatMessage=function(e){e&&e.user&&e.user.id===r._user.id&&r._justSent||(r.messages=Bf(r.messages,e),r._emitter.emit("updated"),r._emitter.emit("message-received",e),window.dispatchEvent(new CustomEvent("Chat.MessageReceived",{detail:{message:e}}))),r._justSent=!1},window._ide.socket.on("new-chat-message",this._onNewChatMessage)}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){window._ide.socket.removeListener("new-chat-message",this._onNewChatMessage),this._emitter.off()}},{key:"on",value:function(e,t){this._emitter.on(e,t)}},{key:"off",value:function(e,t){this._emitter.off(e,t)}},{key:"loadMoreMessages",value:function(){var e=this;if(!this.atEnd){this.loading=!0,this._emitter.emit("updated");var t,n,r="/project/".concat(window.project_id,"/messages?limit=").concat(50);return this._nextBeforeTimestamp&&(r+="&before=".concat(this._nextBeforeTimestamp)),(t=r,Y(t,V(V({},n),{},{method:"GET"}))).then((function(t){var n=t||[];e.loading=!1,n.length<50&&(e.atEnd=!0),n.reverse(),e.messages=function(e,t){var n=e.slice(0);return t.slice(0).reverse().forEach((function(e){var t=n[0];t&&e&&e.user&&e.user.id===t.user.id&&t.timestamp-e.timestamp<3e5?(t.id=e.id,t.timestamp=e.timestamp,t.contents=[e.content].concat(t.contents)):n.unshift({id:e.id,user:e.user,timestamp:e.timestamp,contents:[e.content]})})),n}(e.messages,n),e._nextBeforeTimestamp=e.messages[0]?e.messages[0].timestamp:void 0,e._emitter.emit("updated")}))}}},{key:"sendMessage",value:function(e){if(e){var t={content:e,_csrf:window.csrfToken};this._justSent=!0,this.messages=Bf(this.messages,{id:Object(zf.v4)(),user:this._user,content:e,timestamp:Date.now()});var n="/project/".concat(this._projectId,"/messages");return this._emitter.emit("updated"),G(n,{body:t})}}}])&&Hf(t.prototype,n),r&&Hf(t,r),e}();function Wf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,l=void 0;try{for(var d,h=e[Symbol.iterator]();!(r=(d=h.next()).done)&&(n.push(d.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==h.return||h.return()}finally{if(a)throw l}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Vf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vf(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var qf,Gf,Kf=!1;function Yf(e){document.hasFocus()||Kf||(qf=window.document.title,window.document.title=e,Kf=!0,Gf=setInterval((function(){window.document.title===qf?window.document.title=e:window.document.title=qf}),800))}function Xf(){Kf&&(clearInterval(Gf),window.document.title=qf,qf=void 0,Kf=!1)}var Jf=function(){var e=Wf(Object(y.useState)(document.hasFocus()),2),t=e[0],n=e[1];return Object(y.useEffect)((function(){function e(){n(!0)}function t(){n(!1)}return window.addEventListener("focus",e),window.addEventListener("blur",t),function(){window.removeEventListener("focus",e),window.removeEventListener("blur",t)}}),[]),{hasFocus:t,flashTitle:Yf,stopFlashingTitle:Xf}};function Qf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,l=void 0;try{for(var d,h=e[Symbol.iterator]();!(r=(d=h.next()).done)&&(n.push(d.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==h.return||h.return()}finally{if(a)throw l}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Zf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zf(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ep=Object(y.createContext)();function tp(e){var t=e.children,n=Jf(),r=n.hasFocus,a=n.flashTitle,l=n.stopFlashingTitle,d=af().user,h=df(),f=h.projectId,p=h.ui.chatIsOpen,_=Qf(Object(y.useState)(0),2),C=_[0],S=_[1];var k=Qf(Object(y.useState)(!1),2),x=k[0],E=k[1],A=Qf(Object(y.useState)(!1),2),T=A[0],R=A[1],O=Qf(Object(y.useState)([]),2),M=O[0],P=O[1],L=Qf(Object(y.useState)((function(){return new Uf(d,f)})),1)[0];Object(y.useEffect)((function(){r&&(l(),p&&S(0)),!r&&C>0&&a("New Message")}),[r,p,C,a,l]),Object(y.useEffect)((function(){function e(){E(L.atEnd),R(L.loading),P(L.messages)}return L.on("updated",e),L.on("message-received",(function(){S((function(e){return e+1}))})),e(),function(){return L.destroy()}}),[L]);var D=Object(y.useCallback)((function(){return L.loadMoreMessages()}),[L]),I=Object(y.useCallback)((function(e){return L.sendMessage(e)}),[L]),F={userId:d.id,atEnd:x,loading:T,messages:M,unreadMessageCount:C,resetUnreadMessageCount:function(){S(0)},loadMoreMessages:D,sendMessage:I};return w.a.createElement(ep.Provider,{value:F},t)}function np(){return Object(y.useContext)(ep)}function rp(e){var t=e.children,n=e.editorLoading,r=e.chatIsOpenAngular,a=e.setChatIsOpenAngular,l=e.openDoc,d=e.onlineUsersArray;return w.a.createElement(of,null,w.a.createElement(uf,{loading:n,chatIsOpenAngular:r,setChatIsOpenAngular:a,openDoc:l,onlineUsersArray:d},w.a.createElement(tp,null,t)))}tp.propTypes={children:C.a.any},rp.propTypes={children:C.a.any,editorLoading:C.a.bool,chatIsOpenAngular:C.a.bool,setChatIsOpenAngular:C.a.func.isRequired,openDoc:C.a.func.isRequired,onlineUsersArray:C.a.array.isRequired};var ip=If(rp);function op(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return ap(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ap(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,d=!0,h=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return d=e.done,e},e:function(e){h=!0,l=e},f:function(){try{d||null==n.return||n.return()}finally{if(h)throw l}}}}function ap(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}a.a.filter("trusted",["$sce",function(e){return function(t){return e.trustAsResourceUrl(t)}}]),a.a.controller("PdfController",["$scope","$http","ide","$modal","synctex","eventTracking","localStorage","$q",function(e,t,n,r,a,l,d,h){var f=!0;e.pdf.view=e.pdf.url?"pdf":"uncompiled",e.pdf.clearingCache=!1,e.shouldShowLogs=!1,e.shouldDropUp=!1,e.setPdfSplitLayout=function(){e.$applyAsync((function(){return e.switchToSideBySideLayout("editor")}))},e.setPdfFullLayout=function(){e.$applyAsync((function(){return e.switchToFlatLayout("pdf")}))};var p=document.querySelector(".pdf-logs"),y=p&&p.querySelector(".files-dropdown");function w(e){var t=[];for(var n in e){var r=e[n];t.push("".concat(n,"=").concat(r))}return t.length?"?".concat(t.join("&")):""}e.$watch("shouldShowLogs",(function(t){t&&e.$applyAsync((function(){e.shouldDropUp=(null==y||null==p?0:y.getBoundingClientRect().top/p.getBoundingClientRect().height)>.65}))})),e.trackLogHintsLearnMore=function(){l.sendMB("logs-hints-learn-more")},ace.require("ace/lib/useragent").isMac?e.modifierKey="Cmd":e.modifierKey="Ctrl",e.$on("project:joined",(function(){f&&(f=!1,e.recompile({isAutoCompileOnLoad:!0}),e.hasPremiumCompile="priority"===e.project.features.compileGroup)})),e.$on("pdf:error:display",(function(){e.pdf.view="errors",e.pdf.renderingError=!0}));var _=null;function C(){if(!e.pdf.compiling&&e.autocompile_enabled&&e.pdf.uncompiled){var t=n.$scope.hasLintingError&&n.$scope.settings.syntaxValidation;if(e.autoCompileLintingError!==t&&e.$apply((function(){e.autoCompileLintingError=t,e.startedTryingAutoCompileAt=Date.now(),e.docLastChangedAt=Date.now()})),!t||!e.stop_on_validation_error){var r=Math.max(e.startedTryingAutoCompileAt,e.lastFinishedCompileAt||0),a=Date.now()-r,l=Date.now()-e.docLastChangedAt,d=!1;(l>2e3||a>5e3||a<0||l<0)&&(d=!0),d&&e.recompile({isAutoCompileOnChange:!0})}}}function S(){null==e.docLastChangedAt?e.pdf.uncompiled=!1:null==e.lastStartedCompileAt||e.docLastChangedAt>e.lastStartedCompileAt?e.pdf.uncompiled=!0:e.pdf.uncompiled=!1}function k(){e.docLastChangedAt=Date.now(),S()}function x(e,t){return e?"".concat(e).concat(t):t}function E(r,a){var d,h,f;function p(e,r){var l={method:"GET",url:x(a.pdfDownloadDomain,r.url),params:{compileGroup:n.compileGroup,clsiserverid:n.clsiServerId}};return t(l)}e.pdf.logEntries={},(null!=a?a.validation:void 0)?h=r["output.chktex"]:(f=r["output.log"],d=r["output.blg"]);var y,w={all:[],errors:[],warnings:[],typesetting:[]};function _(e){for(var t=0,n=["all","errors","warnings","typesetting"];t<n.length;t++){var r=n[t];if(e[r]){if(null!=e.type){var a,l=op(e[r]);try{for(l.s();!(a=l.n()).done;){a.value.type=e.type}}catch(e){l.e(e)}finally{l.f()}}w[r]=w[r].concat(e[r])}}}function handleError(){e.pdf.logEntries={},e.pdf.rawLog=""}if(null!=f&&(y=p(0,f).then((function(t){return function(t){e.pdf.rawLog=t;var n=bh(t,{ignoreDuplicates:!0}),r=n.errors,a=n.warnings,l=n.typesetting;_({all:[].concat(r,a,l),errors:r,warnings:a,typesetting:l})}(t.data)})),null!=d&&(y=y.then((function(){return p(0,d).then((function(e){return t=e.data,n=_h.a.parse(t,{}),r=n.errors,a=n.warnings,void _({type:"BibTeX:",all:[].concat(r,a),errors:r,warnings:a});var t,n,r,a}),(function(){return!0}))})))),null!=y?y.catch(handleError):handleError(),null!=h){var C=function(){return p(0,h).then((function(e){return function(e){var t,n=[],r=[],a=op(e.split("\n"));try{for(a.s();!(t=a.n()).done;){var d;if(d=t.value.match(/^(\S+):(\d+):(\d+): (Error|Warning): (.*)/)){var h={file:d[1],line:d[2],column:d[3],level:d[4].toLowerCase(),message:"".concat(d[4],": ").concat(d[5])};"error"===h.level?n.push(h):r.push(h)}}}catch(e){a.e(e)}finally{a.f()}var f=[].concat(n,r),p=bh({type:"Syntax",all:f,errors:n,warnings:r});l.sendMB("syntax-check-return-count",{errors:n.length,warnings:r.length}),_(p)}(e.data)}))};y=null!=y?y.then(C,C):C()}null!=y&&y.finally((function(){e.pdf.logEntries=w,e.pdf.logEntryAnnotations={};var t,r=op(w.all);try{for(r.s();!(t=r.n()).done;){var a=t.value;if(null!=a.file){a.file=A(a.file);var l=n.fileTreeManager.findEntityByPath(a.file);null!=l&&(e.pdf.logEntryAnnotations[l.id]||(e.pdf.logEntryAnnotations[l.id]=[]),e.pdf.logEntryAnnotations[l.id].push({row:a.line-1,type:"error"===a.level?"error":"warning",text:a.message}))}}}catch(e){r.e(e)}finally{r.f()}}))}function A(e){e=(e=e.replace(/^(.*)\/compiles\/[0-9a-f]{24}(-[0-9a-f]{24})?\/(\.\/)?/,"")).replace(/^\/compile\//,"");var t=n.fileTreeManager.getRootDocDirname();return null!=t&&(e=e.replace(/^\.\//,t+"/")),e}e.changesToAutoCompile=!1,e.$watch("pdf.uncompiled",(function(t){e.pdf.uncompiled&&e.autocompile_enabled&&!e.ui.pdfHidden?(e.changesToAutoCompile=!0,null==_&&(e.startedTryingAutoCompileAt=Date.now(),_=setInterval(C,200))):(e.changesToAutoCompile=!1,clearInterval(_),_=null)})),n.$scope.$on("doc:changed",(function(){e.autoCompileLintingError=!1,k()})),n.$scope.$on("doc:saved",(function(){k()})),e.$watch("pdf.compiling",(function(e){S()})),e.autocompile_enabled=d("autocompile_enabled:".concat(e.project_id))||!1,e.$watch("autocompile_enabled",(function(t,n){null!=t&&n!==t&&(!0===t&&C(),d("autocompile_enabled:".concat(e.project_id),t),l.sendMB("autocompile-setting-changed",{value:t}))})),e.stop_on_validation_error=d("stop_on_validation_error:".concat(e.project_id)),null==e.stop_on_validation_error&&(e.stop_on_validation_error=!0),e.$watch("stop_on_validation_error",(function(t,n){null!=t&&n!==t&&d("stop_on_validation_error:".concat(e.project_id),t)})),e.draft=d("draft:".concat(e.project_id))||!1,e.$watch("draft",(function(t,n){null!=t&&n!==t&&d("draft:".concat(e.project_id),t)})),e.recompile=function(r){null==r&&(r={}),e.pdf.compiling||(l.sendMBSampled("editor-recompile-sampled",r),e.lastStartedCompileAt=Date.now(),e.pdf.compiling=!0,e.pdf.isAutoCompileOnLoad=null!=r?r.isAutoCompileOnLoad:void 0,(null!=r?r.force:void 0)&&(e.stop_on_validation_error=!1,e.shouldShowLogs=!1,l.sendMB("syntax-check-turn-off-checking")),(null!=r?r.try:void 0)&&(e.shouldShowLogs=!1,l.sendMB("syntax-check-try-compile-anyway")),n.$scope.$broadcast("flush-changes"),r.rootDocOverride_id=function(){var e=n.editorManager.getCurrentDocValue();if(null==e)return null;var t,r=op(e.split("\n"));try{for(r.s();!(t=r.n()).done;){var a=t.value;if(/^[^%]*\\documentclass/.test(a))return n.editorManager.getCurrentDocId()}}catch(e){r.e(e)}finally{r.f()}return null}(),function(n){null==n&&(n={});var r,a="/project/".concat(e.project_id,"/compile"),d={};return(n.isAutoCompileOnLoad||n.isAutoCompileOnChange)&&(d.auto_compile=!0),e.check&&(e.pdf.logEntries={}),e.check=!!n.check,n.check&&l.sendMB("syntax-check-request"),"error"===(r=e.check?"validate":n.try?"silent":e.stop_on_validation_error?"error":"silent")&&(r="silent"),t.post(a,{rootDoc_id:n.rootDocOverride_id||null,draft:e.draft,check:r,incrementalCompilesEnabled:!e.pdf.error,_csrf:window.csrfToken},{params:d})}(r).then((function(t){var r=t.data;e.pdf.view="pdf",e.pdf.compiling=!1,function(t){var r=e.pdf.url,a=t.pdfDownloadDomain;e.pdf.error=!1,e.pdf.timedout=!1,e.pdf.failure=!1,e.pdf.url=null,e.pdf.clsiMaintenance=!1,e.pdf.tooRecentlyCompiled=!1,e.pdf.renderingError=!1,e.pdf.projectTooLarge=!1,e.pdf.compileTerminated=!1,e.pdf.compileExited=!1,e.pdf.failedCheck=!1,e.pdf.compileInProgress=!1,e.pdf.autoCompileDisabled=!1,window.showNewLogsUI&&(e.clsiErrors={});var d={};if(null!=t.outputFiles){var h,f=op(t.outputFiles);try{for(f.s();!(h=f.n()).done;){var p=h.value;d[p.path]=p}}catch(e){f.e(e)}finally{f.f()}}var y={};if(null!=t.compileGroup&&(n.compileGroup=y.compileGroup=t.compileGroup),null!=t.clsiServerId&&(n.clsiServerId=y.clsiserverid=t.clsiServerId),"success"!==t.status||d["output.pdf"]||(t.status="failure"),"success"===t.status){e.pdf.view="pdf",e.shouldShowLogs=!1,e.pdf.lastCompileTimestamp=Date.now(),e.pdf.validation={},e.pdf.url=x(a,d["output.pdf"].url),e.pdf.url+=w(y),y.popupDownload=!0;var _=d["output.pdf"].build;e.pdf.downloadUrl="/download/project/".concat(e.project_id,"/build/").concat(_,"/output/output.pdf")+w(y),E(d,{pdfDownloadDomain:a})}else"timedout"===t.status?(e.pdf.view="errors",e.pdf.timedout=!0,E(d,{pdfDownloadDomain:a}),e.hasPremiumCompile||n.$scope.project.owner._id!==n.$scope.user.id||l.send("subscription-funnel","editor-click-feature","compile-timeout")):"terminated"===t.status?(e.pdf.view="errors",e.pdf.compileTerminated=!0,E(d,{pdfDownloadDomain:a})):["validation-fail","validation-pass"].includes(t.status)?(e.pdf.view="pdf",e.pdf.url=r,e.shouldShowLogs=!0,"validation-fail"===t.status&&(e.pdf.failedCheck=!0),l.sendMB("syntax-check-".concat(t.status)),E(d,{validation:!0,pdfDownloadDomain:a})):"exited"===t.status?(e.pdf.view="pdf",e.pdf.compileExited=!0,e.pdf.url=r,e.shouldShowLogs=!0,E(d,{pdfDownloadDomain:a})):"autocompile-backoff"===t.status?e.pdf.isAutoCompileOnLoad?e.pdf.view="uncompiled":(e.pdf.view="errors",e.pdf.autoCompileDisabled=!0,e.autocompile_enabled=!1,l.sendMB("autocompile-rate-limited",{hasPremiumCompile:e.hasPremiumCompile})):"project-too-large"===t.status?(e.pdf.view="errors",e.pdf.projectTooLarge=!0):"failure"===t.status?(e.pdf.view="errors",e.pdf.failure=!0,e.shouldShowLogs=!0,E(d,{pdfDownloadDomain:a})):"clsi-maintenance"===t.status?(e.pdf.view="errors",e.pdf.clsiMaintenance=!0):"unavailable"===t.status?(e.pdf.view="errors",e.pdf.clsiUnavailable=!0):"too-recently-compiled"===t.status?(e.pdf.view="errors",e.pdf.tooRecentlyCompiled=!0):"validation-problems"===t.status?(e.pdf.view="validation-problems",e.pdf.validation=t.validationProblems,e.shouldShowLogs=!1):"compile-in-progress"===t.status?(e.pdf.view="errors",e.pdf.compileInProgress=!0):(e.pdf.view="errors",e.pdf.error=!0);window.showNewLogsUI&&(e.pdf.compileFailed=!1,e.clsiErrors=Object.assign({},e.pdf.error?{error:!0}:null,e.pdf.renderingError?{renderingError:!0}:null,e.pdf.clsiMaintenance?{clsiMaintenance:!0}:null,e.pdf.clsiUnavailable?{clsiUnavailable:!0}:null,e.pdf.tooRecentlyCompiled?{tooRecentlyCompiled:!0}:null,e.pdf.compileTerminated?{compileTerminated:!0}:null,e.pdf.rateLimited?{rateLimited:!0}:null,e.pdf.compileInProgress?{compileInProgress:!0}:null,e.pdf.timedout?{timedout:!0}:null,e.pdf.autoCompileDisabled?{autoCompileDisabled:!0}:null),"errors"!==e.pdf.view&&"validation-problems"!==e.pdf.view||(e.shouldShowLogs=!0,e.pdf.compileFailed=!0));var C=["output.fls","output.fdb_latexmk"];if(e.pdf.outputFiles=[],null!=t.outputFiles){y={},null!=t.clsiServerId&&(y.clsiserverid=t.clsiServerId);var S,k=op(t.outputFiles);try{for(k.s();!(S=k.n()).done;){var A=S.value;if(-1===C.indexOf(A.path)){var T=/^output\./.test(A.path);e.pdf.outputFiles.push({name:T?"".concat(A.path.replace(/^output\./,"")," file"):A.path,url:A.url+w(y),main:!!T,fileName:A.path,type:A.type})}}}catch(e){k.e(e)}finally{k.f()}e.pdf.outputFiles.sort((function(e,t){return t.main-e.main||e.name.localeCompare(t.name)}))}}(r)})).catch((function(t){429===t.status&&(e.pdf.rateLimited=!0),e.pdf.compiling=!1,e.pdf.renderingError=!1,e.pdf.error=!0,e.pdf.view="errors",window.showNewLogsUI&&(e.clsiErrors={error:!0},e.shouldShowLogs=!0,e.pdf.compileFailed=!0)})).finally((function(){e.lastFinishedCompileAt=Date.now()})))},n.$scope.recompile=e.recompile,n.$scope.recompileViaKey=function(){e.recompile({keyShortcut:!0})},e.stop=function(){if(e.pdf.compiling)return t({url:"/project/".concat(e.project_id,"/compile/stop"),method:"POST",params:{clsiserverid:n.clsiServerId},headers:{"X-Csrf-Token":window.csrfToken}})},e.clearCache=function(){e.pdf.clearingCache=!0;var r=h.defer();return e.pdf.url=null,e.pdf.downloadUrl=null,e.pdf.outputFiles=[],t({url:"/project/".concat(e.project_id,"/output"),method:"DELETE",params:{clsiserverid:n.clsiServerId},headers:{"X-Csrf-Token":window.csrfToken}}).then((function(t){return e.pdf.clearingCache=!1,r.resolve()})).catch((function(t){console.error(t);var n=t.data;return e.pdf.clearingCache=!1,e.pdf.renderingError=!1,e.pdf.error=!0,e.pdf.view="errors",r.reject(n)})),r.promise},e.recompileFromScratch=function(){return e.pdf.compiling=!0,e.clearCache().then((function(){e.pdf.compiling=!1,e.recompile()})).catch((function(e){console.error(e)}))},e.toggleLogs=function(){e.$applyAsync((function(){e.shouldShowLogs=!e.shouldShowLogs,e.shouldShowLogs&&l.sendMBOnce("ide-open-logs-once")}))},e.showPdf=function(){e.pdf.view="pdf",e.shouldShowLogs=!1},e.toggleRawLog=function(){e.pdf.showRawLog=!e.pdf.showRawLog,e.pdf.showRawLog&&l.sendMB("logs-view-raw")},e.openClearCacheModal=function(){r.open({templateUrl:"clearCacheModalTemplate",controller:"ClearCacheModalController",scope:e})},e.syncToCode=function(e){a.syncToCode(e).then((function(e){var t=e.doc,r=e.line;n.editorManager.openDoc(t,{gotoLine:r})}))},e.setAutoCompile=function(t){e.$applyAsync((function(){e.autocompile_enabled=t}))},e.setDraftMode=function(t){e.$applyAsync((function(){e.draft=t}))},e.setSyntaxCheck=function(t){e.$applyAsync((function(){e.stop_on_validation_error=t}))},e.runSyntaxCheckNow=function(){e.$applyAsync((function(){e.recompile({check:!0})}))},e.openInEditor=function(e){var t,r;l.sendMBOnce("logs-jump-to-location-once");var a=n.fileTreeManager.findEntityByPath(e.file);null!=a&&"doc"===a.type&&(null!=e.line&&(r=e.line),null!=e.column&&(t=e.column),n.editorManager.openDoc(a,{gotoLine:r,gotoColumn:t}))}}]),a.a.factory("synctex",["ide","$http","$q",function(e,t,n){return{syncToPdf:function(r){var a=n.defer(),l=e.editorManager.getCurrentDocId();if(null==l)return a.reject(),a.promise;var d=e.fileTreeManager.findEntityById(l);if(null==d)return a.reject(),a.promise;var h=e.fileTreeManager.getEntityPath(d);if(null==h)return a.reject(),a.promise;var f=e.fileTreeManager.getRootDocDirname();null!=f&&""!==f&&(h=h.replace(RegExp("^".concat(f)),"".concat(f,"/.")));var p=r.row,y=r.column;return t({url:"/project/".concat(e.project_id,"/sync/code"),method:"GET",params:{file:h,line:p+1,column:y,clsiserverid:e.clsiServerId}}).then((function(e){var t=e.data;return a.resolve(t.pdf||[])})).catch((function(e){var t=e.data;return a.reject(t)})),a.promise},syncToCode:function(r,a){null==a&&(a={});var l=n.defer();if(null==r)return l.reject(),l.promise;var d,h=r.offset.left;return d=a.fromPdfPosition&&null!=(null!=r.pageSize?r.pageSize.height:void 0)?r.pageSize.height-r.offset.top||0:r.offset.top||0,a.includeVisualOffset&&(d+=72),t({url:"/project/".concat(e.project_id,"/sync/pdf"),method:"GET",params:{page:r.page+1,h:h.toFixed(2),v:d.toFixed(2),clsiserverid:e.clsiServerId}}).then((function(t){var n=t.data;if(null!=n.code&&n.code.length>0&&""!==n.code[0].file){var r=e.fileTreeManager.findEntityByPath(n.code[0].file);if(null==r)return;return l.resolve({doc:r,line:n.code[0].line})}""===n.code[0].file&&(e.$scope.sync_tex_error=!0,setTimeout((function(){return e.$scope.sync_tex_error=!1}),4e3))})).catch((function(e){var t=e.data;return l.reject(t)})),l.promise}}}]),a.a.controller("PdfSynctexController",["$scope","synctex","ide",function(e,t,n){var r=this;this.cursorPosition=null,e.syncToPdfInFlight=!1,e.syncToCodeInFlight=!1,n.$scope.$on("cursor:editor:update",(function(e,t){r.cursorPosition=t})),e.syncToPdf=function(){null!=r.cursorPosition&&(e.syncToPdfInFlight=!0,t.syncToPdf(r.cursorPosition).then((function(t){e.pdf.highlights=t})).finally((function(){return e.syncToPdfInFlight=!1})))},n.$scope.$on("cursor:editor:syncToPdf",e.syncToPdf),e.syncToCode=function(){e.syncToCodeInFlight=!0,t.syncToCode(e.pdf.position,{includeVisualOffset:!0,fromPdfPosition:!0}).then((function(e){var t=e.doc,r=e.line;n.editorManager.openDoc(t,{gotoLine:r})})).finally((function(){return e.syncToCodeInFlight=!1}))}}]),a.a.controller("ClearCacheModalController",["$scope","$modalInstance",function(e,t){e.state={error:!1,inflight:!1},e.clear=function(){e.state.inflight=!0,e.clearCache().then((function(){e.state.inflight=!1,t.close()})).catch((function(){e.state.error=!0,e.state.inflight=!1}))},e.cancel=function(){return t.dismiss("cancel")}}]),a.a.component("previewPane",Object(p.react2angular)(ip.use(Tf),Object.keys(Tf.propTypes)));a.a.controller("PdfViewToggleController",["$scope",function(e){return e.togglePdfView=function(){return"pdf"===e.ui.view?e.ui.view="editor":e.ui.view="pdf"},e.fileTreeClosed=!1,e.$on("layout:main:resize",(function(t,n){return n.west.initClosed?e.fileTreeClosed=!0:e.fileTreeClosed=!1,e.$apply()}))}]);function sp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}a.a.factory("pdfTextLayer",(function(){return function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.textLayerDiv=t.textLayerDiv,this.divContentDone=!1,this.viewport=t.viewport,this.textDivs=[],this.renderer=t.renderer,this.renderingDone=!1}var t,n,r;return t=e,(n=[{key:"render",value:function(e){var t=this;if(!this.renderingDone&&this.divContentDone){null!=this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),this.textDivs=[];var n=document.createDocumentFragment();return this.textLayerRenderTask=this.renderer({textContent:this.textContent,container:n,viewport:this.viewport,textDivs:this.textDivs,timeout:e,enhanceTextSelection:this.enhanceTextSelection}),this.textLayerRenderTask.promise.then((function(){return t.textLayerDiv.appendChild(n),t.renderingDone=!0}),(function(){}))}}},{key:"setTextContent",value:function(e){return this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),this.textContent=e,this.divContentDone=!0}}])&&sp(t.prototype,n),r&&sp(t,r),e}()}));var lp=n(107),cp=n.n(lp);function up(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return dp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dp(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,d=!0,h=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return d=e.done,e},e:function(e){h=!0,l=e},f:function(){try{d||null==n.return||n.return()}finally{if(h)throw l}}}}function dp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function hp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}a.a.factory("pdfAnnotations",(function(){return function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.annotationsLayerDiv=t.annotations,this.viewport=t.viewport,this.navigateFn=t.navigateFn}var t,n,r;return t=e,(n=[{key:"setAnnotations",value:function(e){var t,n=[],r=up(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;switch(a.subtype){case"Link":n.push(this.addLink(a));break;case"Text":continue;default:n.push(void 0)}}}catch(e){r.e(e)}finally{r.f()}}},{key:"addLink",value:function(e){var t=this.buildLinkElementFromRect(e.rect);this.setLinkTarget(t,e),this.annotationsLayerDiv.appendChild(t)}},{key:"buildLinkElementFromRect",value:function(e){e=this.viewport.convertToViewportRectangle(e),e=cp.a.Util.normalizeRect(e);var t=document.createElement("a");return t.style.left=Math.floor(e[0])+"px",t.style.top=Math.floor(e[1])+"px",t.style.width=Math.ceil(e[2]-e[0])+"px",t.style.height=Math.ceil(e[3]-e[1])+"px",t}},{key:"setLinkTarget",value:function(e,t){var n=this;t.url?(e.href=t.url,e.target="_blank",e.rel="noreferrer noopener"):t.dest&&(e.href="#".concat(t.dest),e.onclick=function(){return n.navigateFn(t),!1})}}])&&hp(t.prototype,n),r&&hp(t,r),e}()}));a.a.factory("pdfHighlights",(function(){return function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.highlightsLayerDiv=t.highlights[0],this.highlightElements=[]}var t,n,r;return t=e,(n=[{key:"addHighlight",value:function(e,t,n,r,a){var l=e.convertToViewportRectangle([t,n,t+r,n+a]);l=cp.a.Util.normalizeRect(l);var d=document.createElement("div");return d.style.left=Math.floor(l[0])+"px",d.style.top=Math.floor(l[1])+"px",d.style.width=Math.ceil(l[2]-l[0])+"px",d.style.height=Math.ceil(l[3]-l[1])+"px",this.highlightElements.push(d),this.highlightsLayerDiv.appendChild(d),d}},{key:"clearHighlights",value:function(){for(var e=0,t=Array.from(this.highlightElements);e<t.length;e++){var n=t[e];null!=n&&n.parentNode.removeChild(n)}return this.highlightElements=[]}}])&&fp(t.prototype,n),r&&fp(t,r),e}()}));function pp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,l=void 0;try{for(var d,h=e[Symbol.iterator]();!(r=(d=h.next()).done)&&(n.push(d.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==h.return||h.return()}finally{if(a)throw l}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return gp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gp(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function mp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vp(e,t,n){return t&&mp(e.prototype,t),n&&mp(e,n),e}a.a.factory("PDFRenderer",["$timeout","pdfAnnotations","pdfTextLayer","pdfSpinner",function(e,t,n,r){var a;return(a=function(){function a(e,t){var n,l=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this.url=e,this.options=t,this.scale=this.options.scale||1,n=yp(null!=window.location?window.location.search:void 0,(function(e){return e.indexOf("disable-font-face=true")}))>=0,this.pdfjs=cp.a.getDocument({url:this.url,cMapUrl:window.pdfCMapsPath,cMapPacked:!0,disableFontFace:n,rangeChunkSize:131072,disableAutoFetch:!!this.options.disableAutoFetch,disableStream:!!this.options.disableAutoFetch}),this.pdfjs.onProgress=this.options.progressCallback,this.document=this.pdfjs,this.navigateFn=this.options.navigateFn,this.spinner=new r,this.resetState(),this.document.promise.then((function(e){return e.getDownloadInfo().then((function(){return l.options.loadedCallback()}))})),this.errorCallback=this.options.errorCallback,this.pageSizeChangeCallback=this.options.pageSizeChangeCallback,this.pdfjs.promise.catch((function(e){return l.errorCallback(e)}))}return vp(a,null,[{key:"initClass",value:function(){this.prototype.JOB_QUEUE_INTERVAL=25,this.prototype.PAGE_LOAD_TIMEOUT=6e4,this.prototype.INDICATOR_DELAY1=100,this.prototype.INDICATOR_DELAY2=250,this.prototype.TEXTLAYER_TIMEOUT=100}}]),vp(a,[{key:"resetState",value:function(){this.renderQueue=[],null!=this.queueTimer&&clearTimeout(this.queueTimer);for(var e=0,t=Array.from(this.spinTimer||[]);e<t.length;e++){var n=t[e];clearTimeout(n)}for(var r=0,a=Array.from(this.pageState||[]);r<a.length;r++){var l=a[r];yp(null!=l?l.loadTask:void 0,(function(e){return e.cancel()})),yp(null!=l?l.renderTask:void 0,(function(e){return e.cancel()}))}return this.pageState=[],this.spinTimer=[],this.spinTimerDone=[],this.jobs=0}},{key:"getNumPages",value:function(){return this.document.promise.then((function(e){return e.numPages}))}},{key:"getPage",value:function(e){return this.document.promise.then((function(t){return t.getPage(e)}))}},{key:"getPdfViewport",value:function(e,t){var n=this;return null==t&&(t=this.scale),this.document.promise.then((function(r){return r.getPage(e).then((function(e){return e.getViewport({scale:t})}),(function(e){return"function"==typeof n.errorCallback?n.errorCallback(e):void 0}))}))}},{key:"getDestinations",value:function(){return this.document.promise.then((function(e){return e.getDestinations()}))}},{key:"getDestination",value:function(e){var t=this;return this.document.promise.then((function(t){return t.getDestination(e)}),(function(e){return"function"==typeof t.errorCallback?t.errorCallback(e):void 0}))}},{key:"getPageIndex",value:function(e){var t=this;return this.document.promise.then((function(n){return n.getPageIndex(e).then((function(e){return e}),(function(e){return"function"==typeof t.errorCallback?t.errorCallback(e):void 0}))}))}},{key:"getScale",value:function(){return this.scale}},{key:"setScale",value:function(e){return this.scale=e,this.resetState()}},{key:"triggerRenderQueue",value:function(e){var t=this;return null==e&&(e=this.JOB_QUEUE_INTERVAL),null!=this.queueTimer&&clearTimeout(this.queueTimer),this.queueTimer=setTimeout((function(){return t.queueTimer=null,t.processRenderQueue()}),e)}},{key:"removeCompletedJob",value:function(e){return this.jobs=this.jobs-1,this.triggerRenderQueue(0)}},{key:"renderPages",value:function(e){if(!this.shuttingDown)return this.renderQueue=Array.from(e).map((function(e){return{element:e.elementChildren,pagenum:e.pageNum}})),this.triggerRenderQueue()}},{key:"renderPage",value:function(e){if(!this.shuttingDown){var t={element:e.elementChildren,pagenum:e.pageNum};return this.renderQueue.push(t),this.processRenderQueue()}}},{key:"getPageDetails",value:function(e){return[e.element.canvas,e.pagenum]}},{key:"startIndicators",value:function(){var e=this;this.queuedPages=[];for(var t=0,n=Array.from(this.renderQueue);t<n.length;t++){var r=n[t];this.queuedPages[r.pagenum]=!0}for(var a in this.spinTimer)this.queuedPages[a]||(clearTimeout(this.spinTimer[a]),delete this.spinTimer[a]);return function(){for(var t=[],n=0,a=Array.from(e.renderQueue);n<a.length;n++)r=a[n],e.spinTimer[r.pagenum]||e.spinTimerDone[r.pagenum]||t.push(e.startIndicator(r));return t}()}},{key:"startIndicator",value:function(e){var t=this,n=pp(Array.from(this.getPageDetails(e)),2),r=n[0],a=n[1];return r.addClass("pdfng-loading"),this.spinTimer[a]=setTimeout((function(){for(var e=0,n=Array.from(t.renderQueue);e<n.length;e++){var l=n[e];if(a===l.pagenum){t.spinner.add(r,{static:!0}),t.spinTimerDone[a]=!0;break}}return delete t.spinTimer[a]}),this.INDICATOR_DELAY1)}},{key:"updateIndicator",value:function(e){var t=this,n=pp(Array.from(this.getPageDetails(e)),2),r=n[0],a=n[1];return this.spinTimerDone[a]?this.spinTimer[a]=setTimeout((function(){return t.spinner.start(r),delete t.spinTimer[a]}),this.INDICATOR_DELAY2):(clearTimeout(this.spinTimer[a]),this.spinTimer[a]=setTimeout((function(){return t.spinner.add(r,{static:!0}),t.spinTimerDone[a]=!0,t.spinTimer[a]=setTimeout((function(){return t.spinner.start(r),delete t.spinTimer[a]}),t.INDICATOR_DELAY2)}),this.INDICATOR_DELAY1))}},{key:"clearIndicator",value:function(e){var t=pp(Array.from(this.getPageDetails(e)),2),n=t[0],r=t[1];return this.spinner.stop(n),clearTimeout(this.spinTimer[r]),delete this.spinTimer[r],this.spinTimerDone[r]=!0}},{key:"processRenderQueue",value:function(){var t,n=this;if(!(this.shuttingDown||(this.startIndicators(),this.jobs>0))){for(var r=this.renderQueue.shift();null!=r&&null!=this.pageState[r.pagenum];)r=this.renderQueue.shift();if(null!=r){var a=pp(Array.from([r.element,r.pagenum]),2),l=a[0],d=a[1];this.jobs=this.jobs+1,this.updateIndicator(r);var h=e((function(){if(!f.cancelled)return Object(S.b)("pdfng page load timed out after ".concat(n.PAGE_LOAD_TIMEOUT,"ms")),n.clearIndicator(r),"function"==typeof n.errorCallback?n.errorCallback("timeout"):void 0}),this.PAGE_LOAD_TIMEOUT),f=this.getPage(d);return f.cancel=function(){return this.cancelled=!0},this.pageState[d]=t={loadTask:f},f.then((function(a){if(e.cancel(h),!f.cancelled)return t.renderTask=n.doRender(l,d,a),t.renderTask.promise.then((function(){return n.clearIndicator(r),t.complete=!0,delete t.renderTask,n.removeCompletedJob(d)}),(function(){return t.complete=!1,delete t.renderTask,n.removeCompletedJob(d)}))})).catch((function(t){return e.cancel(h),n.clearIndicator(r)}))}}}},{key:"doRender",value:function(e,r,a){var l=this,d=this.scale;if(null!=d){var h=$('<canvas class="pdf-canvas pdfng-rendering"></canvas>');e.canvas.replaceWith(h);var f=a.getViewport({scale:d}),p=window.devicePixelRatio||1,y=h[0].getContext("2d"),w=p/(y.webkitBackingStorePixelRatio||y.mozBackingStorePixelRatio||y.msBackingStorePixelRatio||y.oBackingStorePixelRatio||y.backingStorePixelRatio||1),_=Math.floor(f.width)*w|0,C=Math.floor(f.height)*w|0,S=Math.floor(f.width),k=Math.floor(f.height);h[0].height=C,h[0].width=_,h.height(k+"px"),h.width(S+"px");var x=e.canvas.height(),E=e.canvas.width();k===x&&S===E||(e.canvas.height(k+"px"),e.canvas.width(S+"px"),e.container.height(k+"px"),e.container.width(S+"px"),"function"==typeof this.pageSizeChangeCallback&&this.pageSizeChangeCallback(r,k-x));var A=new n({textLayerDiv:e.text[0],viewport:f,renderer:cp.a.renderTextLayer}),T=new t({annotations:e.annotations[0],viewport:f,navigateFn:this.navigateFn}),R=a.render({canvasContext:y,viewport:f,transform:[w,0,0,w,0,0]}),O=this.TEXTLAYER_TIMEOUT;return R.promise.then((function(){return h.removeClass("pdfng-rendering"),a.getTextContent({normalizeWhitespace:!0}).then((function(e){return A.setTextContent(e),A.render(O)}),(function(e){return"function"==typeof l.errorCallback?l.errorCallback(e):void 0})),a.getAnnotations().then((function(e){return T.setAnnotations(e)}),(function(e){return"function"==typeof l.errorCallback?l.errorCallback(e):void 0}))})).catch((function(e){if("RenderingCancelledException"!==e.name)return"function"==typeof l.errorCallback?l.errorCallback(e):void 0})),R}}},{key:"destroy",value:function(){return this.shuttingDown=!0,this.resetState(),this.pdfjs.promise.then((function(e){return e.cleanup(),e.destroy()}))}}]),a}()).initClass(),a}]);function yp(e,t){return null!=e?t(e):void 0}a.a.directive("pdfPage",["$timeout","pdfHighlights","pdfSpinner",function(e,t,n){return{require:"^pdfViewer",template:'<div class="plv-page-view page-view">\n  <div class="pdf-canvas pdfng-empty"></div>\n  <div class="plv-text-layer text-layer"></div>\n  <div class="plv-annotations-layer annotations-layer"></div>\n  <div class="plv-highlights-layer highlights-layer"></div>\n</div>',link:function(n,r,a,l){var d=$(r).find(".pdf-canvas"),h=$(r).find(".text-layer"),f=$(r).find(".annotations-layer"),p=$(r).find(".highlights-layer"),y=function(e){var t=Math.floor(e[0]),a=Math.floor(e[1]);return r.height(t),r.width(a),d.height(t),d.width(a),n.page.sized=!0};if(n.page.element=r,n.page.elementChildren={canvas:d,text:h,annotations:f,highlights:p,container:r},!n.page.sized)if(null!=n.defaultPageSize)y(n.defaultPageSize);else var w=n.$watch("defaultPageSize",(function(e){if(null!=e)return y(e),w()}));n.page.current&&(n.document.renderPage(n.page),l.setPdfPosition(n.page,n.page.position)),r.on("dblclick",(function(e){var t=$(r).find(".pdf-canvas").offset(),a=e.pageX-t.left,l=e.pageY-t.top;return n.document.getPdfViewport(n.page.pageNum).then((function(e){var t=e.convertToPdfPoint(a,l),r={page:n.page.pageNum,x:t[0],y:e.viewBox[3]-t[1]};return n.$emit("pdfDoubleClick",r)}))}));var _=new t({highlights:p});return n.$on("pdf:highlights",(function(t,r){var a;if(null!=r&&r.length>0){n.timeoutHandler&&(e.cancel(n.timeoutHandler),_.clearHighlights(),n.timeoutHandler=null);var l=function(){for(var e=[],t=0,l=Array.from(r);t<l.length;t++)(a=l[t]).page===n.page.pageNum&&e.push(a);return e}();if(l.length)return n.document.getPdfViewport(n.page.pageNum).then((function(e){return function(){for(var t=[],n=0,r=Array.from(l);n<r.length;n++){var a=r[n],d=e.viewBox[3]-a.v;t.push(_.addHighlight(e,a.h,d,a.width,a.height))}return t}()})),n.timeoutHandler=e((function(){return _.clearHighlights(),n.timeoutHandler=null}),1e3)}})),n.$on("$destroy",(function(){if(null!=n.timeoutHandler)return e.cancel(n.timeoutHandler),_.clearHighlights()}))}}}]);function bp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}a.a.factory("pdfSpinner",(function(){return function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"add",value:function(e,t){var n=$('<div class="pdfng-spinner" style="position: absolute; top: 50%; left:50%; transform: translateX(-50%) translateY(-50%);"><i class="fa fa-spinner'.concat((null!=t?t.static:void 0)?"":" fa-spin",'" style="color: #999"></i></div>'));return n.css({"font-size":"64px"}),e.append(n)}},{key:"start",value:function(e){return e.find(".fa-spinner").addClass("fa-spin")}},{key:"stop",value:function(e){return e.find(".fa-spinner").removeClass("fa-spin")}},{key:"remove",value:function(e){return e.find(".fa-spinner").remove()}}])&&bp(t.prototype,n),r&&bp(t,r),e}()}));function wp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,l=void 0;try{for(var d,h=e[Symbol.iterator]();!(r=(d=h.next()).done)&&(n.push(d.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==h.return||h.return()}finally{if(a)throw l}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}a.a.controller("pdfViewerController",["$scope","$q","$timeout","PDFRenderer","$element","pdfHighlights","pdfSpinner",function(e,t,n,r,a,l,d){return this.load=function(){return(null!=e.document?e.document.destroy():Promise.resolve()).then((function(){e.loadCount=null!=e.loadCount?e.loadCount+1:1;var n=e.pdfSrc;n=n+(/\?/.test(n)?"&":"?")+"pdfng=true";return e.document=new r(n,{scale:1,disableAutoFetch:!0,navigateFn:function(t){return e.navigateTo=t,e.$apply()},progressCallback:function(t){return e.$emit("progress",t)},loadedCallback:function(){return e.$emit("loaded")},errorCallback:function(t){return t&&"MissingPDFException"===t.name||Object(S.b)("pdfng error ".concat(t)),e.$emit("pdf:error",t)},pageSizeChangeCallback:function(t,n){return e.$broadcast("pdf:page:size-change",t,n)}}),e.loaded=t.all({numPages:e.document.getNumPages(),pdfViewport:e.document.getPdfViewport(1,1)}).then((function(t){return e.pdfViewport=t.pdfViewport,e.pdfPageSize=[t.pdfViewport.height,t.pdfViewport.width],e.$emit("loaded"),e.numPages=t.numPages})).catch((function(n){return e.$emit("pdf:error",n),t.reject(n)})),e.loaded}))},this.setScale=function(n,r,a){return e.loaded.then((function(){var t;return null==n&&(n={}),0===r||0===a?t=1:"scale_mode_fit_width"===n.scaleMode?t=(a-40)/e.pdfPageSize[1]:"scale_mode_fit_height"===n.scaleMode?t=(r-20)/e.pdfPageSize[0]:"scale_mode_value"===n.scaleMode?t=n.scale:"scale_mode_auto"===n.scaleMode||(n.scaleMode="scale_mode_fit_width",t=(a-40)/e.pdfPageSize[1]),e.scale.scale=t,e.document.setScale(t),e.defaultPageSize=[t*e.pdfPageSize[0],t*e.pdfPageSize[1]]})).catch((function(n){return e.$emit("pdf:error",n),t.reject(n)}))},this.redraw=function(t){if(e.pages=function(e,t,n){for(var r=[],a=e<t,l=n?a?t+1:t-1:t,d=e;a?d<l:d>l;a?d++:d--)r.push(d);return r}(0,e.numPages-1,!0).map((function(e){return{pageNum:e+1}})),null!=t&&null!=t.page){var n=t.page;return n>e.numPages-1&&(n=e.numPages-1),e.pages[n].current=!0,e.pages[n].position=t}},this.zoomIn=function(){var t=1.2*e.scale.scale;return e.forceScale={scaleMode:"scale_mode_value",scale:t}},this.zoomOut=function(){var t=e.scale.scale/1.2;return e.forceScale={scaleMode:"scale_mode_value",scale:t}},this.fitWidth=function(){return e.forceScale={scaleMode:"scale_mode_fit_width"}},this.fitHeight=function(){return e.forceScale={scaleMode:"scale_mode_fit_height"}},this.checkPosition=function(){return e.forceCheck=(e.forceCheck||0)+1},this.showRandomHighlights=function(){return e.highlights=[{page:3,h:100,v:100,height:30,width:200}]},this.getPdfPosition=function(){var t,n,r,l=0,d=e.pages[0];if(e.pages.some((function(e,t){var n,r;if(e.visible)return n=wp(Array.from(r=[t,e]),2),l=n[0],d=n[1],r}))&&null!=d.element){var h=d.element.offset().top,f=h+d.element.innerHeight(),p=a.offset().top,y=p+a.height();if(t=h>=p&&h<y?0:h<p&&f>p?p-h:null,d.viewport){n=(r=d.viewport).convertToPdfPoint(0,t)}else{r=e.pdfViewport;var w=t/e.scale.scale;n=r.convertToPdfPoint(0,w)}return{page:l,offset:{top:n[1],left:0},pageSize:{height:r.viewBox[3],width:r.viewBox[2]}}}},this.computeOffset=function(n,r){var a=n.element,l=Cp($(a).offset(),(function(e){return e.top})),d=Cp($(a).parent().offset(),(function(e){return e.top}));if(null==l||null==d)return t((function(e,t){return t("elements destroyed")}));var h=$(a).offset().top-$(a).parent().offset().top,f=$(a).parent().scrollTop(),p=r.offset;return e.document.getPdfViewport(n.pageNum).then((function(e){n.viewport=e;var t=e.convertToViewportPoint(p.left,p.top);return null==r.pageSize&&(r.pageSize={height:e.viewBox[3],width:e.viewBox[2]}),Math.round(h+t[1]+f)}))},this.setPdfPosition=function(t,n){return this.computeOffset(t,n).then((function(t){return e.$apply((function(){e.pleaseScrollTo=t,e.position=n}))}))},this}]);a.a.directive("pdfViewer",["$q","$timeout","pdfSpinner",function(e,t,n){return{controller:"pdfViewerController",controllerAs:"ctrl",scope:{pdfSrc:"=",highlights:"=",position:"=",scale:"=",pleaseJumpTo:"="},template:"<div data-pdf-page class='pdf-page-container page-container' ng-repeat='page in pages'></div>",link:function(r,a,l,h){var f=new n,p=e.defer();p.notify("waiting for layout"),p.promise.then((function(){}));var y=function(){var e=w(),t=_(e);return r.document.renderPages(t)},w=function(){var e=a[0].scrollTop,t=e+a[0].clientHeight;return d.a.filter(r.pages,(function(n){if(null==n.element)return!1;var r=n.element[0],a=r.offsetTop,l=a+r.clientHeight;return n.visible=a<t&&l>e,n.visible}))},_=function(e){var t=[];if(e.length>0){var n=e[0].pageNum-1,a=e[e.length-1].pageNum-1;a+1<r.pages.length&&t.push(r.pages[a+1]),n>0&&t.push(r.pages[n-1]),a+2<r.pages.length&&t.push(r.pages[a+2])}return e.concat(t)},C=null,S=function(e){if(null==C&&null==A&&null==E)return C=setTimeout((function(){return x(e),C=null}),0)},k=null,x=function(e){if(null!=e){var n=angular.copy(r.position);return null==k&&(k=setTimeout((function(){return f.add(a),k=null}),100)),p.promise.then((function(l){var d=wp(Array.from(l),2),p=d[0],w=d[1];return h.setScale(e,p,w).then((function(){return r.$evalAsync((function(){return k?clearTimeout(k):f.remove(a),a.removeClass("pdfjs-viewer-show-text"),h.redraw(n),t(y),r.loadSuccess=!0}))})).catch((function(e){return r.$emit("pdf:error",e)}))}))}},E=null,A=null,T=function(){if(null==A)return p=e.defer(),A=setTimeout((function(){return function e(){if(0===a.height()||0===a.width()){if(null!=E)return;return E=setTimeout((function(){return E=null,e()}),1e3)}return r.parentSize=[a.innerHeight(),a.innerWidth()],t((function(){return p.resolve(r.parentSize),r.$emit("flash-controls")}))}(),A=null}),0)};T(),r.$on("layout:main:resize",(function(){return T()})),r.$on("layout:pdf:resize",(function(){return T()})),r.$on("pdf:error",(function(e,t){if("RenderingCancelledException"!==t.name){var n=(null!=t?t.message:void 0)||t;if(!(r.loadCount>3||/^Missing PDF/i.test(n)||/^loading/i.test(n)))return r.loadSuccess?h.load().then((function(){return r.scale=angular.copy(r.scale)})).catch((function(e){return r.$emit("pdf:error:display")})):void r.$emit("pdf:error:display");r.$emit("pdf:error:display")}})),r.$on("pdf:page:size-change",(function(e,t,n){var l=angular.copy(r.position);if(null!=l&&t-1<l.page&&0!==n){var d=a.scrollTop();return r.adjustingScroll=!0,a.scrollTop(d+n)}})),a.on("mousedown",(function(e){if(e.target!==a[0]&&!L())return a.addClass("pdfjs-viewer-show-text"),O()}));var R=null,O=function(){if(null==R)return R=$(document.body).one("mouseup",M)},M=function(){return R=null,window.setTimeout((function(){if(!P())return O()}),10),!0},P=function(){return!L()&&(a.removeClass("pdfjs-viewer-show-text"),!0)},L=function(){var e="function"==typeof window.getSelection?window.getSelection():void 0;return null!=e&&D(e)&&!e.isCollapsed},D=function(e){if(0===e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return a.find(t).length>0||a.is(t)};a.on("scroll",(function(){return r.adjustingScroll?(y(),void(r.adjustingScroll=!1)):(r.scrollHandlerTimeout&&clearTimeout(r.scrollHandlerTimeout),r.scrollHandlerTimeout=setTimeout(I,25))}));var I=function(){y();var e=h.getPdfPosition();return null!=e&&(r.position=e),r.scrollHandlerTimeout=null};return r.$watch("pdfSrc",(function(e,t){if(null!=e)return r.loadCount=0,r.loadSuccess=!1,h.load().then((function(){return r.scale=angular.copy(r.scale)})).catch((function(e){return r.$emit("pdf:error",e)}))})),r.$watch("scale",(function(e,t){if(e!==t)return S(e)})),r.$watch("forceScale",(function(e,t){if(null!=e)return S(e)})),r.$watch("forceCheck",(function(e,t){if(null!=e)return r.adjustingScroll=!0,S(r.scale)})),r.$watch("parentSize",(function(e,t){if(null!=e)return S(r.scale)}),!0),r.$watch("pleaseScrollTo",(function(e,t){if(null!=e)return r.adjustingScroll=!0,$(a).scrollTop(e),r.pleaseScrollTo=void 0})),r.$watch("pleaseJumpTo",(function(e,t){if(null!=e)return h.setPdfPosition(r.pages[e.page-1],e)})),r.$watch("navigateTo",(function(e,t){if(null!=e)return r.navigateTo=void 0,r.document.getDestination(e.dest).then((function(e){return r.document.getPageIndex(e[0]).then((function(t){var n=r.pages[t];return r.document.getPdfViewport(n.pageNum).then((function(n){n.convertToViewportPoint(e[2],e[3]);if("XYZ"===e[1].name){var a={page:t,offset:{top:e[3],left:e[2]}};return h.setPdfPosition(r.pages[t],a)}}))}))}))})),r.$watch("highlights",(function(e){if(null!=e){var t=Array.from(e||[]).map((function(e){return{page:e.page-1,highlight:{left:e.h,top:e.v,height:e.height,width:e.width}}}));if(t.length){r.$broadcast("pdf:highlights",e);var n=t[0];if(r.pages){var a=null!=r.pages[n.page]?r.pages[n.page].pageNum:void 0;if(null!=a)return r.document.getPdfViewport(a).then((function(e){var t={page:n.page,offset:{left:n.highlight.left,top:e.viewBox[3]-n.highlight.top+n.highlight.height+72}};return h.setPdfPosition(r.pages[n.page],t)}))}}}})),r.$on("$destroy",(function(){if(null!=E&&clearTimeout(E),null!=A&&clearTimeout(A),null!=C&&clearTimeout(C),null!=k)return clearTimeout(k)}))}}}]);function Cp(e,t){return null!=e?t(e):void 0}a.a.directive("pdfng",["$timeout","localStorage",function(e,t){return{scope:{pdfSrc:"=",highlights:"=",position:"=",dblClickCallback:"="},link:function(n,r,a){n.loading=!1,n.pleaseJumpTo=null,n.scale=null;var l=!1,d=function(){return n.$evalAsync((function(){return n.flashControls=!0,e((function(){return n.flashControls=!1}),1e3)}))};if(n.$on("pdfDoubleClick",(function(e,t){return"function"==typeof n.dblClickCallback?n.dblClickCallback({page:t.page-1,offset:{top:t.y,left:t.x}}):void 0})),n.$on("flash-controls",(function(){return d()})),n.$watch("pdfSrc",(function(e){if(e)return n.loading=!0,n.loaded=!1,n.progress=1,function(){var e,r;if(!l)l=!0,null!=(r=t("pdf.scale"))?n.scale={scaleMode:r.scaleMode,scale:+r.scale}:n.scale={scaleMode:"scale_mode_fit_width"},(e=t("pdf.position.".concat(a.key)))&&(n.position={page:+e.page,offset:{top:+e.offset.top,left:+e.offset.left}}),n.$on("$destroy",(function(){return t("pdf.scale",n.scale),t("pdf.position.".concat(a.key),n.position)})),$(window).unload((function(){return t("pdf.scale",n.scale),t("pdf.position.".concat(a.key),n.position)}))}(),d()})),n.$on("loaded",(function(){return n.loaded=!0,n.progress=100,e((function(){return n.loading=!1,delete n.progress}),500)})),n.fitToHeight=function(){var e=angular.copy(n.scale);return e.scaleMode="scale_mode_fit_height",n.scale=e},n.fitToWidth=function(){var e=angular.copy(n.scale);return e.scaleMode="scale_mode_fit_width",n.scale=e},n.zoomIn=function(){var e=angular.copy(n.scale);return e.scaleMode="scale_mode_value",e.scale=1.2*e.scale,n.scale=e},n.zoomOut=function(){var e=angular.copy(n.scale);return e.scaleMode="scale_mode_value",e.scale=e.scale/1.2,n.scale=e},null!=a.resizeOn)for(var h=0,f=Array.from(a.resizeOn.split(","));h<f.length;h++){var p=f[h];n.$on(p,(function(e){}))}return n.$on("progress",(function(e,t){return n.$apply((function(){if(!n.loaded)return n.progress=Math.floor(t.loaded/t.total*100),n.progress>100&&(n.progress=100),n.progress<0?n.progress=0:void 0}))})),n.$on("$destroy",(function(){}))},template:'<div data-pdf-viewer class="pdfjs-viewer" pdf-src=\'pdfSrc\' position=\'position\' scale=\'scale\' highlights=\'highlights\' please-jump-to=\'pleaseJumpTo\'></div>\n<div class="pdfjs-controls" ng-class="{\'flash\': flashControls }">\n  <div class="btn-group">\n      <a href\n          class="btn btn-info btn-lg"\n          ng-click="fitToWidth()"\n          tooltip="Fit to Width"\n          tooltip-append-to-body="true"\n          tooltip-placement="bottom"\n      >\n          <i class="fa fa-fw fa-arrows-h"></i>\n      </a>\n      <a href\n          class="btn btn-info btn-lg"\n          ng-click="fitToHeight()"\n          tooltip="Fit to Height"\n          tooltip-append-to-body="true"\n          tooltip-placement="bottom"\n      >\n          <i class="fa fa-fw fa-arrows-v"></i>\n      </a>\n      <a href\n          class="btn btn-info btn-lg"\n          ng-click="zoomIn()"\n          tooltip="Zoom In"\n          tooltip-append-to-body="true"\n          tooltip-placement="bottom"\n      >\n          <i class="fa fa-fw fa-search-plus"></i>\n      </a>\n      <a href\n          class="btn btn-info btn-lg"\n          ng-click="zoomOut()"\n          tooltip="Zoom Out"\n          tooltip-append-to-body="true"\n          tooltip-placement="bottom"\n      >\n          <i class="fa fa-fw fa-search-minus"></i>\n      </a>\n  </div>\n</div>\n<div class="progress-thin" ng-show="loading">\n  <div class="progress-bar" ng-style="{ \'width\': progress + \'%\' }"></div>\n</div>'}}]);var Sp=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ide=t,this.$scope=n,this.$scope.pdf={url:null,error:!1,timeout:!1,failure:!1,compiling:!1,uncompiled:!0,logEntries:{},logEntryAnnotations:{},rawLog:"",validation:{},view:null,showRawLog:!1,highlights:[],position:null,lastCompileTimestamp:null}};a.a.controller("BinaryFileController",["$scope","$rootScope","$http","$timeout","$element","ide","waitFor",function(e,t,n,r,a,l,d){var h,f,p=25-"...".length,y=["tex","latex","sty","cls","bst","bib","bibtex","txt","tikz","mtx","rtex","md","asy","latexmkrc","lbx","bbx","cbx","m","lco","dtx","ins","ist","def","clo","ldf","rmd","lua","gv"],w=["png","jpg","jpeg","gif"],_=[],C=function(e){return e.name.split(".").pop().toLowerCase()};function S(){var t=a.find(".text-preview .scroll-container"),n=a.find(".binary-file-header"),r=a.height()-n.height()-14;t.css({"max-height":r}),e.textPreview.loading=!1}e.isTextFile=function(){return y.indexOf(C(e.openFile))>-1},e.isImageFile=function(){return w.indexOf(C(e.openFile))>-1},e.isPreviewableFile=function(){return _.indexOf(C(e.openFile))>-1},e.isUnpreviewableFile=function(){return!e.isTextFile()&&!e.isImageFile()&&!e.isPreviewableFile()},e.textPreview={loading:!1,shouldShowDots:!1,error:!1,data:null},e.refreshing=!1,e.refreshError=null,e.displayUrl=function(e){if(null!=e)return e.length>60?e.slice(0,35)+"..."+e.slice(e.length-p):e},e.refreshFile=function(t){e.refreshing=!0,e.refreshError=null,window.expectingLinkedFileRefreshedSocketFor=t.name,l.fileTreeManager.refreshLinkedFile(t).then((function(t){var n=t.data.new_file_id;r((function(){return d((function(){return l.fileTreeManager.findEntityById(n)}),5e3).then((function(e){l.binaryFilesManager.openFile(e),window.expectingLinkedFileRefreshedSocketFor=null})).catch((function(e){return console.warn(e)}))}),0),e.refreshError=null})).catch((function(t){return e.refreshError=t.data})).finally((function(){e.refreshing=!1;var n=t.linkedFileData.provider;("mendeley"===n||"zotero"===n||t.name.match(/^.*\.bib$/))&&l.$scope.$emit("references:should-reindex",{})}))},e.failedLoad=!1,window.sl_binaryFilePreviewError=function(){e.failedLoad=!0,e.$apply()},e.imgLoaded=!1,window.sl_binaryFilePreviewLoaded=function(){e.imgLoaded=!0,e.$apply()},e.isTextFile()&&(h="/project/".concat(window.project_id,"/file/").concat(e.openFile.id),f=!1,e.textPreview.data=null,e.textPreview.loading=!0,e.textPreview.shouldShowDots=!1,e.$apply(),function(e){return n.head(e).then((function(e){var t=parseInt(e.headers("Content-Length"),10);if(isNaN(t))throw new Error("Could not parse Content-Length header");return t}))}(h).then((function(e){var t={};return e>2097152&&(f=!0,t.maxSize=2097152),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.maxSize;return null!=r&&(e+="?range=0-".concat(r)),n.get(e,{transformResponse:null}).then((function(e){return e.data}))}(h,t)})).then((function(t){!function(t,n){e.textPreview.error=!1,e.textPreview.data=t,e.textPreview.shouldShowDots=n,r(S,0)}(f?function(e){return e.replace(/\n.*$/,"")}(t):t,f)})).catch((function(t){console.error(t),function displayPreviewError(){e.textPreview.error=!0,e.textPreview.loading=!1}()})))}]);function kp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var xp=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ide=t,this.$scope=n,this.$scope.$on("entity:selected",(function(e,t){if("track-changes"!==r.$scope.ui.view&&"file"===t.type)return r.openFile(t)}))}var t,n,r;return t=e,(n=[{key:"openFile",value:function(e){var t=this;return this.ide.fileTreeManager.selectEntity(e),this.$scope.ui.view="file",this.$scope.openFile=null,this.$scope.$apply(),window.setTimeout((function(){return t.$scope.openFile=e,t.$scope.$apply()}),0,this)}}])&&kp(t.prototype,n),r&&kp(t,r),e}(),Ep=n(281),Ap=n.n(Ep);function Tp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var $p=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ide=t,this.$scope=n,this.$scope.$root._references=this.state={keys:[]},this.existingIndexHash={},this.$scope.$on("document:closed",(function(e,t){var n,a,l;if(t.doc_id&&(n=r.ide.fileTreeManager.findEntityById(t.doc_id)),a=null!=n?n.name:void 0,l=function(e){return e.match(/.*\.bib$/)},null!=a?l(a):void 0)return r.indexReferencesIfDocModified(t,!0)})),this.$scope.$on("references:should-reindex",(function(e,t){return r.indexAllReferences(!0)})),this.inited=!1,this.$scope.$on("project:joined",(function(e){r.inited||(r.inited=!0,r.ide.socket.on("references:keys:updated",(function(e){return r._storeReferencesKeys(e)})),r.indexAllReferences(!1))}))}var t,n,r;return t=e,(n=[{key:"_storeReferencesKeys",value:function(e){var t=this.$scope.$root._references.keys;return this.$scope.$root._references.keys=d.a.union(t,e)}},{key:"indexReferencesIfDocModified",value:function(e,t){var n=e.doc_id,r=e._doc.snapshot,a=Date.now(),l=Ap()("blob "+r.length+"\0"+r).toString(),d=this.existingIndexHash[n];d&&d.timestamp>a-216e5&&d.hash===l||(this.indexReferences([n],t),this.existingIndexHash[n]={hash:l,timestamp:a})}},{key:"indexReferences",value:function(e,t){var n=this,r={docIds:e,shouldBroadcast:t,_csrf:window.csrfToken};return this.ide.$http.post("/project/".concat(this.$scope.project_id,"/references/index"),r).then((function(e){return n._storeReferencesKeys(e.data.keys)}))}},{key:"indexAllReferences",value:function(e){var t=this,n={shouldBroadcast:e,_csrf:window.csrfToken};return this.ide.$http.post("/project/".concat(this.$scope.project_id,"/references/indexAll"),n).then((function(e){return t._storeReferencesKeys(e.data.keys)}))}}])&&Tp(t.prototype,n),r&&Tp(t,r),e}();function Rp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Op=function(){function e(t,n,r){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ide=t,this.$scope=n,this.metadata=r,this.ide.socket.on("broadcastDocMeta",(function(e){return a.metadata.onBroadcastDocMeta(e)})),this.$scope.$on("entity:deleted",this.metadata.onEntityDeleted),this.$scope.$on("file:upload:complete",this.metadata.fileUploadComplete)}var t,n,r;return t=e,(n=[{key:"loadProjectMetaFromServer",value:function(){return this.metadata.loadProjectMetaFromServer()}}])&&Rp(t.prototype,n),r&&Rp(t,r),e}(),Mp=(a.a.controller("ReviewPanelController",["$scope","$element","ide","$timeout","$http","$modal","eventTracking","localStorage",function(e,t,n,r,a,l,d,h){var f,p=t.find("#review-panel"),y="member",w="guest",_="anonymous",C=function(){if(null==(null!=n.$scope.user?n.$scope.user.id:void 0))return _;var e=n.$scope.user.id,t=n.$scope.project;if((null!=t.owner?t.owner.id:void 0)===e)return y;for(var r=0,a=Array.from(t.members);r<a.length;r++){if(a[r]._id===e)return y}return w};e.SubViews={CUR_FILE:"cur_file",OVERVIEW:"overview"},e.UserTCSyncState=f={SYNCED:"synced",PENDING:"pending"},e.reviewPanel={trackChangesState:{},trackChangesOnForEveryone:!1,trackChangesOnForGuests:!1,trackChangesForGuestsAvailable:!1,entries:{},resolvedComments:{},hasEntries:!1,subView:e.SubViews.CUR_FILE,openSubView:e.SubViews.CUR_FILE,overview:{loading:!1,docsCollapsedState:JSON.parse(h("docs_collapsed_state:".concat(e.project_id)))||{}},dropdown:{loading:!1},commentThreads:{},resolvedThreadIds:{},rendererData:{},formattedProjectMembers:{},fullTCStateCollapsed:!0,loadingThreads:!1,selectedEntryIds:[],nVisibleSelectedChanges:0},window.addEventListener("beforeunload",(function(){var t={};for(var n in e.reviewPanel.overview.docsCollapsedState){var r=e.reviewPanel.overview.docsCollapsedState[n];r&&(t[n]=r)}var a=Object.keys(t).length>0?JSON.stringify(t):null;return h("docs_collapsed_state:".concat(e.project_id),a)})),e.$on("layout:pdf:linked",(function(t,n){return e.$broadcast("review-panel:layout")})),e.$on("layout:pdf:resize",(function(t,n){return e.$broadcast("review-panel:layout",!1)})),e.$on("expandable-text-area:resize",(function(t){return r((function(){return e.$broadcast("review-panel:layout")}))})),e.$on("review-panel:sizes",(function(t,n){return e.$broadcast("editor:set-scroll-size",n)})),e.$watch("project.features.trackChangesVisible",(function(t){if(null!=t)return t?void 0:e.ui.reviewPanelOpen=!1})),e.$watch("project.members",(function(t){if(e.reviewPanel.formattedProjectMembers={},null!=(null!=e.project?e.project.owner:void 0)&&(e.reviewPanel.formattedProjectMembers[e.project.owner._id]=ne(e.project.owner)),null!=(null!=e.project?e.project.members:void 0))return function(){for(var n=[],r=0,a=Array.from(t);r<a.length;r++){var l=a[r];"readAndWrite"===l.privileges?n.push(e.reviewPanel.formattedProjectMembers[l._id]=ne(l)):n.push(void 0)}return n}()})),e.commentState={adding:!1,content:""},e.users={},e.reviewPanelEventsBridge=new Lc,n.socket.on("new-comment",(function(t,n){var a=x(t);return delete a.submitting,a.messages.push(te(n)),e.$apply(),r((function(){return e.$broadcast("review-panel:layout")}))})),n.socket.on("accept-changes",(function(t,n){return t!==e.editor.open_doc_id?E(t).removeChangeIds(n):e.$broadcast("changes:accept",n),P(t),e.$apply((function(){}))})),n.socket.on("resolve-thread",(function(e,t){return F(e,t)})),n.socket.on("reopen-thread",(function(e){return j(e)})),n.socket.on("delete-thread",(function(t){return N(t),e.$apply((function(){}))})),n.socket.on("edit-message",(function(t,n,r){return B(t,n,r),e.$apply((function(){}))})),n.socket.on("delete-message",(function(t,n){return z(t,n),e.$apply((function(){}))}));var S={},k=function(t){return null==e.reviewPanel.entries[t]&&(e.reviewPanel.entries[t]={}),e.reviewPanel.entries[t]},x=function(t){return null==e.reviewPanel.commentThreads[t]&&(e.reviewPanel.commentThreads[t]={messages:[]}),e.reviewPanel.commentThreads[t]},E=function(t){return null==S[t]&&(S[t]=new ru,S[t].resolvedThreadIds=e.reviewPanel.resolvedThreadIds),S[t]},A={};e.reviewPanelEventsBridge.on("aceScrollbarVisibilityChanged",(function(e,t){return A={isVisible:e,scrollbarWidth:t},T()}));var T=function(){return A.isVisible&&e.reviewPanel.subView===e.SubViews.CUR_FILE&&!e.editor.showRichText?p.css("right","".concat(A.scrollbarWidth,"px")):p.css("right","0")};e.$watch("!ui.reviewPanelOpen && reviewPanel.hasEntries",(function(t,n){if(null!=t)return e.ui.miniReviewPanelVisible=t,t!==n?r((function(){return e.$broadcast("review-panel:toggle")})):void 0})),e.$watch("ui.reviewPanelOpen",(function(t){if(null!=t)return t?e.reviewPanel.subView=e.reviewPanel.openSubView:(e.reviewPanel.openSubView=e.reviewPanel.subView,e.reviewPanel.subView=e.SubViews.CUR_FILE),r((function(){return e.$broadcast("review-panel:toggle"),e.$broadcast("review-panel:layout",!1)}))})),e.$watch("reviewPanel.subView",(function(t){if(null!=t)return T(),t===e.SubViews.OVERVIEW?M():void 0})),e.$watch("editor.sharejs_doc",(function(t,n){if(null!=t)return S[t.doc_id]=t.ranges,S[t.doc_id].resolvedThreadIds=e.reviewPanel.resolvedThreadIds,e.reviewPanel.rangesTracker=S[t.doc_id],null!=n&&n.off("flipped_pending_to_inflight"),t.on("flipped_pending_to_inflight",(function(){return R(t)})),R(t)})),e.$watch((function(){var t=e.reviewPanel.entries[e.editor.open_doc_id]||{},n={};for(var r in t){var a=t[r];["add-comment","bulk-actions"].includes(r)||(n[r]=a)}return Object.keys(n).length}),(function(t){return e.reviewPanel.hasEntries=t>0&&e.project.features.trackChangesVisible}));var R=function(e){var t=E(e.doc_id).getIdSeed(),n=ru.generateIdSeed();return E(e.doc_id).setIdSeed(n),e.setTrackChangesIdSeeds({pending:n,inflight:t})},O=function(){return a.get("/project/".concat(e.project_id,"/ranges")).then((function(t){var n=t.data;return function(){for(var t=[],r=0,a=Array.from(n);r<a.length;r++){var l=a[r];if(null==e.reviewPanel.overview.docsCollapsedState[l.id]&&(e.reviewPanel.overview.docsCollapsedState[l.id]=!1),l.id!==e.editor.open_doc_id){var d=E(l.id);d.comments=(null!=l.ranges?l.ranges.comments:void 0)||[],d.changes=(null!=l.ranges?l.ranges.changes:void 0)||[]}t.push(P(l.id))}return t}()}))},M=function(){return e.reviewPanel.overview.loading=!0,O().then((function(){return e.reviewPanel.overview.loading=!1})).catch((function(){return e.reviewPanel.overview.loading=!1}))};e.refreshResolvedCommentsDropdown=function(){e.reviewPanel.dropdown.loading=!0;var t=O();return t.then((function(){return e.reviewPanel.dropdown.loading=!1})),t.catch((function(){return e.reviewPanel.dropdown.loading=!1})),t};var P=function(t){var n,r,a,l,d=E(t),h=k(t),f=function(t){return null==e.reviewPanel.resolvedComments[t]&&(e.reviewPanel.resolvedComments[t]={}),e.reviewPanel.resolvedComments[t]}(t),p=!1,y={};for(var w in h)if(n=h[w],!["add-comment","bulk-actions"].includes(w))for(var _=0,C=Array.from(n.entry_ids);_<C.length;_++)y[C[_]]=!0;for(w in f){n=f[w];for(var S=0,x=Array.from(n.entry_ids);S<x.length;S++)y[x[S]]=!0}for(var A=!1,T=null,R=0,O=Array.from(d.changes);R<O.length;R++){if(n=O[R],p=!0,A&&n.op.d&&n.op.p===T.op.p+T.op.i.length&&n.metadata.user_id===T.metadata.user_id)h[T.id].type="aggregate-change",h[T.id].metadata.replaced_content=n.op.d,h[T.id].entry_ids.push(n.id);else for(r in null==h[n.id]&&(h[n.id]={}),delete y[n.id],a={type:n.op.i?"insert":"delete",entry_ids:[n.id],content:n.op.i||n.op.d,offset:n.op.p,metadata:n.metadata})l=a[r],h[n.id][r]=l;n.op.i?(A=!0,T=n):(A=!1,T=null),null==e.users[n.metadata.user_id]&&Q(n.metadata.user_id)}d.comments.length>0&&ee();for(var M=0,P=Array.from(d.comments);M<P.length;M++){var L,D=P[M];for(r in p=!0,delete y[D.id],e.reviewPanel.resolvedThreadIds[D.op.t]?(L=null!=f[D.id]?f[D.id]:f[D.id]={},delete h[D.id]):(L=null!=h[D.id]?h[D.id]:h[D.id]={},delete f[D.id]),a={type:"comment",thread_id:D.op.t,entry_ids:[D.id],content:D.op.c,offset:D.op.p})l=a[r],L[r]=l}for(var I in y){y[I];p=!0,delete h[I],delete f[I]}if(p)return e.$broadcast("entries:changed")};e.$on("editor:track-changes:changed",(function(){var t=e.editor.open_doc_id;if(P(t),!e.editor.showRichText)return e.$broadcast("review-panel:recalculate-screen-positions"),e.$broadcast("review-panel:layout")})),e.$on("editor:track-changes:visibility_changed",(function(){return r((function(){return e.$broadcast("review-panel:layout",!1)}))})),e.$on("editor:focus:changed",(function(t,n,r,a){var l=e.editor.open_doc_id,d=k(l);for(var h in e.reviewPanel.selectedEntryIds=[],e.reviewPanel.nVisibleSelectedChanges=0,delete d["add-comment"],delete d["bulk-actions"],a&&(d["add-comment"]={type:"add-comment",offset:n,length:r-n},d["bulk-actions"]={type:"bulk-actions",offset:n,length:r-n}),d){var f=d[h],p=!1;if("comment"!==f.type||e.reviewPanel.resolvedThreadIds[f.thread_id]?"insert"===f.type?(p=f.offset>=n&&f.offset+f.content.length<=r,f.focused=f.offset<=n&&n<=f.offset+f.content.length):"delete"===f.type?(p=n<=f.offset&&f.offset<=r,f.focused=f.offset===n):"aggregate-change"===f.type?(p=f.offset>=n&&f.offset+f.content.length<=r,f.focused=f.offset<=n&&n<=f.offset+f.content.length):["add-comment","bulk-actions"].includes(f.type)&&a&&(f.focused=!0):f.focused=f.offset<=n&&n<=f.offset+f.content.length,p){for(var y=0,w=Array.from(f.entry_ids);y<w.length;y++){var _=w[y];e.reviewPanel.selectedEntryIds.push(_)}e.reviewPanel.nVisibleSelectedChanges++}}return e.$broadcast("review-panel:recalculate-screen-positions"),e.$broadcast("review-panel:layout")})),e.acceptChanges=function(t){return L(t),d.sendMB("rp-changes-accepted",{view:e.ui.reviewPanelOpen?e.reviewPanel.subView:"mini"})},e.rejectChanges=function(t){return D(t),d.sendMB("rp-changes-rejected",{view:e.ui.reviewPanelOpen?e.reviewPanel.subView:"mini"})};var L=function(t){return a.post("/project/".concat(e.project_id,"/doc/").concat(e.editor.open_doc_id,"/changes/accept"),{change_ids:t,_csrf:window.csrfToken}),e.$broadcast("changes:accept",t)},D=function(t){return e.$broadcast("changes:reject",t)};e.showBulkAcceptDialog=function(){return I(!0)},e.showBulkRejectDialog=function(){return I(!1)};var I=function(t){return l.open({templateUrl:"bulkActionsModalTemplate",controller:"BulkActionsModalController",resolve:{isAccept:function(){return t},nChanges:function(){return e.reviewPanel.nVisibleSelectedChanges}},scope:e.$new()}).result.then((function(t){return t?(L(e.reviewPanel.selectedEntryIds.slice()),d.sendMB("rp-bulk-accept",{view:e.ui.reviewPanelOpen?e.reviewPanel.subView:"mini",nEntries:e.reviewPanel.nVisibleSelectedChanges})):(D(e.reviewPanel.selectedEntryIds.slice()),d.sendMB("rp-bulk-reject",{view:e.ui.reviewPanelOpen?e.reviewPanel.subView:"mini",nEntries:e.reviewPanel.nVisibleSelectedChanges}))}))};e.handleTogglerClick=function(t){return t.target.blur(),e.toggleReviewPanel()},e.addNewComment=function(){return e.$broadcast("comment:start_adding"),e.toggleReviewPanel()},e.addNewCommentFromKbdShortcut=function(){if(e.project.features.trackChangesVisible)return e.$broadcast("comment:select_line"),e.ui.reviewPanelOpen||e.toggleReviewPanel(),r((function(){return e.$broadcast("review-panel:layout"),e.$broadcast("comment:start_adding")}))},e.startNewComment=function(){return e.$broadcast("comment:select_line"),r((function(){return e.$broadcast("review-panel:layout")}))},e.submitNewComment=function(t){if(null!=t&&""!==t){var l=e.editor.open_doc_id,h=k(l);if(null!=h["add-comment"]){var f=h["add-comment"],p=f.offset,y=f.length,w=ru.generateId();return x(w).submitting=!0,e.$broadcast("comment:add",w,p,y),a.post("/project/".concat(e.project_id,"/thread/").concat(w,"/messages"),{content:t,_csrf:window.csrfToken}).catch((function(){return n.showGenericMessageModal("Error submitting comment","Sorry, there was a problem submitting your comment")})),e.$broadcast("editor:clearSelection"),r((function(){return e.$broadcast("review-panel:layout")})),d.sendMB("rp-new-comment",{size:t.length})}}},e.cancelNewComment=function(t){return r((function(){return e.$broadcast("review-panel:layout")}))},e.startReply=function(t){return t.replying=!0,r((function(){return e.$broadcast("review-panel:layout")}))},e.submitReply=function(t,l){var h=t.thread_id,f=t.replyContent;a.post("/project/".concat(e.project_id,"/thread/").concat(h,"/messages"),{content:f,_csrf:window.csrfToken}).catch((function(){return n.showGenericMessageModal("Error submitting comment","Sorry, there was a problem submitting your comment")}));var p={view:e.ui.reviewPanelOpen?e.reviewPanel.subView:"mini",size:t.replyContent.length,thread:h};return x(h).submitting=!0,t.replyContent="",t.replying=!1,r((function(){return e.$broadcast("review-panel:layout")})),d.sendMB("rp-comment-reply",p)},e.cancelReply=function(t){return t.replying=!1,t.replyContent="",e.$broadcast("review-panel:layout")},e.resolveComment=function(t,r){return t.focused=!1,a.post("/project/".concat(e.project_id,"/thread/").concat(t.thread_id,"/resolve"),{_csrf:window.csrfToken}),F(t.thread_id,n.$scope.user),d.sendMB("rp-comment-resolve",{view:e.ui.reviewPanelOpen?e.reviewPanel.subView:"mini"})},e.unresolveComment=function(t){return j(t),a.post("/project/".concat(e.project_id,"/thread/").concat(t,"/reopen"),{_csrf:window.csrfToken}),d.sendMB("rp-comment-reopen")};var F=function(t,n){var r=x(t);if(null!=r)return r.resolved=!0,r.resolved_by_user=ne(n),r.resolved_at=(new Date).toISOString(),e.reviewPanel.resolvedThreadIds[t]=!0,e.$broadcast("comment:resolve_threads",[t])},j=function(t){var n=x(t);if(null!=n)return delete n.resolved,delete n.resolved_by_user,delete n.resolved_at,delete e.reviewPanel.resolvedThreadIds[t],e.$broadcast("comment:unresolve_thread",t)},N=function(t){return delete e.reviewPanel.resolvedThreadIds[t],delete e.reviewPanel.commentThreads[t],e.$broadcast("comment:remove",t)},B=function(e,t,n){var r=x(e);if(null!=r){for(var a=0,l=Array.from(r.messages);a<l.length;a++){var d=l[a];d.id===t&&(d.content=n)}return P()}},z=function(e,t){var n=x(e);if(null!=n)return n.messages=n.messages.filter((function(e){return e.id!==t})),P()};e.deleteThread=function(t,n,r){return N(r),a({method:"DELETE",url:"/project/".concat(e.project_id,"/doc/").concat(n,"/thread/").concat(r),headers:{"X-CSRF-Token":window.csrfToken}}),d.sendMB("rp-comment-delete")},e.saveEdit=function(t,n){return a.post("/project/".concat(e.project_id,"/thread/").concat(t,"/messages/").concat(n.id,"/edit"),{content:n.content,_csrf:window.csrfToken}),r((function(){return e.$broadcast("review-panel:layout")}))},e.deleteComment=function(t,n){return z(t,n.id),a({method:"DELETE",url:"/project/".concat(e.project_id,"/thread/").concat(t,"/messages/").concat(n.id),headers:{"X-CSRF-Token":window.csrfToken}}),r((function(){return e.$broadcast("review-panel:layout")}))},e.setSubView=function(t){return e.reviewPanel.subView=t,d.sendMB("rp-subview-change",{subView:t})},e.gotoEntry=function(e,t){return n.editorManager.openDocId(e,{gotoOffset:t.offset})},e.toggleFullTCStateCollapse=function(){return e.project.features.trackChanges?e.reviewPanel.fullTCStateCollapsed=!e.reviewPanel.fullTCStateCollapsed:(H(),e.openTrackChangesUpgradeModal())};var H=function(){d.send("subscription-funnel","editor-click-feature","real-time-track-changes")},U=function(t,r,a){null==a&&(a=!1),null==e.reviewPanel.trackChangesState[t]&&(e.reviewPanel.trackChangesState[t]={});var l=e.reviewPanel.trackChangesState[t];if(null==l.syncState||l.syncState===f.SYNCED?(l.value=r,l.syncState=f.SYNCED):l.syncState===f.PENDING&&l.value===r?l.syncState=f.SYNCED:a&&(l.value=r,l.syncState=f.PENDING),t===n.$scope.user.id)return e.editor.wantTrackChanges=r},W=function(t,n){null==n&&(n=!1),e.reviewPanel.trackChangesOnForEveryone=t;for(var r=e.project,a=0,l=Array.from(r.members);a<l.length;a++){var d=l[a];U(d._id,t,n)}return V(t,n),U(r.owner._id,t,n)},V=function(t,n){if(null==n&&(n=!1),e.reviewPanel.trackChangesOnForGuests=t,C()===w||C()===_)return e.editor.wantTrackChanges=t},q=function(){var t={};if(e.reviewPanel.trackChangesOnForEveryone)t.on=!0;else{for(var n in t.on_for={},e.reviewPanel.trackChangesState){var r=e.reviewPanel.trackChangesState[n];t.on_for[n]=r.value}e.reviewPanel.trackChangesOnForGuests&&(t.on_for_guests=!0)}return t._csrf=window.csrfToken,a.post("/project/".concat(e.project_id,"/track_changes"),t)},G=function(t){if("boolean"==typeof t)return W(t),V(t);var n=e.project;e.reviewPanel.trackChangesOnForEveryone=!1,V(!0===t.__guests__);for(var r=0,a=Array.from(n.members);r<a.length;r++){var l=a[r];U(l._id,null!=t[l._id]&&t[l._id])}return U(e.project.owner._id,null!=t[e.project.owner._id]&&t[e.project.owner._id])};e.toggleTrackChangesForEveryone=function(e){return W(e,!0),V(e,!0),q()},e.toggleTrackChangesForGuests=function(e){return V(e,!0),q()},e.toggleTrackChangesForUser=function(e,t){return U(t,e,!0),q()},n.socket.on("toggle-track-changes",(function(t){return e.$apply((function(){return G(t)}))})),e.toggleTrackChangesFromKbdShortcut=function(){if(e.project.features.trackChangesVisible&&e.project.features.trackChanges)return e.toggleTrackChangesForUser(!e.reviewPanel.trackChangesState[n.$scope.user.id].value,n.$scope.user.id)};var K=function(t){return e.reviewPanel.trackChangesForGuestsAvailable="tokenBased"===t};e.$watch("project.publicAccesLevel",K),e.$watch("reviewPanel.trackChangesForGuestsAvailable",(function(t){if(null!=t)return function(t){if(!t&&e.reviewPanel.trackChangesOnForGuests&&!e.reviewPanel.trackChangesOnForEveryone)return e.toggleTrackChangesForGuests(!1)}(t)}));var Y=!1;n.$scope.$on("project:joined",(function(){if(!Y){var e=n.$scope.project;return e.features.trackChanges?(null==window.trackChangesState&&(window.trackChangesState=!1),G(window.trackChangesState)):G(!1),K(e.publicAccesLevel),Y=!0}}));var X=!1,J={},Q=function(t){if(null!=t){if(null!=J[t])return;J[t]=!0}if(!X)return X=!0,a.get("/project/".concat(e.project_id,"/changes/users")).then((function(t){var r=t.data;return X=!1,e.users={},null!=(null!=n.$scope.user?n.$scope.user.id:void 0)&&(e.users[n.$scope.user.id]=ne(n.$scope.user)),function(){for(var t=[],n=0,a=Array.from(r);n<a.length;n++){var l=a[n];null!=l.id?t.push(e.users[l.id]=ne(l)):t.push(void 0)}return t}()})).catch((function(){return X=!1}))},Z=!1,ee=function(){if(!Z)return Z=!0,e.reviewPanel.loadingThreads=!0,a.get("/project/".concat(e.project_id,"/threads")).then((function(t){var n=t.data;for(var a in e.reviewPanel.loadingThreads=!1,e.reviewPanel.resolvedThreadIds){e.reviewPanel.resolvedThreadIds[a];delete e.reviewPanel.resolvedThreadIds[a]}for(a in n){for(var l=n[a],d=0,h=Array.from(l.messages);d<h.length;d++){var f=h[d];te(f)}null!=l.resolved_by_user&&(l.resolved_by_user=ne(l.resolved_by_user),e.reviewPanel.resolvedThreadIds[a]=!0,e.$broadcast("comment:resolve_threads",[a]))}return e.reviewPanel.commentThreads=n,r((function(){return e.$broadcast("review-panel:layout")}))}))},te=function(e){return e.user=ne(e.user),e.timestamp=new Date(e.timestamp),e},ne=function(e){var t,n,r=(null!=e?e._id:void 0)||(null!=e?e.id:void 0);return null==r?{email:null,name:"Anonymous",isSelf:!1,hue:id.a.ANONYMOUS_HUE,avatar_text:"A"}:(r===window.user_id?(n="You",t=!0):(""===(n=[e.first_name,e.last_name].filter((function(e){return null!=e&&""!==e})).join(" "))&&(n=(null!=e.email?e.email.split("@")[0]:void 0)||"Unknown"),t=!1),{id:r,email:e.email,name:n,isSelf:t,hue:id.a.getHueForUserId(r),avatar_text:[e.first_name,e.last_name].filter((function(e){return null!=e})).map((function(e){return e[0]})).join("")})};return e.openTrackChangesUpgradeModal=function(){return l.open({templateUrl:"trackChangesUpgradeModalTemplate",controller:"TrackChangesUpgradeModalController",scope:e.$new()})}}]),a.a.controller("TrackChangesUpgradeModalController",["$scope","$modalInstance",function(e,t){return e.cancel=function(){return t.dismiss()}}]),a.a.controller("BulkActionsModalController",["$scope","$modalInstance","isAccept","nChanges",function(e,t,n,r){return e.isAccept=n,e.nChanges=r,e.cancel=function(){return t.dismiss()},e.confirm=function(){return t.close(n)}}]),a.a.directive("reviewPanelSorted",["$timeout",function(e){return{link:function(e,t,n){var r=0,a=function(n){var a,l,d,h,f,p,y,w,_;null==n&&(n=!0),n?t.removeClass("no-animate"):t.addClass("no-animate"),e.ui.reviewPanelOpen?(y=8,w=38,p=57):(y=4,w=4,p=0);for(var C=[],S=0,k=Array.from(t.find(".rp-entry-wrapper"));S<k.length;S++){var x=k[S];a={$indicator_el:$(x).find(".rp-entry-indicator"),$box_el:$(x).find(".rp-entry"),$callout_el:$(x).find(".rp-entry-callout"),scope:angular.element(x).scope()},e.ui.reviewPanelOpen?a.$layout_el=a.$box_el:a.$layout_el=a.$indicator_el,a.height=a.$layout_el.height(),C.push(a)}if(C.sort((function(e,t){return e.scope.entry.offset-t.scope.entry.offset})),0!==C.length){var E=e.reviewPanel.rendererData.lineHeight,A=Math.min(r,C.length-1);for(d=0;d<C.length;d++)if((a=C[d]).scope.entry.focused){A=d;break}var T=C.slice(A+1),R=C.slice(0,A),O=C[A];r=A,sl_console.log("focused_entry_index",A);var M=function(e,t,n){return t<=n?(e.removeClass("rp-entry-callout-inverted"),e.css({top:t+E-1,height:n-t})):(e.addClass("rp-entry-callout-inverted"),e.css({top:n+E,height:t-n}))},P=Math.max(O.scope.entry.screenPos.y,w);O.$box_el.css({top:P,visibility:"visible"}),O.$indicator_el.css({top:P}),M(O.$callout_el,O.scope.entry.screenPos.y,P);for(var L=P+O.$layout_el.height(),D=0,I=Array.from(T);D<I.length;D++){h=(a=I[D]).scope.entry.screenPos.y,l=a.height,L=(_=Math.max(h,L+y))+l,a.$box_el.css({top:_,visibility:"visible"}),a.$indicator_el.css({top:_}),M(a.$callout_el,h,_),sl_console.log("ENTRY",{entry:a.scope.entry,top:_})}var F=P;for(R.reverse(),d=0;d<R.length;d++){var j=(h=(a=R[d]).scope.entry.screenPos.y)+(l=a.height);F=_=Math.min(j,F-y)-l,a.$box_el.css({top:_,visibility:"visible"}),a.$indicator_el.css({top:_}),M(a.$callout_el,h,_),sl_console.log("ENTRY",{entry:a.scope.entry,top:_})}return f=_<w?-_+w:0,e.$emit("review-panel:sizes",{overflowTop:f,height:L+p})}};e.$applyAsync((function(){return a()})),e.$on("review-panel:layout",(function(t,n){return null==n&&(n=!0),e.$applyAsync((function(){return a(n)}))})),e.$watch("reviewPanel.rendererData.lineHeight",(function(){return a()}));var l=t,d=t.find(".rp-entry-list-inner");ace.require("ace/lib/event").addMouseWheelListener(l[0],(function(e){var t=e.wheelY,n=parseInt(d.css("top"));return f(-(n-4*t)),e.preventDefault()}));var h=!1,f=function(t){return e.reviewPanelEventsBridge.emit("externalScroll",t)};return e.reviewPanelEventsBridge.on("aceScroll",(function(e,t){if(h)return h=!1;return d.height(t),d.css({top:-e})})),e.$on("$destroy",(function(){return e.reviewPanelEventsBridge.off("aceScroll")})),e.reviewPanelEventsBridge.emit("refreshScrollPosition")}}}]),a.a.directive("reviewPanelToggle",(function(){return{restrict:"E",scope:{onToggle:"&",ngModel:"=",valWhenUndefined:"=?",isDisabled:"=?",onDisabledClick:"&?",description:"@"},link:function(e){return null==e.disabled&&(e.disabled=!1),e.onChange=function(){return e.onToggle({isOn:e.localModel})},e.handleClick=function(){if(e.disabled&&null!=e.onDisabledClick)return e.onDisabledClick()},e.localModel=e.ngModel,e.$watch("ngModel",(function(t){return null!=e.valWhenUndefined&&null==t&&(t=e.valWhenUndefined),e.localModel=t}))},template:'<fieldset class="rp-toggle" ng-click="handleClick();">\n<legend class="sr-only">{{description}}</legend>\n<input id="rp-toggle-{{$id}}" ng-disabled="isDisabled" type="checkbox" class="rp-toggle-hidden-input" ng-model="localModel" ng-change="onChange()" />\n<label for="rp-toggle-{{$id}}" class="rp-toggle-btn"></label>\n</fieldset>'}})),a.a.directive("changeEntry",["$timeout",function(e){return{restrict:"E",templateUrl:"changeEntryTemplate",scope:{entry:"=",user:"=",permissions:"=",onAccept:"&",onReject:"&",onIndicatorClick:"&",onBodyClick:"&"},link:function(t,n,r){return t.contentLimit=40,t.isCollapsed=!0,t.needsCollapsing=!1,n.on("click",(function(e){if($(e.target).is(".rp-entry, .rp-entry-description, .rp-entry-body, .rp-entry-action-icon i"))return t.onBodyClick()})),t.toggleCollapse=function(){return t.isCollapsed=!t.isCollapsed,e((function(){return t.$emit("review-panel:layout")}))},t.$watch("entry.content.length",(function(e){return t.needsCollapsing=e>t.contentLimit}))}}}]),a.a.directive("aggregateChangeEntry",["$timeout",function(e){return{restrict:"E",templateUrl:"aggregateChangeEntryTemplate",scope:{entry:"=",user:"=",permissions:"=",onAccept:"&",onReject:"&",onIndicatorClick:"&",onBodyClick:"&"},link:function(t,n,r){return t.contentLimit=17,t.isDeletionCollapsed=!0,t.isInsertionCollapsed=!0,t.deletionNeedsCollapsing=!1,t.insertionNeedsCollapsing=!1,n.on("click",(function(e){if($(e.target).is(".rp-entry, .rp-entry-description, .rp-entry-body, .rp-entry-action-icon i"))return t.onBodyClick()})),t.toggleDeletionCollapse=function(){return t.isDeletionCollapsed=!t.isDeletionCollapsed,e((function(){return t.$emit("review-panel:layout")}))},t.toggleInsertionCollapse=function(){return t.isInsertionCollapsed=!t.isInsertionCollapsed,e((function(){return t.$emit("review-panel:layout")}))},t.$watch("entry.metadata.replaced_content.length",(function(e){return t.deletionNeedsCollapsing=e>t.contentLimit})),t.$watch("entry.content.length",(function(e){return t.insertionNeedsCollapsing=e>t.contentLimit}))}}}]),a.a.directive("commentEntry",["$timeout",function(e){return{restrict:"E",templateUrl:"commentEntryTemplate",scope:{entry:"=",threads:"=",permissions:"=",onResolve:"&",onReply:"&",onIndicatorClick:"&",onSaveEdit:"&",onDelete:"&",onBodyClick:"&"},link:function(t,n,r){return t.state={animating:!1},n.on("click",(function(e){if($(e.target).is(".rp-entry, .rp-comment-loaded, .rp-comment-content, .rp-comment-reply, .rp-entry-metadata"))return t.onBodyClick()})),t.handleCommentReplyKeyPress=function(e){if(13===e.keyCode&&!e.shiftKey&&!e.ctrlKey&&!e.metaKey&&(e.preventDefault(),t.entry.replyContent.length>0))return e.target.blur(),t.onReply()},t.animateAndCallOnResolve=function(){return t.state.animating=!0,n.find(".rp-entry").css("top",0),e((function(){return t.onResolve()}),350),!0},t.startEditing=function(e){return e.editing=!0,setTimeout((function(){return t.$emit("review-panel:layout")}))},t.saveEdit=function(e){return e.editing=!1,t.onSaveEdit({comment:e})},t.confirmDelete=function(e){return e.deleting=!0,setTimeout((function(){return t.$emit("review-panel:layout")}))},t.cancelDelete=function(e){return e.deleting=!1,setTimeout((function(){return t.$emit("review-panel:layout")}))},t.doDelete=function(e){return e.deleting=!1,t.onDelete({comment:e})},t.saveEditOnEnter=function(e,n){if(13===e.keyCode&&!e.shiftKey&&!e.ctrlKey&&!e.metaKey)return e.preventDefault(),t.saveEdit(n)}}}}]),"");a.a.directive("addCommentEntry",(function(){return{restrict:"E",templateUrl:"addCommentEntryTemplate",scope:{onStartNew:"&",onSubmit:"&",onCancel:"&"},link:function(e,t,n){e.state={isAdding:!1,content:Mp},e.$on("comment:start_adding",(function(){return e.startNewComment()})),e.$on("$destroy",(function(){Mp=e.state.content})),e.startNewComment=function(){e.state.isAdding=!0,e.onStartNew(),setTimeout((function(){return e.$broadcast("comment:new:open")}))},e.cancelNewComment=function(){e.state.isAdding=!1,e.state.content="",e.onCancel()},e.handleCommentKeyPress=function(t){13!==t.keyCode||t.shiftKey||t.ctrlKey||t.metaKey||(t.preventDefault(),e.state.content.length>0&&e.submitNewComment())},e.submitNewComment=function(t){e.onSubmit({content:e.state.content}),Mp=e.state.content,e.state.isAdding=!1,e.state.content=""}}}}));a.a.directive("bulkActionsEntry",(function(){return{restrict:"E",templateUrl:"bulkActionsEntryTemplate",scope:{onBulkAccept:"&",onBulkReject:"&",nEntries:"="},link:function(e,t,n){return e.bulkAccept=function(){return e.onBulkAccept()},e.bulkReject=function(){return e.onBulkReject()}}}})),a.a.directive("resolvedCommentEntry",(function(){return{restrict:"E",templateUrl:"resolvedCommentEntryTemplate",scope:{thread:"=",permissions:"=",onUnresolve:"&",onDelete:"&"},link:function(e,t,n){return e.contentLimit=40,e.needsCollapsing=!1,e.isCollapsed=!0,e.toggleCollapse=function(){return e.isCollapsed=!e.isCollapsed},e.$watch("thread.content.length",(function(t){return e.needsCollapsing=t>e.contentLimit}))}}})),a.a.directive("resolvedCommentsDropdown",(function(){return{restrict:"E",templateUrl:"resolvedCommentsDropdownTemplate",scope:{entries:"=",threads:"=",resolvedIds:"=",docs:"=",permissions:"=",onOpen:"&",onUnresolve:"&",onDelete:"&",isLoading:"="},link:function(e,t,n){var r;e.state={isOpen:!1},e.toggleOpenState=function(){if(e.state.isOpen=!e.state.isOpen,e.state.isOpen)return e.onOpen().then((function(){return r()}))},e.resolvedComments=[],e.handleUnresolve=function(t){return e.onUnresolve({threadId:t}),e.resolvedComments=e.resolvedComments.filter((function(e){return e.threadId!==t}))},e.handleDelete=function(t,n,r){return e.onDelete({entryId:t,docId:n,threadId:r}),e.resolvedComments=e.resolvedComments.filter((function(e){return e.threadId!==r}))};var a=function(t){var n=d.a.find(e.docs,(function(e){return e.doc.id===t}));return null!=n?n.path:null};return r=function(){return e.resolvedComments=[],function(){var t=[];for(var n in e.entries){var r=e.entries[n];t.push(function(){var t=[];for(var l in r){var d=r[l];if("comment"===d.type&&null!=(null!=e.threads[d.thread_id]?e.threads[d.thread_id].resolved:void 0)){var h=angular.copy(e.threads[d.thread_id]);h.content=d.content,h.threadId=d.thread_id,h.entryId=l,h.docId=n,h.docName=a(n),t.push(e.resolvedComments.push(h))}else t.push(void 0)}return t}())}return t}()}}}})),a.a.directive("reviewPanelCollapseHeight",["$parse",function(e){return{restrict:"A",link:function(t,n,r){return t.$watch((function(){return e(r.reviewPanelCollapseHeight)(t)}),(function(e){var t=n.prop("scrollHeight");return t>0?e?n.animate({height:0},150):n.animate({height:t},150):e?n.height(0):void 0}))}}}]),a.a.filter("notEmpty",(function(){return function(e){return!angular.equals({},e)}})),a.a.filter("numKeys",(function(){return function(e){return null!=e?Object.keys(e).length:0}})),a.a.filter("orderOverviewEntries",(function(){return function(e){var t=[];for(var n in e){var r=e[n];r.entry_id=n,t.push(r)}return t.sort((function(e,t){return e.offset-t.offset})),t}})),n(737),n(739);function Pp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,l=void 0;try{for(var d,h=e[Symbol.iterator]();!(r=(d=h.next()).done)&&(n.push(d.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==h.return||h.return()}finally{if(a)throw l}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Lp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Lp(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Dp(e){var t=e.outlineItem,n=e.jumpToLine,r=e.highlightedLine,a=ln().t,l=Pp(Object(y.useState)(!0),2),d=l[0],h=l[1],f=Object(y.createRef)(),p=Object(y.useRef)(!1),_=De()("outline-item",{"outline-item-no-children":!t.children}),C=!d&&function e(t){return(t||[]).map((function(t){return e(t.children).concat(t.line)})).flat()}(t.children).includes(r),S=r===t.line||C,k=De()("outline-item-link",{"outline-item-link-highlight":S});Object(y.useEffect)((function(){var e=p.current;p.current=S,!e&&S&&ei(f.current,{scrollMode:"if-needed",block:"center"})}),[S,f,p]);var x=t.children?d:void 0;return w.a.createElement("li",{className:_,"aria-expanded":x,role:"treeitem","aria-current":S,"aria-label":t.title},w.a.createElement("div",{className:"outline-item-row"},t.children?w.a.createElement("button",{className:"outline-item-expand-collapse-btn",onClick:function(){h(!d)},"aria-label":a(d?"collapse":"expand")},w.a.createElement(qr,{type:d?"angle-down":"angle-right",classes:{icon:"outline-caret-icon"}})):null,w.a.createElement("button",{className:k,onClick:function(){n(t.line,!1)},onDoubleClick:function(){n(t.line,!0)},ref:f},t.title)),d&&t.children?w.a.createElement(jp,{outline:t.children,jumpToLine:n,isRoot:!1,highlightedLine:r}):null)}Dp.propTypes={outlineItem:C.a.exact({line:C.a.number.isRequired,title:C.a.string.isRequired,level:C.a.number,children:C.a.array}).isRequired,jumpToLine:C.a.func.isRequired,highlightedLine:C.a.number};var Ip=Dp;function Fp(e){var t=e.outline,n=e.jumpToLine,r=e.isRoot,a=e.highlightedLine,l=De()("outline-item-list",{"outline-item-list-root":r});return w.a.createElement("ul",{className:l,role:r?"tree":"group"},t.map((function(e,t){return w.a.createElement(Ip,{key:"".concat(e.level,"-").concat(t),outlineItem:e,jumpToLine:n,highlightedLine:a})})))}Fp.propTypes={outline:C.a.array.isRequired,jumpToLine:C.a.func.isRequired,isRoot:C.a.bool,highlightedLine:C.a.number};var jp=Fp;function Np(e){var t=e.outline,n=e.jumpToLine,r=e.highlightedLine,a=ln().t;return w.a.createElement("div",null,t.length?w.a.createElement(jp,{outline:t,jumpToLine:n,isRoot:!0,highlightedLine:r}):w.a.createElement("div",{className:"outline-body-no-elements"},a("we_cant_find_any_sections_or_subsections_in_this_file"),"."," ",w.a.createElement("a",{href:"/learn/how-to/Using_the_File_Outline_feature",className:"outline-body-link",target:"_blank",rel:"noopener noreferrer"},a("find_out_more_about_the_file_outline"))))}Np.propTypes={outline:C.a.array.isRequired,jumpToLine:C.a.func.isRequired,highlightedLine:C.a.number};var Bp=Np;function zp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,l=void 0;try{for(var d,h=e[Symbol.iterator]();!(r=(d=h.next()).done)&&(n.push(d.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==h.return||h.return()}finally{if(a)throw l}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Hp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Hp(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Up(e){var t=e.isTexFile,n=e.outline,r=e.jumpToLine,a=e.onToggle,l=e.eventTracking,d=e.highlightedLine,h=ln().t,f=df({projectId:C.a.string.isRequired}).projectId,p="file_outline.expanded.".concat(f),_=zp(Object(y.useState)((function(){return!1!==ze.getItem(p)})),2),S=_[0],k=_[1],x=t&&S;Object(y.useEffect)((function(){a(x)}),[x,a]);var E=De()("outline-pane",{"outline-pane-disabled":!t});return w.a.createElement("div",{className:E},w.a.createElement("header",{className:"outline-header"},w.a.createElement("button",{className:"outline-header-expand-collapse-btn",disabled:!t,onClick:function(){t&&(ze.setItem(p,!S),l.sendMB(S?"outline-collapse":"outline-expand"),k(!S))},"aria-label":h(S?"hide_outline":"show_outline")},w.a.createElement(qr,{type:x?"angle-down":"angle-right",classes:{icon:"outline-caret-icon"}}),w.a.createElement("h4",{className:"outline-header-name"},h("file_outline")))),S&&t?w.a.createElement("div",{className:"outline-body"},w.a.createElement(Bp,{outline:n,jumpToLine:r,highlightedLine:d})):null)}Up.propTypes={isTexFile:C.a.bool.isRequired,outline:C.a.array.isRequired,jumpToLine:C.a.func.isRequired,onToggle:C.a.func.isRequired,eventTracking:C.a.object.isRequired,highlightedLine:C.a.number};var Wp=A(Up);function Vp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,l=void 0;try{for(var d,h=e[Symbol.iterator]();!(r=(d=h.next()).done)&&(n.push(d.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==h.return||h.return()}finally{if(a)throw l}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return qp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qp(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}a.a.controller("OutlineController",["$scope","ide","eventTracking",function(e,t,n){e.isTexFile=!1,e.outline=[],e.eventTracking=n,e.$on("outline-manager:outline-changed",(function(t,n){e.$applyAsync((function(){e.isTexFile=n.isTexFile,e.outline=n.outline,e.highlightedLine=n.highlightedLine}))})),e.jumpToLine=function(e,r){t.outlineManager.jumpToLine(e,r),n.sendMB("outline-jump-to-line")},e.onToggle=function(t){e.$applyAsync((function(){e.$emit("outline-toggled",t)}))}}]),a.a.component("outlinePane",Object(p.react2angular)(ip.use(Wp),["outline","jumpToLine","highlightedLine","eventTracking","onToggle","isTexFile"]));var Gp={book:10,part:20,addpart:20,chapter:30,addchap:30,section:40,addsect:40,subsection:50,subsubsection:60,paragraph:70,subparagraph:80},Kp="(".concat(Object.keys(Gp).join("|"),")"),Yp=new RegExp("".concat("^\\s*\\\\").concat(Kp).concat("\\s?\\*?\\s?").concat("(\\[([^\\]]+)\\])?").concat("\\s?\\*?\\s?").concat("{(.*)}"));var Xp=new RegExp("([^\\\\]*)\\\\([^{]+){([^}]+)}(.*)");function Jp(e){var t=e.indexOf("}");if(t<0)return e;var n=e.match(Xp);if(!n)return e.substring(0,t);var r=Vp(n,5),a=r[1],l=r[2],d=r[3],h=r[4];return e="label"===l?"".concat(a).concat(h):"".concat(a).concat(d).concat(h)}var Qp=new RegExp("\\.(".concat(nf.a.validRootDocExtensions.join("|"),")$"),"i");var Zp=function(e){return Qp.test(e)};function eg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var tg=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ide=t,this.scope=n,this.shareJsDoc=null,this.isTexFile=!1,this.flatOutline=[],this.outline=[],this.highlightedLine=null,this.ignoreNextScroll=!1,this.ignoreNextCursorUpdate=!1,n.$on("doc:after-opened",(function(e,t){t.isNewDoc&&(r.ignoreNextCursorUpdate=!0),r.ignoreNextScroll=!0,r.shareJsDoc=n.editor.sharejs_doc,r.isTexFile=Zp(n.editor.open_doc_name),r.updateOutline(),r.broadcastChangeEvent()})),n.$watch("openFile.name",(function(e){r.isTexFile=Zp(e),r.updateOutline(),r.broadcastChangeEvent()})),n.$on("doc:changed",(function(){r.updateOutline(),r.broadcastChangeEvent()})),n.$on("cursor:editor:update",(function(e,t){r.ignoreNextCursorUpdate?r.ignoreNextCursorUpdate=!1:(r.updateHighlightedLine(t.row+1),r.broadcastChangeEvent())})),n.$on("scroll:editor:update",(function(e,t){r.ignoreNextScroll?r.ignoreNextScroll=!1:r.updateHighlightedLine(t+1)})),n.$watch("editor.showRichText",(function(){r.ignoreNextScroll=!0,r.ignoreNextCursorUpdate=!0}))}var t,n,r;return t=e,(n=[{key:"updateOutline",value:function(){if(this.outline=[],this.isTexFile){var e=this.ide.editorManager.getCurrentDocValue();e&&(this.flatOutline=function(e){var t=e.split("\n"),n=[];return t.forEach((function(e,t){var r=e.match(Yp);if(r){var a=Vp(r,5),l=a[1],d=a[3],h=a[4];n.push({line:t+1,title:Jp(d||h),level:Gp[l]})}})),n}(e),this.outline=(t=this.flatOutline,n={},r=[],t.forEach((function(e){var t=Object.keys(n),a=t.reverse().find((function(t){return t<e.level})),l=n[a];l?l.children?l.children.push(e):l.children=[e]:r.push(e),n[e.level]=e,t.filter((function(t){return t>e.level})).forEach((function(e){return delete n[e]}))})),r))}var t,n,r}},{key:"updateHighlightedLine",value:function(e){for(var t=null,n=0;n<this.flatOutline.length;n++){var r=this.flatOutline[n];if(e<r.line)break;t=r.line}t!==this.highlightedLine&&(this.highlightedLine=t,this.broadcastChangeEvent())}},{key:"jumpToLine",value:function(e,t){this.ignoreNextScroll=!0,this.ide.editorManager.jumpToLine({gotoLine:e,syncToPdf:t})}},{key:"broadcastChangeEvent",value:function(){this.scope.$broadcast("outline-manager:outline-changed",{isTexFile:this.isTexFile,outline:this.outline,highlightedLine:this.highlightedLine})}}])&&eg(t.prototype,n),r&&eg(t,r),e}();var ng=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isOverAce=!1,this.pdfDiv=null,this.aceDiv=null,this.handlePdfDivMouseLeave=function(){return n.pdfDiv.addEventListener("wheel",n.dispatchToAce)},this.handlePdfDivMouseEnter=function(){return n.pdfDiv.removeEventListener("wheel",n.dispatchToAce)},this.handleAceDivMouseLeave=function(){return n.isOverAce=!1},this.handleAceDivMouseEnter=function(){return n.isOverAce=!0},this.setListeners=function(){return n.isOverAce=!1,null!=n.pdfDiv&&(n.pdfDiv.removeEventListener(n.handlePdfDivMouseLeave),n.pdfDiv.removeEventListener(n.handlePdfDivMouseEnter)),null!=n.aceDiv&&(n.aceDiv.removeEventListener(n.handleAceDivMouseLeave),n.aceDiv.removeEventListener(n.handleAceDivMouseEnter)),n.pdfDiv=document.querySelector(".pdfjs-viewer"),n.aceDiv=document.querySelector(".ace_content"),n.pdfDiv.addEventListener("mouseleave",n.handlePdfDivMouseLeave),n.pdfDiv.addEventListener("mouseenter",n.handlePdfDivMouseEnter),n.aceDiv.addEventListener("mouseleave",n.handleAceDivMouseLeave),n.aceDiv.addEventListener("mouseenter",n.handleAceDivMouseEnter)},this.dispatchToAce=function(e){if(n.isOverAce)return window.setTimeout((function(){return n.aceDiv.dispatchEvent(e)}),1),e.preventDefault()},t.$on("loaded",(function(){return n.setListeners()}))},rg=window.brandVariation;a.a.factory("CobrandingDataService",(function(){return{isProjectCobranded:function(){return null!=rg},getLogoImgUrl:function(){return null!=rg?rg.logo_url:void 0},getSubmitBtnHtml:function(){return null!=rg?rg.submit_button_html:void 0},getBrandVariationName:function(){return null!=rg?rg.name:void 0},getBrandVariationHomeUrl:function(){return null!=rg?rg.home_url:void 0},getPublishGuideHtml:function(){return null!=rg?rg.publish_guide_html:void 0},getPartner:function(){return null!=rg?rg.partner:void 0},hasBrandedMenu:function(){return null!=rg?rg.branded_menu:void 0},getBrandId:function(){return null!=rg?rg.brand_id:void 0},getBrandVariationId:function(){return null!=rg?rg.id:void 0}}})),a.a.factory("settings",["ide","eventTracking",function(e,t){return{saveSettings:function(n){for(var r=0,a=Array.from(Object.keys(n));r<a.length;r++){var l=a[r],d=l,h=n[l];t.sendMB("setting-changed",{changedSetting:d,changedSettingVal:h})}return n._csrf=window.csrfToken,e.$http.post("/user/settings",n)},saveProjectSettings:function(t){return t._csrf=window.csrfToken,e.$http.post("/project/".concat(e.project_id,"/settings"),t)},saveProjectAdminSettings:function(t){return t._csrf=window.csrfToken,e.$http.post("/project/".concat(e.project_id,"/settings/admin"),t)}}}]),a.a.controller("SettingsController",["$scope","settings","ide",function(e,t,n){var r=this;e.overallThemesList=window.overallThemes,e.ui={loadingStyleSheet:!1};return["default","vim","emacs"].includes(e.settings.mode)||(e.settings.mode="default"),["pdfjs","native"].includes(e.settings.pdfViewer)||(e.settings.pdfViewer="pdfjs"),null==e.settings.fontFamily||["monaco","lucida"].includes(e.settings.fontFamily)||delete e.settings.fontFamily,null==e.settings.lineHeight||["compact","normal","wide"].includes(e.settings.lineHeight)||delete e.settings.lineHeight,e.fontSizeAsStr=function(t){return null!=t&&(e.settings.fontSize=t),e.settings.fontSize.toString()},e.getValidMainDocs=function(){var t=[];return e.docs&&(t=e.docs.filter((function(t){return Zp(t.doc.name)||e.project.rootDoc_id===t.doc.id}))),t},e.$watch("settings.editorTheme",(function(e,n){if(e!==n)return t.saveSettings({editorTheme:e})})),e.$watch("settings.overallTheme",(function(n,r){if(n!==r){var a=d.a.find(e.overallThemesList,(function(e){return e.val===n}));if(null!=a)return function(t){e.ui.loadingStyleSheet=!0;var n=document.querySelector("head"),r=document.getElementById("main-stylesheet"),a=document.createElement("link");a.addEventListener("load",(function(t){return e.$applyAsync((function(){return e.ui.loadingStyleSheet=!1,n.removeChild(r)}))})),a.setAttribute("rel","stylesheet"),a.setAttribute("id","main-stylesheet"),a.setAttribute("href",t.path),n.appendChild(a)}(a),t.saveSettings({overallTheme:n})}})),e.$watch("settings.fontSize",(function(e,n){if(e!==n)return t.saveSettings({fontSize:parseInt(e,10)})})),e.$watch("settings.mode",(function(e,n){if(e!==n)return t.saveSettings({mode:e})})),e.$watch("settings.autoComplete",(function(e,n){if(e!==n)return t.saveSettings({autoComplete:e})})),e.$watch("settings.autoPairDelimiters",(function(e,n){if(e!==n)return t.saveSettings({autoPairDelimiters:e})})),e.$watch("settings.pdfViewer",(function(e,n){if(e!==n)return t.saveSettings({pdfViewer:e})})),e.$watch("settings.syntaxValidation",(function(e,n){if(e!==n)return t.saveSettings({syntaxValidation:e})})),e.$watch("settings.fontFamily",(function(e,n){if(e!==n)return t.saveSettings({fontFamily:e})})),e.$watch("settings.lineHeight",(function(e,n){if(e!==n)return t.saveSettings({lineHeight:e})})),e.$watch("project.spellCheckLanguage",(function(e,n){if(!r.ignoreUpdates)return null!=n&&e!==n?(t.saveProjectSettings({spellCheckLanguage:e}),t.saveSettings({spellCheckLanguage:e})):void 0})),e.$watch("project.compiler",(function(e,n){if(!r.ignoreUpdates)return null!=n&&e!==n?t.saveProjectSettings({compiler:e}):void 0})),e.$watch("project.imageName",(function(e,n){if(!r.ignoreUpdates)return null!=n&&e!==n?t.saveProjectSettings({imageName:e}):void 0})),e.$watch("project.rootDoc_id",(function(n,a){r.ignoreUpdates||void 0!==a&&"readOnly"!==e.permissionsLevel&&n!==a&&t.saveProjectSettings({rootDocId:n}).catch((function(){e.project.rootDoc_id=a}))})),n.socket.on("compilerUpdated",(function(t){return r.ignoreUpdates=!0,e.$apply((function(){return e.project.compiler=t})),delete r.ignoreUpdates})),n.socket.on("imageNameUpdated",(function(t){return r.ignoreUpdates=!0,e.$apply((function(){return e.project.imageName=t})),delete r.ignoreUpdates})),n.socket.on("spellCheckLanguageUpdated",(function(t){return r.ignoreUpdates=!0,e.$apply((function(){return e.project.spellCheckLanguage=t})),delete r.ignoreUpdates}))}]),a.a.controller("ProjectNameController",["$scope","$element","settings","ide",function(e,t,n,r){var a=t.find(".name")[0];return e.state={renaming:!1,overflowed:!1},e.inputs={},e.startRenaming=function(){return e.inputs.name=e.project.name,e.state.renaming=!0,e.$emit("project:rename:start")},e.finishRenaming=function(){e.state.renaming=!1;var t=e.inputs.name;if(e.project.name!==t){var a=e.project.name;return e.project.name=t,n.saveProjectSettings({name:e.project.name}).catch((function(t){var n=t.data,l=t.status;return e.project.name=a,400===l?r.showGenericMessageModal("Error renaming project",n):r.showGenericMessageModal("Error renaming project","Please try again in a moment")}))}},r.socket.on("projectNameUpdated",(function(t){return e.$apply((function(){return e.project.name=t}))})),e.$watch("project.name",(function(t){if(null!=t)return window.document.title=t+" - Online LaTeX Editor ".concat(ExposedSettings.appName),e.$applyAsync((function(){return e.state.overflowed=a.scrollWidth>a.clientWidth}))}))}]);function ig(e){return function(e){if(Array.isArray(e))return ag(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||og(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function og(e,t){if(e){if("string"==typeof e)return ag(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ag(e,t):void 0}}function ag(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}a.a.controller("ShareController",["$scope","$modal","ide","projectInvites","projectMembers","eventTracking",function(e,t,n,r,a,l){e.openShareProjectModal=function(n){e.isAdmin=n,l.sendMBOnce("ide-open-share-modal-once"),t.open({templateUrl:"shareProjectModalTemplate",controller:"ShareProjectModalController",scope:e})},n.socket.on("project:tokens:changed",(function(t){null!=t.tokens&&(n.$scope.project.tokens=t.tokens,e.$digest())})),n.socket.on("project:membership:changed",(function(t){t.members&&a.getMembers().then((function(t){t.data.members&&(e.project.members=t.data.members)})).catch((function(){console.error("Error fetching members for project")})),t.invites&&r.getInvites().then((function(t){t.data.invites&&(e.project.invites=t.data.invites)})).catch((function(){console.error("Error fetching invites for project")}))}))}]),a.a.controller("ShareProjectModalController",["$scope","$modalInstance","$timeout","projectMembers","projectInvites","$modal","$http","ide","validateCaptcha","validateCaptchaV3","settings","eventTracking",function(e,t,n,r,a,l,h,f,p,y,w,_){e.inputs={privileges:"readAndWrite",contacts:[]},e.state={error:null,errorReason:null,inflight:!1,startedFreeTrial:!1,invites:[]},t.opened.then((function(){return n((function(){return e.$broadcast("open")}),200)}));e.refreshCanAddCollaborators=function(){var t=e.project.features.collaborators;e.canAddCollaborators=e.project.members.length+e.project.invites.length<t||-1===t},e.refreshCanAddCollaborators(),e.$watch("canAddCollaborators",(function(){e.canAddCollaborators||_.send("subscription-funnel","editor-click-feature","projectMembers")})),e.$watch("(project.members.length + project.invites.length)",(function(t){return e.refreshCanAddCollaborators()})),e.autocompleteContacts=[],e.isRestrictedTokenMember||h.get("/user/contacts").then((function(t){var n=t.data;e.autocompleteContacts=n.contacts||[];var r,a=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=og(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,d=!0,h=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return d=e.done,e},e:function(e){h=!0,l=e},f:function(){try{d||null==n.return||n.return()}finally{if(h)throw l}}}}(e.autocompleteContacts);try{for(a.s();!(r=a.n()).done;){var l=r.value;"user"===l.type?l.first_name!==l.email.split("@")[0]||l.last_name?(l.name="".concat(l.first_name," ").concat(l.last_name),l.display="".concat(l.name," <").concat(l.email,">")):l.display=l.email:l.display=l.name}}catch(e){a.e(e)}finally{a.f()}}));var C=function(){return(e.project.members||[]).map((function(e){return e.email}))};e.filterAutocompleteUsers=function(t){var n=C();return e.autocompleteContacts.filter((function(e){if(null!=e.email&&n.includes(e.email))return!1;for(var r=0,a=[e.name,e.email];r<a.length;r++){var l=a[r];if(null!=l&&l.toLowerCase().indexOf(t.toLowerCase())>-1)return!0}return!1}))},e.addMembers=function(){n((function(){if(0!==e.inputs.contacts.length){var t=e.inputs.contacts;e.inputs.contacts=[],e.clearError(),e.state.inflight=!0,null==e.project.invites&&(e.project.invites=[]);var n=C(),r=(e.project.invites||[]).map((function(e){return e.email}));!function l(){var h;if(0===t.length||!e.canAddCollaborators)return e.state.inflight=!1,void e.$apply();var f=t.shift();h="user"===f.type?f.email:f.display;if(h=h.toLowerCase(),n.includes(h))return l();y("invite");var w=window.ExposedSettings;p((function(t){e.grecaptchaResponse=t;var n=e.project.invites||[],f=d.a.find(n,(function(e){return e.email===h}));(r.includes(h)&&f?a.resendInvite(f._id):a.sendInvite(h,e.inputs.privileges,e.grecaptchaResponse)).then((function(t){var n=t.data;if(n.error)e.setError(n.error),e.state.inflight=!1;else if(n.invite){var r=n.invite;e.project.invites.push(r)}else{var a,d=null!=n.users?n.users:null!=n.user?[n.user]:[];(a=e.project.members).push.apply(a,ig(d))}setTimeout((function(){return l()}),0)})).catch((function(t){var n=t.data;e.state.inflight=!1,e.setError(n.errorReason)}))}),w.recaptchaDisabled.invite)}()}}),50)},e.removeMember=function(t){e.monitorRequest(r.removeMember(t).then((function(){var n=e.project.members.indexOf(t);-1!==n&&e.project.members.splice(n,1)})))},e.revokeInvite=function(t){e.monitorRequest(a.revokeInvite(t._id).then((function(){var n=e.project.invites.indexOf(t);-1!==n&&e.project.invites.splice(n,1)})))},e.resendInvite=function(t,n){e.monitorRequest(a.resendInvite(t._id).then((function(){n.target.blur()})).catch((function(){n.target.blur()})))},e.makeTokenBased=function(){e.project.publicAccesLevel="tokenBased",w.saveProjectAdminSettings({publicAccessLevel:"tokenBased"}),_.sendMB("project-make-token-based")},e.makePrivate=function(){e.project.publicAccesLevel="private",w.saveProjectAdminSettings({publicAccessLevel:"private"})},e.$watch("project.tokens.readAndWrite",(function(t){e.readAndWriteTokenLink=null!=t?"".concat(location.origin,"/").concat(t):null})),e.$watch("project.tokens.readOnly",(function(t){e.readOnlyTokenLink=null!=t?"".concat(location.origin,"/read/").concat(t):null})),e.done=function(){return t.close()},e.cancel=function(){return t.dismiss()},e.monitorRequest=function(t){return e.clearError(),e.state.inflight=!0,t.then((function(){e.state.inflight=!1,e.clearError()})).catch((function(t){e.state.inflight=!1,e.setError(t.data&&t.data.error)}))},e.clearError=function clearError(){e.state.error=!1},e.setError=function setError(t){e.state.error=!0,e.state.errorReason=t}}]),a.a.controller("ShareProjectModalMemberRowController",["$scope","$modal","projectMembers",function(e,t,n){e.form={privileges:e.member.privileges,isModified:function(){return this.privileges!==e.member.privileges},submit:function(){var r=e.member._id,a=e.form.privileges;"owner"===a?t.open({templateUrl:"ownershipTransferConfirmTemplate",controller:"OwnershipTransferConfirmModalController",scope:e}):function(t,r){e.monitorRequest(n.setMemberPrivilegeLevel(t,r).then((function(){e.member.privileges=r})))}(r,a)},reset:function(){this.privileges=e.member.privileges,e.clearError()}}}]),a.a.controller("OwnershipTransferConfirmModalController",["$scope","$window","$modalInstance","projectMembers",function(e,t,n,r){e.state={inflight:!1,error:!1},e.confirm=function(){!function(n){e.state.inflight=!0,e.state.error=!1,r.transferOwnership(n).then((function(){e.state.inflight=!1,e.state.error=!1,t.location.reload()})).catch((function(){e.state.inflight=!1,e.state.error=!0}))}(e.member._id)},e.cancel=function(){n.dismiss()}}]),a.a.factory("projectMembers",["ide","$http",function(e,t){return{removeMember:function(n){return t({url:"/project/".concat(e.project_id,"/users/").concat(n._id),method:"DELETE",headers:{"X-Csrf-Token":window.csrfToken}})},addGroup:function(n,r){return t.post("/project/".concat(e.project_id,"/group"),{group_id:n,privileges:r,_csrf:window.csrfToken})},getMembers:function(){return t.get("/project/".concat(e.project_id,"/members"),{json:!0,headers:{"X-Csrf-Token":window.csrfToken}})},setMemberPrivilegeLevel:function(n,r){return t.put("/project/".concat(e.project_id,"/users/").concat(n),{privilegeLevel:r},{headers:{"X-Csrf-Token":window.csrfToken}})},transferOwnership:function(n){return t.post("/project/".concat(e.project_id,"/transfer-ownership"),{user_id:n,_csrf:window.csrfToken})}}}]);a.a.factory("projectInvites",["ide","$http",function(e,t){return{sendInvite:function(n,r,a){return t.post("/project/".concat(e.project_id,"/invite"),{email:n,privileges:r,_csrf:window.csrfToken,"g-recaptcha-response":a})},revokeInvite:function(n){return t({url:"/project/".concat(e.project_id,"/invite/").concat(n),method:"DELETE",headers:{"X-Csrf-Token":window.csrfToken}})},resendInvite:function(n,r){return t.post("/project/".concat(e.project_id,"/invite/").concat(n,"/resend"),{_csrf:window.csrfToken})},getInvites:function(){return t.get("/project/".concat(e.project_id,"/invites"),{json:!0,headers:{"X-Csrf-Token":window.csrfToken}})}}}]),a.a.controller("ChatButtonController",["$scope","ide",function(e,t){var n;function r(n){var r,a;null!=n&&(r=null!=n?n.user:void 0,a=function(e){return e.id},(null!=r?a(r):void 0)!==t.$scope.user.id&&(e.ui.chatOpen||e.$applyAsync((function(){e.unreadMessages+=1})),h()))}e.toggleChat=function(){return e.ui.chatOpen=!e.ui.chatOpen,e.resetUnreadMessages()},e.unreadMessages=0,e.resetUnreadMessages=function(){return e.unreadMessages=0},e.$on("chat:resetUnreadMessages",(function(t){return e.resetUnreadMessages()})),e.$on("chat:newMessage",(function(e,t){return r(t)})),window.addEventListener("Chat.MessageReceived",(function(e){return r(e.detail.message)}));var a=!0,l=null,d=null;$(window).on("focus",(function(){return n(),a=!0})),$(window).on("blur",(function(){return a=!1}));var h=function(){var e;if(!a&&null==l)return d||(d=window.document.title),(e=function(){return window.document.title===d?window.document.title="New Message":window.document.title=d,l=setTimeout(e,800)})()};return n=function(){if(clearTimeout(l),l=null,null!=d)return window.document.title=d}}]);var sg=n(436),lg=n.n(sg);function cg(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return ug(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ug(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,d=!0,h=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return d=e.done,e},e:function(e){h=!0,l=e},f:function(){try{d||null==n.return||n.return()}finally{if(h)throw l}}}}function ug(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function dg(e){var t=e.content,n=Object(y.useRef)(null);return Object(y.useEffect)((function(){if(window.MathJax&&window.MathJax.Hub){var e=window.MathJax.Hub,t=e.config&&e.config.tex2jax.inlineMath;t.some((function(e){return"$"===e[0]&&"$"===e[1]}))||e.Config({tex2jax:{inlineMath:t.concat([["$","$"]])}})}}),[]),Object(y.useEffect)((function(){var e,t=cg(n.current.getElementsByTagName("a"));try{for(t.s();!(e=t.n()).done;){var r=e.value;r.setAttribute("target","_blank"),r.setAttribute("rel","noreferrer noopener")}}catch(e){t.e(e)}finally{t.f()}var a=window.MathJax.Hub,l=setTimeout((function(){a.Queue(["Typeset",a,n.current])}),0);return function(){return clearTimeout(l)}}),[t]),w.a.createElement("p",{ref:n},w.a.createElement(lg.a,null,t))}dg.propTypes={content:C.a.string.isRequired};var hg=dg;function fg(e){var t=e.message,n=e.userId,r=window.uiConfig,a=r.chatMessageBorderSaturation,l=r.chatMessageBorderLightness,d=r.chatMessageBgSaturation,h=r.chatMessageBgLightness;function f(e){return e?id.a.getHueForUserId(e.id):0}var p,y=!!t.user&&t.user.id===n;return w.a.createElement("div",{className:"message-wrapper"},!y&&w.a.createElement("div",{className:"name"},w.a.createElement("span",null,t.user.first_name||t.user.email)),w.a.createElement("div",{className:"message",style:(p=t.user,{borderColor:"hsl(".concat(f(p),", ").concat(a,", ").concat(l,")"),backgroundColor:"hsl(".concat(f(p),", ").concat(d,", ").concat(h,")")})},!y&&w.a.createElement("div",{className:"arrow",style:function(e){return{borderColor:"hsl(".concat(f(e),", ").concat(a,", ").concat(l,")")}}(t.user)}),w.a.createElement("div",{className:"message-content"},t.contents.map((function(e,t){return w.a.createElement(hg,{key:t,content:e})})))))}fg.propTypes={message:C.a.shape({contents:C.a.arrayOf(C.a.string).isRequired,user:C.a.shape({id:C.a.string,email:C.a.string,first_name:C.a.string})}),userId:C.a.string.isRequired};var pg=fg;function gg(e){var t=e.messages,n=e.resetUnreadMessages,r=e.userId;return w.a.createElement("ul",{className:"list-unstyled",onClick:n,onKeyDown:n},t.map((function(e,n){return w.a.createElement("li",{key:e.id,className:"message"},function(e){if(0===e)return!0;var n=t[e],r=t[e-1];return n.timestamp-r.timestamp>3e5}(n)&&w.a.createElement("div",{className:"date"},w.a.createElement("time",{dateTime:e.timestamp?Hd()(e.timestamp).format():void 0},(a=e.timestamp)?"".concat(Hd()(a).format("h:mm a")," ").concat(Hd()(a).calendar()):"N/A")),w.a.createElement(pg,{message:e,userId:r}));var a})))}gg.propTypes={messages:C.a.arrayOf(C.a.shape({id:C.a.string.isRequired,timestamp:C.a.number})).isRequired,resetUnreadMessages:C.a.func.isRequired,userId:C.a.string.isRequired};var mg=gg;function vg(e){var t=e.resetUnreadMessages,n=e.sendMessage,r=ln().t;return w.a.createElement("div",{className:"new-message"},w.a.createElement("label",{htmlFor:"chat-input",className:"sr-only"},r("your_message")),w.a.createElement("textarea",{id:"chat-input",placeholder:"".concat(r("your_message"),"…"),onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),n(e.target.value),e.target.value="")},onClick:t}))}vg.propTypes={resetUnreadMessages:C.a.func.isRequired,sendMessage:C.a.func.isRequired};var yg=vg;function bg(e){var t=e.atEnd,n=e.children,r=e.className,a=void 0===r?"":r,l=e.fetchData,h=e.itemCount,f=e.isLoading,p=Object(y.useRef)(null),_=Object(y.useRef)(0);function C(){p.current.scrollTop=p.current.scrollHeight-p.current.clientHeight-_.current}return Object(y.useLayoutEffect)(C,[h]),Object(y.useEffect)((function(){var e=d.a.debounce(C,400);return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),w.a.createElement("div",{ref:p,onScroll:function(e){var n,r;n=p.current.scrollHeight-p.current.scrollTop-p.current.clientHeight,_.current=n,e.target===e.currentTarget&&(r=p.current.children[0].clientHeight<p.current.clientHeight,!(t||f||r)&&p.current.scrollTop<30&&l())},className:"infinite-scroll ".concat(a)},n)}bg.propTypes={atEnd:C.a.bool,children:C.a.element.isRequired,className:C.a.string,fetchData:C.a.func.isRequired,itemCount:C.a.number.isRequired,isLoading:C.a.bool};var wg=bg;function _g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,l=void 0;try{for(var d,h=e[Symbol.iterator]();!(r=(d=h.next()).done)&&(n.push(d.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==h.return||h.return()}finally{if(a)throw l}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Cg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Cg(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Sg(){var e=ln().t;return w.a.createElement("div",{className:"loading"},w.a.createElement(qr,{type:"fw",modifier:"refresh",spin:!0}),"  ".concat(e("loading"),"…"))}function kg(){var e=ln().t;return w.a.createElement(w.a.Fragment,null,w.a.createElement("div",{className:"no-messages text-center small"},e("no_messages")),w.a.createElement("div",{className:"first-message text-center"},e("send_first_message"),w.a.createElement("br",null),w.a.createElement(qr,{type:"arrow-down"})))}var xg=A((function(){var e=ln().t,t=df().ui.chatIsOpen,n=np(),r=n.userId,a=n.atEnd,l=n.loading,d=n.loadMoreMessages,h=n.messages,f=n.sendMessage,p=n.resetUnreadMessageCount,_=_g(Object(y.useState)(!1),2),C=_[0],S=_[1];Object(y.useEffect)((function(){t&&!C&&(d(),S(!0))}),[C,d,t]);var k=!l&&0===h.length,x=h.reduce((function(e,t){return e+t.contents.length}),0);return w.a.createElement("aside",{className:"chat"},w.a.createElement(wg,{atEnd:a,className:"messages",fetchData:d,isLoading:l,itemCount:x},w.a.createElement("div",null,w.a.createElement("h2",{className:"sr-only"},e("chat")),l&&w.a.createElement(Sg,null),k&&w.a.createElement(kg,null),w.a.createElement(mg,{messages:h,userId:r,resetUnreadMessages:p}))),w.a.createElement(yg,{resetUnreadMessages:p,sendMessage:f}))}));a.a.controller("ReactChatController",["$scope","ide",function(e,t){e.chatIsOpen=t.$scope.ui.chatOpen,t.$scope.$watch("ui.chatOpen",(function(t){e.$applyAsync((function(){e.chatIsOpen=t}))})),e.resetUnreadMessages=function(){return t.$scope.$broadcast("chat:resetUnreadMessages")}}]),a.a.component("chat",Object(p.react2angular)(ip.use(xg),["resetUnreadMessages","chatIsOpen"]));a.a.controller("CloneProjectController",["$scope","$modal",function(e,t){return e.openCloneProjectModal=function(){return t.open({templateUrl:"cloneProjectModalTemplate",controller:"CloneProjectModalController"})}}]),a.a.controller("CloneProjectModalController",["$scope","$modalInstance","$timeout","$http","ide",function(e,t,n,r,a){e.inputs={projectName:a.$scope.project.name+" (Copy)"},e.state={inflight:!1,error:!1},t.opened.then((function(){return n((function(){return e.$broadcast("open")}),200)}));return e.clone=function(){return e.state.inflight=!0,e.state.error=!1,(t=e.inputs.projectName,r.post("/project/".concat(a.$scope.project._id,"/clone"),{_csrf:window.csrfToken,projectName:t})).then((function(e){var t=e.data;return window.location="/project/".concat(t.project_id)})).catch((function(t){var n=t.data,r=t.status;return e.state.inflight=!1,e.state.error=400!==r||{message:n}}));var t},e.cancel=function(){return t.dismiss("cancel")}}]),n(412);var Eg={controlId:C.a.string,validationState:C.a.oneOf(["success","warning","error",null])},Ag={$bs_formGroup:C.a.object.isRequired},Tg=function(e){function t(){return e.apply(this,arguments)||this}vi(t,e);var n=t.prototype;return n.getChildContext=function(){var e=this.props;return{$bs_formGroup:{controlId:e.controlId,validationState:e.validationState}}},n.hasFeedback=function(e){var t=this;return Ao.some(e,(function(e){return"feedback"===e.props.bsRole||e.props.children&&t.hasFeedback(e.props.children)}))},n.render=function(){var e=this.props,t=e.validationState,n=e.className,r=e.children,a=uo(pi(e,["validationState","className","children"]),["controlId"]),l=a[0],d=a[1],h=di({},ao(l),{"has-feedback":this.hasFeedback(r)});return t&&(h["has-"+t]=!0),w.a.createElement("div",di({},d,{className:De()(n,h)}),r)},t}(w.a.Component);Tg.propTypes=Eg,Tg.childContextTypes=Ag;var $g=no("form-group",oo([Vi,qi],Tg)),Rg={htmlFor:C.a.string,srOnly:C.a.bool},Og={$bs_formGroup:C.a.object},Mg=function(e){function t(){return e.apply(this,arguments)||this}return vi(t,e),t.prototype.render=function(){var e=this.context.$bs_formGroup,t=e&&e.controlId,n=this.props,r=n.htmlFor,a=void 0===r?t:r,l=n.srOnly,d=n.className,h=co(pi(n,["htmlFor","srOnly","className"])),f=h[0],p=h[1],y=di({},ao(f),{"sr-only":l});return w.a.createElement("label",di({},p,{htmlFor:a,className:De()(d,y)}))},t}(w.a.Component);Mg.propTypes=Rg,Mg.defaultProps={srOnly:!1},Mg.contextTypes=Og;var Pg=no("control-label",Mg),Lg={glyph:C.a.string.isRequired},Dg=function(e){function t(){return e.apply(this,arguments)||this}return vi(t,e),t.prototype.render=function(){var e,t=this.props,n=t.glyph,r=t.className,a=co(pi(t,["glyph","className"])),l=a[0],d=a[1],h=di({},ao(l),((e={})[to(l,n)]=!0,e));return w.a.createElement("span",di({},d,{className:De()(r,h)}))},t}(w.a.Component);Dg.propTypes=Lg;var Ig=no("glyphicon",Dg),Fg={$bs_formGroup:C.a.object},jg=function(e){function t(){return e.apply(this,arguments)||this}vi(t,e);var n=t.prototype;return n.getGlyph=function(e){switch(e){case"success":return"ok";case"warning":return"warning-sign";case"error":return"remove";default:return null}},n.renderDefaultFeedback=function(e,t,n,r){var a=this.getGlyph(e&&e.validationState);return a?w.a.createElement(Ig,di({},r,{glyph:a,className:De()(t,n)})):null},n.render=function(){var e=this.props,t=e.className,n=e.children,r=co(pi(e,["className","children"])),a=r[0],l=r[1],d=ao(a);if(!n)return this.renderDefaultFeedback(this.context.$bs_formGroup,t,d,l);var h=w.a.Children.only(n);return w.a.cloneElement(h,di({},l,{className:De()(h.props.className,t,d)}))},t}(w.a.Component);jg.defaultProps={bsRole:"feedback"},jg.contextTypes=Fg;var Ng=no("form-control-feedback",jg),Bg={componentClass:Ri.a},zg=function(e){function t(){return e.apply(this,arguments)||this}return vi(t,e),t.prototype.render=function(){var e=this.props,t=e.componentClass,n=e.className,r=co(pi(e,["componentClass","className"])),a=r[0],l=r[1],d=ao(a);return w.a.createElement(t,di({},l,{className:De()(n,d)}))},t}(w.a.Component);zg.propTypes=Bg,zg.defaultProps={componentClass:"p"};var Hg=no("form-control-static",zg),Ug={componentClass:Ri.a,type:C.a.string,id:C.a.string,inputRef:C.a.func},Wg={$bs_formGroup:C.a.object},Vg=function(e){function t(){return e.apply(this,arguments)||this}return vi(t,e),t.prototype.render=function(){var e,t=this.context.$bs_formGroup,n=t&&t.controlId,r=this.props,a=r.componentClass,l=r.type,d=r.id,h=void 0===d?n:d,f=r.inputRef,p=r.className,y=r.bsSize,_=co(pi(r,["componentClass","type","id","inputRef","className","bsSize"])),C=_[0],S=_[1];("file"!==l&&(e=ao(C)),y)&&(e[to({bsClass:"input"},Ki[y]||y)]=!0);return w.a.createElement(a,di({},S,{type:l,id:h,ref:f,className:De()(p,e)}))},t}(w.a.Component);Vg.propTypes=Ug,Vg.defaultProps={componentClass:"input"},Vg.contextTypes=Wg,Vg.Feedback=Ng,Vg.Static=Hg;var qg=no("form-control",oo([qi,Vi],Vg)),Gg={onDismiss:C.a.func,closeLabel:C.a.string},Kg=function(e){function t(){return e.apply(this,arguments)||this}return vi(t,e),t.prototype.render=function(){var e,t=this.props,n=t.onDismiss,r=t.closeLabel,a=t.className,l=t.children,d=co(pi(t,["onDismiss","closeLabel","className","children"])),h=d[0],f=d[1],p=!!n,y=di({},ao(h),((e={})[to(h,"dismissable")]=p,e));return w.a.createElement("div",di({},f,{role:"alert",className:De()(a,y)}),p&&w.a.createElement(ds,{onClick:n,label:r}),l)},t}(w.a.Component);Kg.propTypes=Gg,Kg.defaultProps={closeLabel:"Close alert"};var Yg=ro(Hi()(Xi),Xi.INFO,no("alert",Kg));function Xg(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,l=void 0;try{for(var d,h=e[Symbol.iterator]();!(r=(d=h.next()).done)&&(n.push(d.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==h.return||h.return()}finally{if(a)throw l}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Jg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jg(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Qg(e){var t=e.cloneProject,n=e.projectName,r=void 0===n?"":n,a=e.error,l=e.cancel,d=e.inFlight,h=ln().t,f=Xg(Object(y.useState)("".concat(r," (Copy)")),2),p=f[0],_=f[1],C=Object(y.useMemo)((function(){return!!p}),[p]);return w.a.createElement(w.a.Fragment,null,w.a.createElement(xs.Header,{closeButton:!0},w.a.createElement(xs.Title,null,h("copy_project"))),w.a.createElement(xs.Body,null,w.a.createElement("form",{id:"clone-project-form",onSubmit:function(e){e.preventDefault(),C&&t(p)}},w.a.createElement($g,null,w.a.createElement(Pg,{htmlFor:"cloned-project-name"},h("new_name")),w.a.createElement(qg,{id:"cloned-project-name",type:"text",placeholder:"New Project Name",required:!0,value:p,onChange:function(e){return _(e.target.value)}}))),a&&w.a.createElement(Yg,{bsStyle:"danger"},a.message||h("generic_something_went_wrong"))),w.a.createElement(xs.Footer,null,w.a.createElement(bo,{type:"button",disabled:d,onClick:l},h("cancel")),w.a.createElement(bo,{form:"clone-project-form",type:"submit",bsStyle:"primary",disabled:d||!C},d?w.a.createElement("span",null,h("copying"),"…"):w.a.createElement("span",null,h("copy")))))}Qg.propTypes={cloneProject:C.a.func.isRequired,error:C.a.oneOfType([C.a.bool,C.a.shape({message:C.a.string})]),cancel:C.a.func.isRequired,inFlight:C.a.bool.isRequired,projectName:C.a.string};var Zg=Qg;function em(e,t,n,r,a,l,d){try{var h=e[l](d),f=h.value}catch(e){return void n(e)}h.done?t(f):Promise.resolve(f).then(r,a)}function tm(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,l=void 0;try{for(var d,h=e[Symbol.iterator]();!(r=(d=h.next()).done)&&(n.push(d.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==h.return||h.return()}finally{if(a)throw l}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return nm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nm(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function rm(e){var t=e.handleHide,n=e.show,r=e.projectId,a=e.projectName,l=tm(Object(y.useState)(!1),2),d=l[0],h=l[1],f=tm(Object(y.useState)(),2),p=f[0],_=f[1];Object(y.useEffect)((function(){n&&_(void 0)}),[n]);var C=Object(y.useCallback)((function(e){h(!0),fetch("/project/".concat(r,"/clone"),{method:"POST",body:JSON.stringify({_csrf:window.csrfToken,projectName:e}),headers:{"Content-Type":"application/json"}}).then(function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=8;break}return e.next=3,t.json();case 3:n=e.sent,r=n.project_id,window.location.assign("/project/".concat(r)),e.next=19;break;case 8:if(400!==t.status){e.next=17;break}return e.t0=_,e.next=12,t.text();case 12:e.t1=e.sent,e.t2={message:e.t1},(0,e.t0)(e.t2),e.next=18;break;case 17:_(!0);case 18:h(!1);case 19:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var l=e.apply(t,n);function d(e){em(l,r,a,d,h,"next",e)}function h(e){em(l,r,a,d,h,"throw",e)}d(void 0)}))});return function(e){return t.apply(this,arguments)}}()).catch((function(){_(!0),h(!1)}))}),[r]),S=Object(y.useCallback)((function(){d||t()}),[t,d]);return w.a.createElement(xs,{show:n,onHide:S},w.a.createElement(Zg,{cloneProject:C,error:p,cancel:S,inFlight:d,projectName:a}))}rm.propTypes={handleHide:C.a.func.isRequired,projectId:C.a.string.isRequired,projectName:C.a.string,show:C.a.bool.isRequired};var im=rm;a.a.component("cloneProjectModal",Object(p.react2angular)(im));a.a.controller("LeftMenuCloneProjectModalController",["$scope","ide",function(e,t){e.show=!1,e.projectId=t.$scope.project_id,e.handleHide=function(){e.$applyAsync((function(){e.show=!1}))},e.openCloneProjectModal=function(){e.$applyAsync((function(){var n=t.$scope.project;n&&(e.projectId=n._id,e.projectName=n.name,e.show=!0,window.setTimeout((function(){e.$broadcast("open")}),200))}))}}]);var om=/INPUT|SELECT|TEXTAREA/i,am=($(document).bind("keydown keypress",(function(e){if(8===e.which&&(!om.test(e.target.tagName)||e.target.disabled||e.target.readOnly))return e.preventDefault()})),{componentClass:Ri.a}),sm=function(e){function t(){return e.apply(this,arguments)||this}return vi(t,e),t.prototype.render=function(){var e=this.props,t=e.componentClass,n=e.className,r=co(pi(e,["componentClass","className"])),a=r[0],l=r[1],d=ao(a);return w.a.createElement(t,di({},l,{className:De()(n,d)}))},t}(w.a.Component);sm.propTypes=am,sm.defaultProps={componentClass:"div"};var lm=no("row",sm),cm={componentClass:Ri.a,xs:C.a.number,sm:C.a.number,md:C.a.number,lg:C.a.number,xsHidden:C.a.bool,smHidden:C.a.bool,mdHidden:C.a.bool,lgHidden:C.a.bool,xsOffset:C.a.number,smOffset:C.a.number,mdOffset:C.a.number,lgOffset:C.a.number,xsPush:C.a.number,smPush:C.a.number,mdPush:C.a.number,lgPush:C.a.number,xsPull:C.a.number,smPull:C.a.number,mdPull:C.a.number,lgPull:C.a.number},um=function(e){function t(){return e.apply(this,arguments)||this}return vi(t,e),t.prototype.render=function(){var e=this.props,t=e.componentClass,n=e.className,r=co(pi(e,["componentClass","className"])),a=r[0],l=r[1],d=[];return Yi.forEach((function(e){function t(t,n){var r=""+e+t,h=l[r];null!=h&&d.push(to(a,""+e+n+"-"+h)),delete l[r]}t("",""),t("Offset","-offset"),t("Push","-push"),t("Pull","-pull");var n=e+"Hidden";l[n]&&d.push("hidden-"+e),delete l[n]})),w.a.createElement(t,di({},l,{className:De()(n,d)}))},t}(w.a.Component);um.propTypes=cm,um.defaultProps={componentClass:"div"};var dm=no("col",um);function hm(e){var t=e.handleHide,n=e.isMac,r=void 0!==n&&n,a=e.trackChangesVisible,l=void 0!==a&&a,d=ln().t,h=r?"Cmd":"Ctrl";return w.a.createElement(w.a.Fragment,null,w.a.createElement(xs.Header,{closeButton:!0},w.a.createElement(xs.Title,null,d("hotkeys"))),w.a.createElement(xs.Body,{className:"modal-hotkeys"},w.a.createElement("h3",null,d("common")),w.a.createElement(lm,null,w.a.createElement(dm,{xs:4},w.a.createElement(fm,{combination:"".concat(h," + F"),description:"Find (and replace)"}),w.a.createElement(fm,{combination:"".concat(h," + Enter"),description:"Compile"})),w.a.createElement(dm,{xs:4},w.a.createElement(fm,{combination:"".concat(h," + Z"),description:"Undo"})),w.a.createElement(dm,{xs:4},w.a.createElement(fm,{combination:"".concat(h," + Y"),description:"Redo"}))),w.a.createElement("h3",null,d("navigation")),w.a.createElement(lm,null,w.a.createElement(dm,{xs:4},w.a.createElement(fm,{combination:"".concat(h," + Home"),description:"Beginning of document"})),w.a.createElement(dm,{xs:4},w.a.createElement(fm,{combination:"".concat(h," + End"),description:"End of document"})),w.a.createElement(dm,{xs:4},w.a.createElement(fm,{combination:"".concat(h," + L"),description:"Go To Line"}))),w.a.createElement("h3",null,d("editing")),w.a.createElement(lm,null,w.a.createElement(dm,{xs:4},w.a.createElement(fm,{combination:"".concat(h," + /"),description:"Toggle Comment"}),w.a.createElement(fm,{combination:"".concat(h," + D"),description:"Delete Current Line"}),w.a.createElement(fm,{combination:"".concat(h," + A"),description:"Select All"})),w.a.createElement(dm,{xs:4},w.a.createElement(fm,{combination:"".concat(h," + U"),description:"To Uppercase"}),w.a.createElement(fm,{combination:"".concat(h," + Shift + U"),description:"To Lowercase"}),w.a.createElement(fm,{combination:"Tab",description:"Indent Selection"})),w.a.createElement(dm,{xs:4},w.a.createElement(fm,{combination:"".concat(h," + B"),description:"Bold text"}),w.a.createElement(fm,{combination:"".concat(h," + I"),description:"Italic Text"}))),w.a.createElement("h3",null,d("autocomplete")),w.a.createElement(lm,null,w.a.createElement(dm,{xs:4},w.a.createElement(fm,{combination:"".concat(h," + Space"),description:"Autocomplete Menu"})),w.a.createElement(dm,{xs:4},w.a.createElement(fm,{combination:"Tab / Up / Down",description:"Select Candidate"})),w.a.createElement(dm,{xs:4},w.a.createElement(fm,{combination:"Enter",description:"Insert Candidate"}))),w.a.createElement("h3",null,w.a.createElement(Gs,{i18nKey:"autocomplete_references",components:{code:w.a.createElement("code",null)}})),w.a.createElement(lm,null,w.a.createElement(dm,{xs:4},w.a.createElement(fm,{combination:"".concat(h," + Space "),description:"Search References"}))),l&&w.a.createElement(w.a.Fragment,null,w.a.createElement("h3",null,d("review")),w.a.createElement(lm,null,w.a.createElement(dm,{xs:4},w.a.createElement(fm,{combination:"".concat(h," + J"),description:"Toggle review panel"})),w.a.createElement(dm,{xs:4},w.a.createElement(fm,{combination:"".concat(h," + Shift + A"),description:"Toggle track changes"})),w.a.createElement(dm,{xs:4},w.a.createElement(fm,{combination:"".concat(h," + Shift + C"),description:"Add a comment"}))))),w.a.createElement(xs.Footer,null,w.a.createElement(bo,{onClick:t},d("ok"))))}function fm(e){var t=e.combination,n=e.description;return w.a.createElement("div",{className:"hotkey","data-test-selector":"hotkey"},w.a.createElement("span",{className:"combination"},t),w.a.createElement("span",{className:"description"},n))}hm.propTypes={isMac:C.a.bool,handleHide:C.a.func.isRequired,trackChangesVisible:C.a.bool},fm.propTypes={combination:C.a.string.isRequired,description:C.a.string.isRequired};var pm=hm;function gm(e){var t=e.handleHide,n=e.show,r=e.trackChangesVisible,a=void 0!==r&&r,l=/Mac/i.test(navigator.platform);return w.a.createElement(xs,{bsSize:"large",onHide:t,show:n},w.a.createElement(pm,{handleHide:t,isMac:l,trackChangesVisible:a}))}gm.propTypes={handleHide:C.a.func.isRequired,show:C.a.bool.isRequired,trackChangesVisible:C.a.bool};var mm=gm;a.a.component("hotkeysModal",Object(p.react2angular)(mm));a.a.controller("HotkeysModalController",["$scope",function(e){e.show=!1,e.handleHide=function(){e.$applyAsync((function(){e.show=!1}))},e.openHotkeysModal=function(){e.trackChangesVisible=e.project&&e.project.features.trackChangesVisible,e.$applyAsync((function(){e.show=!0}))}}]);var vm={fluid:C.a.bool,componentClass:Ri.a},ym=function(e){function t(){return e.apply(this,arguments)||this}return vi(t,e),t.prototype.render=function(){var e=this.props,t=e.fluid,n=e.componentClass,r=e.className,a=co(pi(e,["fluid","componentClass","className"])),l=a[0],d=a[1],h=to(l,t&&"fluid");return w.a.createElement(n,di({},d,{className:De()(r,h)}))},t}(w.a.Component);ym.propTypes=vm,ym.defaultProps={componentClass:"div",fluid:!1};var bm=no("container",ym);function wm(e){var t=e.data,n=e.error,r=e.handleHide,a=e.loading,l=ln().t;return w.a.createElement(w.a.Fragment,null,w.a.createElement(xs.Header,{closeButton:!0},w.a.createElement(xs.Title,null,l("word_count"))),w.a.createElement(xs.Body,null,a&&!n&&w.a.createElement("div",{className:"loading"},w.a.createElement(_m,null),"   ",l("loading"),"…"),n&&w.a.createElement(Yg,{bsStyle:"danger"},l("generic_something_went_wrong")),t&&w.a.createElement(bm,{fluid:!0},t.messages&&w.a.createElement(lm,null,w.a.createElement(dm,{xs:12},w.a.createElement(Yg,{bsStyle:"danger"},w.a.createElement("p",{style:{whiteSpace:"pre-wrap"}},t.messages)))),w.a.createElement(lm,null,w.a.createElement(dm,{xs:4},w.a.createElement("div",{className:"pull-right"},l("total_words"),":")),w.a.createElement(dm,{xs:6},t.textWords)),w.a.createElement(lm,null,w.a.createElement(dm,{xs:4},w.a.createElement("div",{className:"pull-right"},l("headers"),":")),w.a.createElement(dm,{xs:6},t.headers)),w.a.createElement(lm,null,w.a.createElement(dm,{xs:4},w.a.createElement("div",{className:"pull-right"},l("math_inline"),":")),w.a.createElement(dm,{xs:6},t.mathInline)),w.a.createElement(lm,null,w.a.createElement(dm,{xs:4},w.a.createElement("div",{className:"pull-right"},l("math_display"),":")),w.a.createElement(dm,{xs:6},t.mathDisplay)))),w.a.createElement(xs.Footer,null,w.a.createElement(bo,{onClick:r},l("done"))))}function _m(){return w.a.createElement(qr,{type:"refresh",spin:!0,modifier:"fw",accessibilityLabel:"Loading"})}wm.propTypes={handleHide:C.a.func.isRequired,loading:C.a.bool.isRequired,error:C.a.bool,data:C.a.shape({messages:C.a.string,headers:C.a.number,mathDisplay:C.a.number,mathInline:C.a.number,textWords:C.a.number})};var Cm=wm;function Sm(e,t,n,r,a,l,d){try{var h=e[l](d),f=h.value}catch(e){return void n(e)}h.done?t(f):Promise.resolve(f).then(r,a)}function km(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,l=void 0;try{for(var d,h=e[Symbol.iterator]();!(r=(d=h.next()).done)&&(n.push(d.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==h.return||h.return()}finally{if(a)throw l}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return xm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xm(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Em(e){var t=e.clsiServerId,n=e.handleHide,r=e.projectId,a=e.show,l=km(Object(y.useState)(!0),2),d=l[0],h=l[1],f=km(Object(y.useState)(!1),2),p=f[0],_=f[1],C=km(Object(y.useState)(),2),S=C[0],k=C[1],x=km(Object(y.useState)(new AbortController),2),E=x[0],A=x[1];Object(y.useEffect)((function(){if(a){k(void 0),_(!1),h(!0);var e=new AbortController;A(e);var n="";return t&&(n="?clsiserverid=".concat(t)),fetch("/project/".concat(r,"/wordcount").concat(n),{signal:e.signal}).then(function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=8;break}return e.next=3,t.json();case 3:n=e.sent,r=n.texcount,k(r),e.next=9;break;case 8:_(!0);case 9:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var l=e.apply(t,n);function d(e){Sm(l,r,a,d,h,"next",e)}function h(e){Sm(l,r,a,d,h,"throw",e)}d(void 0)}))});return function(e){return t.apply(this,arguments)}}()).catch((function(){_(!0)})).finally((function(){h(!1)})),function(){e.abort()}}}),[a,r,t]);var T=Object(y.useCallback)((function(){E.abort(),n()}),[E,n]);return w.a.createElement(xs,{show:a,onHide:T},w.a.createElement(Cm,{data:S,error:p,handleHide:T,loading:d}))}Em.propTypes={clsiServerId:C.a.string,handleHide:C.a.func.isRequired,projectId:C.a.string.isRequired,show:C.a.bool.isRequired};var Am=Em;a.a.component("wordCountModal",Object(p.react2angular)(Am));a.a.controller("WordCountModalController",["$scope","ide",function(e,t){e.show=!1,e.projectId=t.project_id,e.handleHide=function(){e.$applyAsync((function(){e.show=!1}))},e.openWordCountModal=function(){e.$applyAsync((function(){e.clsiServerId=t.clsiServerId,e.projectId=t.project_id,e.show=!0}))}}]),n(752),n(753),a.a.directive("layout",["$parse","$compile","ide",function(e,t,n){return{compile:function(){return{pre:function(r,a,l){var h,f,p=l.layout,y=l.customTogglerPane,w=l.customTogglerMsgWhenOpen,_=l.customTogglerMsgWhenClosed,C=null!=y&&null!=w&&null!=_,S={spacing_open:null!=l.spacingOpen?parseInt(l.spacingOpen,10):window.uiConfig.defaultResizerSizeOpen,spacing_closed:null!=l.spacingClosed?parseInt(l.spacingClosed,10):window.uiConfig.defaultResizerSizeClosed,slidable:!1,enableCursorHotkey:!1,onopen:function(e){return L(e)},onclose:function(e){return D(e)},onresize:function(){return E()},maskIframesOnResize:r.$eval(l.maskIframesOnResize||"false"),east:{size:r.$eval(l.initialSizeEast),initClosed:r.$eval(l.initClosedEast)},west:{size:r.$eval(l.initialSizeEast),initClosed:r.$eval(l.initClosedWest)}};null!=(f=n.localStorage("layout.".concat(p)))&&(null!=f.east&&(null==l.minimumRestoreSizeEast||f.east.size>=l.minimumRestoreSizeEast&&!f.east.initClosed)&&(S.east=f.east),null!=f.west&&(null==l.minimumRestoreSizeWest||f.west.size>=l.minimumRestoreSizeWest&&!f.west.initClosed)&&(S.west=f.west)),null!=window.uiConfig.eastResizerCursor&&(S.east.resizerCursor=window.uiConfig.eastResizerCursor),null!=window.uiConfig.westResizerCursor&&(S.west.resizerCursor=window.uiConfig.westResizerCursor);var k=function(){if(null!=h){f=a.layout().readState();var e="east"===y?"right":"left",t=f[y];return null!=t?h.css(e,t.initClosed?0:t.size):void 0}},x=function(){if(f=a.layout().readState(),null!=l.openEast&&null!=f.east)return e(l.openEast).assign(r,!f.east.initClosed)},E=function(){return f=a.layout().readState(),r.$broadcast("layout:".concat(p,":resize"),f),function(){if(null!=(f=a.layout().readState()).east){var e=a.find("> .ui-layout-resizer-controls");f.east.initClosed?e.hide():(e.show(),e.css({right:f.east.size}))}}(),C&&k(),x()},A=a.width(),T=function(){if(null!=l.resizeProportionally&&r.$eval(l.resizeProportionally)){var e=a.layout().readState().east;if(null!=e){var t=e.size/A*a.width();return A=a.width(),void a.layout().sizePane("east",t)}}return a.layout().resizeAll()};if(a.layout(S),a.layout().resizeAll(),null!=l.resizeOn)for(var R=0,O=Array.from(l.resizeOn.split(","));R<O.length;R++){var M=O[R];r.$on(M,(function(){return T()}))}if(C){f=a.layout().readState();var P=r.$new();P.isOpen=!0,P.isVisible=!0,!0===(null!=f[y]?f[y].initClosed:void 0)&&(P.isOpen=!1),P.tooltipMsgWhenOpen=w,P.tooltipMsgWhenClosed=_,P.tooltipPlacement="east"===y?"left":"right",P.handleClick=function(){return a.layout().toggle(y),k()},h=t('<a href ng-show="isVisible" class="custom-toggler '.concat("custom-toggler-".concat(y),'" ng-class="isOpen ? \'custom-toggler-open\' : \'custom-toggler-closed\'" tooltip="{{ isOpen ? tooltipMsgWhenOpen : tooltipMsgWhenClosed }}" tooltip-placement="{{ tooltipPlacement }}" ng-click="handleClick()">'))(P),a.append(h)}var L=function(e){if(C||e===y)return h.scope().$applyAsync((function(){return h.scope().isOpen=!0}))},D=function(e){if(C||e===y)return h.scope().$applyAsync((function(){return h.scope().isOpen=!1}))};if($(window).unload((function(){var e=d.a.mapValues(a.layout().readState(),(function(e){return d.a.omit(e,"children")}));n.localStorage("layout.".concat(p),e)})),null!=l.openEast&&r.$watch(l.openEast,(function(e,t){return null!=e&&e!==t&&(e?a.layout().open("east"):a.layout().close("east")),setTimeout((function(){return r.$digest()}),0)})),null!=l.allowOverflowOn){var I=a.layout(),F=r.$eval(l.allowOverflowOn),j=I.panes[F];I.allowOverflow(F);var N=j.zIndex();j.css("z-index",N+1)}if(x(),E(),null!=l.layoutDisabled)return r.$watch(l.layoutDisabled,(function(e){if(e?a.layout().hide("east"):a.layout().show("east"),C)return h.scope().$applyAsync((function(){return h.scope().isOpen=!e,h.scope().isVisible=!e}))}))},post:function(e,t,n){var r=n.layout,a=t.layout().readState();return e.$broadcast("layout:".concat(r,":linked"),a)}}}}}]);var Tm,$m=new RegExp("[\\/\\\\\\*\\u0000-\\u001F\\u007F\\u0080-\\u009F\\uD800-\\uDFFF]","g"),Rm=new RegExp("(^\\.$)|(^\\.\\.$)|(^\\s+)|(\\s+$)","g"),Om=new RegExp("^(prototype|constructor|toString|toLocaleString|valueOf|hasOwnProperty|isPrototypeOf|propertyIsEnumerable|__defineGetter__|__lookupGetter__|__defineSetter__|__lookupSetter__|__proto__)$"),Mm=Tm={clean:function(e){return e=(e=(e=e.replace($m,"_")).replace(Rm,(function(e){return new Array(e.length+1).join("_")}))).replace(Om,"@$1")},isCleanFilename:function(e){return Tm.isAllowedLength(e)&&!e.match($m)&&!e.match(Rm)},isAllowedLength:function(e){return e.length>0&&e.length<=1024}},Pm=(a.a.directive("validFile",(function(){return{require:"ngModel",link:function(e,t,n,r){return r.$validators.validFile=function(e){return Mm.isCleanFilename(e)}}}})),{center:{paneSelector:"[vertical-resizable-top]",paneClass:"vertical-resizable-top",size:"auto"},south:{paneSelector:"[vertical-resizable-bottom]",paneClass:"vertical-resizable-bottom",resizerClass:"vertical-resizable-resizer",resizerCursor:"ns-resize",size:"auto",resizable:!0,closable:!1,slidable:!1,spacing_open:6,spacing_closed:6,maxSize:"75%"}});a.a.directive("verticalResizablePanes",["localStorage",function(e){return{restrict:"A",link:function(t,n,r){var a=r.verticalResizablePanes,l=r.verticalResizablePanesMinSize,d=r.verticalResizablePanesMaxSize,h=null,f=!1;if(a){var p="vertical-resizable:".concat(a,":south-size");h=e(p),$(window).unload((function(){h&&e(p,h)}))}var y=r.verticalResizablePanesToggledExternallyOn,w=r.verticalResizablePanesResizeOn,_="".concat(Pm.south.resizerClass,"-disabled");y&&t.$on(y,(function(e,t){var n="auto";t?(h&&(n=h),C.resizers&&C.resizers.south&&C.resizers.south.removeClass(_)):C.resizers&&C.resizers.south&&C.resizers.south.addClass(_),C.sizePane("south",n)})),w&&t.$on(w,(function(){C.resizeAll()})),d&&(Pm.south.maxSize=d),l&&(Pm.south.minSize=l),Pm.south.ondrag_end=function(){f=!0},Pm.south.onresize=function(e,t,n){f&&(h=n.size),f=!1};var C=n.layout(Pm)}}}]),n(754);function Lm(e){return(Lm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dm(e,t){return null!=e?t(e):void 0}a.a.factory("ide",["$http","queuedHttp","$modal","$q","$filter","$timeout","eventTracking",function(e,t,n,r,a,l,d){var h=this,f={};return f.$http=e,f.queuedHttp=t,f.$q=r,f.$filter=a,f.$timeout=l,f.globalEditorWatchdogManager=new Wc({onTimeoutHandler:function(e){d.sendMB("losing-edits",e),f.reportError("losing-edits",Object.assign({},e))}}),this.recentEvents=[],f.pushEvent=function(e,t){if(null==t&&(t={}),sl_console.log("event",e,t),h.recentEvents.push({type:e,meta:t,date:new Date}),h.recentEvents.length>100)return h.recentEvents.shift()},f.reportError=function(t,n){null==n&&(n={}),n.user_id=window.user_id,n.project_id=window.project_id,n.client_id=Dm(null!=f.socket?f.socket.socket:void 0,(function(e){return e.sessionid})),n.transport=Dm(Dm(null!=f.socket?f.socket.socket:void 0,(function(e){return e.transport})),(function(e){return e.name})),n.client_now=new Date,n.recent_events=h.recentEvents;var r={};if("object"===Lm(t))for(var a=0,l=Array.from(Object.getOwnPropertyNames(t));a<l.length;a++){var d=l[a];r[d]=t[d]}else"string"==typeof t&&(r.message=t);return e.post("/error/client",{error:r,meta:n,_csrf:window.csrfToken})},f.showGenericMessageModal=function(e,t){return n.open({templateUrl:"genericMessageModalTemplate",controller:"GenericMessageModalController",resolve:{title:function(){return e},message:function(){return t}}})},f.showOutOfSyncModal=function(e,t,r){return n.open({templateUrl:"outOfSyncModalTemplate",controller:"OutOfSyncModalController",backdrop:!1,keyboard:!1,resolve:{title:function(){return e},message:function(){return t},editorContent:function(){return r}},windowClass:"out-of-sync-modal"})},f.showLockEditorMessageModal=function(e,t){return n.open({templateUrl:"lockEditorModalTemplate",controller:"GenericMessageModalController",backdrop:!1,keyboard:!1,resolve:{title:function(){return e},message:function(){return t}},windowClass:"lock-editor-modal"})},f}]),a.a.controller("GenericMessageModalController",["$scope","$modalInstance","title","message",function(e,t,n,r){return e.title=n,e.message=r,e.done=function(){return t.close()}}]),a.a.controller("OutOfSyncModalController",["$scope","$window","title","message","editorContent",function(e,t,n,r,a){e.title=n,e.message=r,e.editorContent=a,e.done=function(){t.location.reload()}}]);n(240),n(241),a.a.directive("updateScrollBottomOn",["$timeout",function(e){return{restrict:"A",link:function(t,n,r,a){var l=0;return n.on("scroll",(function(e){return l=n[0].scrollHeight-n[0].scrollTop-n[0].clientHeight})),t.$on(r.updateScrollBottomOn,(function(){return e((function(){return n.scrollTop(n[0].scrollHeight-n[0].clientHeight-l)}),0)}))}}}]),n(242),n(239),a.a.directive("rightClick",(function(){return{restrict:"A",link:function(e,t,n){return t.bind("contextmenu",(function(t){return t.preventDefault(),t.stopPropagation(),e.$eval(n.rightClick)}))}}})),a.a.directive("expandableTextArea",(function(){return{restrict:"A",link:function(e,t){return e.$watch((function(){return t.val()}),(function(){var n=t.outerHeight(),r=t.prop("scrollHeight");""===t.val()?t.css("height","unset"):r>n&&(e.$emit("expandable-text-area:resize"),t.css("height",r))}))}}})),a.a.directive("videoPlayState",["$parse",function(e){return{restrict:"A",link:function(t,n,r){var a=n[0];return t.$watch((function(){return e(r.videoPlayState)(t)}),(function(e){return e?(a.currentTime=0,a.play()):a.pause()}))}}}]),n(168),n(243),n(244),a.a.factory("waitFor",["$q",function(e){return function(t,n,r){null==r&&(r=500);var a=Math.floor(n/r),l=0;return e((function(e,d){var h;return(h=function(){if(l>a)return d(new Error("waiting too long, ".concat(JSON.stringify({timeout:n,pollInterval:r}))));l+=1;var f=t();return null!=f?e(f):setTimeout(h,r)})()}))}}]),n(245),n(234),n(233),n(238),n(235);var Im={gotLinkStatus:!1,startedLinkProcess:!1,userIsLinkedToDropbox:!1,hasDropboxFeature:!1};a.a.controller("DropboxController",["$scope","$modal","ide","eventTracking",function(e,t,n,r){e.openDropboxModal=function(){t.open({templateUrl:"dropboxModalTemplate",controller:"DropboxModalController",scope:e}),e.user.features.dropbox||r.send("subscription-funnel","editor-click-feature","dropbox")}}]);a.a.controller("DropboxModalController",["$scope","$modalInstance","ide","$timeout","$http",function(e,t,n,r,a){var l=n.$scope.user.id;e.dbState=Im,e.dbState.hasDropboxFeature=e.user.features.dropbox,a.get("/dropbox/status").then((function(t){var n=t.data;if(e.dbState.gotLinkStatus=!0,n.registered)return e.dbState.userIsLinkedToDropbox=!0,Im=e.dbState})),e.linkToDropbox=function(){return window.open("/user/settings#dropboxSettings"),e.startedLinkProcess=!0},e.cancel=function(){return t.dismiss()},e.isProjectMember=function(){var e=n.$scope.project.members.map((function(e){return e._id}));return n.$scope.project.owner._id===l||e.includes(l)}}]),a.a.controller("GitBridgeController",["$scope","$modal","eventTracking","ide",function(e,t,n,r){e.openGitBridgeModal=function(){t.open({templateUrl:"gitBridgeModalTemplate",controller:"GitBridgeModalController",size:"lg",scope:e}),e.project.features.gitBridge||e.user.features.gitBridge||n.send("subscription-funnel","editor-click-feature","gitBridge")},r.gitBridgeManager={openGitBridgeModal:function(){return e.openGitBridgeModal()}}}]),a.a.controller("GitBridgeModalController",["$scope","$modalInstance","$window","ide",function(e,t,n,r){e.gitUrl="".concat(n.gitBridgePublicBaseUrl,"/").concat(r.$scope.project_id),e.hasGitBridgeFeature=e.project.features.gitBridge||e.user.features.gitBridge,e.userIsProjectOwner=e.user.id===e.project.owner._id,e.cancel=function(){return t.dismiss()}}]),a.a.controller("GithubSyncController",["$scope","$modal","ide",function(e,t,n){e.openGithubSyncModal=function(){return t.open({templateUrl:"githubSyncModalTemplate",controller:"GithubSyncModalController",scope:e})},n.githubSyncManager={openGithubSyncModal:function(){return e.openGithubSyncModal()}},e.isProjectMember=function(){return n.$scope.permissions.write}}]),a.a.controller("GithubSyncModalController",["$scope","$modalInstance","$http","$modal","$window","$interval","ide",function(e,t,n,r,a,l,d){return e.unlinking=!1,e.cancel=function(){return t.dismiss()},e.openExportToGithubModal=function(){return t.dismiss(),r.open({templateUrl:"githubSyncExportModalTemplate",controller:"GithubSyncExportModalController"})},e.openMergeModal=function(e){var n;return null==e&&(e=!1),t.dismiss(),n=e?"githubSyncPullFromGithubModalTemplate":"githubSyncPushToGithubModalTemplate",r.open({templateUrl:n,controller:"GithubSyncMergeModalController",resolve:{mergeImmediately:function(){return e}}})},e.unlinkProject=function(){e.unlinking=!0,n({method:"DELETE",url:"/project/".concat(d.project_id,"/github-sync/"),headers:{"X-CSRF-Token":window.csrfToken}}).finally((function(){t.dismiss(),d.githubSyncManager.openGithubSyncModal()}))},e.linkAccount=function(){var t=a.open("/github-sync/beginAuth","github-sync-auth","width=700,height=500"),n=l((function(){try{Fm(null!=t?t.location:void 0,(function(e){return e.pathname}))}catch(e){null}if("/github-sync/linked"===Fm(null!=t?t.location:void 0,(function(e){return e.pathname})))return t.close(),e.loadStatus(),l.cancel(n)}),1e3);return!0},(e.loadStatus=function(){return e.status={loading:!0,error:!1,user:{enabled:null},project:{enabled:null},commits:{loading:!0,commits:[],diverged:!1}},n.get("/user/github-sync/status",{disableAutoLoginRedirect:!0}).then((function(t){var r=t.data,a=r;return e.status.user=a,n.get("/project/".concat(d.project_id,"/github-sync/status"),{disableAutoLoginRedirect:!0}).then((function(t){var a=t.data;if(e.status.project=a,e.status.loading=!1,e.status.project.enabled)return n.get("/project/".concat(d.project_id,"/github-sync/commits/unmerged"),{disableAutoLoginRedirect:!0}).then((function(t){var n=t.data.commits?t.data.commits:t.data,r=!!t.data.diverged&&t.data.diverged;e.status.commits.commits=n,e.status.commits.diverged=r,e.status.commits.loading=!1})).catch((function(t){var n;r=t.data,n=t.status,e.status.error=null==n||{statusCode:n}}))})).catch((function(t){var n;r=t.data,n=t.status,e.status.error=null==n||{status:n}}))})).catch((function(t){t.data;var n=t.status;e.status.error=null==n||{status:n}}))})()}]);function Fm(e,t){return null!=e?t(e):void 0}a.a.controller("GithubSyncExportModalController",["$scope","$modalInstance","$http","ide",function(e,t,n,r){e.cancel=function(){return t.dismiss()},e.status={loading:!0,error:!1},e.form={org:null,name:r.$scope.project.name,private:"false",description:""},n.get("/user/github-sync/orgs",{disableAutoLoginRedirect:!0}).then((function(t){var n=t.data;e.status.user=n.user,e.status.orgs=n.orgs,e.status.loading=!1,e.form.org=e.status.user.login})).catch((function(t){var n=t.data,r=t.status;e.status.error={message:null!=n?n.error:void 0,statusCode:r}})),e.create=function(){e.status.inflight=!0;var a={_csrf:window.csrfToken,name:e.form.name,description:e.form.description,private:"true"===e.form.private};return null!=e.form.org&&e.form.org!==e.status.user.login&&(a.org=e.form.org),n.post("/project/".concat(r.project_id,"/github-sync/export"),a).then((function(){return e.status.inflight=!1,t.dismiss(),r.githubSyncManager.openGithubSyncModal()})).catch((function(t){var n=t.data,r=t.status;e.form.error=504===r?"timeout":n.error,e.status.inflight=!1}))}}]),a.a.controller("GithubSyncMergeModalController",["$scope","$modalInstance","$http","ide","mergeImmediately",function(e,t,n,r,a){e.cancel=function(){return t.dismiss()},e.status={},e.form={message:""},e.merge=function(){r.editorManager.startIgnoringExternalUpdates(),e.status.inflight=!0;var a={_csrf:window.csrfToken,message:e.form.message};return n.post("/project/".concat(r.project_id,"/github-sync/merge"),a).then((function(){e.status.inflight=!1,t.dismiss(),r.githubSyncManager.openGithubSyncModal(),r.editorManager.stopIgnoringExternalUpdates()})).catch((function(t){var n=t.data,a=t.status;e.form.error=504===a?"timeout":500===a?"generic":n.error,e.status.inflight=!1,r.editorManager.stopIgnoringExternalUpdates()}))},a&&e.merge()}]);function jm(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Nm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nm(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,d=!0,h=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return d=e.done,e},e:function(e){h=!0,l=e},f:function(){try{d||null==n.return||n.return()}finally{if(h)throw l}}}}function Nm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}a.a.controller("PublishController",["$scope","$modal","CobrandingDataService",function(e,t,r){e.openPublishProjectModal=function(){t.open({templateUrl:"publishProjectModalTemplate",scope:e,size:"lg"}),Promise.all([n.e(1),n.e(21)]).then(n.bind(null,810)).then((function(t){var n;e.pdf.url&&(n=e.pdf.downloadUrl);var a={projectId:e.project_id,pdfUrl:n,logs:e.pdf.logEntries,uncompiled:e.pdf.uncompiled,hasFolders:window._ide.fileTreeManager.projectContainsFolder(),rootDocOverridden:function(){var t=e.project.rootDoc_id;if(window._ide.editorManager.getCurrentDocId()===t)return!1;var n=window._ide.editorManager.getCurrentDocValue();if(null==n)return!1;var r,a=jm(n.split("\n"));try{for(a.s();!(r=a.n()).done;){var l=r.value;if(/^[^%]*\\documentclass/.test(l))return!0}}catch(e){a.e(e)}finally{a.f()}return!1}(),firstName:e.user.first_name,lastName:e.user.last_name,title:e.project.name},l={isBranded:r.isProjectCobranded()&&(null!=r.getPublishGuideHtml()&&""!==r.getPublishGuideHtml()||null!=r.getPartner()),brandedMenu:r.hasBrandedMenu(),brandId:r.getBrandId(),brandVariationId:r.getBrandVariationId(),partner:r.getPartner()},d=document.getElementsByClassName("modal-body-publish")[0];t.init(d,a,l)}))}}]);var Bm=ace.require("ace/range").Range;a.a.controller("ReferencesSearchController",["$scope","$modal","ide","$timeout","eventTracking","$rootScope",function(e,t,n,r,a,l){if(e.searchFeatureEnabled=function(){return!0},e.searchFeatureEnabled()){e.searchEnabled=!1,e.isCursorAtCitation=function(e){var t=e.getCursorPosition(),n=new Bm(t.row,0,t.row,t.column),r=function(e){var t;return(t=e.match(/(\\[^\\]+)$/))?t[1]:null}(e.getSession().getTextRange(n));if(r&&r.match(/^~?\\([a-z]*cite[a-z]*(?:\[.*])?){([^}]*, *)?(\w*)/))return!0;return!1},e._hintNode=null,e._buildHintNode=function(){a.sendMBOnce("bib-search-hint-shown-once");var e=$(".sl_references_search_hint")[0];if(e)return e.style.display="block",e.style.visibility="visible",e;console.log("Error: could not find .sl_references_search_hint node in dom")},e.updateHintNode=function(t){if(!0===zm(zm(null!=t?t.completer:void 0,(function(e){return e.popup})),(function(e){return e.isOpen}))&&!e._hintNode&&e.isCursorAtCitation(t)){var n=e._buildHintNode(),a=zm(zm(zm(null!=t?t.completer:void 0,(function(e){return e.popup})),(function(e){return e.renderer})),(function(e){return e.container}));if(!a)return void console.log("Error attaching search hint: could not find popup container");a.style.overflow="visible",$(a).append(n),e._hintNode=n;var l=t.completer.popup;if(!l.hide._sl_patched){var d=l.hide.bind(l);l.hide=function(){return r((function(){if(!e.isCursorAtCitation(t))return e._hideHint()}),0),d()},l.hide._sl_patched=!0}}if(e._hintNode)return e.isCursorAtCitation(t)?e._showHint():e._hideHint()},e._showHint=function(){if(e._hintNode)return e._hintNode.style.visibility="visible"},e._hideHint=function(){if(e._hintNode)return e._hintNode.style.visibility="hidden"},e.setup=function(){if(!1!==e.settings.autoComplete)if(null!=d){var t=zm(zm(null!=d?d.commands:void 0,(function(e){return e.commands})),(function(e){return e.startAutocomplete}));if(t){if(!t._sl_patched){var l=t.exec;t.exec=function(t,n,a,d,h){return r((function(){return e.updateHintNode(t)}),0),l(t)},t._sl_patched=!0}d.commands.addCommand({name:"triggerReferencesSearchPopup",exec:function(l){r((function(){return e.updateHintNode(l)}),0);var d=e.isCursorAtCitation(l);return!0===zm(zm(null!=l?l.completer:void 0,(function(e){return e.popup})),(function(e){return e.isOpen}))&&!0===d?(a.sendMB("bib-search-modal-opened"),e.searchEnabled=!0===zm(zm(zm(null!=n?n.$scope:void 0,(function(e){return e.project})),(function(e){return e.features})),(function(e){return e.referencesSearch})),e.openReferencesSearchModal()):t.exec(l)},bindKey:t.bindKey})}else console.log("could not find startAutocomplete command")}else console.log("no editor found")};var d=null;return l.$on("editor:inited",(function(t,n){return d=n,setTimeout(e.setup)})),e.insertKeyAtCursor=function(e){if(null!=d){var t=d.getCursorPosition(),n=d.getSession(),r=d.getSession().getTextRange(new Bm(t.row,0,t.row,t.column)),a=!d.getSession().getTextRange(new Bm(t.row,t.column,t.row,99999)).match(/^[^{]*}/),l=Math.max(r.lastIndexOf("{"),r.lastIndexOf(","),r.lastIndexOf(" "));return l<t.column-1?(n.remove(new Bm(t.row,l+1,t.row,t.column)),t=d.getCursorPosition(),n.insert(t,e)):n.insert(t,e),a?n.insert(d.getCursorPosition(),"}"):void 0}console.log("no editor found")},e.openReferencesSearchModal=function(){var n=t.open({templateUrl:"referencesSearchModalTemplate",controller:"ReferencesSearchModalController",scope:e,size:"lg",animation:!1,backdrop:!0,backdropClass:"references-search-modal-backdrop",keyboard:!0});return e.searchEnabled||a.send("subscription-funnel","editor-click-feature","references-search"),n.result.then((function(t){return e.insertKeyAtCursor(t)}))},n.referencesSearchManager={openReferencesModal:function(t){return e.openReferencesSearchModal(t)}}}}]);function zm(e,t){return null!=e?t(e):void 0}a.a.controller("ReferencesSearchModalController",["$scope","$modalInstance","$window","$timeout","ide","eventTracking",function(e,t,n,r,a,l){if(e.searchFeatureEnabled())return e.state={queryText:"",searchResults:null,selectedIndex:null,currentlySearching:!1,error:!1},e.handleInputKeyDown=function(t){return 40===t.keyCode?(t.preventDefault(),void e.moveSelectionForward()):38===t.keyCode?(t.preventDefault(),void e.moveSelectionBackward()):9===t.keyCode?(t.preventDefault(),void(t.shiftKey?e.moveSelectionBackward():e.moveSelectionForward())):13===t.keyCode?(t.preventDefault(),void e.acceptSelectedSearchResult()):[37,39].includes(t.keyCode)?void(e.state.selectedIndex=null):[8].includes(t.keyCode)?(e.state.selectedIndex=null,void r(e.doAutoSearch,0)):void(16===t.keyCode||t.altKey||t.ctrlKey||t.metaKey||r(e.doAutoSearch,0))},e.doAutoSearch=function(){var t=e.state;if(t.queryText&&t.queryText.length>=3)return e.doSearch()},e.moveSelectionForward=function(){if(null===e.state.selectedIndex){if(e.state.searchResults&&e.state.searchResults.length>0)return e.state.selectedIndex=0}else if(e.state.searchResults&&e.state.searchResults.length>0){e.state.selectedIndex++;var t=e.state.searchResults.length-1;if(e.state.selectedIndex>t)return e.state.selectedIndex=t}},e.moveSelectionBackward=function(){if(null===e.state.selectedIndex);else if(e.state.searchResults&&e.state.searchResults.length>0&&(e.state.selectedIndex--,e.state.selectedIndex<0))return e.state.selectedIndex=null},e.doSearch=function(){if(""!==e.state.queryText){e.state.queryText,window.csrfToken;return e.state.currentlySearching=!0,a.$http.post("/project/".concat(e.project_id,"/references/search"),{query:e.state.queryText,_csrf:window.csrfToken}).then((function(t){return e.state.searchResults=t.data.hits,e.state.selectedIndex=null,e.state.currentlySearching=!1,e.state.error=!1}),(function(t){return console.error(">> error searching references",t),e.state.selectedIndex=null,e.state.currentlySearching=!1,e.state.error=!0})),r((function(){return e.state.currentlySearching=!1}),3e4)}},e.selectIndex=function(t){if(e.state.searchResults)return e.state.selectedIndex=t},e.acceptSelectedSearchResult=function(){if(e.state.searchResults&&null!==e.state.selectedIndex){l.sendMB("bib-search-result-inserted");var n=e.state.searchResults[e.state.selectedIndex];return t.close(n._source.EntryKey)}},e.cancel=function(){return t.dismiss("cancel")}}]);function Hm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Um=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.fileTreeManager=t}var t,n,r;return t=e,(n=[{key:"fileExistsForPath",value:function(e){return!!this.fileTreeManager.findEntityByPath(e)}},{key:"getEntityForPath",value:function(e){for(var t,n=0,r=["",".png",".pdf",".jpg",".jpeg",".eps"];n<r.length;n++){var a=r[n];if(t=this.fileTreeManager.findEntityByPath("".concat(e).concat(a)))break}return t}},{key:"getPreviewUrlForEntity",value:function(e){return"/project/".concat(window.project_id,"/file/").concat(e.id)}},{key:"isPreviewableEntity",value:function(e){return!["eps","pdf"].includes(function(e){if(e&&e.name){var t=e.name.split(".").pop();return t?t.toLowerCase():null}return null}(e))}}])&&Hm(t.prototype,n),r&&Hm(t,r),e}();function Wm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Vm=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.replaceWord=this.replaceWord.bind(this),this.editor=t,this.highlightedWordManager=this.editor.highlightedWordManager}var t,n,r;return t=e,(n=[{key:"getLines",value:function(){return this.editor.getCodeMirror().getValue().split("\n")}},{key:"getLineCount",value:function(){return this.editor.getCodeMirror().doc.lineCount()}},{key:"getFirstVisibleRowNum",value:function(){return this.editor.getCodeMirror().getViewport().from}},{key:"getLastVisibleRowNum",value:function(){return this.editor.getCodeMirror().getViewport().to}},{key:"getLinesByRows",value:function(e){var t=this;return e.map((function(e){return t.editor.getCodeMirror().getLine(e)}))}},{key:"getSelectionContents",value:function(){return this.editor.getCodeMirror().getSelection()}},{key:"normalizeChangeEvent",value:function(e){return{start:{row:e.from.line},end:{row:e.to.line},action:null!=e.removed?"remove":"insert"}}},{key:"getCoordsFromContextMenuEvent",value:function(e){return e.stopPropagation(),{x:e.pageX,y:e.pageY}}},{key:"isContextMenuEventOnBottomHalf",value:function(e){var t=e.clientY,n=e.currentTarget.getBoundingClientRect();return(t-n.top)/n.height>.5}},{key:"preventContextMenuEventDefault",value:function(e){e.preventDefault()}},{key:"getHighlightFromCoords",value:function(e){var t=this.editor.getCodeMirror().coordsChar({left:e.x,top:e.y});return this.highlightedWordManager.findHighlightAtPosition(t)}},{key:"selectHighlightedWord",value:function(e){var t=e.marker.find();this.editor.getCodeMirror().setSelection(t.from,t.to)}},{key:"replaceWord",value:function(e,t){var n=this.editor.getCodeMirror();n.replaceSelection(t),n.focus()}}])&&Wm(t.prototype,n),r&&Wm(t,r),e}();function qm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Gm=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.onChange=this.onChange.bind(this),this.$scope=t,this.metadata=n,this.bibtexReferences=r,this.debouncer={}}var t,n,r;return t=e,(n=[{key:"getCommandCompletions",value:function(e){return[].concat(vu,this.getCommandCompletionsFromMetadata()).map((function(t){return{text:t.caption,displayText:t.caption,hint:e}}))}},{key:"getCommandCompletionsFromMetadata",value:function(){return d.a.flattenDeep(this.metadata.getAllPackages())}},{key:"getBeginCommandArguments",value:function(){return ku.all}},{key:"getBibtexArguments",value:function(){return this.bibtexReferences}},{key:"getReferenceArguments",value:function(){return this.metadata.getAllLabels()}},{key:"onChange",value:function(e){var t=e.getCursor().line,n=e.getLine(t);if(!(n.length>1e4))return/\\(usepackage|RequirePackage|label)(\[.*])?({.*})?/.test(n)?this.metadata.scheduleLoadDocMetaFromServer(this.$scope.docId):void 0}}])&&qm(t.prototype,n),r&&qm(t,r),e}();function Km(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ym=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.getCursor=this.getCursor.bind(this),this.editor=t}var t,n,r;return t=e,(n=[{key:"convertToAcePos",value:function(e){var t=e.line,n=e.ch;return{row:t?t+1:t,column:n?n+1:n}}},{key:"convertFromAcePos",value:function(e){var t=e.row,n=e.column;return{line:t?t-1:t,ch:n?n-1:0}}},{key:"getCursor",value:function(){return this.convertToAcePos(this.editor.getCodeMirror().getCursor())}},{key:"getEditorScrollPosition",value:function(){return this.editor.getCodeMirror().getViewport().from+10}},{key:"setCursor",value:function(e){return e=e.cursorPosition||{row:0,column:0},this.editor.getCodeMirror().setCursor(this.convertFromAcePos(e))}},{key:"setEditorScrollPosition",value:function(e){e=e.firstVisibleLine||0;var t=this.editor.getCodeMirror(),n=t.heightAtLine(e,"local");return t.scrollTo(null,n)}},{key:"clearSelection",value:function(){}},{key:"gotoLine",value:function(e,t){var n={cursorPosition:{row:e,column:t}};this.setCursor(n),this.centerOnCursor(e)}},{key:"centerOnCursor",value:function(){var e=this.editor.getCodeMirror(),t=e.getScrollInfo().clientHeight,n=e.cursorCoords(!0,"local"),r=(n.top+n.bottom-t)/2;e.scrollTo(null,r),e.focus()}},{key:"gotoOffset",value:function(){}}])&&Km(t.prototype,n),r&&Km(t,r),e}();function Xm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Jm=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.findTrackChangesMarker=this.findTrackChangesMarker.bind(this),this.getTrackChangesMarkers=this.getTrackChangesMarkers.bind(this),this.onInsertAdded=this.onInsertAdded.bind(this),this.shareJsOffsetToRowColumn=this.shareJsOffsetToRowColumn.bind(this),this.onDeleteAdded=this.onDeleteAdded.bind(this),this.onChangeMoved=this.onChangeMoved.bind(this),this.editor=t,this.cm=this.editor.getCodeMirror()}var t,n,r;return t=e,(n=[{key:"getTrackChangesMarkers",value:function(){return this.cm.doc.getAllMarks().filter((function(e){var t=e.className&&-1!==e.className.indexOf("track-changes-marker"),n="bookmark"===e.type&&e.replacedWith&&-1!==e.replacedWith.className.indexOf("track-changes-marker");return t||n}))}},{key:"findTrackChangesMarker",value:function(e){return this.getTrackChangesMarkers().find((function(t){return t.id===e}))}},{key:"clearAnnotations",value:function(){this.getTrackChangesMarkers().forEach((function(e){return e.clear()})),this.changeIdToMarkerIdMap={}}},{key:"tearDown",value:function(){this.changeIdToMarkerIdMap={}}},{key:"onInsertAdded",value:function(e){var t,n,r;t=this.shareJsOffsetToRowColumn(e.op.p),n=this.shareJsOffsetToRowColumn(e.op.p+e.op.i.length),r=this.cm.doc.markText({line:t.row,ch:t.column},{line:n.row,ch:n.column},{className:"track-changes-marker track-changes-added-marker"}),this.changeIdToMarkerIdMap[e.id]=r.id}},{key:"onDeleteAdded",value:function(e){var t=this.shareJsOffsetToRowColumn(e.op.p),n=document.createElement("span");n.className="track-changes-marker track-changes-deleted-marker";var r=this.cm.setBookmark({line:t.row,ch:t.column},{widget:n,insertLeft:!0});this.changeIdToMarkerIdMap[e.id]=r.id}},{key:"onInsertRemoved",value:function(e){var t=this.changeIdToMarkerIdMap[e.id];delete this.changeIdToMarkerIdMap[e.id];var n=this.findTrackChangesMarker(t);n&&n.clear()}},{key:"onDeleteRemoved",value:function(e){var t=this.changeIdToMarkerIdMap[e.id];delete this.changeIdToMarkerIdMap[e.id];var n=this.findTrackChangesMarker(t);n&&n.clear()}},{key:"onChangeMoved",value:function(e){var t,n=this.shareJsOffsetToRowColumn(e.op.p);t=null!=e.op.i?this.shareJsOffsetToRowColumn(e.op.p+e.op.i.length):n,this.updateMarker(e,n,t)}},{key:"onCommentAdded",value:function(e){var t,n,r;t=this.shareJsOffsetToRowColumn(e.op.p),n=this.shareJsOffsetToRowColumn(e.op.p+e.op.c.length),r=this.cm.doc.markText({line:t.row,ch:t.column},{line:n.row,ch:n.column},{className:"track-changes-marker track-changes-comment-marker"}),this.changeIdToMarkerIdMap[e.id]=r.id}},{key:"onCommentMoved",value:function(e){var t=this.shareJsOffsetToRowColumn(e.op.p),n=this.shareJsOffsetToRowColumn(e.op.p+e.op.c.length);this.updateMarker(e,t,n)}},{key:"onCommentRemoved",value:function(e){if(this.changeIdToMarkerIdMap[e.id]){var t=this.changeIdToMarkerIdMap[e.id];delete this.changeIdToMarkerIdMap[e.id];var n=this.findTrackChangesMarker(t);n&&n.clear()}}},{key:"updateMarker",value:function(e,t,n){var r=this.changeIdToMarkerIdMap[e.id];if(e.op.i||e.op.c){var a=this.findTrackChangesMarker(r);if(!a)return;a.clear();var l=e.op.i?"added":"comment",d=this.cm.doc.markText({line:t.row,ch:t.column},{line:n.row,ch:n.column},{className:"track-changes-marker track-changes-".concat(l,"-marker")});this.changeIdToMarkerIdMap[e.id]=d.id}}},{key:"shareJsOffsetToRowColumn",value:function(e){var t=this.cm.doc.getValue().split("\n");return dd.shareJsOffsetToRowColumn(e,t)}}])&&Xm(t.prototype,n),r&&Xm(t,r),e}();a.a.directive("cmEditor",["ide","metadata","localStorage","$cacheFactory","$http","$q",function(e,t,n,r,a,l){return{scope:{bundle:"=",formattingEvents:"=",initCodeMirror:"=",sharejsDoc:"=",readOnly:"=",spellCheck:"=",spellCheckLanguage:"=",trackChanges:"=",autoComplete:"=",autoCloseBrackets:"=",fontSize:"=",lineHeight:"=",docId:"=",onSave:"="},link:function(h,f,p){var y=f.find(".cm-editor-body"),w=null,_=null,C=null,S=null,k=new Gm(h,t,h.$root._references),x={triggerRecompile:h.onSave,triggerSyncToPdf:H};h.name="editor";var E=function(e,t){if(e!==t)return null!=t&&(h.$broadcast("beforeChangeDocument"),D(t)),null!=e&&L(e),null!=e&&null!=t?h.$broadcast("afterChangeDocument"):void 0};h.$watch("sharejsDoc",E),h.$watch("readOnly",(function(e){if(null!=e)return w.setReadOnly(e)}));var A=function(){return h.formattingEvents.on("section",(function(){return w.wrapSection()})),h.formattingEvents.on("subsection",(function(){return w.wrapSubsection()})),h.formattingEvents.on("bold",(function(){return w.wrapBold()})),h.formattingEvents.on("italic",(function(){return w.wrapItalic()})),h.formattingEvents.on("inlineMath",(function(){return w.wrapInlineMath()})),h.formattingEvents.on("displayMath",(function(){return w.wrapDisplayMath()})),h.formattingEvents.on("numberedList",(function(){return w.wrapNumberedList()})),h.formattingEvents.on("bulletList",(function(){return w.wrapBulletList()}))},T=/[\0\uD800-\uDFFF]/g,R=function(e,t){if(t.update){var n=t.text.join("\n");if(T.lastIndex=0,T.test(n)){for(var r=[],a=0;a<t.text.length;a++){var l=t.text[a].replace(T,"�");r.push(l)}t.update(t.from,t.to,r)}}},O=d.a.once((function(){return h.$broadcast("editorInit")})),M=null,P=function(){var e=w.getCodeMirror(),t=e.getScrollInfo(),n=e.lineAtHeight(t.top,"local");if(n!==M){M=n;var r=e.lineAtHeight(t.top+t.clientHeight,"local");h.$emit("scroll:editor:update",Math.floor((n+r)/2))}},L=function(e){return h.$applyAsync((function(){return w.openDoc(e.getSnapshot()),e.attachToCM(w.getCodeMirror()),w.enable(),e.on("remoteop.richtext",(function(){return w.update()})),w.getCodeMirror().on("scroll",P),w.getCodeMirror().clearHistory(),w.getCodeMirror().on("beforeChange",R),O(),h.readOnly||F(),N(),U()}))},D=function(e){return j(),B(),W(),w.getCodeMirror().off("beforeChange",R),e.detachFromCM(),w.getCodeMirror().off("scroll",P),e.off("remoteop.richtext")},I=function(e,t){return _.onChange(t)},F=function(){(_=new Yu(h,r,a,l,new Vm(w))).init();var e=w.getCodeMirror();return e.on("change",I),$(e.getWrapperElement()).on("contextmenu",_.onContextMenu),e.on("scroll",_.onScroll)},j=function(){var e=w.getCodeMirror();e.off("change",I),_&&($(e.getWrapperElement()).off("contextmenu",_.onContextMenu),e.off("scroll",_.onScroll))},N=function(){var e=w.getCodeMirror();(C=new yd(h,null,f,new Jm(w))).rangesTracker=h.sharejsDoc.ranges,C.onChangeSession(),e.on("swapDoc",C.onChangeSession)},B=function(){var e=w.getCodeMirror();C.tearDown(),e.off("swapDoc",C.onChangeSession)},z=function(){return S=new ud(h,new Ym(w),n),w.getCodeMirror().on("cursorActivity",S.onCursorChange),$(window).on("unload",S.onUnload)},H=function(){return S.onSyncToPdf()},U=function(){return w.getCodeMirror().on("change",k.onChange)},W=function(){return w.getCodeMirror().off("change",k.onChange)},V=function(e){return h[e]};if(h.$on("$destroy",(function(){return h.$broadcast("changeEditor"),j(),w.getCodeMirror().off("cursorActivity",S.onCursorChange),$(window).off("unload",S.onUnload),h.formattingEvents.off("section"),h.formattingEvents.off("subsection"),h.formattingEvents.off("bold"),h.formattingEvents.off("italic"),h.formattingEvents.off("inlineMath"),h.formattingEvents.off("displayMath"),h.formattingEvents.off("numberedList"),h.formattingEvents.off("bulletList"),W(),D(h.sharejsDoc),w.disable()})),w=new h.bundle.Editor(y[0],new Um(e.fileTreeManager),k,x,V),e.globalEditorWatchdogManager.attachToEditor("CM",w.getCodeMirror()),z(),E(h.sharejsDoc),A(),null!=p.resizeOn)for(var q=0,G=Array.from(p.resizeOn.split(","));q<G.length;q++){var K=G[q];h.$on(K,(function(){return Qm(null!=w?w.getCodeMirror():void 0,(function(e){return e.refresh()}))}))}return h.$watch("fontSize",(function(e){return y.css({"font-size":"".concat(e,"px")}),Qm(null!=w?w.getCodeMirror():void 0,(function(e){return e.refresh()}))})),h.$watch("lineHeight",(function(e){var t;if(e){switch(e){case"compact":t=1.33;break;case"normal":t=1.6;break;case"wide":t=2;break;default:t=1.6}return y.css({"line-height":t}),Qm(null!=w?w.getCodeMirror():void 0,(function(e){return e.refresh()}))}}))},template:'<div class="cm-editor-wrapper rich-text">\n<div class="cm-editor-body"></div>\n<spell-menu\n  open="spellMenu.open"\n  top="spellMenu.top"\n  left="spellMenu.left"\n  layout-from-bottom="spellMenu.layoutFromBottom"\n  highlight="spellMenu.highlight"\n  replace-word="replaceWord(highlight, suggestion)"\n  learn-word="learnWord(highlight)"\n></spell-menu>\n</div>'}}]);function Qm(e,t){return null!=e?t(e):void 0}a.a.directive("formattingButtons",(function(){return{scope:{buttons:"=",opening:"=",isFullscreenEditor:"="},link:function(e,t,n){e.showMore=!1,e.shownButtons=[],e.overflowedButtons=[];var r=e.$watch("opening",(function(e){if(!e)return a(),f(),r()})),a=function(){var n=t.width(),r=Math.floor(n/33);return r<e.buttons.length?(e.showMore=!0,n-=70,r=Math.floor(n/33),l(r)):(e.showMore=!1,l(r))},l=function(t){return e.$applyAsync((function(){return e.shownButtons=e.buttons.slice(0,t),e.overflowedButtons=e.buttons.slice(t)}))},h=d.a.debounce(a,300),f=function(){if($(window).on("resize",h),null!=n.resizeOn)return Array.from(n.resizeOn.split(",")).map((function(t){return e.$on(t,h)}))};return e.$watch("$destroy",(function(){return $(window).off("resize",h)})),e.$watch("isFullscreenEditor",(function(e,t){if(e!==t)return h()}))},templateUrl:"formattingButtonsTpl"}}));a.a.controller("EditorLoaderController",["$scope","localStorage",function(e,t){e.richText={bundle:null,formattingEvents:new Lc},e.$watch("editor.showRichText",(function(r){t("editor.mode.".concat(e.project_id),!0===r?"rich-text":"source"),r&&!e.richText.bundle&&Promise.all([n.e(1),n.e(27),n.e(22)]).then(n.bind(null,809)).then((function(t){return e.$applyAsync((function(){return e.richText.bundle=t}))}))}))}]);a.a.controller("EditorToolbarController",["$scope","ide",function(e,t){return e.buttons=[{iconText:"§",iconClass:"formatting-icon",title:"Insert Section Heading",handleClick:function(){return e.richText.formattingEvents.trigger("section")}},{iconText:"§",iconClass:"formatting-icon formatting-icon--small",title:"Insert Subsection Heading",handleClick:function(){return e.richText.formattingEvents.trigger("subsection")}},{iconClass:"formatting-icon fa fa-bold",title:"Format Bold",handleClick:function(){return e.richText.formattingEvents.trigger("bold")}},{iconClass:"formatting-icon fa fa-italic",title:"Format Italic",handleClick:function(){return e.richText.formattingEvents.trigger("italic")}},{iconText:"π",iconClass:"formatting-icon formatting-icon--serif",title:"Insert Inline Math",handleClick:function(){return e.richText.formattingEvents.trigger("inlineMath")}},{iconText:"Σ",iconClass:"formatting-icon formatting-icon--serif",title:"Insert Math on its own line",handleClick:function(){return e.richText.formattingEvents.trigger("displayMath")}},{iconClass:"formatting-icon fa fa-list-ol",title:"Insert Numbered List",handleClick:function(){return e.richText.formattingEvents.trigger("numberedList")}},{iconClass:"formatting-icon fa fa-list-ul",title:"Insert Bullet Point List",handleClick:function(){return e.richText.formattingEvents.trigger("bulletList")}}]}]),n(755);a.a.controller("TemplatesController",["$scope","$modal","ide",function(e,t,n){return e.openPublishTemplateModal=function(){var n=function(){return e.problemTalkingToTemplateApi=!1};return n(),t.open({templateUrl:"publishProjectAsTemplateModalTemplate",controller:"PublishProjectAsTemplateModalController",scope:e}).result.then(n,n)}}]);a.a.controller("PublishProjectAsTemplateModalController",["$scope","$modalInstance","ide","$http",function(e,t,n,r){n.$scope.user.id;e.templateDetails={exists:!1},e.state={publishInflight:!1,unpublishInflight:!1};var a=function(){return e.problemTalkingToTemplateApi=!0},l=function(){return r.get("/project/".concat(n.project_id,"/template")).then((function(t){var n=t.data;return e.templateDetails=n,e.templateDetails.publishedDate=Hd()(n.publishedDate).format("Do MMM YYYY, h:mm a"),e.templateDetails.description=n.description})).catch((function(){return a()}))};e.$watch(e.problemTalkingToTemplateApi,(function(e){if(null!=e)return l()}));var d=function(){return r.post("/project/".concat(n.project_id,"/template/description"),{description:e.templateDetails.description,_csrf:window.csrfToken})};return t.result.finally((function(){return d()})),e.publishTemplate=function(){return e.state.publishInflight=!0,d().then((function(){return r.post("/project/".concat(n.project_id,"/template/publish"),{_csrf:window.csrfToken}).then((function(){return l(),e.state.publishInflight=!1})).catch((function(){return a()}))})).catch((function(){return a()}))},e.unpublishTemplate=function(){return e.state.unpublishInflight=!0,r.post("/project/".concat(n.project_id,"/template/unpublish"),{_csrf:window.csrfToken}).then((function(){return l(),e.state.unpublishInflight=!1})).catch((function(){return a()}))},e.cancel=function(){return t.dismiss()}}]),a.a.controller("ReferencesController",["$scope","$modal","ide","$http",function(e,t,n,r){var a=n.$scope.user,l=null!=a?a.features:void 0;return e.thirdPartyReferencesEnabled=(null!=l?l.mendeley:void 0)||(null!=l?l.references:void 0),e.openNewDocModal=function(){return t.open({templateUrl:"newFileModalTemplate",controller:"NewFileModalController",size:"lg",resolve:{parent_folder:function(){return null},type:function(){return"mendeley"}}})}}]);var Zm=function(e,t){return["$scope","ide","$timeout","$window","$interval","eventTracking",function(n,r,a,l,d,h){var f=null!=r.$scope.user?r.$scope.user.features:void 0;n.userHasProviderFeature=(null!=f?f[e]:void 0)||(null!=f?f.references:void 0),n.userHasProviderLink=ev(null!=r.$scope.user?r.$scope.user.refProviders:void 0,(function(t){return t[e]})),n.canLoadBibtex=function(){return n.userHasProviderFeature&&n.userHasProviderLink},n.state.fetchingGroups=!1,n.state.inflight=!1,n.state.error=!1,n.state.errorType="default",n.data={isInitialized:!1,groups:null,selectedGroupId:null,format:"bibtex",name:"references.bib"};var p=function _handleError(e){"already exists"===e.data?y({error:"name-exists"}):"too many files"===e.data?y({error:"too-many-files"}):401===e.status?y({error:"expired"}):403===e.status?y({error:"forbidden"}):400===e.status?y({error:"default"}):502===e.status?y({error:"remote-service-error"}):y({error:!0})},y=function(e){null==e&&(e={}),n.state.fetchingGroups=!1,n.state.fetchingBibtexPreview=!1,n.state.inflight=!1,null!=e.error?(n.state.error=!0,!0===e.error?n.state.errorType="default":n.state.errorType=e.error):n.state.error=!1};n.hasGroups=function(){return null!=n.data.groups&&n.data.groups.length>0},n.supportsGroups=function(){if(n.canLoadBibtex())return y(),n.state.fetchingGroups=!0,r.$http.get("/".concat(e,"/groups"),{disableAutoLoginRedirect:!0}).then((function(e){var t=e.data;return n.data.groups=t.groups,n.data.selectedGroup=null,n.data.isInitialized=!0,n.$applyAsync((function(){return n.$broadcast("open")})),y()})).catch((function(e){return console.warn(e),p(e)}))};var w=function(){var e=n.data,t=e.name,r=e.isInitialized;null==t||0===t.length?n.state.valid=!1:n.state.valid=null!=r};n.$watch("data.name",w),w(),n.$on("create",(function(){if(n.data.isInitialized&&n.data.isInitialized&&n.data.name){var t={};return"mendeley"===e&&n.hasGroups()&&n.data.selectedGroupId&&(t.group_id=n.data.selectedGroupId),"zotero"===e&&(t.format=n.data.format),h.send("references-".concat(e),"modal","import-bibtex"),n.state.inflight=!0,r.fileTreeManager.createLinkedFile(n.data.name,n.parent_folder,e,t).then((function(){return n.$emit("done",{name:n.data.name,shouldReindexReferences:!0}),y()})).catch((function(e){return p(e)})).finally((function(){n.$$phase||n.$apply()}))}}));n.canLoadBibtex()&&(t?(n.state.fetchingGroups=!0,a((function(){return n.supportsGroups()}),500)):n.data.isInitialized=!0),n.linkAccount=function(){var t=l.open("/".concat(e,"/oauth"),"reference-auth","width=700,height=500");h.send("references-".concat(e),"modal","start-link-account");var f=d((function(){var l;try{l=ev(null!=t?t.location:void 0,(function(e){return e.pathname}))}catch(e){l=null}"/user/settings"===l&&(t.close(),h.send("references-".concat(e),"modal","end-link-account"),n.userHasProviderLink=!0,r.$scope.user.refProviders[e]=!0,a(n.supportsGroups(),500),d.cancel(f))}),1e3);return!0},window._S=n}]};function ev(e,t){return null!=e?t(e):void 0}function tv(e){var t=e.onClick,n=ln().t;return w.a.createElement("a",{role:"button",className:"btn btn-full-height",href:"#",onClick:t},w.a.createElement(qr,{type:"fw",modifier:"bars",classes:{icon:"editor-menu-icon"}}),w.a.createElement("p",{className:"toolbar-label"},n("menu")))}a.a.controller("MendeleyLinkedFileModalController",Zm("mendeley",!0)),a.a.controller("ZoteroLinkedFileModalController",Zm("zotero",!1)),a.a.controller("ReactRootContextController",["$scope","ide",function(e,t){e.editorLoading=!!t.$scope.state.loading,t.$scope.$watch("state.loading",(function(t){e.editorLoading=t})),e.setChatIsOpenAngular=function(e){t.$scope.$applyAsync((function(){t.$scope.ui.chatOpen=e}))},e.chatIsOpenAngular=t.$scope.ui.chatOpen,t.$scope.$watch("ui.chatOpen",(function(t){e.chatIsOpenAngular=t})),e.openDoc=function(e,n){return t.editorManager.openDoc(e,n)}}]),a.a.component("sharedContextReact",Object(p.react2angular)(ip.component,["editorLoading","setChatIsOpenAngular","chatIsOpenAngular","openDoc","onlineUsersArray"])),tv.propTypes={onClick:C.a.func.isRequired};var nv=tv;function rv(e){var t=e.brandVariationHomeUrl,n=e.brandVariationName,r=e.logoImgUrl;return w.a.createElement("a",{className:"btn btn-full-height header-cobranding-logo-container",href:t,target:"_blank",rel:"noreferrer noopener"},w.a.createElement("img",{src:r,className:"header-cobranding-logo",alt:n}))}rv.propTypes={brandVariationHomeUrl:C.a.string.isRequired,brandVariationName:C.a.string.isRequired,logoImgUrl:C.a.string.isRequired};var iv=rv;var ov=function(){var e=ln().t;return w.a.createElement("a",{className:"toolbar-header-back-projects",href:"/project"},w.a.createElement(qr,{type:"fw",modifier:"level-up",accessibilityLabel:e("back_to_your_projects")}))};function av(e){var t=e.chatIsOpen,n=e.unreadMessageCount,r=e.onClick,a=ln().t,l=De()("btn","btn-full-height","btn-full-height-no-border",{active:t}),d=n>0;return w.a.createElement("a",{role:"button",className:l,href:"#",onClick:r},w.a.createElement(qr,{type:"fw",modifier:"comment",classes:{icon:d?"bounce":void 0}}),d?w.a.createElement("span",{className:"label label-info"},n):null,w.a.createElement("p",{className:"toolbar-label"},a("chat")))}av.propTypes={chatIsOpen:C.a.bool,unreadMessageCount:C.a.number.isRequired,onClick:C.a.func.isRequired};var sv=av;function lv(e){var t=e.onlineUsers,n=e.goToUser,r=ln().t;return t.length>=4?w.a.createElement(Ho,{id:"online-users",className:"online-users",pullRight:!0},w.a.createElement(uv,{bsRole:"toggle",onlineUserCount:t.length}),w.a.createElement(Ho.Menu,null,w.a.createElement(Vo,{header:!0},r("connected_users")),t.map((function(e){return w.a.createElement(Vo,{as:"button",key:e.user_id,eventKey:e,onSelect:n},w.a.createElement(cv,{user:e,onClick:n,showName:!0}))})))):w.a.createElement("div",{className:"online-users"},t.map((function(e){return w.a.createElement(Ia,{key:e.user_id,placement:"bottom",trigger:["hover","focus"],overlay:w.a.createElement(va,{id:"tooltip-online-user"},e.name)},w.a.createElement("span",null,w.a.createElement(cv,{user:e,onClick:n})))})))}function cv(e){var t=e.user,n=e.showName,r=e.onClick,a="hsl(".concat(id.a.getHueForUserId(t.user_id),", 70%, 50%)");return w.a.createElement("span",{onClick:function(){r(t)}},w.a.createElement("span",{className:"online-user",style:{backgroundColor:a}},t.name.slice(0,1)),n&&t.name)}lv.propTypes={onlineUsers:C.a.arrayOf(C.a.shape({user_id:C.a.string.isRequired,name:C.a.string.isRequired})).isRequired,goToUser:C.a.func.isRequired},cv.propTypes={user:C.a.shape({user_id:C.a.string.isRequired,name:C.a.string.isRequired}),showName:C.a.bool,onClick:C.a.func.isRequired};var uv=w.a.forwardRef((function(e,t){var n=ln().t;return w.a.createElement(Ia,{placement:"left",overlay:w.a.createElement(va,{id:"tooltip-connected-users"},n("connected_users"))},w.a.createElement("button",{className:"btn online-user online-user-multi",onClick:e.onClick},w.a.createElement("strong",null,e.onlineUserCount),w.a.createElement(qr,{type:"users",modifier:"fw"})))}));uv.propTypes={onlineUserCount:C.a.number.isRequired,onClick:C.a.func};var dv=lv;function hv(e){var t=e.cobranding,n=e.onShowLeftMenuClick,r=e.chatIsOpen,a=e.toggleChatOpen,l=e.unreadMessageCount,d=e.onlineUsers,h=e.goToUser;return w.a.createElement("header",{className:"toolbar toolbar-header toolbar-with-labels"},w.a.createElement("div",{className:"toolbar-left"},w.a.createElement(nv,{onClick:n}),t?w.a.createElement(iv,t):null,w.a.createElement(ov,null)),w.a.createElement("div",{className:"toolbar-right"},w.a.createElement(dv,{onlineUsers:d,goToUser:h}),w.a.createElement(sv,{chatIsOpen:r,onClick:a,unreadMessageCount:l})))}hv.propTypes={onShowLeftMenuClick:C.a.func.isRequired,cobranding:C.a.object,chatIsOpen:C.a.bool,toggleChatOpen:C.a.func.isRequired,unreadMessageCount:C.a.number.isRequired,onlineUsers:C.a.array.isRequired,goToUser:C.a.func.isRequired};var fv=hv;function pv(e){var t=e.onShowLeftMenuClick,n=df(),r=n.cobranding,a=n.loading,l=n.ui,d=n.onlineUsersArray,h=n.openDoc,f=np(),p=f.resetUnreadMessageCount,_=f.unreadMessageCount,C=Object(y.useCallback)((function(){l.chatIsOpen||p(),l.toggleChatOpen()}),[l,p]);return w.a.createElement(fv,{style:a?{display:"none"}:{},cobranding:r,onShowLeftMenuClick:t,chatIsOpen:l.chatIsOpen,unreadMessageCount:_,toggleChatOpen:C,onlineUsers:d,goToUser:function(e){e.doc&&"number"==typeof e.row&&h(e.doc,{gotoLine:e.row+1})}})}pv.propTypes={onShowLeftMenuClick:C.a.func.isRequired};var gv=pv;a.a.controller("EditorNavigationToolbarController",["$scope","ide",function(e,t){e.onShowLeftMenuClick=function(){return t.$scope.$applyAsync((function(){t.$scope.ui.leftMenuShown=!t.$scope.ui.leftMenuShown}))}}]),a.a.component("editorNavigationToolbarRoot",Object(p.react2angular)(ip.use(gv),["onShowLeftMenuClick"])),a.a.controller("IdeController",["$scope","$timeout","ide","localStorage","eventTracking","metadata","$q","CobrandingDataService",function(e,t,n,r,a,l,d,h){var f,p,y;e.$originalApply=e.$apply,e.$apply=function(e){null==e&&(e=function(){});var t=this.$root.$$phase;return"$apply"===t||"$digest"===t?e():this.$originalApply(e)},e.state={loading:!0,load_progress:40,error:null},e.ui={leftMenuShown:!1,view:"editor",chatOpen:!1,pdfLayout:"sideBySide",pdfHidden:!1,pdfWidth:0,reviewPanelOpen:r("ui.reviewPanelOpen.".concat(window.project_id)),miniReviewPanelVisible:!1,chatResizerSizeOpen:window.uiConfig.chatResizerSizeOpen,chatResizerSizeClosed:window.uiConfig.chatResizerSizeClosed},e.user=window.user,e.settings=window.userSettings,e.anonymous=window.anonymous,e.isTokenMember=window.isTokenMember,e.isRestrictedTokenMember=window.isRestrictedTokenMember,e.cobranding={isProjectCobranded:h.isProjectCobranded(),logoImgUrl:h.getLogoImgUrl(),submitBtnHtml:h.getSubmitBtnHtml(),brandVariationName:h.getBrandVariationName(),brandVariationHomeUrl:h.getBrandVariationHomeUrl()},e.chat={},n.toggleReviewPanel=e.toggleReviewPanel=function(){if(e.project.features.trackChangesVisible)return e.ui.reviewPanelOpen=!e.ui.reviewPanelOpen,a.sendMB("rp-toggle-panel",{value:e.ui.reviewPanelOpen})},e.$watch("ui.reviewPanelOpen",(function(e){if(null!=e)return r("ui.reviewPanelOpen.".concat(window.project_id),e)})),e.$on("layout:pdf:resize",(function(t,n){return e.ui.pdfHidden=n.east.initClosed,e.ui.pdfWidth=n.east.size})),e.$watch("ui.view",(function(t,n){if(t!==n&&e.$broadcast("layout:flat-screen:toggle"),null!=t&&"editor"!==t&&"pdf"!==t)return a.sendMBOnce("ide-open-view-".concat(t,"-once"))})),e.$watch("ui.chatOpen",(function(e){if(e)return a.sendMBOnce("ide-open-chat-once")})),e.$watch("ui.leftMenuShown",(function(e){if(e)return a.sendMBOnce("ide-open-left-menu-once")})),e.trackHover=function(e){return a.sendMBOnce("ide-hover-".concat(e,"-once"))},window._ide=n,n.validFileRegex="^[^*/]*$";var w=window.location&&window.location.search&&window.location.search.match(/ws=fallback/);n.wsUrl=w?null:window.sharelatex.wsUrl||null,n.project_id=e.project_id=window.project_id,n.$scope=e,n.referencesSearchManager=new $p(n,e),n.loadingManager=new Zl(e),n.connectionManager=new Tc(n,e),n.fileTreeManager=new sl(n,e),n.editorManager=new Fd(n,e,r),n.onlineUsersManager=new Bd(n,e),window.data.useV2History?n.historyManager=new ch(n,e,r):n.historyManager=new Gd(n,e),n.pdfManager=new Sp(n,e),n.permissionsManager=new uh(n,e),n.binaryFilesManager=new xp(n,e),n.metadataManager=new Op(n,e,l),n.outlineManager=new tg(n,e);var _=!1;e.$on("project:joined",(function(){if(!_)return _=!0,mv(null!=e?e.project:void 0,(function(e){return e.deletedByExternalDataSource}))&&n.showGenericMessageModal("Project Renamed or Deleted","This project has either been renamed or deleted by an external data source such as Dropbox.\nWe don't want to delete your data on Overleaf, so this project still contains your history and collaborators.\nIf the project has been renamed please look in your project list for a new project under the new name."),t((function(){if(e.permissions.write)return n.metadataManager.loadProjectMetaFromServer(),!0}),200)}));var C=!1;e.$on("doc:opened",(function(){if(!C)return e.$broadcast("ide:loaded"),C=!0})),e.$on("cursor:editor:update",a.editingSessionHeartbeat);var S=["ambiance","chaos","clouds_midnight","cobalt","idle_fingers","merbivore","merbivore_soft","mono_industrial","monokai","pastel_on_dark","solarized_dark","terminal","tomorrow_night","tomorrow_night_blue","tomorrow_night_bright","tomorrow_night_eighties","twilight","vibrant_ink"];e.darkTheme=!1,e.$watch("settings.editorTheme",(function(t){return Array.from(S).includes(t)?e.darkTheme=!0:e.darkTheme=!1})),n.localStorage=r,n.browserIsSafari=!1,e.switchToFlatLayout=function(t){return e.ui.pdfLayout="flat",e.ui.view=t,n.localStorage("pdf.layout","flat")},e.switchToSideBySideLayout=function(t){return e.ui.pdfLayout="sideBySide",e.ui.view=t,r("pdf.layout","split")},(p=r("pdf.layout"))?("split"===p&&e.switchToSideBySideLayout(),"flat"===p&&e.switchToFlatLayout()):e.switchToSideBySideLayout();try{y=navigator.userAgent,n.browserIsSafari=y&&/.*Safari\/.*/.test(y)&&!/.*Chrome\/.*/.test(y)&&!/.*Chromium\/.*/.test(y)}catch(e){f=e,console.error(f)}n.browserIsSafari&&(n.safariScrollPatcher=new ng(e));try{null!=(parseFloat(navigator.userAgent.split(" Chrome/")[1])||null)&&document.styleSheets[0].insertRule(".ace_editor.ace_autocomplete .ace_completion-highlight { text-shadow: none !important; font-weight: bold; }",1)}catch(e){f=e,console.error(f)}return n.featureToggle=mv(mv("undefined"!=typeof location&&null!==location?location.search:void 0,(function(e){return e.match(/^\?ft=(\w+)$/)})),(function(e){return e[1]})),n.socket.on("project:publicAccessLevel:changed",(function(t){if(null!=t.newAccessLevel)return n.$scope.project.publicAccesLevel=t.newAccessLevel,e.$digest()}))}]);t.default=angular.bootstrap(document.body,["SharelatexApp"]);function mv(e,t){return null!=e?t(e):void 0}},,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return p}));n(50),n(51),n(71),n(11),n(24),n(21),n(16),n(8),n(48),n(10),n(27),n(9),n(29);var r=n(0),a=n(152);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,l=void 0;try{for(var d,h=e[Symbol.iterator]();!(r=(d=h.next()).done)&&(n.push(d.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==h.return||h.return()}finally{if(a)throw l}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var f=0,p=Object(r.memo)((function(e){var t=e.children,n=l(function(e){if("manager"in e){return[{dragDropManager:e.manager},!1]}var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w(),n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,l=t;l[y]||(l[y]=Object(a.b)(e,t,n,r));return l[y]}(e.backend,e.context,e.options,e.debugMode),n=!e.context;return[t,n]}(h(e,["children"])),2),d=n[0],p=n[1];return r.useEffect((function(){return p&&f++,function(){p&&(0===--f&&(w()[y]=null))}}),[]),r.createElement(a.a.Provider,{value:d},t)}));p.displayName="DndProvider";var y=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");function w(){return void 0!==e?e:window}}).call(this,n(39))}])}));